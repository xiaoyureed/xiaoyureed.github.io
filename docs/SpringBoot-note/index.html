<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-SpringBoot-note">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Spring Boot å¤‡å¿˜ - Xiaoyureed çš„ç½‘ç»œ Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/img/logo.webp"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/img/logo.webp"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/docs/SpringBoot-note"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="keywords" content="xiaoyureed"><meta data-rh="true" name="keywords" content="blog, java, spring, microservice, python, rust, typescript, react, web"><meta data-rh="true" name="keywords" content=" åŠè·¯è½¬è¡Œçš„ç¼–ç¨‹çˆ±å¥½è€…, å†™è¿‡ Python, Rust, ç°åœ¨ä¸»æ”» Java åˆ†å¸ƒå¼ç³»ç»Ÿ"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring Boot å¤‡å¿˜ - Xiaoyureed çš„ç½‘ç»œ Wiki"><meta data-rh="true" name="description" content="æ®µå­: ä¸ç®¡ä»€ä¹ˆä¸šåŠ¡ï¼Œç›´æ¥ä¸Šä¸€å¥—ï¼šspring boot+mysql é›†ç¾¤åˆ†åº“åˆ†è¡¨è¯»å†™åˆ†ç¦»ä¸»å¤‡åˆ‡æ¢+kafak é›†ç¾¤+redis é›†ç¾¤ç”¨äºç¼“å­˜æˆ–è€…åˆ†å¸ƒå¼é”+prometheus grafana æ€§èƒ½ç›‘æ§+ELK æ—¥å¿—æ”¶é›†åˆ†æ+Flink ä¸ Hive æµæ‰¹æ•°ä»“+k8s éƒ¨ç½²+åŒæœºæˆ¿å®¹ç¾"><meta data-rh="true" property="og:description" content="æ®µå­: ä¸ç®¡ä»€ä¹ˆä¸šåŠ¡ï¼Œç›´æ¥ä¸Šä¸€å¥—ï¼šspring boot+mysql é›†ç¾¤åˆ†åº“åˆ†è¡¨è¯»å†™åˆ†ç¦»ä¸»å¤‡åˆ‡æ¢+kafak é›†ç¾¤+redis é›†ç¾¤ç”¨äºç¼“å­˜æˆ–è€…åˆ†å¸ƒå¼é”+prometheus grafana æ€§èƒ½ç›‘æ§+ELK æ—¥å¿—æ”¶é›†åˆ†æ+Flink ä¸ Hive æµæ‰¹æ•°ä»“+k8s éƒ¨ç½²+åŒæœºæˆ¿å®¹ç¾"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/docs/SpringBoot-note"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/SpringBoot-note" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/SpringBoot-note" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/SpringBoot-note" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5SAMPKXTP9-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Xiaoyureed çš„ç½‘ç»œ Wiki" href="/opensearch.xml">


<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f6da56a47f5085d1e0fedae39b8de00a";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.defer=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script>
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="xiaoyureed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="xiaoyureed Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="xiaoyureed JSON Feed">

<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)">
<meta name="description" content="Xiaoyureed çš„ä¸ªäººåšå®¢"><link rel="stylesheet" href="/assets/css/styles.d08d09a2.css">
<link rel="preload" href="/assets/js/runtime~main.6c74a546.js" as="script">
<link rel="preload" href="/assets/js/main.c2c58f90.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><a href="/docs/rust-note" target="_blank">Rust æŒ‡åŒ—, æ¬¢è¿æŸ¥çœ‹...</a></div><button type="button" aria-label="å…³é—­" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">èœå•</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/archive">åšå®¢</a></li><li><a class="dropdown__link" href="/docs/intro">æ•™ç¨‹</a></li><li><a class="dropdown__link" href="/resource">å¯¼èˆª</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--dark_i4oU"><b></b></a><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/SpringBoot-note">Spring Boot å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/autohotkey">Autohotkey è„šæœ¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/blockchain">blockchainåŒºå—é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/c-sharp-and-dot-net">C# &amp; .NET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cpp">CPP and C å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/css-pre-processor">å‡ ç§CSSé¢„å¤„ç†å™¨æ¯”è¾ƒé€‰å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design-pattern-note">Design Pattern ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dev-resources">å¼€å‘è€…èµ„æº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/distributed-system">Distributed System åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/effective-java-reading-note">Effective Java é˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/elk-elastic-log">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/english-note">è‹±è¯­å­¦ä¹ ğŸ”¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/extjs-note">Extjs ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/git-note">Git å¤‡å¿˜ ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/golang-note">Golang ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/gps-gis-tracing">åŸºäºåœ°ç†ä½ç½®å¼€å‘æŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/gradle">Gradle note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/greasy-monkey">æ²¹çŒ´æ’ä»¶&amp;ç¼–å†™è„šæœ¬ğŸ’</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/groovy-note">groovy note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/health">Health å…³çˆ±ç¨‹åºå‘˜å¥åº·ğŸ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/interview-system-design">ç³»ç»Ÿè®¾è®¡ System design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iot">Iot ç‰©è”ç½‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-concurrent">Java ConcurrentğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-memory-model-jmm-jvm">JMM and GCğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-note">Java Core ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/js-tutorial">JavaScript tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kotlin">kotlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes-k8s">kubernetes-k8s â˜ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux-note">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/low-code-platform">Low code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mac">Mac å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/machine-learning-ml">machine-learning-ml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/marketing-seo">Marketing SEO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/maven-note">Maven NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/message-queue">Message QueueğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/money">Investment Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mongodb-note">MongoDB NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/monitor-system-grafana-prometheus-influxdb-hbase">monitor-system-grafana-prometheusç›‘æ§ğŸ–¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mvc-mvvm">MVC to MVVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/netty-note">netty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nlp-natural-language-processing">nlp-natural-language-processingğŸ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nodejs-yarn-npm">Nodejs, Yarn, Npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/oracle">Oracle å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-big-data-introduce">å¤§æ•°æ®å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-cache">Cache ç¼“å­˜ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-computational-ad">è®¡ç®—å¹¿å‘Š Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-crawler-spider">ç½‘ç»œçˆ¬è™« Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-db-design-note">å…³ç³»å‹æ•°æ®åº“è¡¨è®¾è®¡ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-desktop-develop">æ¡Œé¢åº”ç”¨å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-http-restful">HTTP protocol Intro &amp; RESTful</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-reactive-programming">å“åº”å¼ç¼–ç¨‹ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rule-engine-note">è§„åˆ™å¼•æ“ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/php-note">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/play-framework">Playæ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/postgres-note">Postgres noteğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/process-workflow-bpm-engine">å·¥ä½œæµå¼•æ“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/protect-your-app-authentication-oauth2-jwt-https">Protect Your App å®‰å…¨ä¿æŠ¤è®¤è¯é‰´æƒğŸ”‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/python-note">PythonğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quant-money">é‡åŒ–äº¤æ˜“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quarkus">Quarkus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/react-note">ReactğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/real-time-communication-protocol">å®æ—¶é€šä¿¡ Real-time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/redis-note">RedisğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/regex">Regular Expression æ­£åˆ™ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/rust-note">Rust ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/serverless">Serverless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/service-mesh">service mesh æœåŠ¡ç½‘æ ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/servlet">Servlet Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/shell-bash-note">shell-bashè„šæœ¬æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springcloud-note">Spring Cloud ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springmvc-note">Spring MVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/task-schedule-note">Task Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tcp-ip-note-p2p">TCP IP, p2p</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tomcat-jetty-nginx">Tomcat Jetty Nginx ç­‰ web å®¹å™¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/vertx">Vertx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/video-creator">æ‹æ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/webassembly">webassembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/webpack-esbuild-vite-rollup">å‰ç«¯æ‰“åŒ…æ„å»ºå·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/windows-sub-system-on-linux">WSL ä½¿ç”¨</a></li></ul></nav><button type="button" title="æ”¶èµ·ä¾§è¾¹æ " aria-label="æ”¶èµ·ä¾§è¾¹æ " class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spring Boot å¤‡å¿˜</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring Boot å¤‡å¿˜</h1></header><div align="center"><p>æ®µå­: ä¸ç®¡ä»€ä¹ˆä¸šåŠ¡ï¼Œç›´æ¥ä¸Šä¸€å¥—ï¼šspring boot+mysql é›†ç¾¤åˆ†åº“åˆ†è¡¨è¯»å†™åˆ†ç¦»ä¸»å¤‡åˆ‡æ¢+kafak é›†ç¾¤+redis é›†ç¾¤ç”¨äºç¼“å­˜æˆ–è€…åˆ†å¸ƒå¼é”+prometheus grafana æ€§èƒ½ç›‘æ§+ELK æ—¥å¿—æ”¶é›†åˆ†æ+Flink ä¸ Hive æµæ‰¹æ•°ä»“+k8s éƒ¨ç½²+åŒæœºæˆ¿å®¹ç¾</p><p><a href="https://github.com/YunaiV/SpringBoot-Labs" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/SpringBoot-Labs</a></p><p>è®°å½•springbootå­¦ä¹ ä¸­çš„é—®é¢˜, æ€»ç»“;
<a href="https://github.com/h2pl" target="_blank" rel="noopener noreferrer">https://github.com/h2pl</a> web é¡¹ç›®
<a href="https://github.com/dreamhead/moco" target="_blank" rel="noopener noreferrer">https://github.com/dreamhead/moco</a> mock æ¡†æ¶</p><p><a href="https://github.com/cloudfavorites/favorites-web" target="_blank" rel="noopener noreferrer">https://github.com/cloudfavorites/favorites-web</a> å•ä½“åº”ç”¨å®ä¾‹ hibernate jpa</p><p><a href="https://github.com/xkcoding/spring-boot-demo" target="_blank" rel="noopener noreferrer">https://github.com/xkcoding/spring-boot-demo</a> springboot demos</p></div><ul><li><a href="#1-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">1. å¸¸ç”¨å‘½ä»¤</a></li><li><a href="#2-%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC">2. éƒ¨ç½²è„šæœ¬</a></li><li><a href="#3-%E5%B7%A5%E5%85%B7%E7%B1%BB">3. å·¥å…·ç±»</a><ul><li><a href="#31-bean-%E5%A4%8D%E5%88%B6-%E5%85%8B%E9%9A%86">3.1. bean å¤åˆ¶ å…‹éš†</a></li><li><a href="#32-%E5%AD%97%E7%AC%A6%E4%B8%B2">3.2. å­—ç¬¦ä¸²</a></li><li><a href="#33-%E7%BC%96%E8%A7%A3%E7%A0%81">3.3. ç¼–è§£ç </a></li><li><a href="#34-commons-lang3">3.4. commons-lang3</a></li><li><a href="#35-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">3.5. æ–‡ä»¶æ“ä½œ</a></li><li><a href="#36-commons-collections4">3.6. commons-collections4</a></li></ul></li><li><a href="#4-%E5%92%8C-react-%E4%B8%80%E8%B5%B7%E6%89%93%E5%8C%85">4. å’Œ react ä¸€èµ·æ‰“åŒ…</a></li><li><a href="#5-spring-boot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3">5. Spring Bootä¸­çš„æ³¨è§£</a><ul><li><a href="#51-configurationproperties-%E5%92%8C-value">5.1. @ConfigurationProperties å’Œ @Value</a></li><li><a href="#52-enableconfigurationproperties">5.2. @EnableConfigurationProperties</a></li><li><a href="#53-enableautoconfiguration">5.3. @EnableAutoConfiguration</a></li><li><a href="#54-componentscan">5.4. @ComponentScan</a></li><li><a href="#55-springbootapplication">5.5. @SpringBootApplication</a></li><li><a href="#56-component%E5%92%8Cbean%E5%92%8Cconfigration%E5%8C%BA%E5%88%AB">5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«</a></li><li><a href="#57-import%E5%92%8Cimportresource%E5%92%8Cpropertysource%E6%AF%94%E8%BE%83">5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ</a></li></ul></li><li><a href="#6-context-%E4%B8%8A%E4%B8%8B%E6%96%87-%E6%89%8B%E5%8A%A8%E6%B3%A8%E5%86%8Cbean">6. context ä¸Šä¸‹æ–‡ æ‰‹åŠ¨æ³¨å†Œbean</a></li><li><a href="#7-%E5%AE%9E%E7%8E%B0%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8">7. å®ç°äº‹ä»¶é©±åŠ¨</a></li><li><a href="#8-%E4%BC%98%E9%9B%85%E5%81%9C%E6%9C%BA-%E5%85%B3%E6%9C%BA">8. ä¼˜é›…åœæœº å…³æœº</a></li><li><a href="#9-%E9%9D%99%E6%80%81%E6%B3%A8%E5%85%A5">9. é™æ€æ³¨å…¥</a><ul><li><a href="#91-set%E6%B3%A8%E5%85%A5">9.1. setæ³¨å…¥</a></li><li><a href="#92-postconstruct-%E6%B3%A8%E5%85%A5">9.2. @PostConstruct æ³¨å…¥</a></li><li><a href="#93-%E9%80%9A%E8%BF%87-applicationcontext">9.3. é€šè¿‡ ApplicationContext</a></li></ul></li><li><a href="#10-%E4%BD%BF%E7%94%A8starter">10. ä½¿ç”¨starter</a><ul><li><a href="#101-%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8Bor%E5%8E%9F%E7%90%86">10.1. åŠ è½½è¿‡ç¨‹oråŸç†</a></li><li><a href="#102-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E4%BC%9A%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E6%B3%A8%E8%A7%A3">10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£</a></li><li><a href="#103-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B">10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹</a><ul><li><a href="#1031-spring-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">10.3.1. spring åŠ¨æ€ä»£ç†</a></li></ul></li><li><a href="#104-conditional">10.4. @Conditional</a></li><li><a href="#105-%E5%B0%81%E8%A3%85%E7%BB%84%E5%90%88%E6%9D%A1%E4%BB%B6">10.5. å°è£…ç»„åˆæ¡ä»¶</a></li><li><a href="#106-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84-starter">10.6. åˆ›å»ºè‡ªå·±çš„ starter</a></li><li><a href="#107-%E5%8F%8D%E7%88%AC%E8%99%AB-starter">10.7. åçˆ¬è™« starter</a></li><li><a href="#gprc-starter">gprc starter</a></li></ul></li><li><a href="#11-%E7%9B%91%E6%8E%A7-and-%E5%AE%89%E5%85%A8">11. ç›‘æ§ and å®‰å…¨</a><ul><li><a href="#111-spring-boot-actuator-%E7%9B%91%E6%8E%A7">11.1. spring-boot-actuator ç›‘æ§</a></li><li><a href="#112-spring-boot-admin-%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2">11.2. spring boot admin ç›‘æ§ç•Œé¢</a></li><li><a href="#113-spring-boot-starter-security">11.3. spring-boot-starter-security</a><ul><li><a href="#1131-security%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D">11.3.1. securityç»„ä»¶ä»‹ç»</a></li><li><a href="#1132-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-%E5%92%8C-%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81">11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç </a></li><li><a href="#1133-%E7%A6%81%E7%94%A8%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%81">11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯</a></li><li><a href="#1134-%E9%85%8D%E7%BD%AE%E4%B8%AD-websecurity-%E5%92%8C-httpsecurity-%E5%8C%BA%E5%88%AB">11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«</a></li><li><a href="#1135-%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F">11.3.5. é…ç½®è·¨åŸŸ</a></li></ul></li><li><a href="#114-oauth2">11.4. oauth2</a></li></ul></li><li><a href="#12-%E6%97%A5%E5%BF%97">12. æ—¥å¿—</a><ul><li><a href="#121-log4j2-marker-%E5%86%99%E5%85%A5%E5%88%B0%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6">12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶</a></li><li><a href="#122-logback">12.2. logback</a></li></ul></li><li><a href="#13-%E6%95%B0%E6%8D%AE%E5%B1%82">13. æ•°æ®å±‚</a><ul><li><a href="#131-canal-%E8%AE%A2%E9%98%85">13.1. canal è®¢é˜…</a></li><li><a href="#132-mybatis-%E8%87%AA%E5%8A%A8%E5%BB%BA%E8%A1%A8%E6%8F%92%E4%BB%B6">13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶</a></li><li><a href="#133-mybatis-crud-%E5%A2%9E%E5%BC%BA%E6%8F%92%E4%BB%B6">13.3. mybatis crud å¢å¼ºæ’ä»¶</a></li><li><a href="#134-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶</a><ul><li><a href="#1341-liquibase">13.4.1. liquibase</a></li><li><a href="#1342-flyway">13.4.2. Flyway</a><ul><li><a href="#working-process-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">working process å·¥ä½œåŸç†</a></li><li><a href="#how-to-verify-the-sql-update-%E6%A0%A1%E9%AA%8C%E5%8E%9F%E7%90%86">how to verify the sql update æ ¡éªŒåŸç†</a></li><li><a href="#how-to-use-flyway">how to use flyway</a></li></ul></li></ul></li><li><a href="#135-%E6%95%B0%E6%8D%AE%E5%BA%93-jdbc-url-%E5%92%8C%E9%A9%B1%E5%8A%A8-%E5%90%84%E7%A7%8D%E8%BF%9E%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2">13.5. æ•°æ®åº“ jdbc url å’Œé©±åŠ¨ å„ç§è¿æ¥å­—ç¬¦ä¸²</a></li><li><a href="#136-graphql%E9%9B%86%E6%88%90">13.6. graphqlé›†æˆ</a></li><li><a href="#137-%E5%90%AF%E5%8A%A8%E6%89%A7%E8%A1%8C-sql">13.7. å¯åŠ¨æ‰§è¡Œ SQL</a><ul><li><a href="#1371-%E5%88%A9%E7%94%A8-spring-jdbc">13.7.1. åˆ©ç”¨ spring jdbc</a></li><li><a href="#1372-%E4%BD%BF%E7%94%A8-jpa">13.7.2. ä½¿ç”¨ jpa</a></li><li><a href="#1373-datasourceinitializer">13.7.3. DataSourceInitializer</a></li><li><a href="#1374-maven-antrun-pluginn">13.7.4. maven-antrun-pluginn</a></li><li><a href="#1375-construct-a-script-execution-service-manually">13.7.5. construct a script execution service manually</a></li></ul></li><li><a href="#138-%E6%95%B4%E5%90%88-spring-jdbc">13.8. æ•´åˆ spring jdbc</a></li><li><a href="#139-%E6%95%B4%E5%90%88-hibernate-%E5%8D%B3-jpa">13.9. æ•´åˆ hibernate (å³ jpa)</a><ul><li><a href="#1391-jpa%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93">13.9.1. jpaæ³¨è§£æ€»ç»“</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E6%9E%9A%E4%B8%BE">ä½¿ç”¨æšä¸¾</a><ul><li><a href="#the-basic-usage">the basic usage</a></li><li><a href="#converter-%E6%8E%A8%E8%8D%90">@Converter (æ¨è)</a></li><li><a href="#postload-and-prepersist">@PostLoad and @PrePersist</a></li></ul></li><li><a href="#1392-jpa-querydsl-%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5">13.9.2. jpa queryDsl å¤šè¡¨è”æŸ¥</a></li><li><a href="#1393-jpa-%E6%94%AF%E6%8C%81-java8-time">13.9.3. jpa æ”¯æŒ java8 time</a></li><li><a href="#1394-%E5%AE%A1%E8%AE%A1-createddate">13.9.4. å®¡è®¡ createdDate</a></li><li><a href="#1395-%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%94%9F-sql">13.9.5. æ‰§è¡ŒåŸç”Ÿ SQL</a></li><li><a href="#1396-%E5%8A%A8%E6%80%81-sql">13.9.6. åŠ¨æ€ SQL</a></li><li><a href="#1397-spring-data-rest-%E9%85%8D%E5%90%88-spring-data-jpa">13.9.7. spring-data-rest é…åˆ spring-data-jpa</a></li></ul></li><li><a href="#1310-%E6%95%B4%E5%90%88-mybatis-plus">13.10. æ•´åˆ mybatis-plus</a></li><li><a href="#1311-%E6%95%B4%E5%90%88-mybatis">13.11. æ•´åˆ mybatis</a><ul><li><a href="#13111-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">13.11.1. åŸºæœ¬é…ç½®</a></li><li><a href="#13112-%E4%BD%BF%E7%94%A8-%E6%8B%A6%E6%88%AA%E5%99%A8-interceptor-plugins">13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins</a><ul><li><a href="#131121-principle-of-plugins">13.11.2.1. principle of plugins</a></li><li><a href="#131122-use-scenarios">13.11.2.2. use scenarios</a></li><li><a href="#131123-how-to-use-plugins">13.11.2.3. how to use plugins</a></li></ul></li><li><a href="#13113-typehandler">13.11.3. typehandler</a></li><li><a href="#13114-%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">13.11.4. å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13115-%E5%8A%A8%E6%80%81%E5%AE%9A%E6%97%B6%E5%88%B7%E6%96%B0-sql-mapper-%E5%AE%9E%E7%8E%B0%E7%83%AD%E5%8A%A0%E8%BD%BD">13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½</a></li><li><a href="#13116-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%E7%9B%AE%E5%BD%95-and-%E5%BC%80%E5%90%AF%E5%8D%A0%E4%BD%8D%E7%AC%A6%E8%BF%87%E6%BB%A4">13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤</a></li></ul></li><li><a href="#1312-springboot-%E4%BA%8B%E5%8A%A1">13.12. springboot äº‹åŠ¡</a><ul><li><a href="#13121-%E4%BA%8B%E5%8A%A1%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#13122-transaction-not-working">13.12.2. transaction not working</a></li><li><a href="#13123-spring-%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E5%A4%B1%E6%95%88%E7%9A%84%E5%9D%91">13.12.3. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘</a></li><li><a href="#13124-transactional-%E6%B3%A8%E8%A7%A3">13.12.4. Transactional æ³¨è§£</a></li></ul></li><li><a href="#1313-%E7%BC%93%E5%AD%98">13.13. ç¼“å­˜</a><ul><li><a href="#13131-springboot-starter-cache">13.13.1. springboot-starter-cache</a></li><li><a href="#13132-caffeine">13.13.2. caffeine</a></li></ul></li><li><a href="#1314-%E9%85%8D%E5%90%88-h2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91">13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘</a><ul><li><a href="#13141-h2-%E5%92%8C-spring-data-jpa-%E9%85%8D%E5%90%88">13.14.1. h2 å’Œ spring data jpa é…åˆ</a></li><li><a href="#13142-%E5%92%8C-mybatis-plus-%E9%85%8D%E5%90%88">13.14.2. å’Œ mybatis-plus é…åˆ</a></li></ul></li><li><a href="#1315-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90">13.15. å¤šæ•°æ®æº</a><ul><li><a href="#13151-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE-%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13152-abstractroutingdatasource-%E5%8A%A8%E6%80%81%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2">13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢</a></li></ul></li><li><a href="#1316-%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B-databaseidprovider">13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider</a></li><li><a href="#1317-spring-kafka">13.17. spring kafka</a></li></ul></li><li><a href="#14-web-%E7%9B%B8%E5%85%B3">14. web ç›¸å…³</a><ul><li><a href="#141-%E5%8A%A0%E8%A7%A3%E5%AF%86">14.1. åŠ è§£å¯†</a></li><li><a href="#142-springboot-%E5%8F%91%E9%80%81-https-%E6%88%96%E8%80%85-http-%E5%AE%A2%E6%88%B7%E7%AB%AF-client">14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client</a><ul><li><a href="#1421-%E5%8F%91%E9%80%81-http-client">14.2.1. å‘é€ http client</a></li><li><a href="#1422-%E5%8F%91%E9%80%81-https-client">14.2.2. å‘é€ https client</a></li></ul></li><li><a href="#143-requestcontextholder">14.3. RequestContextHolder</a></li><li><a href="#144-%E8%A7%A3%E5%86%B3-api-%E7%89%88%E6%9C%AC%E5%85%B1%E5%AD%98">14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜</a><ul><li><a href="#1441-requestmappinghandlermapping">14.4.1. RequestMappingHandlerMapping</a></li><li><a href="#1442-request-matcher">14.4.2. request matcher</a></li><li><a href="#1443-request-condition">14.4.3. request condition</a></li></ul></li><li><a href="#145-%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%E7%9B%B8%E5%85%B3%E7%9A%84%E6%B3%A8%E8%A7%A3">14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£</a></li><li><a href="#146-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B">14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹</a></li><li><a href="#147-%E8%BF%94%E5%9B%9E%E5%9B%BE%E7%89%87">14.7. è¿”å›å›¾ç‰‡</a></li><li><a href="#148-rest-api-%E6%96%87%E6%A1%A3">14.8. rest api æ–‡æ¡£</a><ul><li><a href="#1481-knife4j">14.8.1. knife4j</a></li><li><a href="#1482-springdoc-openapi">14.8.2. springdoc-openapi</a></li><li><a href="#1483-swagger3">14.8.3. swagger3</a></li><li><a href="#1484-%E9%9B%86%E6%88%90swagger2">14.8.4. é›†æˆswagger2</a></li></ul></li><li><a href="#149-%E8%BF%87%E6%BB%A4%E5%99%A8-%E5%92%8C-%E6%8B%A6%E6%88%AA%E5%99%A8">14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨</a><ul><li><a href="#1491-%E5%8C%BA%E5%88%AB">14.9.1. åŒºåˆ«</a></li><li><a href="#1492-%E4%BD%BF%E7%94%A8-filter">14.9.2. ä½¿ç”¨ filter</a></li><li><a href="#1493-%E4%BD%BF%E7%94%A8-interceptor">14.9.3. ä½¿ç”¨ interceptor</a><ul><li><a href="#14931-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8">14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨</a></li><li><a href="#14932-%E5%9F%BA%E4%BA%8E-url-%E6%8B%A6%E6%88%AA">14.9.3.2. åŸºäº url æ‹¦æˆª</a></li><li><a href="#14933-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%8B%A6%E6%88%AA">14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª</a></li></ul></li></ul></li><li><a href="#1410-servlet-druid-%E7%9B%91%E6%8E%A7">14.10. servlet Druid ç›‘æ§</a></li><li><a href="#1411-aop-%E6%95%B4%E5%90%88%E4%BD%BF%E7%94%A8">14.11. aop æ•´åˆä½¿ç”¨</a><ul><li><a href="#14111-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">14.11.1. åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#14112-%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F">14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</a></li></ul></li><li><a href="#1412-controlleradvice-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">14.12. @controllerAdvice å¼‚å¸¸å¤„ç†</a></li><li><a href="#1413-httpservletrequest-%E7%9A%84%E8%BE%93%E5%85%A5%E6%B5%81%E5%8F%AA%E8%83%BD%E8%AF%BB%E5%8F%96%E4%B8%80%E6%AC%A1%E7%9A%84%E9%97%AE%E9%A2%98">14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜</a></li><li><a href="#1414-%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86">14.14. è·¯ç”±å¤„ç†</a><ul><li><a href="#14141-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84-%E6%9A%B4%E9%9C%B2%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90">14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº</a></li><li><a href="#14142-%E6%B7%BB%E5%8A%A0-view-controller">14.14.2. æ·»åŠ  view controller</a></li></ul></li><li><a href="#1415-spring-boot-starter-thymeleaf">14.15. spring-boot-starter-thymeleaf</a></li></ul></li><li><a href="#15-%E8%BF%90%E7%BB%B4%E9%83%A8%E7%BD%B2">15. è¿ç»´éƒ¨ç½²</a><ul><li><a href="#151-%E6%94%AF%E6%8C%81-https-ssl">15.1. æ”¯æŒ https ssl</a><ul><li><a href="#1511-nginx-%E9%85%8D%E7%BD%AE-https">15.1.1. nginx é…ç½® https</a></li><li><a href="#1512-%E6%94%AF%E6%8C%81-https-%E8%AE%BF%E9%97%AE">15.1.2. æ”¯æŒ https è®¿é—®</a></li><li><a href="#1513-http-%E8%AF%B7%E6%B1%82%E8%87%AA%E5%8A%A8%E8%BD%AC%E4%B8%BA-https">15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https</a></li><li><a href="#1514-%E5%90%8C%E6%97%B6%E6%94%AF%E6%8C%81-http-https">15.1.4. åŒæ—¶æ”¯æŒ http https</a></li></ul></li><li><a href="#152-%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2">15.2. å®¹å™¨åŒ–éƒ¨ç½²</a></li><li><a href="#153-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86">15.3. nginx åå‘ä»£ç†</a></li><li><a href="#154-%E5%86%85%E5%B5%8C-tomcat-%E8%B0%83%E4%BC%98">15.4. å†…åµŒ tomcat è°ƒä¼˜</a></li><li><a href="#155-%E9%85%8D%E7%BD%AE-war-%E5%8C%85%E9%83%A8%E7%BD%B2%E5%88%B0-tomcat">15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat</a></li></ul></li><li><a href="#16-spring-boot-%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91">16. spring boot ä¸­çš„å¹¶å‘</a><ul><li><a href="#161-%E4%BD%BF%E7%94%A8%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B">16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹</a><ul><li><a href="#1611-%E9%85%8D%E7%BD%AE%E7%BA%BF%E7%A8%8B%E6%B1%A0">16.1.1. é…ç½®çº¿ç¨‹æ± </a></li><li><a href="#1612-%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC-%E6%B2%A1%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC">16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼</a></li><li><a href="#1613-async%E5%A4%B1%E6%95%88">16.1.3. @Asyncå¤±æ•ˆ</a></li></ul></li></ul></li><li><a href="#17-%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81%E6%82%B2%E8%A7%82%E9%94%81">17. å®ç°ä¹è§‚é”æ‚²è§‚é”</a></li><li><a href="#18-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81">18. ç§»åŠ¨ç«¯æ¶ˆæ¯æ¨é€</a></li><li><a href="#19-%E5%8D%B3%E6%97%B6%E9%80%9A%E4%BF%A1-im%E7%B3%BB%E7%BB%9F">19. å³æ—¶é€šä¿¡ IMç³»ç»Ÿ</a></li><li><a href="#20-%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7">20. è¾…åŠ©å·¥å…·</a><ul><li><a href="#201-lombok-notice">20.1. lombok notice</a><ul><li><a href="#%E7%BC%96%E8%AF%91%E6%9C%9F%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%8E%9F%E7%90%86">ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†</a></li></ul></li><li><a href="#202-devtools">20.2. devtools</a></li><li><a href="#203-maven-wrapper">20.3. maven wrapper</a></li></ul></li><li><a href="#21-%E6%A0%A1%E9%AA%8C">21. æ ¡éªŒ</a><ul><li><a href="#211-%E6%A0%A1%E9%AA%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">21.1. æ ¡éªŒé…ç½®æ–‡ä»¶</a></li><li><a href="#212-%E6%A0%A1%E9%AA%8C%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0">21.2. æ ¡éªŒè¯·æ±‚å‚æ•°</a></li><li><a href="#213-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C">21.3. è‡ªå®šä¹‰æ ¡éªŒ</a></li><li><a href="#214-validated%E5%92%8Cvalid">21.4. @Validatedå’Œ@Valid</a></li></ul></li><li><a href="#22-runner-%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0">22. runner è·å–å‘½ä»¤è¡Œå‚æ•°</a><ul><li><a href="#221-%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0">22.1. è·å–å‘½ä»¤è¡Œå‚æ•°</a></li><li><a href="#222-applicationrunner-or-commandlinerunner">22.2. <code>ApplicationRunner</code> or <code>CommandLineRunner</code></a></li></ul></li><li><a href="#23-%E5%BC%80%E5%8F%91%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8">23. å¼€å‘å‘½ä»¤è¡Œåº”ç”¨</a></li><li><a href="#24-%E6%95%B4%E5%90%88-grpc">24. æ•´åˆ grpc</a></li><li><a href="#25-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6">25. ä»»åŠ¡è°ƒåº¦</a><ul><li><a href="#251-%E6%95%B4%E5%90%88-xxl-job-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%B9%B3%E5%8F%B0">25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°</a></li><li><a href="#252-%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1">25.2. å¼‚æ­¥ä»»åŠ¡</a></li><li><a href="#253-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1">25.3. å®šæ—¶ä»»åŠ¡</a><ul><li><a href="#2531-springboot-%E5%86%85%E7%BD%AE">25.3.1. springboot å†…ç½®</a></li><li><a href="#2532-%E9%9B%86%E6%88%90-quartz">25.3.2. é›†æˆ Quartz</a></li></ul></li></ul></li><li><a href="#26-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-and-%E7%8E%AF%E5%A2%83">26. é…ç½®æ–‡ä»¶ and ç¯å¢ƒ</a><ul><li><a href="#261-%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">26.1. è¯»å–é…ç½®æ–‡ä»¶</a><ul><li><a href="#2611-%E5%87%A0%E7%A7%8D%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95">26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•</a></li><li><a href="#2612-%E6%B3%A8%E5%85%A5%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B">26.1.2. æ³¨å…¥å¤æ‚ç±»å‹</a></li></ul></li><li><a href="#262-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%98%E5%85%88%E7%BA%A7">26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</a></li><li><a href="#263-%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF">26.3. è¯»å–ç¯å¢ƒä¿¡æ¯</a></li><li><a href="#264-%E4%B8%A4%E7%A7%8D%E5%BC%95%E5%85%A5-springboot-%E6%96%B9%E5%BC%8F">26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼</a></li></ul></li><li><a href="#27-%E5%BA%8F%E5%88%97%E5%8C%96-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">27. åºåˆ—åŒ– ååºåˆ—åŒ–</a><ul><li><a href="#271-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4-json">27.1. æ—¥æœŸæ—¶é—´ json</a></li><li><a href="#272-jackson-%E4%BD%BF%E7%94%A8">27.2. jackson ä½¿ç”¨</a><ul><li><a href="#2721-jsoncomponent">27.2.1. @JsonComponent</a></li><li><a href="#2722-jackson-%E5%9C%A8-springboot-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE">27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®</a></li><li><a href="#2723-jackson%E6%B3%A8%E8%A7%A3">27.2.3. jacksonæ³¨è§£</a></li><li><a href="#2724-objectmapper-%E5%AE%9A%E5%88%B6">27.2.4. objectmapper å®šåˆ¶</a></li><li><a href="#2725-objectmapper-%E4%BD%BF%E7%94%A8">27.2.5. objectmapper ä½¿ç”¨</a></li></ul></li></ul></li><li><a href="#28-%E6%8E%A5%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98">28. æ¥å…¥ç¬¬ä¸‰æ–¹æ”¯ä»˜</a></li><li><a href="#%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A0%88">è½»é‡çº§çš„æŠ€æœ¯æ ˆ</a><ul><li><a href="#dagger2-%E7%BC%96%E8%AF%91%E5%99%A8%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">dagger2 ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥</a></li></ul></li><li><a href="#29-%E6%8B%BE%E9%81%97">29. æ‹¾é—</a><ul><li><a href="#291-bean-%E6%87%92%E5%8A%A0%E8%BD%BD">29.1. bean æ‡’åŠ è½½</a></li><li><a href="#bean-%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96">bean å¾ªç¯ä¾èµ–</a></li></ul></li></ul><h1>1. å¸¸ç”¨å‘½ä»¤</h1><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">du -sh *.jar # jar size</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ‰“åŒ…æ—¶æ²¡æœ‰æŒ‡å®šä¸»ç±»ï¼Œæ‰§è¡Œå¯ä»¥ç”¨java -cp {xxx.jar} {ä¸»ç±»åç§°ï¼ˆç»å¯¹è·¯å¾„ï¼‰}ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># -cp æŒ‡å®šç±»è¿è¡Œæ‰€ä¾èµ–å…¶ä»–ç±»çš„è·¯å¾„ï¼Œé€šå¸¸æ˜¯ç±»åº“å’ŒjaråŒ…, </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ç­‰ä»· -classpath</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># å¤šä¸ªjaråŒ…ä¹‹é—´è¿æ¥ç¬¦ï¼šwindowä¸Šåˆ†å·â€œ;â€.Linuxä¸‹ä½¿ç”¨â€œ:â€</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># win</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -cp .;d:\work\other.jar;d:\work\my.jar packname.mainclassname </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># linux</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -cp .:/hone/myuser/work/other.jar:/hone/myuser/work/my.jar packname.mainclassname </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># è¡¨è¾¾å¼æ”¯æŒé€šé…ç¬¦</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -cp .;c:\work\my.jar;c:\work\*.jar packname.mainclassname </span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ‰“åŒ…æ—¶æŒ‡å®šäº†ä¸»ç±»ï¼Œæ‰§è¡Œå¯ä»¥ç›´æ¥ç”¨java -jar {xxx.jar}ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¼šç”¨åˆ°ç›®å½•META-INF\MANIFEST.MFæ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªå«Mainï¼Classçš„å‚æ•°ï¼Œå®ƒè¯´æ˜äº†java -jarå‘½ä»¤æ‰§è¡Œçš„ç±»</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># java -jaræ–¹å¼ä¸å¯ä»¥æŒ‡å®šé™„åŠ ä¾èµ–jaråŒ…ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -jar *.jar</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¾èµ–å¤šä¸ª jar ä¸ä½¿ç”¨é€šé…ç¬¦ä¹Ÿå¯ä»¥è¿™æ ·æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># -D è®¾ç½®ç³»ç»Ÿå±æ€§, é€šè¿‡System.getProperty(&quot;conf1&quot;);è·å¾—è¿™ä¸ªå€¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -Djava.ext.dirs=lib MyClass </span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># è·³è¿‡æµ‹è¯•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># -D è¡¨ç¤º maven ä¸­çš„ properties</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mvn -Dmaven.test.skip=true clean package # skip unit test</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mvn -DskipTests clean package</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mvn clean package -Pxxx # æŒ‡å®šè¦æ¿€æ´» maven profile çš„ id</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -Dserver.port=8010 -jar xxx.jar # specific server port</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -jar *.jar --server.port=8010 # åŒä¸Š</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æŒ‡å®š profile</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -jar *.jar --spring.properties.active=dev</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">java -jar -Dspring.profiles.active=dev demo-0.0.1-SNAPSHOT.jar</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mvn spring-boot:run -Drun.profiles=dev</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>2. éƒ¨ç½²è„šæœ¬</h1><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#æœ¬è„šæœ¬åŸºæœ¬æ— éœ€æ”¹åŠ¨ï¼Œæ³¨æ„è¦ç‚¹å‡å·²ç”¨ä¸­æ–‡è¯´æ˜</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># 1. è¯·å°†æœ¬è„šæœ¬æ”¾åˆ°Linuxç³»ç»Ÿçš„pathè·¯å¾„ä¸‹ï¼Œæœ€å¥½æ˜¯/binç›®å½•ä¸‹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># 2. è¯·ç»™æœ¬è„šæœ¬è®¾å¤‡å¯æ‰§è¡Œæƒé™</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># 3. å¯åŠ¨ç¤ºä¾‹         springboot-starter xxx.jar start</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># 4. é‡å¯ç¤ºä¾‹         springboot-starter xxx.jar restart</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># 5. åœæ­¢ç¤ºä¾‹         springboot-starter xxx.jar stop</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># 6. æŸ¥çœ‹çŠ¶æ€ç¤ºä¾‹     springboot-starter xxx.jar status</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## è·å– java å‘½ä»¤çš„è·¯å¾„</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">JAVA_CMD=`which java`</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">if [ -z &quot;${JAVA_CMD}&quot; ];then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  echo &quot;Please install the Java environment&quot;;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  exit 1;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## è¾“å‡ºæœ¬å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³• å¹¶é€€å‡º</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">usage() {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;Usage: springboot-starter [app_name].jar [start|stop|restart|status]&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## åˆ¤æ–­æ˜¯å¦è¾“å…¥äº†ä¸¤ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">if [ $# -lt 2 ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    usage</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## è„šæœ¬åç§°</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">APP_NAME=$1;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## æ“ä½œ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">OPERATION=$2;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## è¿è¡Œæ¨¡å¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">MODEL=$3</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">if [ -z &quot;$MODEL&quot; ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    MODEL=&quot;production&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## å…¶å®ƒå‚æ•°å¤„ç†</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">OTHER_ARGS=&quot;&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">if [ $# -gt 3 ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    shift 3</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">else</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    shift $#</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">for ARG in $*</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">do</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  OTHER_ARGS=&quot;$OTHER_ARGS $ARG&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">done</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## è„šæœ¬æ‰€åœ¨ç›®å½•ï¼Œç»å¯¹è·¯å¾„è¡¨ç¤º</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">BASE_PATH=$(cd `dirname $APP_NAME`;pwd)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## å»æ‰æ‰€æœ‰ç›®å½•åçš„è„šæœ¬å</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">APP_NAME=${APP_NAME##*/}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## è„šæœ¬çš„è·¯å¾„ï¼Œç»å¯¹è·¯å¾„è¡¨ç¤º</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">APP_PATH=$BASE_PATH&quot;/&quot;$APP_NAME</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## åˆ¤æ–­ç›®æ ‡ç¨‹åºæ˜¯å¦å·²ç»å¯åŠ¨</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">is_running(){</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  ## å°è¯•è·å–å·²ç»è¿è¡Œç¨‹åºçš„PID</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  PID=`ps -ef|grep ${APP_PATH}|grep -v grep|awk &#x27;{print $2}&#x27;`</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  if [ -z &quot;${PID}&quot; ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    return 0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    return 1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## å¯åŠ¨ç¨‹åº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">start(){</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  is_running</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  if [ $? -eq &quot;1&quot; ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;${APP_NAME} is already running. pid is ${PID} .&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ## å¯åŠ¨ jar åŒ…</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;${APP_NAME} starting ...... &quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    nohup ${JAVA_CMD} -jar ${OTHER_ARGS} -Dspring.profiles.active=${MODEL} ${APP_PATH} &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;nohup ${JAVA_CMD} -jar ${OTHER_ARGS} -Dspring.profiles.active=${MODEL} ${APP_PATH} &gt; /dev/null 2&gt;&amp;1 &amp;&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    sleep 1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;${APP_NAME} started  completed &quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## åœæ­¢ç¨‹åº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">stop(){</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  is_running</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  if [ $? -eq &quot;1&quot; ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;PID is ${PID}, ${APP_NAME} stopping ...... &quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    kill ${PID}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    if [ $? -ne &quot;0&quot; ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        echo &quot;kill ${PID} failedï¼Œexecute kill -9 ${PID}&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        kill -9 ${PID}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    sleep 1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;${APP_NAME} stopped completed &quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;${APP_NAME} is not running&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## è¾“å‡ºç¨‹åºè¿è¡ŒçŠ¶æ€</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">status(){</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  is_running</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  if [ $? -eq &quot;1&quot; ]; then</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;${APP_NAME} is running. pid is ${PID}&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    echo &quot;${APP_NAME} is NOT running.&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">## é‡å¯ç¨‹åº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">restart(){</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  stop</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  start</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">case &quot;$OPERATION&quot; in</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;start&quot;)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    start ;;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;stop&quot;)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    stop ;;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;status&quot;)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    status ;;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;restart&quot;)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    restart ;;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  *)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    usage ;;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">esac</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">exit 0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>3. å·¥å…·ç±»</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31-bean-å¤åˆ¶-å…‹éš†">3.1. bean å¤åˆ¶ å…‹éš†<a href="#31-bean-å¤åˆ¶-å…‹éš†" class="hash-link" aria-label="3.1. bean å¤åˆ¶ å…‹éš†çš„ç›´æ¥é“¾æ¥" title="3.1. bean å¤åˆ¶ å…‹éš†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">beancopier</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">https</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">com</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">mapstruct</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">mapstruct</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32-å­—ç¬¦ä¸²">3.2. å­—ç¬¦ä¸²<a href="#32-å­—ç¬¦ä¸²" class="hash-link" aria-label="3.2. å­—ç¬¦ä¸²çš„ç›´æ¥é“¾æ¥" title="3.2. å­—ç¬¦ä¸²çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt; springboot è‡ªå¸¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">RandomStringUtils</span><span class="token plain"> ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> éšæœºæ•°å­—</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">StringUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">isEmpty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> å¹¶éä¸¥æ ¼çš„ç©º</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="33-ç¼–è§£ç ">3.3. ç¼–è§£ç <a href="#33-ç¼–è§£ç " class="hash-link" aria-label="3.3. ç¼–è§£ç çš„ç›´æ¥é“¾æ¥" title="3.3. ç¼–è§£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt; springboot è‡ªå¸¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getMD5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> base </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> str </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> salt</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> md5 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DigestUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">md5DigestAsHex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">base</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getBytes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> md5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="34-commons-lang3">3.4. commons-lang3<a href="#34-commons-lang3" class="hash-link" aria-label="3.4. commons-lang3çš„ç›´æ¥é“¾æ¥" title="3.4. commons-lang3çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="35-æ–‡ä»¶æ“ä½œ">3.5. æ–‡ä»¶æ“ä½œ<a href="#35-æ–‡ä»¶æ“ä½œ" class="hash-link" aria-label="3.5. æ–‡ä»¶æ“ä½œçš„ç›´æ¥é“¾æ¥" title="3.5. æ–‡ä»¶æ“ä½œçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// springboot åŸç”Ÿ æ–‡ä»¶ä¸‹è½½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GetMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/download&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Resource</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">download</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletResponse</span><span class="token plain"> httpServletResponse</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                                            </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> objId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MongoSysFileServiceImpl</span><span class="token class-name punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">DownloadFileVo</span><span class="token plain"> downloadFileVo </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> sysFileService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">downloadFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">objId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">downloadFileVo </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RuntimeException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æŒ‡å®šæ–‡ä»¶ä¸å­˜åœ¨, objId = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> objId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">ok</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">contentType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">MediaType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">parseMediaType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;application/octet-stream&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">header</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpHeaders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">CONTENT_DISPOSITION</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;attachment; filename=\&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> downloadFileVo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getFilename</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;\&quot;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">body</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InputStreamResource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">downloadFileVo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getIs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//ä¸Šä¼ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;upload&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">R</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">SysFile</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">upload</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestPart</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;file&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartFile</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¸Šä¼ å¹¶è¿”å›è®¿é—®åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MongoSysFileServiceImpl</span><span class="token class-name punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">UploadFileResp</span><span class="token plain"> uploadFileResp </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> sysFileService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">uploadFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SysFile</span><span class="token plain"> sysFile </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SysFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        sysFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setObjId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">uploadFileResp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getObjId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        sysFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">uploadFileResp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getGeneratedName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">R</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">ok</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">sysFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">error</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ä¸Šä¼ æ–‡ä»¶å¤±è´¥&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">R</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">fail</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//feign client è¿œç¨‹è°ƒç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/upload&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> consumes </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MediaType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">MULTIPART_FORM_DATA_VALUE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">R</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">SysFile</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">upload</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestPart</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;file&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartFile</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¼ é€’ æ–‡ä»¶ , åŒæ—¶ä¼ é€’è¯·æ±‚å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/add&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AjaxResult</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">EstimateFile</span><span class="token plain"> estimateFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestPart</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;files&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> files</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//@RequestPart(&quot;estimateFile&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">toAjax</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">estimateFileService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">insertEstimateFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">estimateFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> files</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="36-commons-collections4">3.6. commons-collections4<a href="#36-commons-collections4" class="hash-link" aria-label="3.6. commons-collections4çš„ç›´æ¥é“¾æ¥" title="3.6. commons-collections4çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">isSubCollection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">smallColl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> bigColl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 1ã€é™¤éå…ƒç´ ä¸ºnullï¼Œå¦åˆ™å‘é›†åˆæ·»åŠ å…ƒç´ </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addIgnoreNull</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">personList</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt; åˆå¹¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 2ã€å°†ä¸¤ä¸ªå·²æ’åºçš„é›†åˆaå’Œbåˆå¹¶ä¸ºä¸€ä¸ªå·²æ’åºçš„åˆ—è¡¨ï¼Œä»¥ä¾¿ä¿ç•™å…ƒç´ çš„è‡ªç„¶é¡ºåº</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">collate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 3ã€å°†ä¸¤ä¸ªå·²æ’åºçš„é›†åˆaå’Œbåˆå¹¶åˆ°ä¸€ä¸ªå·²æ’åºçš„åˆ—è¡¨ä¸­ï¼Œä»¥ä¾¿ä¿ç•™æ ¹æ®Comparator cçš„å…ƒç´ é¡ºåºã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">collate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Comparator</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">super</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt; åˆ¤ç©º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 5ã€å¦‚æœå‚æ•°æ˜¯nullï¼Œåˆ™è¿”å›ä¸å¯å˜çš„ç©ºé›†åˆï¼Œå¦åˆ™è¿”å›å‚æ•°æœ¬èº«ã€‚ï¼ˆå¾ˆå®ç”¨ ,æœ€ç»ˆè¿”å›List EMPTY_LIST = new EmptyList&lt;&gt;()ï¼‰</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">emptyIfNull</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> collection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 6ã€ç©ºå®‰å…¨æ£€æŸ¥æŒ‡å®šçš„é›†åˆæ˜¯å¦ä¸ºç©º</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">isEmpty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> coll</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 7ã€ ç©ºå®‰å…¨æ£€æŸ¥æŒ‡å®šçš„é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">isNotEmpty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> coll</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt; åˆ¤æ–­æ˜¯å¦åŒ…å« </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 4ã€è¿”å›è¯¥ä¸ªé›†åˆä¸­æ˜¯å¦å«æœ‰è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">containsAny</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> coll1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> coll2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt; ç¿»è½¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 8ã€åè½¬ç»™å®šæ•°ç»„çš„é¡ºåºã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">reverseArray</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 9ã€å·®é›†   or   chaList.removeAll(listB);</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    or          listA.stream().filter(item -&gt; !listB.contains(item)).collect(toList());</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">subtract</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 10ã€å¹¶é›†    or     å…ˆ bingList.removeAll(listB), å†bingList.addAll(listB); ((å…ˆåšå·®é›†å†åšæ·»åŠ æ‰€æœ‰ï¼‰)</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">union</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Iterable</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">O</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    * 11ã€äº¤é›†   ä¹Ÿå¯ç”¨ jiaoList.retainAll(listB); è¿”å› Boolean, ä¼šæ”¹å˜åŸæœ‰é›†åˆ</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    or          listA.stream().filter(item -&gt; listB.contains(item)).collect(toList())</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">intersection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// è¿”å›æ–°é›†åˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    *12ã€ äº¤é›†çš„è¡¥é›†ï¼ˆæå–ï¼‰</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionUtils</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">disjunction</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Collection</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>4. å’Œ react ä¸€èµ·æ‰“åŒ…</h1><p><a href="https://github.com/arpan-banerjee7/demo-spring-react-maven-plugin" target="_blank" rel="noopener noreferrer">https://github.com/arpan-banerjee7/demo-spring-react-maven-plugin</a></p><p>TODO</p><h1>5. Spring Bootä¸­çš„æ³¨è§£</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="51-configurationproperties-å’Œ-value">5.1. @ConfigurationProperties å’Œ @Value<a href="#51-configurationproperties-å’Œ-value" class="hash-link" aria-label="5.1. @ConfigurationProperties å’Œ @Valueçš„ç›´æ¥é“¾æ¥" title="5.1. @ConfigurationProperties å’Œ @Valueçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>@Value æ˜¯core containerçš„featureã€‚ä¸æ”¯æŒå®½æ¾ç»‘å®šï¼Œä¸æ”¯æŒMeta-dataã€‚ä½†æ”¯æŒspELlã€‚
@ConfigurationProperties åˆ™æ”¯æŒå®½æ¾ç»‘å®šï¼Œæ”¯æŒMeta-dataã€‚ä½†ä¸æ”¯æŒspELlã€‚</p><p>@ConfigurationPropertiesä¸€èˆ¬åªç”¨æ¥å¤„ç†ç¯å¢ƒä¿¡æ¯ï¼Œä¸ç”¨æ¥æ³¨å…¥è‡ªå®šä¹‰å±æ€§ï¼ˆè¿™æ®µä¸çŸ¥é“ç¿»è¯‘å¾—å‡†ä¸å‡†ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼šEven if the configuration above will create a regular bean for FooProperties, we recommend that @ConfigurationProperties only deal with the environment and in particular does not inject other beans from the context. Having said that, The @EnableConfigurationProperties annotation is also automatically applied to your project so that any existing bean annotated with @ConfigurationProperties will be configured from the Environment.ï¼‰   </p><p>é…ç½®æ–‡ä»¶ï¼š  </p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">myProps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">#è‡ªå®šä¹‰çš„å±æ€§å’Œå€¼    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">simpleProp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> simplePropValue    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">arrayProps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">listProp1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> abc    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> abcValue    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> efg    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> efgValue    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">listProp2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> config2Value1    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> config2Vavlue2    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">mapProps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">key1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> value1    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">key2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> value2  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ›å»ºä¸€ä¸ªbeanæ¥æ¥å—ä¿¡æ¯ï¼š(è¿™é‡Œä¸æ¨èè¿™ä¹ˆç”¨, åº”è¯¥ä½¿ç”¨ @value è€è€å®å®å±æ€§å†™å…¨)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// @Component    // è¿™ä¸ªæ³¨è§£å¯é€‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;myProps&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ¥æ”¶application.ymlä¸­çš„myPropsä¸‹é¢çš„å±æ€§   (prefix å¿…é¡», ä¸å¯ä¸º&quot;&quot;, éœ€è¦åœ¨é…ç½®ç±»ä¸­ enable config props class)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// æ­¤æ—¶ idea æç¤º spring boot config annotation processor not configured, æ˜¯å› ä¸ºä»–ä»¥ä¸ºä½ è¦ä¸ºé…ç½®æ–‡ä»¶æŒ‡å®šè‡ªå®šä¹‰å±æ€§, éœ€è¦ç”Ÿæˆæç¤º </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// å¯ä»¥https://docs.spring.io/spring-boot/docs/2.3.4.RELEASE/reference/html/appendix-configuration-metadata.html#configuration-metadata-annotation-processor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyProps</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> simpleProp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> arrayProps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> listProp1 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ArrayList</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ¥æ”¶prop1é‡Œé¢çš„å±æ€§å€¼    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> listProp2 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ArrayList</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ¥æ”¶prop2é‡Œé¢çš„å±æ€§å€¼    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> mapProps </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HashMap</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ¥æ”¶prop1é‡Œé¢çš„å±æ€§å€¼    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é™¤äº†å¯ä»¥ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ä¸€ä¸ªç±»ï¼Œè¿˜å¯ä»¥åœ¨@Beanæ–¹æ³•ä¸Šä½¿ç”¨ï¼›éœ€è¦ç»‘å®šå±æ€§åˆ°ä¸å—ä½ æ§åˆ¶çš„ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œè¿™ç§æ–¹å¼éå¸¸æœ‰ç”¨ã€‚  </p><p>ä¸ºäº†ä»ç¯å¢ƒå±æ€§é…ç½®ä¸€ä¸ªbeanï¼Œå°†@ConfigurationPropertiesæ·»åŠ åˆ°å®ƒçš„beanæ³¨å†Œè¿‡ç¨‹,ä»»ä½•ä»¥fooä¸ºå‰ç¼€çš„å±æ€§å®šä¹‰éƒ½ä¼šè¢«æ˜ å°„åˆ°FooComponentä¸Šï¼š  </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;foo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FooComponent</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">fooComponent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹äºæ— æ³•è½¬æ¢çš„å±æ€§, æ¯”å¦‚æœ¬æ¥æ˜¯ä¸€ä¸ª Boolean ç±»å‹, ä½†æ˜¯é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ˜¯ string ç±»å‹, ignoreInvalidFields å¯ä»¥å†³å®šæ˜¯å¦æŠ›å‡ºå¼‚å¸¸, é»˜è®¤ä¸º false, è¡¨ç¤ºè¦æŠ›å‡ºå¼‚å¸¸</p><p>å¯¹äºé…ç½®æ–‡ä»¶ä¸­å¤šä½™çš„å±æ€§, ignoreUnknownFields å†³å®šæ˜¯å¦æŠ›å‡ºå¼‚å¸¸, é»˜è®¤ true, è¡¨ç¤ºä¸æŠ›å‡ºå¼‚å¸¸</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="52-enableconfigurationproperties">5.2. @EnableConfigurationProperties<a href="#52-enableconfigurationproperties" class="hash-link" aria-label="5.2. @EnableConfigurationPropertiesçš„ç›´æ¥é“¾æ¥" title="5.2. @EnableConfigurationPropertiesçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é…ç½®å“ªäº›ç±»æ˜¯ç”¨æ¥æ¥å—é…ç½®æ–‡ä»¶ä¿¡æ¯çš„bean,å½“@EnableConfigurationPropertiesæ³¨è§£åº”ç”¨åˆ°ä½ çš„@Configurationæ—¶ï¼Œä»»ä½•è¢«@ConfigurationPropertiesæ³¨è§£çš„beanså°†è‡ªåŠ¨è¢«Environmentå±æ€§é…ç½®  , configBean æ— éœ€ @component</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">EnableConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token maybe-class-name">LiquibaseProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ApplicationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ä¸€ä¸ª @ConfigurationProperties bean åƒå¦‚ä¸Šè¿™æ ·æ³¨å†Œï¼Œè¿™ä¸ªbeanå°±æœ‰äº†ä¸€ä¸ªåå­—ï¼Œè§„èŒƒæ˜¯è¿™æ ·ï¼š<code>&lt;prefix&gt;-&lt;fqn&gt;</code>, å³ï¼šå‰ç¼€-å…¨é™å®šåï¼Œå¦‚ï¼š  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">myProps</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">PropertiesBean</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>enableXXX ç±»æ³¨è§£åŸç†å°±æ˜¯ å®šä¹‰ä¸€ä¸ªæ³¨è§£, åœ¨æ³¨è§£ä¸Šé€šè¿‡ @import å¼•å…¥ä¸€ä¸ªé…ç½®ç±»</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="53-enableautoconfiguration">5.3. @EnableAutoConfiguration<a href="#53-enableautoconfiguration" class="hash-link" aria-label="5.3. @EnableAutoConfigurationçš„ç›´æ¥é“¾æ¥" title="5.3. @EnableAutoConfigurationçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ ¹æ®æ·»åŠ çš„jarä¾èµ–çŒœæµ‹ä½ æƒ³å¦‚ä½•é…ç½®Springï¼Œå¦‚æœå‘ç°åº”ç”¨äº†ä½ ä¸æƒ³è¦çš„ç‰¹å®šè‡ªåŠ¨é…ç½®ç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨ @EnableAutoConfiguration æ³¨è§£çš„excludeå±æ€§æ¥ç¦ç”¨å®ƒä»¬  </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">EnableAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">exclude </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token maybe-class-name">MetricFilterAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token maybe-class-name">MetricRepositoryAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨ä¸€èˆ¬æ˜¯@EnableAutoConfigurationåŠ åˆ°ä¸€ä¸ªä¸»@configrationç±»ä¸Šï¼Œä¸»é…ç½®ç±»ä¸€èˆ¬å°±æ˜¯appçš„å¯åŠ¨ç±»  </p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="54-componentscan">5.4. @ComponentScan<a href="#54-componentscan" class="hash-link" aria-label="5.4. @ComponentScançš„ç›´æ¥é“¾æ¥" title="5.4. @ComponentScançš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ‰«ææ‰€æœ‰Springç»„ä»¶ï¼Œé€šè¿‡@autowiredæ³¨å…¥ä½¿ç”¨  </p><p>å¦‚æœä½¿ç”¨ä¸Šé¢å»ºè®®çš„ç»“æ„ç»„ç»‡ä»£ç ï¼ˆå°†åº”ç”¨ç±»æ”¾åˆ°æ ¹åŒ…ä¸‹ï¼‰ï¼Œä½ å¯ä»¥æ·»åŠ  @ComponentScan æ³¨è§£è€Œä¸éœ€è¦ä»»ä½•å‚æ•°ã€‚ä½ çš„æ‰€æœ‰åº”ç”¨ç¨‹åºç»„ä»¶ï¼ˆ @Component , @Service , @Repository , @Controller ç­‰ï¼‰å°†è¢«è‡ªåŠ¨æ³¨å†Œä¸ºSpring Beansã€‚  </p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="55-springbootapplication">5.5. @SpringBootApplication<a href="#55-springbootapplication" class="hash-link" aria-label="5.5. @SpringBootApplicationçš„ç›´æ¥é“¾æ¥" title="5.5. @SpringBootApplicationçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>@SpringBootApplication æ³¨è§£ç­‰ä»·äºä»¥é»˜è®¤å±æ€§ä½¿ç”¨ @Configuration ï¼Œ @EnableAutoConfiguration å’Œ @ComponentScan   </p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="56-componentå’Œbeanå’ŒconfigrationåŒºåˆ«">5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«<a href="#56-componentå’Œbeanå’ŒconfigrationåŒºåˆ«" class="hash-link" aria-label="5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«çš„ç›´æ¥é“¾æ¥" title="5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>@Configuration æ³¨è§£æœ¬è´¨ä¸Šè¿˜æ˜¯ @Component, </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Target</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token class-name" style="color:rgb(38, 127, 153)">ElementType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">TYPE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Retention</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">RetentionPolicy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">RUNTIME</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Documented</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Configuration</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@AliasFor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        annotation </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Component</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">default</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">proxyBeanMethods</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">default</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// é»˜è®¤ä¸º true, config bean ä¸­çš„æ–¹æ³•è¢« cglib ä»£ç†, è¡¨ç¤º åœ¨åŒä¸ª config bean ä¸­åµŒå¥—è°ƒç”¨æ–¹æ³•, è¿”å›çš„å¯¹è±¡é»˜è®¤ä» ioc container ä¸­è·å–, ä¸ä¼šæ–°åˆ›å»ºå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>@Configurationä¸€èˆ¬å’Œ@beanåˆç”¨, @componentå’Œ@beanä¸èƒ½åˆç”¨</p><p>Spring Bootæå€¡åŸºäºJavaçš„é…ç½®ï¼Œé€šå¸¸ç®€æ˜“å¯åŠ¨ç±»ä½œä¸ºä¸»é…ç½®ç±»ï¼Œå…¶ä»–é…ç½®ç±»é€šè¿‡@importå¯¼å…¥åˆ°ä¸»é…ç½®ç±»ï¼›@ComponentScanä¹Ÿä¼šæ‰«æé…ç½®ç±»  ,å¦‚æœä¸å¾—ä¸ä½¿ç”¨åŸºäºxmlçš„é…ç½®ï¼Œä»æ—§å¯ä»¥ä»ä¸€ä¸ª@configrationç±»å¼€å§‹ï¼Œé€šè¿‡@ImportResource æ³¨è§£åŠ è½½XMLé…ç½®æ–‡ä»¶ã€‚  </p><p>@Componentè¢«ç”¨åœ¨è¦è¢«è‡ªåŠ¨æ‰«æå’Œè£…é…çš„ç±»ä¸Šï¼ŒSpring æ³¨è§£@Componentç­‰æ•ˆäº@Service,@Controller,@Repositoryï¼›@Beanåªèƒ½ç”¨äºæ–¹æ³•(æ–¹æ³•åä½œä¸ºiocå®¹å™¨ä¸­çš„bean name)å’Œæ³¨è§£ä¸Šã€‚ç”¨@Configurationæ³¨è§£è¯¥ç±»ï¼Œç­‰ä»· ä¸XMLä¸­é…ç½®beansï¼›ç”¨@Beanæ ‡æ³¨æ–¹æ³•ç­‰ä»·äºXMLä¸­é…ç½®beanã€‚  </p><p>åœ¨é¡¹ç›®ä¸­ï¼Œæœ¬å·¥ç¨‹çš„beanæ³¨å†Œï¼Œä½¿ç”¨@Componentï¼Œé€šè¿‡web serviceå–å¾—çš„beanï¼Œé€šè¿‡@Beanæ ‡æ³¨åœ¨è·å–æ–¹æ³•ä¸Šæ³¨å†Œï¼›</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="57-importå’Œimportresourceå’Œpropertysourceæ¯”è¾ƒ">5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ<a href="#57-importå’Œimportresourceå’Œpropertysourceæ¯”è¾ƒ" class="hash-link" aria-label="5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒçš„ç›´æ¥é“¾æ¥" title="5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>å‰ä¸¤è€…éƒ½éœ€è¦å’Œ@configurationé…åˆä½¿ç”¨(Both @Import @ImportResource work with @Configuration), è¡¨ç¤ºå¯¼å…¥é¢å¤–çš„é…ç½®<ul><li>@import å¯¼å…¥æŸä¸ªé…ç½®ç±», è¿™ä¸ªé…ç½®ç±»å¯ä»¥ä¸ç”¨æ ‡æ³¨ @configuration (ä¸€èˆ¬ä¼šé…åˆè‡ªå®šä¹‰æ³¨è§£ä½¿ç”¨: è‡ªå®šä¹‰æ³¨è§£ä¸Šé€šè¿‡ @import å¯¼å…¥å¤šä¸ªæœªæ ‡æ³¨@configuration çš„é…ç½®ç±»ä½¿å¾—è¿™äº›é…ç½®ç±»ç”Ÿæ•ˆ)</li></ul></li><li>@ImportResourceç”¨æ¥å¼•å…¥å¤–ç½®çš„é…ç½®æ–‡ä»¶, å¦‚@ImportResource({&quot;classpath:datasource.xml&quot;}), ä¸€èˆ¬ç”¨æ¥å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢åŠŸèƒ½ç”Ÿæ•ˆ</li><li>@Importå¼•å…¥å¦å¤–çš„@configurationç±»</li><li>@PropertySourceç”¨äºåŠ è½½å¦å¤–çš„å±æ€§é…ç½®æ–‡ä»¶, å¦‚@PropertySource(value = {&quot;classpath:person.properties&quot;}), ä¸€èˆ¬å’Œ@ConfigurationProperties(prefix = &quot;person&quot;)ä¸€èµ·ç”¨
springbooté»˜è®¤åªä¼šåŠ è½½application.propertiesä¸­çš„å±æ€§,</li></ul><p>ä¾‹å­:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Import</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">AnotherConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ImportResource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">â€œclasspath</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">com</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">acme</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">properties</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">xmlâ€</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PropertySource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">â€œclasspath</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">some</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">propertiesâ€</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AppConfig</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// blahâ€¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>6. context ä¸Šä¸‹æ–‡ æ‰‹åŠ¨æ³¨å†Œbean</h1><p><a href="https://blog.csdn.net/qq_36628536/article/details/113753368" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_36628536/article/details/113753368</a> ä»‹ç»</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// plan 1: (æ­¤ç§æ–¹å¼æ³¨å†Œçš„beanåœ¨è°ƒç”¨æ—¶å°†ç”±springè¿›è¡Œåˆ›å»ºï¼Œç›¸å½“äºå»¶è¿ŸåŠ è½½bean)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContextUtil</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContextAware</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContext</span><span class="token plain"> applicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">setApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">BeansException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        applicationContext</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *  åŠ¨æ€æ³¨å…¥bean</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @param requiredType æ³¨å…¥ç±»</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @param beanName beanåç§°</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">registerBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Class</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> requiredType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> beanName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//å°†applicationContextè½¬æ¢ä¸ºConfigurableApplicationContext</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token plain"> configurableApplicationContext </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> applicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//è·å–BeanFactory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">DefaultListableBeanFactory</span><span class="token plain"> defaultListableBeanFactory </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">DefaultListableBeanFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> configurableApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getAutowireCapableBeanFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//åˆ›å»ºbeanä¿¡æ¯.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">BeanDefinitionBuilder</span><span class="token plain"> beanDefinitionBuilder </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">BeanDefinitionBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">genericBeanDefinition</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">requiredType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//åŠ¨æ€æ³¨å†Œbean.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        defaultListableBeanFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">registerBeanDefinition</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">beanName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> beanDefinitionBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getBeanDefinition</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//è·å–åŠ¨æ€æ³¨å†Œçš„bean.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> configurableApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">requiredType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ï½</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// plan 2: (æ­¤ç§æ–¹å¼å…è®¸æ‰‹åŠ¨åˆ›å»ºå•ä¾‹beanå®ä¾‹å¹¶æ³¨å†Œï¼Œæ³¨æ„å¿…é¡»æ˜¯å•ä¾‹çš„ï¼Œåœ¨springè°ƒç”¨æ—¶ï¼Œä¼šå°†æ‰‹åŠ¨åˆ›å»ºçš„beanç›´æ¥æ³¨å…¥åˆ°è°ƒç”¨æ–¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContextUtil</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContextAware</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContext</span><span class="token plain"> applicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">setApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">BeansException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        applicationContext</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *  åŠ¨æ€æ³¨å…¥å•ä¾‹beanå®ä¾‹</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @param beanName beanåç§°</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @param singletonObject å•ä¾‹beanå®ä¾‹</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @return æ³¨å…¥å®ä¾‹</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">registerSingletonBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> beanName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> singletonObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//å°†applicationContextè½¬æ¢ä¸ºConfigurableApplicationContext</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token plain"> configurableApplicationContext </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> applicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//è·å–BeanFactory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">DefaultListableBeanFactory</span><span class="token plain"> defaultListableBeanFactory </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">DefaultListableBeanFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> configurableApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getAutowireCapableBeanFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//åŠ¨æ€æ³¨å†Œbean.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        defaultListableBeanFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">registerSingleton</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">beanName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">singletonObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//è·å–åŠ¨æ€æ³¨å†Œçš„bean.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> configurableApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">beanName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ï½</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>7. å®ç°äº‹ä»¶é©±åŠ¨</h1><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/*</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">ApplicationEventï¼šè¡¨ç¤ºäº‹ä»¶æœ¬èº«ï¼Œè‡ªå®šä¹‰äº‹ä»¶éœ€è¦ç»§æ‰¿è¯¥ç±»ï¼Œç”¨æ¥å®šä¹‰äº‹ä»¶</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">ApplicationEventPublisherï¼šäº‹ä»¶å‘é€å™¨ï¼Œä¸»è¦ç”¨æ¥å‘å¸ƒäº‹ä»¶</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">ApplicationListenerï¼šäº‹ä»¶ç›‘å¬å™¨æ¥å£ï¼Œç›‘å¬ç±»å®ç°ApplicationListener é‡ŒonApplicationEventæ–¹æ³•å³å¯ï¼Œä¹Ÿå¯ä»¥åœ¨æ–¹æ³•ä¸Šå¢åŠ @EventListenerä»¥å®ç°äº‹ä»¶ç›‘å¬ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// é»˜è®¤æƒ…å†µä¸‹äº‹ä»¶æ˜¯åŒæ­¥çš„ã€‚å³äº‹ä»¶è¢«publishåä¼šç­‰å¾…Listenerçš„å¤„ç†ã€‚å¦‚æœå‘å¸ƒäº‹ä»¶å¤„çš„ä¸šåŠ¡å­˜åœ¨äº‹åŠ¡ï¼Œç›‘å¬å™¨å¤„ç†ä¹Ÿä¼šåœ¨ç›¸åŒçš„äº‹åŠ¡ä¸­ã€‚å¦‚æœéœ€è¦å¼‚æ­¥å¤„ç†äº‹ä»¶ï¼Œå¯ä»¥onApplicationEventæ–¹æ³•ä¸ŠåŠ @Ayncæ”¯æŒå¼‚æ­¥æˆ–åœ¨æœ‰@EventListenerçš„æ³¨è§£æ–¹æ³•ä¸ŠåŠ ä¸Š@Aync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ProductEvent</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationEvent</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ProductEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Product</span><span class="token plain"> product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">super</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ProductServiceImpl</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IproductService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationEventPublisher</span><span class="token plain"> publisher</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Transactional</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">rollbackFor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">saveProduct</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Product</span><span class="token plain"> product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        productMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">saveProduct</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//äº‹ä»¶å‘å¸ƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        publisher</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">publishEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Slf4j</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@AllArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ProductListener</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">NotifyService</span><span class="token plain"> notifyServcie</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Async</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// éœ€è¦@EnableAsync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Order</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EventListener</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ProductEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">notify</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ProductEvent</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Product</span><span class="token plain"> product </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        notifyServcie</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">notify</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;product&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ç­‰æ•ˆ @eventListner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RegisterListener</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationListener</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">UserRegisterEvent</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * å®ç°ç›‘å¬</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @param userRegisterEvent</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">onApplicationEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">UserRegisterEvent</span><span class="token plain"> userRegisterEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//è·å–æ³¨å†Œç”¨æˆ·å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserBean</span><span class="token plain"> user </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> userRegisterEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getUser</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//../çœç•¥é€»è¾‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//è¾“å‡ºæ³¨å†Œç”¨æˆ·ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æ³¨å†Œä¿¡æ¯ï¼Œç”¨æˆ·åï¼š&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ï¼Œå¯†ç ï¼š&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getPassword</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>8. ä¼˜é›…åœæœº å…³æœº</h1><p>ï¼Œ1ã€åˆ©ç”¨åº•å±‚JVM Runtime.getRuntime().addShutdownHook() æ·»åŠ è‡ªå·±çš„é’©å­å‡½æ•°ã€‚</p><p>2ã€åˆ©ç”¨Spring ç°æœ‰æœºåˆ¶ï¼ŒSpringä¼šåœ¨å…³æœºæ—¶å‘é€ContextClosedEventç»™åˆ°ç›‘å¬å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå…³é—­å‡½æ•°æ”¾åœ¨ç›‘å¬å™¨é‡Œå³å¯ã€‚</p><p>ä¼˜é›…å…³æœºçš„è¿‡ç¨‹åº”è¯¥æ˜¯é€šçŸ¥æ³¨å†Œä¸­å¿ƒ-&gt;æš‚åœæ¥æ”¶æ–°è¯·æ±‚-&gt;æ—§è¯·æ±‚æ‰§è¡Œå®Œæ¯•-&gt;å…¶ä½™çš„æ¸…ç†åŠ¨ä½œ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// è¿™é‡Œé‡‡ç”¨æ–¹å¼ 2:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ç›‘å¬å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GracefulShutdown</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatConnectorCustomizer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationListener</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">ContextClosedEvent</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Ordered</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Logger</span><span class="token plain"> log </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">LoggerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getLogger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">GracefulShutdown</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">volatile</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Connector</span><span class="token plain"> connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * æ§åˆ¶GracefulShutdown listenerä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> order </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Ordered</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">HIGHEST_PRECEDENCE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">customize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Connector</span><span class="token plain"> connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">connector </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">onApplicationEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ContextClosedEvent</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;eureka client shutting down&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        eurekaClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">shutdown</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Completed shut down eureka client&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// Tomcatæš‚åœæ¥æ”¶request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">pause</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;connector pause&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// å…³é—­Tomcatçº¿ç¨‹æ±         </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Executor</span><span class="token plain"> executor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getProtocolHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">executor </span><span class="token keyword" style="color:rgb(0, 0, 255)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolExecutor</span><span class="token plain"> threadPoolExecutor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                threadPoolExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">shutdown</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;connector executor shutting down&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token plain">threadPoolExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">awaitTermination</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TimeUnit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">SECONDS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">warn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Tomcat thread pool did not shut down gracefully within &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                            </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;10 seconds. Proceeding with forceful shutdown&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;completed shut down connector executor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">InterruptedException</span><span class="token plain"> ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">currentThread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">interrupt</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getOrder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// springboot é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> * ç”¨äºä¼˜é›…å…³é—­tomcat</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GracefulShutdown</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">gracefulShutdown</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">EurekaClient</span><span class="token plain"> eurekaClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GracefulShutdown</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">eurekaClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> * ç”¨äºä¼˜é›…å…³é—­tomcat</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebServerFactoryCustomizer</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">tomcatCustomizer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">GracefulShutdown</span><span class="token plain"> gracefulShutdown</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> factory </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">factory </span><span class="token keyword" style="color:rgb(0, 0, 255)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatServletWebServerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatServletWebServerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> factory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addConnectorCustomizers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">gracefulShutdown</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>9. é™æ€æ³¨å…¥</h1><p>ä¸ºé™æ€å±æ€§æ³¨å…¥å€¼, ä½¿ç”¨é€šè¿‡ XXXClass.xxx ä½¿ç”¨</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="91-setæ³¨å…¥">9.1. setæ³¨å…¥<a href="#91-setæ³¨å…¥" class="hash-link" aria-label="9.1. setæ³¨å…¥çš„ç›´æ¥é“¾æ¥" title="9.1. setæ³¨å…¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;MongoConfig&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;mongo.config&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MongoConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> chat_username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;${mongo.config.username}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">setChat_username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> chat_username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MongoConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chat_username </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> chat_username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="92-postconstruct-æ³¨å…¥">9.2. @PostConstruct æ³¨å…¥<a href="#92-postconstruct-æ³¨å…¥" class="hash-link" aria-label="9.2. @PostConstruct æ³¨å…¥çš„ç›´æ¥é“¾æ¥" title="9.2. @PostConstruct æ³¨å…¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ADUserUtils</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Resource</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain">  </span><span class="token class-name" style="color:rgb(38, 127, 153)">ADConfig</span><span class="token plain"> adc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ADConfig</span><span class="token plain"> adc1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostConstruct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">init</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">adc1 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> adc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">User</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getADUsers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        adc1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">readConf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="93-é€šè¿‡-applicationcontext">9.3. é€šè¿‡ ApplicationContext<a href="#93-é€šè¿‡-applicationcontext" class="hash-link" aria-label="9.3. é€šè¿‡ ApplicationContextçš„ç›´æ¥é“¾æ¥" title="9.3. é€šè¿‡ ApplicationContextçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¾—åˆ°é™æ€çš„ context, ç„¶åé€šè¿‡ getBean(xxx.class) ...</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@MapperScan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;io.github.xiaoyureed.mockitomybatisplusdemo.mapper&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MockitoDemoApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">main</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        context </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">MockitoDemoApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>10. ä½¿ç”¨starter</h1><p>servlet request wrapper</p><p><a href="https://blog.csdn.net/weixin_43935907/article/details/98476935" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_43935907/article/details/98476935</a>
<a href="https://www.cnblogs.com/JAYIT/p/10943155.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/JAYIT/p/10943155.html</a>
<a href="https://www.cnblogs.com/exmyth/p/10332328.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/exmyth/p/10332328.html</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="101-åŠ è½½è¿‡ç¨‹oråŸç†">10.1. åŠ è½½è¿‡ç¨‹oråŸç†<a href="#101-åŠ è½½è¿‡ç¨‹oråŸç†" class="hash-link" aria-label="10.1. åŠ è½½è¿‡ç¨‹oråŸç†çš„ç›´æ¥é“¾æ¥" title="10.1. åŠ è½½è¿‡ç¨‹oråŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>@SpringBootApplicationåŒ…å«äº†@EnableAutoConfigurationï¼Œè¿™ä¸ªæ³¨è§£åˆåŒ…å«@Import(AutoConfigurationImportSelector.class)ã€‚</p><p>spring bootå¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨AutoConfigurationImportSelectorçš„å›è°ƒå‡½æ•°ï¼Œè®©å…¶è§£ææ‰€æœ‰åŒ…ä¸‹çš„&quot;META-INF/spring.factories&quot; (ä½äºé¡¹ç›®ç»“æ„çš„ <code>resources/META-INF/spring.factories</code> ä¸‹), å¹¶æŠŠkeyä¸º&quot;...EnableAutoConfiguration&quot;å¯¹åº”çš„valueé‡Œçš„ç±»éƒ½åŠ è½½ä¸ºBeanï¼Œè€Œé‚£äº›ç±»åŸºæœ¬éƒ½æ˜¯æ³¨è§£äº†@Configurationçš„é…ç½®ç±»ã€‚è¿™ä¾¿æ˜¯spring bootèƒ½è‡ªåŠ¨é…ç½®çš„åŸå› ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="102-è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£">10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£<a href="#102-è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£" class="hash-link" aria-label="10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£çš„ç›´æ¥é“¾æ¥" title="10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://my.oschina.net/u/566591/blog/2250290" target="_blank" rel="noopener noreferrer">https://my.oschina.net/u/566591/blog/2250290</a></p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">Configuration</span><span class="token plain">  è¡¨æ˜æ˜¯ä¸€ä¸ªé…ç½®ç±»</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">EnableAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">exclude </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token maybe-class-name">DataSourceAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> ä½¿ç”¨starterçš„æ—¶å€™æ’é™¤è‡ªåŠ¨é…ç½®</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnClass</span><span class="token plain">  </span><span class="token function" style="color:rgb(0, 0, 255)">å½“classpathä¸‹å‘ç°è¯¥ç±»çš„æƒ…å†µä¸‹è¿›è¡Œè‡ªåŠ¨é…ç½®</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> value ä»»é€‰å…¶ä¸€</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnMissingClass</span><span class="token plain"> æ²¡æœ‰è¿™ä¸ªç±»æ—¶åº”ç”¨æ ‡æ³¨çš„é…ç½®ç±»</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionOnMissingBean</span><span class="token plain"> åœ¨springå®¹å™¨ä¸­æ²¡æ‰¾åˆ° bean </span><span class="token function" style="color:rgb(0, 0, 255)">æ—¶</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">å¦‚æœä¸æŒ‡å®š</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> é»˜è®¤ æ–¹æ³•è¿”å›å€¼ç±»å‹</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">å½“å‰ç±»</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnBean</span><span class="token plain">  å½“å®¹å™¨ä¸­æœ‰æŒ‡å®šçš„Beançš„æ¡ä»¶ä¸‹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># é»˜è®¤æ˜¯æ£€æŸ¥beançš„ç±»å‹</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> çœ‹çœ‹å®¹å™¨ä¸­æ˜¯å¦æœ‰åŒç±»å‹ bean å­˜åœ¨</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ä¸çœ‹ bean name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># å¼€å¯æŒ‰ç…§ bean name æ£€æŸ¥</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> å±æ€§ name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain">xxx&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">ConditionalOnBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hah&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hoo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;and&quot;</span><span class="token plain"> å…³ç³»</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æœ‰ hah</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ä¸”æœ‰ hoo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> </span><span class="token property-access">ä»»ä½•ä¸€ä¸ªç¼ºå¤±éƒ½</span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">ConditionalOnMissingBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hah&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hoo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;and &quot;</span><span class="token plain"> å…³ç³»</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ²¡hah ä¸” æ²¡ hoo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> </span><span class="token property-access">ä»»ä½•ä¸€ä¸ªå‡ºç°</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">EnableConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token maybe-class-name">XxxProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">  ä½¿ @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;aaa.bbb&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> æ³¨è§£ç”Ÿæ•ˆ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnProperty</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">æŒ‡å®šçš„å±æ€§æœ‰æŒ‡å®šçš„å€¼æ—¶</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># </span><span class="token maybe-class-name">ConditionalOnProperty</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    name</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token function" style="color:rgb(0, 0, 255)">value</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value ç”¨äºæŒ‡å®šæŸé…ç½®ä¸€å®šè¦å‡ºç°</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> havingValue æŒ‡å®šé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ä¸º </span><span class="token keyword null nil" style="color:rgb(0, 0, 255)">null</span><span class="token plain">è¿”å› </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ä¸åŒ¹é…è¿”å›</span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    matchIfMissing é…ç½®é¡¹å¦‚æœç¼ºå¤±</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ˜¯å¦åŒ¹é…</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> é»˜è®¤ </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¼˜å…ˆçº§æ¯” onBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> onClass è¿™äº›éƒ½é«˜</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">ConditionalOnProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.aop&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;auto&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> havingValue </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> matchIfMissing </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnSingleCandidate</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">å’Œ @</span><span class="token maybe-class-name">ConditionalOnBean</span><span class="token plain"> ç±»ä¼¼</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">å½“æŒ‡å®šçš„Beanåœ¨å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªï¼Œæˆ–è€…åœ¨æœ‰å¤šä¸ªBeançš„æƒ…å†µä¸‹ï¼Œç”¨æ¥æŒ‡å®šé¦–é€‰çš„Bean </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnExpression</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">åŸºäºSpELè¡¨è¾¾å¼ä½œä¸ºåˆ¤æ–­æ¡ä»¶</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">ConditionalOnResource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">resources </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/xxx.yml&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">ç±»è·¯å¾„ä¸‹æ˜¯å¦æœ‰æŒ‡å®šçš„èµ„æº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">ConditionalOnJava</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">javaversion</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">eight</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">åŸºäº</span><span class="token constant" style="color:rgb(129, 31, 63)">JVM</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token maybe-class-name">Javaç‰ˆæœ¬ä½œä¸ºåˆ¤æ–­æ¡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnJndi</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">åœ¨</span><span class="token constant" style="color:rgb(129, 31, 63)">JNDI</span><span class="token plain">å­˜åœ¨çš„æ¡ä»¶ä¸‹æŸ¥æ‰¾æŒ‡å®šçš„ä½ç½®</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å¿…é¡»å­˜åœ¨ä¸€ä¸ª</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">å¦åˆ™</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">è¿”å›ä¸åŒ¹é…</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnNotWebApplication</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">å½“å‰é¡¹ç›®ä¸æ˜¯Webé¡¹ç›®çš„æ¡ä»¶ä¸‹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">ConditionalOnWebApplication</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">å½“å‰é¡¹ç›®æ˜¯Webé¡¹ç›®çš„æ¡ä»¶ä¸‹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">AutoConfigureAfter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token constant" style="color:rgb(129, 31, 63)">A</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> é…ç½®ç±»å°†åœ¨ </span><span class="token constant" style="color:rgb(129, 31, 63)">A</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">class</span><span class="token plain"> ä¹‹ååŠ è½½</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">AutoConfigureBefore</span><span class="token plain">   </span><span class="token spread operator" style="color:rgb(0, 0, 0)">...</span><span class="token plain"> ä¹‹å‰åŠ è½½</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">@</span><span class="token maybe-class-name">AutoConfigureOrder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="103-è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹">10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹<a href="#103-è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹" class="hash-link" aria-label="10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹çš„ç›´æ¥é“¾æ¥" title="10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1031-spring-åŠ¨æ€ä»£ç†">10.3.1. spring åŠ¨æ€ä»£ç†<a href="#1031-spring-åŠ¨æ€ä»£ç†" class="hash-link" aria-label="10.3.1. spring åŠ¨æ€ä»£ç†çš„ç›´æ¥é“¾æ¥" title="10.3.1. spring åŠ¨æ€ä»£ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://lolico.me/2020/05/03/SpringBoot2-AOP-uses-cglib-proxy-by-default/" target="_blank" rel="noopener noreferrer">https://lolico.me/2020/05/03/SpringBoot2-AOP-uses-cglib-proxy-by-default/</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//SpringBoot1.5.xä¸­çš„è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¼šå‘ç°é»˜è®¤æ˜¯ä½¿ç”¨jdkåŠ¨æ€ä»£ç†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨SpringBoot2.xä¸­æ”¹ä¸ºé»˜è®¤ä½¿ç”¨Cglibäº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">proxyBeanMethods </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConditionalOnProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.aop&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;auto&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> havingValue </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> matchIfMissing </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AopAutoConfiguration</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">proxyBeanMethods </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConditionalOnClass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Advice</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AspectJAutoProxyingConfiguration</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">proxyBeanMethods </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableAspectJAutoProxy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">proxyTargetClass </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConditionalOnProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.aop&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;proxy-target-class&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> havingValue </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;false&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                matchIfMissing </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> jdkDynamicAutoProxyConfiguration </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">proxyBeanMethods </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableAspectJAutoProxy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">proxyTargetClass </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConditionalOnProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.aop&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;proxy-target-class&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> havingValue </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                matchIfMissing </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// èƒ½å¤Ÿçœ‹å‡ºAOPé»˜è®¤ä½¿ç”¨Cglibä»£ç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CglibAutoProxyConfiguration</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="104-conditional">10.4. @Conditional<a href="#104-conditional" class="hash-link" aria-label="10.4. @Conditionalçš„ç›´æ¥é“¾æ¥" title="10.4. @Conditionalçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è‡ªåŠ¨é…ç½®ç›¸å…³æ³¨è§£åº•å±‚éƒ½æ˜¯é€šè¿‡ @Conditional(OnClassCondition.class) å®ç°çš„</p><p>é€šè¿‡å®ƒ, å¯ä»¥è‡ªå·±å®šåˆ¶æ¡ä»¶</p><p><a href="https://my.oschina.net/u/566591/blog/2250290" target="_blank" rel="noopener noreferrer">https://my.oschina.net/u/566591/blog/2250290</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="105-å°è£…ç»„åˆæ¡ä»¶">10.5. å°è£…ç»„åˆæ¡ä»¶<a href="#105-å°è£…ç»„åˆæ¡ä»¶" class="hash-link" aria-label="10.5. å°è£…ç»„åˆæ¡ä»¶çš„ç›´æ¥é“¾æ¥" title="10.5. å°è£…ç»„åˆæ¡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç»§æ‰¿ AllNestedConditions å°è£…å¤šæ¡ä»¶ (and å…³ç³»)</p><p>AnyNestedCondition (or å…³ç³»)</p><p>NoneNestedConditions (none å…³ç³»)</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="106-åˆ›å»ºè‡ªå·±çš„-starter">10.6. åˆ›å»ºè‡ªå·±çš„ starter<a href="#106-åˆ›å»ºè‡ªå·±çš„-starter" class="hash-link" aria-label="10.6. åˆ›å»ºè‡ªå·±çš„ starterçš„ç›´æ¥é“¾æ¥" title="10.6. åˆ›å»ºè‡ªå·±çš„ starterçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-custom-starter" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://github.com/SpringForAll/spring-boot-starter-swagger" target="_blank" rel="noopener noreferrer">spring-boot-swagger ç¤ºä¾‹</a></p><ul><li><p>åˆ›å»ºä¸€ä¸ªstarter é¡¹ç›®</p><p>  å‘½åè§„åˆ™: spring boot å®˜æ–¹ starter å‘½åä¸º &quot;spring-boot-starter-xxx&quot;, è‡ªå®šä¹‰çš„starter å‘½å &quot;xxx-spring-boot-starter&quot;;</p><p>  å¼•å…¥ <code>spring-boot-configuration-processor</code> (ç¼–è¯‘æ—¶ç”Ÿæˆ spring-configuration-metadata.json ï¼Œåœ¨IDEä¸­ç¼–è¾‘é…ç½®æ–‡ä»¶æ—¶ï¼Œä¼šå‡ºç°æç¤º), æ ‡æ³¨ä¸º optional: true é¿å…ä¾èµ–ä¼ é€’</p><p>  å¼•å…¥ <code>spring boot starter</code> (ç›¸å…³æ³¨è§£éœ€è¦), æ ‡æ³¨ä¸º optional true,  idea ä¸­ spring boot app åˆ›å»ºæ—¶è‡ªåŠ¨å¯¼å…¥äº†</p><p>  ç»§æ‰¿ <code>spring-boot-starter-parent</code>, <a href="https://stackoverflow.com/questions/21317006/spring-boot-parent-pom-when-you-already-have-a-parent-pom/21318359#21318359" target="_blank" rel="noopener noreferrer">å¦‚æœæƒ³ä¸é€šè¿‡ç»§æ‰¿æ–¹å¼ä½¿ç”¨, å¯ä»¥ dependencyManagement <code>spring boot dependencies</code>, å‚è€ƒ</a>
ä½†æ˜¯è¿™ç§æ–¹å¼æœ‰ä¸ªå¼Šç«¯, å°±æ˜¯éœ€è¦æŒ‡å®š spring-boot-maven-plugin çš„ goal, å¦‚æœç”¨ parent çš„æ–¹å¼åˆ™ä¸éœ€è¦è¿™ä¸€ç‚¹</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">executions</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">execution</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">goals</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">goal</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">repackage</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">goal</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">goals</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">execution</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">executions</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  å¦‚æœæ˜¯ç”Ÿæˆçš„ spring boot é¡¹ç›®, åˆ é™¤ å¯åŠ¨ç±», ç„¶åæ›¿æ¢ spring boot maven æ’ä»¶ ä¸º <code>maven-compile-plugin</code> (å› ä¸ºæ²¡æœ‰å¯åŠ¨ç±», repackage ä¼šæŠ¥é”™), è®¾ç½® properties ä¸‹ maven.compiler.source, maven.compiler.target, java.version</p></li><li><p>åˆ›å»ºä¸€ä¸ª @ConfigurationProperties ç±»ç”¨äºä¿å­˜ä½ çš„é…ç½®ä¿¡æ¯, åœ¨ @EnableConfigurationProperties(...) ç±»ä¸ŠæŒ‡å®š, (æˆ–è€…æ ‡æ³¨ component ç„¶åé…ç½®componentScan æˆ–è€…ç›´æ¥ @configurationPropertiesScan)</p><p>  ï¼ˆå¦‚æœä½ çš„é¡¹ç›®ä¸ä½¿ç”¨é…ç½®ä¿¡æ¯åˆ™å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œä¸è¿‡è¿™ç§æƒ…å†µéå¸¸å°‘è§ï¼‰</p></li><li><p>åˆ›å»ºä¸€ä¸ªAutoConfigurationï¼Œå¼•ç”¨å®šä¹‰å¥½çš„é…ç½®ä¿¡æ¯ï¼›åœ¨AutoConfigurationä¸­å®ç°æ‰€æœ‰starteråº”è¯¥å®Œæˆçš„æ“ä½œï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªç±»åŠ å…¥classpath:/META-INF/spring.factoriesé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå£°æ˜</p><p>  è‡ªåŠ¨é…ç½®ç±»ä¸åº”å¯ç”¨ç»„ä»¶æ‰«æä»¥æŸ¥æ‰¾å…¶ä»–ç»„ä»¶ (å³ è‹¥ç”Ÿæˆçš„æ˜¯spring boot éª¨æ¶, åº”å»æ‰å¯åŠ¨ç±»)ã€‚åº”è¯¥ä½¿ç”¨ @import æ¥å¯¼å…¥å…¶ä»–é…ç½®ç±»</p></li><li><p>æ‰“åŒ…å‘å¸ƒ</p><p>  å¦‚æœ starter å°±æ˜¯æœ¬åœ°è‡ªå·±ä½¿ç”¨, å¯ä»¥ä¸æ‰“åŒ…ä¸å‘å¸ƒ, ç›´æ¥åœ¨å¦å¤–çš„é¡¹ç›®ä¸­å¼•å…¥</p></li></ul><p>spring.factories ç¤ºä¾‹:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">springframework</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">boot</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">autoconfigure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">EnableAutoConfiguration</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">mycorp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">libx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">autoconfigure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">LibXAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">\</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">mycorp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">libx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">autoconfigure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">LibXWebAutoConfiguration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="107-åçˆ¬è™«-starter">10.7. åçˆ¬è™« starter<a href="#107-åçˆ¬è™«-starter" class="hash-link" aria-label="10.7. åçˆ¬è™« starterçš„ç›´æ¥é“¾æ¥" title="10.7. åçˆ¬è™« starterçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.cnblogs.com/zouhao/p/12175653.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zouhao/p/12175653.html</a> </p><p>TODO</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="gprc-starter">gprc starter<a href="#gprc-starter" class="hash-link" aria-label="gprc starterçš„ç›´æ¥é“¾æ¥" title="gprc starterçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/yidongnan/grpc-spring-boot-starter" target="_blank" rel="noopener noreferrer">https://github.com/yidongnan/grpc-spring-boot-starter</a></p><h1>11. ç›‘æ§ and å®‰å…¨</h1><p>å¯†ç åŠ å¯† Argon2</p><p>Spring Vaultï¼Œå®ƒä¸ºHashiCorp Vaultæ·»åŠ æŠ½è±¡ -&gt; å¯†ç å­˜å‚¨</p><p>OWASP ZAP æ¸—é€æµ‹è¯•æŠ¥å‘Š</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="111-spring-boot-actuator-ç›‘æ§">11.1. spring-boot-actuator ç›‘æ§<a href="#111-spring-boot-actuator-ç›‘æ§" class="hash-link" aria-label="11.1. spring-boot-actuator ç›‘æ§çš„ç›´æ¥é“¾æ¥" title="11.1. spring-boot-actuator ç›‘æ§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.cnblogs.com/zwqh/p/11851300.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zwqh/p/11851300.html</a>
<a href="https://www.jianshu.com/p/8bfac9289c7e" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/8bfac9289c7e</a></p><p>spring boot çš„ sub project, æä¾›äº§å“çº§åˆ«çš„ç›‘æ§</p><p>spring cloud ä¸­, refresh çš„ post ç«¯ç‚¹è¢« actuator æ¥ç®¡, é…ç½® <code>management.endpoints.web.exposure.include=health,info</code> (é»˜è®¤) éœ€è¦æ·»åŠ  &#x27;refresh&#x27;, æœ€ç»ˆéœ€è¦ <code>curl -d{} http://xxx:xxx/actuator/refresh</code></p><p><a href="https://github.com/Netflix/Hystrix/issues/1566" target="_blank" rel="noopener noreferrer">hystrix.stream ä¹Ÿè¢«æ¥ç®¡</a>, é…ç½®æ·»åŠ  &#x27;hystrix.stream&#x27;, ç›‘æ§æµä¸º <code>http://xxx:xxx/actuator/hystrix.stream</code></p><p><a href="https://www.jianshu.com/p/d5943e303a1f" target="_blank" rel="noopener noreferrer">actuator ç¿»è¯‘</a>
<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/html/production-ready-features.html#production-ready" target="_blank" rel="noopener noreferrer">actuator å®˜æ–¹æ–‡æ¡£</a></p><p>è‡ªå·±å†™ç›‘æ§, å¯ä»¥:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">PaymentServiceApp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableEnvironment</span><span class="token plain">        env     </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getEnvironment</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// æˆ–è€… ç›´æ¥ @autowired Environment env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>uiå±•ç¤º: <a href="https://github.com/codecentric/spring-boot-admin" target="_blank" rel="noopener noreferrer">https://github.com/codecentric/spring-boot-admin</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="112-spring-boot-admin-ç›‘æ§ç•Œé¢">11.2. spring boot admin ç›‘æ§ç•Œé¢<a href="#112-spring-boot-admin-ç›‘æ§ç•Œé¢" class="hash-link" aria-label="11.2. spring boot admin ç›‘æ§ç•Œé¢çš„ç›´æ¥é“¾æ¥" title="11.2. spring boot admin ç›‘æ§ç•Œé¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.jianshu.com/p/483adafc6b3a" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/483adafc6b3a</a> //todo</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="113-spring-boot-starter-security">11.3. spring-boot-starter-security<a href="#113-spring-boot-starter-security" class="hash-link" aria-label="11.3. spring-boot-starter-securityçš„ç›´æ¥é“¾æ¥" title="11.3. spring-boot-starter-securityçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1131-securityç»„ä»¶ä»‹ç»">11.3.1. securityç»„ä»¶ä»‹ç»<a href="#1131-securityç»„ä»¶ä»‹ç»" class="hash-link" aria-label="11.3.1. securityç»„ä»¶ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="11.3.1. securityç»„ä»¶ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>[ref]<!-- -->](<a href="https://www.cnblogs.com/demingblog/p/10874753.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/demingblog/p/10874753.html</a>)</p><p>spring security æ˜¯å®‰å…¨è®¤è¯æ¡†æ¶, åŸºäº Servlet filter, æ ¸å¿ƒå°±æ˜¯ä¸€ç»„è¿‡æ»¤å™¨é“¾; å¯åœ¨ Web è¯·æ±‚çº§å’Œæ–¹æ³•è°ƒç”¨çº§å¤„ç†èº«ä»½ç¡®è®¤å’Œæˆæƒ </p><p>å¦‚æœæ˜¯ æ™®é€šçš„ spring é¡¹ç›®, ä½¿ç”¨ shiro æ›´ç®€å•</p><p>================================= æ ¸å¿ƒç»„ä»¶</p><p>SecurityContext - ç”¨æˆ· auth é€šè¿‡å, authentication ä¿¡æ¯å­˜å‚¨åœ¨è¿™é‡Œ, å¯ä»¥åœ¨ä»»æ„åœ°æ–¹ä½¿ç”¨ <code>SecurityContextHolder.getContext().set/getAuthentication</code></p><p>SecurityContextHolder - åœ¨ä»»æ„åœ°æ–¹å¯ä»¥è·å– SecurityContext </p><p>Authentication - è®¤è¯ä¿¡æ¯å¯¹è±¡, è¡¨ç¤ºè®¤è¯åçš„ç”¨æˆ·</p><p>UserDetails - è®¤è¯ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯</p><p>UserDetailsService - å¯ä»¥ç”¨æ¥è·å–UserDetailsã€‚æˆ‘ä»¬ä¼šè‡ªå®šä¹‰ä¸€ä¸ªCustomUserDetailsServiceæ¥å®ç°UserDetailsServiceæ¥å£, é€šè¿‡ username æŸ¥è¯¢åˆ° userDetails, å¦‚æœæ²¡æŸ¥åˆ° , <code>UsernameNotFoundException</code></p><p>AuthenticationManager - ä½œç”¨å°±æ˜¯æ ¡éªŒAuthentication, æ ¡éªŒå¤±è´¥æŠ›å‡º <code>BadCredentialsException</code></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1132-åŸºæœ¬ä½¿ç”¨-å’Œ-é…ç½®ç”¨æˆ·åå¯†ç ">11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç <a href="#1132-åŸºæœ¬ä½¿ç”¨-å’Œ-é…ç½®ç”¨æˆ·åå¯†ç " class="hash-link" aria-label="11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç çš„ç›´æ¥é“¾æ¥" title="11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é…åˆ starter  (spring-boot-starter-security), å¯ä»¥é›¶é…ç½®ä½¿ç”¨. å¼•å…¥åä¾èµ–</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-starter-security</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-starter-test</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.security</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-security-test</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚ä¸‹é…ç½®å³å¯</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">8000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">security</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">security</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)"># å¦‚æœä¸é…ç½®, é»˜è®¤ä¸º user/æ§åˆ¶å°æ—¥å¿—ä¸­çœ‹åˆ°é»˜è®¤å¯†ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">#   å‰ç«¯è°ƒç”¨, éœ€è¦ basic auth è®¤è¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ”¯æŒä¸¤ç§éªŒè¯æ–¹å¼:</p><ul><li><p>å¯ä»¥é€šè¿‡ form è¡¨å•æ¥è®¤è¯ (é»˜è®¤)</p><p>  é€‚åˆé¡µé¢éªŒè¯</p></li><li><p>å¯ä»¥é€šè¿‡ HttpBasic æ¥è®¤è¯ (basic auth)</p><p>  é€‚åˆ api æ¥å£çš„éªŒè¯, å½“ç„¶ä¹Ÿé€‚åˆé¡µé¢</p></li></ul><p>ç”¨æˆ·åå¯†ç ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œ:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableWebSecurity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebSecurityConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebSecurityConfigurerAdapter</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserDetailsService</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">userDetailsService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserDetails</span><span class="token plain"> user </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">             </span><span class="token class-name" style="color:rgb(38, 127, 153)">User</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">withDefaultPasswordEncoder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;password&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">roles</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;USER&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InMemoryUserDetailsManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1133-ç¦ç”¨åŸºæœ¬è®¤è¯">11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯<a href="#1133-ç¦ç”¨åŸºæœ¬è®¤è¯" class="hash-link" aria-label="11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯çš„ç›´æ¥é“¾æ¥" title="11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¦‚æœæ—¢æƒ³ä½¿ç”¨securityåˆä¸æƒ³æ¯æ¬¡è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œå¯ä»¥ç›´æ¥åœ¨Applicationæ–‡ä»¶ä¸­ç¦ç”¨è‡ªåŠ¨é…ç½® (æ–¹æ³• 1)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">exclude </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">org</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">springframework</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">boot</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">autoconfigure</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">security</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">servlet</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">SecurityAutoConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ–è€… åœ¨ä»£ç ä¸­é…ç½® (æ–¹æ³• 2)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableWebSecurity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebSecurityConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebSecurityConfigurerAdapter</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    æ˜¯å› ä¸ºè¦†ç›–äº†çˆ¶ç±»æ–¹æ³•, çˆ¶ç±»ä¸­çš„æ–¹æ³•å†…å®¹å¦‚ä¸‹:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">        http.authorizeRequests((requests) -&gt; requests.anyRequest().authenticated()); // æ‰€æœ‰ è¯·æ±‚éƒ½éœ€è¦è®¤è¯</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">        http.formLogin(); // æ”¯æŒè¡¨å•è®¤è¯</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">        http.httpBasic(); // æ”¯æŒ basic auth è®¤è¯</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpSecurity</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è¿™é‡Œä¸ºç©º, è¡¨ç¤ºæ— éœ€ ä»»ä½•è®¤è¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//        super.configure(http);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1134-é…ç½®ä¸­-websecurity-å’Œ-httpsecurity-åŒºåˆ«">11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«<a href="#1134-é…ç½®ä¸­-websecurity-å’Œ-httpsecurity-åŒºåˆ«" class="hash-link" aria-label="11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«çš„ç›´æ¥é“¾æ¥" title="11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// - WebSecurity:ç”¨äºé…ç½®ä¸€äº›ä¸ Servlet å®¹å™¨ç›¸å…³çš„å®‰å…¨æ€§è®¾ç½®,å¦‚å¿½ç•¥æŸäº› èµ„æºçš„æƒé™æ ¡éªŒç­‰ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// WebSecurity çš„é…ç½®é€šå¸¸è¾ƒç®€å•,ä¸»è¦è¿˜æ˜¯ HttpSecurity è´Ÿè´£äº†ç»å¤§éƒ¨åˆ†çš„è®¤è¯ä¸æˆæƒåŠŸèƒ½é…ç½®ã€‚æ‰€ä»¥,æ€»ä½“æ¥è¯´,WebSecurity é…ç½®å¾®è°ƒ,HttpSecurity é…ç½®ä¸»ä½“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">WebSecurity</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    web</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">ignoring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">antMatchers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/resources/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¿½ç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">antMatchers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/publics/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¿½ç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// - HttpSecurity:ç”¨äºé…ç½®ä¸ HTTP è¯·æ±‚è·¯ç”±ç›¸å…³çš„æƒé™æ§åˆ¶å’Œè®¤è¯è®¾ç½®,å¦‚è¡¨å•ç™»å½•,HTTP åŸºç¡€è®¤è¯,è®¿é—®æ§åˆ¶ç­‰ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpSecurity</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    http</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">authorizeRequests</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">antMatchers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/home&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">permitAll</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">antMatchers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/admin/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">hasRole</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ADMIN&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">antMatchers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/publics/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">hasRole</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;USER&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// no effect, å› ä¸º  WebSecurity ä¸­é…ç½®äº† å¿½ç•¥ publics/** ä¸‹çš„éªŒè¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">anyRequest</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">authenticated</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">and</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">formLogin</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">loginPage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/login&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">permitAll</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">and</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">logout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">permitAll</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>================================ å®ç°æ–¹æ³•çº§åˆ«çš„æƒé™æ§åˆ¶</p><p><code>@EnableGlobalMethodSecurity(prePostEnabled =true)</code> ä½¿ç”¨è¡¨è¾¾å¼å®ç°æ–¹æ³•çº§åˆ«çš„å®‰å…¨æ€§   ,  4ä¸ªæ³¨è§£å¯ç”¨</p><ul><li><p>@PreAuthorize åœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰,åŸºäºè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœæ¥é™åˆ¶å¯¹æ–¹æ³•çš„è®¿é—®</p></li><li><p>@PostAuthorize å…è®¸æ–¹æ³•è°ƒç”¨,ä½†æ˜¯å¦‚æœè¡¨è¾¾å¼è®¡ç®—ç»“æœä¸ºfalse,å°†æŠ›å‡ºä¸€ä¸ªå®‰å…¨æ€§å¼‚å¸¸</p></li><li><p>@PostFilter å…è®¸æ–¹æ³•è°ƒç”¨,ä½†å¿…é¡»æŒ‰ç…§è¡¨è¾¾å¼æ¥è¿‡æ»¤æ–¹æ³•çš„ç»“æœ</p></li><li><p>@PreFilter å…è®¸æ–¹æ³•è°ƒç”¨,ä½†å¿…é¡»åœ¨è¿›å…¥æ–¹æ³•ä¹‹å‰è¿‡æ»¤è¾“å…¥å€¼</p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//è¡¨ç¤ºå¦‚æœç”¨æˆ·å…·æœ‰adminè§’è‰²ï¼Œå°±èƒ½è®¿é—®listAllUsersæ–¹æ³•ï¼Œå¦‚æœæ–¹æ³•å‰ä¸åŠ @preAuthorizeæ³¨è§£ï¼Œæ„å‘³ç€æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®listAllUsers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PreAuthorize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hasRole(â€˜adminâ€˜)&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/user/&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestMethod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">GET</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ResponseBody</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">publicList </span><span class="token function" style="color:rgb(0, 0, 255)">listAllUsers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    â€¦â€¦</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–è¿˜æœ‰ :</p><p>@EnableGlobalMethodSecurity(securedEnabled=true) å¼€å¯@Secured æ³¨è§£è¿‡æ»¤æƒé™</p><p>@EnableGlobalMethodSecurity(jsr250Enabled=true)å¼€å¯@RolesAllowed æ³¨è§£è¿‡æ»¤æƒé™</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1135-é…ç½®è·¨åŸŸ">11.3.5. é…ç½®è·¨åŸŸ<a href="#1135-é…ç½®è·¨åŸŸ" class="hash-link" aria-label="11.3.5. é…ç½®è·¨åŸŸçš„ç›´æ¥é“¾æ¥" title="11.3.5. é…ç½®è·¨åŸŸçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://lolico.me/2020/04/26/Spring-Security-CORS/" target="_blank" rel="noopener noreferrer">https://lolico.me/2020/04/26/Spring-Security-CORS/</a>
TODO</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="114-oauth2">11.4. oauth2<a href="#114-oauth2" class="hash-link" aria-label="11.4. oauth2çš„ç›´æ¥é“¾æ¥" title="11.4. oauth2çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>spring security oauth2</p><p>check outline-about-authentication-oauth2.md</p><h1>12. æ—¥å¿—</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="121-log4j2-marker-å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶">12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶<a href="#121-log4j2-marker-å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶" class="hash-link" aria-label="12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.jianshu.com/p/1ff824bc997a?utm_campaign" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/1ff824bc997a?utm_campaign</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="122-logback">12.2. logback<a href="#122-logback" class="hash-link" aria-label="12.2. logbackçš„ç›´æ¥é“¾æ¥" title="12.2. logbackçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--åº”ç”¨åç§°--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">APPLICATION_NAME</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">roncoo-pay-app-notify</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- æ–‡ä»¶è¾“å‡ºæ ¼å¼ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">PATTERN</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">%-12(%d{yyyy-MM-dd HH:mm:ss.SSS}) |-%-5level [%thread] %c [%L] -| %msg%n</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- æ–‡ä»¶è·¯å¾„ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">FILE_PATH</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">/home/roncoo/opensource/pay/logs</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- æ§åˆ¶å° --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">appender</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">CONSOLE</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">ch.qos.logback.core.ConsoleAppender</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">encoder</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">pattern</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${PATTERN}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">pattern</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">encoder</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">appender</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--æ—¥å¿—æ–‡ä»¶ç­–ç•¥--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">appender</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">LOGGER_FILE</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">ch.qos.logback.core.rolling.RollingFileAppender</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">file</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${FILE_PATH}/${APPLICATION_NAME}/${APPLICATION_NAME}.log</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">file</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">rollingPolicy</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">ch.qos.logback.core.rolling.TimeBasedRollingPolicy</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">fileNamePattern</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${FILE_PATH}/${APPLICATION_NAME}/${APPLICATION_NAME}.%d{yyyy-MM-dd}.log</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">fileNamePattern</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">MaxHistory</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">100</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">MaxHistory</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">rollingPolicy</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">layout</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">ch.qos.logback.classic.PatternLayout</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">pattern</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${PATTERN}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">pattern</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">layout</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">appender</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">logger</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">com.roncoo.pay</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">level</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">debug</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- LOG &quot;com.baeldung*&quot; at TRACE level --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">logger</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">com.baeldung</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">level</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">trace</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">additivity</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">false</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">appender-ref</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">RollingFile</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">appender-ref</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">Console</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">logger</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- æ‰€æœ‰æ—¥å¿—éƒ½æ‰“å° info çº§åˆ« --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">root</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">level</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">info</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">appender-ref</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">CONSOLE</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">appender-ref</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">LOGGER_FILE</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">root</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>13. æ•°æ®å±‚</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="131-canal-è®¢é˜…">13.1. canal è®¢é˜…<a href="#131-canal-è®¢é˜…" class="hash-link" aria-label="13.1. canal è®¢é˜…çš„ç›´æ¥é“¾æ¥" title="13.1. canal è®¢é˜…çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/zendesk/maxwell" target="_blank" rel="noopener noreferrer">https://github.com/zendesk/maxwell</a> ç±»ä¼¼</p><p><a href="https://github.com/alibaba/otter" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/otter</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="132-mybatis-è‡ªåŠ¨å»ºè¡¨æ’ä»¶">13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶<a href="#132-mybatis-è‡ªåŠ¨å»ºè¡¨æ’ä»¶" class="hash-link" aria-label="13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶çš„ç›´æ¥é“¾æ¥" title="13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/zyf970617/mybatis-auto-create-table" target="_blank" rel="noopener noreferrer">https://github.com/zyf970617/mybatis-auto-create-table</a></p><p><a href="https://blog.csdn.net/yuru974882032/article/details/106749299" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/yuru974882032/article/details/106749299</a></p><p><a href="https://gitee.com/sunchenbin/mybatis-enhance" target="_blank" rel="noopener noreferrer">https://gitee.com/sunchenbin/mybatis-enhance</a></p><p><a href="https://gitee.com/baomidou/mybatis-mate-examples?_from=gitee_search" target="_blank" rel="noopener noreferrer">https://gitee.com/baomidou/mybatis-mate-examples?_from=gitee_search</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="133-mybatis-crud-å¢å¼ºæ’ä»¶">13.3. mybatis crud å¢å¼ºæ’ä»¶<a href="#133-mybatis-crud-å¢å¼ºæ’ä»¶" class="hash-link" aria-label="13.3. mybatis crud å¢å¼ºæ’ä»¶çš„ç›´æ¥é“¾æ¥" title="13.3. mybatis crud å¢å¼ºæ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>mybatis plus</p><p>tk.mybatis</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="134-æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶">13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶<a href="#134-æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶" class="hash-link" aria-label="13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶çš„ç›´æ¥é“¾æ¥" title="13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸¤è€…å·®åˆ«ä¸å¤§ï¼Œå› åŠŸèƒ½å¤šï¼Œä¸ªäººâ€œç¨å¾®â€å€¾å‘ Liquibase; ä¸€èˆ¬æˆ‘çš„å€¾å‘æ˜¯å°é¡¹ç›®ï¼Œæ•´ä½“å˜åŠ¨ä¸å¤§çš„ç”¨Flywayï¼Œè€Œå¤§åº”ç”¨å’Œä¼ä¸šåº”ç”¨ç”¨Liquibaseæ›´åˆé€‚</p><p><a href="https://github.com/bytebase/bytebase" target="_blank" rel="noopener noreferrer">https://github.com/bytebase/bytebase</a> æ–°çš„æ›´ä¸ºå…¨é¢çš„æ•°æ®åº“ schema ç®¡ç†å·¥å…·</p><blockquote><p><a href="https://fastzhong.com/posts/db-migration/" target="_blank" rel="noopener noreferrer">https://fastzhong.com/posts/db-migration/</a> å¯¹æ¯”</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1341-liquibase">13.4.1. liquibase<a href="#1341-liquibase" class="hash-link" aria-label="13.4.1. liquibaseçš„ç›´æ¥é“¾æ¥" title="13.4.1. liquibaseçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1342-flyway">13.4.2. Flyway<a href="#1342-flyway" class="hash-link" aria-label="13.4.2. Flywayçš„ç›´æ¥é“¾æ¥" title="13.4.2. Flywayçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="working-process-å·¥ä½œåŸç†">working process å·¥ä½œåŸç†<a href="#working-process-å·¥ä½œåŸç†" class="hash-link" aria-label="working process å·¥ä½œåŸç†çš„ç›´æ¥é“¾æ¥" title="working process å·¥ä½œåŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ol><li><p>é¡¹ç›®å¯åŠ¨ï¼Œåº”ç”¨ç¨‹åºå®Œæˆæ•°æ®åº“è¿æ¥æ± çš„å»ºç«‹åï¼ŒFlywayè‡ªåŠ¨è¿è¡Œã€‚</p><blockquote><p>åˆæ¬¡ä½¿ç”¨æ—¶ï¼Œflywayä¼šåˆ›å»ºä¸€ä¸ª flyway_schema_history è¡¨ï¼Œç”¨äºè®°å½•sqlæ‰§è¡Œè®°å½•ã€‚</p></blockquote></li><li><p>Flywayä¼šæ‰«æé¡¹ç›®æŒ‡å®šè·¯å¾„ä¸‹(é»˜è®¤æ˜¯ classpath:db/migration )çš„æ‰€æœ‰sqlè„šæœ¬ï¼Œæ£€æŸ¥å·²ç»æ‰§è¡Œè¿‡çš„ç‰ˆæœ¬å¯¹åº”çš„è„šæœ¬æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼ŒåŒ…æ‹¬è„šæœ¬æ–‡ä»¶åï¼Œä»¥åŠè„šæœ¬å†…å®¹, ä¸é¡¹ç›®ä¸­çš„sqlè„šæœ¬è‹¥ä¸ä¸€è‡´ï¼ŒFlywayä¼šæŠ¥é”™å¹¶åœæ­¢é¡¹ç›®æ‰§è¡Œã€‚</p></li><li><p>å¦‚æœæ ¡éªŒé€šè¿‡ï¼Œåˆ™æ ¹æ®è¡¨ä¸­çš„sqlæˆåŠŸè®°å½•æœ€å¤§ç‰ˆæœ¬å·ï¼Œå¿½ç•¥æ‰€æœ‰ç‰ˆæœ¬å·å°äºè¯¥ç‰ˆæœ¬çš„è„šæœ¬ã€‚å†æŒ‰ç…§ç‰ˆæœ¬å·ä»å°åˆ°å¤§ï¼Œé€ä¸ªæ‰§è¡Œå…¶ä½™è„šæœ¬ã€‚</p></li></ol><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-verify-the-sql-update-æ ¡éªŒåŸç†">how to verify the sql update æ ¡éªŒåŸç†<a href="#how-to-verify-the-sql-update-æ ¡éªŒåŸç†" class="hash-link" aria-label="how to verify the sql update æ ¡éªŒåŸç†çš„ç›´æ¥é“¾æ¥" title="how to verify the sql update æ ¡éªŒåŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å¦‚ä½•æ ¡éªŒæ–‡ä»¶?</p><p>Flywayè·å– flyway_schema_history ä¸­æœ€æ–°æˆåŠŸè®°å½•çš„ç‰ˆæœ¬å·ï¼ˆåŸºå‡†versionï¼‰ï¼Œä¸é¡¹ç›®ä¸­db/migrationç›®å½•ä¸­çš„è„šæœ¬versionè¿›è¡Œæ¯”å¯¹ï¼Œå½“è„šæœ¬versionå¤§äºåŸºå‡†versionåˆ™æ‰§è¡Œã€‚</p><p>å¯¹äºä¿®æ”¹å·²ç»æ‰§è¡Œè¿‡çš„sqlè„šæœ¬ï¼ŒFlywayä¹Ÿæœ‰é¢„é˜²ï¼Œé‚£å°±æ˜¯checksumã€‚æ¯ä¸ªsqlè„šæœ¬åœ¨æ‰§è¡Œå‰ä¼šå°†åŸºæœ¬ä¿¡æ¯å†™å…¥flyway_schema_historyä¸­ï¼ŒFlywayä¼šæŠŠæ¯ä¸ªè„šæœ¬ä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡ä¸€ç³»åˆ—ç®—æ³•è¾“å‡ºä¸€ä¸ªæ•´æ•°å€¼checksumæ¥åˆ¤æ–­è„šæœ¬æ˜¯å¦æœ‰ä¿®æ”¹ï¼ˆå“ªæ€•æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼‰ï¼ŒFlywayåœ¨å·¥ä½œä¹‹å‰ï¼Œä¼šé€ä¸ªè„šæœ¬æ¯”å¯¹å…¶æ•°æ®åº“ä¸­çš„checksumå€¼ï¼Œå¦‚æœè®¡ç®—ç»“æœä¸åŒï¼Œåˆ™ä¼šæŠ¥mismatchçš„é”™è¯¯</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-use-flyway">how to use flyway<a href="#how-to-use-flyway" class="hash-link" aria-label="how to use flywayçš„ç›´æ¥é“¾æ¥" title="how to use flywayçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.flywaydb</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">flyway-core</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">7.1.1</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)"># æ•°æ®åº“è¿æ¥é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">driver-class-name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">3306/flyway_demo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">?</span><span class="token plain">characterEncoding=utf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">8</span><span class="token important">&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># æ˜¯å¦å¯ç”¨flyway, é»˜è®¤å°±æ˜¯å¼€å¯çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># ç¼–ç æ ¼å¼ï¼Œé»˜è®¤UTF-8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">encoding</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> UTF</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># è¿ç§»sqlè„šæœ¬æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤db/migration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">locations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">db/migration</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">check-location</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">#æ£€æŸ¥è¿ç§»è„šæœ¬çš„ä½ç½®æ˜¯å¦å­˜åœ¨ï¼Œé»˜è®¤false.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">table</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> schema_version_synchronizer  </span><span class="token comment" style="color:rgb(0, 128, 0)">#é…ç½®æ•°æ®åº“ä¿¡æ¯è¡¨çš„åç§°ï¼Œé»˜è®¤æ˜¯ flyway_schema_historyã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># è¿ç§»sqlè„šæœ¬æ–‡ä»¶åç§°çš„å‰ç¼€ï¼Œé»˜è®¤V</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">sql-migration-prefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> V</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># è¿ç§»sqlè„šæœ¬æ–‡ä»¶åç§°çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤2ä¸ªä¸‹åˆ’çº¿__</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">sql-migration-separator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> __</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># è¿ç§»sqlè„šæœ¬æ–‡ä»¶åç§°çš„åç¼€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">sql-migration-suffixes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> .sql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># è¿ç§»æ—¶æ˜¯å¦è¿›è¡Œæ ¡éªŒï¼Œé»˜è®¤true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">validate-on-migrate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># å‡çº§ä¸€ä¸ªç©ºçš„æ•°æ®åº“ï¼Œæˆ–è€…åœ¨ä¸€ç›´ä½¿ç”¨flywayå‡çº§æ–¹æ¡ˆçš„æ•°æ®åº“ä¸Šè¿›è¡Œå‡çº§ï¼Œéƒ½ä¸ä¼šåˆé—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨å·²æœ‰çš„æ•°æ®åº“å¼•å…¥flywayï¼Œå°±éœ€è¦ä¸€äº›é¢å¤–çš„å·¥ä½œã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># è®¾ç½®æ­¤å±æ€§ true, è¡¨ç¤ºå½“è¿ç§»å‘ç°æ•°æ®åº“éç©ºä¸”å­˜åœ¨æ²¡æœ‰å…ƒæ•°æ®çš„è¡¨æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡ŒåŸºå‡†è¿ç§»ï¼Œæ–°å»ºschema_versionè¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># flywayä¼šè‡ªåŠ¨å°†å½“å‰çš„æ•°æ®åº“è®°å½•ä¸ºV1ç‰ˆæœ¬ï¼Œç„¶åæ‰§è¡Œå‡çº§è„šæœ¬ã€‚è¿™ä¹Ÿè¡¨ç¤ºç”¨æˆ·æ‰€å‡†å¤‡çš„è„šæœ¬ä¸­ï¼ŒV1ç‰ˆæœ¬çš„è„šæœ¬ä¼šè¢«è·³è¿‡ï¼Œåªæœ‰V1ä¹‹åçš„ç‰ˆæœ¬æ‰ä¼šè¢«æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># é»˜è®¤ false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">baseline-on-migrate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># æ˜¯å¦å…è®¸æ— åºçš„è¿ç§»ï¼Œé»˜è®¤false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">out-of-order</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">clean-disabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">#flyway çš„ clean å‘½ä»¤ä¼šåˆ é™¤æŒ‡å®š schema ä¸‹çš„æ‰€æœ‰ table, ç”Ÿäº§åŠ¡å¿…ç¦æ‰ã€‚è¿™ä¸ªé»˜è®¤å€¼æ˜¯ false ç†è®ºä¸Šä½œä¸ºé»˜è®¤é…ç½®æ˜¯ä¸ç§‘å­¦çš„ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å‘½åè§„åˆ™:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">ä»…éœ€è¦è¢«æ‰§è¡Œä¸€æ¬¡çš„</span><span class="token constant" style="color:rgb(129, 31, 63)">SQL</span><span class="token plain">å‘½åä»¥å¤§å†™çš„</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;V&quot;</span><span class="token plain">å¼€å¤´ï¼Œ</span><span class="token constant" style="color:rgb(129, 31, 63)">V</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">ç‰ˆæœ¬å·</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">ç‰ˆæœ¬å·çš„æ•°å­—é—´ä»¥â€</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">â€œæˆ–â€_â€œåˆ†éš”å¼€</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">åŒä¸‹åˆ’çº¿</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">ç”¨æ¥åˆ†éš”ç‰ˆæœ¬å·å’Œæè¿°</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> æ–‡ä»¶æè¿° </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> åç¼€åã€‚ä¾‹å¦‚ï¼š </span><span class="token maybe-class-name">V20201100__create_user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sqlã€</span><span class="token constant" style="color:rgb(129, 31, 63)">V2</span><span class="token number" style="color:rgb(9, 134, 88)">.1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">5__create_user_ddl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sqlã€</span><span class="token constant" style="color:rgb(129, 31, 63)">V4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">1_2__add_user_dml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sql</span><span class="token plain"> ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">å¯é‡å¤è¿è¡Œçš„</span><span class="token constant" style="color:rgb(129, 31, 63)">SQL</span><span class="token plain">ï¼Œåˆ™ä»¥å¤§å†™çš„â€œ</span><span class="token constant" style="color:rgb(129, 31, 63)">R</span><span class="token plain">â€å¼€å¤´ï¼Œåé¢å†ä»¥ä¸¤ä¸ªä¸‹åˆ’çº¿åˆ†å‰²ï¼Œå…¶åè·Ÿæ–‡ä»¶åç§°ï¼Œæœ€å</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sqlç»“å°¾ï¼Œæ¯”å¦‚ï¼š</span><span class="token plain"> </span><span class="token maybe-class-name">R__truncate_user_dml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sql</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">ï¼Œä½†ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">åªè¦è„šæœ¬å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯åŠ¨æ—¶å€™å°±ä¼šæ‰§è¡Œ</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´è¯¦ç»†é…ç½®</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">baseline</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">descriptionå¯¹æ‰§è¡Œè¿ç§»æ—¶åŸºå‡†ç‰ˆæœ¬çš„æè¿°</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">baseline</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">migrateå½“è¿ç§»æ—¶å‘ç°ç›®æ ‡schemaéç©ºï¼Œè€Œä¸”å¸¦æœ‰æ²¡æœ‰å…ƒæ•°æ®çš„è¡¨æ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨æ‰§è¡ŒåŸºå‡†è¿ç§»ï¼Œé»˜è®¤</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">baseline</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">versionå¼€å§‹æ‰§è¡ŒåŸºå‡†è¿ç§»æ—¶å¯¹ç°æœ‰çš„schemaçš„ç‰ˆæœ¬æ‰“æ ‡ç­¾ï¼Œé»˜è®¤å€¼ä¸º</span><span class="token number" style="color:rgb(9, 134, 88)">1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">check</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token dom variable" style="color:rgb(9, 134, 88)">location</span><span class="token plain">æ£€æŸ¥è¿ç§»è„šæœ¬çš„ä½ç½®æ˜¯å¦å­˜åœ¨ï¼Œé»˜è®¤</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">clean</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">validation</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">errorå½“å‘ç°æ ¡éªŒé”™è¯¯æ—¶æ˜¯å¦è‡ªåŠ¨è°ƒç”¨cleanï¼Œé»˜è®¤</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">enabledæ˜¯å¦å¼€å¯flywaryï¼Œé»˜è®¤</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">encodingè®¾ç½®è¿ç§»æ—¶çš„ç¼–ç ï¼Œé»˜è®¤</span><span class="token constant" style="color:rgb(129, 31, 63)">UTF</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token number" style="color:rgb(9, 134, 88)">8.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">ignore</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">failed</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">future</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">migrationå½“è¯»å–å…ƒæ•°æ®è¡¨æ—¶æ˜¯å¦å¿½ç•¥é”™è¯¯çš„è¿ç§»ï¼Œé»˜è®¤</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">init</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">sqlså½“åˆå§‹åŒ–å¥½è¿æ¥æ—¶è¦æ‰§è¡Œçš„</span><span class="token constant" style="color:rgb(129, 31, 63)">SQL</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">locationsè¿ç§»è„šæœ¬çš„ä½ç½®ï¼Œé»˜è®¤db</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">migration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">out</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token keyword" style="color:rgb(0, 0, 255)">of</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">orderæ˜¯å¦å…è®¸æ— åºçš„è¿ç§»ï¼Œé»˜è®¤</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">passwordç›®æ ‡æ•°æ®åº“çš„å¯†ç </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">placeholder</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">prefixè®¾ç½®æ¯ä¸ªplaceholderçš„å‰ç¼€ï¼Œé»˜è®¤$</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">placeholder</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">replacementplaceholdersæ˜¯å¦è¦è¢«æ›¿æ¢ï¼Œé»˜è®¤</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">placeholder</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">suffixè®¾ç½®æ¯ä¸ªplaceholderçš„åç¼€ï¼Œé»˜è®¤</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">placeholders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">placeholder name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">è®¾ç½®placeholderçš„value</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">schemasè®¾å®šéœ€è¦flywaryè¿ç§»çš„schemaï¼Œå¤§å°å†™æ•æ„Ÿï¼Œé»˜è®¤ä¸ºè¿æ¥é»˜è®¤çš„schema</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sql</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">migration</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">prefixè¿ç§»æ–‡ä»¶çš„å‰ç¼€ï¼Œé»˜è®¤ä¸º</span><span class="token constant" style="color:rgb(129, 31, 63)">V</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sql</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">migration</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">separatorè¿ç§»è„šæœ¬çš„æ–‡ä»¶ååˆ†éš”ç¬¦ï¼Œé»˜è®¤__</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sql</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">migration</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">suffixè¿ç§»è„šæœ¬çš„åç¼€ï¼Œé»˜è®¤ä¸º</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">sql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">tableflywayä½¿ç”¨çš„å…ƒæ•°æ®è¡¨åï¼Œé»˜è®¤ä¸ºschema_version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">targetè¿ç§»æ—¶ä½¿ç”¨çš„ç›®æ ‡ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸ºlatest</span><span class="token plain"> version</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">urlè¿ç§»æ—¶ä½¿ç”¨çš„</span><span class="token constant" style="color:rgb(129, 31, 63)">JDBC</span><span class="token plain"> </span><span class="token constant" style="color:rgb(129, 31, 63)">URL</span><span class="token plain">ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œå°†ä½¿ç”¨é…ç½®çš„ä¸»æ•°æ®æº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">userè¿ç§»æ•°æ®åº“çš„ç”¨æˆ·å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">flyway</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">validate</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">on</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">migrateè¿ç§»æ—¶æ˜¯å¦æ ¡éªŒï¼Œé»˜è®¤ä¸º</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å’Œ Maven æ’ä»¶é…åˆä½¿ç”¨:
(mavenæ’ä»¶è®©æˆ‘ä»¬å¯ä»¥ä¸éœ€è¦å¯åŠ¨é¡¹ç›®å°±èƒ½æ‰§è¡ŒFlywayçš„å„ç§å‘½ä»¤)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.flywaydb</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">flyway-maven-plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">5.2.4</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">url</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">jdbc:mysql://localhost:3306/flyway_demo?characterEncoding=utf-8</span><span class="token entity named-entity">&amp;amp;</span><span class="token plain">useSSL=false</span><span class="token entity named-entity">&amp;amp;</span><span class="token plain">serverTimezone=Asia/Shanghai</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">url</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">user</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">root</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">user</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">password</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">root</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">password</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">driver</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.mysql.cj.jdbc.Driver</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">driver</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">1.baseline</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">å¯¹å·²ç»å­˜åœ¨æ•°æ®åº“Schemaç»“æ„çš„æ•°æ®åº“ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">å®ç°åœ¨éç©ºæ•°æ®åº“æ–°å»ºMetaDataè¡¨ï¼Œå¹¶æŠŠMigrationsåº”ç”¨åˆ°è¯¥æ•°æ®åº“ï¼›ä¹Ÿå¯ä»¥åœ¨å·²æœ‰è¡¨ç»“æ„çš„æ•°æ®åº“ä¸­å®ç°æ·»åŠ Metadataè¡¨ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">2.cleanï¼ˆéå¸¸å±é™©ï¼‰</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">æ¸…é™¤æ‰å¯¹åº”æ•°æ®åº“Schemaä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„ï¼Œè§†å›¾ï¼Œå­˜å‚¨è¿‡ç¨‹ç­‰ï¼Œcleanæ“ä½œåœ¨dev å’Œ testé˜¶æ®µå¾ˆå¥½ç”¨ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ç¦ç”¨ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">3.info</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ç”¨äºæ‰“å°æ‰€æœ‰çš„Migrationsçš„è¯¦ç»†å’ŒçŠ¶æ€ä¿¡æ¯ï¼Œä¹Ÿæ˜¯é€šè¿‡MetaDataå’ŒMigrationså®Œæˆçš„ï¼Œå¯ä»¥å¿«é€Ÿå®šä½å½“å‰çš„æ•°æ®åº“ç‰ˆæœ¬ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">4.migrate</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">æ‰§è¡Œè¿ç§»ï¼Œç­‰åŒäºé¡¹ç›®å¯åŠ¨æ‰§è¡Œçš„å†…å®¹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">5.repair</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ä¿®å¤metaDataè¡¨ï¼Œè¯¥æ“ä½œåœ¨metadataå‡ºç°é”™è¯¯æ—¶å¾ˆæœ‰ç”¨ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">6.undo(ç¤¾åŒºç‰ˆæœ¬ä¸æ”¯æŒ)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">æ’¤é”€æ“ä½œ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">7.validate</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">éªŒè¯å·²ç»æ‰§è¡Œçš„Migrationsæ˜¯å¦æœ‰å˜æ›´ï¼Œé»˜è®¤å¼€å¯çš„ï¼ŒåŸç†æ˜¯å¯¹æ¯”MetaDataè¡¨ä¸æœ¬åœ°Migrationsçš„checkNumå€¼ï¼Œå¦‚æœå€¼ç›¸åŒåˆ™éªŒè¯é€šè¿‡ï¼Œå¦åˆ™å¤±è´¥ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="135-æ•°æ®åº“-jdbc-url-å’Œé©±åŠ¨-å„ç§è¿æ¥å­—ç¬¦ä¸²">13.5. æ•°æ®åº“ jdbc url å’Œé©±åŠ¨ å„ç§è¿æ¥å­—ç¬¦ä¸²<a href="#135-æ•°æ®åº“-jdbc-url-å’Œé©±åŠ¨-å„ç§è¿æ¥å­—ç¬¦ä¸²" class="hash-link" aria-label="13.5. æ•°æ®åº“ jdbc url å’Œé©±åŠ¨ å„ç§è¿æ¥å­—ç¬¦ä¸²çš„ç›´æ¥é“¾æ¥" title="13.5. æ•°æ®åº“ jdbc url å’Œé©±åŠ¨ å„ç§è¿æ¥å­—ç¬¦ä¸²çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token maybe-class-name">MySQL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token literal-property property">jdbc</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">mysql</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token number" style="color:rgb(9, 134, 88)">122.191</span><span class="token number" style="color:rgb(9, 134, 88)">.199</span><span class="token number" style="color:rgb(9, 134, 88)">.51</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token number" style="color:rgb(9, 134, 88)">60000</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">js_phaseii_db</span><span class="token operator" style="color:rgb(0, 0, 0)">?</span><span class="token plain">useUnicode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">true</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">characterEncoding</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">utf8</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">serverTimezone</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token maybe-class-name">Asia</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token maybe-class-name">Shanghai</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token literal-property property">jdbc</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">mysql</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">localhost</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token number" style="color:rgb(9, 134, 88)">3306</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">ry</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">cloud</span><span class="token operator" style="color:rgb(0, 0, 0)">?</span><span class="token plain">useUnicode</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">true</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">characterEncoding</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">utf8</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">zeroDateTimeBehavior</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">convertToNull</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">useSSL</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">true</span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;</span><span class="token plain">serverTimezone</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token constant" style="color:rgb(129, 31, 63)">GMT</span><span class="token operator" style="color:rgb(0, 0, 0)">%</span><span class="token plain">2B8</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">mysql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">cj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">Driver</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token literal-property property">oracle</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1.</span><span class="token plain">ä½¿ç”¨service_name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token literal-property property">é…ç½®æ–¹å¼</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> jdbc</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">oracle</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">thin</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">@</span><span class="token comment" style="color:rgb(0, 128, 0)">//:1521/helowin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">2.</span><span class="token plain">ä½¿ç”¨</span><span class="token constant" style="color:rgb(129, 31, 63)">SID</span><span class="token plain">ï¼Œé…ç½®æ–¹å¼ï¼š         jdbc</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">oracle</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">thin</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">@</span><span class="token comment" style="color:rgb(0, 128, 0)">//:1521/helowin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">3.</span><span class="token plain">ä½¿ç”¨</span><span class="token constant" style="color:rgb(129, 31, 63)">SID</span><span class="token plain">ï¼Œé…ç½®æ–¹å¼ï¼š         jdbc</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">oracle</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">thin</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">@</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token number" style="color:rgb(9, 134, 88)">1521</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">helowin</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">oracle</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">driver</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">OracleDriver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="136-graphqlé›†æˆ">13.6. graphqlé›†æˆ<a href="#136-graphqlé›†æˆ" class="hash-link" aria-label="13.6. graphqlé›†æˆçš„ç›´æ¥é“¾æ¥" title="13.6. graphqlé›†æˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.awaimai.com/2876.html" target="_blank" rel="noopener noreferrer">https://www.awaimai.com/2876.html</a></p><p><a href="https://juejin.cn/post/6982083422567006245" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6982083422567006245</a> å…¥é—¨
<a href="https://graphql.cn/learn/queries/" target="_blank" rel="noopener noreferrer">https://graphql.cn/learn/queries/</a> å®˜ç½‘æ–‡æ¡£</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="137-å¯åŠ¨æ‰§è¡Œ-sql">13.7. å¯åŠ¨æ‰§è¡Œ SQL<a href="#137-å¯åŠ¨æ‰§è¡Œ-sql" class="hash-link" aria-label="13.7. å¯åŠ¨æ‰§è¡Œ SQLçš„ç›´æ¥é“¾æ¥" title="13.7. å¯åŠ¨æ‰§è¡Œ SQLçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1371-åˆ©ç”¨-spring-jdbc">13.7.1. åˆ©ç”¨ spring jdbc<a href="#1371-åˆ©ç”¨-spring-jdbc" class="hash-link" aria-label="13.7.1. åˆ©ç”¨ spring jdbcçš„ç›´æ¥é“¾æ¥" title="13.7.1. åˆ©ç”¨ spring jdbcçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">#   æ•°æ®æºåŸºæœ¬é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">driver-class-name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">3306/mybatis</span><span class="token punctuation" style="color:rgb(4, 81, 165)">?</span><span class="token plain">useUnicode=true</span><span class="token important">&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> com.alibaba.druid.pool.DruidDataSource</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">#   æ•°æ®æºå…¶ä»–é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">initialSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">minIdle</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">maxActive</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">maxWait</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">300000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">validationQuery</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> SELECT 1 FROM DUAL</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">testWhileIdle</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">testOnBorrow</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">testOnReturn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">poolPreparedStatements</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">#   é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">filters</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> stat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">wall</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">log4j</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">connectionProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">sql/department.sql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">sql/employee.sql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">data.sql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">sql-script-encodng</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> utf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">initialization-mode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> ALWAYS</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">jpa</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">hibernate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">ddl-auto</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> none</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1372-ä½¿ç”¨-jpa">13.7.2. ä½¿ç”¨ jpa<a href="#1372-ä½¿ç”¨-jpa" class="hash-link" aria-label="13.7.2. ä½¿ç”¨ jpaçš„ç›´æ¥é“¾æ¥" title="13.7.2. ä½¿ç”¨ jpaçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>1ã€SpringBootæ ¹æ®è„šæœ¬åˆå§‹åŒ–</p><p>ç»“æ„åˆå§‹åŒ–è„šæœ¬æ–‡ä»¶ç”±spring.datasource.schemaå±æ€§æŒ‡å®šï¼Œæ•°æ®åˆå§‹åŒ–è„šæœ¬ç”±æ–‡ä»¶spring.datasource.dataå±æ€§æŒ‡å®šã€‚</p><p>è¿™ä¸¤ä¸ªè„šæœ¬æ˜¯å¦æ‰§è¡Œçš„å¼€å…³ç”±spring.datasource.initialization-modeå†³å®šï¼šalways-ä¸€å®šæ‰§è¡Œï¼Œembedded-åªå¯¹å†…å­˜æ•°æ®åº“æ‰§è¡Œ(é»˜è®¤)ï¼Œnever-ä¸æ‰§è¡Œã€‚</p><p>spring.jpa.defer-datasource-initialization setup to true will enable the insertting sql execution, no other configuraton setup. Just need a new sql file named with &quot;data.sql&quot; in resources folder.</p><p>2ã€JPAæ ¹æ®ç±»ç»“æ„åˆå§‹åŒ–</p><p>ã€€ã€€@Entityæ³¨è§£çš„ç±»å°†ä¼šè¢«åˆå§‹åŒ–ä¸€å¼ æ•°æ®åº“è¡¨ã€‚</p><p>ã€€ã€€æ˜¯å¦æ‰§è¡Œçš„å¼€å…³ç”±spring.jpa.hibernate.ddl-autoå±æ€§æ§åˆ¶ï¼Œå¯ä¸ºcreate/update/create-drop/none/validateï¼Œå…¶ä¸­noneå’Œvalidateä¸ºä¸æ‰§è¡Œã€‚</p><p>3ã€åˆå§‹åŒ–æ—¶å¯¹äºå¦ä¸€ä¸ªå±æ€§spring.jpa.generate-dllåœ¨ç†è§£ä¸Šçš„å›°æƒ‘</p><p>ã€€ã€€æŒ‰ç…§å®ƒçš„æè¿°ï¼Œspring.jpa.generate-dllæ˜¯jpaå±‚é¢å¯¹æ•°æ®è¡¨ç”Ÿæˆç­–ç•¥çš„æ§åˆ¶ï¼Œè€Œspring.jpa.hibernate.ddl-autoæ˜¯jpaå®ç°hibernateå±‚é¢ä¸Šå¯¹æ•°æ®è¡¨ç”Ÿæˆç­–ç•¥çš„æ§åˆ¶ã€‚</p><p>ã€€ã€€å®è·µä¹ŸéªŒè¯äº†æ–‡ç« é‡Œæ‰€è¯´çš„ï¼Œspring.jpa.generate-dllæ¯”spring.jpa.hibernate.ddl-autoæœ‰æ›´å¼ºçš„æ§åˆ¶åŠ›åº¦ï¼Œå³ä½¿spring.jpa.hibernate.ddl-autoä¸ºnoneï¼Œåªè¦spring.jpa.generate-dllä¸ºtrueï¼Œä¹Ÿä¼šæ ¹æ®@Entityæ³¨è§£çš„å®ä½“ç±»ç”Ÿæˆå¯¹åº”æ•°æ®è¡¨ã€‚</p><p>ã€€ã€€æŒ‰ç…§æ–‡ç« çš„å»ºè®®ï¼Œä¸ºäº†é¿å…æ··æ·†å’Œä¸å¥½ç†è§£ï¼Œè¿™ä¸¤è€…æœ€å¥½ä¸è¦æ··ç”¨ï¼Œåªå¯¹JPAå®ç°å±‚é¢çš„æ§åˆ¶å±æ€§spring.jpa.hibernate.ddl-autoè¿›è¡Œè®¾ç½®å³å¯ã€‚</p><p>   æœ€ä¿é™©çš„åšæ³•: è‹¥æƒ³è‡ªåŠ¨ç”Ÿæˆè¡¨, setup <code>spring.jpa.generate-dll=true</code>, <code>spring.jpa.hibernate.ddl-auto</code> åˆ™è®¾ç½®ä¸ºéœ€è¦çš„ç­–ç•¥; è‹¥ä¸æƒ³è‡ªåŠ¨ç”Ÿæˆè¡¨, è®¾ç½® <code>generate-ddl=false (é»˜è®¤)</code> å³å¯</p><p>4ã€è®©SpringBootæ ¹æ®è„šæœ¬å’Œè®©JPAæ ¹æ®å®ä½“ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸¤è€…ä¹‹ä¸­é€‰æ‹©ä¸€ä¸ªå³å¯ã€‚</p><p>5 spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect è™½ç„¶ ä¸åŒçš„æ•°æ®åº“æ–¹è¨€ä¼šè‡ªåŠ¨é€‰æ‹©, ä½†æ˜¯è‹¥æƒ³ä½¿ç”¨ç‰¹å®šå¼•æ“ç±»å‹éœ€è¦æŒ‡å®šæ–¹è¨€, ä¸åŠ è¿™å¥åˆ™ä¸ä¼šé»˜è®¤åˆ›å»ºMyISAMå¼•æ“çš„æ•°æ®åº“</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">jpa</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">database-platform</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> org.hibernate.dialect.H2Dialect</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">generate-ddl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">hibernate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">ddl-auto</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> create/create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">drop/update/validate/none</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">1.Â·createï¼šæ¯æ¬¡åŠ è½½hibernateæ—¶éƒ½ä¼šåˆ é™¤ä¸Šä¸€æ¬¡çš„ç”Ÿæˆçš„è¡¨ï¼Œç„¶åæ ¹æ®ä½ çš„modelç±»å†é‡æ–°æ¥ç”Ÿæˆæ–°è¡¨ï¼Œ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">2.Â·create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">dropï¼šæ¯æ¬¡åŠ è½½hibernateæ—¶æ ¹æ®modelç±»ç”Ÿæˆè¡¨ï¼Œä½†æ˜¯sessionFactoryä¸€å…³é—­</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">è¡¨å°±è‡ªåŠ¨åˆ é™¤ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">create/create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">drop åœ¨åˆ›å»ºè¡¨æ—¶</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> é»˜è®¤ä¼šæ‰«æ classpath ä¸‹é¢ï¼ˆé¡¹ç›®ä¸­ä¸€èˆ¬æ˜¯ resources ç›®å½•ï¼‰æ˜¯å¦æœ‰import.sqlï¼Œå¦‚æœæœ‰æœºä¼šæ‰§è¡Œimport.sqlè„šæœ¬ä¸­çš„ insert è¯­å¥</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">3.Â·updateï¼šæœ€å¸¸ç”¨çš„å±æ€§ï¼Œç¬¬ä¸€æ¬¡åŠ è½½hibernateæ—¶æ ¹æ®modelç±»ä¼šè‡ªåŠ¨å»ºç«‹èµ·è¡¨çš„ç»“æ„ï¼ˆå‰ææ˜¯å…ˆå»ºç«‹å¥½æ•°æ®åº“ï¼‰ï¼Œä»¥ååŠ è½½hibernateæ—¶æ ¹æ®modelç±»è‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„ï¼Œå³ä½¿è¡¨ç»“æ„æ”¹å˜äº†ä½†è¡¨ä¸­çš„è¡Œä»ç„¶å­˜åœ¨ä¸ä¼šåˆ é™¤ä»¥å‰çš„è¡Œã€‚è¦æ³¨æ„çš„æ˜¯å½“éƒ¨ç½²åˆ°æœåŠ¡å™¨åï¼Œè¡¨ç»“æ„æ˜¯ä¸ä¼šè¢«é©¬ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œæ˜¯è¦ç­‰åº”ç”¨ç¬¬ä¸€æ¬¡è¿è¡Œèµ·æ¥åæ‰ä¼šã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">4.Â·validateï¼šæ¯æ¬¡åŠ è½½hibernateæ—¶ï¼ŒéªŒè¯åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼Œåªä¼šå’Œæ•°æ®åº“ä¸­çš„è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¼šåˆ›å»ºæ–°è¡¨ï¼Œä½†æ˜¯ä¼šæ’å…¥æ–°å€¼ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">æ¨èåœ¨åˆæ¬¡åˆ›å»ºæ—¶ä¼šè®¾ä¸ºcreate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">åˆ›å»ºå¥½åæ”¹ä¸ºvalidate. (è¿›å¼€å‘ç¯å¢ƒä½¿ç”¨</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ç”Ÿäº§ç¯å¢ƒæ…ç”¨)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1373-datasourceinitializer">13.7.3. DataSourceInitializer<a href="#1373-datasourceinitializer" class="hash-link" aria-label="13.7.3. DataSourceInitializerçš„ç›´æ¥é“¾æ¥" title="13.7.3. DataSourceInitializerçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CustomizeDataSourceInitializer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;classpath:testSql/test_farms.sql&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Resource</span><span class="token plain"> functionScriptFarms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;classpath:testSql/test_miners.sql&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Resource</span><span class="token plain"> functionScriptMiners</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;classpath:testSql/test_pool_config.sql&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Resource</span><span class="token plain"> functionScriptPoolConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceInitializer</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">dataSourceInitializer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceInitializer</span><span class="token plain"> initializer </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceInitializer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è®¾ç½®æ•°æ®æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        initializer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setDataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        initializer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setDatabasePopulator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">databasePopulator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> initializer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DatabasePopulator</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">databasePopulator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResourceDatabasePopulator</span><span class="token plain"> populator </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResourceDatabasePopulator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        populator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addScripts</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">functionScriptFarms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        populator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addScripts</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">functionScriptMiners</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        populator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addScripts</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">functionScriptPoolConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> populator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1374-maven-antrun-pluginn">13.7.4. maven-antrun-pluginn<a href="#1374-maven-antrun-pluginn" class="hash-link" aria-label="13.7.4. maven-antrun-pluginnçš„ç›´æ¥é“¾æ¥" title="13.7.4. maven-antrun-pluginnçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">profile</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">id</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">refresh-db</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">id</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">               </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.apache.maven.plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">               </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">maven-antrun-plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">               </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">               </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">target</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                   </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">file</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">src/main/resources/application.properties</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                   </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">sql</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">driver</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">${jdbc.driver}</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">url</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">${jdbc.url}</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">userid</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">${jdbc.username}</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">password</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">${jdbc.password}</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">onerror</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">continue</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">encoding</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">${project.build.sourceEncoding}</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                       </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">classpath</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">refid</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">maven.test.classpath</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                       </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">transaction</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">src/main/resources/sql/h2/schema.sql</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                       </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">transaction</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">src/test/resources/data/h2/import-data.sql</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                   </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">sql</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">              </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">target</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">              </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">profile</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1375-construct-a-script-execution-service-manually">13.7.5. construct a script execution service manually<a href="#1375-construct-a-script-execution-service-manually" class="hash-link" aria-label="13.7.5. construct a script execution service manuallyçš„ç›´æ¥é“¾æ¥" title="13.7.5. construct a script execution service manuallyçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://mubasil-bokhari.medium.com/execute-sql-script-in-spring-boot-30636884a932" target="_blank" rel="noopener noreferrer">https://mubasil-bokhari.medium.com/execute-sql-script-in-spring-boot-30636884a932</a>
todo</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="138-æ•´åˆ-spring-jdbc">13.8. æ•´åˆ spring jdbc<a href="#138-æ•´åˆ-spring-jdbc" class="hash-link" aria-label="13.8. æ•´åˆ spring jdbcçš„ç›´æ¥é“¾æ¥" title="13.8. æ•´åˆ spring jdbcçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.cnblogs.com/liyihua/p/12333967.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/liyihua/p/12333967.html</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="139-æ•´åˆ-hibernate-å³-jpa">13.9. æ•´åˆ hibernate (å³ jpa)<a href="#139-æ•´åˆ-hibernate-å³-jpa" class="hash-link" aria-label="13.9. æ•´åˆ hibernate (å³ jpa)çš„ç›´æ¥é“¾æ¥" title="13.9. æ•´åˆ hibernate (å³ jpa)çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/raeperd/realworld-springboot-java" target="_blank" rel="noopener noreferrer">https://github.com/raeperd/realworld-springboot-java</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1391-jpaæ³¨è§£æ€»ç»“">13.9.1. jpaæ³¨è§£æ€»ç»“<a href="#1391-jpaæ³¨è§£æ€»ç»“" class="hash-link" aria-label="13.9.1. jpaæ³¨è§£æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="13.9.1. jpaæ³¨è§£æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// anno on class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@DynamicInsert</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@DynamicUpdate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EntityListeners</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">AuditingEntityListener</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//anno on field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// uuid as primary key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GenericGenerator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;generator&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> strategy </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;uuid&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GeneratedValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">generator </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;generator&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> strategy </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GenerationType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">TABLE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Column</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> length </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">32</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨æšä¸¾">ä½¿ç”¨æšä¸¾<a href="#ä½¿ç”¨æšä¸¾" class="hash-link" aria-label="ä½¿ç”¨æšä¸¾çš„ç›´æ¥é“¾æ¥" title="ä½¿ç”¨æšä¸¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="the-basic-usage">the basic usage<a href="#the-basic-usage" class="hash-link" aria-label="the basic usageçš„ç›´æ¥é“¾æ¥" title="the basic usageçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">enum</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Rating</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    UNRATED</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">G</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    PG</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    PG13</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">R</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    NC17</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Entity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Movie</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">   *  to persist string (the field name) into db, </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">   * (and there is a another value here: ordinal, which is default, that means persist int (the ordr number) to db)</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">   </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Enumerated</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">EnumType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">STRING</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Rating</span><span class="token plain"> rating</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="converter-æ¨è">@Converter (æ¨è)<a href="#converter-æ¨è" class="hash-link" aria-label="@Converter (æ¨è)çš„ç›´æ¥é“¾æ¥" title="@Converter (æ¨è)çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">enum</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Category</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">SPORT</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;S&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">MUSIC</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;M&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">TECHNOLOGY</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;T&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Entity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Article</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@column</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Category</span><span class="token plain"> category</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// We&#x27;ve set the @Converterâ€˜s value of autoApply to true so that JPA will automatically apply the conversion logic to all mapped attributes of a Category type. Otherwise, we&#x27;d have to put the @Converter annotation directly on the entity&#x27;s field.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Converter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">autoApply </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CategoryConverter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AttributeConverter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Category</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">convertToDatabaseColumn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Category</span><span class="token plain"> category</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">category </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> category</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getCode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Category</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">convertToEntityAttribute</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">code </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Stream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">of</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Category</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">values</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">filter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getCode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">equals</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">code</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">findFirst</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">orElseThrow</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">IllegalArgumentException</span><span class="token operator" style="color:rgb(0, 0, 0)">::</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="postload-and-prepersist">@PostLoad and @PrePersist<a href="#postload-and-prepersist" class="hash-link" aria-label="@PostLoad and @PrePersistçš„ç›´æ¥é“¾æ¥" title="@PostLoad and @PrePersistçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Entity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Article</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// mapping to db</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Basic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> priorityValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// store the enum value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Transient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Priority</span><span class="token plain"> priority</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostLoad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">fillTransient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">priorityValue </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">priority </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Priority</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">of</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">priorityValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PrePersist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">fillPersistent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">priority </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">priorityValue </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> priority</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getPriority</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1392-jpa-querydsl-å¤šè¡¨è”æŸ¥">13.9.2. jpa queryDsl å¤šè¡¨è”æŸ¥<a href="#1392-jpa-querydsl-å¤šè¡¨è”æŸ¥" class="hash-link" aria-label="13.9.2. jpa queryDsl å¤šè¡¨è”æŸ¥çš„ç›´æ¥é“¾æ¥" title="13.9.2. jpa queryDsl å¤šè¡¨è”æŸ¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://github.com/querydsl/querydsl" target="_blank" rel="noopener noreferrer">https://github.com/querydsl/querydsl</a></p><p><a href="https://zhongpan.tech/2020/07/20/034-best-practice-of-multi-table-joint-query-in-spring-data-jpa/" target="_blank" rel="noopener noreferrer">https://zhongpan.tech/2020/07/20/034-best-practice-of-multi-table-joint-query-in-spring-data-jpa/</a>
<a href="https://www.baeldung.com/querydsl-with-jpa-tutorial" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/querydsl-with-jpa-tutorial</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1393-jpa-æ”¯æŒ-java8-time">13.9.3. jpa æ”¯æŒ java8 time<a href="#1393-jpa-æ”¯æŒ-java8-time" class="hash-link" aria-label="13.9.3. jpa æ”¯æŒ java8 timeçš„ç›´æ¥é“¾æ¥" title="13.9.3. jpa æ”¯æŒ java8 timeçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token literal-property property">https</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">stackoverflow</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">com</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">questions</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token number" style="color:rgb(9, 134, 88)">54840769</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">how</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">to</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">persist</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">localdate</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token keyword" style="color:rgb(0, 0, 255)">with</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">jpa</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token literal-property property">https</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">www</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">baeldung</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">com</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">jpa</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">java</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">time</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1394-å®¡è®¡-createddate">13.9.4. å®¡è®¡ createdDate<a href="#1394-å®¡è®¡-createddate" class="hash-link" aria-label="13.9.4. å®¡è®¡ createdDateçš„ç›´æ¥é“¾æ¥" title="13.9.4. å®¡è®¡ createdDateçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://blog.csdn.net/a972669015/article/details/104778172" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/a972669015/article/details/104778172</a>
TODO</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1395-æ‰§è¡ŒåŸç”Ÿ-sql">13.9.5. æ‰§è¡ŒåŸç”Ÿ SQL<a href="#1395-æ‰§è¡ŒåŸç”Ÿ-sql" class="hash-link" aria-label="13.9.5. æ‰§è¡ŒåŸç”Ÿ SQLçš„ç›´æ¥é“¾æ¥" title="13.9.5. æ‰§è¡ŒåŸç”Ÿ SQLçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/*</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">- åªéœ€è¦åœ¨åé¢åŠ ä¸€ä¸ª nativeQuery = true å°±è¡Œ</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">- å‚æ•°ç”¨</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;select xx from where a = :userId&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> nativeQuery </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">findFriendsByUserId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">&quot;userId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token plain"> userId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PersistenceContext</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">EntityManager</span><span class="token plain"> entityManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Employee</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getFirstNamesLikeAndBonusBigger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Double</span><span class="token plain"> bonusAmount</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Query</span><span class="token plain"> query </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> entityManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">createNativeQuery</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;select e.* from spring_data_jpa_example.bonus b, spring_data_jpa_example.employee e\n&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;where e.id = b.employee_id &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;and e.firstname LIKE ? &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;and b.amount&gt; ? &quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Employee</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setParameter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> firstName </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;%&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setParameter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> bonusAmount</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getResultList</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CustomPostRepositoryImpl</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CustomPostRepository</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PersistenceContext</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">EntityManager</span><span class="token plain"> entityManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">PostDTO</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">findPostDTOByTitle</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;postTitle&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> postTitle</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> entityManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">createNativeQuery</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">            SELECT p.id AS p_id,</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">                   p.title AS p_title,</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">                   pc.id AS pc_id,</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">                   pc.review AS pc_review</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">            FROM post p</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">            JOIN post_comment pc ON p.id = pc.post_id</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">            WHERE p.title LIKE :postTitle</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">            ORDER BY pc.id</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">            &quot;&quot;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setParameter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;postTitle&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> postTitle</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">unwrap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">org</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">hibernate</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">query</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">Query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setResultTransformer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">PostDTOResultTransformer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getResultList</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1396-åŠ¨æ€-sql">13.9.6. åŠ¨æ€ SQL<a href="#1396-åŠ¨æ€-sql" class="hash-link" aria-label="13.9.6. åŠ¨æ€ SQLçš„ç›´æ¥é“¾æ¥" title="13.9.6. åŠ¨æ€ SQLçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://www.cnblogs.com/kongxianghai/p/7575988.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/kongxianghai/p/7575988.html</a></p><p>æ’å…¥å’Œä¿®æ”¹å¯ä»¥åœ¨ç±»å®ä½“ä¸Šæ ‡æ³¨
@DynamicInsertå’Œ@DynamicUpdate
è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆéç©ºå­—æ®µçš„ æ’å…¥å’Œ æ›´æ–°è¯­å¥</p><p>åŠ¨æ€æŸ¥è¯¢åˆ™éœ€è¦ç”¨ Criteria API</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1397-spring-data-rest-é…åˆ-spring-data-jpa">13.9.7. spring-data-rest é…åˆ spring-data-jpa<a href="#1397-spring-data-rest-é…åˆ-spring-data-jpa" class="hash-link" aria-label="13.9.7. spring-data-rest é…åˆ spring-data-jpaçš„ç›´æ¥é“¾æ¥" title="13.9.7. spring-data-rest é…åˆ spring-data-jpaçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="http://docs.jcohy.com/docs/spring-data-rest/3.2.8.RELEASE/html5/zh-cn/" target="_blank" rel="noopener noreferrer">http://docs.jcohy.com/docs/spring-data-rest/3.2.8.RELEASE/html5/zh-cn/</a>
<a href="https://docs.spring.io/spring-data/rest/docs/3.4.5/reference/html/#Project" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-data/rest/docs/3.4.5/reference/html/#Project</a></p><p><a href="https://docs.spring.io/spring-data/jpa/docs/2.4.5/reference/html/#repositories" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-data/jpa/docs/2.4.5/reference/html/#repositories</a></p><p>spring data rest å¯ä»¥ç›´æ¥å°† repository å‘å¸ƒä¸º rest service, å’Œ spring data jpa (è‡ªåŠ¨ç”Ÿæˆ crud api) é…åˆ</p><p>ç›®å‰æ”¯æŒSpring Data JPAã€Spring Data MongoDBã€Spring Data Neo4jã€Spring Data GemFireã€Spring Data Cassandraçš„ repository è‡ªåŠ¨è½¬æ¢æˆRESTæœåŠ¡</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-starter-data-jpa</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-starter-data-rest</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RepositoryRestResource</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// publish repository as rest service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ReservationRepository</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JpaRepository</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Reservation</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * customized rest service</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * http://localhost:8080/reservations/search/by-name?name=hello</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RestResource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">path </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;by-name&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">Optional</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Reservation</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">findByName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨åˆ†å¸ƒå¼ä¸‹, åœ¨ feign client æ¥æ”¶ spring data rest å‘å¸ƒçš„ service éœ€è¦å’Œ hateoas (spring-boot-starter-hateoas) é…åˆ:(<a href="https://docs.spring.io/spring-hateoas/docs/current/reference/html/#migrate-to-1.0.changes" target="_blank" rel="noopener noreferrer">hateoas ç‰ˆæœ¬æ›´æ–°, æ¥å—æ•°æ®çš„å®ä½“æœ‰æ”¹å˜</a>)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@FeignClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;reservation-service&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// also support &#x27;url&#x27; ( outside eureka)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ReservationResources</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/reservations&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">CollectionModel</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Reservation</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">reservations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/message&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1310-æ•´åˆ-mybatis-plus">13.10. æ•´åˆ mybatis-plus<a href="#1310-æ•´åˆ-mybatis-plus" class="hash-link" aria-label="13.10. æ•´åˆ mybatis-plusçš„ç›´æ¥é“¾æ¥" title="13.10. æ•´åˆ mybatis-plusçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>mybatis-plus-boot-starter</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IAccountService</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IService</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Account</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AccountService</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ServiceImpl</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">AccountMapper</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Account</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IAccountService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@mapper</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// æˆ–è€…å¯åŠ¨ç±» @MapperScan(&quot;io.github.xiaoyureed.workflow.mapper&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AccountMapper</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">BaseMapper</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Account</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AccountMapper.xml</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token doctype punctuation" style="color:rgb(4, 81, 165)">&lt;!</span><span class="token doctype doctype-tag">DOCTYPE</span><span class="token doctype"> </span><span class="token doctype name">mapper</span><span class="token doctype"> </span><span class="token doctype name">PUBLIC</span><span class="token doctype"> </span><span class="token doctype string" style="color:rgb(163, 21, 21)">&quot;-//mybatis.org/DTD Mapper 3.0&quot;</span><span class="token doctype"> </span><span class="token doctype string" style="color:rgb(163, 21, 21)">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token doctype punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">mapper</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">namespace</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">io.github.xiaoyureed.workflow.mapper.AccountMapper</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">mapper</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1311-æ•´åˆ-mybatis">13.11. æ•´åˆ mybatis<a href="#1311-æ•´åˆ-mybatis" class="hash-link" aria-label="13.11. æ•´åˆ mybatisçš„ç›´æ¥é“¾æ¥" title="13.11. æ•´åˆ mybatisçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/gothinkster/spring-boot-realworld-example-app" target="_blank" rel="noopener noreferrer">https://github.com/gothinkster/spring-boot-realworld-example-app</a></p><ul><li>ä¾èµ–ï¼šmybatis-spring-boot-starter</li><li>@Mapperæ ‡æ³¨åˆ›å»ºçš„xxxMapperæ¥å£ï¼›æˆ–è€… åœ¨ å¯åŠ¨ç±»ä¸Š æ ‡æ³¨ @mapperscan(basepackage...)</li><li>@Select(&quot;SELECT * FROM USER WHERE NAME = #{name}&quot;)æ ‡æ³¨æ–¹æ³•ï¼Œè¿˜æœ‰@insertç­‰ï¼›æ–¹æ³•å‚æ•°@Param(&quot;name&quot;)æ ‡æ³¨</li><li>é€šè¿‡@Autowiredæ³¨å…¥ä½¿ç”¨</li></ul><p>ä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥ mybatisplus-spring-boot-starter é€šè¿‡ mybatis plus ä½¿ç”¨</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13111-åŸºæœ¬é…ç½®">13.11.1. åŸºæœ¬é…ç½®<a href="#13111-åŸºæœ¬é…ç½®" class="hash-link" aria-label="13.11.1. åŸºæœ¬é…ç½®çš„ç›´æ¥é“¾æ¥" title="13.11.1. åŸºæœ¬é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">3306/mall</span><span class="token punctuation" style="color:rgb(4, 81, 165)">?</span><span class="token plain">useUnicode=true</span><span class="token important">&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">mybatis</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)"># config-locationå±æ€§å’Œconfigurationå±æ€§ä¸èƒ½åŒæ—¶æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">#config-location: classpath:mybatis.xml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">type-aliases-package</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> me.zingon.pagehelper.model</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">mapper-locations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mapper/</span><span class="token important">*.xml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">#mapper-locations: {&quot;classpath:mapper/*.xml&quot;, &quot;classpath*:com/**/mapper/*.xml&quot;}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">default-fetch-size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">default-statement-timeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13112-ä½¿ç”¨-æ‹¦æˆªå™¨-interceptor-plugins">13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins<a href="#13112-ä½¿ç”¨-æ‹¦æˆªå™¨-interceptor-plugins" class="hash-link" aria-label="13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor pluginsçš„ç›´æ¥é“¾æ¥" title="13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor pluginsçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="131121-principle-of-plugins">13.11.2.1. principle of plugins<a href="#131121-principle-of-plugins" class="hash-link" aria-label="13.11.2.1. principle of pluginsçš„ç›´æ¥é“¾æ¥" title="13.11.2.1. principle of pluginsçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åŸºäºæ’ä»¶æœºåˆ¶ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ§åˆ¶SQLæ‰§è¡Œçš„å„ä¸ªé˜¶æ®µï¼Œå¦‚æ‰§è¡Œé˜¶æ®µï¼Œå‚æ•°å¤„ç†é˜¶æ®µï¼Œè¯­æ³•æ„å»ºé˜¶æ®µï¼Œç»“æœé›†å¤„ç†é˜¶æ®µï¼Œå…·ä½“å¯ä»¥æ ¹æ®é¡¹ç›®ä¸šåŠ¡æ¥å®ç°å¯¹åº”ä¸šåŠ¡é€»è¾‘ã€‚</p><p>è®¾è®¡æ¨¡å¼ï¼šä»£ç†æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="131122-use-scenarios">13.11.2.2. use scenarios<a href="#131122-use-scenarios" class="hash-link" aria-label="13.11.2.2. use scenariosçš„ç›´æ¥é“¾æ¥" title="13.11.2.2. use scenariosçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>paging æ‹¦æˆªStatementHandlerç±»çš„prepareæ–¹æ³•ï¼Œæ”¹å˜è¦æ‰§è¡Œçš„SQLè¯­å¥ä¸ºåˆ†é¡µè¯­å¥å³å¯ï¼›</li><li>Assign default values to fields before SQL execution</li><li>SQL performance monitor é€šè¿‡æ‹¦æˆªExecutorç±»çš„update, queryç­‰æ–¹æ³•ï¼Œç”¨æ—¥å¿—è®°å½•æ¯ä¸ªæ–¹æ³•æ‰§è¡Œçš„æ—¶é—´</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="131123-how-to-use-plugins">13.11.2.3. how to use plugins<a href="#131123-how-to-use-plugins" class="hash-link" aria-label="13.11.2.3. how to use pluginsçš„ç›´æ¥é“¾æ¥" title="13.11.2.3. how to use pluginsçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å®ç° Interceptor æ¥å£, æ ‡æ³¨@Intercepts(@Signature) , å‚è€ƒ <a href="https://www.jianshu.com/p/0a72bb1f6a21" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/0a72bb1f6a21</a></p><p>scenario 1: ç›´æ¥ç»™è‡ªå®šä¹‰æ‹¦æˆªå™¨æ·»åŠ ä¸€ä¸ª @Componentæ³¨è§£ , å¯åŠ¨æ—¶ä¸ä¼šè‡ªåŠ¨è°ƒç”¨è‡ªå®šä¹‰æ‹¦æˆªå™¨çš„setPropertiesæ–¹æ³•
scenario 2: æ— éœ€ @component ,åªéœ€è¦ @bean ConfigurationCustomizer ä¸­ addInterceptor , ä¸ä¼šè‡ªåŠ¨è°ƒç”¨setPropertiesæ–¹æ³• --- mybatis plus  ä¸­çš„é…ç½®æ–¹æ³•
scenario 3: æ— éœ€ @component ,éœ€è¦ @bean SqlSessionFactoryBean ä¸­ setPlugins --- (app å¯åŠ¨æ—¶, setPropertiesè¢«è‡ªåŠ¨è°ƒç”¨)</p><p><a href="https://github.com/miaoxinwei/mybatis-crypt/blob/master/src/main/java/org/apache/ibatis/plugin/CryptInterceptor.java" target="_blank" rel="noopener noreferrer">https://github.com/miaoxinwei/mybatis-crypt/blob/master/src/main/java/org/apache/ibatis/plugin/CryptInterceptor.java</a> æ—¥å¿—è„±æ•<br>
<!-- -->TODO</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * åœ¨mybatisä¸­å¯è¢«æ‹¦æˆªçš„ç±»å‹æœ‰å››ç§(æŒ‰ç…§æ‹¦æˆªé¡ºåº):</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * &lt;p&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * Executorï¼šæ‰§è¡Œ SQL è¯­å¥ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * ParameterHandlerï¼šå¤„ç†å‚æ•°</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * ResultHandlerï¼šå¤„ç†ç»“æœé›†ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * StatementHandlerï¼šSqlè¯­æ³•æ„å»ºã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * æ¯ä¸ªç±»å‹å¯ä»¥è¢«æ‹¦æˆªçš„æ–¹æ³•:</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     æ‹¦æˆªçš„ç±»   æ‹¦æˆªçš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     Executor   update, query, flushStatements, commit, rollback,getTransaction, close, isClosed</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     ParameterHandler   getParameterObject, setParameters</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     StatementHandler   prepare, parameterize, batch, update, query</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     ResultSetHandler   handleResultSets, handleOutputParameters</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ ‡è¯†è¯¥ç±»æ˜¯ä¸€ä¸ªæ‹¦æˆªå™¨ï¼›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Intercepts</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">//æŒ‡æ˜è‡ªå®šä¹‰æ‹¦æˆªå™¨éœ€è¦æ‹¦æˆªå“ªä¸€ä¸ªç±»å‹ï¼Œå“ªä¸€ä¸ªæ–¹æ³•(æ–¹æ³•æœ‰é‡è½½, æ‰€ä»¥è¿˜éœ€è¦ æŒ‡æ˜ args æ‰èƒ½ç¡®å®šæ˜¯å“ªä¸ªæ–¹æ³•)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Signature</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">type </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;update&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token class-name" style="color:rgb(38, 127, 153)">MappedStatement</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Signature</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">type </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;query&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token class-name" style="color:rgb(38, 127, 153)">MappedStatement</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RowBounds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResultHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlInterceptor</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Interceptor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">intercept</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Invocation</span><span class="token plain"> invocation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Throwable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            Object target = invocation.getTarget(); //è¢«ä»£ç†å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            Method method = invocation.getMethod(); //ä»£ç†æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            Object[] args = invocation.getArgs(); //æ–¹æ³•å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> invocation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getArgs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> param </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">MappedStatement</span><span class="token plain"> mappedStatement </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">MappedStatement</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">length </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                param </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> sql </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">mappedStatement</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> invocation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">proceed</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">MappedStatement</span><span class="token plain"> statement</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">BoundSql</span><span class="token plain"> boundSql </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> statement</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getBoundSql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">ParameterMapping</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> parameterMappings </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> boundSql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getParameterMappings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">//å°†åŸå§‹sqlä¸­çš„ç©ºç™½å­—ç¬¦ï¼ˆ\såŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œåˆ¶è¡¨ç¬¦ï¼Œç©ºæ ¼ç¬¦ï¼‰æ›¿æ¢ä¸º&quot; &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> sql </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> boundSql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getSql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">replaceAll</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;[\\s]+&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; &quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">param </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">||</span><span class="token plain"> parameterMappings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> sql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">org</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">apache</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">ibatis</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">session</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">Configuration</span><span class="token plain"> configuration </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> statement</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">TypeHandlerRegistry</span><span class="token plain"> typeHandlerRegistry </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getTypeHandlerRegistry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">typeHandlerRegistry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">hasTypeHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getClass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                sql </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> sql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">replaceFirst</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;\\?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getParameterValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">MetaObject</span><span class="token plain"> metaObject </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">newMetaObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ParameterMapping</span><span class="token plain"> parameterMapping </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> parameterMappings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> propertyName </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> parameterMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">metaObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">hasGetter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">propertyName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> obj </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> metaObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">propertyName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        sql </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> sql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">replaceFirst</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;\\?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getParameterValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">boundSql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">hasAdditionalParameter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">propertyName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> obj </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> boundSql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getAdditionalParameter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">propertyName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        sql </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> sql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">replaceFirst</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;\\?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getParameterValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> sql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getParameterValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">obj </span><span class="token keyword" style="color:rgb(0, 0, 255)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&#x27;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toString</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&#x27;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">obj </span><span class="token keyword" style="color:rgb(0, 0, 255)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">DateFormat</span><span class="token plain"> formatter </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DateFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getDateTimeInstance</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">DateFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">DEFAULT</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DateFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">DEFAULT</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Locale</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">CHINA</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&#x27;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> formatter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">format</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&#x27;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">obj </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toString</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         * ç”Ÿæˆä»£ç†å¯¹è±¡</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         * å¯é€‰</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         * æˆ‘ä»¬å¯ä»¥å†³å®šæ˜¯å¦è¦è¿›è¡Œæ‹¦æˆª, å¦‚æœæ‹¦æˆª, å°±è¿”å›ä»£ç†åçš„å¯¹è±¡</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         *       * å¦‚æœä¸æ‹¦æˆª, åˆ™è¿”å›åŸå§‹å¯¹è±¡</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         *</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         *  æ¯ç»è¿‡ä¸€ä¸ªæ‹¦æˆªå™¨å¯¹è±¡éƒ½ä¼šè°ƒç”¨æ’ä»¶çš„pluginæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨4æ¬¡ã€‚æ ¹æ®@Interceptsæ³¨è§£æ¥å†³å®šæ˜¯å¦è¿›è¡Œæ‹¦æˆªå¤„ç†</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">plugin</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> target</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">//è¿”å›å››å¤§æ¥å£å¯¹è±¡çš„ä»£ç†å¯¹è±¡, è¡¨ç¤ºå§‹ç»ˆä¼šæ‰§è¡Œæ‹¦æˆª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Plugin</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">wrap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ§åˆ¶æ˜¯å¦æ‹¦æˆª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">// è‹¥ç±»ä¸ŠåŠ äº† @Signature æŒ‡æ˜äº† æ‹¦æˆªç±»å‹, è¿™ä¸€æ­¥å°±çœäº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            if (target instanceof StatementHandler) {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//                return Plugin.wrap(target, this);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            return target;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         * å¯é€‰</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         * ç”¨äºåœ¨ Mybatis é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä¸€äº›å±æ€§çš„ã€‚ç±»ä¼¼ spring ä¸­æœ‰ @value,</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         * ä¸€èˆ¬ä¸ç”¨</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">setProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Properties</span><span class="token plain"> properties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13113-typehandler">13.11.3. typehandler<a href="#13113-typehandler" class="hash-link" aria-label="13.11.3. typehandlerçš„ç›´æ¥é“¾æ¥" title="13.11.3. typehandlerçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://blog.csdn.net/m0_37735176/article/details/103107759" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/m0_37735176/article/details/103107759</a>
<a href="https://www.cnblogs.com/haoliyou/p/13743698.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/haoliyou/p/13743698.html</a>
<a href="https://www.cnblogs.com/dyf-stu/p/10162301.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/dyf-stu/p/10162301.html</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13114-å…¨æ³¨è§£å¼€å‘">13.11.4. å…¨æ³¨è§£å¼€å‘<a href="#13114-å…¨æ³¨è§£å¼€å‘" class="hash-link" aria-label="13.11.4. å…¨æ³¨è§£å¼€å‘çš„ç›´æ¥é“¾æ¥" title="13.11.4. å…¨æ³¨è§£å¼€å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://zhuanlan.zhihu.com/p/94554180" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/94554180</a>
TODO</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13115-åŠ¨æ€å®šæ—¶åˆ·æ–°-sql-mapper-å®ç°çƒ­åŠ è½½">13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½<a href="#13115-åŠ¨æ€å®šæ—¶åˆ·æ–°-sql-mapper-å®ç°çƒ­åŠ è½½" class="hash-link" aria-label="13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½çš„ç›´æ¥é“¾æ¥" title="13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://veevv.com/2015/09/30/mybatis-mapper-xml-reloader/" target="_blank" rel="noopener noreferrer">https://veevv.com/2015/09/30/mybatis-mapper-xml-reloader/</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">XMLMapperReloader</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContextAware</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HashMap</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> fileMapping </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HashMap</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Scanner</span><span class="token plain"> scanner </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> packageSearchPath </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;classpath:com/xx/xx/dao/*/*.xml&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ScheduledExecutorService</span><span class="token plain"> service </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">setApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationContext</span><span class="token plain"> applicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">BeansException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">context </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> applicationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">XMLMapperReloader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        service </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Executors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">newScheduledThreadPool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        service</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">scheduleAtFixedRate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Task</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TimeUnit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">SECONDS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Task</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Runnable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                scanner </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Scanner</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                scanner</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">refreshMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">printStackTrace</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SuppressWarnings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;rawtypes&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Scanner</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Resource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> mapperLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">refreshMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactory</span><span class="token plain"> factory </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">Configuration</span><span class="token plain"> configuration </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> factory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getConfiguration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// step.1 æ‰«ææ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">scanMapperXml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// step.2 åˆ¤æ–­æ˜¯å¦æœ‰æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">isChanged</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;==============æ£€æµ‹åˆ°mapperæœ‰æ”¹å˜, å¼€å§‹åˆ·æ–°...===============&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token comment" style="color:rgb(0, 128, 0)">// step.2.1 æ¸…ç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">removeConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token comment" style="color:rgb(0, 128, 0)">// step.2.2 é‡æ–°åŠ è½½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Resource</span><span class="token plain"> configLocation </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> mapperLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                            </span><span class="token class-name" style="color:rgb(38, 127, 153)">XMLMapperBuilder</span><span class="token plain"> xmlMapperBuilder </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">XMLMapperBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">configLocation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getInputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configLocation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toString</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getSqlFragments</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                            xmlMapperBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">parse</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                            </span><span class="token keyword" style="color:rgb(0, 0, 255)">continue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;==============mapperåˆ·æ–°å®Œæ¯•===============&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">printStackTrace</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">scanMapperXml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">mapperLocations </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">PathMatchingResourcePatternResolver</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getResources</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">packageSearchPath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">removeConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Configuration</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Class</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> classConfig </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getClass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">clearMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;mappedStatements&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">clearMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;caches&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">clearMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;resultMaps&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">clearMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;parameterMaps&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">clearMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;keyGenerators&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">clearMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;sqlFragments&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token function" style="color:rgb(0, 0, 255)">clearSet</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;loadedResources&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">clearMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Class</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Configuration</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> fieldName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Field</span><span class="token plain"> field </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getDeclaredField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">fieldName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            field</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setAccessible</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token plain"> mapConfig </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> field</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            mapConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">clear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">clearSet</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Class</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics operator" style="color:rgb(0, 0, 0)">?</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Configuration</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> fieldName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Field</span><span class="token plain"> field </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> classConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getDeclaredField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">fieldName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            field</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setAccessible</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Set</span><span class="token plain"> setConfig </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Set</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> field</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">configuration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            setConfig</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">clear</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">isChanged</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> flag </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Resource</span><span class="token plain"> resource </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> mapperLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> resourceName </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> resource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getFilename</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> addFlag </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token plain">fileMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">containsKey</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">resourceName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// æ­¤ä¸ºæ–°å¢æ ‡è¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¿®æ”¹æ–‡ä»¶:åˆ¤æ–­æ–‡ä»¶å†…å®¹æ˜¯å¦æœ‰å˜åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token plain"> compareFrame </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> fileMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">resourceName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">long</span><span class="token plain"> lastFrame </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> resource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">contentLength</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> resource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">lastModified</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> modifyFlag </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> compareFrame </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;&amp;</span><span class="token plain"> compareFrame</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">longValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> lastFrame</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// æ­¤ä¸ºä¿®æ”¹æ ‡è¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ–°å¢æˆ–æ˜¯ä¿®æ”¹æ—¶,å­˜å‚¨æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">addFlag </span><span class="token operator" style="color:rgb(0, 0, 0)">||</span><span class="token plain"> modifyFlag</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    fileMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">resourceName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">valueOf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">lastFrame</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// æ–‡ä»¶å†…å®¹å¸§å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    flag </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> flag</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getPackageSearchPath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> packageSearchPath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">setPackageSearchPath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> packageSearchPath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">packageSearchPath </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> packageSearchPath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13116-è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½•-and-å¼€å¯å ä½ç¬¦è¿‡æ»¤">13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤<a href="#13116-è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½•-and-å¼€å¯å ä½ç¬¦è¿‡æ»¤" class="hash-link" aria-label="13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤çš„ç›´æ¥é“¾æ¥" title="13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>mapper.xml å’Œ dao interface æ”¾åœ¨ä¸€èµ·: (å¼€å¯èµ„æºæ–‡ä»¶è¿‡æ»¤)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-maven-plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- maven é»˜è®¤ä»…ä»… å°†src/main/resources ä¸‹çš„æ–‡ä»¶æ‰“åŒ…åˆ° jar</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">            è‹¥ mapper.xml ä¸åœ¨æ ‡å‡†ç›®å½•ä¸‹, éœ€è¦æŒ‡å®šèµ„æºè¿‡æ»¤å¤„ç† --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">resources</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">resource</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">directory</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">src/main/java</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">directory</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">includes</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">include</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">**/*.*</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">include</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">includes</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- æ‰“åŒ…åˆ°å“ªé‡Œ? å¯çœç•¥, é»˜è®¤ jar æ ¹ç›®å½• --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- &lt;targetPath&gt;META-INF/plexus&lt;/targetPath&gt; --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- æ˜¯å¦å¼€å¯èµ„æºæ–‡ä»¶å ä½ç¬¦è¿‡æ»¤ (å¦‚ ${project.version}), é»˜è®¤ false --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- &lt;filtering&gt;false&lt;/filtering&gt; --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">resource</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- å¯çœç•¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">resource</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">directory</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">src/main/resources</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">directory</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">includes</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">include</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">**/*.*</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">include</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">includes</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">resource</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- æ·»åŠ é¢å¤–çš„é…ç½®æ–‡ä»¶, ç”¨æ¥è§£æèµ„æºæ–‡ä»¶ä¸­çš„å ä½ç¬¦ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">filters</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">filter</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">src/main/filters/filter.properties</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">filter</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">filters</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">resources</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1312-springboot-äº‹åŠ¡">13.12. springboot äº‹åŠ¡<a href="#1312-springboot-äº‹åŠ¡" class="hash-link" aria-label="13.12. springboot äº‹åŠ¡çš„ç›´æ¥é“¾æ¥" title="13.12. springboot äº‹åŠ¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13121-äº‹åŠ¡åŸºæœ¬ä½¿ç”¨">13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨<a href="#13121-äº‹åŠ¡åŸºæœ¬ä½¿ç”¨" class="hash-link" aria-label="13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Spring bootæ˜¯é»˜è®¤å¯åŠ¨äº‹åŠ¡çš„ï¼Œåªéœ€è¦åœ¨ç±»æˆ–è€…æ–¹æ³•ä¸Šæ·»åŠ @Transactionalæ³¨è§£å³å¯</p><p>You can also use <code>transaction manager</code> manually: <code>transactionTemplate.execute()</code></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13122-transaction-not-working">13.12.2. transaction not working<a href="#13122-transaction-not-working" class="hash-link" aria-label="13.12.2. transaction not workingçš„ç›´æ¥é“¾æ¥" title="13.12.2. transaction not workingçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>äº‹åŠ¡ä¸ç”Ÿæ•ˆ, å¯èƒ½æ˜¯:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">ã€é¦–å…ˆè¦çœ‹æ•°æ®åº“å¼•æ“æ˜¯å¦æ”¯æŒäº‹åŠ¡ï¼Œmysqlé»˜è®¤å¼•æ“INNODBæ˜¯æ”¯æŒçš„ï¼Œä½†MYISAMæ˜¯ä¸æ”¯æŒçš„ï¼›</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">ã€æ³¨è§£åªèƒ½è¢«åº”ç”¨åˆ°</span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> none </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> none </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> æ–¹æ³•ä¸Š</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å…¶å®ƒæ–¹æ³•ä¸Šä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸ç”Ÿæ•ˆï¼›</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">as transaction is based on dynamic proxy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;public/final&quot;</span><span class="token plain"> method will defeat against proxy object generation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  cglib proxy is based on </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;extends&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> jdk proxy is based on </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;interface&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> they are both need the method is not </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">ã€é»˜è®¤æƒ…å†µä¸‹åªä¼šå¯¹è¿è¡ŒæœŸå¼‚å¸¸</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">å³ </span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">java</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">lang</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">RuntimeException</span><span class="token plain">å¼‚å¸¸</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">å’Œ </span><span class="token class-name" style="color:rgb(38, 127, 153)">Error</span><span class="token plain"> è¿›è¡Œå›æ»šï¼›</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  å¦‚æœæ˜¯å…¶å®ƒå¼‚å¸¸</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> éœ€è¦æ‰‹åŠ¨æŒ‡å®š`</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Transactional</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">rollbackFor</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">` å›æ»šæ‰€æœ‰å¼‚å¸¸</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  è¿˜å¯èƒ½å¼‚å¸¸è¢«æŸä¸ª aop åˆ‡é¢æ•è·äº†</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ²¡æ³•è§¦å‘å›æ»š</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">4.</span><span class="token plain"> åŒä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•åµŒå¥—è°ƒç”¨</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> å¦‚æ™®é€šæ–¹æ³• </span><span class="token function" style="color:rgb(0, 0, 255)">a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> call annotatied method </span><span class="token class-name" style="color:rgb(38, 127, 153)">B</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> the transaction </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">B</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> will not trigger </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token plain"> is also easy </span><span class="token keyword" style="color:rgb(0, 0, 255)">to</span><span class="token plain"> </span><span class="token namespace">explain</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> the calling </span><span class="token keyword" style="color:rgb(0, 0, 255)">to</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">B</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> can be refered </span><span class="token keyword" style="color:rgb(0, 0, 255)">to</span><span class="token plain"> </span><span class="token namespace">as</span><span class="token plain"> </span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">this</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">B</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> which means the calling is not from a proxy object</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">5.</span><span class="token plain"> å¤šçº¿ç¨‹ç¯å¢ƒ</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ­¤æ—¶æ•°æ®åº“è¿æ¥éƒ½ä¸æ˜¯åŒä¸€ä¸ª</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> è‚¯å®šä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡äº†</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// https://blog.csdn.net/laoxilaoxi_/article/details/99896738 ä½¿ç”¨ cglib or jdk åŠ¨æ€ä»£ç† `@EnableTransactionManagement(proxyTargetClass = true)// ä½¿ç”¨cglib`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13123-spring-äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘">13.12.3. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘<a href="#13123-spring-äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘" class="hash-link" aria-label="13.12.3. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘çš„ç›´æ¥é“¾æ¥" title="13.12.3. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŒä¸€ä¸ª service bean ä¸­çš„ äº‹åŠ¡æ–¹æ³•äº’ç›¸è°ƒç”¨, å¦‚ a() è°ƒç”¨ b(), åªä¼šä½¿ç”¨ a() çš„ äº‹åŠ¡, b çš„æ— æ•ˆ, å› ä¸ºäº‹åŠ¡æœ¬è´¨æ˜¯åŸºäºåŠ¨æ€ä»£ç†, åœ¨åŒä¸ª bean ä¸­çš„æ–¹æ³•äº’è°ƒ, å‘ç”Ÿåœ¨ä¸»åŠ¨è°ƒç”¨æ–¹ a() çš„ä»£ç†å¯¹è±¡ä¸­, æ‰€ä»¥åªæœ‰ a() çš„äº‹åŠ¡ç”Ÿæ•ˆ</p><p>è§£å†³:</p><p>å¦‚æœ a(), b() å¤„äºä¸åŒ service bean ä¸­, åˆ™ äº‹åŠ¡ä¼ æ’­ç”Ÿæ•ˆ.</p><p>æˆ–è€…</p><p>å¼•å…¥ starter aop, ä¼šå¼•å…¥ aspectJ, @enableAspectJAutoProxy(exposeProxy=true) å¼€å¯ aspectJ å¹¶æš´éœ²ä»£ç†å¯¹è±¡, åœ¨äº’è°ƒçš„éƒ¨åˆ†, ä½¿ç”¨ä»£ç†å¯¹è±¡äº’è°ƒ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// b()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// c()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">OrderService</span><span class="token plain"> thisService </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">OrderService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Aopcontext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">currentProxy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    thisService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    thisService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">c</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13124-transactional-æ³¨è§£">13.12.4. Transactional æ³¨è§£<a href="#13124-transactional-æ³¨è§£" class="hash-link" aria-label="13.12.4. Transactional æ³¨è§£çš„ç›´æ¥é“¾æ¥" title="13.12.4. Transactional æ³¨è§£çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>äº‹åŠ¡è¶…æ—¶</p><p>@transaction(timeout=...) unit: s</p><p>éš”ç¦»çº§åˆ«</p><p>@transaction(isolation=...)</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1313-ç¼“å­˜">13.13. ç¼“å­˜<a href="#1313-ç¼“å­˜" class="hash-link" aria-label="13.13. ç¼“å­˜çš„ç›´æ¥é“¾æ¥" title="13.13. ç¼“å­˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13131-springboot-starter-cache">13.13.1. springboot-starter-cache<a href="#13131-springboot-starter-cache" class="hash-link" aria-label="13.13.1. springboot-starter-cacheçš„ç›´æ¥é“¾æ¥" title="13.13.1. springboot-starter-cacheçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¼•å…¥ redis starter, cache starter</p><p>é…ç½®æ–‡ä»¶ä¸­é…ç½®ç±»å‹ä¸º redis</p><p>æ³¨è§£:</p><ul><li>@cacheable({&quot;xxxCache&quot;}, sync=true) ç¼“å­˜æ•°æ®, æ–¹æ³•ä¸Š, æŒ‡å®šç¼“å­˜åˆ†åŒº, sync åŠ é”é˜²æ­¢ç¼“å­˜å‡»ç©¿</li><li>@cacheEvic(value=&quot;xxx&quot;, allEntries=true) åˆ é™¤ç¼“å­˜, allEntries è¡¨ç¤ºåˆ é™¤åˆ†åŒº cache ä¸‹çš„å…¨éƒ¨ç¼“å­˜å¯¹</li><li>@cacheput æ›´æ–°</li><li>caching ç»„åˆå¤šä¸ªæ“ä½œ  </li><li>@cacheconfig åœ¨ç±»çº§åˆ«å…±äº«ç¼“å­˜é…ç½®</li><li>@enablecaching å¼€å¯ç¼“å­˜</li></ul><p>è‡ªå®šä¹‰é…ç½®</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// è‡ªå®šä¹‰ç¼“å­˜ key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// è‡ªå®šä¹‰ json åºåˆ—åŒ–, ä¸ç”¨é»˜è®¤çš„ jdk åºåˆ—åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// è‡ªå®šä¹‰è¿‡æœŸæ—¶é—´, é»˜è®¤-1 æ°¸ä¸è¿‡æœŸ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¼˜åŠ¿æ˜¯ç®€å•æ–¹ä¾¿,</p><p>å¯¹äºè¯»æ¨¡å¼:</p><ul><li>ç¼“å­˜ç©¿é€ (æŸ¥è¯¢ä¸€ä¸ª null æ•°æ®), é…ç½® cache-null-value=true ç¼“å­˜ null æ•°æ®</li><li>ç¼“å­˜å‡»ç©¿ (å¤§é‡å¹¶å‘åŒæ—¶è¯·æ±‚ä¸€ä¸ªå¿«è¿‡æœŸçš„key): </li><li>é›ªå´©(å¤§é‡key åŒæ—¶è¿‡æœŸ), é…ç½® time-to-live è¿‡æœŸæ—¶é—´, </li></ul><p>å¯¹äºå†™æ¨¡å¼: æ²¡æœ‰å¾ˆå¥½çš„å†…ç½®è§£å†³æ–¹æ³•, å¯ä»¥é€šè¿‡:</p><ul><li>è¯»å†™åŠ é”</li><li>canal ä¸­é—´ä»¶</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13132-caffeine">13.13.2. caffeine<a href="#13132-caffeine" class="hash-link" aria-label="13.13.2. caffeineçš„ç›´æ¥é“¾æ¥" title="13.13.2. caffeineçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Caffeineæ˜¯ä½¿ç”¨Java8å¯¹Guavaç¼“å­˜çš„é‡å†™ç‰ˆæœ¬ï¼Œåœ¨Spring Boot 2.0ä¸­å°†å–ä»£Guava</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1314-é…åˆ-h2-æ•°æ®åº“è¿›è¡Œå¼€å‘">13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘<a href="#1314-é…åˆ-h2-æ•°æ®åº“è¿›è¡Œå¼€å‘" class="hash-link" aria-label="13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘çš„ç›´æ¥é“¾æ¥" title="13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13141-h2-å’Œ-spring-data-jpa-é…åˆ">13.14.1. h2 å’Œ spring data jpa é…åˆ<a href="#13141-h2-å’Œ-spring-data-jpa-é…åˆ" class="hash-link" aria-label="13.14.1. h2 å’Œ spring data jpa é…åˆçš„ç›´æ¥é“¾æ¥" title="13.14.1. h2 å’Œ spring data jpa é…åˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ— éœ€ä»»ä½•é…ç½®æ–‡ä»¶</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableDiscoveryClient</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// compared with @EnableEurekaClient, more comprehensive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ReservationServiceApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">main</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ReservationServiceApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationRunner</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">initData</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ReservationRepository</span><span class="token plain"> reservationRepository</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Stream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">of</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ehllo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;llhoe&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;jojo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;çŒ•çŒ´æ¡ƒ&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">forEach</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> reservationRepository</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">save</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Reservation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            reservationRepository</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">findAll</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">forEach</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token operator" style="color:rgb(0, 0, 0)">::</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RepositoryRestResource</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// publish repository as rest service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ¯”å¦‚æŸ¥è¯¢æ‰€æœ‰ /reservations, æŸ¥æŸä¸ª /reservations/1, æœç´¢ /reservations/search ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ReservationRepository</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JpaRepository</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Reservation</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * customized rest service</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * http://localhost:8080/reservations/search/by-name?name=hello</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RestResource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">path </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;by-name&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">Optional</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Reservation</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">findByName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RefreshScope</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigRefreshTestController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DiscoveryClient</span><span class="token plain"> discoveryClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigRefreshTestController</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;${message: defaultMsg}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                                       </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DiscoveryClient</span><span class="token plain"> discoveryClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">message </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">discoveryClient </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> discoveryClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/message&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestMethod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">GET</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">readMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/eureka-services&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">eurekaServices</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">discoveryClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getServices</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpStatus</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> * entity: é¢„å®š</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Entity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@AllArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@NoArgsConstructor</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// if removed, jpa error may be produced</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Reservation</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GeneratedValue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13142-å’Œ-mybatis-plus-é…åˆ">13.14.2. å’Œ mybatis-plus é…åˆ<a href="#13142-å’Œ-mybatis-plus-é…åˆ" class="hash-link" aria-label="13.14.2. å’Œ mybatis-plus é…åˆçš„ç›´æ¥é“¾æ¥" title="13.14.2. å’Œ mybatis-plus é…åˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://mp.baomidou.com/guide/quick-start.html" target="_blank" rel="noopener noreferrer">h2 å’Œ mybatis-plus é…åˆ</a>:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># DataSource Config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">driver-class-name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> org.h2.Driver</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">db/schema</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">h2.sql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">db/data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">h2.sql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">h2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mem</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">test</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>@MapperScan(&quot;mapper package&quot;)</code></p><p>mapper extends BaseMapper</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1315-å¤šæ•°æ®æº">13.15. å¤šæ•°æ®æº<a href="#1315-å¤šæ•°æ®æº" class="hash-link" aria-label="13.15. å¤šæ•°æ®æºçš„ç›´æ¥é“¾æ¥" title="13.15. å¤šæ•°æ®æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13151-åŸºæœ¬é…ç½®-å…¨æ³¨è§£å¼€å‘">13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘<a href="#13151-åŸºæœ¬é…ç½®-å…¨æ³¨è§£å¼€å‘" class="hash-link" aria-label="13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘çš„ç›´æ¥é“¾æ¥" title="13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯åŠ¨ç±»éœ€è¦æ’é™¤è‡ªåŠ¨é…ç½®@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})</p><div class="language-props codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-props codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">server.port=8335</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># é…ç½®ç¬¬ä¸€ä¸ªæ•°æ®æº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db1.jdbc-url=jdbc:mysql://127.0.0.1:3306/erp?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db1.username=root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db1.password=153963</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db1.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># é…ç½®ç¬¬äºŒä¸ªæ•°æ®æº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db2.jdbc-url=jdbc:mysql://127.0.0.1:3306/erp2?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db2.username=root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db2.password=153963</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.datasource.hikari.db2.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@MapperScan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">basePackages </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;top.snailclimb.db1.dao&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> sqlSessionTemplateRef </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1SqlSessionTemplate&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource1Config</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * ç”Ÿæˆæ•°æ®æº.  @Primary æ³¨è§£å£°æ˜ä¸ºé»˜è®¤æ•°æ®æº</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1DataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.datasource.hikari.db1&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Primary</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// å£°æ˜ä¸ºé»˜è®¤æ•°æ®æº, é˜²æ­¢ dao å±‚çš„ç±»å¿˜è®°æŒ‡å®š @Qualifier(&quot;db1SqlSessionTemplate&quot;), å¯ä»¥ä½¿ç”¨é»˜è®¤çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testDataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * åˆ›å»º SqlSessionFactory</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1SqlSessionFactory&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Primary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactory</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testSqlSessionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1DataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactoryBean</span><span class="token plain"> bean </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setDataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è‹¥æœ‰ mapper.xml , éœ€è¦æŒ‡å®šä½ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è‹¥æ˜¯å…¨æ³¨è§£å¼€å‘, æ— éœ€æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//  bean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(&quot;classpath:mybatis/mapper/db1/*.xml&quot;));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * é…ç½®äº‹åŠ¡ç®¡ç†</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1TransactionManager&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Primary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceTransactionManager</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testTransactionManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1DataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceTransactionManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    SqlSessionTemplateæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥è¢«å¤šä¸ªDAOæ‰€å…±äº«ä½¿ç”¨ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1SqlSessionTemplate&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Primary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionTemplate</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testSqlSessionTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1SqlSessionFactory&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactory</span><span class="token plain"> sqlSessionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">sqlSessionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@MapperScan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">basePackages </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;top.snailclimb.db2.dao&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> sqlSessionTemplateRef </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2SqlSessionTemplate&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource2Config</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2DataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.datasource.hikari.db2&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testDataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2SqlSessionFactory&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactory</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testSqlSessionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2DataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactoryBean</span><span class="token plain"> bean </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setDataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//bean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(&quot;classpath:mybatis/mapper/db2/*.xml&quot;));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2TransactionManager&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceTransactionManager</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testTransactionManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2DataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceTransactionManager</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2SqlSessionTemplate&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionTemplate</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testSqlSessionTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2SqlSessionFactory&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactory</span><span class="token plain"> sqlSessionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">sqlSessionFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">dao å¼€å‘</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db1SqlSessionTemplate&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserDao</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * é€šè¿‡åå­—æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    mybatisä¸­#{}å’Œ${}ç¬¦å·çš„åŒºåˆ« </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    ä½¿ç”¨#{}æ„å‘³ç€ä½¿ç”¨çš„é¢„ç¼–è¯‘çš„è¯­å¥ï¼Œå³ preparedStatement, æ›¿æ¢å ä½ç¬¦æ—¶, ä¼šä¸ºå‚æ•°æ·»åŠ å¼•å·ä½œä¸º string ä¼ å…¥, é˜²æ­¢æ³¨å…¥æ”»å‡»</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    ä¹Ÿä¸æ˜¯è¯´${}ä¸€æ— æ˜¯å¤„ï¼Œæ¯”å¦‚åœ¨MyBatisåŠ¨æ€æ’åºæ—¶ä½¿ç”¨order by +${åŠ¨æ€å‚æ•°}ï¼Œä½¿ç”¨${}è€Œä¸æ˜¯#{}, åŠ¨æ€å‚æ•°å¯ä»¥ä¼ å…¥ä¸å®šä¸ªæ•°çš„å­—æ®µ.</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="display:inline-block;color:rgb(0, 128, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Select</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;SELECT * FROM user WHERE name = #{name}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">findUserByName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2SqlSessionTemplate&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MoneyDao</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * é€šè¿‡id æŸ¥çœ‹å·¥èµ„è¯¦æƒ…</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Select</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;SELECT * FROM money WHERE id = #{id}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">Money</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">findMoneyById</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Param</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13152-abstractroutingdatasource-åŠ¨æ€æ•°æ®æºåˆ‡æ¢">13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢<a href="#13152-abstractroutingdatasource-åŠ¨æ€æ•°æ®æºåˆ‡æ¢" class="hash-link" aria-label="13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢çš„ç›´æ¥é“¾æ¥" title="13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://blog.csdn.net/qq_37502106/article/details/91044952" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_37502106/article/details/91044952</a>
<a href="https://www.cnblogs.com/wyb628/p/7240061.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/wyb628/p/7240061.html</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1316-å¤šæ•°æ®åº“ç±»å‹-databaseidprovider">13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider<a href="#1316-å¤šæ•°æ®åº“ç±»å‹-databaseidprovider" class="hash-link" aria-label="13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProviderçš„ç›´æ¥é“¾æ¥" title="13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProviderçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.cnblogs.com/valten/p/12083128.html#" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/valten/p/12083128.html#</a> é…ç½® MySQL Oracle å…±åŒä½¿ç”¨</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;${mybatis.mapper-locations}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> mapperLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Primary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;dataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.datasource.hikari&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSourceBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JdbcTemplate</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">jdbcTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JdbcTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//å¦‚æœé…ç½®äº† databaseIdProviderï¼ŒMyBatis ä¼šåŠ è½½æ‰€æœ‰çš„ä¸å¸¦ databaseId æˆ–åŒ¹é…å½“å‰ databaseId çš„è¯­å¥ï¼›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// databaseId æ˜¯ mybatis çš„å†…ç½®å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//å¦‚æœå¸¦æˆ–è€…ä¸å¸¦çš„è¯­å¥éƒ½æœ‰ï¼Œåˆ™ä¸å¸¦çš„ä¼šè¢«å¿½ç•¥ã€‚æ–°å¢ï¼Œä¿®æ”¹å’Œåˆ é™¤éƒ½æœ‰è¿™ä¸ªå±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    &lt;!-- mybatisåŠ¨æ€sqlçš„ä¸¤ä¸ªå†…ç½®å‚æ•° , å¯ä»¥ç›´æ¥åœ¨ mapper.xml ä¸­ä½¿ç”¨</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">           _parameter:ä»£è¡¨æ•´ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">                å•ä¸ªå‚æ•°ï¼š_parameterå°±æ˜¯è¿™ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">                å¤šä¸ªå‚æ•°ï¼šå‚æ•°ä¼šè¢«å°è£…ä¸ºä¸€ä¸ªmap:_parameterå°±æ˜¯ä»£è¡¨è¿™ä¸ªmap             </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">           _databaseId:å¦‚æœé…ç½®äº†databaseIdProvideræ ‡ç­¾</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">                _databaseId å°±æ˜¯ä»£è¡¨å½“å‰æ•°æ®åº“çš„åˆ«åOracle</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">      --&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">      &lt;!-- List&lt;Employee&gt; getEmpsTestInnerParameter(Employee employee); --&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">      &lt;select id=&quot;getEmpsTestInnerParameter&quot; resultType=&quot;com.hand.mybatis.bean.Employee&quot;&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">          SELECT * FROM emp </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">          &lt;if test=&quot;_parameter!=null&quot;&gt;      _parameterç›¸å½“äºä¼ å…¥çš„å‚æ•°employee,åˆ¤æ–­employeeæ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ä¸ºç©ºåˆ™æ‰§è¡Œwhereæ¡ä»¶ </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">           where ename=#{_parameter.eName}   </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">          &lt;/if&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">      &lt;/select&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DatabaseIdProvider</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">databaseIdProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">DatabaseIdProvider</span><span class="token plain"> databaseIdProvider </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">VendorDatabaseIdProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Properties</span><span class="token plain"> p </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Properties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        p</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Oracle&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;oracle&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        p</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;MySQL&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;mysql&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        p</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;PostgreSQL&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;postgresql&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        p</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;DB2&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;db2&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        p</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;SQL Server&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;sqlserver&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        databaseIdProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> databaseIdProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Primary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactoryBean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sqlSessionFactoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Qualifier</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;dataSource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactoryBean</span><span class="token plain"> factoryBean </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SqlSessionFactoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        factoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setDataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">dataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        factoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setDatabaseIdProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">databaseIdProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        factoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setMapperLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">PathMatchingResourcePatternResolver</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getResources</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">mapperLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> factoryBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># application.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># åˆ‡æ¢å¯¹åº”çš„ç¯å¢ƒ postgresql mysql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">profiles</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">active</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> postgresql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># mybatisé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">mybatis</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">mapper-locations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mapper/</span><span class="token important">**/*.xml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">type-aliases-package</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> com.valten.</span><span class="token important">**.model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># showSql æ§åˆ¶å°æ‰“å°sqlæ—¥å¿—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">logging</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">level</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">valten</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">dao</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> debug</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># application-mysql.yml#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">8001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># æ•°æ®æºé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">hikari</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">jdbc-url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">3306/test</span><span class="token punctuation" style="color:rgb(4, 81, 165)">?</span><span class="token important">&amp;useSSL=false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">driver-class-name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">---</span><span class="token plain">      </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># application-postgresql.yml#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">8002</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># æ•°æ®æºé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">hikari</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">jdbc-url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">postgresql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">5432/test</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">driver-class-name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> org.postgresql.Driver</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--oracle--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.oracle</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">ojdbc6</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">11.2.0.3</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--postgresql--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.postgresql</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">postgresql</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">9.4.1212</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- é›†æˆmybatis --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.mybatis.spring.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">mybatis-spring-boot-starter</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">1.3.1</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--fastjson--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.alibaba</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">fastjson</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">1.2.16</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- druidæ•°æ®åº“è¿æ¥æ± ç»„ä»¶ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.alibaba</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">druid-spring-boot-starter</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">1.1.10</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1317-spring-kafka">13.17. spring kafka<a href="#1317-spring-kafka" class="hash-link" aria-label="13.17. spring kafkaçš„ç›´æ¥é“¾æ¥" title="13.17. spring kafkaçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://docs.spring.io/spring-kafka/docs/current/reference/html/#receiving-messages" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-kafka/docs/current/reference/html/#receiving-messages</a></p><p><a href="https://www.youtube.com/watch?v=SqVfCyfCJqw&amp;t=9s" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=SqVfCyfCJqw&amp;t=9s</a></p><h1>14. web ç›¸å…³</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="141-åŠ è§£å¯†">14.1. åŠ è§£å¯†<a href="#141-åŠ è§£å¯†" class="hash-link" aria-label="14.1. åŠ è§£å¯†çš„ç›´æ¥é“¾æ¥" title="14.1. åŠ è§£å¯†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/Licoy/encrypt-body-spring-boot-starter" target="_blank" rel="noopener noreferrer">https://github.com/Licoy/encrypt-body-spring-boot-starter</a> web å±‚åŠ å¯†è§£å¯† åŠ è§£å¯†</p><p><a href="https://github.com/yinjihuan/monkey-api-encrypt" target="_blank" rel="noopener noreferrer">https://github.com/yinjihuan/monkey-api-encrypt</a> api åŠ è§£å¯† </p><p><a href="https://www.baeldung.com/java-aes-encryption-decryption" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/java-aes-encryption-decryption</a> åŠ å¯†ç§‘æ™®</p><p><a href="https://www.cnblogs.com/loong-hon/p/11225407.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/loong-hon/p/11225407.html</a></p><p><a href="https://www.javatt.com/p/22814" target="_blank" rel="noopener noreferrer">https://www.javatt.com/p/22814</a>
<a href="https://blog.csdn.net/github_36086968/article/details/103424945" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/github_36086968/article/details/103424945</a>
<a href="https://jueee.github.io/2021/01/2021-01-06-SpringBoot%E5%AE%9E%E7%8E%B0API%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AEAES%E5%8A%A0%E5%AF%86/" target="_blank" rel="noopener noreferrer">https://jueee.github.io/2021/01/2021-01-06-SpringBoot%E5%AE%9E%E7%8E%B0API%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AEAES%E5%8A%A0%E5%AF%86/</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="142-springboot-å‘é€-https-æˆ–è€…-http-å®¢æˆ·ç«¯-client">14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client<a href="#142-springboot-å‘é€-https-æˆ–è€…-http-å®¢æˆ·ç«¯-client" class="hash-link" aria-label="14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ clientçš„ç›´æ¥é“¾æ¥" title="14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ clientçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://blog.csdn.net/defonds/article/details/86594441" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/defonds/article/details/86594441</a> (<a href="https://prasans.info/making-https-call-using-apache-httpclient/" target="_blank" rel="noopener noreferrer">https://prasans.info/making-https-call-using-apache-httpclient/</a>)
<a href="https://www.cnblogs.com/lfstudy/p/13793625.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/lfstudy/p/13793625.html</a>
<a href="https://www.cnblogs.com/dbei/articles/12746191.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/dbei/articles/12746191.html</a>
<a href="https://segmentfault.com/a/1190000014456939" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000014456939</a> ä½¿ç”¨ resttemplate</p><p><a href="https://square.github.io/okhttp/" target="_blank" rel="noopener noreferrer">https://square.github.io/okhttp/</a>
<a href="https://square.github.io/okhttp/https/" target="_blank" rel="noopener noreferrer">https://square.github.io/okhttp/https/</a></p><p>æ”¯æŒå¼‚æ­¥å›è°ƒ Retrofit: <a href="https://www.jianshu.com/p/4d67fe493ebf" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/4d67fe493ebf</a>
<a href="https://www.zhihu.com/question/36963964" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/36963964</a>
<a href="https://www.jianshu.com/p/5bc866b9cbb9" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/5bc866b9cbb9</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1421-å‘é€-http-client">14.2.1. å‘é€ http client<a href="#1421-å‘é€-http-client" class="hash-link" aria-label="14.2.1. å‘é€ http clientçš„ç›´æ¥é“¾æ¥" title="14.2.1. å‘é€ http clientçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1422-å‘é€-https-client">14.2.2. å‘é€ https client<a href="#1422-å‘é€-https-client" class="hash-link" aria-label="14.2.2. å‘é€ https clientçš„ç›´æ¥é“¾æ¥" title="14.2.2. å‘é€ https clientçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>okhttp</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JavaConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;myRestTemplate&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RestTemplate</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">restTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">KeyStoreException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">NoSuchAlgorithmException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">KeyManagementException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">TrustStrategy</span><span class="token plain"> acceptingTrustStrategy </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">X509Certificate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> authType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SSLContext</span><span class="token plain"> sslContext </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">org</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">apache</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">http</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name namespace" style="color:rgb(38, 127, 153)">ssl</span><span class="token class-name namespace punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">SSLContexts</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">custom</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">loadTrustMaterial</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> acceptingTrustStrategy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SSLConnectionSocketFactory</span><span class="token plain"> csf </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SSLConnectionSocketFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">sslContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">CloseableHttpClient</span><span class="token plain"> httpClient </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpClients</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">custom</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setSSLSocketFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">csf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpComponentsClientHttpRequestFactory</span><span class="token plain"> requestFactory </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpComponentsClientHttpRequestFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        requestFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setHttpClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">httpClient</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//60s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        requestFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setConnectTimeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">60</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        requestFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setReadTimeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">60</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">RestTemplate</span><span class="token plain"> restTemplate </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RestTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">requestFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        restTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getMessageConverters</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">set</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">StringHttpMessageConverter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">StandardCharsets</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">UTF_8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="143-requestcontextholder">14.3. RequestContextHolder<a href="#143-requestcontextholder" class="hash-link" aria-label="14.3. RequestContextHolderçš„ç›´æ¥é“¾æ¥" title="14.3. RequestContextHolderçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token class-name" style="color:rgb(38, 127, 153)">ServletRequestAttributes</span><span class="token plain"> attributes </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ServletRequestAttributes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestContextHolder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getRequestAttributes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletRequest</span><span class="token plain"> request </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> attributes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getRequest</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="144-è§£å†³-api-ç‰ˆæœ¬å…±å­˜">14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜<a href="#144-è§£å†³-api-ç‰ˆæœ¬å…±å­˜" class="hash-link" aria-label="14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜çš„ç›´æ¥é“¾æ¥" title="14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://blog.csdn.net/j903829182/article/details/81836551" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/j903829182/article/details/81836551</a>, <a href="https://www.cnblogs.com/huanshilang/p/12097048.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/huanshilang/p/12097048.html</a> æ”¾åœ¨ url
TODO</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1441-requestmappinghandlermapping">14.4.1. RequestMappingHandlerMapping<a href="#1441-requestmappinghandlermapping" class="hash-link" aria-label="14.4.1. RequestMappingHandlerMappingçš„ç›´æ¥é“¾æ¥" title="14.4.1. RequestMappingHandlerMappingçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1442-request-matcher">14.4.2. request matcher<a href="#1442-request-matcher" class="hash-link" aria-label="14.4.2. request matcherçš„ç›´æ¥é“¾æ¥" title="14.4.2. request matcherçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestMatcher</span><span class="token plain"> matcherHtml </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AntPathRequestMatcher</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;GET&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">æŠŠ</span><span class="token class-name" style="color:rgb(38, 127, 153)">ServletRequest</span><span class="token plain">è½¬åŒ–æˆ</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletRequest</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">å¼ºè½¬å³å¯</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">è°ƒç”¨matchesæ–¹æ³•è¿›è¡ŒåŒ¹é… </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">matches</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1443-request-condition">14.4.3. request condition<a href="#1443-request-condition" class="hash-link" aria-label="14.4.3. request conditionçš„ç›´æ¥é“¾æ¥" title="14.4.3. request conditionçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ spring mvc ä¸­ï¼Œé€šè¿‡DispatchServletæ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„ä¸€ä¸ªè¯·æ±‚ä¹‹åï¼Œä¼šé€šè¿‡ HanderMapping æ¥è·å–å¯¹åº”çš„è¯·æ±‚å¤„ç†å™¨ï¼›è€Œ HanderMapping å¦‚ä½•æ‰¾åˆ°å¯ä»¥å¤„ç†è¿™ä¸ªè¯·æ±‚çš„å¤„ç†å™¨å‘¢ï¼Œè¿™å°±éœ€è¦ RequestCondition æ¥å†³å®šäº†</p><p>æœ€ç»ˆçš„å®ç°ç±»å¯èƒ½æ˜¯é’ˆå¯¹ä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼šè·¯å¾„åŒ¹é…ï¼Œå¤´éƒ¨åŒ¹é…ï¼Œè¯·æ±‚å‚æ•°åŒ¹é…ï¼Œå¯äº§ç”ŸMIMEåŒ¹é…ï¼Œå¯æ¶ˆè´¹MIMEåŒ¹é…ï¼Œè¯·æ±‚æ–¹æ³•åŒ¹é…ï¼Œæˆ–è€…æ˜¯ä»¥ä¸Šå„ç§æƒ…å†µçš„åŒ¹é…æ¡ä»¶çš„ä¸€ä¸ªç»„åˆ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestCondition</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¸€ä¸ªhttpæ¥å£ä¸Šæœ‰å¤šä¸ªæ¡ä»¶è§„åˆ™æ—¶ï¼Œç”¨äºåˆå¹¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ¯”å¦‚ç±»ä¸ŠæŒ‡å®šäº†@RequestMappingçš„ url ä¸º root - è€Œæ–¹æ³•ä¸ŠæŒ‡å®šçš„@RequestMappingçš„ url ä¸º method - é‚£ä¹ˆåœ¨è·å–è¿™ä¸ªæ¥å£çš„ url åŒ¹é…è§„åˆ™æ—¶ï¼Œç±»ä¸Šæ‰«æä¸€æ¬¡ï¼Œæ–¹æ³•ä¸Šæ‰«æä¸€æ¬¡ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŠŠè¿™ä¸¤ä¸ªåˆå¹¶æˆä¸€ä¸ªï¼Œè¡¨ç¤ºè¿™ä¸ªæ¥å£åŒ¹é…root/method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">combine</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// åˆ¤æ–­æ˜¯å¦æˆåŠŸï¼Œå¤±è´¥è¿”å› nullï¼›å¦åˆ™ï¼Œåˆ™è¿”å›åŒ¹é…æˆåŠŸçš„æ¡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¸¾ä¸ªä¾‹å­æ¥è®²ï¼Œå¦‚æœå½“å‰è¯·æ±‚åŒ¹é…æ¡ä»¶æ˜¯ä¸€ä¸ªè·¯å¾„åŒ¹é…æ¡ä»¶ï¼ŒåŒ…å«å¤šä¸ªè·¯å¾„åŒ¹é…æ¨¡æ¿ï¼Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¹¶ä¸”å…¶ä¸­æœ‰äº›æ¨¡æ¿å’ŒæŒ‡å®šè¯·æ±‚requeståŒ¹é…ï¼Œé‚£ä¹ˆè¿”å›çš„æ–°å»ºçš„è¯·æ±‚åŒ¹é…æ¡ä»¶å°†ä»…ä»…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// åŒ…å«å’ŒæŒ‡å®šè¯·æ±‚requeståŒ¹é…çš„é‚£äº›è·¯å¾„æ¨¡æ¿ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Nullable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getMatchingCondition</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¤šä¸ªéƒ½æ»¡è¶³æ¡ä»¶æ—¶ï¼Œç”¨æ¥æŒ‡å®šå…·ä½“é€‰æ‹©å“ªä¸€ä¸ªã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">compareTo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AbstractRequestCondition å®ç°äº†equals,hashCodeå’ŒtoString é€šç”¨æ–¹æ³•, è¿˜é€šè¿‡protectedæŠ½è±¡æ–¹æ³•çº¦å®šäº†å®ç°ç±»å…¶ä»–çš„ä¸€äº›å†…éƒ¨é€šç”¨é€»è¾‘</p><p>å…·ä½“å®ç°ç±»:</p><ul><li>PatternsRequestCondition	è·¯å¾„åŒ¹é…æ¡ä»¶</li><li>RequestMethodsRequestCondition	è¯·æ±‚æ–¹æ³•(get post delete..)åŒ¹é…æ¡ä»¶</li><li>ParamsRequestCondition	è¯·æ±‚å‚æ•°åŒ¹é…æ¡ä»¶</li><li>HeadersRequestCondition	å¤´éƒ¨ä¿¡æ¯åŒ¹é…æ¡ä»¶</li><li>ConsumesRequestCondition	å¯æ¶ˆè´¹MIMEåŒ¹é…æ¡ä»¶</li><li>ProducesRequestCondition	å¯ç”ŸæˆMIMEåŒ¹é…æ¡ä»¶</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="145-æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£">14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£<a href="#145-æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£" class="hash-link" aria-label="14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£çš„ç›´æ¥é“¾æ¥" title="14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token plain"> å¯ä»¥ç”¨äºä»query parameters</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> form data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å’Œparts in multipart requestsä¸­è·å–å‚æ•°ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">å³GETè¯·æ±‚å’ŒPOSTï¼ˆapplication</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">x</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">www</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">form</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">urlencoded ï¼Œmultipart</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">form</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">dataï¼‰è¯·æ±‚çš„å‚æ•°éƒ½å¯ä»¥ä½¿ç”¨</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestPart</span><span class="token plain"> ç”¨åœ¨multipart</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">form</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">dataè¡¨å•æäº¤è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œæ”¯æŒçš„è¯·æ±‚æ–¹æ³•çš„æ–¹å¼</span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartFile</span><span class="token plain">ï¼Œå±äº</span><span class="token class-name" style="color:rgb(38, 127, 153)">Spring</span><span class="token plain">çš„</span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartResolver</span><span class="token plain">ç±»ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// å‰ä¸‰ç§æ”¯æŒ application/x-www-form-urlencoded;charset=UTF-8â€™ æ ¼å¼ (è¡¨å•æäº¤), æ˜¯æµè§ˆå™¨é»˜è®¤çš„ç¼–ç æ ¼å¼ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// multipart/form-data æ ¼å¼ åŒºåˆ«: ä¸ä¼šå¯¹å‚æ•°ç¼–ç ï¼Œä½¿ç”¨çš„boundary(åˆ†å‰²çº¿)ï¼Œç›¸å½“äº&amp;ï¼Œboundaryçš„å€¼æ˜¯----Web**AJv3ã€‚ æ–‡ä»¶ä¸Šä¼ å¿…é¡»è¦è¿™ç§æ ¼å¼, ä¹Ÿå¯ç”¨äºé”®å€¼å¯¹å‚æ•°ï¼Œæœ€åè¿æ¥æˆä¸€ä¸²å­—ç¬¦ä¼ è¾“ (ref: https://www.jianshu.com/p/53b5bd0f1d44)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// @requestParam æ³¨è§£æ–¹æ³•å‚æ•°, å¯çœç•¥, å¯ä»¥æœ‰å¤šä¸ª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiOperation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æŸ¥è¯¢ç”¨æˆ·&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/detailByParam&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">detailByParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;roleName&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> roleName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;roleDes&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> roleDes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&gt;&gt;&gt;id=&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">id</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;,roleName=&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">roleName</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;,roleDes=&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">roleDes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt;id=1,roleName=admin,roleDes=æ‹¥æœ‰adminæƒé™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiOperation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æŸ¥è¯¢ç”¨æˆ·&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/detailByParam&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">detailByParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&gt;&gt;&gt;id=&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;,roleName=&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;roleName&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;,roleDes=&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;roleDes&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt;id=1,roleName=admin,roleDes=æ‹¥æœ‰adminæƒé™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiOperation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æŸ¥è¯¢ç”¨æˆ·&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/detailByParam&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">detailByParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestBody</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&gt;&gt;&gt;&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt;id=1&amp;roleName=admin&amp;roleDes=%E6%8B%A5%E6%9C%89admin%E6%9D%83%E9%99%90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// å‚æ•°ç”¨ &amp; éš”ç¦»å¼€, å¯¹äºGetè¯·æ±‚ï¼Œæ˜¯å°†å‚æ•°è½¬æ¢?key=value&amp;key=valueæ ¼å¼ï¼Œè¿æ¥åˆ°urlå</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¦‚æœå‚æ•°å€¼ä¸­éœ€è¦&amp;ï¼Œåˆ™å¿…é¡»å¯¹å…¶è¿›è¡Œç¼–ç ã€‚ç¼–ç æ ¼å¼å°±æ˜¯application/x-www-form-urlencodedï¼ˆå°†é”®å€¼å¯¹çš„å‚æ•°ç”¨&amp;è¿æ¥èµ·æ¥ï¼Œå¦‚æœæœ‰ç©ºæ ¼ï¼Œå°†ç©ºæ ¼è½¬æ¢ä¸º+åŠ å·ï¼›æœ‰ç‰¹æ®Šç¬¦å·ï¼Œå°†ç‰¹æ®Šç¬¦å·è½¬æ¢ä¸ºASCII HEXå€¼ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ä»…æ”¯æŒ application/json  æ ¼å¼, ä¸æ”¯æŒ application/x-www-form-urlencoded;charset=UTF-8â€™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiOperation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æŸ¥è¯¢ç”¨æˆ·&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/detailByParam&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">detailByParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestBody</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GetRoleParam</span><span class="token plain"> getRoleParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">// @RequestBody æ³¨è§£å‚æ•°, ä¸å¯çœç•¥, æœ€å¤šåªèƒ½ä¸€ä¸ª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&gt;&gt;&gt;&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain">getRoleParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="146-è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹">14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹<a href="#146-è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹" class="hash-link" aria-label="14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹çš„ç›´æ¥é“¾æ¥" title="14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è‹¥æœåªæ˜¯ä¸€ä¸ªä¸¤ä¸ªç±»å‹éœ€è¦è½¬æ¢, ç›´æ¥å®ç°  org.springframework.core.convert.converter.Converter ç„¶åæ ‡æ³¨ component å³å¯ (åŒ…å«è¿ä¸ªæ³›å‹, ç¬¬ä¸€ä¸ªæ˜¯è¯·æ±‚ä¸­åŸå§‹ç±»å‹å¦‚ Integer, ç¬¬äºŒä¸ªæ³›å‹æ˜¯ å¸Œæœ›è½¬æ¢åçš„ç±»å‹å¦‚ enum),</p><p>å¯¹ get/post è¯·æ±‚éƒ½æœ‰æ•ˆ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// ä¾‹å­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">StringToDateConverter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Converter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Date</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SimpleDateFormat</span><span class="token plain"> simpleDateFormat </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SimpleDateFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Date</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">convert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Date</span><span class="token plain"> parse </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            parse </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> simpleDateFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">parse</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ParseException</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">printStackTrace</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> parse</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// å®ä¾‹æ¡ˆä¾‹: æšä¸¾è½¬æ¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">QueryRequest</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token plain"> gender</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GetMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/get&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token comment" style="color:rgb(0, 128, 0)">//gender åªèƒ½æ¥æ”¶åˆ° MALE ã€FEMALE è¿™æ ·çš„å‚æ•°ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œå‡ä¼šæŠ¥ç±»å‹ä¸åŒ¹é…çš„é”™è¯¯ä¿¡æ¯ï¼Œæ­¤æ—¶æ˜¯æ— æ³•å¤„ç† 0 ã€1 è¿™æ ·çš„å‚æ•°çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Dict</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testGet</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">QueryRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ã€get-requestã€‘= {}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JSONUtil</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toJsonStr</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Dict</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">set</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;get-request&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PostMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/post&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Dict</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">testPost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestBody</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">QueryRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ã€post-requestã€‘= {}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JSONUtil</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toJsonStr</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Dict</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">set</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;post-request&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// å¢åŠ ä¸€ä¸ªè½¬æ¢å™¨å³å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IntegerCodeToGenderEnumConverter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Converter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> enumMap </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Maps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">newHashMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IntegerCodeToGenderEnumConverter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token plain"> genderEnum </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">values</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            enumMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">genderEnum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getCode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> genderEnum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">convert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token plain"> source</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token plain"> genderEnum </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> enumMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">source</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ObjectUtil</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">isNull</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">genderEnum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IllegalArgumentException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æ— æ³•åŒ¹é…å¯¹åº”çš„æšä¸¾ç±»å‹&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> genderEnum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“æˆ‘ä»¬çš„æšä¸¾ç±»ç‰¹åˆ«å¤šçš„æ—¶å€™, ä¸ä½¿ç”¨ä¸Šé¢ç›´æ¥ä½¿ç”¨ Converter çš„è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¼•å…¥ ConverterFactory æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//é€šç”¨æšä¸¾æ¥å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">BaseEnum</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * è·å–æšä¸¾ç¼–ç </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @return ç¼–ç </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getCode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Getter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">enum</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">BaseEnum</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * ç”·</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">MALE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * å¥³</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">FEMALE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * æ€§åˆ«ç¼–ç </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">GenderEnum</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">code </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IntegerToEnumConverter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">BaseEnum</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Converter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> enumMap </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Maps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">newHashMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IntegerToEnumConverter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Class</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> enumType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> enums </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> enumType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getEnumConstants</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token plain"> e </span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> enums</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            enumMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getCode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">convert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token plain"> source</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">T</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> enumMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">source</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ObjectUtil</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">isNull</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IllegalArgumentException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æ— æ³•åŒ¹é…å¯¹åº”çš„æšä¸¾ç±»å‹&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//åˆ›å»ºå¯¹åº”çš„è‡ªå®šä¹‰ ConverterFactory å·¥å‚ç±»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IntegerCodeToEnumConverterFactory</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConverterFactory</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">BaseEnum</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Class</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Converter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> CONVERTERS </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Maps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">newHashMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * è·å–ä¸€ä¸ªä» Integer è½¬åŒ–ä¸º T çš„è½¬æ¢å™¨ï¼ŒT æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œæœ‰å¤šä¸ªå®ç°</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     *</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @param targetType è½¬æ¢åçš„ç±»å‹</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * @return è¿”å›ä¸€ä¸ªè½¬åŒ–å™¨</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics"> </span><span class="token generics keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">BaseEnum</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Converter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getConverter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Class</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> targetType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Converter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">T</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> converter </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> CONVERTERS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">targetType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">converter </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            converter </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IntegerToEnumConverter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">targetType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            CONVERTERS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">targetType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> converter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> converter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// æ³¨å†Œå·¥å‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebMvcConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebMvcConfigurer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * æšä¸¾ç±»çš„è½¬æ¢å™¨å·¥å‚ addConverterFactory</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">addFormatters</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">FormatterRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addConverterFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IntegerCodeToEnumConverterFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addConverterFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">StringCodeToEnumConverterFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="147-è¿”å›å›¾ç‰‡">14.7. è¿”å›å›¾ç‰‡<a href="#147-è¿”å›å›¾ç‰‡" class="hash-link" aria-label="14.7. è¿”å›å›¾ç‰‡çš„ç›´æ¥é“¾æ¥" title="14.7. è¿”å›å›¾ç‰‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/image&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ImageController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/get&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ResponseBody</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getImage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletResponse</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">File</span><span class="token plain"> file </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">File</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;D:/test.jpg&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">FileInputStream</span><span class="token plain"> inputStream </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FileInputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">byte</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> bytes </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">byte</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">inputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">available</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        response</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setContentType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;image/jpeg&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">OutputStream</span><span class="token plain"> out </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getOutputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">write</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">flush</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token comment" style="color:rgb(0, 128, 0)">//å…³é—­å“åº”è¾“å‡ºæµ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">close</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/image&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ImageController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/get&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">produces </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MediaType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">IMAGE_JPEG_VALUE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//å¦‚æœæ˜¯ç½‘é¡µçš„è¯ï¼Œproduces = MediaType.TEXT_HTML</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ResponseBody</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">byte</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getImage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">File</span><span class="token plain"> file </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">File</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;D:/test.jpg&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">FileInputStream</span><span class="token plain"> inputStream </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FileInputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">byte</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> bytes </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">byte</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">inputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">available</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        inputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">read</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> inputStream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">available</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="148-rest-api-æ–‡æ¡£">14.8. rest api æ–‡æ¡£<a href="#148-rest-api-æ–‡æ¡£" class="hash-link" aria-label="14.8. rest api æ–‡æ¡£çš„ç›´æ¥é“¾æ¥" title="14.8. rest api æ–‡æ¡£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1481-knife4j">14.8.1. knife4j<a href="#1481-knife4j" class="hash-link" aria-label="14.8.1. knife4jçš„ç›´æ¥é“¾æ¥" title="14.8.1. knife4jçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1482-springdoc-openapi">14.8.2. springdoc-openapi<a href="#1482-springdoc-openapi" class="hash-link" aria-label="14.8.2. springdoc-openapiçš„ç›´æ¥é“¾æ¥" title="14.8.2. springdoc-openapiçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://springdoc.org/" target="_blank" rel="noopener noreferrer">https://springdoc.org/</a></p><p><a href="https://www.baeldung.com/spring-rest-openapi-documentation" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/spring-rest-openapi-documentation</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1483-swagger3">14.8.3. swagger3<a href="#1483-swagger3" class="hash-link" aria-label="14.8.3. swagger3çš„ç›´æ¥é“¾æ¥" title="14.8.3. swagger3çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è®¿é—® /swagger-ui.html or /swagger-ui/index.html (springdoc.swagger-ui.path=/swagger-ui.html)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">io.springfox</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">springfox-boot-starter</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">3.0.0</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableOpenApi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@MapperScan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">basePackages </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;cn.ruiyeclub.dao&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Swagger3Application</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">main</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Swagger3Application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Swagger3Config</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Docket</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">createRestApi</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Docket</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">DocumentationType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">OAS_30</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">apiInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">apiInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">select</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">apis</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestHandlerSelectors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">withMethodAnnotation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ApiOperation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">paths</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">PathSelectors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">any</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// åè®®ä½¿ç”¨ http; é»˜è®¤æ˜¯ https</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">protocols</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Stream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">of</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;http&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">collect</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collectors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toSet</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApiInfo</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">apiInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApiInfoBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">title</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Swagger3æ¥å£æ–‡æ¡£&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">version</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;1.0&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1484-é›†æˆswagger2">14.8.4. é›†æˆswagger2<a href="#1484-é›†æˆswagger2" class="hash-link" aria-label="14.8.4. é›†æˆswagger2çš„ç›´æ¥é“¾æ¥" title="14.8.4. é›†æˆswagger2çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="http://springfox.github.io/springfox/docs/snapshot/#springfox-spring-mvc-and-spring-boot" target="_blank" rel="noopener noreferrer">http://springfox.github.io/springfox/docs/snapshot/#springfox-spring-mvc-and-spring-boot</a></p><ul><li>swagger2é…ç½®ç±»ï¼Œå’ŒAPPå¯åŠ¨ç±»åŒçº§ï¼Œ@Configurationï¼Œ@EnableSwagger2</li><li>è®¿é—®ï¼šhttp://localhost:8080/swagger-ui.html</li><li>é…ç½®mvcæ—¶å€™ï¼Œ å¦‚æœç»§æ‰¿äº†WebMvcConfigurationSupportï¼Œ éœ€è¦é‡æ–°æ³¨å…¥èµ„æºæ–‡ä»¶ï¼Œ å¦åˆ™è®¿é—®ä¸åˆ°swagger-ui.html;(<a href="https://blog.csdn.net/zjcjava/article/details/78064264" target="_blank" rel="noopener noreferrer">ref</a>)</li><li>åˆ†ç¯å¢ƒå¼€å¯ <ul><li>åœ¨é…ç½®ç±»ä¸Šæ ‡æ³¨ @Profile({&quot;dev&quot;,&quot;test&quot;})</li><li>æˆ–è€… åœ¨new Docketé‡Œæ·»åŠ .Enable(true/false)æ–¹æ³•</li></ul></li><li>springfox.documentation.swagger-ui.enabled=false ç”Ÿäº§ env ä¸‹ close</li></ul><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- ä¼šå¼•å…¥ è°·æ­Œçš„ guava --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- ç‰ˆæœ¬å¯çœç•¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">io.springfox</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">springfox-swagger2</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">2.6.1</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">io.springfox</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">springfox-swagger-ui</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">2.6.1</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableSwagger2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Swagger2Config</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ·»åŠ  swagger é™æ€èµ„æºå¤„ç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¸€èˆ¬æˆ‘ä»¬ä¼šè®¾ç½® mvc ä¸­, spring.resources.add-mappings=false, å¯¹é™æ€èµ„æºé»˜è®¤ä¸å¤„ç†, è¿™æ˜¯éœ€è¦ä¸º swagger æ·»åŠ ä¾‹å¤– (è¿˜ä¼šè®¾ç½® spring.mvc.throw-exception-if-no-handler-found=true æ²¡æ‰¾åˆ° Handleræ—¶ç›´æ¥æŠ›å‡ºå¼‚å¸¸)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//    @Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//    public WebMvcConfigurer swaggerPassConfigure() {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//        return new WebMvcConfigurer() {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            @Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            public void addResourceHandlers(ResourceHandlerRegistry registry) {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//                registry.addResourceHandler(&quot;swagger-ui.html&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//                        .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;, &quot;/static&quot;, &quot;/public&quot;);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//                registry.addResourceHandler(&quot;/webjars/**&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//                        .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//            }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//        };</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Docket</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">api</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ParameterBuilder</span><span class="token plain"> ticketPar </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ParameterBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Parameter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> pars </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ArrayList</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        ticketPar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Access-Token&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">description</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Restæ¥å£æƒé™è®¤è¯token,æ— éœ€é‰´æƒå¯ä¸ºç©º&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">modelRef</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ModelRef</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;string&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">parameterType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;header&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">//headerä¸­çš„ticketå‚æ•°éå¿…å¡«ï¼Œä¼ ç©ºä¹Ÿå¯ä»¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">required</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ ¹æ®æ¯ä¸ªæ–¹æ³•åä¹ŸçŸ¥é“å½“å‰æ–¹æ³•åœ¨è®¾ç½®ä»€ä¹ˆå‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        pars</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">ticketPar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Docket</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">DocumentationType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">SWAGGER_2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">apiInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">apiInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">select</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ ¹æ®åŒ…åæ‰«æcontroller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// è‡ªè¡Œä¿®æ”¹ä¸ºè‡ªå·±çš„åŒ…è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">apis</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestHandlerSelectors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">basePackage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;com.tgpms&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¤šåŒ…é…ç½®: https://www.jianshu.com/p/78309feb5d5a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ‰«ææ‰€æœ‰controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// .apis(RequestHandlerSelectors.any()) </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// æŒ‡å®šæ‰«æéƒ¨åˆ†æ³¨è§£æ ‡æ³¨çš„ controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// .apis(RequestHandlerSelectors.withMethodAnnotation(Api.class/ApiOperation.class))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">paths</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">PathSelectors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">any</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// .paths() è¿™ä¸ªæ˜¯åŒ…è·¯å¾„ä¸‹çš„è·¯å¾„,PathSelectors.any()æ˜¯åŒ…ä¸‹æ‰€æœ‰è·¯å¾„                </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// å…¨å±€è®¾ç½®è¯·æ±‚å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">globalOperationParameters</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">pars</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//ç”Ÿæˆå…¨å±€é€šç”¨å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// private List&lt;RequestParameter&gt; getGlobalRequestParameters() {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//     List&lt;RequestParameter&gt; parameters = new ArrayList&lt;&gt;();</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//     parameters.add(new RequestParameterBuilder()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .name(&quot;appid&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .description(&quot;å¹³å°id&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .required(true)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .in(ParameterType.QUERY)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .query(q -&gt; q.model(m -&gt; m.scalarModel(ScalarType.STRING)))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .required(false)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .build());</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//     parameters.add(new RequestParameterBuilder()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .name(&quot;udid&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .description(&quot;è®¾å¤‡çš„å”¯ä¸€id&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .required(true)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .in(ParameterType.QUERY)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .query(q -&gt; q.model(m -&gt; m.scalarModel(ScalarType.STRING)))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .required(false)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .build());</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//     parameters.add(new RequestParameterBuilder()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .name(&quot;version&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .description(&quot;å®¢æˆ·ç«¯çš„ç‰ˆæœ¬å·&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .required(true)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .in(ParameterType.QUERY)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .query(q -&gt; q.model(m -&gt; m.scalarModel(ScalarType.STRING)))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .required(false)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//             .build());</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//      return parameters;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// //ç”Ÿæˆé€šç”¨å“åº”ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// private List&lt;Response&gt; getGlobalResonseMessage() {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//     List&lt;Response&gt; responseList = new ArrayList&lt;&gt;();</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//     responseList.add(new ResponseBuilder().code(&quot;404&quot;).description(&quot;æ‰¾ä¸åˆ°èµ„æº&quot;).build());</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//      return responseList;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApiInfo</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">apiInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApiInfoBuilder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">title</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;online exam by springboot&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">description</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ by æ¢å±±å¹¿ at 2020&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">termsOfServiceUrl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;https://github.com/19920625lsg/spring-boot-online-exam&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">version</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;1.0&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">contact</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Contact</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;liangshanguang&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;https://github.com/19920625lsg/spring-boot-online-exam&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;liangshanguang2@gmail.com&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">build</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Api</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æµ‹è¯•ç”¨ä¾‹1&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> on controller </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiOperation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;apiOperationSwaggerTest&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> notes </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;apiOperationSwaggeræµ‹è¯•&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> on controller </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> method</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;idå…¥å‚&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> required </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> on method params</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">description </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æµ‹è¯•å®ä½“ç±»&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;æµ‹è¯•å®ä½“ç±»&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> on data model </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiModelProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;userName&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ç”¨æˆ·å&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> required </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> exmaple </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;å°æ˜&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> on data </span><span class="token keyword" style="color:rgb(0, 0, 255)">module</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> field</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiImplicitParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiImplicitParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;idå…¥å‚&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> required </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> dataType </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Integer&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> paramType </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;query&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiImplicitParam</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;brand&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;brand&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> required </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> dataType </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;BRAND&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> paramType </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;body&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> on controller </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> method</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiImplicitParams</span><span class="token plain">ï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å‚æ•°è¯´æ˜</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiImplicitParam</span><span class="token plain">ï¼šç”¨åœ¨</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiImplicitParams</span><span class="token plain">æ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        nameï¼šå‚æ•°å</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        valueï¼šå‚æ•°çš„æ±‰å­—è¯´æ˜ã€è§£é‡Š</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        requiredï¼šå‚æ•°æ˜¯å¦å¿…é¡»ä¼ </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        paramTypeï¼šå‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            Â· header </span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> è¯·æ±‚å‚æ•°çš„è·å–ï¼š</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestHeader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            Â· query </span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> è¯·æ±‚å‚æ•°çš„è·å–ï¼š</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestParam</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            Â· pathï¼ˆç”¨äºrestfulæ¥å£ï¼‰</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> è¯·æ±‚å‚æ•°çš„è·å–ï¼š</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PathVariable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            Â· bodyï¼ˆä¸å¸¸ç”¨ï¼‰</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            Â· formï¼ˆä¸å¸¸ç”¨ï¼‰    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        dataTypeï¼šå‚æ•°ç±»å‹ï¼Œé»˜è®¤</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain">ï¼Œå…¶å®ƒå€¼dataType</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Integer&quot;</span><span class="token plain">       </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        defaultValueï¼šå‚æ•°çš„é»˜è®¤å€¼</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="149-è¿‡æ»¤å™¨-å’Œ-æ‹¦æˆªå™¨">14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨<a href="#149-è¿‡æ»¤å™¨-å’Œ-æ‹¦æˆªå™¨" class="hash-link" aria-label="14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨çš„ç›´æ¥é“¾æ¥" title="14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1491-åŒºåˆ«">14.9.1. åŒºåˆ«<a href="#1491-åŒºåˆ«" class="hash-link" aria-label="14.9.1. åŒºåˆ«çš„ç›´æ¥é“¾æ¥" title="14.9.1. åŒºåˆ«çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>servlet filterå’Œspring mvc InterceptoråŒºåˆ«ï¼š</p><ul><li><p>Filter æ˜¯åŸºäº å‡½æ•°å›è°ƒçš„ï¼Œè€Œ Interceptor åˆ™æ˜¯åŸºäº Java åå°„ å’Œ åŠ¨æ€ä»£ç†ã€‚</p></li><li><p>Filter ä¾èµ–äº Servlet å®¹å™¨, å’Œservletå®¹å™¨éš”çš„è¿‘ï¼Œè€Œ Interceptor ä¾èµ–springmvc, å’Œåº”ç”¨éš”çš„è¿‘, åœ¨æœ€é‡Œå±‚ã€‚æ‰€ä»¥filter å…ˆè¿›å…¥, æœ€åé€€å‡º</p></li><li><p>Filter å¯¹å‡ ä¹ æ‰€æœ‰çš„è¯·æ±‚ èµ·ä½œç”¨ï¼Œè€Œ Interceptor åªå¯¹ Controller è¯·æ±‚èµ·ä½œç”¨ã€‚</p></li><li><p>æ‹¦æˆªå™¨å¯ä»¥è·å–IOCå®¹å™¨ä¸­çš„å„ä¸ªbeanï¼Œè€Œè¿‡æ»¤å™¨å°±ä¸è¡Œï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œåœ¨æ‹¦æˆªå™¨é‡Œæ³¨å…¥ä¸€ä¸ªserviceï¼Œå¯ä»¥è°ƒç”¨ä¸šåŠ¡é€»è¾‘ã€‚</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1492-ä½¿ç”¨-filter">14.9.2. ä½¿ç”¨ filter<a href="#1492-ä½¿ç”¨-filter" class="hash-link" aria-label="14.9.2. ä½¿ç”¨ filterçš„ç›´æ¥é“¾æ¥" title="14.9.2. ä½¿ç”¨ filterçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">scenario </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ç›´æ¥å®ç°</span><span class="token class-name" style="color:rgb(38, 127, 153)">Filter</span><span class="token plain">æ¥å£ï¼Œå¹¶ä½¿ç”¨</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ‹¦æˆªæ‰€æœ‰è·¯å¾„ </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/*&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> è¿™ç§æ–¹å¼å¯ä»¥æ³¨å…¥ bean</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">scenario </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">å®ç°</span><span class="token class-name" style="color:rgb(38, 127, 153)">Filter</span><span class="token plain">æ¥å£ï¼Œç”¨</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@WebFilter</span><span class="token plain">æ³¨è§£ï¼ŒæŒ‡å®šæ‹¦æˆªè·¯å¾„ä»¥åŠä¸€äº›å‚æ•°ï¼ŒåŒæ—¶éœ€è¦åœ¨å¯åŠ¨ç±»ä½¿ç”¨</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ServletComponentScan</span><span class="token plain">æ‰«æå¸¦</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@WebFilter</span><span class="token plain">ã€</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@WebServlet</span><span class="token plain">ã€</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@WebListener</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">è¿™ç§æ–¹å¼æ— æ³•æ³¨å…¥ bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> é™¤é å’Œ </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@component</span><span class="token plain"> ä¸€èµ·ä½¿ç”¨</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ä½†æ˜¯éœ€è¦é…ç½®è¦†ç›– bean</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#å¯ç”¨è¦†ç›–åŒåbean</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">allow</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">bean</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">definition</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">overriding</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">scenario </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyFilterConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyFilter</span><span class="token plain"> myFilter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FilterRegistrationBean</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">MyFilter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">thirdFilter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ³›å‹æŒ‡å®š filter ç±»å‹, so å¤šä¸ª filter æ¯ä¸ªéƒ½è¦ä¸€ä¸ª bean æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">FilterRegistrationBean</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">MyFilter</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> filterRegistrationBean </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FilterRegistrationBean</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        filterRegistrationBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setOrder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        filterRegistrationBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setFilter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">myFilter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        filterRegistrationBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setUrlPatterns</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ArrayList</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Arrays</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">asList</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/api/*&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> filterRegistrationBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">å’Œ è¿™é‡Œçš„ filter ä¸åŒ</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> è¿™é‡Œæ˜¯ä¸ºäº†è¿‡æ»¤ æ‰«æ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ComponentScan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;com.wxj&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">excludeFilters</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Filter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token class-name" style="color:rgb(38, 127, 153)">FilterType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ANNOTATION</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">classes</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token class-name" style="color:rgb(38, 127, 153)">Controller</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1493-ä½¿ç”¨-interceptor">14.9.3. ä½¿ç”¨ interceptor<a href="#1493-ä½¿ç”¨-interceptor" class="hash-link" aria-label="14.9.3. ä½¿ç”¨ interceptorçš„ç›´æ¥é“¾æ¥" title="14.9.3. ä½¿ç”¨ interceptorçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14931-åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨">14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨<a href="#14931-åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨" class="hash-link" aria-label="14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨çš„ç›´æ¥é“¾æ¥" title="14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><a href="https://www.baeldung.com/spring-mvc-handlerinterceptor" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/spring-mvc-handlerinterceptor</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">å®ç° </span><span class="token class-name" style="color:rgb(38, 127, 153)">HandlerInterceptor</span><span class="token plain"> æ¥å£</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InterfaceAuthCheckInterceptor</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HandlerInterceptor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">LoggerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getLogger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">getClass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">StringRedisTemplate</span><span class="token plain"> stringRedisTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// é…ç½®      </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InterceptorConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebMvcConfigurer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// WebMvcConfigurerAdapter è¿‡æ—¶, WebMvcConfigurationSupport, å¯¹äº classpath:/META/resources/ï¼Œclasspath:/resources/ï¼Œclasspath:/static/ï¼Œclasspath:/public/ï¼‰ä¸ç”Ÿæ•ˆ, æ‰€ä»¥é€‰æ‹©WebMvcConfigurer æœ€å¥½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@autowire</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> interceptor</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">addInterceptors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">InterceptorRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¤šä¸ªæ‹¦æˆªå™¨ç»„æˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾, åŠ å…¥çš„é¡ºåºå°±æ˜¯æ‹¦æˆªå™¨æ‰§è¡Œçš„é¡ºåº, ä¹Ÿå¯ä½¿ç”¨ @order(-1/0/1...)æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// addPathPatterns ç”¨äºæ·»åŠ æ‹¦æˆªè§„åˆ™, é»˜è®¤æ‹¦æˆªæ‰€æœ‰ å³ /**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// excludePathPatterns ç”¨æˆ·æ’é™¤æ‹¦æˆª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addInterceptor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">interceptor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addPathPatterns</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/api/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">exclude</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14932-åŸºäº-url-æ‹¦æˆª">14.9.3.2. åŸºäº url æ‹¦æˆª<a href="#14932-åŸºäº-url-æ‹¦æˆª" class="hash-link" aria-label="14.9.3.2. åŸºäº url æ‹¦æˆªçš„ç›´æ¥é“¾æ¥" title="14.9.3.2. åŸºäº url æ‹¦æˆªçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä¸€ç§æ–¹å¼æ˜¯ åœ¨é…ç½®ä¸­ registry.addInterceptor(interceptor).addPathPatterns(&quot;/api/**&quot;).exclude(&quot;...&quot;);</p><p>ä¸€ç§æ˜¯ç›´æ¥åœ¨ prehandle() ä¸­å¤„ç† String path = request.getServletPath(), path.matches(Const.NO_INTERCEPTOR_PATH å°±æ˜¯åŸºäºæ­£åˆ™åŒ¹é…çš„url </p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14933-åŸºäºæ³¨è§£æ‹¦æˆª">14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª<a href="#14933-åŸºäºæ³¨è§£æ‹¦æˆª" class="hash-link" aria-label="14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆªçš„ç›´æ¥é“¾æ¥" title="14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆªçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>interceptor ä¹Ÿå±äº aop, </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AuthorityInterceptor</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HandlerInterceptorAdapter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">preHandle</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletResponse</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¦‚æœä¸æ˜¯æ˜ å°„åˆ°æ–¹æ³•ç›´æ¥é€šè¿‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">handler </span><span class="token keyword" style="color:rgb(0, 0, 255)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HandlerMethod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// â‘ :START æ–¹æ³•æ³¨è§£çº§æ‹¦æˆªå™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">HandlerMethod</span><span class="token plain"> handlerMethod </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HandlerMethod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Method</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> handlerMethod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getMethod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// åˆ¤æ–­æ¥å£æ˜¯å¦éœ€è¦ç™»å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">LoginRequired</span><span class="token plain"> methodAnnotation </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> method</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getAnnotation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">LoginRequired</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æœ‰ @LoginRequired æ³¨è§£ï¼Œéœ€è¦è®¤è¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">methodAnnotation </span><span class="token operator" style="color:rgb(0, 0, 0)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">// è¿™å†™ä½ æ‹¦æˆªéœ€è¦å¹²çš„äº‹å„¿ï¼Œæ¯”å¦‚å–ç¼“å­˜ï¼ŒSESSIONï¼Œæƒé™åˆ¤æ–­ç­‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;====================================&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1410-servlet-druid-ç›‘æ§">14.10. servlet Druid ç›‘æ§<a href="#1410-servlet-druid-ç›‘æ§" class="hash-link" aria-label="14.10. servlet Druid ç›‘æ§çš„ç›´æ¥é“¾æ¥" title="14.10. servlet Druid ç›‘æ§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DruidConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spring.datasource&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DataSource</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">druid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DruidDataSource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//é…ç½®Druidçš„ç›‘æ§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//1ã€é…ç½®ä¸€ä¸ªç®¡ç†åå°çš„Servlet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ServletRegistrationBean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">statViewServlet</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ServletRegistrationBean</span><span class="token plain"> bean </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ServletRegistrationBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">StatViewServlet</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/druid/*&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> initParams </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HashMap</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        initParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;loginUsername&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;admin&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        initParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;loginPassword&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;123456&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        initParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;allow&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        initParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;deny&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.15.21&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setInitParameters</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">initParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//2ã€é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FilterRegistrationBean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">webStatFilter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">FilterRegistrationBean</span><span class="token plain"> bean </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FilterRegistrationBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setFilter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebStatFilter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> initParams </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HashMap</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        initParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;exclusions&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;*.js,*.css,/druid/*&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setInitParameters</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">initParams</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setUrlPatterns</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Arrays</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">asList</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/*&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain">  bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1411-aop-æ•´åˆä½¿ç”¨">14.11. aop æ•´åˆä½¿ç”¨<a href="#1411-aop-æ•´åˆä½¿ç”¨" class="hash-link" aria-label="14.11. aop æ•´åˆä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="14.11. aop æ•´åˆä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14111-åŸºæœ¬ä½¿ç”¨">14.11.1. åŸºæœ¬ä½¿ç”¨<a href="#14111-åŸºæœ¬ä½¿ç”¨" class="hash-link" aria-label="14.11.1. åŸºæœ¬ä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="14.11.1. åŸºæœ¬ä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šçŸ¥æ‰§è¡Œé¡ºåº: around &gt; before &gt; around &gt; after &gt; afterReturning</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// åªéœ€è¦spring-boot-starter-aop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//@EnableAspectJAutoProxy// æ— éœ€, è‡ªåŠ¨å¼€å¯,å¼•å…¥ä¾èµ–å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//å¿…é¡»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Aspect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ReqCheckAop</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ObjectMapper</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Pointcut</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;execution(org.springframework.http.ResponseEntity&lt;Resp&gt; io.github.xiaoyureed.demo..*.*(..))&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">pointcut</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Around</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;pointcut()&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">reqCheck</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ProceedingJoinPoint</span><span class="token plain"> jp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Throwable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> jp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getArgs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&gt;&gt;&gt; req = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">writeValueAsString</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> jp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">proceed</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14112-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼">14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼<a href="#14112-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="hash-link" aria-label="14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ç›´æ¥é“¾æ¥" title="14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç”¨æ¥æŒ‡å®šå¢å¼ºå“ªäº›æ–¹æ³•</p><p><a href="https://www.cnblogs.com/ityangshuai/p/11923696.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ityangshuai/p/11923696.html</a></p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token number" style="color:rgb(9, 134, 88)">1.</span><span class="token method function property-access" style="color:rgb(0, 0, 255)">execution</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">xxx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">  ç”¨äºç¡®å®šæ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">è¡¨è¾¾å¼æ ¼å¼</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">å°±æ˜¯æ–¹æ³•ç­¾å</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">ï¼šä¿®é¥°ç¬¦  è¿”å›å€¼  åŒ…</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">ç±»</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token method function property-access" style="color:rgb(0, 0, 255)">æ–¹æ³•</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">å‚æ•°åˆ—è¡¨</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> throws å¼‚å¸¸</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1.1</span><span class="token plain"> ä¿®é¥°ç¬¦ ï¼ˆå¯é€‰ï¼‰ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ </span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> æ¥ç©ºæ ¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain">        å…¬å…±ä¿®é¥°ç¬¦</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">            ä»»æ„ä¿®é¥°ç¬¦</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1.2</span><span class="token plain"> è¿”å›å€¼ï¼Œ å¤æ‚ç±»å‹éœ€è¦å…¨é™å®šåç§°ï¼Œå¸¸ç”¨ </span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> æ¥ç©ºæ ¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token known-class-name class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain">        è¿”å›å­—ç¬¦ä¸²</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">            è¿”å›ä»»æ„</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1.3</span><span class="token plain"> åŒ…    ï¼Œå¸¸ç”¨</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xiaoyu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">learn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">service</span><span class="token plain">            æŒ‡å®šserviceåŒ…</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xiaoyu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">learn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">crm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">service</span><span class="token plain">                crmé¡¹ç›®ä¸‹çš„ä»»æ„å­æ¨¡å—ï¼ˆå­æ–‡ä»¶å¤¹ï¼‰çš„serviceåŒ…</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xiaoyu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">learn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">service</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">            </span><span class="token property-access">serviceç›®å½•åŒ…å«çš„æ‰€æœ‰ç›®å½•ï¼ˆåŒ…æ‹¬æ¬¡çº§å­ç›®å½•ç­‰ç­‰ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xiaoyu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">learn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">crm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">service</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">                </span><span class="token property-access">crmä¸‹æ‰€æœ‰çš„å­æ¨¡å—ä¸­serviceç›®å½•åŒ…å«çš„æ‰€æœ‰ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1.4</span><span class="token plain"> ç±»ï¼Œå¸¸ç”¨</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token maybe-class-name">UserService</span><span class="token plain">                æŒ‡å®šç±»å</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token maybe-class-name">User</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">                    ä»¥Userå¼€å¤´ç±»</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token maybe-class-name">Service</span><span class="token plain">                    ä»¥Serviceç»“å°¾ç±»ï¼ˆå¸¸ç”¨ï¼‰</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">                        ä»»æ„ç±»</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1.5</span><span class="token plain"> æ–¹æ³•ï¼Œå¸¸ç”¨ ä¸ </span><span class="token number" style="color:rgb(9, 134, 88)">1.4</span><span class="token plain">ç±»ç›¸ä¼¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            addUser                    æŒ‡å®šæ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            add</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">                        addå¼€å¤´æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token maybe-class-name">User</span><span class="token plain">                    ä»¥Userç»“å°¾æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain">                        ä»»æ„æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1.6</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">å‚æ•°åˆ—è¡¨ï¼Œå¸¸ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">                        </span><span class="token function" style="color:rgb(0, 0, 255)">æ²¡æœ‰å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">int</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">                        </span><span class="token function" style="color:rgb(0, 0, 255)">ä¸€ä¸ªå‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">int</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">int</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">                    </span><span class="token function" style="color:rgb(0, 0, 255)">ä¸¤ä¸ªå‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">                        å‚æ•°ä»»æ„</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token number" style="color:rgb(9, 134, 88)">1.7</span><span class="token plain"> å¼‚å¸¸ ï¼Œå…·ä½“å¼‚å¸¸ï¼ˆå¯é€‰ï¼‰</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    å¤šè¡¨è¾¾å¼ï¼š</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">aop</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">pointcut experssion</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;exection(è¡¨è¾¾å¼1)  || exection(è¡¨è¾¾å¼2) &quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">    ï¼šè¡¨è¾¾å¼</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">æˆ– è¡¨è¾¾å¼</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">ç»¼åˆæ¡ˆä¾‹ï¼šexecution</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xiaoyu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">learn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">crm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">service</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        å«ä¹‰ï¼š    è¿”å›å€¼ä»»æ„ï¼Œcrmé¡¹ç›®ä¸‹çš„ä»»æ„å­ç›®å½•ä¸­çš„çš„serviceç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•ä¸­çš„ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•ï¼Œå‚æ•°ä»»æ„ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">within</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> åªèƒ½æŒ‡å®š åŒ…</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">ç±»</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> å†ä¸‹é¢çš„ç²’åº¦å°±æ²¡åŠæ³•äº†</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ‰€ä»¥ç›¸å½“äº </span><span class="token function" style="color:rgb(0, 0, 255)">execution</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> çš„ç®€åŒ–ç‰ˆ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">within</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xiaoyu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">learn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">aop</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">åŒ¹é…aop åŒ…</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">å­åŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    æŒ‡å®šæ³¨è§£ç±»äº¦å¯</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">within</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">@org</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">springframework</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">web</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">bind</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">annotation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">RestController</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> åŒ¹é… è¢« æŒ‡å®šæ³¨è§£æ ‡æ³¨çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">this</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> ç”¨äºå‘é€šçŸ¥æ–¹æ³•ä¸­ä¼ å…¥ä»£ç†å¯¹è±¡çš„å¼•ç”¨</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token literal-property property">å¦‚</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">Before</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;before() &amp;&amp; this(proxy)&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">beforeAdvide</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter maybe-class-name">JoinPoint</span><span class="token parameter"> point</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token parameter"> </span><span class="token parameter known-class-name class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token parameter"> proxy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">target</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> ç”¨äºå‘é€šçŸ¥æ–¹æ³•ä¸­ä¼ å…¥ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> ï¼šç”¨äºå°†å‚æ•°ä¼ å…¥åˆ°é€šçŸ¥æ–¹æ³•ä¸­</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token literal-property property">å¦‚</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">Before</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;before() &amp;&amp; args(age,username)&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">beforeAdvide</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter maybe-class-name">JoinPoint</span><span class="token parameter"> point</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token parameter"> int age</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token parameter"> </span><span class="token parameter known-class-name class-name" style="color:rgb(38, 127, 153)">String</span><span class="token parameter"> username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    å¦‚ </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">Pointcut</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;execution(public * com.example.demo.aop.AopController.xxxMethod(int)) &amp;&amp; args(point))&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> ä¼šå°†æ‹¦æˆªåˆ°çš„æ–¹æ³•çš„ int ç±»å‹å‚æ•° ä¼ é€’åˆ° aop æ–¹æ³•ä¸­</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ä½¿ç”¨ point æ¥å—å³å¯</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> @within ï¼šç”¨äºåŒ¹é…åœ¨ç±»ä¸€çº§ä½¿ç”¨äº†æ³¨è§£çš„ç±»ï¼Œå…¶æ‰€æœ‰æ–¹æ³•éƒ½å°†è¢«åŒ¹é…</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">Pointcut</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;@within(com.cjm.annotation.AdviceAnnotation)&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> ï¼ æ‰€æœ‰è¢«@</span><span class="token maybe-class-name">AdviceAnnotationæ ‡æ³¨çš„ç±»éƒ½å°†åŒ¹é…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token literal-property property">å¸¸ç”¨</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">Pointcut</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;@annotation(AopLog) || @within(AopLog)&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> è¢« aopLog æ ‡æ³¨çš„ç±» or æ–¹æ³•è¢«æ‹¦æˆª</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> @target ï¼šå’Œ@withinçš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†å¿…é¡»è¦æŒ‡å®šæ³¨è§£çš„ä¿ç•™ç­–ç•¥ä¸º</span><span class="token constant" style="color:rgb(129, 31, 63)">RUNTIME</span><span class="token plain">ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    å­˜ç–‘</span><span class="token operator" style="color:rgb(0, 0, 0)">?</span><span class="token plain">@</span><span class="token function" style="color:rgb(0, 0, 255)">target</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> æŒ‡å®šç›®æ ‡ç±»å‹</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ‰€æœ‰è¿™ä¸ªç±»å‹çš„ç±»éƒ½ä¼šè¢«åŒ¹é…</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    @</span><span class="token function" style="color:rgb(0, 0, 255)">target</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">xiaoyu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">learn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">aop</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">IUserDAO</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">åŒ¹é… </span><span class="token maybe-class-name">IUserDAO</span><span class="token plain"> çš„æ‰€æœ‰å®ç°ç±»</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ç±»ä¸­çš„æ–¹æ³•éƒ½ä¼šè¢«ä»£ç†</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> åŒ…æ‹¬æœªåœ¨æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> @</span><span class="token function" style="color:rgb(0, 0, 255)">args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> æŒ‡å®šä¸€ä¸ªæ³¨è§£</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> è¡¨ç¤ºè¦æ‹¦æˆªæ–¹æ³•çš„å‚æ•°éœ€è¦å¸¦æœ‰è¿™ä¸ªæ³¨è§£</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> @</span><span class="token function" style="color:rgb(0, 0, 255)">bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">idå€¼</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> å¯¹æŒ‡å®šçš„ç›®æ ‡å¯¹è±¡çš„ç±»è¿›è¡ŒåŒ¹é…</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain"> @</span><span class="token function" style="color:rgb(0, 0, 255)">annotation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">å‚æ•°ä¸­æ³¨è§£å‚æ•°åç§°</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> åŒ¹é…è¢«æŒ‡å®šæ³¨è§£æ ‡æ³¨çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token literal-property property">å¦‚</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> ä¸‹é¢è¡¨ç¤º </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> åŒ¹é… web åŒ…</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">å­åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³• ä¸”æ–¹æ³•è¢« @</span><span class="token maybe-class-name">CheckReqNo</span><span class="token plain"> æ ‡æ³¨ </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:rgb(0, 0, 255)">Around</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;within(io.github.xiaoyureed.web..*) &amp;&amp; @annotation(checkReqNo)&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">xxx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token maybe-class-name">JoinPoint</span><span class="token plain"> jp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token maybe-class-name">CheckReqNo</span><span class="token plain"> checkReqNo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">  å¯ä»¥ä½¿ç”¨ </span><span class="token operator" style="color:rgb(0, 0, 0)">&amp;&amp;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">||</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token plain"> è¿ç®—ç¬¦æ¥å®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1412-controlleradvice-å¼‚å¸¸å¤„ç†">14.12. @controllerAdvice å¼‚å¸¸å¤„ç†<a href="#1412-controlleradvice-å¼‚å¸¸å¤„ç†" class="hash-link" aria-label="14.12. @controllerAdvice å¼‚å¸¸å¤„ç†çš„ç›´æ¥é“¾æ¥" title="14.12. @controllerAdvice å¼‚å¸¸å¤„ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å…¨å±€å¼‚å¸¸å¤„ç† å…¨å±€æ•°æ®ç»‘å®š å…¨å±€è¯·æ±‚æ•°æ®é¢„å¤„ç†</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ControllerAdvice</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//@ControllerAdviceæ³¨è§£ å¯ä»¥é€šè¿‡ assignableTypes æŒ‡å®šç‰¹å®šçš„ç±»ï¼Œè®©å¼‚å¸¸å¤„ç†ç±»åªå¤„ç†ç‰¹å®šç±»æŠ›å‡ºçš„å¼‚å¸¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyGlobalExceptionHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// ç›´æ¥è¿”å› web é¡µé¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ExceptionHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ModelAndView</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">customException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ModelAndView</span><span class="token plain"> mv </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ModelAndView</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        mv</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;message&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        mv</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setViewName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;myerror&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> mv</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// è¿”å› json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@exception</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@respbody</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¦‚æœç±»ä¸Šä½¿ç”¨çš„æ˜¯@RestControllerAdvice, é‚£ä¹ˆ è¿”å› json æ— éœ€ @ResponseBody, åªéœ€è¦ @ExceptionHandler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> respseentiyt </span><span class="token function" style="color:rgb(0, 0, 255)">xxx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> ex</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// ç»‘å®š md åˆ°æ¯ä¸ª controler ä¸­çš„æ–¹æ³•å‚æ•°ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ModelAttribute</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;md&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">mydata</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">HashMap</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> map </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">HashMap</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;age&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">99</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;gender&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ç”·&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// controller ä¸­è¿™ä¹ˆä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GetMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">hello</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Model</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">// æˆ–è€… @ModelAttribute(&quot;md&quot;) Map&lt;String, Object&gt; md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Object</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> map </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">asMap</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello controller advice&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// è¯·æ±‚æ•°æ®é¢„å¤„ç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// å¦‚æ­¤, è¯·æ±‚å‚æ•°å°±å¯ä»¥ä¼ é€’è¿™æ ·çš„å‚æ•°: a.name=xxx, b.name=yyy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// controller ä¸­è¿™æ ·è·å– @ModelAttribute(&quot;b&quot;) Book book, @ModelAttribute(&quot;a&quot;) Author author</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@InitBinder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;b&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">WebDataBinder</span><span class="token plain"> binder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        binder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setFieldDefaultPrefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;b.&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@InitBinder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;a&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">a</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">WebDataBinder</span><span class="token plain"> binder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        binder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setFieldDefaultPrefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;a.&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤„ç†å¼‚å¸¸çš„å…¶ä»–æ–¹æ³•:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ExceptionHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token comment" style="color:rgb(0, 128, 0)">// æ‹¦æˆªæ‰€æœ‰å¼‚å¸¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">ErrorResponse</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">exceptionHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">e </span><span class="token keyword" style="color:rgb(0, 0, 255)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IllegalArgumentException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">status</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">400</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">body</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">illegalArgumentResponse</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">e </span><span class="token keyword" style="color:rgb(0, 0, 255)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResourceNotFoundException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">status</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">404</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">body</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">resourseNotFoundResponse</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GetMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/resourceNotFoundException2&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">throwException3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseStatusException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpStatus</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">NOT_FOUND</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Sorry, the resourse not found!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResourceNotFoundException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1413-httpservletrequest-çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜">14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜<a href="#1413-httpservletrequest-çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜" class="hash-link" aria-label="14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜çš„ç›´æ¥é“¾æ¥" title="14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.cnblogs.com/JAYIT/p/10943155.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/JAYIT/p/10943155.html</a></p><p>è¿˜æ˜¯æ¨èä½¿ç”¨ aop å»åˆ‡ controller æ›´æ–¹ä¾¿ä¸€ç‚¹</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1414-è·¯ç”±å¤„ç†">14.14. è·¯ç”±å¤„ç†<a href="#1414-è·¯ç”±å¤„ç†" class="hash-link" aria-label="14.14. è·¯ç”±å¤„ç†çš„ç›´æ¥é“¾æ¥" title="14.14. è·¯ç”±å¤„ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14141-é™æ€èµ„æºæ˜ å°„-æš´éœ²é™æ€èµ„æº">14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº<a href="#14141-é™æ€èµ„æºæ˜ å°„-æš´éœ²é™æ€èµ„æº" class="hash-link" aria-label="14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æºçš„ç›´æ¥é“¾æ¥" title="14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æš´éœ²å›¾ç‰‡èµ„æº</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ImageConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebMvcConfigure</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">addResourceHandlers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ResourceHandlerRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addResourceHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/images/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//addResourceLocationsæŒ‡çš„æ˜¯æ–‡ä»¶æ”¾ç½®çš„ç›®å½•ï¼ŒaddResoureHandleræŒ‡çš„æ˜¯å¯¹å¤–æš´éœ²çš„è®¿é—®è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addResourceLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;file:./localdata/images/&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ†ç¯å¢ƒæš´éœ²é…ç½®æ–‡ä»¶</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// é…ç½®æ–‡ä»¶è®¿é—®åœ°å€ (æ³¨æ„æ¯ä¸ªè®¿é—®è·¯å¾„åé¢çš„è·¯å¾„åŠ  / !!!)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ## windowsç³»ç»Ÿä¸‹è®¿é—®è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// uploadWindow: E:\common\file\root\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ## windowsç³»ç»Ÿä¸‹è®¿é—®è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// uploadLinux: /user/img/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">addResourceHandlers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ResourceHandlerRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> os </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;os.name&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//å¦‚æœæ˜¯Windowsç³»ç»Ÿ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">os</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toLowerCase</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">startsWith</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;win&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addResourceHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/app_file/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// /app_file/**è¡¨ç¤ºåœ¨ç£ç›˜filePathWindowç›®å½•ä¸‹çš„æ‰€æœ‰èµ„æºä¼šè¢«è§£æä¸ºä»¥ä¸‹çš„è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addResourceLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;file:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> filePathWindow</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">//linux å’Œmac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addResourceHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/app_file/**&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addResourceLocations</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;file:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> filePathLinux</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">super</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addResourceHandlers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿˜æœ‰ä¸ªä¾‹å­, --&gt; swagger é™æ€èµ„æºå¤„ç† (æ”¾è¡Œ ç›¸å…³çš„é™æ€é¡µé¢)</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14142-æ·»åŠ -view-controller">14.14.2. æ·»åŠ  view controller<a href="#14142-æ·»åŠ -view-controller" class="hash-link" aria-label="14.14.2. æ·»åŠ  view controllerçš„ç›´æ¥é“¾æ¥" title="14.14.2. æ·»åŠ  view controllerçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MvcConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebMvcConfigurer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * æ·»åŠ  view controller</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * &lt;p&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * å°† url path å’Œ template å¯¹åº”, æ— éœ€æ·»åŠ ä»»ä½•çš„ controller ä»£ç </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">addViewControllers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ViewControllerRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addViewController</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/home&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setViewName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;home&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// ç­‰ä»· è®¿é—® /home , controller è¿”å› &quot;home&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addViewController</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setViewName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;home&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addViewController</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setViewName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addViewController</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/login&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setViewName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;login&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        registry</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addViewController</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/admin-page&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setViewName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;admin-page&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1415-spring-boot-starter-thymeleaf">14.15. spring-boot-starter-thymeleaf<a href="#1415-spring-boot-starter-thymeleaf" class="hash-link" aria-label="14.15. spring-boot-starter-thymeleafçš„ç›´æ¥é“¾æ¥" title="14.15. spring-boot-starter-thymeleafçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>thymeleaf å’Œ spring security é…åˆä½¿ç”¨ <code>sec</code> æ ‡ç­¾: <a href="https://www.jianshu.com/p/bb3a3b388c4e" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/bb3a3b388c4e</a></p><p>springbooté»˜è®¤  static/public ä¸­æ”¾é™æ€é¡µé¢ï¼Œè€Œtemplatesä¸­æ”¾åŠ¨æ€é¡µé¢å³ thymeleaf æ¨¡æ¿</p><p>é™æ€é¡µé¢: ç›´æ¥åœ¨staticæ”¾ä¸€ä¸ªhello.html,ç„¶åç›´æ¥è¾“å…¥http://localhost:8080/hello.html ä¾¿èƒ½æˆåŠŸè®¿é—® (å…³é—­è¿™ä¸ªç‰¹æ€§éœ€è¦ spring.resources.add-mappings: false), ä¹Ÿå¯ä»¥é€šè¿‡controllerè·³è½¬ <code>return &quot;hello.html&quot;;</code></p><p>åŠ¨æ€é¡µé¢: éœ€è¦ <code>spring-boot-starter-thymeleaf</code>, é™æ€é¡µé¢çš„returné»˜è®¤æ˜¯è·³è½¬åˆ°/static/index.htmlï¼Œå½“åœ¨pom.xmlä¸­å¼•å…¥äº†thymeleafç»„ä»¶ï¼ŒåŠ¨æ€è·³è½¬ä¼šè¦†ç›–é»˜è®¤çš„é™æ€è·³è½¬ï¼Œé»˜è®¤å°±ä¼šè·³è½¬åˆ°/templates/index.htmlï¼Œæ³¨æ„çœ‹ä¸¤è€…returnä»£ç ä¹Ÿæœ‰åŒºåˆ«ï¼ŒåŠ¨æ€æ²¡æœ‰htmlåç¼€, å¦‚æœåœ¨ä½¿ç”¨åŠ¨æ€é¡µé¢æ—¶è¿˜æƒ³è·³è½¬åˆ°/static/index.htmlï¼Œå¯ä»¥ä½¿ç”¨é‡å®šå‘return &quot;redirect:/index.html&quot;</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/Hi&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sayHello</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/Hi&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ModelAndView</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sayHello</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">ModelAndView</span><span class="token plain"> modelAndView </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ModelAndView</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    modelAndView</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setViewName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    modelAndView</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;key&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">12345</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//System.out.println(&quot;test&quot;);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> modelAndView</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/Hi&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sayHello</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics">obj</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">put</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;stu&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Stu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é…ç½®:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">#springé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">mvc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">servlet</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">load-on-startup</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">driver-class-name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">3306/springbootssm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">?</span><span class="token plain">serverTimezone=GMT%2B8</span><span class="token important">&amp;useUnicode=true&amp;characterEncoding=utf-</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">thymeleaf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">cache</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">#å…³é—­ç¼“å­˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">mode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> HTML5 </span><span class="token comment" style="color:rgb(0, 128, 0)">#è®¾ç½®æ¨¡æ¿ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">encoding</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> utf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">#è®¾ç½®ç¼–ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">prefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">/templates/</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">suffix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> .html</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    content</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">type=text/html </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>15. è¿ç»´éƒ¨ç½²</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="151-æ”¯æŒ-https-ssl">15.1. æ”¯æŒ https ssl<a href="#151-æ”¯æŒ-https-ssl" class="hash-link" aria-label="15.1. æ”¯æŒ https sslçš„ç›´æ¥é“¾æ¥" title="15.1. æ”¯æŒ https sslçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1511-nginx-é…ç½®-https">15.1.1. nginx é…ç½® https<a href="#1511-nginx-é…ç½®-https" class="hash-link" aria-label="15.1.1. nginx é…ç½® httpsçš„ç›´æ¥é“¾æ¥" title="15.1.1. nginx é…ç½® httpsçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Let&#x27;s Encrypt æˆ–è€…é˜¿é‡Œäº‘, è…¾è®¯äº‘ æ”¯æŒ é¢ç²‰ ssl è¯ä¹¦ , ä¸€å¹´æœ‰æ•ˆæœŸ, è¿‡æœŸå†æ¬¡ç”³è¯· </p><p><a href="https://segmentfault.com/a/1190000016760251" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000016760251</a> ä½¿ç”¨ lets encrypt é…ç½® nginx</p><p><a href="https://www.cnblogs.com/to-red/p/12450616.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/to-red/p/12450616.html</a>
<a href="https://www.cnblogs.com/chnmig/p/10343890.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/chnmig/p/10343890.html</a>
<a href="https://blog.csdn.net/fenglin0429/article/details/81347634" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/fenglin0429/article/details/81347634</a>
<a href="https://www.nonelonely.com/article/1584965619600" target="_blank" rel="noopener noreferrer">https://www.nonelonely.com/article/1584965619600</a> nginx é…ç½® http  è½¬https, ä»£ç† springboot
<a href="https://ask.csdn.net/questions/701009" target="_blank" rel="noopener noreferrer">https://ask.csdn.net/questions/701009</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1512-æ”¯æŒ-https-è®¿é—®">15.1.2. æ”¯æŒ https è®¿é—®<a href="#1512-æ”¯æŒ-https-è®¿é—®" class="hash-link" aria-label="15.1.2. æ”¯æŒ https è®¿é—®çš„ç›´æ¥é“¾æ¥" title="15.1.2. æ”¯æŒ https è®¿é—®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// å‡è®¾å¦‚ä¸‹çš„ api, å¸Œæœ›æ”¯æŒ https è®¿é—®, ç°åœ¨ä»…ä»…åªæ˜¯httpè®¿é—®ã€‚http://localhost:8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TestApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">main</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">TestApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">produces </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;text/plain;charset=UTF-8&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">index</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Hello Spring Boot!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//ç”Ÿæˆsslè¯ä¹¦, ç³»ç»Ÿçš„å½“å‰ç”¨æˆ·ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ªkeystore.p12æ–‡ä»¶, å°†keystore.p12æ–‡ä»¶æ‹·è´åˆ°æˆ‘ä»¬é¡¹ç›®çš„æ ¹è·¯å¾„ä¸‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// 1.-storetype æŒ‡å®šå¯†é’¥ä»“åº“ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// 2.-keyalg ç”Ÿè¯ä¹¦çš„ç®—æ³•åç§°ï¼ŒRSAæ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// 3.-keysize è¯ä¹¦å¤§å°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// 4.-keystore ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// 5.-validity è¯ä¹¦çš„æœ‰æ•ˆæœŸ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">keytool </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">genkey </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">alias tomcat  </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">storetype PKCS12 </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">keyalg RSA </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">keysize </span><span class="token number" style="color:rgb(9, 134, 88)">2048</span><span class="token plain">  </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">keystore keystore</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">p12 </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">validity </span><span class="token number" style="color:rgb(9, 134, 88)">3650</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¿®æ”¹é…ç½®æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ssl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">key</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">store</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">keystore</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">p12 </span><span class="token comment" style="color:rgb(0, 128, 0)">//è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ssl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">key</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">store</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">password</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">123456</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">//ç”Ÿæˆsslè¯ä¹¦æ—¶è®¾ç½®çš„å¯†é’¥åº“çš„å£ä»¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ssl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">keyStoreType</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">PKCS12</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ssl</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">keyAlias </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> tomcat</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//æ­¤æ—¶å·¥ç¨‹å·²ç»æ”¯æŒhttpsè®¿é—®ã€‚ https://localhost:8080/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1513-http-è¯·æ±‚è‡ªåŠ¨è½¬ä¸º-https">15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https<a href="#1513-http-è¯·æ±‚è‡ªåŠ¨è½¬ä¸º-https" class="hash-link" aria-label="15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º httpsçš„ç›´æ¥é“¾æ¥" title="15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º httpsçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// é…ç½®è®¿é—®http  urL æ—¶è‡ªåŠ¨è½¬åˆ°httpsã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// é…ç½®å, è®¿é—® https://localhost:8081/ æ­£å¸¸, è®¿é—® http://localhost:8080/ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡µé¢çš„urlå˜æˆäº†https://localhost:8081/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Config</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">EmbeddedServletContainerFactory</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">servletContainer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatEmbeddedServletContainerFactory</span><span class="token plain"> tomcat </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatEmbeddedServletContainerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">postProcessContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Context</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">SecurityConstraint</span><span class="token plain"> constraint </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SecurityConstraint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                constraint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setUserConstraint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;CONFIDENTIAL&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">SecurityCollection</span><span class="token plain"> collection </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SecurityCollection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                collection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addPattern</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/*&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                constraint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addCollection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">collection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addConstraint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">constraint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        tomcat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addAdditionalTomcatConnectors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">httpConnector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> tomcat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Connector</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">httpConnector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Connector</span><span class="token plain"> connector </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setScheme</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;http&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//Connectorç›‘å¬çš„httpçš„ç«¯å£å·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setPort</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">8080</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setSecure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//ç›‘å¬åˆ°httpçš„ç«¯å£å·åè½¬å‘åˆ°çš„httpsçš„ç«¯å£å·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setRedirectPort</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">8081</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// éœ€è¦è®¾ç½® server.port=8081</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1514-åŒæ—¶æ”¯æŒ-http-https">15.1.4. åŒæ—¶æ”¯æŒ http https<a href="#1514-åŒæ—¶æ”¯æŒ-http-https" class="hash-link" aria-label="15.1.4. åŒæ—¶æ”¯æŒ http httpsçš„ç›´æ¥é“¾æ¥" title="15.1.4. åŒæ—¶æ”¯æŒ http httpsçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç”¨httpè¯·æ±‚æ—¶ä¸å†è½¬æ¢æˆhttpsè¯·æ±‚</p><p>åªéœ€è¦å°†ä»£ç ä¸­çš„connector.setSecure(false)ä¸­çš„falseæ”¹æˆtrueå°±å¯ä»¥äº†</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="152-å®¹å™¨åŒ–éƒ¨ç½²">15.2. å®¹å™¨åŒ–éƒ¨ç½²<a href="#152-å®¹å™¨åŒ–éƒ¨ç½²" class="hash-link" aria-label="15.2. å®¹å™¨åŒ–éƒ¨ç½²çš„ç›´æ¥é“¾æ¥" title="15.2. å®¹å™¨åŒ–éƒ¨ç½²çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://rovo98.github.io/posts/39885a36/" target="_blank" rel="noopener noreferrer">https://rovo98.github.io/posts/39885a36/</a> SpringBoot + Docker + Nginx è´Ÿè½½å‡è¡¡å®ç°
TODO</p><p><a href="https://github.com/GoogleContainerTools/jib" target="_blank" rel="noopener noreferrer">https://github.com/GoogleContainerTools/jib</a> ä¸º java ç¨‹åºæ„é€  docker é•œåƒ (<a href="https://www.cnblogs.com/felordcn/p/13201163.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/felordcn/p/13201163.html</a>)</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="153-nginx-åå‘ä»£ç†">15.3. nginx åå‘ä»£ç†<a href="#153-nginx-åå‘ä»£ç†" class="hash-link" aria-label="15.3. nginx åå‘ä»£ç†çš„ç›´æ¥é“¾æ¥" title="15.3. nginx åå‘ä»£ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://cloud.tencent.com/developer/article/1332603" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1332603</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="154-å†…åµŒ-tomcat-è°ƒä¼˜">15.4. å†…åµŒ tomcat è°ƒä¼˜<a href="#154-å†…åµŒ-tomcat-è°ƒä¼˜" class="hash-link" aria-label="15.4. å†…åµŒ tomcat è°ƒä¼˜çš„ç›´æ¥é“¾æ¥" title="15.4. å†…åµŒ tomcat è°ƒä¼˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">compression</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">#SpringBoot é»˜è®¤æ˜¯ä¸å¼€å¯ gzip å‹ç¼©çš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¼€å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">#optional, åœ¨ spring2.0+çš„ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤å€¼å·²ç»æœ‰äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">mime-types</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> application/json</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">application/xml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">text/html</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">text/plain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">text/css</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">application/x</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">javascript</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">#é»˜è®¤æƒ…å†µä¸‹ï¼Œä»…ä¼šå‹ç¼© 2048 å­—èŠ‚ä»¥ä¸Šçš„å†…å®¹, æŒ‡å®šè¶…è¿‡å¤šå°‘å°±å‹ç¼©</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">min-response-size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1024</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">tomcat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># æ’é˜Ÿæ•°, ç­‰å¾…é˜Ÿåˆ—é•¿åº¦ï¼šé˜Ÿåˆ—åšç¼“å†²æ± ç”¨ï¼Œä½†ä¹Ÿä¸èƒ½æ— é™é•¿ï¼Œæ¶ˆè€—å†…å­˜ï¼Œå‡ºå…¥é˜Ÿåˆ—ä¹Ÿè€—cpu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">accept-count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">max-connections</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">10000</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">#æœ€å¤§å¯è¢«è¿æ¥æ•°ï¼Œé»˜è®¤ä¸º10000 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">#æœ€å¤§å·¥ä½œçº¿ç¨‹æ•°, é»˜è®¤ 200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># 4æ ¸8Gå†…å­˜å•è¿›ç¨‹è°ƒåº¦çº¿ç¨‹æ•°800-1000ï¼Œè¶…è¿‡è¿™ä¸ªå¹¶å‘æ•°ä¹‹åï¼Œå°†ä¼šèŠ±è´¹å·¨å¤§çš„æ—¶é—´åœ¨cpuè°ƒåº¦ä¸Šã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">max-threads</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">800</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">min-spare-threads</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">#æœ€å°å·¥ä½œçº¿ç¨‹æ•°, é»˜è®¤ 10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># è¿æ¥è¶…æ—¶ 30s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">connection-timeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># Maximum size, in bytes, of the HTTP message header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">max-http-header-size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># Maximum size, in bytes, of the HTTP post content.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    max</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">post</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡ java code é…ç½®:</p><p>ä¿®æ”¹keepalivetimeoutå’ŒmaxKeepAliveRequestså¼€å¯é•¿è¿æ¥</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">//å½“Springå®¹å™¨å†…æ²¡æœ‰TomcatEmbeddedServletContainerFactoryè¿™ä¸ªbeanæ—¶ï¼Œä¼šå§æ­¤beanåŠ è½½è¿›springå®¹å™¨ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain">  </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebServerConfiguration</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebServerFactoryCustomizer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">ConfigurableWebServerFactory</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">customize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableWebServerFactory</span><span class="token plain"> configurableWebServerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">//ä½¿ç”¨å¯¹åº”å·¥å‚ç±»æä¾›ç»™æˆ‘ä»¬çš„æ¥å£å®šåˆ¶åŒ–æˆ‘ä»¬çš„tomcat connector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatServletWebServerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">configurableWebServerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addConnectorCustomizers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatConnectorCustomizer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">customize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Connector</span><span class="token plain"> connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token class-name" style="color:rgb(38, 127, 153)">Http11NioProtocol</span><span class="token plain"> protocol </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Http11NioProtocol</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getProtocolHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">//å®šåˆ¶åŒ–keepalivetimeout,è®¾ç½®30ç§’å†…æ²¡æœ‰è¯·æ±‚åˆ™æœåŠ¡ç«¯è‡ªåŠ¨æ–­å¼€keepaliveé“¾æ¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                protocol</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setKeepAliveTimeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">30000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">//å½“å®¢æˆ·ç«¯å‘é€è¶…è¿‡10000ä¸ªè¯·æ±‚åˆ™è‡ªåŠ¨æ–­å¼€keepaliveé“¾æ¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                protocol</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setMaxKeepAliveRequests</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">10000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">// è®¾ç½®å…¶ä»–....</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// æˆ–è€…è¿™æ ·é…ç½®, æ•ˆæœç­‰åŒ   </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebServerConfiguration</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableServletWebServerFactory</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">webServerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatServletWebServerFactory</span><span class="token plain"> factory </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatServletWebServerFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        factory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setPort</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">11359</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//ç«¯å£å·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        factory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setUriEncoding</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Charset</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">forName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;utf-8&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//ç¼–ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        factory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">addConnectorCustomizers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyTomcatConnectorCustomizer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> factory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyTomcatConnectorCustomizer</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TomcatConnectorCustomizer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">customize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Connector</span><span class="token plain"> connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">// TODO Auto-generated method stub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Http11NioProtocol</span><span class="token plain"> handler </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Http11NioProtocol</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">connector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getProtocolHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setAcceptCount</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">2000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//æ’é˜Ÿæ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setMaxConnections</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">5000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//æœ€å¤§è¿æ¥æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setMaxThreads</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">2000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setMinSpareThreads</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//æœ€å°çº¿ç¨‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setConnectionTimeout</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">30000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//è¶…æ—¶æ—¶é—´                    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="155-é…ç½®-war-åŒ…éƒ¨ç½²åˆ°-tomcat">15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat<a href="#155-é…ç½®-war-åŒ…éƒ¨ç½²åˆ°-tomcat" class="hash-link" aria-label="15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcatçš„ç›´æ¥é“¾æ¥" title="15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcatçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ServletInitializer</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringBootServletInitializer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">protected</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplicationBuilder</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplicationBuilder</span><span class="token plain"> application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sources</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ComponentScan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">basePackageClasses </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> useDefaultFilters </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ServletContextConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">WebMvcConfigurationSupport</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * é…ç½®servletå¤„ç†</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">configureDefaultServletHandling</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">DefaultServletHandlerConfigurer</span><span class="token plain"> configurer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        configurer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">enable</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ–è€…ç›´æ¥ä¸€æ­¥åˆ°ä½:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SpringbootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Application</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringBootServletInitializer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">protected</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplicationBuilder</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplicationBuilder</span><span class="token plain"> application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sources</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>16. spring boot ä¸­çš„å¹¶å‘</h1><p><a href="https://www.e4developer.com/2018/03/30/introduction-to-concurrency-in-spring-boot/" target="_blank" rel="noopener noreferrer">https://www.e4developer.com/2018/03/30/introduction-to-concurrency-in-spring-boot/</a> //todo
<a href="https://blog.csdn.net/qq_40606397/article/details/104945855" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_40606397/article/details/104945855</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="161-ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹">16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹<a href="#161-ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹" class="hash-link" aria-label="16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥é“¾æ¥" title="16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1611-é…ç½®çº¿ç¨‹æ± ">16.1.1. é…ç½®çº¿ç¨‹æ± <a href="#1611-é…ç½®çº¿ç¨‹æ± " class="hash-link" aria-label="16.1.1. é…ç½®çº¿ç¨‹æ± çš„ç›´æ¥é“¾æ¥" title="16.1.1. é…ç½®çº¿ç¨‹æ± çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// é…ç½®çº¿ç¨‹æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableAsync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncConfiguration</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;doSomethingExecutor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Executor</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">doSomethingExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolTaskExecutor</span><span class="token plain"> executor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolTaskExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ ¸å¿ƒçº¿ç¨‹æ•°ï¼šçº¿ç¨‹æ± åˆ›å»ºæ—¶å€™åˆå§‹åŒ–çš„çº¿ç¨‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setCorePoolSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æœ€å¤§çº¿ç¨‹æ•°ï¼šçº¿ç¨‹æ± æœ€å¤§çš„çº¿ç¨‹æ•°ï¼Œåªæœ‰åœ¨ç¼“å†²é˜Ÿåˆ—æ»¡äº†ä¹‹åæ‰ä¼šç”³è¯·è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°çš„çº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setMaxPoolSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">20</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ç¼“å†²é˜Ÿåˆ—ï¼šç”¨æ¥ç¼“å†²æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setQueueCapacity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">500</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// å…è®¸çº¿ç¨‹çš„ç©ºé—²æ—¶é—´60ç§’ï¼šå½“è¶…è¿‡äº†æ ¸å¿ƒçº¿ç¨‹ä¹‹å¤–çš„çº¿ç¨‹åœ¨ç©ºé—²æ—¶é—´åˆ°è¾¾ä¹‹åä¼šè¢«é”€æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setKeepAliveSeconds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">60</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// çº¿ç¨‹æ± åçš„å‰ç¼€ï¼šè®¾ç½®å¥½äº†ä¹‹åå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å®šä½å¤„ç†ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setThreadNamePrefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do-something-&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ç¼“å†²é˜Ÿåˆ—æ»¡äº†ä¹‹åçš„æ‹’ç»ç­–ç•¥ï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†ï¼ˆä¸€èˆ¬æ˜¯ä¸»çº¿ç¨‹ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setRejectedExecutionHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolExecutor</span><span class="token class-name punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">DiscardPolicy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">initialize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1612-æœ‰è¿”å›å€¼-æ²¡æœ‰è¿”å›å€¼">16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼<a href="#1612-æœ‰è¿”å›å€¼-æ²¡æœ‰è¿”å›å€¼" class="hash-link" aria-label="16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼çš„ç›´æ¥é“¾æ¥" title="16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ä½¿ç”¨ æ²¡æœ‰è¿”å›å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Slf4j</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// æŒ‡å®šä½¿ç”¨beannameä¸ºdoSomethingExecutorçš„çº¿ç¨‹æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Async</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;doSomethingExecutor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">doSomething</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do something, message={}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sleep</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">error</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do something error: &quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncService</span><span class="token plain"> asyncService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GetMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/open/something&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">something</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> count </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(0, 0, 0)">++</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            asyncService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">doSomething</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;index = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;success&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ä½¿ç”¨ æœ‰è¿”å›å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncService</span><span class="token plain"> asyncService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SneakyThrows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ApiOperation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;å¼‚æ­¥ æœ‰è¿”å›å€¼&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@GetMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/open/somethings&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">somethings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> createOrder </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> asyncService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">doSomething1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;create order&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> reduceAccount </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> asyncService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">doSomething2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;reduce account&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> saveLog </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> asyncService</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">doSomething3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;save log&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">allOf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">createOrder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> reduceAccount</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> saveLog</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">join</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è·å–æ¯ä¸ªä»»åŠ¡çš„è¿”å›ç»“æœ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> createOrder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> reduceAccount</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> saveLog</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Slf4j</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Async</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;doSomethingExecutor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">doSomething1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do something1: {}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sleep</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">completedFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do something1: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Async</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;doSomethingExecutor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">doSomething2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do something2: {}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sleep</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">completedFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;; do something2: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Async</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;doSomethingExecutor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">doSomething3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do something3: {}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sleep</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">completedFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;; do something3: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1613-asyncå¤±æ•ˆ">16.1.3. @Asyncå¤±æ•ˆ<a href="#1613-asyncå¤±æ•ˆ" class="hash-link" aria-label="16.1.3. @Asyncå¤±æ•ˆçš„ç›´æ¥é“¾æ¥" title="16.1.3. @Asyncå¤±æ•ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>å¼‚æ­¥æ–¹æ³•ä½¿ç”¨staticå…³é”®è¯ä¿®é¥°</li><li>å¼‚æ­¥ç±»ä¸æ˜¯ä¸€ä¸ªSpringå®¹å™¨çš„beanï¼ˆä¸€èˆ¬ä½¿ç”¨æ³¨è§£@Componentå’Œ@Serviceï¼Œå¹¶ä¸”èƒ½è¢«Springæ‰«æåˆ°ï¼‰ï¼›</li><li>SpringBootåº”ç”¨ä¸­æ²¡æœ‰æ·»åŠ @EnableAsyncæ³¨è§£ï¼›</li><li>åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œä¸€ä¸ªæ–¹æ³•è°ƒç”¨å¦å¤–ä¸€ä¸ªæœ‰@Asyncæ³¨è§£çš„æ–¹æ³•ï¼Œæ³¨è§£ä¸ä¼šç”Ÿæ•ˆã€‚åŸå› æ˜¯@Asyncæ³¨è§£çš„æ–¹æ³•ï¼Œæ˜¯åœ¨ä»£ç†ç±»ä¸­æ‰§è¡Œçš„ã€‚</li></ul><blockquote><p>å¼‚æ­¥æ–¹æ³•ä½¿ç”¨æ³¨è§£@Asyncçš„è¿”å›å€¼åªèƒ½ä¸ºvoidæˆ–è€…FutureåŠå…¶å­ç±»ï¼Œå½“è¿”å›ç»“æœä¸ºå…¶ä»–ç±»å‹æ—¶ï¼Œæ–¹æ³•è¿˜æ˜¯ä¼šå¼‚æ­¥æ‰§è¡Œï¼Œä½†æ˜¯è¿”å›å€¼éƒ½æ˜¯null</p></blockquote><h1>17. å®ç°ä¹è§‚é”æ‚²è§‚é”</h1><p><a href="https://www.cnblogs.com/cloudfloating/p/11461530.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/cloudfloating/p/11461530.html</a> </p><p>TODO</p><h1>18. ç§»åŠ¨ç«¯æ¶ˆæ¯æ¨é€</h1><p><a href="https://juejin.im/post/6844903838495801357" target="_blank" rel="noopener noreferrer">https://juejin.im/post/6844903838495801357</a>
<a href="https://crossoverjie.top/2018/09/25/netty/million-sms-push/" target="_blank" rel="noopener noreferrer">https://crossoverjie.top/2018/09/25/netty/million-sms-push/</a>
<a href="https://juejin.im/post/6844903478200909837" target="_blank" rel="noopener noreferrer">https://juejin.im/post/6844903478200909837</a>
TODO</p><h1>19. å³æ—¶é€šä¿¡ IMç³»ç»Ÿ</h1><p><a href="https://github.com/tywo45" target="_blank" rel="noopener noreferrer">https://github.com/tywo45</a></p><h1>20. è¾…åŠ©å·¥å…·</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="201-lombok-notice">20.1. lombok notice<a href="#201-lombok-notice" class="hash-link" aria-label="20.1. lombok noticeçš„ç›´æ¥é“¾æ¥" title="20.1. lombok noticeçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><p>@data &lt;=&gt; @Setterã€@Getterã€@RequiredArgsConstructorã€@ToStringã€@EqualsAndHashCode, </p><p>  è‹¥å­˜åœ¨ç»§æ‰¿, éœ€è¦ä¸º son æŒ‡å®š @EqualsAndHashCode(callSuper = true)</p><p>  @RequiredArgsConstructor è¡¨ç¤ºä¸ºä¸å¯å˜ field ç”Ÿæˆ constructor, ä¹Ÿå°±æ˜¯ä¸º final çš„æˆå‘˜æˆ–è€…@notnullæˆå‘˜ç”Ÿæˆ constructor, å…¶ä»–æ™®é€šçš„ field ä¸ä¼šä½œä¸ºæ„é€ å‚æ•°,</p><p>  @RequiredArgsConstructor(staticName=&quot;of&quot;),  staticname=of è¡¨ç¤ºè¿™ä¸ªç±»ä¸èƒ½ç”¨æ„é€ æ–¹æ³•æ„é€ å‡ºæ¥ï¼Œå¿…é¡»é€šè¿‡ XxxClass.of(...)æ–¹æ³•æ‰èƒ½æ„é€ å‡ºæ¥</p></li><li><p>æ¨èé€šç”¨çš„ç»„åˆæ˜¯ @data, @all... , @no...</p></li><li><p>å’Œ Java8 é…åˆè‰¯å¥½, jdkå‡çº§å¾ˆéº»çƒ¦, éœ€è¦ delombok</p></li><li><p>@builder æ„é€ å¯¹è±¡æ—¶åº•å±‚ç”¨çš„æ˜¯å…¨å‚æ•°æ„é€ å™¨, éœ€è¦ @AllArgsConstructorä¸€èµ·ç”¨, æ— æ³•å•ç‹¬ä½¿ç”¨, è‹¥æœä¸€å®šè¦ç”¨, å¥½çš„ç»„åˆæ˜¯ @NoArgsConstructor @AllArgsConstructor @Builder @Data</p><ul><li>æ¨èä½¿ç”¨ @accesssor(chain=true)</li></ul></li><li><p>ä»£æ›¿@AutoWiredæ³¨è§£: @RequiredArgsConstructor(onConstructor =@__(@Autowired))æ ‡æ³¨åœ¨ç±»ä¸Š, é‚£ä¹ˆæ³¨å…¥æˆå‘˜çš„æ—¶å€™, å¯ä»¥çœæ‰ @autowired æ³¨è§£</p></li><li><p>æ›¿ä»£@tostringæ³¨è§£ å¯ä»¥ä½¿ç”¨ lang3 çš„ <code>ToStringBuilder.reflectionToString(this)</code></p></li><li><p>@value, æ ‡æ³¨ä¸ºä¸å¯å˜ç±» (final class, private final fields, only getter, no setter, all args contructor)</p><ul><li>ä½¿ç”¨æ—¶, ç±»çš„ field å¯ä»¥ä¸å¸¦ä»»ä½•ä¿®é¥°ç¬¦, ä¼šè‡ªåŠ¨è¢«åŠ ä¸Š private final</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†">ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†<a href="#ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†" class="hash-link" aria-label="ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†çš„ç›´æ¥é“¾æ¥" title="ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://www.cnblogs.com/exmyth/p/11396503.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/exmyth/p/11396503.html</a></p><p><a href="https://blog.csdn.net/Chinajash/article/details/1471081" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/Chinajash/article/details/1471081</a></p><p><a href="https://www.baeldung.com/java-annotation-processing-builder" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/java-annotation-processing-builder</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="202-devtools">20.2. devtools<a href="#202-devtools" class="hash-link" aria-label="20.2. devtoolsçš„ç›´æ¥é“¾æ¥" title="20.2. devtoolsçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¼€å‘è€…ç»„ä»¶, ä¿®æ”¹äº† thymeleaf å, é‡æ–°ç¼–è¯‘ä¿®æ”¹çš„æ–‡ä»¶, é¡µé¢å³å¯æ›´æ–°, ä¸å¿…é‡å¯æ•´ä¸ª app, ä½†æ˜¯è‹¥ä¿®æ”¹äº† Java config , è¿˜æ˜¯è¦é‡å¯</p><div class="language-props codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-props codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">spring.thymeleaf.cache=true</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring.devtools.restart.enabled=true</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">... additional-paths=src/main/java // ç›‘å¬ç›®å½•  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="203-maven-wrapper">20.3. maven wrapper<a href="#203-maven-wrapper" class="hash-link" aria-label="20.3. maven wrapperçš„ç›´æ¥é“¾æ¥" title="20.3. maven wrapperçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>wrapperï¼šmavençš„åŒ…è£…å™¨ï¼Œé€šè¿‡mvnwå‘½ä»¤æ›¿ä»£mvnï¼Œç®€åŒ–mvnæ“ä½œ, ä¸éœ€è¦åœ¨æ“ä½œç³»ç»Ÿä¸Šå®‰è£…Maven</p><p>å—åˆ° gradle wrappe å¯å‘</p><p>/.mvn/wrapper/maven-wrapper.jar æ˜¯å…¶ä¸»ä½“ç¨‹åº</p><p>/.mvn/wrapper/maven-wrapper.properties å¯æŒ‡å®š maven ç‰ˆæœ¬åŠä¸‹è½½è·¯å¾„</p><p>mvnw, mvnw.cmd å‘½ä»¤è¡Œç¨‹åº</p><p>mvnwç¬¬ä¸€æ¬¡è¿è¡Œä¼šæ£€æµ‹$USER_HOME/.m2/wrapper/dists ç›®å½•ä¸‹æ˜¯å¦æœ‰maven-wrapper.propertiesä¸­æŒ‡å®šçš„Mavenç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰å°±è‡ªåŠ¨ä¸‹è½½</p><h1>21. æ ¡éªŒ</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="211-æ ¡éªŒé…ç½®æ–‡ä»¶">21.1. æ ¡éªŒé…ç½®æ–‡ä»¶<a href="#211-æ ¡éªŒé…ç½®æ–‡ä»¶" class="hash-link" aria-label="21.1. æ ¡éªŒé…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="21.1. æ ¡éªŒé…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä»»ä½•æ·»åŠ @ConfigurationPropertiesçš„ç±»ï¼Œclassä¸ŠåŠ  <code>@Validated</code> annotation, appéƒ½ä¼šè¿›è¡Œå±æ€§æ ¡éªŒ, ç¡®ä¿å¼•å…¥äº† JSR-303 javax.validation è§„èŒƒçš„å®ç°;
ä½¿ç”¨æ ¡éªŒè§„èŒƒJSR-303 javax.validationä¸­çš„æ³¨è§£å³å¯å®ç°æ ¡éªŒï¼ˆä»‹ç»è§è¿™é‡Œ<a href="https://www.ibm.com/developerworks/cn/java/j-lo-jsr303/%EF%BC%89" target="_blank" rel="noopener noreferrer">https://www.ibm.com/developerworks/cn/java/j-lo-jsr303/ï¼‰</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;connection&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Validated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FooProperties</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@NotNull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InetAddress</span><span class="token plain"> remoteAddress</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Valid</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// è¿™é‡Œæ˜¯ä¸ºäº†æ¿€æ´» Securityç±»ä¸­çš„æ³¨è§£æ ¡éªŒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Security</span><span class="token plain"> security </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Security</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// ... getters and setters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Security</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@NotEmpty</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ... getters and setters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>@Validated ä¹Ÿå¯ä»¥å¯ä»¥åŠ åˆ° @Bean æ–¹æ³•ä¸Š æ¥è§¦å‘æ ¡éªŒ;</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šçš„Spring Validatorï¼Œbean idæ˜¯ configurationPropertiesValidator å³å¯</p><p>spring-boot-actuator æ¨¡å—æœ‰ä¸€ä¸ªç«¯ç‚¹ï¼Œå¯¹å¤–æš´éœ²äº†æ‰€æœ‰çš„ @ConfigurationProperties beansã€‚æµè§ˆå™¨ä¸­è®¿é—® /configprops å³å¯</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="212-æ ¡éªŒè¯·æ±‚å‚æ•°">21.2. æ ¡éªŒè¯·æ±‚å‚æ•°<a href="#212-æ ¡éªŒè¯·æ±‚å‚æ•°" class="hash-link" aria-label="21.2. æ ¡éªŒè¯·æ±‚å‚æ•°çš„ç›´æ¥é“¾æ¥" title="21.2. æ ¡éªŒè¯·æ±‚å‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://blog.csdn.net/mzh_cn/article/details/80637015" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/mzh_cn/article/details/80637015</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="213-è‡ªå®šä¹‰æ ¡éªŒ">21.3. è‡ªå®šä¹‰æ ¡éªŒ<a href="#213-è‡ªå®šä¹‰æ ¡éªŒ" class="hash-link" aria-label="21.3. è‡ªå®šä¹‰æ ¡éªŒçš„ç›´æ¥é“¾æ¥" title="21.3. è‡ªå®šä¹‰æ ¡éªŒçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="214-validatedå’Œvalid">21.4. @Validatedå’Œ@Valid<a href="#214-validatedå’Œvalid" class="hash-link" aria-label="21.4. @Validatedå’Œ@Validçš„ç›´æ¥é“¾æ¥" title="21.4. @Validatedå’Œ@Validçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>@Validæ˜¯ JSR-303 è§„èŒƒ, hibernate-validationå®ç°äº†è¿™ä¸€è§„èŒƒ</p><p>@Validatedæ¥è‡ªäºspring, æ˜¯ spring å¯¹äº @Valid çš„å®ç°, æä¾›&quot;validation groups&quot;åŠŸèƒ½(åˆ›å»ºç©ºæ¥å£ä½œä¸ºåˆ†ç»„), validåˆ™ä¸å…·å¤‡;(<a href="https://stackoverflow.com/questions/36173332/difference-between-valid-and-validated-in-spring" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/36173332/difference-between-valid-and-validated-in-spring</a>) , ä¸€æ—¦controler ä¸­ä½¿ç”¨ @Validated(group={...}), é‚£ä¹ˆå®ä½“ç±»å­—æ®µä¸Šçš„æ³¨è§£è‹¥æŒ‡å®š group åˆ™çº¦æŸç”Ÿæ•ˆ, ä¸æŒ‡å®šåˆ†ç»„çš„ä¸ç”Ÿæ•ˆ. åä¹‹, è‹¥ @validated æ²¡æœ‰æŒ‡å®šåˆ†ç»„, åˆ™ å®ä½“ç±»å­—æ®µæŒ‡å®šäº† group çš„ä¸ç”Ÿæ•ˆ, ä¸æŒ‡å®šgroup çš„å­—æ®µç”Ÿæ•ˆ</p><h1>22. runner è·å–å‘½ä»¤è¡Œå‚æ•°</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="221-è·å–å‘½ä»¤è¡Œå‚æ•°">22.1. è·å–å‘½ä»¤è¡Œå‚æ•°<a href="#221-è·å–å‘½ä»¤è¡Œå‚æ•°" class="hash-link" aria-label="22.1. è·å–å‘½ä»¤è¡Œå‚æ•°çš„ç›´æ¥é“¾æ¥" title="22.1. è·å–å‘½ä»¤è¡Œå‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ³¨å…¥ä¸€ä¸ª<code>org.springframework.boot.ApplicationArguments </code>bean</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyBean</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyBean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationArguments</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> debug </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">containsOption</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;debug&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">//optionå‚æ•°å³â€œ--â€å¼€å¤´çš„å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> files </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getNonOptionArgs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// if run with &quot;--debug logfile.txt&quot; é‚£ä¹ˆç»“æœæ˜¯ debug=true, files=[&quot;logfile.txt&quot;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦å¤–çš„æ³¨å…¥æ–¹æ³•:</p><p>Spring Boot will also register a <code>CommandLinePropertySource</code> with the Spring <code>Environment</code>. This allows you to also inject single application arguments using the <code>@Value</code> annotation.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="222-applicationrunner-or-commandlinerunner">22.2. <code>ApplicationRunner</code> or <code>CommandLineRunner</code><a href="#222-applicationrunner-or-commandlinerunner" class="hash-link" aria-label="222-applicationrunner-or-commandlinerunnerçš„ç›´æ¥é“¾æ¥" title="222-applicationrunner-or-commandlinerunnerçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>ApplicationRunner</code> or <code>CommandLineRunner</code>æ¥å£éƒ½æœ‰run()å¾…å®ç°(åœ¨SpringApplication.run(â€¦â€‹)å®Œæˆä¹‹å‰è°ƒç”¨)ä½†æ˜¯å‚æ•°ä¸åŒ, å…·ä½“å¦‚ä¸‹:</p><ul><li><p>ApplicationRunneræ¥å£, <code>void run(ApplicationArguments args)</code></p></li><li><p>CommandLineRunneræ¥å£, <code>void run(String... args)</code></p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyBean</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CommandLineRunner</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token comment" style="color:rgb(0, 128, 0)">//å¯ä»¥è·å–å‘½ä»¤è¡Œå‚æ•°, ä½œä¸ºString[]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è¿™é‡Œçš„å†…å®¹ä¼šåœ¨appå®Œå…¨å¯åŠ¨å‰æœ€åä¸€æ­¥æ‰§è¡Œ, å³SpringApplication.run(â€¦â€‹)å®Œæˆä¹‹å‰, ä¹Ÿä¼šåœ¨ApplicationReadyEventä¹‹å‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// å¦ä¸€ç§æ–¹æ³•:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//java -jar commandline-app-0.0.1-SNAPSHOT.jar iamnonoption --app.name=CmdRulez --app.hosts=abc,def,ghi --app.name=2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationRunner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ApplicationArguments</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è·å–é --xxx=yyy çš„å‚æ•°é›†åˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;# NonOptionArgs: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getNonOptionArgs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;NonOptionArgs:&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getNonOptionArgs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">forEach</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token operator" style="color:rgb(0, 0, 0)">::</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è·å– --xxx=yy çš„å‚æ•°ä¸­çš„ key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;# OptionArgs: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getOptionNames</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">size</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;OptionArgs:&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getOptionNames</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">forEach</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">optionName </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">optionName </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getOptionValues</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">optionName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// è·å– value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœæœ‰å¤šä¸ªCommandLineRunner or ApplicationRunner beans è¢«å®šä¹‰, è¿™æ—¶å€™æ¶‰åŠåˆ°è°ƒç”¨æ•°åºé—®é¢˜, ä¸¤ç§æ–¹å¼:</p><ul><li><p>å®ç°<code>org.springframework.core.Ordered</code>æ¥å£</p></li><li><p>ä½¿ç”¨<code>org.springframework.core.annotation.Order</code>æ³¨è§£ eg: @Order(num), numä¸ºInt, 0ä¼˜å…ˆçº§æœ€é«˜</p></li></ul><h1>23. å¼€å‘å‘½ä»¤è¡Œåº”ç”¨</h1><p>åŠ å…¥å¼€å‘ä¸€ä¸ªå·¥å…· ab.jar, å¸Œæœ›è¿™ä¹ˆä½¿ç”¨:</p><ul><li>java -jar ab.jar ä½¿ç”¨æç¤º</li><li>java -jar ab.jar  --spring.profiles.active=hello-world,receiver æ¿€æ´»ä¸åŒçš„ profile</li></ul><p>é…ç½®ä¸­æŒ‡å®šä¸€ä¸ªé»˜è®¤ æ¿€æ´» profile</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token literal-property property">spring</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token literal-property property">profiles</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token literal-property property">active</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> usage_message</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// å·¥å…·ä½¿ç”¨æç¤º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Profile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;usage_message&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CommandLineRunner</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">usage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">&quot;</span><span class="token class-name" style="color:rgb(38, 127, 153)">This</span><span class="token plain"> app </span><span class="token keyword" style="color:rgb(0, 0, 255)">uses</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Spring</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Profiles</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token namespace">control</span><span class="token plain"> its behavior</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">\n&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">&quot;</span><span class="token class-name" style="color:rgb(38, 127, 153)">Sample</span><span class="token plain"> usage</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> java </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">jar</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            rabbit</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">tutorials</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">jar</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token operator" style="color:rgb(0, 0, 0)">--</span><span class="token plain">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">profiles</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">active</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">hello</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">world</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">sender&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// è‹¥å‡ºä¼ é€’äº†å‚æ•°, åˆ™ usage_message å°±è¢«è¦†ç›–, è¿™ä¸ª bean è¢«æ³¨å†Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Profile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;!usage_message&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CommandLineRunner</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">tutorial</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RabbitAmqpTutorialsRunner</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¼ é€’ä¸åŒçš„å‚æ•°, ä¸åŒçš„ profile ä¼šæ¿€æ´»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Profile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;receiver&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Tut1Receiver</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">receiver</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Tut1Receiver</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Profile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;sender&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Tut1Sender</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sender</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Tut1Sender</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// å…·ä½“æ“ä½œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RabbitAmqpTutorialsRunner</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CommandLineRunner</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;${tutorial.client.duration:0}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> duration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> arg0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Ready ... running for &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> duration </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ms&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sleep</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">duration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        ctx</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">close</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>24. æ•´åˆ grpc</h1><p><a href="https://github.com/ChinaSilence/spring-boot-starter-grpc" target="_blank" rel="noopener noreferrer">https://github.com/ChinaSilence/spring-boot-starter-grpc</a></p><h1>25. ä»»åŠ¡è°ƒåº¦</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="251-æ•´åˆ-xxl-job-ä»»åŠ¡è°ƒåº¦å¹³å°">25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°<a href="#251-æ•´åˆ-xxl-job-ä»»åŠ¡è°ƒåº¦å¹³å°" class="hash-link" aria-label="25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°çš„ç›´æ¥é“¾æ¥" title="25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.tianheyu.top/archives/springboot-xxl-job-executor" target="_blank" rel="noopener noreferrer">https://www.tianheyu.top/archives/springboot-xxl-job-executor</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="252-å¼‚æ­¥ä»»åŠ¡">25.2. å¼‚æ­¥ä»»åŠ¡<a href="#252-å¼‚æ­¥ä»»åŠ¡" class="hash-link" aria-label="25.2. å¼‚æ­¥ä»»åŠ¡çš„ç›´æ¥é“¾æ¥" title="25.2. å¼‚æ­¥ä»»åŠ¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@EnableAsync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncConfigurer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Executor</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getAsyncExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolTaskExecutor</span><span class="token plain"> taskExecutor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolTaskExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//æ ¸å¿ƒçº¿ç¨‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        taskExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setCorePoolSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//æœ€å¤§çº¿ç¨‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        taskExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setMaxPoolSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">16</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//é˜Ÿåˆ—å¤§å°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        taskExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setQueueCapacity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// å½“æœ€å¤§æ± å·²æ»¡æ—¶,æ­¤ç­–ç•¥ä¸ºæˆ‘ä»¬æä¾›å¯ä¼¸ç¼©é˜Ÿåˆ—ï¼Œæ­¤ç­–ç•¥ä¿è¯ä¸ä¼šä¸¢å¤±ä»»åŠ¡è¯·æ±‚ï¼Œä½†æ˜¯å¯èƒ½ä¼šå½±å“åº”ç”¨ç¨‹åºæ•´ä½“æ€§èƒ½ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setRejectedExecutionHandler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolExecutor</span><span class="token class-name punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token class-name" style="color:rgb(38, 127, 153)">CallerRunsPolicy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setThreadNamePrefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;My ThreadPoolTaskExecutor-&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        taskExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">initialize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> taskExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">FutureService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//åœ¨éœ€è¦æ‰§è¡Œçš„æ–¹æ³•ä¸ŠåŠ @Asyncè¡¨æ˜è¯¥æ–¹æ³•æ˜¯ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå¦‚æœåŠ åœ¨ç±»çº§åˆ«ä¸Šï¼Œåˆ™è¡¨æ˜ç±»æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯å¼‚æ­¥æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Async</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Future</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">futureTest</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ä»»åŠ¡æ‰§è¡Œå¼€å§‹,éœ€è¦ï¼š1000ms&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(0, 0, 0)">++</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sleep</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;do:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;å®Œæˆä»»åŠ¡&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AsyncResult</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">currentThread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Async</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">completableFutureTask</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> start</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ‰“å°æ—¥å¿—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">warn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">currentThread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getName</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;start this task!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ‰¾åˆ°ç‰¹å®šå­—ç¬¦/å­—ç¬¦ä¸²å¼€å¤´çš„ç”µå½±</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> results </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            movies</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">stream</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">filter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">movie </span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token plain"> movie</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">startsWith</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">start</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">collect</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Collectors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toList</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ¨¡æ‹Ÿè¿™æ˜¯ä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">Thread</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">sleep</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1000L</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">printStackTrace</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//è¿”å›ä¸€ä¸ªå·²ç»ç”¨ç»™å®šå€¼å®Œæˆçš„æ–°çš„CompletableFutureã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">CompletableFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">completedFuture</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">results</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="253-å®šæ—¶ä»»åŠ¡">25.3. å®šæ—¶ä»»åŠ¡<a href="#253-å®šæ—¶ä»»åŠ¡" class="hash-link" aria-label="25.3. å®šæ—¶ä»»åŠ¡çš„ç›´æ¥é“¾æ¥" title="25.3. å®šæ—¶ä»»åŠ¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2531-springboot-å†…ç½®">25.3.1. springboot å†…ç½®<a href="#2531-springboot-å†…ç½®" class="hash-link" aria-label="25.3.1. springboot å†…ç½®çš„ç›´æ¥é“¾æ¥" title="25.3.1. springboot å†…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>SpringBootä¸ºæˆ‘ä»¬å†…ç½®äº†@Scheduledå®šæ—¶ä»»åŠ¡ (spring task), @EnableScheduling å¼€å¯</p><p>@Scheduledæ³¨è§£å„å‚æ•°è¯¦è§£: (<a href="https://www.jianshu.com/p/1defb0f22ed1" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/1defb0f22ed1</a>)</p><ul><li>cron</li><li>zone</li><li>fixedDelay ä¸Šæ¬¡å®Œæ¯•åˆ°ä¸‹æ¬¡å¼€å§‹(ms)</li><li>fixedDelayString=&quot;${time.fixedDelay}&quot; åŒä¸Š</li><li>fixedRate ä¸Šæ¬¡å¼€å§‹åˆ°ä¸‹æ¬¡å¼€å§‹</li><li>initialDelay é¦–æ¬¡å»¶è¿Ÿ</li></ul><p>è‡ªå®šä¹‰çº¿ç¨‹æ± :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//é»˜è®¤æƒ…å†µä¸‹ï¼Œ@Scheduledä»»åŠ¡éƒ½åœ¨Springåˆ›å»ºçš„å¤§å°ä¸º1çš„é»˜è®¤çº¿ç¨‹æ± ä¸­æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SchedulerConfig</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SchedulingConfigurer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> POOL_SIZE </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">configureTasks</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">ScheduledTaskRegistrar</span><span class="token plain"> scheduledTaskRegistrar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolTaskScheduler</span><span class="token plain"> threadPoolTaskScheduler </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ThreadPoolTaskScheduler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        threadPoolTaskScheduler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setPoolSize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">POOL_SIZE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        threadPoolTaskScheduler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setThreadNamePrefix</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;my-scheduled-task-pool-&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        threadPoolTaskScheduler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">initialize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        scheduledTaskRegistrar</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setTaskScheduler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">threadPoolTaskScheduler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2532-é›†æˆ-quartz">25.3.2. é›†æˆ Quartz<a href="#2532-é›†æˆ-quartz" class="hash-link" aria-label="25.3.2. é›†æˆ Quartzçš„ç›´æ¥é“¾æ¥" title="25.3.2. é›†æˆ Quartzçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h1>26. é…ç½®æ–‡ä»¶ and ç¯å¢ƒ</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="261-è¯»å–é…ç½®æ–‡ä»¶">26.1. è¯»å–é…ç½®æ–‡ä»¶<a href="#261-è¯»å–é…ç½®æ–‡ä»¶" class="hash-link" aria-label="26.1. è¯»å–é…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="26.1. è¯»å–é…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2611-å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•">26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•<a href="#2611-å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•" class="hash-link" aria-label="26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•çš„ç›´æ¥é“¾æ¥" title="26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><p>ä½¿ç”¨ @Value(&quot;${property}&quot;) è¯»å–æ¯”è¾ƒç®€å•çš„é…ç½®ä¿¡æ¯</p></li><li><p>é€šè¿‡@ConfigurationProperties(prefix = &quot;library&quot;)è¯»å–å¹¶ä¸ bean ç»‘å®š, éœ€è¦ åŠ  @component(æ­¤æ—¶æ— éœ€åœ¨é…ç½®ç±»ä¸Šæ·»åŠ  @EnableConfigurationProperties), è‹¥ä¸ç”¨ @component, åˆ™å¿…é¡» åœ¨ä»»æ„ä¸€ä¸ªé…ç½®ç±»ä¸Šæ·»åŠ  @EnableConfigurationProperties(...)</p></li><li><p>@ConfigurationProperties é…åˆ @bean ç”¨åœ¨æ–¹æ³•ä¸Š, æ–¹æ³•è°ƒç”¨ç©ºæ„é€ å‡½æ•°è¿”å›æƒ³è¦æ„é€ çš„å¯¹è±¡</p></li><li><p>@PropertySource(&quot;classpath:website.properties&quot;) è¯»å–æŒ‡å®š properties æ–‡ä»¶</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2612-æ³¨å…¥å¤æ‚ç±»å‹">26.1.2. æ³¨å…¥å¤æ‚ç±»å‹<a href="#2612-æ³¨å…¥å¤æ‚ç±»å‹" class="hash-link" aria-label="26.1.2. æ³¨å…¥å¤æ‚ç±»å‹çš„ç›´æ¥é“¾æ¥" title="26.1.2. æ³¨å…¥å¤æ‚ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯¹äº properties æ ¼å¼çš„é…ç½®æ–‡ä»¶:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain"># application</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">properties</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#å•ä¸ªå€¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">val</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">list</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#</span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">map</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;name&#x27;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;chen&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;age&#x27;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;12&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;sex&#x27;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token char" style="color:rgb(129, 31, 63)">&#x27;ç”·&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#java</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ç”¨åˆ°äº†spelè¡¨è¾¾å¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@PropertySource</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;classpath:xxx&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigProps</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//å•ä¸ªæ•°å€¼ï¼Œå¯æ³¨å…¥ä¸ºintæˆ–String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;${val}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//array æ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;#{&#x27;${ips}&#x27;.split(&#x27;,&#x27;)}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> iplist</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">//map</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Value</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;#{${map}}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹äº yml æ ¼å¼çš„æ–‡ä»¶:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">custom</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  ignored</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">token</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">path</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">base</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">xx</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">login</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">xx</span><span class="token comment" style="color:rgb(0, 128, 0)">/**/</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">xx</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">hfc</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">test</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ç„¶å’Œé…ç½®æ¥å—ç±»</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Configuration</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// ä¹Ÿå¯ä»¥ç”¨ @component, è‹¥æœä¸æƒ³ç”¨è¿™ç±»æ³¨è§£, å¯ä»¥å»æ‰, å–è€Œä»£ä¹‹åœ¨å¯åŠ¨ç±»ä¸Šæ ‡æ³¨ @enableConfigProperties(xxx.class), ç›¸å½“äºåŠ äº† @Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;custom&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Custom</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> ignoredTokenPath</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">custom</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  mail</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    username</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> xxx</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@xxx.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    password</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> axxx</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  mail</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    username</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> xxx</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@xxx.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    password</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> axxx</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;custom&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Custom</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">MailInfo</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> mail</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MailInfo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">directory</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  maps</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">11</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">dciZhongShan</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">resourceWarn</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">agricultureLand</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@ConfigurationProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">prefix </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;directory&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MapConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Map</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Integer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> maps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="262-é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§">26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§<a href="#262-é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§" class="hash-link" aria-label="26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§çš„ç›´æ¥é“¾æ¥" title="26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é…ç½®æ–‡ä»¶åŠ è½½ä¼˜å…ˆçº§: å‘½ä»¤è¡Œ &gt; ${user.dir}/config/xxx &gt; ${user.dir}/xxx (usr.dir å³ä¸ºå‘½ä»¤æ‰§è¡Œçš„å½“å‰ç›®å½•) &gt; classpath:config/xxx &gt; classpath:xxx</p><p>--spring.profiles.active=prod,,,, --spring.config.location=target/application.properties</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="263-è¯»å–ç¯å¢ƒä¿¡æ¯">26.3. è¯»å–ç¯å¢ƒä¿¡æ¯<a href="#263-è¯»å–ç¯å¢ƒä¿¡æ¯" class="hash-link" aria-label="26.3. è¯»å–ç¯å¢ƒä¿¡æ¯çš„ç›´æ¥é“¾æ¥" title="26.3. è¯»å–ç¯å¢ƒä¿¡æ¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> * @author xiaoyu</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> * date: 2020/3/21</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringbootDemoApp</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * springbootåœ¨å¯åŠ¨çš„æ—¶å€™éœ€è¦æ£€æµ‹å½“å‰é¡¹ç›®æ˜¯å¦æ˜¯ä¸€ä¸ªwebé¡¹ç›®ï¼Œ</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * æ£€æµ‹æ–¹å¼ä¸ºåˆ¤æ–­classpathä¸­æ˜¯å¦æœ‰ä»¥ä¸‹finalå˜é‡ä¸­å®šä¹‰çš„ä¸¤ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> WEB_ENVIRONMENT_CLASSES </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;javax.servlet.Servlet&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;org.springframework.web.context.ConfigurableWebApplicationContext&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">main</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableApplicationContext</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringApplication</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SpringbootDemoApp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ConfigurableEnvironment</span><span class="token plain">        env     </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getEnvironment</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> activeProfiles </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> env</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getActiveProfiles</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain">   port           </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> env</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;server.port&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;==============================&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;active profiles: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Arrays</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toString</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">activeProfiles</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;local uri: http://localhost:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;local area network uri: http://&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">localAreaNetwork</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">println</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;==============================&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">localAreaNetwork</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">InetAddress</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getLocalHost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getHostAddress</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">UnknownHostException</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            e</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">printStackTrace</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;get local area network error&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">deduceWebEnv</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//https://blog.csdn.net/txba6868/article/details/80732475</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">DemoController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">/**</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     * file upload æ–‡ä»¶ä¸Šä¼ </span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@RequestMapping</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/upload&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">RequestMethod</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">POST</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">String</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">upload</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartHttpServletRequest</span><span class="token plain"> req </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartHttpServletRequest</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartFile</span><span class="token plain"> aa </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;aa&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">MultipartFile</span><span class="token plain"> bb </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;bb&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        aa</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">transferTo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Paths</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">System</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;user.home&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/tmp&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">toFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseEntity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">ok</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ok&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="264-ä¸¤ç§å¼•å…¥-springboot-æ–¹å¼">26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼<a href="#264-ä¸¤ç§å¼•å…¥-springboot-æ–¹å¼" class="hash-link" aria-label="26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼çš„ç›´æ¥é“¾æ¥" title="26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸€ç§æ˜¯é€šè¿‡ è®¾ç½® parent ä¸º spring boot starter parent</p><p>ä¸€ç§æ˜¯é€šè¿‡ dependencyManagement åŠ å…¥ spring boot dependencies (éœ€è¦ è®¾ç½® maven  properties, <code>maven.compiler.source</code> å’Œ <code>maven.compiler.target</code> é˜²æ­¢ç¼–è¯‘ä½¿ç”¨ jdk 1.5)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">project</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://maven.apache.org/POM/4.0.0</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">         </span><span class="token tag attr-name namespace" style="color:rgb(255, 0, 0)">xmlns:</span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag" style="color:rgb(128, 0, 0)"></span><br></span><span class="token-line" style="color:#000000"><span class="token tag" style="color:rgb(128, 0, 0)">         </span><span class="token tag attr-name namespace" style="color:rgb(255, 0, 0)">xsi:</span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">modelVersion</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">4.0.0</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">modelVersion</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--    &lt;parent&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--        &lt;version&gt;&lt;/version&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--        &lt;relativePath/&gt; &amp;lt;!&amp;ndash; lookup parent from repository &amp;ndash;&amp;gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--    &lt;/parent&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">io.github.xiaoyureed</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">shopee</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">0.0.1-SNAPSHOT</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">packaging</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">packaging</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">description</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">èšåˆæœåŠ¡</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">description</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">properties</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">java.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">1.8</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">java.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">maven.compiler.source</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${java.version}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">maven.compiler.source</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">maven.compiler.target</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${java.version}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">maven.compiler.target</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">project.build.sourceEncoding</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">UTF-8</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">project.build.sourceEncoding</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">project.reporting.outputEncoding</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">UTF-8</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">project.reporting.outputEncoding</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">spring-boot.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">2.3.4.RELEASE</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">spring-boot.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">spring-cloud.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">Hoxton.SR8</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">spring-cloud.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">spring-cloud-alibaba.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">2.2.1.RELEASE</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">spring-cloud-alibaba.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">aliyun-spring-boot.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">1.0.0</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">aliyun-spring-boot.version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">properties</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencyManagement</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${spring-boot.version}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.cloud</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-cloud-dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${spring-cloud.version}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.alibaba.cloud</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-cloud-alibaba-dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${spring-cloud-alibaba.version}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.alibaba.cloud</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">aliyun-spring-boot-dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">${aliyun-spring-boot.version}</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">scope</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.baomidou</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">mybatis-plus-boot-starter</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">3.4.0</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">mysql</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">mysql-connector-java</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">8.0.21</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.elasticsearch.client</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">elasticsearch-rest-high-level-client</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">7.9.2</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--            ä»£ç ç”Ÿæˆ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">com.baomidou</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">mybatis-plus-generator</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">3.4.0</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- https://mvnrepository.com/artifact/org.apache.velocity/velocity-engine-core --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.apache.velocity</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">velocity-engine-core</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">2.2</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--            common module need this--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.apache.httpcomponents</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">httpcore</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">4.4.13</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.apache.commons</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">commons-lang3</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">3.11</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">version</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencyManagement</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.projectlombok</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">lombok</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">optional</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">optional</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependency</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">dependencies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">project</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨è¿™ç§æ–¹å¼ spring boot maven plugin å¯èƒ½å¤±æ•ˆ, éœ€è¦æ‰‹åŠ¨é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">groupId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">spring-boot-maven-plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">artifactId</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">executions</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">execution</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">phase</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">package</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">phase</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">goals</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">goal</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">repackage</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">goal</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">goals</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">execution</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">executions</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugin</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">plugins</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">build</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>27. åºåˆ—åŒ– ååºåˆ—åŒ–</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="271-æ—¥æœŸæ—¶é—´-json">27.1. æ—¥æœŸæ—¶é—´ json<a href="#271-æ—¥æœŸæ—¶é—´-json" class="hash-link" aria-label="27.1. æ—¥æœŸæ—¶é—´ jsonçš„ç›´æ¥é“¾æ¥" title="27.1. æ—¥æœŸæ—¶é—´ jsonçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.cnblogs.com/carrychan/p/9883172.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/carrychan/p/9883172.html</a>
<a href="https://blog.csdn.net/z69183787/article/details/109356584" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/z69183787/article/details/109356584</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="272-jackson-ä½¿ç”¨">27.2. jackson ä½¿ç”¨<a href="#272-jackson-ä½¿ç”¨" class="hash-link" aria-label="27.2. jackson ä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="27.2. jackson ä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>springboot web starter ä¸­åŒ…å«äº† Jackson-databind ä¾èµ–, å¯ä»¥ç›´æ¥æ³¨å…¥ objectmapper, è‹¥è‡ªå·±å®šåˆ¶:</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2721-jsoncomponent">27.2.1. @JsonComponent<a href="#2721-jsoncomponent" class="hash-link" aria-label="27.2.1. @JsonComponentçš„ç›´æ¥é“¾æ¥" title="27.2.1. @JsonComponentçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç”¨äºå¯¹ç‰¹å®šå±æ€§å®šåˆ¶åºåˆ—åŒ–</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@AllArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">User</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Color</span><span class="token plain"> favoriteColor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonComponent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserCombinedSerializer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserJsonSerializer</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// è‹¥åªéœ€è¦åºåˆ—åŒ–, ä¸éœ€è¦ååºåˆ—åŒ–, åˆ™åªéœ€è¦è¿™ä¸ªç±» å¹¶åœ¨è¿™ä¸ªç±»æ ‡æ³¨ @JsonComponent. å¤–å±‚ç±»å’Œä¸‹é¢çš„å†…éƒ¨ç±»ç±»éƒ½ä¸éœ€è¦, </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JsonSerializer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">User</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">serialize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">User</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JsonGenerator</span><span class="token plain"> jsonGenerator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token class-name" style="color:rgb(38, 127, 153)">SerializerProvider</span><span class="token plain"> serializerProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token class-name" style="color:rgb(38, 127, 153)">JsonProcessingException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            jsonGenerator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">writeStartObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            jsonGenerator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">writeStringField</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">              </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;favoriteColor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getColorAsWebColor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getFavoriteColor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">// ... å…¶ä»–å±æ€§...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            jsonGenerator</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">writeEndObject</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">getColorAsWebColor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Color</span><span class="token plain"> color</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> r </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Math</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">color</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getRed</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">255.0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> g </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Math</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">color</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getGreen</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">255.0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Math</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">round</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">color</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getBlue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">255.0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">format</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;#%02x%02x%02x&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> g</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserJsonDeserializer</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JsonDeserializer</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">User</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">deserialize</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">JsonParser</span><span class="token plain"> jsonParser</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token class-name" style="color:rgb(38, 127, 153)">DeserializationContext</span><span class="token plain"> deserializationContext</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token keyword" style="color:rgb(0, 0, 255)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">IOException</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">JsonProcessingException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">TreeNode</span><span class="token plain"> treeNode </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> jsonParser</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getCodec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">readTree</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">jsonParser</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token class-name" style="color:rgb(38, 127, 153)">TextNode</span><span class="token plain"> favoriteColor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">TextNode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> treeNode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">              </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;favoriteColor&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">User</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Color</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">web</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">favoriteColor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">asText</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2722-jackson-åœ¨-springboot-ä¸­çš„é…ç½®">27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®<a href="#2722-jackson-åœ¨-springboot-ä¸­çš„é…ç½®" class="hash-link" aria-label="27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®çš„ç›´æ¥é“¾æ¥" title="27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">date</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">formatæŒ‡å®šæ—¥æœŸæ ¼å¼ï¼Œæ¯”å¦‚yyyy</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token constant" style="color:rgb(129, 31, 63)">MM</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">dd </span><span class="token constant" style="color:rgb(129, 31, 63)">HH</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">mm</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">ssï¼Œæˆ–è€…å…·ä½“çš„æ ¼å¼åŒ–ç±»çš„å…¨é™å®šå</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">deserializationæ˜¯å¦å¼€å¯Jacksonçš„ååºåˆ—åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">generatoræ˜¯å¦å¼€å¯jsonçš„generators</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">joda</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">date</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">time</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">formatæŒ‡å®šJoda date</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">timeçš„æ ¼å¼ï¼Œæ¯”å¦‚yyyy</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token constant" style="color:rgb(129, 31, 63)">MM</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">ddHH</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">mm</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain">ss</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> </span><span class="token property-access">å¦‚æœæ²¡æœ‰é…ç½®çš„è¯ï¼Œdateformatä¼šä½œä¸ºbackup</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">localeæŒ‡å®šjsonä½¿ç”¨çš„Locale</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">mapperæ˜¯å¦å¼€å¯Jacksoné€šç”¨çš„ç‰¹æ€§</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">parseræ˜¯å¦å¼€å¯jacksonçš„parserç‰¹æ€§</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">property</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">naming</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token function" style="color:rgb(0, 0, 255)">strategyæŒ‡å®šPropertyNamingStrategy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token constant" style="color:rgb(129, 31, 63)">CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">æˆ–è€…æŒ‡å®šPropertyNamingStrategyå­ç±»çš„å…¨é™å®šç±»å</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">serializationæ˜¯å¦å¼€å¯jacksonçš„åºåˆ—åŒ–</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">serialization</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">inclusionæŒ‡å®šåºåˆ—åŒ–æ—¶å±æ€§çš„inclusionæ–¹å¼ï¼Œå…·ä½“æŸ¥çœ‹JsonInclude</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access maybe-class-name">Includeæšä¸¾</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token property-access">spring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">jackson</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">time</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">zoneæŒ‡å®šæ—¥æœŸæ ¼å¼åŒ–æ—¶åŒºï¼Œæ¯”å¦‚America</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token maybe-class-name">Los_Angelesæˆ–è€…</span><span class="token constant" style="color:rgb(129, 31, 63)">GMT</span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2723-jacksonæ³¨è§£">27.2.3. jacksonæ³¨è§£<a href="#2723-jacksonæ³¨è§£" class="hash-link" aria-label="27.2.3. jacksonæ³¨è§£çš„ç›´æ¥é“¾æ¥" title="27.2.3. jacksonæ³¨è§£çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonIgnore</span><span class="token plain"> æ­¤æ³¨è§£ç”¨äºå±æ€§ä¸Šï¼Œä½œç”¨æ˜¯è¿›è¡ŒJSONæ“ä½œæ—¶å¿½ç•¥è¯¥å±æ€§ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonIgnoreProperties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;intValue&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> on type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å¿½ç•¥æŒ‡å®šå±æ€§</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonIgnoreType</span><span class="token plain"> on type å¿½ç•¥æ‰€æœ‰å±æ€§</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//or @JsonIgnoreType on mixin type(empty type) to ignore fields of the type which we have no access to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//        mapper.addMixIn(String[].class, MyMixInForIgnoreType.class);//MyMixInForIgnoreType is empty</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//Note: Since version 2.5 â€“ it seems that we can not use this method to ignore primitive data types, but we can use it for custom data types and arrays.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonFormat</span><span class="token plain"> æ­¤æ³¨è§£ç”¨äºå±æ€§ä¸Šï¼Œä½œç”¨æ˜¯æŠŠ</span><span class="token class-name" style="color:rgb(38, 127, 153)">Date</span><span class="token plain">ç±»å‹ç›´æ¥è½¬åŒ–ä¸ºæƒ³è¦çš„æ ¼å¼ï¼Œå¦‚</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">pattern </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> â€œyyyy</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">MM</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">dd HH</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">mm</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">ssâ€</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonProperty</span><span class="token plain"> æ­¤æ³¨è§£ç”¨äºå±æ€§ä¸Šï¼Œä½œç”¨æ˜¯æŠŠè¯¥å±æ€§çš„åç§°åºåˆ—åŒ–ä¸ºå¦å¤–ä¸€ä¸ªåç§°ï¼Œå¦‚æŠŠtrueNameå±æ€§åºåˆ—åŒ–ä¸ºnameï¼Œ</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonProperty</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">â€œnameâ€</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">ã€‚</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonValue</span><span class="token plain"> ç”¨äºå±æ€§</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">getæ–¹æ³•ä¸Š</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ä¸€ä¸ªç±»åªèƒ½ç”¨ä¸€ä¸ª</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ç›¸å½“äºè‡ªå®šä¹‰åºåˆ—åŒ–</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å½“åŠ ä¸Š</span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonValue</span><span class="token plain">æ³¨è§£ï¼Œåºåˆ—åŒ–æ˜¯åªè¿”å›è¿™ä¸€ä¸ªå­—æ®µçš„å€¼</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token plain">æ–¹æ³•çš„å€¼ä½œä¸ºå½“å‰å¯¹è±¡çš„å€¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@JsonRawValue</span><span class="token plain"> on json string field </span><span class="token keyword" style="color:rgb(0, 0, 255)">to</span><span class="token plain"> </span><span class="token namespace">serialize</span><span class="token plain"> raw json string</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2724-objectmapper-å®šåˆ¶">27.2.4. objectmapper å®šåˆ¶<a href="#2724-objectmapper-å®šåˆ¶" class="hash-link" aria-label="27.2.4. objectmapper å®šåˆ¶çš„ç›´æ¥é“¾æ¥" title="27.2.4. objectmapper å®šåˆ¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://www.kancloud.cn/ahutchen/spring-boot-reference-guide/333370" target="_blank" rel="noopener noreferrer">https://www.kancloud.cn/ahutchen/spring-boot-reference-guide/333370</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token annotation punctuation" style="color:rgb(4, 81, 165)">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ObjectMapper</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name" style="color:rgb(38, 127, 153)">ObjectMapper</span><span class="token plain"> objectMapper </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ObjectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">/*</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">        &gt;&gt;&gt; serialization config</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">         </span><span class="token comment" style="color:rgb(0, 128, 0)">//åºåˆ—åŒ–çš„æ—¶å€™åºåˆ—å¯¹è±¡çš„æ‰€æœ‰å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//          JsonInclude.Include.NON_NULL å¿½ç•¥ null å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//          Include.NON_EMPTY å¦‚æœä¸ºnullæˆ–è€… ç©ºå­—ç¬¦ä¸²å’Œç©ºé›†åˆéƒ½ä¸ä¼šè¢«åºåˆ—åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setSerializationInclusion</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">Include</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">ALWAYS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//å¦‚æœæ˜¯ç©ºå¯¹è±¡çš„æ—¶å€™,ä¸æŠ›å¼‚å¸¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SerializationFeature</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">FAIL_ON_EMPTY_BEANS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// æ ¼å¼åŒ–è¾“å‡º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SerializationFeature</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">INDENT_OUTPUT</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            mapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">enable</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SerializationFeature</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">INDENT_OUTPUT</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// è‡ªå®šä¹‰æ—¶é—´æ ¼å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//å–æ¶ˆæ—¶é—´çš„è½¬åŒ–æ ¼å¼,é»˜è®¤æ˜¯æ—¶é—´æˆ³,å¯ä»¥å–æ¶ˆ,åŒæ—¶éœ€è¦è®¾ç½®è¦è¡¨ç°çš„æ—¶é—´æ ¼å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">SerializationFeature</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">WRITE_DATES_AS_TIMESTAMPS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token comment" style="color:rgb(0, 128, 0)">// é»˜è®¤ä¸ºtrue,ä¼šæ˜¾ç¤ºæ—¶é—´æˆ³</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">setDateFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">SimpleDateFormat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//  config filter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//        new SimpleBeanPropertyFilter.FilterExceptFilter()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//        objectMapper.setFilterProvider()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">/*</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">        &gt;&gt;&gt; deserialization config</span><br></span><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">         */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//ååºåˆ—åŒ–çš„æ—¶å€™å¦‚æœå¤šäº†å…¶ä»–å±æ€§,ä¸æŠ›å‡ºå¼‚å¸¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">configure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">DeserializationFeature</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">FAIL_ON_UNKNOWN_PROPERTIES</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//@JsonValue å¯ä»¥ç”¨åœ¨getæ–¹æ³•æˆ–è€…å±æ€§å­—æ®µä¸Šï¼Œä¸€ä¸ªç±»åªèƒ½ç”¨ä¸€ä¸ªï¼Œå½“åŠ ä¸Š@JsonValueæ³¨è§£æ˜¯ï¼Œåºåˆ—åŒ–æ˜¯åªè¿”å›è¿™ä¸€ä¸ªå­—æ®µçš„å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//@JsonRootName(value = &quot;user&quot;) to wrapper a root property for output json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">//@JsonSerialize(using = CustomDateSerializer.class) on field to specify a customized serializer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ex: class CustomDateSerializer extends StdSerializer&lt;Date&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2725-objectmapper-ä½¿ç”¨">27.2.5. objectmapper ä½¿ç”¨<a href="#2725-objectmapper-ä½¿ç”¨" class="hash-link" aria-label="27.2.5. objectmapper ä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="27.2.5. objectmapper ä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// &gt;&gt;&gt; åºåˆ—åŒ–æ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token plain"> person1 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;zxc&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token plain"> person2 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ldh&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Date</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> persons </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ArrayList</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">persons</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">person1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">persons</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">add</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">person2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">String</span><span class="token plain"> personStr </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">writeValueAsString</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">persons</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//ååºåˆ—åŒ–ä¸ºList&lt;user&gt; é›†åˆ,1éœ€è¦é€šè¿‡ TypeReference æ¥å…·ä½“ä¼ é€’å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> persons2 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">readValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">personStr</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">TypeReference</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//or </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">//é€šè¿‡ JavaType æ¥è¿›è¡Œå¤„ç†è¿”å›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">JavaType</span><span class="token plain"> javaType </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">getTypeFactory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">constructParametricType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token class-name" style="color:rgb(38, 127, 153)">List</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token generics class-name" style="color:rgb(38, 127, 153)">Person</span><span class="token generics punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"> persons3 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">readValue</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">personStr</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> javaType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>28. æ¥å…¥ç¬¬ä¸‰æ–¹æ”¯ä»˜</h1><p><a href="https://github.com/Javen205/IJPay" target="_blank" rel="noopener noreferrer">https://github.com/Javen205/IJPay</a></p><p><a href="https://github.com/egzosn/pay-java-parent" target="_blank" rel="noopener noreferrer">https://github.com/egzosn/pay-java-parent</a>
<a href="https://github.com/egzosn/pay-spring-boot-starter-parent" target="_blank" rel="noopener noreferrer">https://github.com/egzosn/pay-spring-boot-starter-parent</a></p><p><a href="https://github.com/Pay-Group/best-pay-sdk" target="_blank" rel="noopener noreferrer">https://github.com/Pay-Group/best-pay-sdk</a></p><p><a href="https://github.com/iyangyuan/pay-spring-boot" target="_blank" rel="noopener noreferrer">https://github.com/iyangyuan/pay-spring-boot</a></p><p><a href="https://github.com/jeequan/jeepay" target="_blank" rel="noopener noreferrer">https://github.com/jeequan/jeepay</a></p><p><a href="https://github.com/roncoo/roncoo-pay" target="_blank" rel="noopener noreferrer">https://github.com/roncoo/roncoo-pay</a></p><p><a href="https://github.com/Exrick/xpay" target="_blank" rel="noopener noreferrer">https://github.com/Exrick/xpay</a> ä¸ªäººæ”¶æ¬¾</p><h1>è½»é‡çº§çš„æŠ€æœ¯æ ˆ</h1><p>java8,guice,javalin(å†™ rest api),nashorn(js engine),arangodb (å¤šæ¨¡å‹æ•°æ®åº“, æ”¯æŒå›¾,é”®å€¼å¯¹,...)</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dagger2-ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥">dagger2 ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥<a href="#dagger2-ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥" class="hash-link" aria-label="dagger2 ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥çš„ç›´æ¥é“¾æ¥" title="dagger2 ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>There are many methods can be used to perform dependency injection, such as</p><ul><li><p>constructor injection</p></li><li><p>setter method injection</p></li></ul><p>for the two ways, there are too mach sacaffold code need devs to finish, but luckily, Spring framework helps the devs to handle these code. ä½†æ˜¯è¿™ç§è¿è¡Œæ—¶åŠ¨æ€æ³¨å…¥, åœ¨ debug æ˜¯éå¸¸éš¾ä»¥å®šä½é—®é¢˜</p><p>For dagger2, it reach the goal by using annotation, and it works in the compiling duration</p><h1>29. æ‹¾é—</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="291-bean-æ‡’åŠ è½½">29.1. bean æ‡’åŠ è½½<a href="#291-bean-æ‡’åŠ è½½" class="hash-link" aria-label="29.1. bean æ‡’åŠ è½½çš„ç›´æ¥é“¾æ¥" title="29.1. bean æ‡’åŠ è½½çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringå®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šåˆ›å»ºæ‰€æœ‰çš„Beanå¯¹è±¡ï¼Œä½¿ç”¨@Lazyæ³¨è§£ (å’Œ @Component å…±åŒä½¿ç”¨) å¯ä»¥å°†Beanå¯¹è±¡çš„åˆ›å»ºå»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡ä½¿ç”¨Beançš„æ—¶å€™</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bean-å¾ªç¯ä¾èµ–">bean å¾ªç¯ä¾èµ–<a href="#bean-å¾ªç¯ä¾èµ–" class="hash-link" aria-label="bean å¾ªç¯ä¾èµ–çš„ç›´æ¥é“¾æ¥" title="bean å¾ªç¯ä¾èµ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ– ? </p><ol><li>ä¸€ä¸ª bean æ³¨å…¥äº†è‡ªå·±çš„ä¸€ä¸ªå®ä¾‹</li><li>ä¸¤ä¸ª bean äº’ç›¸æ³¨å…¥ (spring é»˜è®¤èƒ½è§£å†³)</li><li>å¤šä¸ª bean æ³¨å…¥, å½¢æˆç¯å½¢</li></ol><p>spring é€šè¿‡ 3 ä¸ª map ç¼“å­˜è§£å†³</p><p>ä¸€çº§ç¼“å­˜: å­˜å‚¨å®Œæ•´æ„é€ åçš„bean
äºŒçº§ç¼“å­˜: å­˜å‚¨åˆšåˆšåˆ›å»ºè¿˜æ²¡å¡«å……å±æ€§çš„ç©º bean
ä¸‰çº§ç¼“å­˜: ä¿å­˜bean çš„åˆ›å»ºå·¥å‚ (ç©º bean åˆ›å»ºå, ä¼šå§å¯¹åº”çš„ ObjectFactory å­˜åˆ°è¿™é‡Œ, å«åšæå‰æš´éœ²)</p><p>å¯¹äºæƒ…å†µ 2, æ³¨å…¥æµç¨‹å¦‚ä¸‹: </p><blockquote><p>a ä¾èµ– b, b ä¾èµ– a; å‡è®¾é¦–å…ˆæ„é€ a, spring åœ¨ä¸€çº§ç¼“å­˜æ‰¾ä¸åˆ° a, åˆ™åˆ›å»º a çš„ç©º bean, å¹¶æ·»åŠ åˆ°ä¸‰çº§ç¼“å­˜(æå‰æš´éœ²), ç„¶åå°è¯•åˆ›å»º b, åˆ°ä¸€çº§ç¼“å­˜æ‰¾ä¸åˆ°, åˆ™åˆ›è¿˜èƒ½ b ç©º bean, åŒæ ·å­˜å…¥ä¸‰çº§ç¼“å­˜(æå‰æš´éœ²), è¿™æ˜¯ springå‘ç° b ç«Ÿç„¶ä¾èµ– a, äºæ˜¯åœ¨ä¸‰çº§ç¼“å­˜è·å–åˆ° a çš„å·¥å‚å¯¹è±¡, è¿›è€Œå¾—åˆ°a çš„å®ä¾‹, <strong>åŒæ—¶å°† a æ·»åŠ åˆ°äºŒçº§ç¼“å­˜</strong>, æ­¤æ—¶ b æ„é€ å®Œæˆ, è¢«æ·»åŠ åˆ°ä¸€çº§ç¼“å­˜, æ¥ç€ a ä¹Ÿæ„é€ å®Œæˆ, å­˜å…¥ä¸€çº§ç¼“å­˜.</p></blockquote><p><img loading="lazy" src="/assets/images/loop_dependency-109a7daae3a169c305db8651021bd052.png" width="1140" height="455" class="img_ev3q"></p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">çœ‹ä¸‹æ¥</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> äºŒçº§ç¼“å­˜è²Œä¼¼æ²¡ä»€ä¹ˆä½œç”¨</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å¯ä»¥å»æ‰å—</span><span class="token operator" style="color:rgb(0, 0, 0)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ä¸å¯ä»¥</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å› ä¸ºå¦‚æœæŠ½æ‰äºŒçº§ç¼“å­˜å</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> æ¯æ¬¡ä»ä¸‰çº§ç¼“å­˜æ‹¿åˆ°å·¥å‚å¯¹è±¡</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> è¿›è€Œç”Ÿæˆå¾—åˆ°ç©º bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> å¦‚æœä¸¤ä¸ª bean åŒæ—¶ä¾èµ–ç¬¬ä¸‰ä¸ª bean</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> é‚£ä¹ˆè¿™ä¸ªç¬¬ä¸‰ä¸ª bean è¢«æ³¨å…¥åˆ°ä¸¤ä¸ª bean ä¸­çš„å¯¹è±¡å°†ä¼šæ˜¯ä¸åŒçš„</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> </span><span class="token property-access">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> spring å¼•å…¥äº†äºŒçº§ç¼“å­˜</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token literal-property property">å»æ‰äºŒçº§ç¼“å­˜åè€ƒè™‘è¿™ç§åœºæ™¯</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> a ä¾èµ– b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ç„¶å b</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c éƒ½ä¾èµ– a</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ä¸‰çº§ç¼“å­˜ä¸ºä»€ä¹ˆè¦æ·»åŠ objectFactory å·¥å‚å¯¹è±¡</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> ç›´æ¥ä¿å­˜å®ä¾‹å¯¹è±¡ä¸è¡Œå—</span><span class="token operator" style="color:rgb(0, 0, 0)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token maybe-class-name">No</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> absolutely not</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">Let</span><span class="token plain">&#x27;s assume thsi scenario</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> you want to enhance one instance </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> the third</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">level cache</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> using the instace directly is not the way</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹äºspringé»˜è®¤æ— æ³•è§£å†³çš„æƒ…å†µ, å¦‚ä½•æ‰‹åŠ¨è§£å†³å‘¢?</p><ul><li>å±æ€§æ·»åŠ  @lazy </li><li>ç±»ä¸Šä½¿ç”¨ @dependson</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/framework">framework</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/java">java</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/intro"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">intro</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/autohotkey"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">Autohotkey è„šæœ¬</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#31-bean-å¤åˆ¶-å…‹éš†" class="table-of-contents__link toc-highlight">3.1. bean å¤åˆ¶ å…‹éš†</a></li><li><a href="#32-å­—ç¬¦ä¸²" class="table-of-contents__link toc-highlight">3.2. å­—ç¬¦ä¸²</a></li><li><a href="#33-ç¼–è§£ç " class="table-of-contents__link toc-highlight">3.3. ç¼–è§£ç </a></li><li><a href="#34-commons-lang3" class="table-of-contents__link toc-highlight">3.4. commons-lang3</a></li><li><a href="#35-æ–‡ä»¶æ“ä½œ" class="table-of-contents__link toc-highlight">3.5. æ–‡ä»¶æ“ä½œ</a></li><li><a href="#36-commons-collections4" class="table-of-contents__link toc-highlight">3.6. commons-collections4</a></li><li><a href="#51-configurationproperties-å’Œ-value" class="table-of-contents__link toc-highlight">5.1. @ConfigurationProperties å’Œ @Value</a></li><li><a href="#52-enableconfigurationproperties" class="table-of-contents__link toc-highlight">5.2. @EnableConfigurationProperties</a></li><li><a href="#53-enableautoconfiguration" class="table-of-contents__link toc-highlight">5.3. @EnableAutoConfiguration</a></li><li><a href="#54-componentscan" class="table-of-contents__link toc-highlight">5.4. @ComponentScan</a></li><li><a href="#55-springbootapplication" class="table-of-contents__link toc-highlight">5.5. @SpringBootApplication</a></li><li><a href="#56-componentå’Œbeanå’ŒconfigrationåŒºåˆ«" class="table-of-contents__link toc-highlight">5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«</a></li><li><a href="#57-importå’Œimportresourceå’Œpropertysourceæ¯”è¾ƒ" class="table-of-contents__link toc-highlight">5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ</a></li><li><a href="#91-setæ³¨å…¥" class="table-of-contents__link toc-highlight">9.1. setæ³¨å…¥</a></li><li><a href="#92-postconstruct-æ³¨å…¥" class="table-of-contents__link toc-highlight">9.2. @PostConstruct æ³¨å…¥</a></li><li><a href="#93-é€šè¿‡-applicationcontext" class="table-of-contents__link toc-highlight">9.3. é€šè¿‡ ApplicationContext</a></li><li><a href="#101-åŠ è½½è¿‡ç¨‹oråŸç†" class="table-of-contents__link toc-highlight">10.1. åŠ è½½è¿‡ç¨‹oråŸç†</a></li><li><a href="#102-è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£" class="table-of-contents__link toc-highlight">10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£</a></li><li><a href="#103-è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹" class="table-of-contents__link toc-highlight">10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹</a><ul><li><a href="#1031-spring-åŠ¨æ€ä»£ç†" class="table-of-contents__link toc-highlight">10.3.1. spring åŠ¨æ€ä»£ç†</a></li></ul></li><li><a href="#104-conditional" class="table-of-contents__link toc-highlight">10.4. @Conditional</a></li><li><a href="#105-å°è£…ç»„åˆæ¡ä»¶" class="table-of-contents__link toc-highlight">10.5. å°è£…ç»„åˆæ¡ä»¶</a></li><li><a href="#106-åˆ›å»ºè‡ªå·±çš„-starter" class="table-of-contents__link toc-highlight">10.6. åˆ›å»ºè‡ªå·±çš„ starter</a></li><li><a href="#107-åçˆ¬è™«-starter" class="table-of-contents__link toc-highlight">10.7. åçˆ¬è™« starter</a></li><li><a href="#gprc-starter" class="table-of-contents__link toc-highlight">gprc starter</a></li><li><a href="#111-spring-boot-actuator-ç›‘æ§" class="table-of-contents__link toc-highlight">11.1. spring-boot-actuator ç›‘æ§</a></li><li><a href="#112-spring-boot-admin-ç›‘æ§ç•Œé¢" class="table-of-contents__link toc-highlight">11.2. spring boot admin ç›‘æ§ç•Œé¢</a></li><li><a href="#113-spring-boot-starter-security" class="table-of-contents__link toc-highlight">11.3. spring-boot-starter-security</a><ul><li><a href="#1131-securityç»„ä»¶ä»‹ç»" class="table-of-contents__link toc-highlight">11.3.1. securityç»„ä»¶ä»‹ç»</a></li><li><a href="#1132-åŸºæœ¬ä½¿ç”¨-å’Œ-é…ç½®ç”¨æˆ·åå¯†ç " class="table-of-contents__link toc-highlight">11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç </a></li><li><a href="#1133-ç¦ç”¨åŸºæœ¬è®¤è¯" class="table-of-contents__link toc-highlight">11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯</a></li><li><a href="#1134-é…ç½®ä¸­-websecurity-å’Œ-httpsecurity-åŒºåˆ«" class="table-of-contents__link toc-highlight">11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«</a></li><li><a href="#1135-é…ç½®è·¨åŸŸ" class="table-of-contents__link toc-highlight">11.3.5. é…ç½®è·¨åŸŸ</a></li></ul></li><li><a href="#114-oauth2" class="table-of-contents__link toc-highlight">11.4. oauth2</a></li><li><a href="#121-log4j2-marker-å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶" class="table-of-contents__link toc-highlight">12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶</a></li><li><a href="#122-logback" class="table-of-contents__link toc-highlight">12.2. logback</a></li><li><a href="#131-canal-è®¢é˜…" class="table-of-contents__link toc-highlight">13.1. canal è®¢é˜…</a></li><li><a href="#132-mybatis-è‡ªåŠ¨å»ºè¡¨æ’ä»¶" class="table-of-contents__link toc-highlight">13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶</a></li><li><a href="#133-mybatis-crud-å¢å¼ºæ’ä»¶" class="table-of-contents__link toc-highlight">13.3. mybatis crud å¢å¼ºæ’ä»¶</a></li><li><a href="#134-æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶" class="table-of-contents__link toc-highlight">13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶</a><ul><li><a href="#1341-liquibase" class="table-of-contents__link toc-highlight">13.4.1. liquibase</a></li><li><a href="#1342-flyway" class="table-of-contents__link toc-highlight">13.4.2. Flyway</a><ul><li><a href="#working-process-å·¥ä½œåŸç†" class="table-of-contents__link toc-highlight">working process å·¥ä½œåŸç†</a></li><li><a href="#how-to-verify-the-sql-update-æ ¡éªŒåŸç†" class="table-of-contents__link toc-highlight">how to verify the sql update æ ¡éªŒåŸç†</a></li><li><a href="#how-to-use-flyway" class="table-of-contents__link toc-highlight">how to use flyway</a></li></ul></li></ul></li><li><a href="#135-æ•°æ®åº“-jdbc-url-å’Œé©±åŠ¨-å„ç§è¿æ¥å­—ç¬¦ä¸²" class="table-of-contents__link toc-highlight">13.5. æ•°æ®åº“ jdbc url å’Œé©±åŠ¨ å„ç§è¿æ¥å­—ç¬¦ä¸²</a></li><li><a href="#136-graphqlé›†æˆ" class="table-of-contents__link toc-highlight">13.6. graphqlé›†æˆ</a></li><li><a href="#137-å¯åŠ¨æ‰§è¡Œ-sql" class="table-of-contents__link toc-highlight">13.7. å¯åŠ¨æ‰§è¡Œ SQL</a><ul><li><a href="#1371-åˆ©ç”¨-spring-jdbc" class="table-of-contents__link toc-highlight">13.7.1. åˆ©ç”¨ spring jdbc</a></li><li><a href="#1372-ä½¿ç”¨-jpa" class="table-of-contents__link toc-highlight">13.7.2. ä½¿ç”¨ jpa</a></li><li><a href="#1373-datasourceinitializer" class="table-of-contents__link toc-highlight">13.7.3. DataSourceInitializer</a></li><li><a href="#1374-maven-antrun-pluginn" class="table-of-contents__link toc-highlight">13.7.4. maven-antrun-pluginn</a></li><li><a href="#1375-construct-a-script-execution-service-manually" class="table-of-contents__link toc-highlight">13.7.5. construct a script execution service manually</a></li></ul></li><li><a href="#138-æ•´åˆ-spring-jdbc" class="table-of-contents__link toc-highlight">13.8. æ•´åˆ spring jdbc</a></li><li><a href="#139-æ•´åˆ-hibernate-å³-jpa" class="table-of-contents__link toc-highlight">13.9. æ•´åˆ hibernate (å³ jpa)</a><ul><li><a href="#1391-jpaæ³¨è§£æ€»ç»“" class="table-of-contents__link toc-highlight">13.9.1. jpaæ³¨è§£æ€»ç»“</a></li><li><a href="#ä½¿ç”¨æšä¸¾" class="table-of-contents__link toc-highlight">ä½¿ç”¨æšä¸¾</a><ul><li><a href="#the-basic-usage" class="table-of-contents__link toc-highlight">the basic usage</a></li><li><a href="#converter-æ¨è" class="table-of-contents__link toc-highlight">@Converter (æ¨è)</a></li><li><a href="#postload-and-prepersist" class="table-of-contents__link toc-highlight">@PostLoad and @PrePersist</a></li></ul></li><li><a href="#1392-jpa-querydsl-å¤šè¡¨è”æŸ¥" class="table-of-contents__link toc-highlight">13.9.2. jpa queryDsl å¤šè¡¨è”æŸ¥</a></li><li><a href="#1393-jpa-æ”¯æŒ-java8-time" class="table-of-contents__link toc-highlight">13.9.3. jpa æ”¯æŒ java8 time</a></li><li><a href="#1394-å®¡è®¡-createddate" class="table-of-contents__link toc-highlight">13.9.4. å®¡è®¡ createdDate</a></li><li><a href="#1395-æ‰§è¡ŒåŸç”Ÿ-sql" class="table-of-contents__link toc-highlight">13.9.5. æ‰§è¡ŒåŸç”Ÿ SQL</a></li><li><a href="#1396-åŠ¨æ€-sql" class="table-of-contents__link toc-highlight">13.9.6. åŠ¨æ€ SQL</a></li><li><a href="#1397-spring-data-rest-é…åˆ-spring-data-jpa" class="table-of-contents__link toc-highlight">13.9.7. spring-data-rest é…åˆ spring-data-jpa</a></li></ul></li><li><a href="#1310-æ•´åˆ-mybatis-plus" class="table-of-contents__link toc-highlight">13.10. æ•´åˆ mybatis-plus</a></li><li><a href="#1311-æ•´åˆ-mybatis" class="table-of-contents__link toc-highlight">13.11. æ•´åˆ mybatis</a><ul><li><a href="#13111-åŸºæœ¬é…ç½®" class="table-of-contents__link toc-highlight">13.11.1. åŸºæœ¬é…ç½®</a></li><li><a href="#13112-ä½¿ç”¨-æ‹¦æˆªå™¨-interceptor-plugins" class="table-of-contents__link toc-highlight">13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins</a><ul><li><a href="#131121-principle-of-plugins" class="table-of-contents__link toc-highlight">13.11.2.1. principle of plugins</a></li><li><a href="#131122-use-scenarios" class="table-of-contents__link toc-highlight">13.11.2.2. use scenarios</a></li><li><a href="#131123-how-to-use-plugins" class="table-of-contents__link toc-highlight">13.11.2.3. how to use plugins</a></li></ul></li><li><a href="#13113-typehandler" class="table-of-contents__link toc-highlight">13.11.3. typehandler</a></li><li><a href="#13114-å…¨æ³¨è§£å¼€å‘" class="table-of-contents__link toc-highlight">13.11.4. å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13115-åŠ¨æ€å®šæ—¶åˆ·æ–°-sql-mapper-å®ç°çƒ­åŠ è½½" class="table-of-contents__link toc-highlight">13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½</a></li><li><a href="#13116-è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½•-and-å¼€å¯å ä½ç¬¦è¿‡æ»¤" class="table-of-contents__link toc-highlight">13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤</a></li></ul></li><li><a href="#1312-springboot-äº‹åŠ¡" class="table-of-contents__link toc-highlight">13.12. springboot äº‹åŠ¡</a><ul><li><a href="#13121-äº‹åŠ¡åŸºæœ¬ä½¿ç”¨" class="table-of-contents__link toc-highlight">13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#13122-transaction-not-working" class="table-of-contents__link toc-highlight">13.12.2. transaction not working</a></li><li><a href="#13123-spring-äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘" class="table-of-contents__link toc-highlight">13.12.3. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘</a></li><li><a href="#13124-transactional-æ³¨è§£" class="table-of-contents__link toc-highlight">13.12.4. Transactional æ³¨è§£</a></li></ul></li><li><a href="#1313-ç¼“å­˜" class="table-of-contents__link toc-highlight">13.13. ç¼“å­˜</a><ul><li><a href="#13131-springboot-starter-cache" class="table-of-contents__link toc-highlight">13.13.1. springboot-starter-cache</a></li><li><a href="#13132-caffeine" class="table-of-contents__link toc-highlight">13.13.2. caffeine</a></li></ul></li><li><a href="#1314-é…åˆ-h2-æ•°æ®åº“è¿›è¡Œå¼€å‘" class="table-of-contents__link toc-highlight">13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘</a><ul><li><a href="#13141-h2-å’Œ-spring-data-jpa-é…åˆ" class="table-of-contents__link toc-highlight">13.14.1. h2 å’Œ spring data jpa é…åˆ</a></li><li><a href="#13142-å’Œ-mybatis-plus-é…åˆ" class="table-of-contents__link toc-highlight">13.14.2. å’Œ mybatis-plus é…åˆ</a></li></ul></li><li><a href="#1315-å¤šæ•°æ®æº" class="table-of-contents__link toc-highlight">13.15. å¤šæ•°æ®æº</a><ul><li><a href="#13151-åŸºæœ¬é…ç½®-å…¨æ³¨è§£å¼€å‘" class="table-of-contents__link toc-highlight">13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13152-abstractroutingdatasource-åŠ¨æ€æ•°æ®æºåˆ‡æ¢" class="table-of-contents__link toc-highlight">13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢</a></li></ul></li><li><a href="#1316-å¤šæ•°æ®åº“ç±»å‹-databaseidprovider" class="table-of-contents__link toc-highlight">13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider</a></li><li><a href="#1317-spring-kafka" class="table-of-contents__link toc-highlight">13.17. spring kafka</a></li><li><a href="#141-åŠ è§£å¯†" class="table-of-contents__link toc-highlight">14.1. åŠ è§£å¯†</a></li><li><a href="#142-springboot-å‘é€-https-æˆ–è€…-http-å®¢æˆ·ç«¯-client" class="table-of-contents__link toc-highlight">14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client</a><ul><li><a href="#1421-å‘é€-http-client" class="table-of-contents__link toc-highlight">14.2.1. å‘é€ http client</a></li><li><a href="#1422-å‘é€-https-client" class="table-of-contents__link toc-highlight">14.2.2. å‘é€ https client</a></li></ul></li><li><a href="#143-requestcontextholder" class="table-of-contents__link toc-highlight">14.3. RequestContextHolder</a></li><li><a href="#144-è§£å†³-api-ç‰ˆæœ¬å…±å­˜" class="table-of-contents__link toc-highlight">14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜</a><ul><li><a href="#1441-requestmappinghandlermapping" class="table-of-contents__link toc-highlight">14.4.1. RequestMappingHandlerMapping</a></li><li><a href="#1442-request-matcher" class="table-of-contents__link toc-highlight">14.4.2. request matcher</a></li><li><a href="#1443-request-condition" class="table-of-contents__link toc-highlight">14.4.3. request condition</a></li></ul></li><li><a href="#145-æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£" class="table-of-contents__link toc-highlight">14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£</a></li><li><a href="#146-è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹" class="table-of-contents__link toc-highlight">14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹</a></li><li><a href="#147-è¿”å›å›¾ç‰‡" class="table-of-contents__link toc-highlight">14.7. è¿”å›å›¾ç‰‡</a></li><li><a href="#148-rest-api-æ–‡æ¡£" class="table-of-contents__link toc-highlight">14.8. rest api æ–‡æ¡£</a><ul><li><a href="#1481-knife4j" class="table-of-contents__link toc-highlight">14.8.1. knife4j</a></li><li><a href="#1482-springdoc-openapi" class="table-of-contents__link toc-highlight">14.8.2. springdoc-openapi</a></li><li><a href="#1483-swagger3" class="table-of-contents__link toc-highlight">14.8.3. swagger3</a></li><li><a href="#1484-é›†æˆswagger2" class="table-of-contents__link toc-highlight">14.8.4. é›†æˆswagger2</a></li></ul></li><li><a href="#149-è¿‡æ»¤å™¨-å’Œ-æ‹¦æˆªå™¨" class="table-of-contents__link toc-highlight">14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨</a><ul><li><a href="#1491-åŒºåˆ«" class="table-of-contents__link toc-highlight">14.9.1. åŒºåˆ«</a></li><li><a href="#1492-ä½¿ç”¨-filter" class="table-of-contents__link toc-highlight">14.9.2. ä½¿ç”¨ filter</a></li><li><a href="#1493-ä½¿ç”¨-interceptor" class="table-of-contents__link toc-highlight">14.9.3. ä½¿ç”¨ interceptor</a><ul><li><a href="#14931-åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨" class="table-of-contents__link toc-highlight">14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨</a></li><li><a href="#14932-åŸºäº-url-æ‹¦æˆª" class="table-of-contents__link toc-highlight">14.9.3.2. åŸºäº url æ‹¦æˆª</a></li><li><a href="#14933-åŸºäºæ³¨è§£æ‹¦æˆª" class="table-of-contents__link toc-highlight">14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª</a></li></ul></li></ul></li><li><a href="#1410-servlet-druid-ç›‘æ§" class="table-of-contents__link toc-highlight">14.10. servlet Druid ç›‘æ§</a></li><li><a href="#1411-aop-æ•´åˆä½¿ç”¨" class="table-of-contents__link toc-highlight">14.11. aop æ•´åˆä½¿ç”¨</a><ul><li><a href="#14111-åŸºæœ¬ä½¿ç”¨" class="table-of-contents__link toc-highlight">14.11.1. åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#14112-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="table-of-contents__link toc-highlight">14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</a></li></ul></li><li><a href="#1412-controlleradvice-å¼‚å¸¸å¤„ç†" class="table-of-contents__link toc-highlight">14.12. @controllerAdvice å¼‚å¸¸å¤„ç†</a></li><li><a href="#1413-httpservletrequest-çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜" class="table-of-contents__link toc-highlight">14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜</a></li><li><a href="#1414-è·¯ç”±å¤„ç†" class="table-of-contents__link toc-highlight">14.14. è·¯ç”±å¤„ç†</a><ul><li><a href="#14141-é™æ€èµ„æºæ˜ å°„-æš´éœ²é™æ€èµ„æº" class="table-of-contents__link toc-highlight">14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº</a></li><li><a href="#14142-æ·»åŠ -view-controller" class="table-of-contents__link toc-highlight">14.14.2. æ·»åŠ  view controller</a></li></ul></li><li><a href="#1415-spring-boot-starter-thymeleaf" class="table-of-contents__link toc-highlight">14.15. spring-boot-starter-thymeleaf</a></li><li><a href="#151-æ”¯æŒ-https-ssl" class="table-of-contents__link toc-highlight">15.1. æ”¯æŒ https ssl</a><ul><li><a href="#1511-nginx-é…ç½®-https" class="table-of-contents__link toc-highlight">15.1.1. nginx é…ç½® https</a></li><li><a href="#1512-æ”¯æŒ-https-è®¿é—®" class="table-of-contents__link toc-highlight">15.1.2. æ”¯æŒ https è®¿é—®</a></li><li><a href="#1513-http-è¯·æ±‚è‡ªåŠ¨è½¬ä¸º-https" class="table-of-contents__link toc-highlight">15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https</a></li><li><a href="#1514-åŒæ—¶æ”¯æŒ-http-https" class="table-of-contents__link toc-highlight">15.1.4. åŒæ—¶æ”¯æŒ http https</a></li></ul></li><li><a href="#152-å®¹å™¨åŒ–éƒ¨ç½²" class="table-of-contents__link toc-highlight">15.2. å®¹å™¨åŒ–éƒ¨ç½²</a></li><li><a href="#153-nginx-åå‘ä»£ç†" class="table-of-contents__link toc-highlight">15.3. nginx åå‘ä»£ç†</a></li><li><a href="#154-å†…åµŒ-tomcat-è°ƒä¼˜" class="table-of-contents__link toc-highlight">15.4. å†…åµŒ tomcat è°ƒä¼˜</a></li><li><a href="#155-é…ç½®-war-åŒ…éƒ¨ç½²åˆ°-tomcat" class="table-of-contents__link toc-highlight">15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat</a></li><li><a href="#161-ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹" class="table-of-contents__link toc-highlight">16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹</a><ul><li><a href="#1611-é…ç½®çº¿ç¨‹æ± " class="table-of-contents__link toc-highlight">16.1.1. é…ç½®çº¿ç¨‹æ± </a></li><li><a href="#1612-æœ‰è¿”å›å€¼-æ²¡æœ‰è¿”å›å€¼" class="table-of-contents__link toc-highlight">16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼</a></li><li><a href="#1613-asyncå¤±æ•ˆ" class="table-of-contents__link toc-highlight">16.1.3. @Asyncå¤±æ•ˆ</a></li></ul></li><li><a href="#201-lombok-notice" class="table-of-contents__link toc-highlight">20.1. lombok notice</a><ul><li><a href="#ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†" class="table-of-contents__link toc-highlight">ç¼–è¯‘æœŸä»£ç ç”ŸæˆåŸç†</a></li></ul></li><li><a href="#202-devtools" class="table-of-contents__link toc-highlight">20.2. devtools</a></li><li><a href="#203-maven-wrapper" class="table-of-contents__link toc-highlight">20.3. maven wrapper</a></li><li><a href="#211-æ ¡éªŒé…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">21.1. æ ¡éªŒé…ç½®æ–‡ä»¶</a></li><li><a href="#212-æ ¡éªŒè¯·æ±‚å‚æ•°" class="table-of-contents__link toc-highlight">21.2. æ ¡éªŒè¯·æ±‚å‚æ•°</a></li><li><a href="#213-è‡ªå®šä¹‰æ ¡éªŒ" class="table-of-contents__link toc-highlight">21.3. è‡ªå®šä¹‰æ ¡éªŒ</a></li><li><a href="#214-validatedå’Œvalid" class="table-of-contents__link toc-highlight">21.4. @Validatedå’Œ@Valid</a></li><li><a href="#221-è·å–å‘½ä»¤è¡Œå‚æ•°" class="table-of-contents__link toc-highlight">22.1. è·å–å‘½ä»¤è¡Œå‚æ•°</a></li><li><a href="#222-applicationrunner-or-commandlinerunner" class="table-of-contents__link toc-highlight">22.2. <code>ApplicationRunner</code> or <code>CommandLineRunner</code></a></li><li><a href="#251-æ•´åˆ-xxl-job-ä»»åŠ¡è°ƒåº¦å¹³å°" class="table-of-contents__link toc-highlight">25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°</a></li><li><a href="#252-å¼‚æ­¥ä»»åŠ¡" class="table-of-contents__link toc-highlight">25.2. å¼‚æ­¥ä»»åŠ¡</a></li><li><a href="#253-å®šæ—¶ä»»åŠ¡" class="table-of-contents__link toc-highlight">25.3. å®šæ—¶ä»»åŠ¡</a><ul><li><a href="#2531-springboot-å†…ç½®" class="table-of-contents__link toc-highlight">25.3.1. springboot å†…ç½®</a></li><li><a href="#2532-é›†æˆ-quartz" class="table-of-contents__link toc-highlight">25.3.2. é›†æˆ Quartz</a></li></ul></li><li><a href="#261-è¯»å–é…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">26.1. è¯»å–é…ç½®æ–‡ä»¶</a><ul><li><a href="#2611-å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•" class="table-of-contents__link toc-highlight">26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•</a></li><li><a href="#2612-æ³¨å…¥å¤æ‚ç±»å‹" class="table-of-contents__link toc-highlight">26.1.2. æ³¨å…¥å¤æ‚ç±»å‹</a></li></ul></li><li><a href="#262-é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§" class="table-of-contents__link toc-highlight">26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</a></li><li><a href="#263-è¯»å–ç¯å¢ƒä¿¡æ¯" class="table-of-contents__link toc-highlight">26.3. è¯»å–ç¯å¢ƒä¿¡æ¯</a></li><li><a href="#264-ä¸¤ç§å¼•å…¥-springboot-æ–¹å¼" class="table-of-contents__link toc-highlight">26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼</a></li><li><a href="#271-æ—¥æœŸæ—¶é—´-json" class="table-of-contents__link toc-highlight">27.1. æ—¥æœŸæ—¶é—´ json</a></li><li><a href="#272-jackson-ä½¿ç”¨" class="table-of-contents__link toc-highlight">27.2. jackson ä½¿ç”¨</a><ul><li><a href="#2721-jsoncomponent" class="table-of-contents__link toc-highlight">27.2.1. @JsonComponent</a></li><li><a href="#2722-jackson-åœ¨-springboot-ä¸­çš„é…ç½®" class="table-of-contents__link toc-highlight">27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®</a></li><li><a href="#2723-jacksonæ³¨è§£" class="table-of-contents__link toc-highlight">27.2.3. jacksonæ³¨è§£</a></li><li><a href="#2724-objectmapper-å®šåˆ¶" class="table-of-contents__link toc-highlight">27.2.4. objectmapper å®šåˆ¶</a></li><li><a href="#2725-objectmapper-ä½¿ç”¨" class="table-of-contents__link toc-highlight">27.2.5. objectmapper ä½¿ç”¨</a></li></ul></li><li><a href="#dagger2-ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥" class="table-of-contents__link toc-highlight">dagger2 ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥</a></li><li><a href="#291-bean-æ‡’åŠ è½½" class="table-of-contents__link toc-highlight">29.1. bean æ‡’åŠ è½½</a></li><li><a href="#bean-å¾ªç¯ä¾èµ–" class="table-of-contents__link toc-highlight">bean å¾ªç¯ä¾èµ–</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">å†å²</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tags">æ ‡ç­¾</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">å½’æ¡£</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾äº¤åª’ä½“</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">å…³äºæˆ‘</a></li><li class="footer__item"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/xiaoyuhfq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/3fPgwd3naN" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/friends">å‹é“¾</a></li><li class="footer__item"><a class="footer__link-item" position="right" href="/resource">å¯¼èˆª</a></li><li class="footer__item"><a href="https://docusaurus.io/zh-CN/" target="_blank"><img style="height:50px;margin-top:0.5rem" src="/img/buildwith.png"><a></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Xiaoyureed, Inc. Built with â¤ï¸ by xiaoyu.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6c74a546.js"></script>
<script src="/assets/js/main.c2c58f90.js"></script>
</body>
</html>