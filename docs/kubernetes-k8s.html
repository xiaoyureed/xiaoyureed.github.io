<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-kubernetes-k8s">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">kubernetes-k8s â˜ï¸ | Xiaoyureed&#x27;s ç½‘ç»œ Wiki </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/docs/kubernetes-k8s"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="kubernetes-k8s â˜ï¸ | Xiaoyureed&#x27;s ç½‘ç»œ Wiki "><meta data-rh="true" name="description" content="https://dockone.io/article/2434304"><meta data-rh="true" property="og:description" content="https://dockone.io/article/2434304"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/docs/kubernetes-k8s"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/kubernetes-k8s" hreflang="en"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/kubernetes-k8s" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/kubernetes-k8s" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  Atom Feed"><link rel="stylesheet" href="/assets/css/styles.c6a654bf.css">
<link rel="preload" href="/assets/js/runtime~main.6d396791.js" as="script">
<link rel="preload" href="/assets/js/main.f6c8ad5f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Xiaoyureed</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/FreeMarker-note">FreeMarker Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/SpringBoot-note">Spring Boot å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/agile-development-user-story-scrum">æ•æ·å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/android">Android å¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/autohotkey">Autohotkey è„šæœ¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/blockchain">blockchainåŒºå—é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/c-sharp-and-dot-net">C# &amp; .NET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cloud-native-platform">äº‘æœåŠ¡å¹³å°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cpp">CPP and C å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/css-pre-processor">å‡ ç§CSSé¢„å¤„ç†å™¨æ¯”è¾ƒé€‰å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design-pattern-note">Design Pattern ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dev-resources">å¼€å‘è€…èµ„æº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/devops">DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/distributed-system">Distributed System åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/effective-java-reading-note">Effective Java é˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/elk-elastic-log">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/english-note">è‹±è¯­å­¦ä¹ ğŸ”¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/extjs-note">Extjs ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter">flutter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/games-development-introduce">æ¸¸æˆå¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/git-note">Git å¤‡å¿˜ ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/github-starts">Github æ˜Ÿæ ‡â­ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/golang-note">Golang ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/gps-gis-tracing">åŸºäºåœ°ç†ä½ç½®å¼€å‘æŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/gradle">gradle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/greasy-monkey">æ²¹çŒ´æ’ä»¶&amp;ç¼–å†™è„šæœ¬ğŸ’</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/groovy-note">groovy note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/health">Health å…³çˆ±ç¨‹åºå‘˜å¥åº·ğŸ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/html-note">HTML å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/idea-note">InteliJ idea tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/interview-system-design">ç»å…¸çš„ç³»ç»Ÿè®¾è®¡æ€è·¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iot">Iot ç‰©è”ç½‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-concurrent">Java ConcurrentğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-memory-model-jmm-jvm">JMM and GCğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-note">Java Core ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/jquery-note">JQuery notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/js-tutorial">JavaScript tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kotlin">kotlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/kubernetes-k8s">kubernetes-k8s â˜ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux-note">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mac">Mac å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/machine-learning-ml">machine-learning-ml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/maven-note">Maven NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/message-queue">Message QueueğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/money">Investment Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mongodb-note">MongoDB NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/monitor-system-grafana-prometheus-influxdb-hbase">monitor-system-grafana-prometheusç›‘æ§ğŸ–¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mvc-mvvm">MVC to MVVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/netty-note">netty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nlp-natural-language-processing">nlp-natural-language-processingğŸ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nodejs-yarn-npm">Nodejs, Yarn, Npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/oracle">Oracle å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-big-data-introduce">å¤§æ•°æ®å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-cache">Cache ç¼“å­˜ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-computational-ad">è®¡ç®—å¹¿å‘Š Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-crawler-spider">ç½‘ç»œçˆ¬è™« Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-db-design-note">å…³ç³»å‹æ•°æ®åº“è¡¨è®¾è®¡ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-desktop-develop">æ¡Œé¢åº”ç”¨å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-http">HTTP protocol Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-reactive-programming">å“åº”å¼ç¼–ç¨‹ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rest-api">RESTful api åŠ å…¶ä»–webServiceæŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rule-engine-note">è§„åˆ™å¼•æ“ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/php-note">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/play-framework">Playæ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/postgres-note">Postgres noteğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/process-workflow-bpm-engine">å·¥ä½œæµå¼•æ“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/protect-your-app-authentication-oauth2-jwt-https">Protect Your App å®‰å…¨ä¿æŠ¤è®¤è¯é‰´æƒğŸ”‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/python-note">PythonğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quant-money">é‡åŒ–äº¤æ˜“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quarkus">Quarkus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/react-note">ReactğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/real-time-communication-protocol">å®æ—¶é€šä¿¡ Real-time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/redis-note">RedisğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/regex">Regular Expression æ­£åˆ™ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/rust-note">Rust ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/saas-paas-iaas-as-a-service">SaaS Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/serverless">Serverless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/service-mesh">service mesh æœåŠ¡ç½‘æ ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/servlet">Servlet Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/shell-bash-note">shell-bashè„šæœ¬æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springcloud-note">Spring Cloud ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springmvc-note">Spring MVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/task-schedule-note">Task Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tcp-ip-note">TCP IP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tomcat-jetty-nginx">Tomcat Jetty Nginx ç­‰ web å®¹å™¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/vertx">Vertx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/video-creator">æ‹æ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/webassembly">webassembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/webpack-esbuild-vite-rollup">å‰ç«¯æ‰“åŒ…æ„å»ºå·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/windows-sub-system-on-linux">WSL ä½¿ç”¨</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">kubernetes-k8s â˜ï¸</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>kubernetes-k8s â˜ï¸</h1></header><p><a href="https://dockone.io/article/2434304" target="_blank" rel="noopener noreferrer">https://dockone.io/article/2434304</a></p><p>ç†Ÿç»ƒæŒæ¡ k8s ï¼Œè‡ªå·±æ­ä¸ªé›†ç¾¤ï¼Œä¹‹åå­¦ä¹  Kubernetes çš„äºŒæ¬¡å¼€å‘ï¼ŒCRD ä¸ operator </p><p><a href="https://github.com/fanux/sealos" target="_blank" rel="noopener noreferrer">https://github.com/fanux/sealos</a> ä¸€é”®å®‰è£…</p><p><a href="https://github.com/eip-work/kuboard-press" target="_blank" rel="noopener noreferrer">https://github.com/eip-work/kuboard-press</a> é¢æ¿, æ•™ç¨‹</p><p><a href="https://github.com/derailed/k9s" target="_blank" rel="noopener noreferrer">https://github.com/derailed/k9s</a> ç®¡ç† k8s çš„å‘½ä»¤è¡Œå·¥å…·</p><p><a href="https://github.com/caicloud/kube-ladder" target="_blank" rel="noopener noreferrer">https://github.com/caicloud/kube-ladder</a> å…¥é—¨æŒ‡å—
<a href="https://github.com/jpetazzo/container.training" target="_blank" rel="noopener noreferrer">https://github.com/jpetazzo/container.training</a></p><p><a href="https://github.com/kubernetes/kubernetes" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/kubernetes</a>
<a href="https://juejin.im/post/5db8c2b46fb9a020256692dc" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5db8c2b46fb9a020256692dc</a></p><p><a href="https://www.katacoda.com/courses/kubernetes/playground" target="_blank" rel="noopener noreferrer">https://www.katacoda.com/courses/kubernetes/playground</a> k8s web playground
<a href="https://www.katacoda.com/courses/kubernetes" target="_blank" rel="noopener noreferrer">https://www.katacoda.com/courses/kubernetes</a></p><p><a href="https://blog.csdn.net/qq_19734597/article/details/108337499" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_19734597/article/details/108337499</a> å‘½ä»¤è¡Œç®€å†™</p><ul><li><a href="#1-%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98">.1. é¢è¯•é—®é¢˜</a></li><li><a href="#2-what-and-why">.2. what and why</a><ul><li><a href="#21-k8s-%E6%98%AF%E5%81%9A%E4%BB%80%E4%B9%88%E7%9A%84">.2.1. k8s æ˜¯åšä»€ä¹ˆçš„</a></li><li><a href="#22-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8">.2.2. ä¸ºä»€ä¹ˆä½¿ç”¨:</a></li></ul></li><li><a href="#3-%E9%9B%86%E7%BE%A4%E7%BB%93%E6%9E%84">.3. é›†ç¾¤ç»“æ„</a><ul><li><a href="#31-%E4%B8%80%E4%B8%AA-master-%E8%8A%82%E7%82%B9">.3.1. ä¸€ä¸ª master èŠ‚ç‚¹</a></li><li><a href="#32-%E4%B8%80%E7%BE%A4worker%E8%8A%82%E7%82%B9">.3.2. ä¸€ç¾¤workerèŠ‚ç‚¹</a></li></ul></li><li><a href="#4-%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84">.4. é€»è¾‘ç»“æ„</a><ul><li><a href="#41-pod">.4.1. pod</a></li><li><a href="#42-volume">.4.2. volume</a></li><li><a href="#43-controllers">.4.3. controllers</a></li><li><a href="#44-service">.4.4. service</a></li><li><a href="#45-flannel">.4.5. flannel</a></li><li><a href="#46-ingress">.4.6. ingress</a></li><li><a href="#47-name-namespace">.4.7. name namespace</a></li></ul></li><li><a href="#5-%E8%B5%84%E6%BA%90%E6%8F%8F%E8%BF%B0%E6%96%87%E4%BB%B6">.5. èµ„æºæè¿°æ–‡ä»¶</a><ul><li><a href="#51-%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90-yml">.5.1. é€šè¿‡å‘½ä»¤ç”Ÿæˆ yml</a></li><li><a href="#52-pod-%E7%9A%84--yaml-%E6%8F%8F%E8%BF%B0%E6%96%87%E4%BB%B6">.5.2. pod çš„  yaml æè¿°æ–‡ä»¶</a></li><li><a href="#53-deployment-%E7%9A%84%E6%8F%8F%E8%BF%B0%E6%96%87%E4%BB%B6">.5.3. deployment çš„æè¿°æ–‡ä»¶</a></li><li><a href="#54-service">.5.4. service</a></li></ul></li><li><a href="#6-%E6%A0%87%E7%AD%BE">.6. æ ‡ç­¾</a></li><li><a href="#7-%E6%B3%A8%E8%A7%A3">.7. æ³¨è§£</a></li><li><a href="#8-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4">.8. å‘½åç©ºé—´</a></li><li><a href="#9-pod-%E7%AE%A1%E7%90%86">.9. pod ç®¡ç†</a><ul><li><a href="#91-%E6%8E%A2%E6%B5%8B-pod-%E6%98%AF%E5%90%A6%E5%81%A5%E5%BA%B7">.9.1. æ¢æµ‹ pod æ˜¯å¦å¥åº·</a></li><li><a href="#92-pod-%E5%89%AF%E6%9C%AC">.9.2. pod å‰¯æœ¬</a></li><li><a href="#93-%E8%BF%90%E8%A1%8C%E5%8D%95%E4%B8%AA%E4%BB%BB%E5%8A%A1-job">.9.3. è¿è¡Œå•ä¸ªä»»åŠ¡ Job</a></li><li><a href="#94-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1-cronjob">.9.4. å®šæ—¶ä»»åŠ¡ CronJob</a></li></ul></li><li><a href="#10-pod-%E9%80%9A%E4%BF%A1">.10. pod é€šä¿¡</a><ul><li><a href="#101-proxy">.10.1. proxy</a></li><li><a href="#102-service">.10.2. Service</a></li><li><a href="#103-pod-%E9%97%B4%E9%80%9A%E4%BF%A1">.10.3. pod é—´é€šä¿¡</a></li><li><a href="#104-%E9%80%9A%E8%BF%87-service-%E8%BF%9E%E6%8E%A5%E5%A4%96%E9%83%A8%E6%9C%8D%E5%8A%A1">.10.4. é€šè¿‡ Service è¿æ¥å¤–éƒ¨æœåŠ¡</a><ul><li><a href="#1041-%E9%80%9A%E8%BF%87%E6%89%8B%E5%8A%A8%E7%94%9F%E6%88%90-endpoint">.10.4.1. é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ endpoint</a></li><li><a href="#1042-%E9%80%9A%E8%BF%87-externalname-%E7%B1%BB%E5%9E%8B%E7%9A%84-service">.10.4.2. é€šè¿‡ externalName ç±»å‹çš„ Service</a></li></ul></li><li><a href="#105-%E5%B0%86%E6%9C%8D%E5%8A%A1%E6%9A%B4%E9%9C%B2%E7%BB%99%E5%A4%96%E9%83%A8">.10.5. å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨</a><ul><li><a href="#1051-%E5%B0%86%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%AE%BE%E7%BD%AE%E6%88%90-nodeport">.10.5.1. å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ NodePort</a></li><li><a href="#1052-%E5%B0%86%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%AE%BE%E7%BD%AE%E6%88%90loadbalance">.10.5.2. å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆLoadBalance</a></li><li><a href="#1053-%E5%88%9B%E5%BB%BA%E4%B8%80-%E4%B8%AAingress%E8%B5%84%E6%BA%90">.10.5.3. åˆ›å»ºä¸€ ä¸ªIngressèµ„æº</a></li></ul></li></ul></li><li><a href="#11-%E5%91%BD%E4%BB%A4">.11. å‘½ä»¤</a><ul><li><a href="#111-%E5%AE%89%E8%A3%85">.11.1. å®‰è£…</a></li><li><a href="#112-kind">.11.2. kind</a></li><li><a href="#113-minikube">.11.3. minikube</a></li><li><a href="#114-%E4%BD%BF%E7%94%A8-kubectl">.11.4. ä½¿ç”¨ kubectl</a><ul><li><a href="#1141-%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF">.11.4.1. åŸºæœ¬ä¿¡æ¯</a></li><li><a href="#1142-%E5%88%9B%E5%BB%BA-create-expose">.11.4.2. åˆ›å»º create expose</a></li><li><a href="#1143-%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E5%88%B0%E5%AE%B9%E5%99%A8-exec">.11.4.3. æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨ exec</a></li><li><a href="#1144-%E4%BF%AE%E6%94%B9">.11.4.4. ä¿®æ”¹</a></li><li><a href="#1145-%E8%B5%84%E6%BA%90%E5%88%97%E8%A1%A8-get">.11.4.5. èµ„æºåˆ—è¡¨ get</a></li><li><a href="#1146-%E6%9F%A5%E8%AF%A2%E8%AF%A6%E7%BB%86%E6%8F%8F%E8%BF%B0-describe">.11.4.6. æŸ¥è¯¢è¯¦ç»†æè¿° describe</a></li><li><a href="#1147-%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97-logs">.11.4.7. æŸ¥è¯¢æ—¥å¿— logs</a></li><li><a href="#1148-%E5%88%A0%E9%99%A4-delete">.11.4.8. åˆ é™¤ delete</a></li></ul></li><li><a href="#115-kubeadmin">.11.5. kubeadmin</a></li></ul></li><li><a href="#12-%E5%8F%AF%E8%A7%86%E5%8C%96%E7%95%8C%E9%9D%A2">.12. å¯è§†åŒ–ç•Œé¢</a></li><li><a href="#13-vagrant-%E6%90%AD%E5%BB%BA-k8s-%E7%8E%AF%E5%A2%83">.13. vagrant æ­å»º k8s ç¯å¢ƒ</a></li><li><a href="#14-cka-%E8%AF%81%E4%B9%A6">.14. cka è¯ä¹¦</a></li><li><a href="#15-k3s">.15. k3s</a></li><li><a href="#16-k0s">.16. k0s</a></li><li><a href="#17-rancher">.17. rancher</a></li><li><a href="#18-harbor">.18. Harbor</a></li><li><a href="#19-helm-chart">.19. helm chart</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é¢è¯•é—®é¢˜">é¢è¯•é—®é¢˜<a href="#é¢è¯•é—®é¢˜" class="hash-link" aria-label="é¢è¯•é—®é¢˜çš„ç›´æ¥é“¾æ¥" title="é¢è¯•é—®é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸ºä»€ä¹ˆéœ€è¦ pod? ä¸ºä»€ä¹ˆä¸èƒ½ç®€å•åœ°æŠŠæ‰€æœ‰è¿›ç¨‹éƒ½æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„å®¹å™¨ä¸­?</p><ul><li>å¦‚æœåœ¨å•ä¸ªå®¹å™¨ä¸­è¿è¡Œå¤šä¸ªä¸ç›¸å…³çš„è¿›ç¨‹ï¼Œ é‚£ä¹ˆä¿æŒæ‰€æœ‰è¿›ç¨‹è¿è¡Œ(å¦‚å¤±è´¥é‡å¯)ã€ ç®¡ç†å®ƒä»¬çš„æ—¥å¿—ä¼šå›°éš¾(æ—¥å¿—ä¼šæ··åœ¨ä¸€èµ·)ã€‚</li></ul><p>ä¸ºä»€ä¹ˆè¦å°†ä¸€ä¸ª app çš„ å‰ç«¯æœåŠ¡å™¨ å’Œ åç«¯æœåŠ¡å™¨ åˆ†ä¸º ä¸¤ä¸ª pod éƒ¨ç½²?</p><ul><li><p>é€ æˆè®¡ç®—èµ„æºæµªè´¹: å¦‚æœéƒ¨ç½²åˆ°åŒä¸€ä¸ª pod, é‚£ä¹ˆå¯¹äº åŒèŠ‚ç‚¹ k8s, å°†æ€»æ˜¯åªèƒ½åˆ©ç”¨ä¸€ä¸ªèŠ‚ç‚¹</p></li><li><p>æ‰©ç¼©å®¹ä¸ä¾¿: k8s æ‰©å®¹åŸºæœ¬å•ä½å°±æ˜¯ pod, å‰åç«¯è‹¥éƒ¨ç½²åˆ°åŒä¸ª pod, ä¼šé€ æˆæ‰©ç¼©å®¹ç²’åº¦å¤ªå¤§. è€Œä¸”å¯¹äº æ•°æ®åº“æœåŠ¡å™¨, æ‰©ç¼©å®¹æ— æ³•è¿™æ ·ç®€å•å¤„ç†</p></li></ul><p>å¦‚ä½•å†³å®šæ˜¯å¦å°†å¤šä¸ª container åˆ’åˆ†åˆ°ä¸€ä¸ª pod?</p><ul><li>æ‰©ç¼©å®¹æ˜¯å¦èƒ½å¤Ÿä¸€èµ·è¿›è¡Œ</li><li>æ˜¯å¦å¯ä»¥åœ¨åŒä¸ªä¸»æœºè¿è¡Œ</li></ul><p>11å¹´è¿ç»´å·¥ä½œç»éªŒï¼Œç°ä»äº‹è…¾è®¯å·¥ä¸šäº’è”ç½‘è¿ç»´å·¥ä½œï¼›
DevOpsè¿ç»´å·¥ç¨‹å¸ˆï¼Œå¼€æºçˆ±å¥½è€…ï¼›
3å¹´+Kuberneteså¹³å°ç»éªŒï¼Œå¯¹Kubernetesç”Ÿæ€æœ‰è‡ªå·±çš„è®¤è¯†ï¼›
æŒæ¡Jenkins+Gitlab+HelmæŒç»­é›†æˆ/æŒç»­äº¤ä»˜å·¥å…·é“¾ï¼›
å¯¹æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç¼“å­˜ç­‰ä¸­é—´ä»¶ï¼Œè½¯ä»¶æ¶æ„ä½“ç³»æœ‰ä¸€å®šçš„äº†è§£ï¼›
ç†Ÿç»ƒæŒæ¡shellç¼–ç¨‹ï¼Œç†Ÿæ‚‰Python,Goè¯­è¨€ï¼›
TODO</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-and-why">what and why<a href="#what-and-why" class="hash-link" aria-label="what and whyçš„ç›´æ¥é“¾æ¥" title="what and whyçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="k8s-æ˜¯åšä»€ä¹ˆçš„">k8s æ˜¯åšä»€ä¹ˆçš„<a href="#k8s-æ˜¯åšä»€ä¹ˆçš„" class="hash-link" aria-label="k8s æ˜¯åšä»€ä¹ˆçš„çš„ç›´æ¥é“¾æ¥" title="k8s æ˜¯åšä»€ä¹ˆçš„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æŠ½è±¡äº†æ•°æ®ä¸­å¿ƒçš„ç¡¬ä»¶åŸºç¡€è®¾æ–½ï¼Œå¯¹å¤–æš´éœ²ç»Ÿä¸€çš„æ¥å£ï¼Œå…·ä½“åŒ…æ‹¬</p><ul><li>è°ƒåº¦:  k8s è‡ªåŠ¨å†³å®šç»„ä»¶éƒ¨ç½²åˆ°å…·ä½“çš„å“ªä¸€å° æœåŠ¡å™¨èŠ‚ç‚¹ã€‚</li><li>è‡ªåŠ¨ä¿®å¤: è‡ªåŠ¨æ£€æŸ¥èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€, å§ç¨‹åºè¿ç§»åˆ°å¥åº·çš„èŠ‚ç‚¹ä¸Š</li><li>æ°´å¹³ä¼¸ç¼©:  è‡ªåŠ¨æ£€æµ‹ä¸šåŠ¡çš„è´Ÿè½½æƒ…å†µ, å¦‚æœ CPU è´Ÿè½½å¤ªé«˜, æˆ–è€…ç›¸åº”æ—¶é—´å¤ªé•¿, ä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å®¹</li></ul><p>åªéœ€è¦å‘Šè¯‰ k8s è¦åšä»€ä¹ˆ (æ¯”å¦‚ä¿æŒæŸä¸ª pod æœ‰ä¸‰ä¸ªå‰¯æœ¬), è€Œä¸å¿…å‘Šè¯‰å®ƒæ€ä¹ˆåš, å°±åƒ sql åªå‘Šè¯‰ æ•°æ®åº“è¦æŸ¥è¯¢é‚£äº›æ•°æ®, è€Œæ²¡æœ‰å‘Šè¯‰æ•°æ®åº“æ€ä¹ˆæŸ¥æ•°æ®</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºä»€ä¹ˆä½¿ç”¨">ä¸ºä»€ä¹ˆä½¿ç”¨:<a href="#ä¸ºä»€ä¹ˆä½¿ç”¨" class="hash-link" aria-label="ä¸ºä»€ä¹ˆä½¿ç”¨:çš„ç›´æ¥é“¾æ¥" title="ä¸ºä»€ä¹ˆä½¿ç”¨:çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å½“ container å¤ªå¤š, éœ€è¦ç®¡ç†, å•æœºæƒ…å†µä¸‹, è¿˜èƒ½ä¾é  docker-compose è¿™äº›å·¥å…·, å½“æœ‰å¾ˆå¤šæœºå™¨æ—¶, å°±å¿…é¡»é€šè¿‡ k8s æ¥å°† å®¹å™¨åˆç†åœ°åˆ†é…åˆ°è¿™äº›æœºå™¨ä¸­å» </p><ul><li>æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡</li><li>è‡ªåŠ¨éƒ¨ç½² and å›æ»š</li><li>æ›¿æ¢å¤±è´¥å®¹å™¨ (è‡ªæˆ‘ä¿®å¤)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é›†ç¾¤ç»“æ„">é›†ç¾¤ç»“æ„<a href="#é›†ç¾¤ç»“æ„" class="hash-link" aria-label="é›†ç¾¤ç»“æ„çš„ç›´æ¥é“¾æ¥" title="é›†ç¾¤ç»“æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€ä¸ª-master-èŠ‚ç‚¹">ä¸€ä¸ª master èŠ‚ç‚¹<a href="#ä¸€ä¸ª-master-èŠ‚ç‚¹" class="hash-link" aria-label="ä¸€ä¸ª master èŠ‚ç‚¹çš„ç›´æ¥é“¾æ¥" title="ä¸€ä¸ª master èŠ‚ç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>master èŠ‚ç‚¹ï¼šæ§åˆ¶ and ç®¡ç†æ•´ä¸ªé›†ç¾¤</p><p>é€šå¸¸ä¼šæœ‰å¤šä¸ªmaster node é«˜å¯ç”¨ , æ•…éšœè½¬ç§»</p><p>åŒ…å«è¿™äº›ç»„ä»¶</p><ul><li><p>etcd: åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨. ç”¨æ¥å­˜å‚¨ä¸»èŠ‚ç‚¹çš„æ•°æ® (é”®å€¼æ•°æ®åº“)</p></li><li><p>api serverï¼šç½‘å…³, å’Œå¤–ç•Œäº¤äº’, ä¾›å®¢æˆ·ç«¯è°ƒç”¨</p></li><li><p>schedulerï¼šè°ƒåº¦ï¼Œ å†³å®šå“ªä¸ª pod éƒ¨ç½²åˆ°å“ªä¸ªèŠ‚ç‚¹; ç›‘è§†é‚£äº›æ–°åˆ›å»ºçš„æœªæŒ‡å®šè¿è¡ŒèŠ‚ç‚¹çš„ Podï¼Œå¹¶é€‰æ‹©èŠ‚ç‚¹è®© Pod åœ¨ä¸Šé¢è¿è¡Œ</p></li><li><p>controller managerï¼šæ•´ä¸ªé›†ç¾¤çš„ç®¡å®¶ï¼Œç”¨æ¥ç®¡ç†èµ„æºå¯¹è±¡;å¦‚ å¤åˆ¶èŠ‚ç‚¹ï¼Œ æŒç»­è·Ÿè¸ªå·¥ä½œèŠ‚ç‚¹</p><ul><li>node controller åœ¨èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶è¿›è¡Œé€šçŸ¥å’Œå“åº”</li><li>Replication Controller ç»´æŠ¤æ­£ç¡®æ•°é‡çš„ Pod</li><li>Endpoints Controllerå¡«å……ç«¯ç‚¹(Endpoints)å¯¹è±¡(å³åŠ å…¥ Service ä¸ Pod)</li></ul></li></ul><p>Minikube ç®¡ç†çš„æ˜¯å•èŠ‚ç‚¹ k8sï¼Œ master nodeï¼Œ å’Œ worker node éƒ½åœ¨ä¸€å°ç‰©ç†ä¸»æœºä¸Š</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€ç¾¤workerèŠ‚ç‚¹">ä¸€ç¾¤workerèŠ‚ç‚¹<a href="#ä¸€ç¾¤workerèŠ‚ç‚¹" class="hash-link" aria-label="ä¸€ç¾¤workerèŠ‚ç‚¹çš„ç›´æ¥é“¾æ¥" title="ä¸€ç¾¤workerèŠ‚ç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>worker èŠ‚ç‚¹ï¼šè¿è¡Œå®é™…éƒ¨ç½²çš„ å®¹å™¨</p><p>å¯ä»¥åªæœ‰ä¸€ä¸ª worker node</p><p>åŒ…å«è¿™äº›ç»„ä»¶    </p><ul><li><p>kubelet: å’Œ master èŠ‚ç‚¹çš„ api server é€šä¿¡ and ç®¡ç†æ‰€åœ¨çš„ èŠ‚ç‚¹/æœºå™¨ä¸Šçš„ pod (åˆ›å»ºã€ä¿®æ”¹ã€ç›‘æ§ã€åˆ é™¤)</p><p>  ç›¸å½“äºèŠ‚ç‚¹çš„ä»£ç†, å’Œ master èŠ‚ç‚¹äº¤äº’</p></li><li><p>kube-proxy: è´Ÿè´£ pod é—´çš„è´Ÿè½½å‡è¡¡ ç½‘ç»œä»£ç†</p></li><li><p>Fluentdï¼Œä¸»è¦è´Ÿè´£æ—¥å¿—æ”¶é›†ã€å­˜å‚¨ä¸æŸ¥è¯¢</p></li><li><p>container runtime (docker) åˆ›å»ºå®¹å™¨</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€»è¾‘ç»“æ„">é€»è¾‘ç»“æ„<a href="#é€»è¾‘ç»“æ„" class="hash-link" aria-label="é€»è¾‘ç»“æ„çš„ç›´æ¥é“¾æ¥" title="é€»è¾‘ç»“æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pod">pod<a href="#pod" class="hash-link" aria-label="podçš„ç›´æ¥é“¾æ¥" title="podçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>pod: ç”± ä¸€ä¸ªæˆ–å¤šä¸ªç›¸äº’å…³è”çš„ container ç»„æˆ, æ˜¯ k8s ç®¡ç†çš„åŸºæœ¬å•ä½, ä»£è¡¨ç€é›†ç¾¤ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿä¸»æœº</p><p>ä¸€ä¸ªpod åªå¯èƒ½å­˜åœ¨äºä¸€ä¸ª worker node æœºå™¨ä¸Š, ä¸å¯è·¨èŠ‚ç‚¹</p><p>ä¸€ä¸ª pod å†…çš„æ‰€æœ‰å®¹å™¨å…±äº«ç›¸åŒçš„ Linux network å‘½åç©ºé—´. è¿™æ ·æ¯ä¸ª pod å°±åƒä¸€å°ç‹¬ç«‹çš„ ä¸»æœº, æœ‰è‡ªå·±çš„ ip (é›†ç¾¤å†…éƒ¨åœ°å€), ä¸»æœºå, ç«¯å£ (pod ä¸­çš„ containers å…±äº« è¯¥ ip ä»¥åŠ ç«¯å£ç©ºé—´, å…·æœ‰ç›¸åŒçš„ loopback ç½‘ç»œæ¥å£,å¯ä½¿ç”¨ localhostç›¸äº’é€šä¿¡). </p><p>å¯ä»¥å’Œ docker-compose å¯åŠ¨çš„å¤šä¸ª container ç±»æ¯”</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="volume">volume<a href="#volume" class="hash-link" aria-label="volumeçš„ç›´æ¥é“¾æ¥" title="volumeçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ pod ä¸­å¯è®¿é—®çš„æ–‡ä»¶ç›®å½•</p><p>å¯è¢«æŒ‚è½½åˆ° pod ä¸­çš„ä¸€ä¸ª/å¤šä¸ª container çš„æŒ‡å®šè·¯å¾„ ä¸‹</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="controllers">controllers<a href="#controllers" class="hash-link" aria-label="controllersçš„ç›´æ¥é“¾æ¥" title="controllersçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>pod æ§åˆ¶å™¨, éƒ¨ç½²/ç®¡ç† pods</p><ul><li><p>replicaSet åˆ›å»º/å¤åˆ¶  pod å®ä¾‹, ç¡®ä¿ pod å‰¯æœ¬æ•°é‡, ç”¨æ¥ä»£æ›¿ replication Controller , ä½†æ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨Replica Setsè®¾ç½®ï¼Œè€Œæ˜¯è¦ä½¿ç”¨Deploymentsã€‚DeploymentsåŒ…è£…äº†Replica Setsï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­è®¾ç½®å¹¶æ·»åŠ å›æ»šæ›´æ–°å‡çº§åŠŸèƒ½</p></li><li><p>Deployment æ— çŠ¶æ€åº”ç”¨éƒ¨ç½², æŒ‡å®šä¸€ç»„ pod çš„å‰¯æœ¬æ•°é‡, ç‰ˆæœ¬; ä¸€æ¬¡ deployment ä¼šäº§ç”Ÿå¤šä¸ª pods</p><p>  ç®¡ç† ReplicaSet, æ”¯æŒæ»šåŠ¨æ›´æ–°</p></li><li><p>StatefulSet æœ‰çŠ¶æ€åº”ç”¨éƒ¨ç½² (å¦‚ MySQL)</p></li><li><p>daemonset ç¡®ä¿æ¯ä¸ª node  éƒ½è¿è¡Œä¸€ä¸ªæŒ‡å®š pod</p></li><li><p>job ä¸€æ¬¡æ€§ä»»åŠ¡</p></li><li><p>cronjob å®šæ—¶ä»»åŠ¡</p></li><li><p>replication Controller: ç”¨äºåˆ›å»º/å¤åˆ¶  pod å®ä¾‹. ç¡®ä¿ pod å®ä¾‹æ•°ç¬¦åˆè¦æ±‚</p><p>  <code>kubectl run ...</code> ä¼šåˆ›å»ºä¸€ä¸ª rcï¼Œ ç„¶å rc åˆ›å»º pod ï¼ˆæ‰€ä»¥åˆ é™¤è¿™æ ·çš„ podï¼Œ éœ€è¦å…ˆåˆ é™¤ rcï¼‰</p><p>  å·¥ä½œæµç¨‹ï¼šå¯»æ‰¾ ç¬¦åˆ label selector çš„podï¼Œ æ¯”è¾ƒæ‰¾åˆ°çš„ pod å’ŒæœŸæœ›æ•°é‡ï¼Œ å°‘äº†å°±ä»å½“å‰æ¨¡æ¿åˆ›å»ºæ–°çš„ pod å‰¯æœ¬ ï¼Œ å¤šäº†ï¼Œ å°±åˆ é™¤å¤šçš„ pod</p><p>  ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><p>label selectorï¼š ç”¨äºç¡®å®šReplicationControllerä½œç”¨åŸŸä¸­æœ‰å“ªäº› pod</p></li><li><p>replica count (å‰¯æœ¬ä¸ªæ•°ï¼‰ï¼Œ æŒ‡å®šåº”è¿è¡Œçš„pod æ•°é‡</p></li><li><p>pod template (podæ¨¡æ¿ï¼‰ï¼Œ ç”¨äºåˆ›å»ºæ–°çš„pod å‰¯æœ¬</p><p>åœ¨æ–°ç‰ˆçš„ K8s ä¸­ï¼Œå»ºè®®ä½¿ç”¨ ReplicaSet ä½œä¸ºå‰¯æœ¬æ§åˆ¶å™¨ï¼ŒReplicationController ä¸å†ä½¿ç”¨äº†</p></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service">service<a href="#service" class="hash-link" aria-label="serviceçš„ç›´æ¥é“¾æ¥" title="serviceçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æš´éœ² é›†ç¾¤å†…éƒ¨çš„ä¸€ç»„ pods çš„å¤–éƒ¨è®¿é—®æ¥å£, ä¾›å¤–éƒ¨è®¿é—®, ä»¥è´Ÿè½½å‡è¡¡. æœ‰è‡ªå·±çš„é™æ€ ip</p><p>ç±»ä¼¼ ç½‘å…³çš„è§’è‰², é€šè¿‡æŸä¸ª service, å¯è®¿é—®ä¸€ç»„æä¾›ç›¸åŒæœåŠ¡çš„ pods</p><p>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ï¼š ç«¯å£è½¬å‘ <code>kubectl port-forward</code>, ç”¨äºä¸´æ—¶è°ƒè¯•</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flannel">flannel<a href="#flannel" class="hash-link" aria-label="flannelçš„ç›´æ¥é“¾æ¥" title="flannelçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ˜¯CoreOSå›¢é˜Ÿé’ˆå¯¹Kubernetesè®¾è®¡çš„ä¸€ä¸ªç½‘ç»œè§„åˆ’æœåŠ¡ï¼Œç®€å•æ¥è¯´ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯è®©é›†ç¾¤ä¸­çš„ä¸åŒèŠ‚ç‚¹ä¸»æœºåˆ›å»ºçš„Dockerå®¹å™¨éƒ½å…·æœ‰å…¨é›†ç¾¤å”¯ä¸€çš„è™šæ‹ŸIPåœ°å€, è®©å±äºä¸åŒèŠ‚ç‚¹ä¸Šçš„å®¹å™¨èƒ½å¤Ÿç›´æ¥é€šè¿‡å†…ç½‘IPé€šä¿¡</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ingress">ingress<a href="#ingress" class="hash-link" aria-label="ingressçš„ç›´æ¥é“¾æ¥" title="ingressçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://mritd.com/2017/03/04/how-to-use-nginx-ingress/" target="_blank" rel="noopener noreferrer">https://mritd.com/2017/03/04/how-to-use-nginx-ingress/</a></p><p>ç”¨æ¥è·¯ç”±å¤šä¸ª service, ç›¸å½“äº nginx, å¸¸ç”¨çš„å®ç°æ˜¯ ingress-nginx</p><p>åŸç†: Ingress Contronler é€šè¿‡ä¸ Kubernetes API äº¤äº’ï¼ŒåŠ¨æ€çš„å»æ„ŸçŸ¥é›†ç¾¤ä¸­ Ingress è§„åˆ™å˜åŒ–ï¼Œç„¶åè¯»å–å®ƒï¼ŒæŒ‰ç…§è‡ªå®šä¹‰çš„è§„åˆ™ï¼Œè§„åˆ™å°±æ˜¯å†™æ˜äº†å“ªä¸ªåŸŸåå¯¹åº”å“ªä¸ªserviceï¼Œç”Ÿæˆä¸€æ®µ Nginx é…ç½®ï¼Œå†å†™åˆ° Nginx-ingress-controlçš„ Pod é‡Œï¼Œè¿™ä¸ª Ingress Contronler çš„podé‡Œé¢è¿è¡Œç€ä¸€ä¸ªnginxæœåŠ¡ï¼Œæ§åˆ¶å™¨ä¼šæŠŠç”Ÿæˆçš„nginxé…ç½®å†™å…¥/etc/nginx.confæ–‡ä»¶ä¸­ï¼Œç„¶å reload ä¸€ä¸‹ ä½¿ç”¨é…ç½®ç”Ÿæ•ˆã€‚ä»¥æ­¤æ¥è¾¾åˆ°åŸŸååˆ†é…ç½®åŠåŠ¨æ€æ›´æ–°çš„é—®é¢˜ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="name-namespace">name namespace<a href="#name-namespace" class="hash-link" aria-label="name namespaceçš„ç›´æ¥é“¾æ¥" title="name namespaceçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>k8s resources name , every resouece have its own name, kind, metadata, spec, status...</p><p>namespace: isolate all all kinds of resources. resources of the same kind cannot have the same name in the same namespace</p><p>default init namespece: default, kube-system</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èµ„æºæè¿°æ–‡ä»¶">èµ„æºæè¿°æ–‡ä»¶<a href="#èµ„æºæè¿°æ–‡ä»¶" class="hash-link" aria-label="èµ„æºæè¿°æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="èµ„æºæè¿°æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡å‘½ä»¤ç”Ÿæˆ-yml">é€šè¿‡å‘½ä»¤ç”Ÿæˆ yml<a href="#é€šè¿‡å‘½ä»¤ç”Ÿæˆ-yml" class="hash-link" aria-label="é€šè¿‡å‘½ä»¤ç”Ÿæˆ ymlçš„ç›´æ¥é“¾æ¥" title="é€šè¿‡å‘½ä»¤ç”Ÿæˆ ymlçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create deployment tomcat6 --image=tomcat:6.0.53-jre8 --dry-run -o yaml &gt; tomcat6.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f xxx.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pod-çš„--yaml-æè¿°æ–‡ä»¶">pod çš„  yaml æè¿°æ–‡ä»¶<a href="#pod-çš„--yaml-æè¿°æ–‡ä»¶" class="hash-link" aria-label="pod çš„  yaml æè¿°æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="pod çš„  yaml æè¿°æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1 </span><span class="token comment" style="color:#999988;font-style:italic">#(k8s api server version)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Deploymentã€Jobã€Ingressã€Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod </span><span class="token comment" style="color:#999988;font-style:italic">#(å¯¹è±¡ç±»å‹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#åŒ…æ‹¬åç§°ã€å‘½åç©ºé—´ã€æ ‡ç­¾å’Œå…³äºè¯¥å®¹å™¨çš„å…¶ä»–ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># optional, default ns: default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">xxx_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">yyy_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yyy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># åŒ…æ‹¬ä¸€äº›containerï¼Œstorageï¼Œvolume, æ¢é’ˆ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># å®¹å™¨ä¼šç›‘å¬çš„ç«¯å£, ä»…ä»…æ˜¯å±•ç¤º, æ²¡æœ‰ æŒ‡å®šä½œç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å­˜æ´»æ¢é’ˆï¼Œ ç”¨äº pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨ç”Ÿäº§ä¸­ è¿è¡Œçš„pod, ä¸€å®š è¦å®šä¹‰ ä¸€ ä¸ªå­˜ æ´»æ¢é’ˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">livenessProbe</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">httpGet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœæ²¡æœ‰è®¾ç½®åˆå§‹å»¶è¿Ÿï¼Œæ¢é’ˆå°†åœ¨å¯åŠ¨æ—¶ç«‹å³å¼€å§‹æ¢æµ‹å®¹å™¨ï¼Œ è¿™é€šå¸¸ä¼šå¯¼è‡´æ¢æµ‹å¤±è´¥ï¼Œ å› ä¸ºåº”ç”¨ç¨‹åºè¿˜æ²¡å‡†å¤‡å¥½å¼€å§‹æ¥æ”¶è¯·æ±‚ã€‚ å¦‚æœå¤±è´¥æ¬¡æ•°è¶…è¿‡é˜…å€¼ï¼Œåœ¨åº”ç”¨ç¨‹åºèƒ½æ­£ç¡®å“åº”è¯·æ±‚ä¹‹å‰ï¼Œ å®¹å™¨å°±ä¼šé‡å¯ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">initialDelaySeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨ç¬¬ä¸€æ¬¡æ¢æµ‹å‰ï¼Œ ç­‰å¾… 15s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">delay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ç¤ºåœ¨å®¹å™¨å¯åŠ¨åç«‹å³å¼€å§‹æ¢æµ‹ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># å®¹å™¨å¿…é¡»åœ¨1ç§’å†…è¿›è¡Œå“åº”ï¼Œ ä¸ç„¶è¿™æ¬¡æ¢æµ‹è®°ä½œå¤±è´¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">period</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æ¯10ç§’æ¢æµ‹ä¸€æ¬¡å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">failure</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æ¢æµ‹è¿ç»­ä¸‰æ¬¡å¤±è´¥(#faè¾½ure= 3)åé‡å¯å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#åŒ…å«è¿è¡Œä¸­çš„ po çš„å½“å‰ä¿¡æ¯ï¼Œä¾‹å¦‚ po æ‰€å¤„çš„æ¡ä»¶ æ¯ä¸ªå®¹å™¨çš„æè¿°å’ŒçŠ¶æ€ï¼Œä»¥åŠå†…éƒ¨ IP å’Œå…¶ä»–åŸºæœ¬ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-çš„æè¿°æ–‡ä»¶">deployment çš„æè¿°æ–‡ä»¶<a href="#deployment-çš„æè¿°æ–‡ä»¶" class="hash-link" aria-label="deployment çš„æè¿°æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="deployment çš„æè¿°æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">## optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#ä½¿ç”¨ æ ‡ç­¾é€‰æ‹©å™¨ä½¿å¾— pod åªè¢«è°ƒåº¦åˆ°ç¬¦åˆè¦æ±‚çš„ worker node </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># select pods that will be affected by this deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># have to match labels that specified in template.metadata.labels</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># tells deployment to run 2 pods matching the template</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># define pods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-1">service<a href="#service-1" class="hash-link" aria-label="serviceçš„ç›´æ¥é“¾æ¥" title="serviceçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LoadBalancer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ ‡ç­¾">æ ‡ç­¾<a href="#æ ‡ç­¾" class="hash-link" aria-label="æ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="æ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ ‡ç­¾ (label)ï¼šæ ‡ç­¾æ˜¯å¯ä»¥é™„åŠ åˆ°èµ„æº (pod, node ...) çš„ä»»æ„é”®å€¼å¯¹. ç”¨æ¥å¯¹ èµ„æºè¿›è¡Œ åˆ†ç±»ç®¡ç†</p><p>æ ‡ç­¾é€‰æ‹©å™¨ï¼šå¯ä»¥é€‰å‡ºç¬¦åˆè¦æ±‚çš„ pod å­é›†</p><ul><li>åŒ…å«/ä¸åŒ…å« ç‰¹å®š key çš„ èµ„æº</li><li>åŒ…å«ç‰¹å®š keyï¼Œ value çš„ èµ„æº</li><li>åŒ…å« ç‰¹å®š keyï¼Œ ä¸” value å’ŒæŒ‡å®šçš„ä¸åŒçš„èµ„æº</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ³¨è§£">æ³¨è§£<a href="#æ³¨è§£" class="hash-link" aria-label="æ³¨è§£çš„ç›´æ¥é“¾æ¥" title="æ³¨è§£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ³¨è§£: TODO</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‘½åç©ºé—´">å‘½åç©ºé—´<a href="#å‘½åç©ºé—´" class="hash-link" aria-label="å‘½åç©ºé—´çš„ç›´æ¥é“¾æ¥" title="å‘½åç©ºé—´çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>K8S namespace: ä¸º å¯¹è±¡èµ„æºæä¾›äº†ä¸€ä¸ªä½œç”¨åŸŸ, åœ¨ä¸åŒçš„ ä½œç”¨åŸŸä¸­å¯ä»¥ä½¿ç”¨ç›¸åŒçš„èµ„æºåï¼Œ ä½†è¿™ç›¸åŒçš„èµ„æºåä»£è¡¨äº†ä¸åŒçš„èµ„æºã€‚ ç±»æ¯” java package</p><ul><li><p>é€šè¿‡ label å¯¹ pod è¿›è¡Œåˆ†ç»„, æ¯ä¸ª ç»„ å¯èƒ½æœ‰ pod é‡å , é€šè¿‡ k8s namespace åˆ†ç»„å¯ä»¥å®Œå…¨é¿å…é‡å </p></li><li><p>ns åªéš”ç¦»èµ„æºï¼Œ ä¸éš”ç¦»è¿è¡Œçš„å¯¹è±¡ ï¼ˆèµ„æºå®ä¾‹ï¼‰ï¼Œ å¦‚ ä¸åŒns ä¸­çš„ pod ä»ç„¶å¯é€šä¿¡</p></li><li><p>é€‚ç”¨äºå¤šç”¨æˆ· ä½¿ç”¨ k8sï¼Œ é™åˆ¶æŸä¸ªç”¨æˆ·çš„èµ„æºä½¿ç”¨é‡</p></li></ul><p>ä» ymal æ–‡ä»¶åˆ›å»º nsï¼š</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> custome</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ns</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>kubectl create -f custom-ns.yaml</code></p><p>é€šè¿‡å‘½ä»¤åˆ›å»ºnsï¼š <code>kubectl create namespace custom-namespace</code></p><p>åˆ‡æ¢ nsï¼š <code>kubectl config set-context $(kubectl config current-context) --namespace &lt;other ns&gt;</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pod-ç®¡ç†">pod ç®¡ç†<a href="#pod-ç®¡ç†" class="hash-link" aria-label="pod ç®¡ç†çš„ç›´æ¥é“¾æ¥" title="pod ç®¡ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ¢æµ‹-pod-æ˜¯å¦å¥åº·">æ¢æµ‹ pod æ˜¯å¦å¥åº·<a href="#æ¢æµ‹-pod-æ˜¯å¦å¥åº·" class="hash-link" aria-label="æ¢æµ‹ pod æ˜¯å¦å¥åº·çš„ç›´æ¥é“¾æ¥" title="æ¢æµ‹ pod æ˜¯å¦å¥åº·çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>k8s ä¼šä¿æŒ pod å§‹ç»ˆæ­£å¸¸è¿è¡Œï¼Œ å¦‚æœå®¹å™¨çš„ä¸»è¿›ç¨‹å´©æºƒï¼Œ Kubelet å°†é‡å¯å®¹å™¨ã€‚ å½“å®¹å™¨è¢«å¼ºè¡Œç»ˆæ­¢æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å®¹å™¨â€”-è€Œä¸æ˜¯é‡å¯åŸæ¥çš„å®¹å™¨</p><p>ä½†æ˜¯ è¿›ç¨‹æ²¡æœ‰å´©æºƒï¼Œ æœ‰æ—¶åº”ç”¨ç¨‹åºä¹Ÿä¼šåœæ­¢æ­£å¸¸å·¥ä½œã€‚ ä¾‹å¦‚ï¼Œ å…·æœ‰å†…å­˜æ³„æ¼çš„ Java åº”ç”¨ç¨‹åºå°†å¼€å§‹æŠ›å‡º OutOfMemoryErrors, ä½† JVM è¿›ç¨‹ä¼šä¸€ç›´è¿è¡Œ</p><ul><li><p>æ–¹æ³•1: ä» app å†…éƒ¨è‡ªå·±æ£€æµ‹, å¯ä»¥åœ¨åº”ç”¨ä¸­æ•è·è¿™ç±»é”™è¯¯ï¼Œ å¹¶åœ¨é”™è¯¯å‘ç”Ÿæ—¶é€€å‡ºè¯¥è¿›ç¨‹ã€‚</p><p>  å­˜åœ¨é—®é¢˜: åº”ç”¨å› ä¸ºæ— é™å¾ªç¯æˆ–æ­»é”è€Œåœæ­¢å“åº”, è¿™ä¸ªæ–¹æ³•å°±æ— æ•ˆäº†</p></li><li><p>æ–¹æ³•2: é¡»ä»å¤–éƒ¨æ£€æŸ¥åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µ</p><ul><li><p>å­˜æ´»æ¢é’ˆ (liveness probe) - æ£€æŸ¥å®¹å™¨æ˜¯å¦è¿˜åœ¨è¿è¡Œ</p><ul><li><p>HTTP GET æ¢é’ˆ, è¿”å› 2xx, 3xx åˆ™ä»£è¡¨æ­£å¸¸, ä¸é‡å¯</p></li><li><p>TCPå¥—æ¥å­—æ¢é’ˆ, å’Œ pod æ­£å¸¸å»ºç«‹ é“¾æ¥, æ­£å¸¸, ä¸é‡å¯</p></li><li><p>Execæ¢é’ˆ , è¿›å…¥ pod æŸä¸ª container, æ‰§è¡Œä»»æ„å‘½ä»¤, å¹¶æ£€æŸ¥å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ã€‚å¦‚æœçŠ¶æ€ç æ˜¯ 0, åˆ™æ¢æµ‹æˆåŠŸ</p></li></ul></li></ul></li></ul><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> custome</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">livenessProbe</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">httpGet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pod-å‰¯æœ¬">pod å‰¯æœ¬<a href="#pod-å‰¯æœ¬" class="hash-link" aria-label="pod å‰¯æœ¬çš„ç›´æ¥é“¾æ¥" title="pod å‰¯æœ¬çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ReplicationController æ˜¯ä¸€ç§Kubernetesèµ„æºï¼Œè´Ÿè´£åˆ›å»ºå’Œç®¡ç† pod å‰¯æœ¬</p><p>è¢« ReplicationController åˆ›å»ºçš„ pod ä¸º â€œæ‰˜ç®¡ podâ€ï¼Œ ç›´æ¥åˆ›å»ºçš„ pod ä¸º â€œéæ‰˜ç®¡ podâ€ã€‚æ‰˜ç®¡ pod å¼‚å¸¸é€€å‡º ï¼ˆå¦‚ worker node å´©æºƒï¼Œ æˆ– è¯¥ pod å´©æºƒï¼‰åï¼Œ ReplicationController ä¼š åˆ›å»ºæ–°çš„ pod ä»£æ›¿</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Replicationcontroller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰ReplicationControlleræ—¶ä¸è¦æŒ‡å®š é€‰æ‹©å™¨ï¼Œè®©Kubemetesä»podæ¨¡æ¿ä¸­æå–å®ƒã€‚è¿™æ ·YAMLæ›´ç®€çŸ­ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># rc åˆ›å»ºåï¼Œ label selector ä¸ä¼šå†æ›´æ”¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€èˆ¬åˆ›å»ºåä¼šæ›´æ”¹ template</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># åˆ›å»ºæ–° pod æ‰€ç”¨çš„ æ¨¡æ¿</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œçš„ æ ‡ç­¾å¿…é¡»å’Œ å‰é¢çš„ æ ‡ç­¾é€‰æ‹©å™¨ åŒ¹é…ï¼Œ å¦åˆ™å°†æ— ä¼‘æ­¢åœ°åˆ›å»ºæ–°çš„å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> luksa/kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>kubectl create -f kubia-rc.yaml</p><p>rc åˆ›å»ºåï¼Œç”±äºæ²¡æœ‰ä»»ä½•podæœ‰app=kubiaæ ‡ç­¾ï¼Œ ReplicationControllerä¼šæ ¹æ®podæ¨¡æ¿å¯åŠ¨ä¸‰ä¸ªæ–°çš„pod</p><p>ç”±ReplicationControlleråˆ›å»ºçš„podå¹¶ä¸æ˜¯ç»‘å®šåˆ°ReplicationControllerã€‚ åœ¨ä»»ä½•æ—¶åˆ»ï¼Œ ReplicationControllerç®¡ç†ä¸æ ‡ç­¾é€‰æ‹©å™¨åŒ¹é…çš„podã€‚ é€š è¿‡æ›´æ”¹podçš„æ ‡ç­¾ï¼Œ å¯ä»¥å°†å®ƒ ä»ReplicationControllerçš„ä½œç”¨åŸŸä¸­æ·»åŠ æˆ–åˆ é™¤ </p><p>å°½ç®¡ä¸€ä¸ª pod æ²¡æœ‰ç»‘å®šåˆ°ä¸€ä¸ª ReplicationController ï¼Œä½† pod åœ¨ metadata.ownerReferences ä¸­å¼•ç”¨å®ƒ ä»¥è½»æ¾ä½¿ç”¨å®ƒ æ¥æ‰¾åˆ°ä¸€ pod çš„ Replication controller</p><p>å‡çº§ pod å¯ä»¥è¿™ä¹ˆåšï¼šç¼–è¾‘ rc çš„template åï¼Œ åˆ é™¤ æ‰€æœ‰è¦å‡çº§çš„ podï¼Œ rc ä¼šè‡ªåŠ¨åˆ›å»ºå‡çº§åçš„ pod</p><p>================æ°´å¹³ç¼©æ‰©å®¹ï¼š</p><p>æ–¹æ³•1ï¼š<code>kubectl scale re kubia --replicas=3 </code> </p><p>æ–¹æ³•2ï¼š<code>kubectl edit re kubia</code> æ›´æ–° <code>spec.replicas</code> å€¼</p><p>======================æ–°çš„æ›¿ä»£è€… ReplicaSet</p><p>ReplicaSetï¼šReplicaSet çš„è¡Œä¸ºä¸ReplicationController å®Œå…¨ç›¸åŒï¼Œ ä½†æ ‡ç­¾é€‰æ‹©å™¨çš„è¡¨è¾¾èƒ½åŠ›æ›´å¼ºã€‚</p><ul><li>å•ä¸ª rc æ— æ³•å°† pod ä¸ ï¼ˆ label env=prod å’Œ env=dev ï¼‰ åŒæ—¶åŒ¹é…ï¼Œå®ƒåªèƒ½åŒ¹é…å¸¦æœ‰ env=devel æ ‡ç­¾çš„ pod æˆ–å¸¦æœ‰env=dev æ ‡ç­¾çš„ pod</li><li>rs å¯ä»¥ä»…ä»…æ ¹æ® æ˜¯å¦æœ‰ label key å­˜åœ¨ æ¥åŒ¹é…</li></ul><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ReplicaSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šäº†å¤šä¸ªè¡¨è¾¾å¼ï¼Œåˆ™æ‰€æœ‰è¿™äº›è¡¨è¾¾å¼éƒ½å¿…é¡»ä¸ºtrueæ‰èƒ½ä½¿é€‰æ‹©å™¨ä¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># podåŒ¹é…ã€‚å¦‚æœåŒæ—¶æŒ‡å®šmatchLabelså’ŒmatchExpressions, åˆ™æ‰€æœ‰æ ‡ç­¾éƒ½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># å¿…é¡»åŒ¹é…ï¼Œå¹¶ä¸”æ‰€æœ‰è¡¨è¾¾å¼å¿…é¡»è®¡ç®—ä¸ºtrueä»¥ä½¿è¯¥podä¸é€‰æ‹©å™¨åŒ¹é…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">hah</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hoo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">matchExpressions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hah </span><span class="token comment" style="color:#999988;font-style:italic"># è¦æ±‚ pod åŒ…å« key ä¸º hah çš„ label</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># è¦æ±‚ label å€¼ä¸º hoo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># operator å¯é€‰ In (label å€¼éœ€è¦åŒ¹é… value ä¸­çš„ä¸€ä¸ª), NotIn ï¼ˆlabel å€¼éœ€è¦ä¸åœ¨ values ä¸­ï¼‰ï¼ŒExists ï¼ˆlabel å¿…é¡»æœ‰æŒ‡å®š keyï¼Œä¸æŒ‡å®š valuesï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># DoesNotExist ï¼ˆpodä¸å¾—åŒ…å«æœ‰æŒ‡å®šåç§°çš„æ ‡ç­¾ã€‚valueså±æ€§ä¸å¾—æŒ‡å®šï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> In </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> hoo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># åˆ›å»ºæ–° pod æ‰€ç”¨çš„ æ¨¡æ¿</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œçš„ æ ‡ç­¾å¿…é¡»å’Œ å‰é¢çš„ æ ‡ç­¾é€‰æ‹©å™¨ åŒ¹é…ï¼Œ å¦åˆ™å°†æ— ä¼‘æ­¢åœ°åˆ›å»ºæ–°çš„å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">hah</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hoo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> luksa/kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>================ DaemonSet åœ¨æ¯ä¸ª worker node ä¸Šéƒ¨ç½²ä¸€ä¸ª pod </p><p>ç”¨æ¥è¿è¡Œç³»ç»ŸæœåŠ¡ï¼Œå¦‚ kube-proxy</p><p>DaemonSet ç®¡ç†ä¸‹çš„ pod ä¸æ˜¯éšæœºåˆ†å¸ƒåœ¨ worker node ä¸Šï¼Œ è€Œæ˜¯ä¿è¯ æ¯ä¸ª node åªå­˜åœ¨ä¸€ä¸ª podã€‚ </p><p>è‹¥ node ä¸‹çº¿ï¼Œ DaemonSet ä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹åˆ›å»ºæ–°çš„ podï¼Œ ä½†æ˜¯å½“æŸä¸ª node  çš„ pod è¢«æ„å¤–åˆ é™¤ï¼Œä¼šé‡æ–°åˆ›å»ºæ–°çš„ pod ä»£æ›¿</p><p>ä½†æ˜¯ å½“æ–°çš„ node æ·»åŠ è¿› é›†ç¾¤ï¼Œ DaemonSet ä¼šç«‹å³éƒ¨ç½²ä¸€ä¸ªæ–° pod åˆ°è¿™ä¸ª nodeã€‚</p><p>é€šè¿‡ <code>spec.nodeSelector</code> (èŠ‚ç‚¹é€‰æ‹©å™¨ï¼ŒåŸç†æ˜¯ç»™ node æ‰“æ ‡ç­¾) åªåœ¨ç‰¹å®š node éƒ¨ç½² pod</p><p>======================= Deployment ======= æ›´åŠ æ–¹ä¾¿çš„ç®¡ç† Replica Set</p><p>Deployment é¢å¤–çš„ç‰¹æ€§ï¼š</p><ul><li><p>äº‹ä»¶ï¼ŒçŠ¶æ€æŸ¥çœ‹ï¼šå¯ä»¥æŸ¥çœ‹Deploymentçš„å‡çº§è¯¦ç»†è¿›åº¦å’ŒçŠ¶æ€</p></li><li><p>å›æ»šï¼šå½“å‡çº§podé•œåƒæˆ–è€…ç›¸å…³å‚æ•°çš„æ—¶å€™å‘ç°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å›æ»šæ“ä½œå›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬æˆ–è€…æŒ‡å®šçš„ç‰ˆæœ¬</p></li><li><p>ç‰ˆæœ¬è®°å½•: æ¯ä¸€æ¬¡å¯¹Deploymentçš„æ“ä½œï¼Œéƒ½èƒ½ä¿å­˜ä¸‹æ¥ï¼Œç»™äºˆåç»­å¯èƒ½çš„å›æ»šä½¿ç”¨</p></li><li><p>æš‚åœå’Œå¯åŠ¨ï¼šå¯¹äºæ¯ä¸€æ¬¡å‡çº§ï¼Œéƒ½èƒ½å¤Ÿéšæ—¶æš‚åœå’Œå¯åŠ¨</p></li><li><p>å¤šç§å‡çº§æ–¹æ¡ˆï¼š</p><p>  Recreateï¼šåˆ é™¤æ‰€æœ‰å·²å­˜åœ¨çš„pod,é‡æ–°åˆ›å»ºæ–°çš„; </p><p>  RollingUpdateï¼šæ»šåŠ¨å‡çº§ï¼Œé€æ­¥æ›¿æ¢çš„ç­–ç•¥ï¼ŒåŒæ—¶æ»šåŠ¨å‡çº§æ—¶ï¼Œæ”¯æŒæ›´å¤šçš„é™„åŠ å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½®æœ€å¤§ä¸å¯ç”¨podæ•°é‡ï¼Œæœ€å°å‡çº§é—´éš”æ—¶é—´ç­‰ç­‰ã€‚</p></li></ul><p>================= HPA å¼¹æ€§ä¼¸ç¼© æ ¹æ®èµ„æºçš„ä½¿ç”¨æƒ…å†µè‡ªåŠ¨ç¼©æ‰©å®¹</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¿è¡Œå•ä¸ªä»»åŠ¡-job">è¿è¡Œå•ä¸ªä»»åŠ¡ Job<a href="#è¿è¡Œå•ä¸ªä»»åŠ¡-job" class="hash-link" aria-label="è¿è¡Œå•ä¸ªä»»åŠ¡ Jobçš„ç›´æ¥é“¾æ¥" title="è¿è¡Œå•ä¸ªä»»åŠ¡ Jobçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ æˆ‘ä»¬åªè°ˆè®ºäº†éœ€è¦æŒç»­è¿è¡Œçš„ podï¼Œ è¿™äº› pod ç”± rcï¼Œ rsï¼Œ ds ç®¡ç†ã€‚ ä½ ä¼šé‡åˆ°åªæƒ³è¿è¡Œå®Œæˆå·¥ä½œåå°±ç»ˆæ­¢ä»»åŠ¡çš„æ¸…å†µï¼Œ è¿™ç§ pod ç”± Job ç®¡ç†</p><p>è¯¥ pod åœ¨å†…éƒ¨è¿›ç¨‹æˆåŠŸç»“æŸæ—¶ï¼Œ ä¸é‡å¯å®¹å™¨ã€‚ä¸€æ—¦ä»»åŠ¡å®Œæˆï¼Œ pod å°±è¢«è®¤ä¸ºå¤„åƒå®ŒæˆçŠ¶æ€</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> batch/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> baä¸ƒch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">completions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># é¡ºåºè¿è¡Œ 5 ä¸ª pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">parallelism</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æœ€å¤šå¯ä»¥ 2 ä¸ª pod å¹¶è¡Œè¿è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">activeDeadlineSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">120</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># job è¶…æ—¶æ—¶é—´ï¼Œè‹¥ pod è¶…æ—¶è¿˜æ²¡ç»“æŸï¼Œç³»ç»Ÿå°†ç»ˆæ­¢ podï¼Œ æ ‡è®° job ä¸ºå¤±è´¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">backOffLimit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># job æ ‡è®°ä¸ºå¤±è´¥å‰çš„é‡è¯•æ¬¡æ•°ï¼Œ é»˜è®¤ 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Job çš„ pod é€‰æ‹©å™¨ å°†è‡ªåŠ¨æ ¹æ®è¿™é‡Œçš„ labels åˆ›å»º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> batch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># é‡å¯ç­–ç•¥ï¼Œ æŒ‡å®š å®¹å™¨ä¸­è¿›ç¨‹ç»“æŸåï¼Œ k8s åšä»€ä¹ˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸èƒ½æ˜¯ é»˜è®¤çš„ Always</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œ Never äº¦å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OnFailure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> luksa/batch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®šæ—¶ä»»åŠ¡-cronjob">å®šæ—¶ä»»åŠ¡ CronJob<a href="#å®šæ—¶ä»»åŠ¡-cronjob" class="hash-link" aria-label="å®šæ—¶ä»»åŠ¡ CronJobçš„ç›´æ¥é“¾æ¥" title="å®šæ—¶ä»»åŠ¡ CronJobçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>TODO</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pod-é€šä¿¡">pod é€šä¿¡<a href="#pod-é€šä¿¡" class="hash-link" aria-label="pod é€šä¿¡çš„ç›´æ¥é“¾æ¥" title="pod é€šä¿¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">proxy<a href="#proxy" class="hash-link" aria-label="proxyçš„ç›´æ¥é“¾æ¥" title="proxyçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-2">Service<a href="#service-2" class="hash-link" aria-label="Serviceçš„ç›´æ¥é“¾æ¥" title="Serviceçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>pods æœ‰è‡ªå·±çš„å†…éƒ¨åœ°å€, ä½†æ˜¯æ— æ³•ä» cluster å¤–éƒ¨è®¿é—®, é€šè¿‡ service å¯ä»¥æš´éœ²åˆ° cluster å¤–éƒ¨</p><p>service æ˜¯ä¸€ä¸ªé€»è¾‘ç»“æ„, å®šä¹‰ä¸€ç³»åˆ— pods, ä»¥åŠä»–ä»¬çš„è®¿é—®ç­–ç•¥(é€šè¿‡ç±»å‹æŒ‡å®š)</p><ul><li>ClusterIP (default): åªèƒ½åœ¨ cluster å†…éƒ¨è®¿é—®åˆ° service</li><li>NodePort: å¤–éƒ¨å¯ä»¥ä½¿ç”¨ <code>&lt;NodeIP&gt;:&lt;NodePort&gt;</code> è®¿é—® service</li><li>LoadBalancer: ç»™ service åˆ†é…ä¸€ä¸ªé™æ€ ip, å¯ä»¥è´Ÿè½½å‡è¡¡å¤šä¸ª pods</li><li>ExternalName: é€šè¿‡éšæœºåå­—è®¿é—® service (å¯é€šè¿‡ externalName åœ¨é…ç½®ä¸­æŒ‡å®š). This type requires v1.7 or higher of kube-dns.</li></ul><p>a default service named kubernetes will be created with type ClusterIP</p><p>å¯ä»¥å®šä¹‰é…ç½®æ–‡ä»¶, æŒ‡å®šæ ‡ç­¾é€‰æ‹©å™¨, é€‰æ‹©åŒ…å«å“ªäº› pods</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pod-é—´é€šä¿¡">pod é—´é€šä¿¡<a href="#pod-é—´é€šä¿¡" class="hash-link" aria-label="pod é—´é€šä¿¡çš„ç›´æ¥é“¾æ¥" title="pod é—´é€šä¿¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Service</p><p>ä½œç”¨ï¼š</p><ul><li>æœåŠ¡çš„ä¸»è¦ç›®æ ‡å°±æ˜¯ä½¿é›†ç¾¤å†…éƒ¨çš„å…¶ä»–podå¯ä»¥è®¿é—®å½“å‰è¿™ç»„pod</li><li>å¯¹å¤–æš´éœ²æœåŠ¡</li></ul><p>å¦‚ä½•åˆ›å»ºï¼Ÿ</p><p>æ–¹å¼1ï¼š<code>kubectl expose rc kubia --type=LoadBalancer --name kubia-http</code></p><p>æ–¹å¼2ï¼šé€šè¿‡ <code>kubectl create -f xxx-service.yml</code></p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># é…ç½®ä¼šè¯äº²å’Œæ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ç‰¹å®šå®¢æˆ·ç«¯äº§ç”Ÿçš„æ‰€æœ‰è¯·æ±‚æ¯æ¬¡éƒ½æŒ‡å‘åŒ ä¸€ä¸ª pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è¿˜å¯é€‰ Noneï¼Œ é»˜è®¤å€¼ã€‚ä¸æ”¯æŒ cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">sessionAffinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClientIP</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># service çš„å¯ç”¨ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># å¯ä»¥å¼•ç”¨ Pod ä¸­ çš„ port name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># serviceå°†é“¾æ¥è½¬å‘åˆ° å®¹å™¨çš„ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸æ˜¯å¿…é¡»ï¼Œ å¤šç«¯å£æ˜ å°„å¿…é¡»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤šç«¯å£æ˜ å°„</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># é…ç½®ä¼šè¯äº²å’Œæ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ç‰¹å®šå®¢æˆ·ç«¯äº§ç”Ÿçš„æ‰€æœ‰è¯·æ±‚æ¯æ¬¡éƒ½æŒ‡å‘åŒ ä¸€ä¸ª pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è¿˜å¯é€‰ Noneï¼Œ é»˜è®¤å€¼ã€‚ä¸æ”¯æŒ cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">sessionAffinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClientIP</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># service çš„å¯ç”¨ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># serviceå°†é“¾æ¥è½¬å‘åˆ° å®¹å™¨çš„ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yyy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚ä½•å‘ç° service</p><ul><li><p>é€šè¿‡ç¯å¢ƒå˜é‡å‘ç°æœåŠ¡</p><p>  æ¯ä¸ª pod å†…ä¼šæœ‰ç¯å¢ƒå˜é‡è¡¨ç¤º Service ip ï¼ˆ<code>&lt;pod name&gt;_SERVICE_HOST</code>ï¼‰ï¼Œ port (<code>&lt;pod name&gt;_SERVICE_PORT</code>)</p></li><li><p>é€šè¿‡  dns</p><p>  kube-system ns ä¸­æœ‰ä¸ª pod ä¸º kube-dnsï¼Œå°±æ˜¯ dns serverã€‚åœ¨é›†ç¾¤ ä¸­çš„å…¶ä»– pod éƒ½è¢«é…ç½®æˆä½¿ç”¨å…¶ä½œä¸º dns ( Kubemetes é€šè¿‡ä¿®æ”¹å®¹å™¨çš„ /etc/resolv.conf å®ç°ï¼‰ã€‚è¿è¡Œåœ¨ pod ä¸Šçš„è¿›ç¨‹ DNS æŸ¥è¯¢éƒ½ä¼šè¢« Kubemetes è‡ªèº«çš„ DNS åŠ¡å™¨å“åº”</p><p>  pod æ˜¯å¦ä½¿ç”¨å†…éƒ¨çš„ DNS æœåŠ¡å™¨æ˜¯æ ¹æ® pod çš„ spec.dnsPolicy å±æ€§æ¥å†³å®šçš„</p></li><li><p>é€šè¿‡ FQDN ï¼ˆå…¨é™å®šåŸŸåï¼‰ è¿æ¥æœåŠ¡</p><p>  <code>curl http://kubia.default.svc.cluster.local </code></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-service-è¿æ¥å¤–éƒ¨æœåŠ¡">é€šè¿‡ Service è¿æ¥å¤–éƒ¨æœåŠ¡<a href="#é€šè¿‡-service-è¿æ¥å¤–éƒ¨æœåŠ¡" class="hash-link" aria-label="é€šè¿‡ Service è¿æ¥å¤–éƒ¨æœåŠ¡çš„ç›´æ¥é“¾æ¥" title="é€šè¿‡ Service è¿æ¥å¤–éƒ¨æœåŠ¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>pod  å¦‚ä½•è®¿é—® k8s å¤–éƒ¨ æœåŠ¡ï¼Ÿ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ-endpoint">é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ endpoint<a href="#é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ-endpoint" class="hash-link" aria-label="é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ endpointçš„ç›´æ¥é“¾æ¥" title="é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ endpointçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>Service å’Œ pod ä¸­é—´ä¸æ˜¯ç›´æ¥ç›¸è¿ï¼Œ è€Œæ˜¯æ’ç€ Endpointï¼Œå°±æ˜¯ä¸€ä¸ª ip:port åˆ—è¡¨ï¼Œåœ¨åˆ›å»º Service æ—¶ æ ¹æ® è¯¥æœåŠ¡çš„ label selector äº§ç”Ÿ</p><p>å¦‚æœ Service æ²¡æœ‰æŒ‡å®š pod selectorï¼Œ å°±ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆ endpointsï¼Œéœ€è¦æ‰‹åŠ¨ç”Ÿæˆï¼Œè¿™æ—¶å¯ä»¥æŒ‡å®šåœ°å€ä¸ºä»»æ„ å¤–éƒ¨çš„ ipï¼š</p><p>demo-service.yml:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ²¡æœ‰é…ç½® selector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å°†æ¥æ”¶ç«¯å£80ä¸Šçš„ä¼ å…¥è¿æ¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>demo-service-endpoints.yml</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Endpoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Endpointçš„åç§°å¿…é¡»å’Œ service çš„åç§°ç›¸åŒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">subsets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Serviceå°†æŠŠè¯·æ±‚é‡å®šå‘åˆ° ä¸‹é¢çš„ åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 11. 11. 11. 11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 22.22.22.22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœç¨åå†³å®šå°† å¤–éƒ¨æœåŠ¡è¿ç§»åˆ°Kubemetes ä¸­è¿è¡Œçš„pod, å¯ä»¥ä¸ºæœåŠ¡æ·»åŠ é€‰æ‹©å™¨ï¼Œä»è€Œå¯¹Endpointè¿›è¡Œè‡ªåŠ¨ç®¡ç†</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-externalname-ç±»å‹çš„-service">é€šè¿‡ externalName ç±»å‹çš„ Service<a href="#é€šè¿‡-externalname-ç±»å‹çš„-service" class="hash-link" aria-label="é€šè¿‡ externalName ç±»å‹çš„ Serviceçš„ç›´æ¥é“¾æ¥" title="é€šè¿‡ externalName ç±»å‹çš„ Serviceçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å¦å¤–çš„æ–¹å¼æ¥è®¿é—®å¤–éƒ¨æœåŠ¡ï¼šåˆ›å»ºExtemalNameç±»å‹çš„ Service</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> external</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># é»˜è®¤ä¸º ClusterIPï¼Œåªèƒ½ pod é—´é€šä¿¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è¿˜æœ‰å¾ˆå¤šç§ type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ExternalName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">externalName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> someapi.somecompany.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶ååœ¨ pod ä¸­é€šè¿‡ <code>external-service[.default.svc.cluster.local]</code> è®¿é—®  someapi.somecompany.com</p><p>åœ¨ä»¥åå¦‚æœå°†å…¶æŒ‡å‘ä¸åŒçš„æœåŠ¡ï¼Œåªéœ€ç®€å•åœ°ä¿®æ”¹ externalName å±æ€§ï¼Œæˆ–è€…å°†ç±»å‹é‡æ–°å˜å› ClusterIP å¹¶ä¸ºæœåŠ¡åˆ›å»º Endpoint</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨">å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨<a href="#å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨" class="hash-link" aria-label="å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨çš„ç›´æ¥é“¾æ¥" title="å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ-nodeport">å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ NodePort<a href="#å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ-nodeport" class="hash-link" aria-label="å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ NodePortçš„ç›´æ¥é“¾æ¥" title="å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ NodePortçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æ¯ä¸ªé›†ç¾¤èŠ‚ç‚¹éƒ½ä¼šåœ¨èŠ‚ç‚¹ä¸Šæ‰“å¼€ä¸€ä¸ªç«¯å£(ç«¯å£å·ç›¸åŒ)ã€‚å¹¶å°†ä¼ å…¥çš„è¿æ¥è½¬å‘ç»™ pod</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nodeport</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># é€šè¿‡ é›†ç¾¤ä»»æ„èŠ‚ç‚¹çš„ 30123 ç«¯å£å¯ä»¥è®¿é—® è¿™ä¸ª service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœä¸æŒ‡å®šï¼ŒKuberneteså°†é€‰æ‹©ä¸€ä¸ªéšæœºç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">nodePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>worker node ip å¦‚ä½•è·å–ï¼š<code>kubectl get nodes -o jsonpath=&#x27;...&#x27;</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆloadbalance">å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆLoadBalance<a href="#å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆloadbalance" class="hash-link" aria-label="å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆLoadBalanceçš„ç›´æ¥é“¾æ¥" title="å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆLoadBalanceçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>NodePortç±»å‹çš„ä¸€ ç§æ‰©å±•, åœ¨ client å’Œ worker node é—´ æ”¾äº†ä¸€ä¸ª LoadBalancerï¼Œ é˜²æ­¢èŠ‚ç‚¹å•ç‚¹æ•…éšœ</p><p>è´Ÿè½½å‡è¡¡å™¨æ‹¥æœ‰è‡ªå·±ç‹¬ä¸€æ— äºŒçš„å¯å…¬å¼€è®¿é—®çš„ IP åœ°å€ï¼Œ å¹¶å°†æ‰€æœ‰è¿æ¥é‡å®šå‘åˆ°æœåŠ¡ã€‚å¯ä»¥é€šè¿‡è´Ÿè½½å‡è¡¡å™¨çš„ IP åœ°å€è®¿é—®æœåŠ¡</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">meä¸ƒadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">loadbalancer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LoadBalancer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ä»…å°†å¤–éƒ¨é€šä¿¡é‡å®šå‘åˆ°æ¥æ”¶è¿æ¥çš„èŠ‚ç‚¹ä¸Šè¿è¡Œçš„pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœæ²¡æœ‰æœ¬åœ°podå­˜åœ¨ï¼Œ åˆ™è¿æ¥å°†æŒ‚èµ·ã€‚å› æ­¤ï¼Œ éœ€è¦ç¡®ä¿è´Ÿè½½å¹³è¡¡å™¨å°†è¿æ¥è½¬å‘ç»™è‡³å°‘å…·æœ‰ä¸€ä¸ªpodçš„èŠ‚ç‚¹ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¯é¿å…é¢å¤–çš„ç½‘ç»œè·³è½¬ã€‚ä½†æ˜¯å¯èƒ½ä¼šå¯¼è‡´è·¨èŠ‚ç‚¹çš„ pod çš„è´Ÿè½½åˆ†å¸ƒä¸å‡è¡¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token key atrule" style="color:#00a4db">externalTrafficPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Local </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">portS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºä¸€-ä¸ªingressèµ„æº">åˆ›å»ºä¸€ ä¸ªIngressèµ„æº<a href="#åˆ›å»ºä¸€-ä¸ªingressèµ„æº" class="hash-link" aria-label="åˆ›å»ºä¸€ ä¸ªIngressèµ„æºçš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºä¸€ ä¸ªIngressèµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>é€šè¿‡ä¸€ ä¸ªIPåœ°å€å…¬å¼€å¤šä¸ªæœåŠ¡ï¼Œå®ƒè¿è¡Œåœ¨ HTTP å±‚ï¼ˆç½‘ç»œåè®®ç¬¬7 å±‚ï¼‰ä¸Šï¼Œ å› æ­¤å¯ä»¥æä¾›æ¯”å·¥ä½œåœ¨ç¬¬4å±‚çš„æœåŠ¡æ›´å¤šçš„åŠŸèƒ½</p><p>ä¸ºä»€ä¹ˆéœ€è¦ Ingressï¼šæ¯ä¸ª LoadBalancer æœåŠ¡éƒ½éœ€è¦è‡ªå·±çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œæ¯ä¸ª loadbalancer éƒ½éœ€è¦è‡ªå·±çš„ ipï¼Œ è€Œ Ingress åªéœ€è¦ä¸€ä¸ªå…¬ç½‘ IP å°±èƒ½ä¸ºè®¸å¤šæœåŠ¡æä¾›è®¿é—®</p><p>å½“å®¢æˆ·ç«¯å‘ Ingress å‘é€ HTTP è¯·æ±‚æ—¶ï¼Œ Ingress ä¼šæ ¹æ®è¯·æ±‚çš„ä¸»æœºåå’Œè·¯å¾„å†³å®šè¯·æ±‚è½¬å‘åˆ°çš„æœåŠ¡ã€‚</p><p>Ingress å·¥ä½œåœ¨ åº”ç”¨å±‚ åŸºäº cookie çš„ä¼šè¯äº²å’Œæ€§ (session affinity)</p><p>å·²ç»ç¡®è®¤é›†ç¾¤ä¸­æ­£åœ¨è¿è¡Œ Ingress æ§åˆ¶å™¨ï¼Œ å› æ­¤ç°åœ¨å¯ä»¥åˆ›å»ºä¸€ä¸ª Ingress èµ„æºï¼š</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Ingress å°†è¿™ä¸ªåŸŸåæ˜ å°„åˆ°ä½ çš„ service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia . example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># å°†è¯·æ±‚å‘é€åˆ°  kubia-nodeport æœåŠ¡çš„ 80 ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubia</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nodeport</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">servicePort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>kubectl get ingresses </code> è·å– Ingress æ§åˆ¶å™¨ å†…ç½‘ipï¼Œé…ç½®åˆ° dns server </p><p>ä¸º ingress åˆ›å»º tls è®¤è¯ TODO</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‘½ä»¤">å‘½ä»¤<a href="#å‘½ä»¤" class="hash-link" aria-label="å‘½ä»¤çš„ç›´æ¥é“¾æ¥" title="å‘½ä»¤çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…">å®‰è£…<a href="#å®‰è£…" class="hash-link" aria-label="å®‰è£…çš„ç›´æ¥é“¾æ¥" title="å®‰è£…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kind">kind<a href="#kind" class="hash-link" aria-label="kindçš„ç›´æ¥é“¾æ¥" title="kindçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://github.com/kubernetes-sigs/kind/" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes-sigs/kind/</a></p><p>åœ¨ docker ä¸­è¿è¡Œ k8s, æ›´å¿«æ›´æ–¹ä¾¿</p><p><a href="https://www.cnblogs.com/laochiji/p/13813743.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/laochiji/p/13813743.html</a> å¤šèŠ‚ç‚¹</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># install golang &amp;&amp; install docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker pull kindest/node:v1.19.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --name: specify a name for the cluster. default name : kind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  --wait 30s: wait until the cluster reaches a ready status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --wait 5m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --kubeconfig: specify cluster config file; default location : ${HOME}/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind create cluster [--name kind] [--wait]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ„å»ºé•œåƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker build -t my-custom-image:unique-tag ./my-image-dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åŠ è½½åˆ° kind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind load docker-image my-custom-image:unique-tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f my-manifest-using-my-image:unique-tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># context name è§„åˆ™: &lt;kind&gt;-&lt;cluster_name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä»…ä»…ä¸€ä¸ª cluster æ—¶, å¯çœç•¥ context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl cluster-info [--context kind-kind]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é»˜è®¤åˆ é™¤ kind åå­—çš„ cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind delete cluster [--name kind]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åŠ è½½ images åˆ° cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é»˜è®¤ å°† é•œåƒåŠ è½½åˆ° kind åå­—çš„ cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind load docker-image &lt;img_name&gt; [--name cluster_name]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¿›å…¥ kind å¯åŠ¨çš„ docker å†…éƒ¨, æ‰§è¡Œ crictl images, å¯ä»¥çœ‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ°ç”¨æ¥æ¨¡æ‹Ÿ k8s çš„ä¸€ç³»åˆ—é•œåƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it kind-control-plane crictl images</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="minikube">minikube<a href="#minikube" class="hash-link" aria-label="minikubeçš„ç›´æ¥é“¾æ¥" title="minikubeçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>create single node k8s cluster for dev, åŸç†æ˜¯ åˆ›å»ºè™šæ‹Ÿæœº, </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¯ç”¨çš„æ‰©å±•/æ’ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube addons list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¼€å¯æ’ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube addons enable metrics-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å…³é—­æ’ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube addons disable metrics-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å½“å‰ node ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-kubectl">ä½¿ç”¨ kubectl<a href="#ä½¿ç”¨-kubectl" class="hash-link" aria-label="ä½¿ç”¨ kubectlçš„ç›´æ¥é“¾æ¥" title="ä½¿ç”¨ kubectlçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/tools/install-kubectl/</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºæœ¬ä¿¡æ¯">åŸºæœ¬ä¿¡æ¯<a href="#åŸºæœ¬ä¿¡æ¯" class="hash-link" aria-label="åŸºæœ¬ä¿¡æ¯çš„ç›´æ¥é“¾æ¥" title="åŸºæœ¬ä¿¡æ¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl cluster-info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è·å–kube-schedulerå’Œkube-controller-managerç»„ä»¶çŠ¶æ€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get cs # å¥åº·çŠ¶å†µ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»º-create-expose">åˆ›å»º create expose<a href="#åˆ›å»º-create-expose" class="hash-link" aria-label="åˆ›å»º create exposeçš„ç›´æ¥é“¾æ¥" title="åˆ›å»º create exposeçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># create depend on a spec file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create -f xxx.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; deployment, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># dep-name ä¸èƒ½éšä¾¿è®¾ç½®, å¿…é¡»ç¬¦åˆåŸŸåå‘½åè§„èŒƒ.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è‡ªåŠ¨åˆ›å»ºçš„ ReplicaSet åå­—ä¸º dep_name + random uuid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è‡ªåŠ¨åˆ›å»º pod åå­—ä¸º ReplicaSet-name + random uuid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é•œåƒåœ°å€ include the full repository url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è‡ªåŠ¨åˆ›å»º label -&gt; run={dep name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># auto  create selector -&gt; run={dep name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create deployment &lt;dep name&gt; --image=k8s.gcr.io/echoserver:1.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create deployment tomcat6 --image=tomcat:6.0.53-jre8 # ä¸æŒ‡å®š url å‰ç¼€, é»˜è®¤ä» docker hub æ‹‰å–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  pods é»˜è®¤ä»…ä»…èƒ½è¢« åŒä¸ªé›†ç¾¤çš„ pods, service  è®¿é—®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ›å»ºä¸´æ—¶çš„ ä»£ç†, å¯ä»¥å°†å¤–éƒ¨å‘½ä»¤è½¬å‘åˆ° cluster å†…éƒ¨çš„ pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ctrl +c å…³é—­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥ ç‰ˆæœ¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl http://localhost:8001/version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è®¿é—®æŒ‡å®š pod çš„æœåŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl http://localhost:8001/api/v1/namespaces/default/pods/$POD_NAME/proxy/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl run &lt;pod name&gt; --image=nginx --restart=Never --port=80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --generator=run/vl  è¡¨ç¤ºåŒæ—¶åˆ›å»º rc ç®¡ç† pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl run &lt;pod name&gt; --image=luksa/kubia --port=8080 --generator=run/vl </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä»æè¿°æ–‡ä»¶åˆ›å»º èµ„æºï¼Œ å¯ä»¥ podï¼Œ rcã€‚ã€‚ã€‚ï¼Œ å¯æŒ‡å®š nsï¼Œ é»˜è®¤ default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create -f kubia-manual.yaml [-n xxx_ns]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ›å»º service, åå­—åŒ deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The LoadBalancer type makes the Service accessible through the minikube service command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Port 8080 is specified in image code, so cannot be other port here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --port : service æš´éœ²åœ¨ cluster ip ä¸‹çš„ç«¯å£, é€šè¿‡è¿™ä¸ªç«¯å£,  å¯ä»¥åœ¨ cluster å†…éƒ¨è®¿é—®åˆ°å¤šä¸ª pod. é€šè¿‡è¿™ä¸ª service è´Ÿè½½å‡è¡¡äº† å¤šä¸ª pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --targetPort å®¹å™¨çš„ç«¯å£, é»˜è®¤=== port, ä¸åˆ¶ä½œé•œåƒæ—¶æš´éœ²çš„ç«¯å£ä¸€è‡´, ä¸èƒ½éšä¾¿æŒ‡å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --type: service ç±»å‹, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       NodePort: åˆ›å»ºä¸€ä¸ª service å¹¶æš´éœ²åˆ° cluster å¤–éƒ¨, service çš„ç«¯å£è¿˜æ˜¯ --port æŒ‡å®š, åŒæ—¶ service æœ‰è‡ªå·±çš„ cluster url, node ä¼šæŒ‡å®šä¸€ä¸ªéšæœºç«¯å£æ˜ å°„åˆ° service çš„ ç«¯å£, è‹¥æŒ‡å®šäº† --nodePort, å°±ç”¨æŒ‡å®šç«¯å£æ˜ å°„åˆ° service ç«¯å£; å¦‚ type=NodePortï¼Œè€Œä¸”é…ç½® nodePort=30001, é‚£ä¹ˆå¤–éƒ¨æœºå™¨ å¯ä»¥ scheme://nodeIP:30001è®¿é—®åˆ°è¯¥æœåŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       LoadBalancer: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl expose deployment &lt;dep name&gt; --type=LoadBalancer --port=8080 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥æ‰¾æš´éœ²çš„éšæœºç«¯å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe service mywebservice | grep NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># service port 80 will mapping to random node port ,and this service can be visited by someone outside cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è‹¥æ‰©å®¹, åˆ™åœ¨å„ä¸ªæœ‰ pod è¿è¡Œçš„èŠ‚ç‚¹éƒ½èƒ½é€šè¿‡ node ç«¯å£è®¿é—®  è¿™ä¸ª service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl expose deploy tomcat6 --port=80 --target-port=8080 --type=NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ›å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡ service å¯¹è±¡. å¯ä»¥ä»å¤–éƒ¨è®¿é—® pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># rc ä¸º replicationController ç¼©å†™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl expose rc &lt;po name&gt; --type=LoadBalancer --name kubia-http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; label</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¯­æ³•: kubectl label &lt;obj_type, eg: pod, service&gt; &lt;obj_name&gt; &lt;label, eg: app=v1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl label pod $POD_NAME app=v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; å‘½åç©ºé—´ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ›å»º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config set-context Kubernetes --namespace=beta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># éªŒè¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config view | grep namespace command</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨-exec">æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨ exec<a href="#æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨-exec" class="hash-link" aria-label="æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨ execçš„ç›´æ¥é“¾æ¥" title="æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨ execçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ä»…æœ‰ ä¸€ä¸ªå®¹å™¨åœ¨ pod, æ— éœ€æŒ‡å®šå®¹å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec [-c container_name] $POD_NAME env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¿›å…¥ å®¹å™¨å†…éƒ¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -ti $POD_NAME bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ”¹">ä¿®æ”¹<a href="#ä¿®æ”¹" class="hash-link" aria-label="ä¿®æ”¹çš„ç›´æ¥é“¾æ¥" title="ä¿®æ”¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; æ‰©å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŒ‡å®š replicas å¯ä»¥ç¼©æ‰©å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl scale deployments/&lt;dep_name&gt; --replicas=4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl scale deployment.apps/tomcat6 --replicas=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl scale deployment tomcat6 --replicas=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; æ»šåŠ¨æ›´æ–°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ›´æ–° image version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl set image deployments/&lt;dep_name&gt; &lt;dep_name&gt;=jocatalin/kubernetes-bootcamp:v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># éªŒè¯æ›´æ–°æ˜¯å¦æˆåŠŸ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout status deployments/kubernetes-bootcamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; å›æ»š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å–æ¶ˆä¹‹å‰çš„éƒ¨ç½²ï¼Œè¿™å°†æ‰§è¡Œåå‘æ“ä½œï¼Œå°†è´Ÿè½½ç§»åŠ¨è‡³ä¹‹å‰ç‰ˆæœ¬çš„å®¹å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout undo deployments/kubernetes-bootcamp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="èµ„æºåˆ—è¡¨-get">èµ„æºåˆ—è¡¨ get<a href="#èµ„æºåˆ—è¡¨-get" class="hash-link" aria-label="èµ„æºåˆ—è¡¨ getçš„ç›´æ¥é“¾æ¥" title="èµ„æºåˆ—è¡¨ getçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å•å¤æ•°å‡å¯</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ‰€æœ‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get deployments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --show-labels åŒæ—¶æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ã€‚ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -A æŸ¥çœ‹æ‰€æœ‰ pods, åŒ…æ‹¬ kube-system å‘½åç©ºé—´ ä¸‹çš„ pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --all-namespaces æ‰€æœ‰ç©ºé—´çš„ pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods [--show-labels]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -o è¾“å‡ºæ ¼å¼; wide è¡¨ç¤ºè¾“å‡ºæ–‡æœ¬ä¿¡æ¯, åˆ—å‡º ip , èŠ‚ç‚¹ name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -o yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é€šè¿‡æ ‡ç­¾è¿‡æ»¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -l &lt;label&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è·å– pod å®Œæ•´ yaml/json æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç¼©å†™ po</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po &lt;pod name&gt; -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po &lt;pod name&gt; -o json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ ¹æ®æ¨¡æ¿è·å– ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export POD_NAME=$(kubectl get pods -o go-template --template &#x27;{{range .items}}{{.metadata.name}}{{&quot;\n&quot;}}{{end}}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export NODE_PORT=$(kubectl get services/kubernetes-bootcamp -o go-template=&#x27;{{(index .spec.ports 0).nodePort}}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥çœ‹ service  çš„ endpoint åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get endpoints &lt;service name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥çœ‹æ‰€æœ‰ svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç¼©å†™ svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; ReplicaSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get rs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç«¯å£è½¬å‘ï¼Œ å°†ä¼šè¿è¡Œä¸€ä¸ªç«¯å£è½¬å‘ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å°† local port 8888 è½¬å‘åˆ° pod çš„ 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward &lt;pod name&gt; 8888:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ ‡ç­¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ—å‡º pods çš„æ‰€æœ‰æ ‡ç­¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åªåˆ—å‡ºæ„Ÿå…´è¶£çš„æ ‡ç­¾ï¼Œ æ ‡ç­¾æŒ‰ç…§åˆ—å±•ç¤º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po -L creation_method,env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ·»åŠ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl label po &lt;pod name&gt; creation_method=manual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¿®æ”¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl label po &lt;pod name&gt; creation_method=manual --override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ ‡ç­¾é€‰æ‹©å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po -1 creation_method=manual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po -1 creation_method!=manual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po -1 env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ—å‡ºæ²¡æœ‰ env çš„pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po -1 &#x27;!env&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é€‰æ‹©å¸¦æœ‰envæ ‡ç­¾ä¸”å€¼ä¸ºprodæˆ–develçš„pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po -1 env in (prod, devel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po -1 env notin (prod, devel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä½¿ç”¨ label åˆ†ç±» worker node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl label node &lt;node name&gt; gpu=true # æ¯ä¸ª node éƒ½æœ‰ä¸€ä¸ªé»˜è®¤ labelï¼Œ kubernetes.io/hostname:ä¸»æœºå </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get nodes -l gpu=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å‘½åç©ºé—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥çœ‹æ‰€æœ‰ ns, æœ‰ defaultï¼Œ kube-publicï¼Œ kube-systemï¼Œé»˜è®¤æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get ns </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ—å‡ºåªå±äºè¯¥å‘½åç©ºé—´çš„ pod, å¯ä½¿ç”¨ -n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po --namespace kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç¼–è¾‘ rc çš„ yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¸€èˆ¬ä»…ä»…ç¼–è¾‘ rc çš„ templateï¼Œ ä¸åŠ¨ label selector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç”¨æ¥å‡çº§ pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl edit rc kubia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¢åŠ  å‰¯æœ¬æ•°ï¼Œ æ°´å¹³æ‰©å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl scale rc kubia --replicas=3 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç­‰åŒ parallelism</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl scale job xxx_job --replicas 3 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¿œç¨‹åœ¨ pod ä¸­æŸä¸ª container æ‰§è¡Œå‘½ä»¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># â€œ--â€ è¡¨ç¤º kubectl å‘½ä»¤ç»“æŸï¼Œ åé¢çš„æ˜¯åœ¨ pod å†…æ‰§è¡Œçš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec &lt;pod name&gt; -- curl -s http://10.23... </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ—å‡ºç¯å¢ƒå˜é‡ï¼Œå¦‚ Service çš„ ipï¼Œ ç«¯å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec kubia-3inly env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åœ¨ pod ä¸­æ‰§è¡Œ shell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -it kubi-3inly bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; é…ç½®æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; äº‹ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é€šè¿‡ describe ä¹Ÿèƒ½å¾—åˆ° object ç›¸å…³çš„äº‹ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æŸ¥è¯¢è¯¦ç»†æè¿°-describe">æŸ¥è¯¢è¯¦ç»†æè¿° describe<a href="#æŸ¥è¯¢è¯¦ç»†æè¿°-describe" class="hash-link" aria-label="æŸ¥è¯¢è¯¦ç»†æè¿° describeçš„ç›´æ¥é“¾æ¥" title="æŸ¥è¯¢è¯¦ç»†æè¿° describeçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥çœ‹èµ„æºæè¿°ï¼Œ é™„åŠ ä¿¡æ¯ï¼Œ ä½œä¸º kubectl get xxx xxx è¡¥å……, å¯ç”¨äºæ’æŸ¥é—®é¢˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¦‚ pod æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œ é‡å¯åŸå› ï¼Œ é€€å‡ºç  137ï¼Œ143 è¡¨ç¤º pod è¢«è¿«ç»ˆæ­¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe pods [pod_name]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe services/&lt;srv name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl describe deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æŸ¥è¯¢æ—¥å¿—-logs">æŸ¥è¯¢æ—¥å¿— logs<a href="#æŸ¥è¯¢æ—¥å¿—-logs" class="hash-link" aria-label="æŸ¥è¯¢æ—¥å¿— logsçš„ç›´æ¥é“¾æ¥" title="æŸ¥è¯¢æ—¥å¿— logsçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥æŒ‡å®š pod ä¸‹çš„ container æ—¥å¿—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è‹¥pod åªæœ‰ä¸€ä¸ª container, æ— éœ€æŒ‡å®š container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs $POD_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs -f POD-NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># éœ€è¦ ssh åˆ° pod æ‰€åœ¨çš„ worker node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker logs &lt;container_id&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ— éœ€ ssh, å¯æŒ‡å®šæŸä¸ª containerï¼Œ å¯æŒ‡å®šçœ‹é‡å¯å‰çš„ç‰ˆæœ¬çš„æ—¥å¿—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs &lt;pod name&gt; [-c container_name] [--previous]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥çœ‹ k8s èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl explain pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl explain pod.spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ é™¤-delete">åˆ é™¤ delete<a href="#åˆ é™¤-delete" class="hash-link" aria-label="åˆ é™¤ deleteçš„ç›´æ¥é“¾æ¥" title="åˆ é™¤ deleteçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># delete by spec file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete -f flask.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ é™¤ pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ— æ³•ç›´æ¥åˆ é™¤, åªè¦ replicaSet æ²¡æœ‰åˆ é™¤, åˆ äº† po, è¿˜ä¼šé‡ç°åˆ›å»º po</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¯ç›´æ¥ é€šè¿‡åˆ é™¤ deployment åˆ é™¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete po kubia-gpu [pod2 [pod3]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ é™¤å½“å‰ ns ä¸‹ all podï¼Œ ä¿ç•™ ns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete po --all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŒ‰ç…§æ ‡ç­¾åˆ é™¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete po -1 creation_method=manual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete service hello-node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete deployment hello-node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  åˆ é™¤ ns, åŒæ—¶ä¼šåˆ é™¤ ns ä¸‹çš„æ‰€æœ‰ pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete ns custom-namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ é™¤æ‰€æœ‰èµ„æºï¼Œ åŒ…æ‹¬ rcï¼Œ podï¼Œ service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete all --all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ é™¤ rcï¼Œ rc ç®¡ç†çš„ pods ä¹Ÿä¼šåˆ é™¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete rc &lt;rc name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ é™¤ rcï¼Œ ä½†æ˜¯ä¿ç•™ pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete rc &lt;rc name&gt; --cascade=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl deleä¸ƒe rs kubia </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubeadmin">kubeadmin<a href="#kubeadmin" class="hash-link" aria-label="kubeadminçš„ç›´æ¥é“¾æ¥" title="kubeadminçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm init # create a master node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm join &lt;master_id:port&gt; # add a node to cluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯è§†åŒ–ç•Œé¢">å¯è§†åŒ–ç•Œé¢<a href="#å¯è§†åŒ–ç•Œé¢" class="hash-link" aria-label="å¯è§†åŒ–ç•Œé¢çš„ç›´æ¥é“¾æ¥" title="å¯è§†åŒ–ç•Œé¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>kubernetes-dashboard</p><p>æ›´æ¨è kubesphere, æ‰“é€š devops å…¨å¥—æµæ°´çº¿, å¯¹ cluster è¦æ±‚é«˜  <a href="https://github.com/kubesphere/kubesphere" target="_blank" rel="noopener noreferrer">https://github.com/kubesphere/kubesphere</a></p><p>(kuboard ä¹Ÿè¡Œ, å¯¹ cluster è¦æ±‚ä¸é«˜)</p><p><a href="https://www.zhihu.com/question/348609092" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/348609092</a> rancher å’Œ kubesphereå¯¹æ¯”</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vagrant-æ­å»º-k8s-ç¯å¢ƒ">vagrant æ­å»º k8s ç¯å¢ƒ<a href="#vagrant-æ­å»º-k8s-ç¯å¢ƒ" class="hash-link" aria-label="vagrant æ­å»º k8s ç¯å¢ƒçš„ç›´æ¥é“¾æ¥" title="vagrant æ­å»º k8s ç¯å¢ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸€ä¸ª master node: docker, kubeadm, kubelet, kubectl
ä¸¤ä¸ª worker node: </p><p>Vagrantfile:</p><div class="language-vagrantfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-vagrantfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Vagrant.configure(&quot;2&quot;) do |config|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (1..3).each do |i| </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.vm.define &quot;k8s-node#{i}&quot; do |node|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # è®¾ç½®è™šæ‹Ÿæœºçš„Box </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            node.vm.box = &quot;centos7&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # è®¾ç½®è™šæ‹Ÿæœºçš„ä¸»æœºå</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            node.vm.hostname=&quot;k8s-node#{i}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # è®¾ç½®è™šæ‹Ÿæœºçš„IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # 192.168.56.xxx éœ€è¦åœ¨ virtualbox å…ˆåˆ›å»º host only network 192.168.56.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            node.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.#{99+i}/24&quot;, netmask: &quot;255.255.255.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # è®¾ç½®ä¸»æœºä¸è™šæ‹Ÿæœºçš„å…±äº«ç›®å½•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # node.vm.synced_folder &quot;~/Documents/vagrant/share&quot;, &quot;/home/vagrant/share&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # VirtaulBoxç›¸å…³é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            node.vm.provider &quot;virtualbox&quot; do |v| </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # è®¾ç½®è™šæ‹Ÿæœºçš„åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                v.name = &quot;k8s-node#{i}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # è®¾ç½®è™šæ‹Ÿæœºçš„å†…å­˜å¤§å°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                v.memory = 4096</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # è®¾ç½®è™šæ‹Ÿæœºçš„CPUä¸ªæ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                v.cpus = 4 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            end </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        end </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   end </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è™šæ‹Ÿæœºå‡†å¤‡</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ç™»å½• machine sshd, ä¿è¯å¯ä»¥é€šè¿‡è´¦å·å¯†ç ç™»å½• (é»˜è®¤ä»…ä»… ssh ç™»å½•)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è‹¥ä½¿ç”¨ tmux + ssh config åˆ™æ— éœ€æ— éœ€è¿™ä¸€æ­¥, ç›´æ¥é€šè¿‡ ssh ç™»å½•å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vagrant ssh k8s-node1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo su</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vi /etc/ssh/sshd_config # ä¿®æ”¹ ä¸º PasswordAuthentication yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service sshd restart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è®¾ç½®é»˜è®¤ç½‘å¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># show default SoftEther</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># We can find that the default soft ether is eth0, the three machine have the same eth0 ip.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This is because eth0 default to ç½‘ç»œåœ°å€è½¬å‘(nat) ç±»å‹. in order  to make the machines can </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># access to each other, etho should be type: Natnetwork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip route show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ“ä½œ virtualbox å›¾å½¢ç•Œé¢, å…¨å±€æ–°å»º natnetwork ç½‘ç»œ. ä¸ºæ¯ä¸ª machine é»˜è®¤ç½‘å¡1 å³ eth0 æŒ‡å®š è¿™ä¸ªç±»å‹, åˆ·æ–°é«˜çº§è®¾ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é‡Œçš„ ç½‘å¡mac åœ°å€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç„¶ååœ¨å„ä¸ª machine å†… äº’ç›¸ ping æ˜¯å¦é€š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># close firewall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop firewalld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable firewalld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># disable selinux (æ°¸ä¹…)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -i &#x27;s/enforcing/disabled/&#x27; /etc/selinux/config # æ›¿æ¢äº† enforcing ä¸º disable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å½“å‰ä¼šè¯å…³é—­ selinux (ä¸´æ—¶)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setenforce 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å…³é—­ swap æ°¸ä¹…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -ri &#x27;s/.*swap.*/#&amp;/&#x27; /etc/fstab # å…¶å®å°±æ˜¯æ³¨é‡Šæ‰ä¸€è¡Œ   #/swapfile none swap defaults 0 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å…³é—­ swap (å†…å­˜äº¤æ¢) ä¸´æ—¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swapoff -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ·»åŠ  ä¸»æœºå and ip æ˜ å°„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># hostname ä¼šæ˜¾ç¤º ä¸»æœºå k8s-node1/2/3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è‹¥ hostname æ˜¾ç¤ºä¸æ­£å¸¸å¯ä»¥ä¿®æ”¹: hostnamectl set-hostname &lt;new hostname&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vi /etc/hosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># eth0 ç½‘å¡å°±æ˜¯ é»˜è®¤ç½‘å¡, ç”¨æ¥machine äº’è”çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &lt;node1 eth0 ip&gt; k8s-node1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &lt;node2 eth0 ip&gt; k8s-node2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &lt;node3 eth0 ip&gt; k8s-node3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10.0.2.15 k8s-node1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10.0.2.4 k8s-node2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10.0.2.5 k8s-node3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å°†æ¡¥æ¥çš„ ipv4 çš„æµé‡ä¼ é€’åˆ° iptables çš„é“¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.bridge.bridge-nf-call-ip6tables = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.bridge.bridge-nf-call-iptables = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># éªŒè¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl --system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åŒæ­¥ä¸‰å°æœºå™¨çš„æ—¶é—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install ntpdate -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ntpdate time.windows.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å°†åªè¯»æ–‡ä»¶ç³»ç»Ÿ æ”¹ä¸º è¯»å†™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mount -o remount rw /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®‰è£… docker ç­‰</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dockerå‚ç…§å®˜ç½‘å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å®‰è£… k8s éœ€è¦ aliyun é•œåƒ æ¨è</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[kubernetes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name=Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgcheck=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repo_gpgcheck=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ustc çš„é•œåƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF &gt; /etc/apt/sources.list.d/kubernetes.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># centos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl enable kubelet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start kubelet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &gt;&gt;&gt; åœ¨ master node ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># éœ€è¦æ‹‰å» k8s ç›¸å…³çš„é•œåƒ, é»˜è®¤ä»“åº“ k8s.gcr.io èƒŒå¢™, è¿™é‡Œé‡æ–°æŒ‡å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># service-cidr æ˜¯ service é—´é€šä¿¡çš„ç½‘æ®µ/å­ç½‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># pod network-cidr æ˜¯ pod é—´é€šä¿¡ç½‘æ®µ/å­ç½‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm init --apiserver-advertise-address=&lt;master node eth0 ip&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--image-repository registry.cn-hangzhou.aliyuncs.com/google_containers \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--kubernetes-version v1.19.4 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--service-cidr=10.96.0.0/16 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--pod-network-cidr=10.244.0.0/16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŒ‰ç…§ è¾“å‡ºæç¤º, å¦‚ä¸‹æ­¥éª¤éœ€è¦åš:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># master ç”Ÿæˆçš„ å‘½ä»¤, åœ¨ worker node æ‰§è¡Œå³å¯åŠ å…¥ cluster.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2h å†…æœ‰æ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm join 10.0.2.15:6443 --token 0tpws3.y1uhbzg0rgal4okz \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --discovery-token-ca-cert-hash sha256:0a25a082e0babbc18d1646ebfa9954d82838fa86ec66ee3d88c0d57fc9c0f35e </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¿‡æœŸä¹‹å, å¦‚ä¸‹ç”Ÿæˆæ°¸ä¹…çš„ token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm token create --print-join-command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm token create --ttl 0 --print-join-command # å¤åˆ¶ç”Ÿæˆçš„ token åˆ°ä¸Šé¢å‘½ä»¤å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ›å»ºç½‘ç»œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¿™é‡Œé€‰å®š flannel æä¾›çš„ç½‘ç»œæ‰©å±•æ’ä»¶ (addons)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å…·ä½“æœ‰å“ªäº›å¯ç”¨çš„æ’ä»¶: https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -L https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml -o flannel_network.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¸Šä¼ åˆ° master node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp ~/flanel.yml root@xxx/root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å­èŠ‚ç‚¹åŠ å…¥åˆ° cluster å, master ä¼šåŒæ­¥ flanel ç›¸å…³çš„ pod åˆ° å­èŠ‚ç‚¹ä¸Š, å¯ä»¥ç›‘æ§, ç­‰å¾…ä¸€æ®µæ—¶é—´å†æŸ¥çœ‹ nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f flannel.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥çœ‹ flanel ç›¸å…³ çš„ pods æ˜¯å¦å¯åŠ¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po --all-namespaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¦‚æœæ˜¯ å¤±è´¥çš„, é‚£ä¹ˆå°æ›¿æ¢ flanel.yml ä¸­ image ç›¸å…³åœ°å€, åˆ° docker hub ä¸Šæ‰¾, å¦‚ https://hub.docker.com/r/easzlab/flannel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># åˆ é™¤ , é‡æ–°åˆ›å»º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete -f flannel.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ­¤æ—¶å¯ä»¥åœ¨å­èŠ‚ç‚¹ä¸Šæ‰§è¡Œæ·»åŠ  node å‘½ä»¤äº†   &gt;&gt;&gt; åœ¨ worker node ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç›‘æ§ æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„ æŒ‡å®šns çš„ pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç­‰å¾… æ‰€æœ‰èŠ‚ç‚¹ ä¸Š flanel ç›¸å…³çš„ pod éƒ½æ­£å¸¸å¯åŠ¨åå†åœ¨ master ä¸ŠæŸ¥çœ‹ nodes çŠ¶æ€, ä¿è¯æ‰€æœ‰ node çŠ¶æ€ä¸º ready åˆ™ cluster æ­å»ºæˆåŠŸ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">watch kubectl get po -n kube-system -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å®‰è£… ingress controller, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æœ‰å¤šé‡å®ç°, é€‰æ‹©ä¸€ç§å³å¯ https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¿™é‡Œé€‰æ‹© ingress-nginx https://kubernetes.io/docs/concepts/services-networking/ingress/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ref: https://www.cnblogs.com/minseo/p/12455320.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cka-è¯ä¹¦">cka è¯ä¹¦<a href="#cka-è¯ä¹¦" class="hash-link" aria-label="cka è¯ä¹¦çš„ç›´æ¥é“¾æ¥" title="cka è¯ä¹¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://training.linuxfoundation.cn/certificate/details/1" target="_blank" rel="noopener noreferrer">https://training.linuxfoundation.cn/certificate/details/1</a> ä¸­å›½åŒº</p><p><a href="https://zhuanlan.zhihu.com/p/138796893" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/138796893</a>
<a href="https://www.jianshu.com/p/629525af31c4" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/629525af31c4</a>
<a href="https://www.kubernetes.org.cn/peixun" target="_blank" rel="noopener noreferrer">https://www.kubernetes.org.cn/peixun</a> è€ƒè¯•è¦ç‚¹
<a href="https://zhuanlan.zhihu.com/p/138796893" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/138796893</a> , <a href="https://www.zhihu.com/zvideo/1302356091591372800" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/zvideo/1302356091591372800</a> çœŸé¢˜</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="k3s">k3s<a href="#k3s" class="hash-link" aria-label="k3sçš„ç›´æ¥é“¾æ¥" title="k3sçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/k3s-io/k3s" target="_blank" rel="noopener noreferrer">https://github.com/k3s-io/k3s</a></p><p><a href="https://oldj.net/article/2022/04/17/install-k3s-and-rancher/" target="_blank" rel="noopener noreferrer">https://oldj.net/article/2022/04/17/install-k3s-and-rancher/</a></p><p>è½»é‡çº§çš„ k8s, å†…æ ¸æœºåˆ¶è¿˜æ˜¯å’Œ K8s ä¸€æ ·ï¼Œä½†æ˜¯å‰”é™¤äº†å¾ˆå¤šå¤–éƒ¨ä¾èµ–ä»¥åŠ K8s çš„ alphaã€beta ç‰¹æ€§</p><p>å°†å…¶åº”ç”¨äº IoT è®¾å¤‡ï¼ˆæ¯”å¦‚æ ‘è“æ´¾ï¼‰</p><p><a href="https://rancher.com/docs/k3s/latest/en/" target="_blank" rel="noopener noreferrer">https://rancher.com/docs/k3s/latest/en/</a> å®˜ç½‘</p><p><a href="https://www.rancher.cn/k3s/" target="_blank" rel="noopener noreferrer">https://www.rancher.cn/k3s/</a> ä¸­æ–‡å®˜ç½‘</p><p><a href="https://zhuanlan.zhihu.com/p/269556628" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/269556628</a> ç®€ä»‹</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="k0s">k0s<a href="#k0s" class="hash-link" aria-label="k0sçš„ç›´æ¥é“¾æ¥" title="k0sçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rancher">rancher<a href="#rancher" class="hash-link" aria-label="rancherçš„ç›´æ¥é“¾æ¥" title="rancherçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>éƒ¨ç½² k8s é›†ç¾¤ </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="harbor">Harbor<a href="#harbor" class="hash-link" aria-label="Harborçš„ç›´æ¥é“¾æ¥" title="Harborçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="helm-chart">helm chart<a href="#helm-chart" class="hash-link" aria-label="helm chartçš„ç›´æ¥é“¾æ¥" title="helm chartçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä½¿ç”¨ helm chart ä¸€é”®æ‹‰èµ·æ•´å¥—ç¯å¢ƒ, å¯ä»¥ä½¿ç”¨ helm chart åº”ç”¨å•†åº—</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/k-8-s">k8s</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/kubernetes-k8s.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/kotlin"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">kotlin</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/linux-note"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#é¢è¯•é—®é¢˜" class="table-of-contents__link toc-highlight">é¢è¯•é—®é¢˜</a></li><li><a href="#what-and-why" class="table-of-contents__link toc-highlight">what and why</a><ul><li><a href="#k8s-æ˜¯åšä»€ä¹ˆçš„" class="table-of-contents__link toc-highlight">k8s æ˜¯åšä»€ä¹ˆçš„</a></li><li><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨" class="table-of-contents__link toc-highlight">ä¸ºä»€ä¹ˆä½¿ç”¨:</a></li></ul></li><li><a href="#é›†ç¾¤ç»“æ„" class="table-of-contents__link toc-highlight">é›†ç¾¤ç»“æ„</a><ul><li><a href="#ä¸€ä¸ª-master-èŠ‚ç‚¹" class="table-of-contents__link toc-highlight">ä¸€ä¸ª master èŠ‚ç‚¹</a></li><li><a href="#ä¸€ç¾¤workerèŠ‚ç‚¹" class="table-of-contents__link toc-highlight">ä¸€ç¾¤workerèŠ‚ç‚¹</a></li></ul></li><li><a href="#é€»è¾‘ç»“æ„" class="table-of-contents__link toc-highlight">é€»è¾‘ç»“æ„</a><ul><li><a href="#pod" class="table-of-contents__link toc-highlight">pod</a></li><li><a href="#volume" class="table-of-contents__link toc-highlight">volume</a></li><li><a href="#controllers" class="table-of-contents__link toc-highlight">controllers</a></li><li><a href="#service" class="table-of-contents__link toc-highlight">service</a></li><li><a href="#flannel" class="table-of-contents__link toc-highlight">flannel</a></li><li><a href="#ingress" class="table-of-contents__link toc-highlight">ingress</a></li><li><a href="#name-namespace" class="table-of-contents__link toc-highlight">name namespace</a></li></ul></li><li><a href="#èµ„æºæè¿°æ–‡ä»¶" class="table-of-contents__link toc-highlight">èµ„æºæè¿°æ–‡ä»¶</a><ul><li><a href="#é€šè¿‡å‘½ä»¤ç”Ÿæˆ-yml" class="table-of-contents__link toc-highlight">é€šè¿‡å‘½ä»¤ç”Ÿæˆ yml</a></li><li><a href="#pod-çš„--yaml-æè¿°æ–‡ä»¶" class="table-of-contents__link toc-highlight">pod çš„  yaml æè¿°æ–‡ä»¶</a></li><li><a href="#deployment-çš„æè¿°æ–‡ä»¶" class="table-of-contents__link toc-highlight">deployment çš„æè¿°æ–‡ä»¶</a></li><li><a href="#service-1" class="table-of-contents__link toc-highlight">service</a></li></ul></li><li><a href="#æ ‡ç­¾" class="table-of-contents__link toc-highlight">æ ‡ç­¾</a></li><li><a href="#æ³¨è§£" class="table-of-contents__link toc-highlight">æ³¨è§£</a></li><li><a href="#å‘½åç©ºé—´" class="table-of-contents__link toc-highlight">å‘½åç©ºé—´</a></li><li><a href="#pod-ç®¡ç†" class="table-of-contents__link toc-highlight">pod ç®¡ç†</a><ul><li><a href="#æ¢æµ‹-pod-æ˜¯å¦å¥åº·" class="table-of-contents__link toc-highlight">æ¢æµ‹ pod æ˜¯å¦å¥åº·</a></li><li><a href="#pod-å‰¯æœ¬" class="table-of-contents__link toc-highlight">pod å‰¯æœ¬</a></li><li><a href="#è¿è¡Œå•ä¸ªä»»åŠ¡-job" class="table-of-contents__link toc-highlight">è¿è¡Œå•ä¸ªä»»åŠ¡ Job</a></li><li><a href="#å®šæ—¶ä»»åŠ¡-cronjob" class="table-of-contents__link toc-highlight">å®šæ—¶ä»»åŠ¡ CronJob</a></li></ul></li><li><a href="#pod-é€šä¿¡" class="table-of-contents__link toc-highlight">pod é€šä¿¡</a><ul><li><a href="#proxy" class="table-of-contents__link toc-highlight">proxy</a></li><li><a href="#service-2" class="table-of-contents__link toc-highlight">Service</a></li><li><a href="#pod-é—´é€šä¿¡" class="table-of-contents__link toc-highlight">pod é—´é€šä¿¡</a></li><li><a href="#é€šè¿‡-service-è¿æ¥å¤–éƒ¨æœåŠ¡" class="table-of-contents__link toc-highlight">é€šè¿‡ Service è¿æ¥å¤–éƒ¨æœåŠ¡</a><ul><li><a href="#é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ-endpoint" class="table-of-contents__link toc-highlight">é€šè¿‡æ‰‹åŠ¨ç”Ÿæˆ endpoint</a></li><li><a href="#é€šè¿‡-externalname-ç±»å‹çš„-service" class="table-of-contents__link toc-highlight">é€šè¿‡ externalName ç±»å‹çš„ Service</a></li></ul></li><li><a href="#å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨" class="table-of-contents__link toc-highlight">å°†æœåŠ¡æš´éœ²ç»™å¤–éƒ¨</a><ul><li><a href="#å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ-nodeport" class="table-of-contents__link toc-highlight">å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆ NodePort</a></li><li><a href="#å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆloadbalance" class="table-of-contents__link toc-highlight">å°†æœåŠ¡çš„ç±»å‹è®¾ç½®æˆLoadBalance</a></li><li><a href="#åˆ›å»ºä¸€-ä¸ªingressèµ„æº" class="table-of-contents__link toc-highlight">åˆ›å»ºä¸€ ä¸ªIngressèµ„æº</a></li></ul></li></ul></li><li><a href="#å‘½ä»¤" class="table-of-contents__link toc-highlight">å‘½ä»¤</a><ul><li><a href="#å®‰è£…" class="table-of-contents__link toc-highlight">å®‰è£…</a></li><li><a href="#kind" class="table-of-contents__link toc-highlight">kind</a></li><li><a href="#minikube" class="table-of-contents__link toc-highlight">minikube</a></li><li><a href="#ä½¿ç”¨-kubectl" class="table-of-contents__link toc-highlight">ä½¿ç”¨ kubectl</a><ul><li><a href="#åŸºæœ¬ä¿¡æ¯" class="table-of-contents__link toc-highlight">åŸºæœ¬ä¿¡æ¯</a></li><li><a href="#åˆ›å»º-create-expose" class="table-of-contents__link toc-highlight">åˆ›å»º create expose</a></li><li><a href="#æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨-exec" class="table-of-contents__link toc-highlight">æ‰§è¡Œå‘½ä»¤åˆ°å®¹å™¨ exec</a></li><li><a href="#ä¿®æ”¹" class="table-of-contents__link toc-highlight">ä¿®æ”¹</a></li><li><a href="#èµ„æºåˆ—è¡¨-get" class="table-of-contents__link toc-highlight">èµ„æºåˆ—è¡¨ get</a></li><li><a href="#æŸ¥è¯¢è¯¦ç»†æè¿°-describe" class="table-of-contents__link toc-highlight">æŸ¥è¯¢è¯¦ç»†æè¿° describe</a></li><li><a href="#æŸ¥è¯¢æ—¥å¿—-logs" class="table-of-contents__link toc-highlight">æŸ¥è¯¢æ—¥å¿— logs</a></li><li><a href="#åˆ é™¤-delete" class="table-of-contents__link toc-highlight">åˆ é™¤ delete</a></li></ul></li><li><a href="#kubeadmin" class="table-of-contents__link toc-highlight">kubeadmin</a></li></ul></li><li><a href="#å¯è§†åŒ–ç•Œé¢" class="table-of-contents__link toc-highlight">å¯è§†åŒ–ç•Œé¢</a></li><li><a href="#vagrant-æ­å»º-k8s-ç¯å¢ƒ" class="table-of-contents__link toc-highlight">vagrant æ­å»º k8s ç¯å¢ƒ</a></li><li><a href="#cka-è¯ä¹¦" class="table-of-contents__link toc-highlight">cka è¯ä¹¦</a></li><li><a href="#k3s" class="table-of-contents__link toc-highlight">k3s</a></li><li><a href="#k0s" class="table-of-contents__link toc-highlight">k0s</a></li><li><a href="#rancher" class="table-of-contents__link toc-highlight">rancher</a></li><li><a href="#harbor" class="table-of-contents__link toc-highlight">Harbor</a></li><li><a href="#helm-chart" class="table-of-contents__link toc-highlight">helm chart</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6d396791.js"></script>
<script src="/assets/js/main.f6c8ad5f.js"></script>
</body>
</html>