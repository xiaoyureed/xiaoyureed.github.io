<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-interview-system-design">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">经典的系统设计思路 | Xiaoyureed&#x27;s 网络 Wiki </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/docs/interview-system-design"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="经典的系统设计思路 | Xiaoyureed&#x27;s 网络 Wiki "><meta data-rh="true" name="description" content="https://www.bilibili.com/video/BV1s54y1L7VU?p=2 高并发优化"><meta data-rh="true" property="og:description" content="https://www.bilibili.com/video/BV1s54y1L7VU?p=2 高并发优化"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/docs/interview-system-design"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/interview-system-design" hreflang="en"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/interview-system-design" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/interview-system-design" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Xiaoyureed&#39;s 网络 Wiki  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Xiaoyureed&#39;s 网络 Wiki  Atom Feed"><link rel="stylesheet" href="/assets/css/styles.c6a654bf.css">
<link rel="preload" href="/assets/js/runtime~main.e1853de5.js" as="script">
<link rel="preload" href="/assets/js/main.c56d5ac7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Xiaoyureed</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/SpringBoot-note">Spring Boot 备忘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/agile-development-user-story-scrum">敏捷开发 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/autohotkey">Autohotkey 脚本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cpp">CPP and C 备忘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/css-pre-processor">几种CSS预处理器比较选型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design-pattern-note">Design Pattern 笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dev-resources">开发者资源</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/distributed-system">Distributed System 分布式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/effective-java-reading-note">Effective Java 阅读笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/english-note">英语学习🔥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/html-note">HTML 备忘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/idea-note">InteliJ idea tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/interview-system-design">经典的系统设计思路</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-note">Java Core 笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux-note">鸟哥的 Linux 私房菜阅读笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-big-data-introduce">大数据开发 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-computational-ad">计算广告 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-crawler-spider">网络爬虫 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-desktop-develop">桌面应用开发 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-http">HTTP protocol Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-reactive-programming">响应式编程 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rule-engine-note">规则引擎 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quant-money">量化交易</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/saas-paas-iaas-as-a-service">SaaS Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springmvc-note">Spring MVC</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">经典的系统设计思路</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>经典的系统设计思路</h1></header><p><a href="https://www.bilibili.com/video/BV1s54y1L7VU?p=2" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1s54y1L7VU?p=2</a> 高并发优化</p><p><a href="https://soulmachine.gitbooks.io/system-design/content/cn/distributed-id-generator.html" target="_blank" rel="noopener noreferrer">https://soulmachine.gitbooks.io/system-design/content/cn/distributed-id-generator.html</a></p><p><a href="https://github.com/xingshaocheng/architect-awesome" target="_blank" rel="noopener noreferrer">https://github.com/xingshaocheng/architect-awesome</a></p><p><a href="https://github.com/baiyutang/meetup" target="_blank" rel="noopener noreferrer">https://github.com/baiyutang/meetup</a> 技术会议 ppt</p><p><a href="https://github.com/davideuler/architecture.of.internet-product" target="_blank" rel="noopener noreferrer">https://github.com/davideuler/architecture.of.internet-product</a> 互联网项目架构</p><p><a href="https://acecodeinterview.com/kafka/" target="_blank" rel="noopener noreferrer">https://acecodeinterview.com/kafka/</a></p><p><a href="https://blog.csdn.net/Brad_PiTt7/article/details/90717429" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/Brad_PiTt7/article/details/90717429</a>
TODO</p><p><a href="https://github.com/0voice/interview_internal_reference" target="_blank" rel="noopener noreferrer">https://github.com/0voice/interview_internal_reference</a> 大厂面试题库</p><p><a href="https://github.com/donnemartin/system-design-primer" target="_blank" rel="noopener noreferrer">https://github.com/donnemartin/system-design-primer</a>
<a href="https://github.com/imarvinle/system-design-primer/blob/master/README-zh-Hans.md" target="_blank" rel="noopener noreferrer">https://github.com/imarvinle/system-design-primer/blob/master/README-zh-Hans.md</a></p><ul><li><a href="#1-%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%A5%97%E8%B7%AF">1. 系统设计套路</a><ul><li><a href="#11-%E6%B7%B7%E6%B2%8C%E5%B7%A5%E7%A8%8B-chaos-engineering">1.1. 混沌工程 chaos engineering</a></li><li><a href="#12-%E9%AB%98%E5%8F%AF%E7%94%A8">1.2. 高可用</a></li><li><a href="#13-%E9%AB%98%E5%B9%B6%E5%8F%91">1.3. 高并发</a></li></ul></li><li><a href="#2-%E7%9F%AD%E7%BD%91%E5%9D%80-%E7%9F%AD%E9%93%BE%E6%8E%A5">2. 短网址 短链接</a></li><li><a href="#3-%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB-%E5%90%8C%E6%AD%A5%E5%8F%8C%E5%86%99%E6%96%B9%E6%A1%88">3. 数据迁移 同步双写方案</a></li><li><a href="#4-%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95">4. 第三方登录</a></li><li><a href="#5-%E7%9B%B4%E6%92%AD%E5%BC%B9%E5%B9%95%E7%B3%BB%E7%BB%9F">5. 直播弹幕系统</a></li><li><a href="#6-%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F">6. 秒杀系统</a><ul><li><a href="#61-%E7%A7%92%E6%9D%80%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">6.1. 秒杀解决方案</a></li></ul></li><li><a href="#7-%E7%A7%AF%E5%88%86%E7%B3%BB%E7%BB%9F">7. 积分系统</a></li><li><a href="#8-%E7%94%B5%E5%95%86%E8%B4%A6%E6%88%B7%E7%B3%BB%E7%BB%9F">8. 电商账户系统</a></li><li><a href="#9-%E8%AE%A2%E5%8D%95%E7%B3%BB%E7%BB%9F">9. 订单系统</a><ul><li><a href="#91-%E8%AE%A2%E5%8D%95%E5%8F%B7%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5">9.1. 订单号生成策略</a></li><li><a href="#92-%E8%AE%A2%E5%8D%95%E5%88%9B%E5%BB%BA">9.2. 订单创建</a><ul><li><a href="#921-%E6%89%A3%E5%87%8F%E5%BA%93%E5%AD%98">9.2.1. 扣减库存</a><ul><li><a href="#9211-%E4%B8%8B%E5%8D%95%E5%87%8F%E5%BA%93%E5%AD%98">9.2.1.1. 下单减库存</a></li><li><a href="#9212-%E4%BB%98%E6%AC%BE%E5%87%8F%E5%BA%93%E5%AD%98">9.2.1.2. 付款减库存</a></li></ul></li></ul></li></ul></li><li><a href="#10-%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F">10. 支付系统</a><ul><li><a href="#101-%E5%85%A5%E9%97%A8%E4%BB%8B%E7%BB%8D">10.1. 入门介绍</a></li><li><a href="#102-%E5%8D%95%E5%85%83%E5%8C%96">10.2. 单元化</a></li></ul></li><li><a href="#11-feed-%E6%B5%81%E7%B3%BB%E7%BB%9F">11. feed 流系统</a></li><li><a href="#12-%E7%82%B9%E8%B5%9E%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1">12. 点赞模块设计</a><ul><li><a href="#121-%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF">12.1. 设计思路</a></li><li><a href="#122-%E4%BC%98%E7%BC%BA%E7%82%B9">12.2. 优缺点</a></li><li><a href="#123-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1">12.3. 数据结构设计</a></li></ul></li><li><a href="#13-%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95">13. 扫码登录</a><ul><li><a href="#131-%E6%89%AB%E7%A0%81%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF">13.1. 扫码设计思路</a></li></ul></li><li><a href="#14-excel-%E8%A1%A8%E5%AF%BC%E5%85%A5%E4%BC%98%E5%8C%96">14. Excel 表导入优化</a></li><li><a href="#15-java-%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1">15. java 监控系统设计</a><ul><li><a href="#151-%E6%A3%80%E6%B5%8B%E5%93%AA%E4%BA%9B%E5%86%85%E5%AE%B9">15.1. 检测哪些内容</a></li><li><a href="#152-%E5%A6%82%E4%BD%95%E7%9B%91%E6%8E%A7">15.2. 如何监控</a><ul><li><a href="#1521-%E7%A8%8B%E5%BA%8F%E5%86%85%E7%BD%AE%E7%9B%91%E6%B5%8B">15.2.1. 程序内置监测</a></li><li><a href="#1522-jdk-%E8%87%AA%E5%B8%A6%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7">15.2.2. jdk 自带可视化工具</a></li><li><a href="#1523-jdk-%E8%87%AA%E5%B8%A6%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7">15.2.3. jdk 自带命令行工具</a></li><li><a href="#1524-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B7%A5%E5%85%B7">15.2.4. 第三方工具</a></li></ul></li><li><a href="#153-%E6%A1%88%E4%BE%8B-%E7%94%9F%E9%B2%9C%E7%94%B5%E5%95%86%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0">15.3. 案例 生鲜电商监控平台</a></li></ul></li><li><a href="#16-%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E7%B3%BB%E7%BB%9F-im-%E7%B3%BB%E7%BB%9F">16. 消息推送系统 IM 系统</a></li><li><a href="#17-%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E%E7%B3%BB%E7%BB%9F">17. 流程引擎系统</a></li><li><a href="#18-%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F">18. 权限系统</a></li><li><a href="#19-%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E7%B3%BB%E7%BB%9F">19. 日志采集系统</a></li><li><a href="#20-%E5%BC%80%E6%94%BE-api-%E5%B9%B3%E5%8F%B0">20. 开放 api 平台</a></li><li><a href="#21-%E4%BC%98%E6%83%A0%E5%88%B8%E7%B3%BB%E7%BB%9F">21. 优惠券系统</a></li><li><a href="#22-%E6%92%AE%E5%90%88%E7%B3%BB%E7%BB%9F">22. 撮合系统</a><ul><li><a href="#221-%E6%92%AE%E5%90%88%E4%BA%A4%E6%98%93%E5%BC%95%E6%93%8E">22.1. 撮合交易引擎</a></li><li><a href="#222-hazelcast">22.2. Hazelcast</a></li><li><a href="#223-disruptor">22.3. disruptor</a></li></ul></li></ul><h1>系统设计套路</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="混沌工程-chaos-engineering">混沌工程 chaos engineering<a href="#混沌工程-chaos-engineering" class="hash-link" aria-label="混沌工程 chaos engineering的直接链接" title="混沌工程 chaos engineering的直接链接">​</a></h2><p>核心思想: if something hurt do it more often (在可控的条件下)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="高可用">高可用<a href="#高可用" class="hash-link" aria-label="高可用的直接链接" title="高可用的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 服务降级</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - 使用断路器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 隔离</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - 线程隔离 （thread  pool）, 如 hystrix , 其他还有 servlet3 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - 进程隔离（系统拆分）比如拆分微服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - 动静态资源隔离（cdn存放静态资源）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 限流</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (区别： 令牌桶输出速率可以变化 , 令牌以恒定速率颁发,可以以任意速度消耗；漏桶输出速率恒定 ,溢出的请求则拒绝或丢弃)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    令牌桶算法 Token Bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        原理： 系统会以一个恒定的速度往桶里放入令牌，而如果请求需要被处理，则需要先从桶里获取一个令牌，当桶里没有令牌可取时，则拒绝服务。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &gt; 大小固定的令牌桶可自行以恒定的速率源源不断地产生令牌。如果令牌不被消耗，或者被消耗的速度小于产生的速度，令牌就会不断地增多，直到把桶填满。后面再产生的令牌就会从桶中溢出。最后桶中可以保存的最大令牌数永远不会超过桶的大小。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &gt; 传送到令牌桶的数据包需要消耗令牌。不同大小的数据包，消耗的令牌数量不一样。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &gt; 令牌桶这种控制机制基于令牌桶中是否存在令牌来指示什么时候可以发送流量。令牌桶中的每一个令牌都代表一个字节。如果令牌桶中存在令牌，则允许发送流量；而如果令牌桶中不存在令牌，则不允许发送流量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Guava 的 RateLimiter 使用了 这个算法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        作用过程：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        假如用户配置的平均发送速率为r，则每隔1/r秒一个令牌被加入到桶中；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        假设桶最多可以存发b个令牌。如果令牌到达时令牌桶已经满了，那么这个令牌会被丢弃；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        当一个n个字节的数据包到达时，就从令牌桶中删除n个令牌，并且数据包被发送到网络；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        如果令牌桶中少于n个令牌，那么不会删除令牌，并且认为这个数据包在流量限制之外；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        算法允许最长b个字节的突发，但从长期运行结果看，数据包的速率被限制成常量r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        如何实现：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        一种解法是，开启一个定时任务，由定时任务持续生成令牌。这样的问题在于会极大的消耗系统资源，如，某接口需要分别对每个用户做访问频率限制，假设系统中存在6W用户，则至多需要开启6W个定时任务来维持每个桶中的令牌数，这样的开销是巨大的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        另一种解法则是延迟计算，如上resync函数。该函数会在每次获取令牌之前调用，其实现思路为，若当前时间晚于nextFreeTicketMicros，则计算该段时间内可以生成多少令牌，将生成的令牌加入令牌桶中并更新数据。这样一来，只需要在获取令牌时计算一次即可</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    漏桶算法 Leaky Bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        就是一个队列， 强制一个常量的输出速率而不管输入数据流的突发性。当输入空闲时，该算法不执行任何动作；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- &quot;冗余设计&quot; 负载均衡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - 在 nginx 中切换故障的应用层</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - dns 切换机房入口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 可回滚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    事物回滚， 代码版本回滚， 部署版本回滚， 数据库回滚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 为阻塞操作设置超时, 防止无休止等待</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 健康检查</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="高并发">高并发<a href="#高并发" class="hash-link" aria-label="高并发的直接链接" title="高并发的直接链接">​</a></h2><ul><li><p>无状态</p><p>  方便水平拓展</p></li><li><p>拆分</p><ul><li><p>系统解耦， 拆分成多个子系统， 可分别独立水平拓展</p></li><li><p>读写分离</p></li></ul></li><li><p>消息队列</p><p>  解耦（一对多消费）， 削峰， 异步</p><p>  对于一对多消费， 可以惊醒镜像复制</p></li><li><p>缓存</p><ul><li><p>浏览器缓存</p><p>  响应头 Expires， Cache-control</p></li><li><p>静态资源进行 cdn 缓存</p></li><li><p>接入层缓存， 如搭建 nginx 作为接入层</p></li><li><p>应用层缓存</p><p>  在 应用所在 server 上部署 redis， 多机间使用 redis 主从同步</p></li><li><p>分布式缓存</p><p>  分片规则：一致性哈希</p></li></ul></li></ul><ul><li><p>服务化</p><p>  单点远程服务调用 -&gt; 服务集群化 + nginx 负载均衡 </p><p>  调用方更多后， 考虑使用服务自动注册/发现</p><p>  考虑服务隔离，防止级联故障</p><p>  考虑服务限流， 连接超时时间/重试， 服务路由， 降级</p></li></ul><h1>短网址 短链接</h1><p><a href="https://www.zhihu.com/question/29270034" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/29270034</a></p><p><a href="https://www.zhihu.com/question/19852154" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/19852154</a></p><p><a href="https://soulmachine.gitbooks.io/system-design/content/cn/tinyurl.html" target="_blank" rel="noopener noreferrer">https://soulmachine.gitbooks.io/system-design/content/cn/tinyurl.html</a></p><p><a href="https://segmentfault.com/a/1190000012088345" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000012088345</a></p><p><a href="https://juejin.cn/post/6844904090602848270" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844904090602848270</a></p><h1>数据迁移 同步双写方案</h1><h1>第三方登录</h1><p><a href="https://mp.weixin.qq.com/s/3wHFNFQPtj86AocLhUQahw" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/3wHFNFQPtj86AocLhUQahw</a></p><h1>直播弹幕系统</h1><p><a href="https://mp.weixin.qq.com/s/QTslEl7FRupsckfeq7fSLg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/QTslEl7FRupsckfeq7fSLg</a>
TODO</p><h1>秒杀系统</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="秒杀解决方案">秒杀解决方案<a href="#秒杀解决方案" class="hash-link" aria-label="秒杀解决方案的直接链接" title="秒杀解决方案的直接链接">​</a></h2><p><a href="https://github.com/qiurunze123/miaosha" target="_blank" rel="noopener noreferrer">https://github.com/qiurunze123/miaosha</a>
<a href="https://github.com/qqxx6661/miaosha" target="_blank" rel="noopener noreferrer">https://github.com/qqxx6661/miaosha</a></p><ul><li><p>分布式 session , 为了抗并发, app 可能水平拓展, 各个 node 的 session 需要统一</p><p>使用 Redis 存储 session</p></li><li><p>加缓存缓解数据库读取压力</p><p>“分层校验”, 过滤尽量多的请求, 这时不做一致性校验, 比如可以直接从缓存读, 直到写库，才对库存做一致性检查</p><p>允许读场景下一定的脏数据，这样只会导致少量原本无库存的下单请求被误认为是有库存的，等到真正写数据时再保证最终一致性，由此做到高可用和一致性之间的平衡。</p></li><li><p>页面静态化</p></li><li><p>异步下单</p><p>使用消息队列</p></li><li><p>限流降级</p></li><li><p>应用层优化</p><ul><li><p>裁剪日志异常堆栈, 减少日志打印量</p></li><li><p>去组件框架, 比如去掉传统的 MVC 框架，直接使用 Servlet 处理请求</p></li><li><p>如何扣减库存</p><ul><li><p>下单减库存</p><p>用户体验好, 但是可能面临恶意下单, 造成最后货物剩余</p></li><li><p>付款减库存</p><p>会出现 用户付款却没货了. 出现超卖, 用户体验较差</p></li><li><p>预扣库存 (买家下单后，库存为其保留一定的时间（如 15 分钟），超过这段时间，库存自动释放)</p><p>提高了恶意下单的成本, 体验还可以</p><p>一般采用这种</p></li></ul></li></ul></li></ul><h1>积分系统</h1><p><a href="https://mp.weixin.qq.com/s/S8-P8h3_mhFWiEscEOi4ug" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/S8-P8h3_mhFWiEscEOi4ug</a></p><h1>电商账户系统</h1><p><a href="https://mp.weixin.qq.com/s/4M3iLsw35GZi94aBZ9VL2w" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/4M3iLsw35GZi94aBZ9VL2w</a></p><p><a href="https://www.cnblogs.com/wangiqngpei557/p/13169705.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/wangiqngpei557/p/13169705.html</a></p><h1>订单系统</h1><p>功能: 订单列表、订单详情、在线下单</p><p>业务流程: 订单创建、订单支付、订单确认、订单完成、取消订单等订单流程</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="订单号生成策略">订单号生成策略<a href="#订单号生成策略" class="hash-link" aria-label="订单号生成策略的直接链接" title="订单号生成策略的直接链接">​</a></h2><p><a href="https://www.v2ex.com/t/770751#reply16" target="_blank" rel="noopener noreferrer">https://www.v2ex.com/t/770751#reply16</a>
TODO</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="订单创建">订单创建<a href="#订单创建" class="hash-link" aria-label="订单创建的直接链接" title="订单创建的直接链接">​</a></h2><p>先获取下单中涉及的商品信息，然后获取该商品所涉及到的优惠信息</p><p>增减库存:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="扣减库存">扣减库存<a href="#扣减库存" class="hash-link" aria-label="扣减库存的直接链接" title="扣减库存的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="下单减库存">下单减库存<a href="#下单减库存" class="hash-link" aria-label="下单减库存的直接链接" title="下单减库存的直接链接">​</a></h4><p>——即用户下单成功时减少库存数量</p><p>优势：用户体验友好，系统逻辑简洁；
缺点：会导致恶意下单或下单后却不买，使得真正有需求的用户无法购买，影响真实销量</p><p>解决办法：
设置订单有效时间，若订单创建成功N分钟不付款，则订单取消，库存回滚；
限购，用各种条件来限制买家的购买件数，比如一个账号、一个ip，只能买一件；
风控，从技术角度进行判断，屏蔽恶意账号，禁止恶意账号购买</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="付款减库存">付款减库存<a href="#付款减库存" class="hash-link" aria-label="付款减库存的直接链接" title="付款减库存的直接链接">​</a></h4><p>优势：减少无效订单带来的资源损耗；
缺点：因第三方支付返回结果存在时差，同一时间多个用户同时付款成功，会导致下单数目超过库存，商家库存不足容易引发断货和投诉，成本增加</p><p>解决办法：
付款前再次校验库存，如确认订单要付款时再验证一次，并友好提示用户库存不足；
增加提示信息：在商品详情页，订单步骤页面提示不及时付款，不能保证有库存等</p><h1>支付系统</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="入门介绍">入门介绍<a href="#入门介绍" class="hash-link" aria-label="入门介绍的直接链接" title="入门介绍的直接链接">​</a></h2><p><a href="https://github.com/jigsaw-projects/jigsaw-payment" target="_blank" rel="noopener noreferrer">https://github.com/jigsaw-projects/jigsaw-payment</a>
<a href="http://doc.cocolian.cn/" target="_blank" rel="noopener noreferrer">http://doc.cocolian.cn/</a> 凤凰牌老熊</p><p><a href="https://github.com/jeequan/jeepay" target="_blank" rel="noopener noreferrer">https://github.com/jeequan/jeepay</a></p><p><a href="https://github.com/roncoo/roncoo-pay" target="_blank" rel="noopener noreferrer">https://github.com/roncoo/roncoo-pay</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="单元化">单元化<a href="#单元化" class="hash-link" aria-label="单元化的直接链接" title="单元化的直接链接">​</a></h2><p><a href="https://help.aliyun.com/document_detail/159741.html" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/document_detail/159741.html</a></p><p><a href="https://blog.51cto.com/u_6478076/5109051" target="_blank" rel="noopener noreferrer">https://blog.51cto.com/u_6478076/5109051</a></p><p><a href="https://thurstonzk2008.com/2019/09/24/%E5%8D%95%E5%85%83%E5%8C%96%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%E6%80%BB%E7%BB%93/" target="_blank" rel="noopener noreferrer">https://thurstonzk2008.com/2019/09/24/%E5%8D%95%E5%85%83%E5%8C%96%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%E6%80%BB%E7%BB%93/</a></p><p><a href="https://github.com/csy512889371/learnDoc/blob/master/javadoc/%E6%9E%B6%E6%9E%84/%E8%9A%81%E9%87%91%E6%9C%8D%E6%94%AF%E4%BB%98%E5%AE%9D%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8D%95%E5%85%83%E5%8C%96.md" target="_blank" rel="noopener noreferrer">https://github.com/csy512889371/learnDoc/blob/master/javadoc/%E6%9E%B6%E6%9E%84/%E8%9A%81%E9%87%91%E6%9C%8D%E6%94%AF%E4%BB%98%E5%AE%9D%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8D%95%E5%85%83%E5%8C%96.md</a></p><h1>feed 流系统</h1><p><a href="https://mp.weixin.qq.com/s/q4w6DdjznVZBXh28MzHdgA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/q4w6DdjznVZBXh28MzHdgA</a>
TODO</p><h1>点赞模块设计</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="设计思路">设计思路<a href="#设计思路" class="hash-link" aria-label="设计思路的直接链接" title="设计思路的直接链接">​</a></h2><p>点赞、取消点赞是高频次的操作，若每次都读写数据库，大量的操作会影响数据库性能，所以需要做缓存。将点赞数据扔到 redis 中, 然后离线刷回 MySQL</p><p>多久从 redis 中刷出一次数据到 MySQL 呢, 暂定为 2h</p><p>文章热度计算:文章获得点赞数越高，文章的热度就越高，那么怎么判断呢？不就直接记录点赞数就行啦，但是对于最新的文章怎么办？例如有一篇文章一年前发布的，获得 50 个赞，有篇最新文章获得 49 个赞，但是按照上面所说的一年前的文章热度还比最新的高，这就不合理了. ------------- 解决办法: 为每个文章加入一个 时间戳字段</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="优缺点">优缺点<a href="#优缺点" class="hash-link" aria-label="优缺点的直接链接" title="优缺点的直接链接">​</a></h2><ul><li><p>缓解了数据库写操作的压力</p></li><li><p>没法保证数据安全性</p><p>比如 redis 挂了会丢失数据</p><p>比如 点赞数据刷回 MySQL 不及时, 可能 redis 会在执行内存淘汰策略时淘汰这些数据 (不过 点赞数据也不是什么关键数据, 丢失一点问题也不大)</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据结构设计">数据结构设计<a href="#数据结构设计" class="hash-link" aria-label="数据结构设计的直接链接" title="数据结构设计的直接链接">​</a></h2><p>MySQL:</p><ul><li>user (id, name)</li><li>like_info (id, tweet_id, user, status)</li><li>tweet(id, content, user, like_count, hate_count)</li></ul><p>redis:</p><p>每有一条点赞数据, 就存一条数据 tweet_id::user_id status, 点赞 status = 1, 取消点赞 status = 0</p><p>一个 hash(tweet_id, set(user_id, ...)) 结构存储某个人所有文章的点赞人情况, tweet_id:(user_id1, user_id2...)</p><h1>扫码登录</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="扫码设计思路">扫码设计思路<a href="#扫码设计思路" class="hash-link" aria-label="扫码设计思路的直接链接" title="扫码设计思路的直接链接">​</a></h2><p>web 端 和 服务器的配合:</p><ol><li>user 访问登录页, server 随机生成 uuid, 作为键存入 redis, 值暂时为空, 同时设置过期时间, 根据 UUID + 验证字符串, 生成二维码 , 和 UUID 一起, 返回给 浏览器</li><li>browser 拿到 UUID 和 二维码, 之后每隔一秒向服务器发送一个请求, 看是否已经登录成功, 请求携带 UUID</li><li>server 根据 UUID 从 redis 获取 userID, 生成登录成功的 token, 浏览器登录成功</li></ol><p>手机端 和 服务器配合:</p><ol><li>手机扫描二维码, 得到 UUID, 向 手机端服务器发送请求, 携带 UUID + 验证字符串 + user token (穿 token 而不是 直接 userId 是为了安全, token 是经过加密的)</li><li>手机端服务器收到请求, 首先对比参数中的验证信息，确定是否为用户登录请求接口, 如果是，返回一个确认信息给手机端。</li><li>手机端收到返回后，将登录确认框显示给用户, 用户确认, 手机再次发送请求, 携带 UUID, token</li><li>服务器拿到 uuId 和 token 解析的 userId 后，将用户的 userid 作为 value 值存入 redis 中以 uuid 作为 key 的键值对中。</li></ol><h1>Excel 表导入优化</h1><p>缴费记录导入, 用户 将别的系统的数据填入我们系统中的 Excel 模板，应用将文件内容读取、校对、转换之后产生欠费数据、票据、票据详情并存储到数据库中; 校验包括:</p><ul><li>字段长度, 字段内容正则校验, 都在内存中没有外部数据交互, 性能影响小</li><li>数据正确性, 重复性校验, 如票据号是否和系统已存在的票据号重复, 房屋是否存在</li></ul><p>在我接手之前数据量还不大, 接手后数据量增加到 10w 级别, 对应到数据库就是 30w 级别, 经过优化后可以在 100s 内完成 (测试服务器 4g 内存不仅放了数据库 MySQL5.7，还放了很多微服务应用。处理能力不太行)</p><ol><li>poi 读取 Excel 成 list</li><li>遍历 list, 检验字段长度, 一些查询数据库的校验，比如校验当前行欠费对应的房屋是否在系统中存在, 写入当前行数据</li><li>返回执行结果，如果出错 / 校验不合格。则返回提示信息并回滚数据 (涉及到三个表)</li></ol><p>优化:</p><ul><li><p>缓存: 将参加校验的数据全部缓存到 HashMap 中。直接到 HashMap 去命中</p><p>校验行中的房屋是否存在，原本是要用 区域 + 楼宇 + 单元 + 房号 去查询房屋表匹配房屋 ID，查到则校验通过，生成的欠单中存储房屋 ID.因此我采用一条 SQL，将该小区下所有的房屋以 区域/楼宇/单元/房号 作为 key，以 房屋 ID 作为 value，存储到 HashMap 中</p></li><li><p>批量插入: MySQL insert 语句支持使用 values (),(),() 的方式一次插入多行数据，通过 mybatis foreach 结合 java 集合可以实现批量插入</p></li><li><p>EasyExcel 代替 poi, 注解方式读写 Excel</p></li><li><p>优化插入速度</p><p>我使用了 values 批量插入代替逐行插入。每 30000 行拼接一个长 SQL、顺序插入。整个导入方法这块耗时最多。后来我将每次拼接的行数减少到 10000、5000、3000、1000、500 发现执行最快的是 1000</p></li><li><p>日志, info 日志 对比不打日志, 不打印日志耗时仅仅是打印日志耗时的 1/10</p></li></ul><ul><li>并行流, 榨干数据库的 CPU，利用网络 IO 的等待时间</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class InsertConsumer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 每个长 SQL 插入的行数，可以根据数据库性能调整</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final static int SIZE = 1000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 如果需要调整并发数目，修改下面方法的第二个参数即可</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.setProperty(&quot;java.util.concurrent.ForkJoinPool.common.parallelism&quot;, &quot;4&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 插入方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param list     插入数据集合</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param consumer 消费型方法，直接使用 mapper::method 方法引用的方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param &lt;T&gt;      插入的数据类型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static &lt;T&gt; void insertData(List&lt;T&gt; list, Consumer&lt;List&lt;T&gt;&gt; consumer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (list == null || list.size() &lt; 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;List&lt;T&gt;&gt; streamList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; list.size(); i += SIZE) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int j = Math.min((i + SIZE), list.size());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;T&gt; subList = list.subList(i, j);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            streamList.add(subList);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 并行流使用的并发数是 CPU 核心数，不能局部更改。全局更改影响较大，斟酌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        streamList.parallelStream().forEach(consumer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>java 监控系统设计</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="检测哪些内容">检测哪些内容<a href="#检测哪些内容" class="hash-link" aria-label="检测哪些内容的直接链接" title="检测哪些内容的直接链接">​</a></h2><ul><li>当 java 运行一个应用，就会生成一个 JVM 的实例，而 java 应用则运行于此 JVM 实例中，当应用退出，JVM 实例也会关闭。启动多个 java 应用，也会启动多个 JVM 实例，它们不会相互影响</li><li>虚拟机主要有三大模块，<ul><li>一个类加载子系统（Class Loader Subsystem,负责加载类），</li><li>一个执行引擎（Execution Engine,负责执行类的方法指令和垃圾回收），</li><li>一个运行时数据区（Runtime Data Areas,负责存放程序运行时的数据）<ul><li>方法区（存储如类信息，方法信息，引用，常量池等），</li><li>堆（存储类实例对象和数组），</li><li>java 栈（以栈方式存放以帧为单位保存线程的运行状态帧），</li><li>程序计数器（每一个线程都有它自己的程序计数器，表示下一条将被执行指令的“地址”）</li></ul></li></ul></li></ul><p>java 应用启动流程就是通过类加载子系统加载相关的类，然后把相关数据如类信息，方法等存到方法区中，实例化相关的类存储在堆中，程序运行位置则是每个线程使用计数器来指定。方法区和堆是线程共享的，程序计数器及 Java 栈是线程私有的。</p><p>运行时数据区是 java 应用运行时的监测区域，其中各个区域的内存情况，特别是堆的内存使用情况，是重点区域。堆还会分年轻代、年老代及 Metaspace，垃圾回收器会进行分代回收。通过它的回收情况监测，可以检测到是否存在内存泄漏，而 java 栈则与线程有关，线程的运行状态又与 CPU 相关，因此 java 栈的监测可以知道 CPU 占用过大的问题，同时方法区和 java 栈的占用内存大小也是一个监测的指标</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何监控">如何监控<a href="#如何监控" class="hash-link" aria-label="如何监控的直接链接" title="如何监控的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="程序内置监测">程序内置监测<a href="#程序内置监测" class="hash-link" aria-label="程序内置监测的直接链接" title="程序内置监测的直接链接">​</a></h3><p>打印日志</p><p>另一方面可以输出系统属性 System.getProperties()及 System.getProperty()</p><p>对于 Spring Boot 应用，还可以使用 actuator 来监测程序运行情况</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jdk-自带可视化工具">jdk 自带可视化工具<a href="#jdk-自带可视化工具" class="hash-link" aria-label="jdk 自带可视化工具的直接链接" title="jdk 自带可视化工具的直接链接">​</a></h3><p>在 windows 平台下，jdk 还提供了可视化监测工具，以更直观，更方便的方式对 java 应用运行状况进行监测。这两款工具分别是 jconsole 和 jvisualvm，在 jdk 下的 bin 目录下可以找到。它们均可监测本地及远程的 java 应用，包括堆使用情况，线程使用，cpu 使用，类加载情况，gc 情况，jvisualvm 还可以生成相应的堆和线程快照，同时还可以使用相应的插件，以便于进一步分析。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jdk-自带命令行工具">jdk 自带命令行工具<a href="#jdk-自带命令行工具" class="hash-link" aria-label="jdk 自带命令行工具的直接链接" title="jdk 自带命令行工具的直接链接">​</a></h3><ul><li>jps 查看 java 进程 ID</li><li>jinfo 查看及调整虚拟机参数</li><li>jmap 查看堆(heap)使用情况及生成堆快照</li><li>jstack 查看线程运行状态及生成线程快照</li><li>jstat 显示进程中的类装载、内存、垃圾收集等运行数据。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="第三方工具">第三方工具<a href="#第三方工具" class="hash-link" aria-label="第三方工具的直接链接" title="第三方工具的直接链接">​</a></h3><ul><li>MAT 是 eclipse 的内存分析插件，通过 MAT 可以对 dump 出来的堆快照进行分析，并且辅助分析内存泄露原因，快速的计算出在内存中对象的占用大小，垃圾收集器的回收工作情况，并可以通过报表直观的查看到可能造成这种结果的对象。</li><li>BTrace 是是 sun 推出的一款 Java 动态、安全追踪（监控）工具，可以在不停机的情况下监控系统运行情况，并且做到最少的侵入，占用最少的系统资源。特别适用在生产环境下对 java 应用进行监测，问题排查。</li><li>Arthas 是阿里开源的在线 Java 诊断工具，同样可以在不停机情况监控系统，包括内存情况，线程情况，GC 情况，运行时数据，也可以监测方法参数、返回值，异常返回等数据，堪称神器，在生产环境下使用非常方便。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="案例-生鲜电商监控平台">案例 生鲜电商监控平台<a href="#案例-生鲜电商监控平台" class="hash-link" aria-label="案例 生鲜电商监控平台的直接链接" title="案例 生鲜电商监控平台的直接链接">​</a></h2><p><a href="https://mp.weixin.qq.com/s/9E6tdnPXHEtAeI2DO1KTdw" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/9E6tdnPXHEtAeI2DO1KTdw</a></p><h1>消息推送系统 IM 系统</h1><p>im系统常用相关协议，如：xmpp，mqtt，pb等</p><p>mosquito</p><p><a href="https://zhuanlan.zhihu.com/p/37993013" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/37993013</a>
TODO</p><h1>流程引擎系统</h1><p><a href="https://blog.csdn.net/herriman/article/details/51815925" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/herriman/article/details/51815925</a>
<a href="https://blog.csdn.net/WSRspirit/article/details/81412344" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/WSRspirit/article/details/81412344</a></p><h1>权限系统</h1><ul><li>集中式认证服务, 认证中心提供一个认证凭据, 各个子系统可以通过这个凭据生成自己子系统的凭据</li><li>基于角色的权限模型 RBAC(Role-Based Access Control), 角色是权限的集合, 权限是操作的集合</li></ul><h1>日志采集系统</h1><p><a href="https://mp.weixin.qq.com/s/n2LsrWWsP1ALeLtOYl68XQ" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/n2LsrWWsP1ALeLtOYl68XQ</a>
TODO</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">我们的实时日志量还是比较大的, 在高峰时期 (因为 根据经济作物的周期, 无人机作业有一定的季节性 ) 每天的日志量会达到百万级; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">然后要保证延迟控制在分钟级别 (也就是最多过去一分钟, 我就能够在系统查到刚刚的日志)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">还要支持水平拓展</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">日志收集系统是作我们公司的基础服务来提供, 后面可能不止是给农田管家一条业务线使用, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">当然目前是只有这一条业务线, 我们计划是能支持多业务线的, 只需要堆机器就行了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">我们选型 (也就是在找技术方案) 的时候, 首先当然是看到了很出名的 elk, 在线上 server 上放 logstash agent 采集日志, 保存到 es, 建立倒排索引, 通过 kibana 作为es 的客户端界面搜索展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">但是和我们的实际情况以对比, 发现有一些问题, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">首先是我们希望 logstash 能够支持监控, 实时能够知道 agent 的状态, 工作的怎么样 , elk 没有提供这样的选项, (现在不知道支持了监控没有, 我好久没用了)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 他是一套很重也很成熟的解决方案, 但是另外一方面来说定制开发比较麻烦, 而我们有一些定制化的需求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">另一个问题是 (也不能说问题, 就是不能很好的匹配我们要求), 那就是每增加一个业务线/新的机器, 需要运维人员去手动修改配置, 做不到自动化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">基于前面的原因, 我们最终选定的方案是这样:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">我们自己参照 logstash 实现定制了 log agent, 部署到服务所在的节点, 实时读取日志, 发送到 kafka, 然后有一个程序我们成为 transfer 从 kafka 读取日志, 存储到 es ( 这里我们留了接口, 后续业务量进一步增长, 会准备上 storm/hadoop做流处理还有日志分析), 然后通过 kibana 展示查看, 使用 etcd 来管理配置, 可以实时通知 log agent, 做到类似热加载的效果</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://www.bilibili.com/video/BV1Df4y1C7o5?p=5" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1Df4y1C7o5?p=5</a></p><p>存在的问题:</p><ul><li>麻烦, 运维成本很高, 每增加一个业务线或者增加一个日志收集项, 都要手动修改配置</li><li>logstash 没有监控, 没法知道准确的状态, 崩了也不知道</li><li>开源对定制开发和维护不友好</li></ul><p>新的选型架构:</p><p>log agent -&gt; kafka -&gt; transfer -&gt; es (storm/Hadoop) -&gt; kibana -&gt; browser</p><p>(使用  etcd 管理配置)</p><h1>开放 api 平台</h1><p>open api</p><p><a href="http://www.woshipm.com/pd/1930150.html" target="_blank" rel="noopener noreferrer">http://www.woshipm.com/pd/1930150.html</a></p><p><a href="https://timyang.net/sns/open-api-practice/" target="_blank" rel="noopener noreferrer">https://timyang.net/sns/open-api-practice/</a></p><p><a href="https://easydoc.net/posts/api-safe/" target="_blank" rel="noopener noreferrer">https://easydoc.net/posts/api-safe/</a></p><p><a href="https://antonioshen.gitbooks.io/openapi/content/" target="_blank" rel="noopener noreferrer">https://antonioshen.gitbooks.io/openapi/content/</a></p><p><a href="https://segmentfault.com/a/1190000015904390" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000015904390</a></p><p><a href="https://v2ex.com/t/609802" target="_blank" rel="noopener noreferrer">https://v2ex.com/t/609802</a></p><h1>优惠券系统</h1><p><a href="https://zhuanlan.zhihu.com/p/78790372" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/78790372</a>
<a href="http://www.woshipm.com/pd/1056437.html" target="_blank" rel="noopener noreferrer">http://www.woshipm.com/pd/1056437.html</a></p><p><a href="https://segmentfault.com/a/1190000005784383" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000005784383</a></p><p><a href="https://www.cnblogs.com/vivotech/p/15117264.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/vivotech/p/15117264.html</a></p><h1>撮合系统</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="撮合交易引擎">撮合交易引擎<a href="#撮合交易引擎" class="hash-link" aria-label="撮合交易引擎的直接链接" title="撮合交易引擎的直接链接">​</a></h2><p><a href="https://juejin.cn/post/6844904013909983240" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844904013909983240</a></p><p><a href="https://www.youtube.com/watch?v=-KSWPG8PAL4&amp;list=PLW0LFiZNv2iKPn5V2Ajk6l9vGsJpGUW7H" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=-KSWPG8PAL4&amp;list=PLW0LFiZNv2iKPn5V2Ajk6l9vGsJpGUW7H</a></p><p><a href="https://www.liaoxuefeng.com/article/1452011784503329" target="_blank" rel="noopener noreferrer">https://www.liaoxuefeng.com/article/1452011784503329</a></p><p><a href="https://www.cnblogs.com/zdz8207/p/qkl-CoinExchange-market.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zdz8207/p/qkl-CoinExchange-market.html</a></p><p><a href="https://xueqiu.com/8121449782/139412894" target="_blank" rel="noopener noreferrer">https://xueqiu.com/8121449782/139412894</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">工作职责：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1、参与撮合的开发，撮合系统是通过分析用户行为，建立用户之间的关系，撮合他们进行交易的系统。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2、分析用户行为，建立他们之间的关系，并研究用户推荐的算法；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3、开发后台程序，实现撮合系统的服务器端逻辑；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4、架构设计、模块开发、数据挖掘、算法研究都可能涉及到，根据个人的能力和兴趣安排具体的工作。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">职位要求：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1、本科4年工作经验，硕士以上2年工作经验；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2、具有至少以下一种编程语言熟练编写的经验: Java, JavaScript(node.js)，Python，C，C++ 等；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3、有Hadoop、Hive数据挖掘经验者优先；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4、有大规模互联网后台服务开发经验者优先；</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hazelcast">Hazelcast<a href="#hazelcast" class="hash-link" aria-label="Hazelcast的直接链接" title="Hazelcast的直接链接">​</a></h2><p><a href="https://www.modb.pro/db/323266" target="_blank" rel="noopener noreferrer">https://www.modb.pro/db/323266</a> 和 redis 区别</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="disruptor">disruptor<a href="#disruptor" class="hash-link" aria-label="disruptor的直接链接" title="disruptor的直接链接">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/interview">interview</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/系统设计">系统设计</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/interview-system-design.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/idea-note"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">InteliJ idea tips</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/java-code-clean"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Java Clean Code Tips</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#混沌工程-chaos-engineering" class="table-of-contents__link toc-highlight">混沌工程 chaos engineering</a></li><li><a href="#高可用" class="table-of-contents__link toc-highlight">高可用</a></li><li><a href="#高并发" class="table-of-contents__link toc-highlight">高并发</a></li><li><a href="#秒杀解决方案" class="table-of-contents__link toc-highlight">秒杀解决方案</a></li><li><a href="#订单号生成策略" class="table-of-contents__link toc-highlight">订单号生成策略</a></li><li><a href="#订单创建" class="table-of-contents__link toc-highlight">订单创建</a><ul><li><a href="#扣减库存" class="table-of-contents__link toc-highlight">扣减库存</a><ul><li><a href="#下单减库存" class="table-of-contents__link toc-highlight">下单减库存</a></li><li><a href="#付款减库存" class="table-of-contents__link toc-highlight">付款减库存</a></li></ul></li></ul></li><li><a href="#入门介绍" class="table-of-contents__link toc-highlight">入门介绍</a></li><li><a href="#单元化" class="table-of-contents__link toc-highlight">单元化</a></li><li><a href="#设计思路" class="table-of-contents__link toc-highlight">设计思路</a></li><li><a href="#优缺点" class="table-of-contents__link toc-highlight">优缺点</a></li><li><a href="#数据结构设计" class="table-of-contents__link toc-highlight">数据结构设计</a></li><li><a href="#扫码设计思路" class="table-of-contents__link toc-highlight">扫码设计思路</a></li><li><a href="#检测哪些内容" class="table-of-contents__link toc-highlight">检测哪些内容</a></li><li><a href="#如何监控" class="table-of-contents__link toc-highlight">如何监控</a><ul><li><a href="#程序内置监测" class="table-of-contents__link toc-highlight">程序内置监测</a></li><li><a href="#jdk-自带可视化工具" class="table-of-contents__link toc-highlight">jdk 自带可视化工具</a></li><li><a href="#jdk-自带命令行工具" class="table-of-contents__link toc-highlight">jdk 自带命令行工具</a></li><li><a href="#第三方工具" class="table-of-contents__link toc-highlight">第三方工具</a></li></ul></li><li><a href="#案例-生鲜电商监控平台" class="table-of-contents__link toc-highlight">案例 生鲜电商监控平台</a></li><li><a href="#撮合交易引擎" class="table-of-contents__link toc-highlight">撮合交易引擎</a></li><li><a href="#hazelcast" class="table-of-contents__link toc-highlight">Hazelcast</a></li><li><a href="#disruptor" class="table-of-contents__link toc-highlight">disruptor</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e1853de5.js"></script>
<script src="/assets/js/main.c56d5ac7.js"></script>
</body>
</html>