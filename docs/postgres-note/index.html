<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-postgres-note">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Postgres noteğŸŒˆ - Xiaoyureed çš„ç½‘ç»œ Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/img/logo.webp"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/img/logo.webp"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/docs/postgres-note"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="keywords" content="xiaoyureed"><meta data-rh="true" name="keywords" content="blog, java, spring, microservice, python, rust, typescript, react, web"><meta data-rh="true" name="keywords" content=" åŠè·¯è½¬è¡Œçš„ç¼–ç¨‹çˆ±å¥½è€…, å†™è¿‡ Python, Rust, ç°åœ¨ä¸»æ”» Java åˆ†å¸ƒå¼ç³»ç»Ÿ"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Postgres noteğŸŒˆ - Xiaoyureed çš„ç½‘ç»œ Wiki"><meta data-rh="true" name="description" content="https://github.com/PostgresApp/PostgresApp mac ç‹¬ç«‹ app"><meta data-rh="true" property="og:description" content="https://github.com/PostgresApp/PostgresApp mac ç‹¬ç«‹ app"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/docs/postgres-note"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/postgres-note" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/postgres-note" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/postgres-note" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5SAMPKXTP9-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Xiaoyureed çš„ç½‘ç»œ Wiki" href="/opensearch.xml">


<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f6da56a47f5085d1e0fedae39b8de00a";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.defer=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script>
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="xiaoyureed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="xiaoyureed Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="xiaoyureed JSON Feed">

<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)">
<meta name="description" content="Xiaoyureed çš„ä¸ªäººåšå®¢"><link rel="stylesheet" href="/assets/css/styles.261d8673.css">
<link rel="preload" href="/assets/js/runtime~main.18b1a606.js" as="script">
<link rel="preload" href="/assets/js/main.70a14f93.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><a href="/docs/rust-note" target="_blank">Rust æŒ‡åŒ—, æ¬¢è¿æŸ¥çœ‹...</a></div><button type="button" aria-label="å…³é—­" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">èœå•</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/archive">åšå®¢</a></li><li><a class="dropdown__link" href="/docs/intro">æ•™ç¨‹</a></li><li><a class="dropdown__link" href="/resource">å¯¼èˆª</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--dark_i4oU"><b></b></a><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/SpringBoot-note">Spring Boot å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/autohotkey">Autohotkey è„šæœ¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/blockchain">blockchainåŒºå—é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/c-sharp-and-dot-net">C# &amp; .NET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cpp">CPP and C å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/css-pre-processor">å‡ ç§CSSé¢„å¤„ç†å™¨æ¯”è¾ƒé€‰å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design-pattern-note">Design Pattern ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dev-resources">å¼€å‘è€…èµ„æº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/distributed-system">Distributed System åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/effective-java-reading-note">Effective Java é˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/elk-elastic-log">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/english-note">è‹±è¯­å­¦ä¹ ğŸ”¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/extjs-note">Extjs ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/git-note">Git å¤‡å¿˜ ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/golang-note">Golang ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/gps-gis-tracing">åŸºäºåœ°ç†ä½ç½®å¼€å‘æŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/gradle">Gradle note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/greasy-monkey">æ²¹çŒ´æ’ä»¶&amp;ç¼–å†™è„šæœ¬ğŸ’</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/groovy-note">groovy note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/health">Health å…³çˆ±ç¨‹åºå‘˜å¥åº·ğŸ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/interview-system-design">ç³»ç»Ÿè®¾è®¡ System design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/iot">Iot ç‰©è”ç½‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-concurrent">Java ConcurrentğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-memory-model-jmm-jvm">JMM and GCğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-note">Java Core ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/js-tutorial">JavaScript tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kotlin">kotlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes-k8s">kubernetes-k8s â˜ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux-note">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/low-code-platform">å…³äºä½ä»£ç å¹³å°çš„è°ƒç ”</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mac">Mac å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/machine-learning-ml">machine-learning-ml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/marketing-seo">Marketing SEO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/maven-note">Maven NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/message-queue">Message QueueğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/money">Investment Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mongodb-note">MongoDB NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/monitor-system-grafana-prometheus-influxdb-hbase-time-serials-database">monitor-system-grafana-prometheusç›‘æ§ğŸ–¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mvc-mvvm">MVC to MVVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/netty-note">netty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nlp-natural-language-processing">nlp-natural-language-processingğŸ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nodejs-yarn-npm">Nodejs, Yarn, Npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/oracle">Oracle å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-big-data-introduce">å¤§æ•°æ®å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-cache">Cache ç¼“å­˜ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-computational-ad">è®¡ç®—å¹¿å‘Š Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-crawler-spider">ç½‘ç»œçˆ¬è™« Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-db-design-note">å…³ç³»å‹æ•°æ®åº“è¡¨è®¾è®¡ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-desktop-develop">æ¡Œé¢åº”ç”¨å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-http-restful">HTTP protocol Intro &amp; RESTful</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-reactive-programming">å“åº”å¼ç¼–ç¨‹ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rule-engine-note">è§„åˆ™å¼•æ“ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/php-note">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/postgres-note">Postgres noteğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/process-workflow-bpm-engine">å·¥ä½œæµå¼•æ“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/protect-your-app-authentication-oauth2-jwt-https">Protect Your App å®‰å…¨ä¿æŠ¤è®¤è¯é‰´æƒğŸ”‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/psychology">psychology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/python-note">PythonğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quant-money">é‡åŒ–äº¤æ˜“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quarkus">Quarkus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/react-note">ReactğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/real-time-communication-protocol">å®æ—¶é€šä¿¡ Real-time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/redis-note">RedisğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/regex">Regular Expression æ­£åˆ™ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/rust-note">Rust ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/scala-akka-play-framework">Scala è¯­è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/serverless">Serverless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/service-mesh">service mesh æœåŠ¡ç½‘æ ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/servlet">Servlet Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/shell-bash-note">shell-bashè„šæœ¬æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springcloud-note">Spring Cloud ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springmvc-note">Spring MVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/task-schedule-note">Task Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tcp-ip-note-p2p">TCP IP, p2p</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tomcat-jetty-nginx">Tomcat Jetty Nginx ç­‰ web å®¹å™¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/vertx">Vertx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/video-creator">æ‹æ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/vue">Vue Brief Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/webassembly">webassembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/webpack-esbuild-vite-rollup">å‰ç«¯æ‰“åŒ…æ„å»ºå·¥å…·</a></li></ul></nav><button type="button" title="æ”¶èµ·ä¾§è¾¹æ " aria-label="æ”¶èµ·ä¾§è¾¹æ " class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Postgres noteğŸŒˆ</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>Postgres noteğŸŒˆ</h1></header><p><a href="https://github.com/PostgresApp/PostgresApp" target="_blank" rel="noopener noreferrer">https://github.com/PostgresApp/PostgresApp</a> mac ç‹¬ç«‹ app
<a href="https://github.com/TablePlus/dbngin" target="_blank" rel="noopener noreferrer">https://github.com/TablePlus/dbngin</a></p><p><a href="https://www.zhihu.com/question/20010554" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/20010554</a>
<a href="https://juejin.cn/post/6959903781366530079" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6959903781366530079</a></p><p><a href="http://www.postgresqltutorial.com/#" target="_blank" rel="noopener noreferrer">http://www.postgresqltutorial.com/#</a> - postgresql tutorial</p><p><a href="https://medium.com/quick-code/top-tutorials-to-learn-postgresql-database-for-beginners-99ff0deb9f84" target="_blank" rel="noopener noreferrer">https://medium.com/quick-code/top-tutorials-to-learn-postgresql-database-for-beginners-99ff0deb9f84</a></p><p><a href="http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html" target="_blank" rel="noopener noreferrer">http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html</a> - é€šä¿—çš„å…¥é—¨</p><p><a href="https://github.com/PostgREST/postgrest" target="_blank" rel="noopener noreferrer">https://github.com/PostgREST/postgrest</a> - postgresql to rest api</p><ul><li><a href="#1-what-is-postgres">1. what is postgres</a><ul><li><a href="#logical-construction">logical construction</a></li><li><a href="#physical-structure">physical structure</a></li><li><a href="#progress-structure">progress structure</a></li><li><a href="#memory-construction">memory construction</a></li></ul></li><li><a href="#2-why-postgres">2. Why Postgres</a></li><li><a href="#3-how-to-use">3. how to use</a><ul><li><a href="#31-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8">3.1. å‘½ä»¤è¡Œä½¿ç”¨</a></li><li><a href="#32-sql-%E7%A4%BA%E4%BE%8B">3.2. sql ç¤ºä¾‹</a></li><li><a href="#33-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">3.3. æ•°æ®ç±»å‹</a><ul><li><a href="#331-%E6%97%B6%E9%97%B4">3.3.1. æ—¶é—´</a></li><li><a href="#332-array%E7%B1%BB%E5%9E%8B">3.3.2. arrayç±»å‹</a></li><li><a href="#333-hstore-%E9%94%AE%E5%80%BC%E5%AF%B9%E7%B1%BB%E5%9E%8B">3.3.3. hstore é”®å€¼å¯¹ç±»å‹</a></li><li><a href="#334-json%E7%B1%BB%E5%9E%8B">3.3.4. jsonç±»å‹</a></li><li><a href="#335-%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B">3.3.5. æ•°å­—ç±»å‹</a></li><li><a href="#336-%E5%BA%8F%E5%8F%B7%E7%B1%BB%E5%9E%8B">3.3.6. åºå·ç±»å‹</a></li><li><a href="#337-%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B">3.3.7. å­—ç¬¦ç±»å‹</a></li></ul></li><li><a href="#34-%E4%B8%8D%E5%90%8C%E4%BA%8Emysql%E7%9A%84%E7%89%B9%E6%80%A7">3.4. ä¸åŒäºMySQLçš„ç‰¹æ€§</a><ul><li><a href="#341-%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F">3.4.1. è´¦å·ç³»ç»Ÿ</a></li><li><a href="#342-schema">3.4.2. schema</a></li><li><a href="#343-sql%E6%9F%A5%E8%AF%A2">3.4.3. sqlæŸ¥è¯¢</a></li><li><a href="#344-%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9">3.4.4. æ•°æ®ä¿®æ”¹</a></li><li><a href="#345-%E8%A1%A8%E7%AE%A1%E7%90%86">3.4.5. è¡¨ç®¡ç†</a></li><li><a href="#346-%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA">3.4.6. å¯¼å…¥å¯¼å‡º</a></li></ul></li></ul></li><li><a href="#4-crontab-%E5%AE%9A%E6%97%B6%E6%93%8D%E4%BD%9C-postgresql">4. crontab å®šæ—¶æ“ä½œ postgresql</a></li><li><a href="#5-docker-%E4%B8%AD%E5%90%AF%E5%8A%A8-postgres">5. docker ä¸­å¯åŠ¨ postgres</a></li><li><a href="#%E5%BC%80%E6%BA%90%E5%BA%93-%E6%8F%92%E4%BB%B6">å¼€æºåº“ æ’ä»¶</a><ul><li><a href="#restapi">restapi</a></li><li><a href="#%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8">åˆ†åº“åˆ†è¡¨</a></li></ul></li></ul><h1>1. what is postgres</h1><p>å…³ç³»å‹æ•°æ®åº“, å¼€æº, åŒç±»æ˜¯ MySQL</p><p>Greenplum: å¼€æºåˆ†å¸ƒå¼æ•°æ®åº“é›†ç¾¤æŠ€æœ¯ï¼ŒåŸºäºPostgreSQL</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logical-construction">logical construction<a href="#logical-construction" class="hash-link" aria-label="logical constructionçš„ç›´æ¥é“¾æ¥" title="logical constructionçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ‰€æœ‰æ•°æ®åº“å¯¹è±¡éƒ½æœ‰å„è‡ªçš„oid(object identifiers),oidæ˜¯ä¸€ä¸ªæ— ç¬¦å·çš„å››å­—èŠ‚æ•´æ•°ï¼Œç›¸å…³å¯¹è±¡çš„oidéƒ½å­˜æ”¾åœ¨ç›¸å…³çš„system catalogè¡¨ä¸­ï¼Œæ¯”å¦‚æ•°æ®åº“çš„oidå’Œè¡¨çš„oidåˆ†åˆ«å­˜æ”¾åœ¨  <code>pg\_database,pg\_class</code>è¡¨ä¸­</p><p>Database cluster: a collection containing a bench of db object, such as dbs, users and so on</p><blockquote><p>æŒ‡æœ‰å•ä¸ªPostgreSQLæœåŠ¡å™¨å®ä¾‹ç®¡ç†çš„æ•°æ®åº“é›†åˆï¼Œç»„æˆæ•°æ®åº“é›†ç¾¤çš„è¿™äº›æ•°æ®åº“ä½¿ç”¨ç›¸åŒçš„å…¨å±€é…ç½®æ–‡ä»¶å’Œç›‘å¬ç«¯å£ã€å…±ç”¨è¿›ç¨‹å’Œå†…å­˜ç»“æ„ã€‚ä¸€ä¸ªDataBase Clusterå¯ä»¥åŒ…æ‹¬ï¼šå¤šä¸ªDataBaseã€å¤šä¸ªUserã€ä»¥åŠDatabaseä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</p></blockquote><p>Database: to describe a database</p><blockquote><p>æ•°æ®åº“æœ¬èº«ä¹Ÿæ˜¯æ•°æ®åº“å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨é€»è¾‘ä¸Šå½¼æ­¤åˆ†ç¦»ï¼Œ</p></blockquote><p>Database object: å¦‚ï¼šè¡¨ã€è§†å›¾ã€ç´¢å¼•ã€åºåˆ—ã€å‡½æ•°ç­‰ç­‰</p><p>tablespace: the basic store unit, our tables are stored inside of it</p><blockquote><p>å­˜å‚¨å•å…ƒï¼Œç§°ä½œè¡¨ç©ºé—´ã€‚è¡¨ç©ºé—´ç”¨ä½œæŠŠé€»è¾‘ä¸Šç›¸å…³çš„ç»“æ„æ”¾åœ¨ä¸€èµ·ã€‚æ•°æ®åº“é€»è¾‘ä¸Šæ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç©ºé—´ç»„æˆã€‚åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ›å»º<code>pg\_defaultå’Œpg\_global</code>ä¸¤ä¸ªè¡¨ç©ºé—´</p></blockquote><blockquote><p><code>create tablespace mydemotbs location &#x27;/home/postgres/training/pgsql/data/mydemotbs&#x27;; create table testtable1(tid int primary key,tname text) tablespace mydemotbs;</code></p></blockquote><blockquote><p><code>\db</code> query all table spaces</p></blockquote><p>Schema: something like namespace, being used to prevent naming table the same name</p><blockquote><p>å½“åˆ›å»ºä¸€ä¸ªæ•°æ®åº“æ—¶ï¼Œä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªåä¸ºpublicçš„é»˜è®¤Schemaã€‚Schemaæ˜¯æ•°æ®åº“ä¸­çš„å‘½åç©ºé—´ï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åœ¨Schemaä¸­åˆ›å»ºï¼Œä¸€ä¸ªç”¨æˆ·å¯ä»¥ä»åŒä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ä¸­è®¿é—®ä¸åŒçš„Schemaã€‚è€Œä¸åŒçš„Schemaä¸­å¯ä»¥æœ‰å¤šä¸ªåŒåçš„Tableã€Indexã€Viewã€Sequenceã€Functionç­‰ç­‰æ•°æ®åº“å¯¹è±¡
<code>\dn</code> all namespaces</p></blockquote><p>segment</p><blockquote><p>åˆ†é…ç»™ä¸€ä¸ªé€»è¾‘ç»“æ„ï¼ˆä¸€ä¸ªè¡¨ã€ä¸€ä¸ªç´¢å¼•æˆ–å…¶ä»–å¯¹è±¡ï¼‰çš„ä¸€ç»„åŒºï¼Œæ˜¯æ•°æ®åº“å¯¹è±¡ä½¿ç”¨çš„ç©ºé—´çš„é›†åˆï¼›æ®µå¯ä»¥æœ‰è¡¨æ®µã€ç´¢å¼•æ®µã€å›æ»šæ®µã€ä¸´æ—¶æ®µå’Œé«˜é€Ÿç¼“å­˜æ®µç­‰</p></blockquote><p>extent</p><blockquote><p>åŒºæ˜¯æ•°æ®åº“å­˜å‚¨ç©ºé—´åˆ†é…çš„ä¸€ä¸ªé€»è¾‘å•ä½ï¼Œå®ƒç”±è¿ç»­æ•°æ®å—æ‰€ç»„æˆã€‚ç¬¬ä¸€ä¸ªæ®µæ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªç›˜åŒºç»„æˆã€‚å½“ä¸€æ®µä¸­é—´æ‰€æœ‰ç©ºé—´å·²å®Œå…¨ä½¿ç”¨ï¼ŒPostgreSQLä¸ºè¯¥æ®µåˆ†é…ä¸€ä¸ªæ–°çš„èŒƒå›´</p></blockquote><p>block</p><blockquote><p>æ•°æ®å—æ˜¯PostgreSQL ç®¡ç†æ•°æ®æ–‡ä»¶ä¸­å­˜å‚¨ç©ºé—´çš„å•ä½ï¼Œä¸ºæ•°æ®åº“ä½¿ç”¨çš„I/Oçš„æœ€å°å•ä½ï¼Œæ˜¯æœ€å°çš„é€»è¾‘éƒ¨ä»¶ã€‚é»˜è®¤å€¼8Kã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="physical-structure">physical structure<a href="#physical-structure" class="hash-link" aria-label="physical structureçš„ç›´æ¥é“¾æ¥" title="physical structureçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨æ‰§è¡Œinitdbçš„æ—¶å€™ä¼šåˆå§‹åŒ–ä¸€ä¸ªç›®å½•ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½ä¼šåœ¨ç³»ç»Ÿé…ç½®ç›¸å…³çš„ç¯å¢ƒå˜é‡$PGDATAæ¥è¡¨ç¤º</p><p>ä¸€ä¸ªTablespaceå¯¹åº”çš„éƒ½æ˜¯ä¸€ä¸ªç›®å½•</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="progress-structure">progress structure<a href="#progress-structure" class="hash-link" aria-label="progress structureçš„ç›´æ¥é“¾æ¥" title="progress structureçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>ps -ef | grep postgres</code></p><blockquote><p>ä¸»è¿›ç¨‹Postmasteræ˜¯æ•´ä¸ªæ•°æ®åº“å®ä¾‹çš„æ€»æ§åˆ¶è¿›ç¨‹ï¼Œè´Ÿè´£å¯åŠ¨å’Œå…³é—­æ•°æ®åº“å®ä¾‹ã€‚ç”¨æˆ·å¯ä»¥è¿è¡Œpostmasterï¼Œpostgreså‘½ä»¤åŠ ä¸Šåˆé€‚çš„å‚æ•°å¯åŠ¨æ•°æ®åº“ã€‚å®é™…ä¸Šï¼Œpostmasterå‘½ä»¤æ˜¯ä¸€ä¸ªæŒ‡å‘postgresçš„é“¾æ¥</p><p>å½“ç”¨æˆ·ä¸PostgreSQLæ•°æ®åº“å»ºç«‹è¿æ¥æ—¶ï¼Œå®é™…ä¸Šæ˜¯å…ˆä¸Postmasterè¿›ç¨‹å»ºç«‹è¿æ¥ã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯ç¨‹åºä¼šå‘å‡ºèº«ä»½è¯éªŒè¯çš„æ¶ˆæ¯ç»™Postmasterè¿›ç¨‹ï¼ŒPostmasterä¸»è¿›ç¨‹æ ¹æ®æ¶ˆæ¯ä¸­çš„ä¿¡æ¯è¿›è¡Œå®¢æˆ·ç«¯èº«ä»½éªŒè¯ã€‚å¦‚æœéªŒè¯é€šè¿‡ï¼Œå®ƒä¼šforkä¸€ä¸ªå­è¿›ç¨‹postgresä¸ºè¿™ä¸ªè¿æ¥æœåŠ¡ï¼Œforkå‡ºæ¥çš„è¿›ç¨‹è¢«ç§°ä¸ºæœåŠ¡è¿›ç¨‹; <code>æŸ¥è¯¢pg\_stat\_activityè¡¨å¯ä»¥çœ‹åˆ°çš„pidï¼Œå°±æ˜¯è¿™äº›æœåŠ¡è¿›ç¨‹çš„pidã€‚select pid from pg_stat_activity;</code></p><p>SysLoggerè¿›ç¨‹, SysLoggerä¼šåœ¨æ—¥å¿—æ–‡ä»¶è¾¾åˆ°æŒ‡å®šçš„å¤§å°æ—¶å…³é—­å½“å‰æ—¥å¿—æ–‡ä»¶ï¼Œäº§ç”Ÿæ–°çš„æ—¥å¿—æ–‡ä»¶</p><p>BgWriteråå°å†™è¿›ç¨‹</p><p>WalWriteré¢„å†™æ—¥å¿—å†™è¿›ç¨‹</p><p> PgArchå½’æ¡£è¿›ç¨‹ è¯¥æŠ€æœ¯æ”¯æŒå°†æ•°æ®åº“æ¢å¤åˆ°å…¶è¿è¡Œå†å²ä¸­ä»»æ„ä¸€ä¸ªæœ‰è®°å½•çš„æ—¶é—´ç‚¹</p><p>AutoVacuumè‡ªåŠ¨æ¸…ç†è¿›ç¨‹
å¯¹æ•°æ®è¿›è¡ŒUPDATEæˆ–è€…DELETEæ“ä½œåï¼Œæ•°æ®åº“ä¸ä¼šç«‹å³åˆ é™¤æ—§ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯æ ‡è®°ä¸ºåˆ é™¤çŠ¶æ€ã€‚è¿™æ˜¯å› ä¸ºPGæ•°æ®åº“å…·æœ‰å¤šç‰ˆæœ¬çš„æœºåˆ¶ï¼Œå¦‚æœè¿™äº›æ—§ç‰ˆæœ¬çš„æ•°æ®æ­£åœ¨è¢«å¦å¤–çš„äº‹åŠ¡æ‰“å¼€ï¼Œé‚£ä¹ˆæš‚æ—¶ä¿ç•™ä»–ä»¬æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å½“äº‹åŠ¡æäº¤åï¼Œæ—§ç‰ˆæœ¬çš„æ•°æ®å·²ç»æ²¡æœ‰ä»·å€¼äº†ï¼Œæ•°æ®åº“éœ€è¦æ¸…ç†åƒåœ¾æ•°æ®è…¾å‡ºç©ºé—´ï¼Œè€Œæ¸…ç†å·¥ä½œå°±æ˜¯AutoVacuumè¿›ç¨‹è¿›è¡Œçš„ã€‚postgresql.confæ–‡ä»¶ä¸­ä¸AutoVacuumè¿›ç¨‹ç›¸å…³çš„å‚æ•°</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="memory-construction">memory construction<a href="#memory-construction" class="hash-link" aria-label="memory constructionçš„ç›´æ¥é“¾æ¥" title="memory constructionçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ¬åœ°å†…å­˜ï¼šæ¯ä¸ªåç«¯è¿›ç¨‹(backend process)è‡ªå·±ä½¿ç”¨çš„</p><p>å…±äº«å†…å­˜ï¼šæ‰€æœ‰è¿›ç¨‹å…±åŒä½¿ç”¨</p><h1>2. Why Postgres</h1><p>æˆ–è€…è¯´, æ¯”MySQLå¥½åœ¨å“ªé‡Œ (<a href="https://www.zhihu.com/question/20010554/answer/62628256" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/20010554/answer/62628256</a>)</p><ul><li>MySQL çš„å„ç§ text å­—æ®µæœ‰ä¸åŒçš„é™åˆ¶, è¦æ‰‹åŠ¨åŒºåˆ† small text, middle text, large text... Pg æ²¡æœ‰è¿™ä¸ªé™åˆ¶, text èƒ½æ”¯æŒå„ç§å¤§å°.</li><li>pg å¯ä»¥è®¾ç½® transform_null_equals æŠŠ = null ç¿»è¯‘æˆ is null (æŒ‰ç…§ SQL æ ‡å‡†, åš null åˆ¤æ–­ä¸èƒ½ç”¨ = null, åªèƒ½ç”¨ is null, è¿™æ˜¯å› ä¸º nullæ°¸è¿œä¸ç­‰äºnull) - <a href="http://www.postgresqltutorial.com/postgresql-is-null/" target="_blank" rel="noopener noreferrer">http://www.postgresqltutorial.com/postgresql-is-null/</a></li><li>MySQL é‡Œéœ€è¦ utf8mb4 æ‰èƒ½æ˜¾ç¤º emoji çš„å‘, Pg å°±æ²¡è¿™ä¸ªå‘.</li><li>MySQL çš„äº‹åŠ¡éš”ç¦»çº§åˆ« repeatable read å¹¶ä¸èƒ½é˜»æ­¢å¸¸è§çš„å¹¶å‘æ›´æ–°, å¾—åŠ é”æ‰å¯ä»¥, ä½†æ‚²è§‚é”ä¼šå½±å“æ€§èƒ½, æ‰‹åŠ¨å®ç°ä¹è§‚é”åˆå¤æ‚. è€Œ Pg çš„åˆ—é‡Œæœ‰<code>éšè—çš„ä¹è§‚é”</code> version å­—æ®µ, é»˜è®¤çš„ repeatable read çº§åˆ«å°±èƒ½ä¿è¯å¹¶å‘æ›´æ–°çš„æ­£ç¡®æ€§, å¹¶ä¸”åˆæœ‰ä¹è§‚é”çš„æ€§èƒ½</li><li>MySQL ä¸æ”¯æŒå¤šä¸ªè¡¨ä»åŒä¸€ä¸ªåºåˆ—ä¸­å– id, è€Œ Pg å¯ä»¥</li><li>MySQL ä¸æ”¯æŒ OVER å­å¥, è€Œ Pg æ”¯æŒ. OVER å­å¥èƒ½ç®€å•çš„è§£å†³ &quot;æ¯ç»„å– top 5&quot; çš„è¿™ç±»é—®é¢˜</li><li>å­æŸ¥è¯¢ (subquery) æ€§èƒ½éƒ½æ¯” MySQL å¥½.</li><li>å­˜å‚¨ array å’Œ json, å¯ä»¥åœ¨ array å’Œ json ä¸Šå»ºç´¢å¼•,  jsonb çš„å­˜å‚¨ç»“æ„ç”¨æ¥å®ç°æ–‡æ¡£æ•°æ®åº“å­˜å‚¨, ä¸å¿…å¼•å…¥mongodbäº†</li><li>è‡ªå¸¦å…¨æ–‡æ£€ç´¢, ä¸å¿…å¼•å…¥ elasticsearch</li><li>MySQL å¤„ç†æ ‘çŠ¶å›å¤çš„è®¾è®¡ä¼šå¾ˆå¤æ‚, è€Œä¸”éœ€è¦å†™å¾ˆå¤šä»£ç , è€Œ Pg å¯ä»¥é«˜æ•ˆå¤„ç†æ ‘ç»“æ„</li><li>postgres æ‰“é€šæ‰€æœ‰ç±»å‹çš„æ•°æ®æº, ä½¿ç”¨sqlè¯­æ³•å»æŸ¥è¯¢æ§åˆ¶ï¼Œåƒä½¿ç”¨æœ¬åœ°è¡¨ä¸€æ ·. è¿™å°±ä¸å¿…å¼•å…¥ ETLäº† (postgresqlæœ‰ä¸°å¯Œçš„fdwæ‹“å±•æ’ä»¶ï¼Œèƒ½æ‰“é€šsql server, sybase, oracle ,mysqlï¼Œç”šè‡³èƒ½æ‰“é€šnosql å¦‚redis, mongodbï¼Œè¿˜èƒ½æ‰“é€šå„ç§æ–‡ä»¶æ¯”å¦‚æ—¥å¿—æ–‡ä»¶)</li><li>Postgresql çš„PL/Pythonè¿‡ç¨‹è¯­è¨€å…è®¸å‡½æ•°ç”¨Pythonè¯­è¨€ç¼–å†™</li></ul><h1>3. how to use</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31-å‘½ä»¤è¡Œä½¿ç”¨">3.1. å‘½ä»¤è¡Œä½¿ç”¨<a href="#31-å‘½ä»¤è¡Œä½¿ç”¨" class="hash-link" aria-label="3.1. å‘½ä»¤è¡Œä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="3.1. å‘½ä»¤è¡Œä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># åˆ›å»ºæ•°æ®åº“ , é»˜è®¤ä½¿ç”¨ root ç”¨æˆ·, -U å¯æŒ‡å®šåˆ«çš„ç”¨æˆ·, </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">createdb [-Uxx_user] db_name</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># è¿›å…¥äº¤äº’å¼æŸ¥è¯¢ç•Œé¢, é»˜è®¤è¿æ¥è´¦å·åŒåçš„æ•°æ®åº“</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#       æˆ–è€… Linux ä¸‹ sudo -i -u postgres switch user  to  login postgres db</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">psql [-Uxx_user] db_name è¿æ¥æ•°æ®åº“</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">\dn # æŸ¥çœ‹æ‰€æœ‰ schema</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32-sql-ç¤ºä¾‹">3.2. sql ç¤ºä¾‹<a href="#32-sql-ç¤ºä¾‹" class="hash-link" aria-label="3.2. sql ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥" title="3.2. sql ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">table</span><span class="token plain"> product</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    id </span><span class="token keyword" style="color:rgb(0, 0, 255)">serial</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">constraint</span><span class="token plain"> product_pk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token keyword" style="color:rgb(0, 0, 255)">primary</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">key</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    name </span><span class="token keyword" style="color:rgb(0, 0, 255)">text</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">default</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    price </span><span class="token keyword" style="color:rgb(0, 0, 255)">decimal</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">default</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    create_date </span><span class="token keyword" style="color:rgb(0, 0, 255)">timestamp</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">default</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">now</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">comment</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">table</span><span class="token plain"> product </span><span class="token operator" style="color:rgb(0, 0, 0)">is</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;product&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">comment</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">column</span><span class="token plain"> product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">name </span><span class="token operator" style="color:rgb(0, 0, 0)">is</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;product name&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">comment</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">column</span><span class="token plain"> product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">price </span><span class="token operator" style="color:rgb(0, 0, 0)">is</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;product price</span><br></span><span class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">comment</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">column</span><span class="token plain"> product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">create_date </span><span class="token operator" style="color:rgb(0, 0, 0)">is</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;create date&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="33-æ•°æ®ç±»å‹">3.3. æ•°æ®ç±»å‹<a href="#33-æ•°æ®ç±»å‹" class="hash-link" aria-label="3.3. æ•°æ®ç±»å‹çš„ç›´æ¥é“¾æ¥" title="3.3. æ•°æ®ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="http://www.postgres.cn/docs/11/datatype-numeric.html" target="_blank" rel="noopener noreferrer">http://www.postgres.cn/docs/11/datatype-numeric.html</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="331-æ—¶é—´">3.3.1. æ—¶é—´<a href="#331-æ—¶é—´" class="hash-link" aria-label="3.3.1. æ—¶é—´çš„ç›´æ¥é“¾æ¥" title="3.3.1. æ—¶é—´çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>date æ—¥æœŸ</li><li>time <!-- -->[without time zone]<!-- --> æ—¶é—´</li><li>timestamp <!-- -->[without time zone]<!-- -->, æ—¥æœŸæ—¶é—´, æ— æ—¶åŒº</li><li>time/timestamp with time zone æœ‰æ—¶åŒº or timestamptz</li><li>interval æ—¶é—´é—´éš”</li></ul><p>timeã€timestampå’Œintervalæ¥å—ä¸€ä¸ªå¯é€‰çš„ç²¾åº¦å€¼ pï¼Œè¿™ä¸ªç²¾åº¦å€¼å£°æ˜åœ¨ç§’åŸŸä¸­å°æ•°ç‚¹ä¹‹åä¿ç•™çš„ä½æ•°ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼Œåœ¨ç²¾åº¦ä¸Šæ²¡æœ‰æ˜ç¡®çš„è¾¹ç•Œã€‚på…è®¸çš„èŒƒå›´æ˜¯ä» 0 åˆ° 6</p><p>æ—¶é—´è¾“å…¥è¾“å‡ºæœ€å¥½éµå¾ª ISO 8601, ISO 8601æŒ‡å®šä½¿ç”¨å¤§å†™å­—æ¯Tæ¥åˆ†éš”æ—¥æœŸå’Œæ—¶é—´ã€‚PostgreSQLåœ¨è¾“å…¥ä¸Šæ¥å—è¿™ç§æ ¼å¼ï¼Œä½†æ˜¯åœ¨è¾“å‡ºæ—¶å®ƒé‡‡ç”¨ä¸€ä¸ªç©ºæ ¼è€Œä¸æ˜¯T</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="332-arrayç±»å‹">3.3.2. arrayç±»å‹<a href="#332-arrayç±»å‹" class="hash-link" aria-label="3.3.2. arrayç±»å‹çš„ç›´æ¥é“¾æ¥" title="3.3.2. arrayç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> contacts </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">id </span><span class="token keyword" style="color:rgb(0, 0, 255)">serial</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">KEY</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">name </span><span class="token keyword" style="color:rgb(0, 0, 255)">VARCHAR</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">phones </span><span class="token keyword" style="color:rgb(0, 0, 255)">TEXT</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">INTO</span><span class="token plain"> contacts </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> phones</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">VALUES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;John Doe&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ARRAY </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;(408)-589-5846&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;(408)-589-5555&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¸€æ¬¡æ’å…¥ä¸¤è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">INTO</span><span class="token plain"> contacts </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> phones</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">VALUES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;Lily Bush&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;{&quot;(408)-589-5841&quot;}&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- å•å¼•å·åŒ…è£¹ä¸­æ‹¬å·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;William Gate&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;{&quot;(408)-589-5842&quot;,&quot;(408)-589-58423&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">phones </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">contacts</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">phones</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">contacts</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">WHERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;(408)-589-5555&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ANY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">phones</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="333-hstore-é”®å€¼å¯¹ç±»å‹">3.3.3. hstore é”®å€¼å¯¹ç±»å‹<a href="#333-hstore-é”®å€¼å¯¹ç±»å‹" class="hash-link" aria-label="3.3.3. hstore é”®å€¼å¯¹ç±»å‹çš„ç›´æ¥é“¾æ¥" title="3.3.3. hstore é”®å€¼å¯¹ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>, ref <a href="http://www.postgresqltutorial.com/postgresql-hstore/" target="_blank" rel="noopener noreferrer">http://www.postgresqltutorial.com/postgresql-hstore/</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="334-jsonç±»å‹">3.3.4. jsonç±»å‹<a href="#334-jsonç±»å‹" class="hash-link" aria-label="3.3.4. jsonç±»å‹çš„ç›´æ¥é“¾æ¥" title="3.3.4. jsonç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> orders </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ID </span><span class="token keyword" style="color:rgb(0, 0, 255)">serial</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">KEY</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">info json </span><span class="token operator" style="color:rgb(0, 0, 0)">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">INTO</span><span class="token plain"> orders </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">VALUES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;{ &quot;customer&quot;: &quot;Lily Bush&quot;, &quot;items&quot;: {&quot;product&quot;: &quot;Diaper&quot;,&quot;qty&quot;: 24}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;{ &quot;customer&quot;: &quot;Josh William&quot;, &quot;items&quot;: {&quot;product&quot;: &quot;Toy Car&quot;,&quot;qty&quot;: 1}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;{ &quot;customer&quot;: &quot;Mary Clark&quot;, &quot;items&quot;: {&quot;product&quot;: &quot;Toy Train&quot;,&quot;qty&quot;: 2}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">info</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">orders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">info </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;customer&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> customer </span><span class="token comment" style="color:rgb(0, 128, 0)">-- è·å–jsonä¸­æŸä¸ªkeyçš„å€¼, ä»¥jsonæ ¼å¼è¿”å›, å¯ä»¥ç»§ç»­åŠ ç®­å¤´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">orders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">info </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;customer&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> customer </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä»¥å­—ç¬¦ä¸²æ ¼å¼è¿”å›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">orders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">info </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;items&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;product&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">as</span><span class="token plain"> product</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">orders</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">product</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="335-æ•°å­—ç±»å‹">3.3.5. æ•°å­—ç±»å‹<a href="#335-æ•°å­—ç±»å‹" class="hash-link" aria-label="3.3.5. æ•°å­—ç±»å‹çš„ç›´æ¥é“¾æ¥" title="3.3.5. æ•°å­—ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><p>æ•´å‹: å¸¸ç”¨çš„ç±»å‹æ˜¯integer/intï¼Œå› ä¸ºå®ƒæä¾›äº†åœ¨èŒƒå›´ã€å­˜å‚¨ç©ºé—´å’Œæ€§èƒ½ä¹‹é—´çš„æœ€ä½³å¹³è¡¡ã€‚ä¸€èˆ¬åªæœ‰åœ¨ç£ç›˜ç©ºé—´ç´§å¼ çš„æ—¶å€™æ‰ä½¿ç”¨ smallintç±»å‹ã€‚è€Œåªæœ‰åœ¨integerçš„èŒƒå›´ä¸å¤Ÿçš„æ—¶å€™æ‰ä½¿ç”¨bigint</p><p>  int2ã€int4å’Œint8 æ˜¯ smallint, integer, bigint ç®€å†™</p></li><li><p>å°æ•°: decimalå’Œnumericæ˜¯ç­‰æ•ˆçš„, </p><p>  ä¸€ä¸ªnumericçš„precisionï¼ˆç²¾åº¦ï¼‰æ˜¯æ•´ä¸ªæ•°ä¸­æœ‰æ•ˆä½çš„æ€»æ•°, numericçš„scaleï¼ˆåˆ»åº¦ï¼‰æ˜¯å°æ•°éƒ¨åˆ†çš„æ•°å­—ä½æ•°, <code>NUMERIC(precision, scale)</code></p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="336-åºå·ç±»å‹">3.3.6. åºå·ç±»å‹<a href="#336-åºå·ç±»å‹" class="hash-link" aria-label="3.3.6. åºå·ç±»å‹çš„ç›´æ¥é“¾æ¥" title="3.3.6. åºå·ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>smallserialã€serialå’Œbigserialç±»å‹ä¸æ˜¯çœŸæ­£çš„ç±»å‹ï¼Œå®ƒä»¬åªæ˜¯ä¸ºäº†åˆ›å»ºå”¯ä¸€æ ‡è¯†ç¬¦åˆ—è€Œå­˜åœ¨çš„æ–¹ä¾¿ç¬¦å·</p><p>ä¹Ÿæœ‰ç±»ä¼¼ int çš„ç®€å†™</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> tablename </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    colname </span><span class="token keyword" style="color:rgb(0, 0, 255)">SERIAL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ç­‰ä»·äº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> SEQUENCE tablename_colname_seq</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> tablename </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    colname </span><span class="token keyword" style="color:rgb(0, 0, 255)">integer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">DEFAULT</span><span class="token plain"> nextval</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;tablename_colname_seq&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ALTER</span><span class="token plain"> SEQUENCE tablename_colname_seq OWNED </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> tablename</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">colname</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="337-å­—ç¬¦ç±»å‹">3.3.7. å­—ç¬¦ç±»å‹<a href="#337-å­—ç¬¦ç±»å‹" class="hash-link" aria-label="3.3.7. å­—ç¬¦ç±»å‹çš„ç›´æ¥é“¾æ¥" title="3.3.7. å­—ç¬¦ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><p>character varying(n) å˜é•¿ ,æœ‰é™åˆ¶ æœ€å¤šå­˜å‚¨ n ä¸ªå­—ç¬¦</p></li><li><p>character(n) å®šé•¿, ç©ºæ ¼å¡«å……</p><p>  æ²¡æœ‰é•¿åº¦å£°æ˜è¯çš„characterç­‰æ•ˆäºcharacter(1)</p></li><li><p>text æ— é™å˜é•¿</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="34-ä¸åŒäºmysqlçš„ç‰¹æ€§">3.4. ä¸åŒäºMySQLçš„ç‰¹æ€§<a href="#34-ä¸åŒäºmysqlçš„ç‰¹æ€§" class="hash-link" aria-label="3.4. ä¸åŒäºMySQLçš„ç‰¹æ€§çš„ç›´æ¥é“¾æ¥" title="3.4. ä¸åŒäºMySQLçš„ç‰¹æ€§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="341-è´¦å·ç³»ç»Ÿ">3.4.1. è´¦å·ç³»ç»Ÿ<a href="#341-è´¦å·ç³»ç»Ÿ" class="hash-link" aria-label="3.4.1. è´¦å·ç³»ç»Ÿçš„ç›´æ¥é“¾æ¥" title="3.4.1. è´¦å·ç³»ç»Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># é»˜è®¤æä¾› db account: postgres/none, Linux account: postgres</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">su</span><span class="token plain"> postgres </span><span class="token comment" style="color:rgb(0, 128, 0)"># åˆ‡æ¢user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">psql </span><span class="token comment" style="color:rgb(0, 128, 0)"># ç™»é™†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">\password postgres</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¸ºpostgresè®¾ç½®ä¸€ä¸ªå¯†ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">user</span><span class="token plain"> dbuser </span><span class="token keyword" style="color:rgb(0, 0, 255)">with</span><span class="token plain"> password </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;dbuser&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- é»˜è®¤åªæœ‰ç™»é™†æƒé™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">database</span><span class="token plain"> demodb owner dbuser</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">privileges</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">database</span><span class="token plain"> demodb </span><span class="token keyword" style="color:rgb(0, 0, 255)">to</span><span class="token plain"> dbuser</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- èµ‹äºˆæ“ä½œæƒé™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">\q </span><span class="token comment" style="color:rgb(0, 128, 0)">-- é€€å‡ºpsql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è®¾ç½®å…å¯†ç™»é™†</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># é€€å‡ºåå†æ¬¡ç™»é™†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># psql [options] [dbname [username]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">psql --host</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">localhost --port</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">5432</span><span class="token plain"> --dbname</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">demodb --username</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">tiger --password</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">tiger </span><span class="token comment" style="color:rgb(0, 128, 0)"># æŠ¥é”™, ä¸å…è®¸æŒ‡å®šå¯†ç , éœ€è¦æ‰‹åŠ¨è¾“å…¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># æ€ä¹ˆè‡ªåŠ¨å¯†ç ç™»é™†å‘¢? å®šæ—¶ä»»åŠ¡å¯èƒ½ä¼šç”¨åˆ°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># æ–¹æ³•1: åœ¨Linuxä¸­åˆ›å»ºå’Œdbç”¨æˆ·åŒåçš„è´¦æˆ·, åœ¨shellä¸­, psql &lt;dbname&gt; å³å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">#           è¦å¯¼å…¥æ•°æ®: psql exampledb &lt; exampledb.sql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># æ–¹æ³•2: è®¾ç½®ç¯å¢ƒå˜é‡ export PGPASSWORD=&quot;password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># æ–¹æ³•3: åœ¨ home dir ä¸­åˆ›å»º.pgpassæ–‡ä»¶, å†™å…¥ localhost:5432:mydbname:postgres:mypass, æ–‡ä»¶æƒé™ä¸º 600,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">#       ç„¶ååœ¨ shellä¸­ psql ... -w å³å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># æ‰§è¡Œsql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">psql -f </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">Sql_file</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">psql -c </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;sql query&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å‡†å¤‡æ•°æ®</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">docker</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">cp</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">host_sql_location</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">container</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">container_location</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)"># å¤åˆ¶åˆ°docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">psql -c </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;create database dvdrental owner postgres&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">psql -c </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;grant all privileges on database dvdrental to postgres&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">pg_restore -U tiger -d demodb </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">xxx.tar</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="342-schema">3.4.2. schema<a href="#342-schema" class="hash-link" aria-label="3.4.2. schemaçš„ç›´æ¥é“¾æ¥" title="3.4.2. schemaçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- schema æŠŠä¸€ä¸ªæ•°æ®åº“åˆ†ä¸ºäº†å¤šä¸ªåŒºåŸŸ, å„ä¸ªåŒºåŸŸä¸­å¯ä»¥å­˜åœ¨åŒåçš„è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token comment" style="color:rgb(0, 128, 0)">-- schema public æ˜¯é»˜è®¤å­˜åœ¨çš„, åˆ›å»ºè¡¨å¦‚æœä¸æŒ‡å®š schema åˆ™é»˜è®¤æ˜¯ public</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¸€èˆ¬å¼€å‘æ—¶ä¸ä¼šå†™æ­» schema, å³ä¸ä¼šæŒ‡å®šschema, é€šè¿‡ search_path è®¾ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">drop</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token keyword" style="color:rgb(0, 0, 255)">cascade</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- åˆ é™¤ç©ºschema(å‰ç½®åˆ é™¤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">revoke</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">on</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">schema_name</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¸ºschemaèµ‹äºˆcreateæƒé™, publicè¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token comment" style="color:rgb(0, 128, 0)">-- æƒé™æœ‰å¤šç§: create(åˆ›å»ºè¡¨)/usage(ä½¿ç”¨è¡¨)/...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">show</span><span class="token plain"> search_path </span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- æŸ¥çœ‹æ¨¡å¼çš„æœç´¢è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- é»˜è®¤æ˜¯è¿™æ ·çš„:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> search_path</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">--------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> $</span><span class="token keyword" style="color:rgb(0, 0, 255)">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- è¿™è¡¨ç¤º, sql ä¸­æ²¡æœ‰æŒ‡å®šschema, ä¼šè¿™ä¹ˆç¡®å®šschema: é¦–å…ˆæŸ¥çœ‹æ˜¯å¦æœ‰å’Œå½“å‰ç”¨æˆ·åŒåçš„schema, å¦‚æœæœ‰åˆ™ä½¿ç”¨; å¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤çš„ public schema</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SET</span><span class="token plain"> search_path </span><span class="token keyword" style="color:rgb(0, 0, 255)">TO</span><span class="token plain"> myschema</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¿®æ”¹é»˜è®¤çš„ search_path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>schemaçš„æœ€ä½³å®è·µ:</p><ul><li>ä»…ä»…ä½¿ç”¨ é»˜è®¤çš„public, ç›¸å½“äºä¸ä½¿ç”¨ schema è¿™ä¸ªç‰¹æ€§; é€‚ç”¨äº &quot;åªæœ‰ä¸€ä¸ªç”¨æˆ·æˆ–è€…æ•°æ®åº“é‡Œåªæœ‰å‡ ä¸ªåˆä½œç”¨æˆ·çš„æƒ…å½¢&quot;</li><li>ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªæ¨¡å¼ï¼Œåå­—å’Œç”¨æˆ·ç›¸åŒ</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="343-sqlæŸ¥è¯¢">3.4.3. sqlæŸ¥è¯¢<a href="#343-sqlæŸ¥è¯¢" class="hash-link" aria-label="3.4.3. sqlæŸ¥è¯¢çš„ç›´æ¥é“¾æ¥" title="3.4.3. sqlæŸ¥è¯¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>select distinct on (column1, ...) column1, column2 order by ...  æŒ‰ç…§ column1 åˆ†ç»„, è¿”å›æ¯ç»„çš„ç¬¬ä¸€è¡Œ, éœ€è¦å’Œorder byä¸€èµ·ä½¿ç”¨ </p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">-- ç†è§£ distinct on éœ€è¦ä» distinct çœ‹èµ·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- æŸ¥è¯¢ æŸä¸€å­—æ®µå”¯ä¸€çš„è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">select</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">distinct</span><span class="token plain"> column1 </span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> t1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- æŸ¥è¯¢ ä¸¤å­—æ®µç»„åˆåœ¨ä¸€èµ·å”¯ä¸€çš„è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">select</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">distinct</span><span class="token plain"> column1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> column2 </span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain">  t1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- é—®é¢˜æ¥äº†: æŸ¥è¯¢ä»…ä»…æŸä¸€ä¸ªå­—æ®µå”¯ä¸€çš„è¡Œ, ä½†æ˜¯éœ€è¦ select å¤šåˆ—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- è¿™æ—¶å¦‚æœä»…ä»…ä½¿ç”¨ distinct å°±æœ‰æ­§ä¹‰äº†, éœ€è¦ä½¿ç”¨ distinct on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">select</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">distinct</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">on</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">column1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> column1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> column2 </span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> t1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- æ²¡æœ‰æ’åº, ç»“æœä¸å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>limit null ç­‰ä»·äºçœç•¥ limit</p><p>limit n offset m è¿”å›nè¡Œ, ä½†æ˜¯åç§»mè¡Œåå¼€å§‹è®¡ç®—</p><p>fetch é€šè¿‡æ¸¸æ ‡æŠ“å–ç»“æœ, æ•ˆæœç±»ä¼¼limit, å› ä¸ºlimitå¹¶ä¸æ˜¯ sql æ ‡å‡†ä¸­çš„è¯­æ³•, æ‰€ä»¥å¼•å…¥fetch</p><p>ref: <a href="http://www.postgres.cn/docs/9.4/sql-fetch.html" target="_blank" rel="noopener noreferrer">http://www.postgres.cn/docs/9.4/sql-fetch.html</a></p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">-- è¯­æ³• FETCH { FIRST | NEXT } [ row_count ] { ROW | ROWS } ONLY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">select</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">by</span><span class="token plain"> xxx </span><span class="token keyword" style="color:rgb(0, 0, 255)">FETCH</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FIRST</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ROW</span><span class="token plain"> ONLY</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- è¿”å›ç¬¬ä¸€è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                    </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ç­‰åŒäº FETCH FIRST 1 ROW ONLY;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FETCH</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FIRST</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ROW</span><span class="token plain"> ONLY</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- è¿”å›å‰5è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- å’Œ offset åˆç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">OFFSET</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ROWS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FETCH</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FIRST</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">ROW</span><span class="token plain"> ONLY</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- è·å–æ’åºåçš„ 6-10 è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>like æ¨¡ç³ŠæŸ¥è¯¢, ç­‰ä»·äº &quot;~~&quot; (% - ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦; ä¸‹åˆ’çº¿ - ä¸€ä¸ªå­—ç¬¦)</p><p>not like ç­‰ä»·äº &quot;!~~&quot;</p><p>ilike å¤§å°å†™ä¸æ•æ„Ÿ , ç­‰ä»· &quot;~~*&quot;</p><p>è¿æ¥ç¬¦ &quot;||&quot;</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">select</span><span class="token plain"> first_name</span><span class="token operator" style="color:rgb(0, 0, 0)">||</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27; &#x27;</span><span class="token operator" style="color:rgb(0, 0, 0)">||</span><span class="token plain"> last_name </span><span class="token keyword" style="color:rgb(0, 0, 255)">as</span><span class="token plain"> full_name </span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> customer </span><span class="token keyword" style="color:rgb(0, 0, 255)">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">by</span><span class="token plain"> full_name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>inner join</p><p>è‡ªè¿æ¥</p><p>left join, right join</p><p>full <!-- -->[outer]<!-- --> join - è¿”å›Aè¡¨ä¸­çš„è¡Œ, è¿™äº›è¡Œåœ¨Bè¡¨ä¸­æ²¡æœ‰å…³è”çš„è¡Œ </p><p>cross join</p><p>natural <!-- -->[inner/left/right]<!-- --> join (é»˜è®¤ inner) æ— éœ€æŒ‡å®šè¿æ¥æ¡ä»¶, å°†è¡¨ä¸­å…·æœ‰ç›¸åŒåç§°çš„åˆ—è‡ªåŠ¨è¿›è¡ŒåŒ¹é…</p><p>union å¹¶é›†</p><p>intersect å¹¶é›†</p><p>except å·®é›†</p><p>grouping sets() - group by çš„å­å¥, æ•ˆæœç›¸å½“äºå¯¹å¤šä¸ª group by ç»“æœè¿›è¡Œ union all; æœ€åçš„ç»“æœé›†åˆ—æ•°ä¸ºå¤šä¸ªgroup by ä¸­çš„æœ€å¤§çš„åˆ—æ•°, åˆå¹¶æ—¶,åˆ—æ•°ä¸å¤Ÿçš„ä¼šç”¨ null è¡¥å…¨;</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¸€ä¸ª grouping set å°±æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªåˆ—çš„é›†åˆ, ç”¨è¿™äº›åˆ—æ¥è¿›è¡Œgroup by</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- In this syntax, you have four grouping sets (c1,c2), (c1), (c2), and ().</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    aggregate_function</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    table_name</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    GROUPING SETS </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>cube(c1, c2, c3) ç”¨æ¥ç®€å†™ grouping sets(...), ä¸ºæŒ‡å®šçš„åˆ—äº§ç”Ÿæ‰€æœ‰å¯èƒ½çš„grouping setç»„åˆ</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">CUBE</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ç­‰ä»·äº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">GROUPING SETS </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>rollup æ˜¯group by çš„å­å¥, ä¹Ÿæ˜¯äº§ç”Ÿ grouping set, åªæ˜¯ä¸æ˜¯äº§ç”Ÿå…¨éƒ¨çš„å¯èƒ½ç»„åˆ, è€Œæ˜¯åªäº§ç”Ÿå°‘éƒ¨åˆ†; å¤šä¸ªåˆ—é—´æœ‰å±‚çº§å…³ç³»; å¸¸ç”¨æ¥è®¡ç®—å¹´æœˆæ—¥</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">-- cube å’Œ rollup åŒºåˆ«:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">CUBE </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- ç­‰ä»·äº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ROLLUP</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- ç­‰ä»·äº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="344-æ•°æ®ä¿®æ”¹">3.4.4. æ•°æ®ä¿®æ”¹<a href="#344-æ•°æ®ä¿®æ”¹" class="hash-link" aria-label="3.4.4. æ•°æ®ä¿®æ”¹çš„ç›´æ¥é“¾æ¥" title="3.4.4. æ•°æ®ä¿®æ”¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>update... from ... æ ¹æ®å…¶ä»–è¡¨çš„æ¡ä»¶è¿›è¡Œæ›´æ–°</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">UPDATE</span><span class="token plain"> A</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">SET</span><span class="token plain"> A</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">c1 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> expresion</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> B</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">WHERE</span><span class="token plain"> A</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">c2 </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> B</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>insert into ... on conflict target action æ’å…¥oræ›´æ–°</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">-- target: åˆ—å/çº¦æŸå/whereå­å¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- action: DO NOTHING  æˆ–è€…  DO UPDATE SET column_1 = value_1, .. WHERE condition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="345-è¡¨ç®¡ç†">3.4.5. è¡¨ç®¡ç†<a href="#345-è¡¨ç®¡ç†" class="hash-link" aria-label="3.4.5. è¡¨ç®¡ç†çš„ç›´æ¥é“¾æ¥" title="3.4.5. è¡¨ç®¡ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å­—æ®µç±»å‹</p><p><a href="http://www.postgresqltutorial.com/postgresql-data-types/" target="_blank" rel="noopener noreferrer">http://www.postgresqltutorial.com/postgresql-data-types/</a></p><p>create table</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> table_name </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">column_name </span><span class="token keyword" style="color:rgb(0, 0, 255)">TYPE</span><span class="token plain"> column_constraint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">table_constraint table_constraint</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> INHERITS existing_table_name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ç»§æ‰¿æ‰€æœ‰å­—æ®µ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> new_table_name </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">columns</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> some_query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ç”¨æŸ¥è¯¢åˆ°çš„æ•°æ®å¡«å……æ–°å»ºçš„è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">IF</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">EXISTS</span><span class="token plain"> new_table_name </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¸å­˜åœ¨æ‰åˆ›å»º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">AS</span><span class="token plain"> query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TEMPORARY</span><span class="token operator" style="color:rgb(0, 0, 0)">/</span><span class="token keyword" style="color:rgb(0, 0, 255)">TEMP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> temp_table </span><span class="token comment" style="color:rgb(0, 128, 0)">-- ä¸´æ—¶è¡¨, åœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="346-å¯¼å…¥å¯¼å‡º">3.4.6. å¯¼å…¥å¯¼å‡º<a href="#346-å¯¼å…¥å¯¼å‡º" class="hash-link" aria-label="3.4.6. å¯¼å…¥å¯¼å‡ºçš„ç›´æ¥é“¾æ¥" title="3.4.6. å¯¼å…¥å¯¼å‡ºçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="http://www.postgresqltutorial.com/#" target="_blank" rel="noopener noreferrer">http://www.postgresqltutorial.com/#</a></p><h1>4. crontab å®šæ—¶æ“ä½œ postgresql</h1><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain"># crontab -e</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># * * * * * /root/xy/crontab.sh</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># service cron restart</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># psql &quot;host=192.168.0.123 port =5432 user = treece password =1123 dbname=amt&quot; -f ./deal_str.sql</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">step = 20 # period seconds</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">sql_location = &#x27;/root/xy/update.sql&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">host = &#x27;10.59.97.227&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">port = 5432</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">db_name = &#x27;sat&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">user_name = &#x27;pimpopr&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">for((i = 0; i &lt; 60; i = (i + step)));do</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        #$(echo &quot;test-test&quot; &gt;&gt; /root/xy/test.txt)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        psql &quot;host=${host} port=${port} dbname=${db_name} user=${user} password=&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        sleep ${step}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">done</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">exit 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>5. docker ä¸­å¯åŠ¨ postgres</h1><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">mkdir -p $HOME/docker/volumes/postgres</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">docker run -d --rm --name postgresql -e POSTGRES_USER=dbuser -e POSTGRES_DB=testdb  -e POSTGRES_PASSWORD=password -p 5432:5432 -v $HOME/docker/volumes/postgres:/var/lib/postgresql/data  postgres</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘æ˜¯åœ¨ wsl2 ä¸­è¿è¡Œçš„ docker, ä½¿ç”¨ navicat å¯ä»¥æ­£å¸¸ä½¿ç”¨ localhost è¿æ¥ .ä½¿ç”¨ inteliJ ç³»åˆ—, éœ€è¦ æŸ¥å‡º wsl2 çš„ eth0 åœ°å€, ä¸èƒ½ç›´æ¥ç”¨ localhost è¿æ¥</p><h1>å¼€æºåº“ æ’ä»¶</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="restapi">restapi<a href="#restapi" class="hash-link" aria-label="restapiçš„ç›´æ¥é“¾æ¥" title="restapiçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/PostgREST/postgrest" target="_blank" rel="noopener noreferrer">https://github.com/PostgREST/postgrest</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆ†åº“åˆ†è¡¨">åˆ†åº“åˆ†è¡¨<a href="#åˆ†åº“åˆ†è¡¨" class="hash-link" aria-label="åˆ†åº“åˆ†è¡¨çš„ç›´æ¥é“¾æ¥" title="åˆ†åº“åˆ†è¡¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p> citus æ’ä»¶</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/db">db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/postgres">postgres</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/php-note"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">PHP</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/process-workflow-bpm-engine"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">å·¥ä½œæµå¼•æ“</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#logical-construction" class="table-of-contents__link toc-highlight">logical construction</a></li><li><a href="#physical-structure" class="table-of-contents__link toc-highlight">physical structure</a></li><li><a href="#progress-structure" class="table-of-contents__link toc-highlight">progress structure</a></li><li><a href="#memory-construction" class="table-of-contents__link toc-highlight">memory construction</a></li><li><a href="#31-å‘½ä»¤è¡Œä½¿ç”¨" class="table-of-contents__link toc-highlight">3.1. å‘½ä»¤è¡Œä½¿ç”¨</a></li><li><a href="#32-sql-ç¤ºä¾‹" class="table-of-contents__link toc-highlight">3.2. sql ç¤ºä¾‹</a></li><li><a href="#33-æ•°æ®ç±»å‹" class="table-of-contents__link toc-highlight">3.3. æ•°æ®ç±»å‹</a><ul><li><a href="#331-æ—¶é—´" class="table-of-contents__link toc-highlight">3.3.1. æ—¶é—´</a></li><li><a href="#332-arrayç±»å‹" class="table-of-contents__link toc-highlight">3.3.2. arrayç±»å‹</a></li><li><a href="#333-hstore-é”®å€¼å¯¹ç±»å‹" class="table-of-contents__link toc-highlight">3.3.3. hstore é”®å€¼å¯¹ç±»å‹</a></li><li><a href="#334-jsonç±»å‹" class="table-of-contents__link toc-highlight">3.3.4. jsonç±»å‹</a></li><li><a href="#335-æ•°å­—ç±»å‹" class="table-of-contents__link toc-highlight">3.3.5. æ•°å­—ç±»å‹</a></li><li><a href="#336-åºå·ç±»å‹" class="table-of-contents__link toc-highlight">3.3.6. åºå·ç±»å‹</a></li><li><a href="#337-å­—ç¬¦ç±»å‹" class="table-of-contents__link toc-highlight">3.3.7. å­—ç¬¦ç±»å‹</a></li></ul></li><li><a href="#34-ä¸åŒäºmysqlçš„ç‰¹æ€§" class="table-of-contents__link toc-highlight">3.4. ä¸åŒäºMySQLçš„ç‰¹æ€§</a><ul><li><a href="#341-è´¦å·ç³»ç»Ÿ" class="table-of-contents__link toc-highlight">3.4.1. è´¦å·ç³»ç»Ÿ</a></li><li><a href="#342-schema" class="table-of-contents__link toc-highlight">3.4.2. schema</a></li><li><a href="#343-sqlæŸ¥è¯¢" class="table-of-contents__link toc-highlight">3.4.3. sqlæŸ¥è¯¢</a></li><li><a href="#344-æ•°æ®ä¿®æ”¹" class="table-of-contents__link toc-highlight">3.4.4. æ•°æ®ä¿®æ”¹</a></li><li><a href="#345-è¡¨ç®¡ç†" class="table-of-contents__link toc-highlight">3.4.5. è¡¨ç®¡ç†</a></li><li><a href="#346-å¯¼å…¥å¯¼å‡º" class="table-of-contents__link toc-highlight">3.4.6. å¯¼å…¥å¯¼å‡º</a></li></ul></li><li><a href="#restapi" class="table-of-contents__link toc-highlight">restapi</a></li><li><a href="#åˆ†åº“åˆ†è¡¨" class="table-of-contents__link toc-highlight">åˆ†åº“åˆ†è¡¨</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">å†å²</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tags">æ ‡ç­¾</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">å½’æ¡£</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾äº¤åª’ä½“</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">å…³äºæˆ‘</a></li><li class="footer__item"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/xiaoyuhfq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/3fPgwd3naN" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/friends">å‹é“¾</a></li><li class="footer__item"><a class="footer__link-item" position="right" href="/resource">å¯¼èˆª</a></li><li class="footer__item"><a href="https://docusaurus.io/zh-CN/" target="_blank"><img style="height:50px;margin-top:0.5rem" src="/img/buildwith.png"><a></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Xiaoyureed, Inc. Built with â¤ï¸ by xiaoyu.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.18b1a606.js"></script>
<script src="/assets/js/main.70a14f93.js"></script>
</body>
</html>