<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-design-pattern-note">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Design Pattern ç¬”è®° | Xiaoyureed&#x27;s ç½‘ç»œ Wiki </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/docs/design-pattern-note"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Design Pattern ç¬”è®° | Xiaoyureed&#x27;s ç½‘ç»œ Wiki "><meta data-rh="true" name="description" content="https://github.com/xiaoyureed/design-patern-note"><meta data-rh="true" property="og:description" content="https://github.com/xiaoyureed/design-patern-note"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/docs/design-pattern-note"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/design-pattern-note" hreflang="en"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/design-pattern-note" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/design-pattern-note" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  Atom Feed"><link rel="stylesheet" href="/assets/css/styles.c6a654bf.css">
<link rel="preload" href="/assets/js/runtime~main.e1853de5.js" as="script">
<link rel="preload" href="/assets/js/main.c56d5ac7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Xiaoyureed</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/SpringBoot-note">Spring Boot å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/agile-development-user-story-scrum">æ•æ·å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/autohotkey">Autohotkey è„šæœ¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cpp">CPP and C å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/css-pre-processor">å‡ ç§CSSé¢„å¤„ç†å™¨æ¯”è¾ƒé€‰å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/design-pattern-note">Design Pattern ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dev-resources">å¼€å‘è€…èµ„æº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/distributed-system">Distributed System åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/effective-java-reading-note">Effective Java é˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/english-note">è‹±è¯­å­¦ä¹ ğŸ”¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/html-note">HTML å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/idea-note">InteliJ idea tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/interview-system-design">ç»å…¸çš„ç³»ç»Ÿè®¾è®¡æ€è·¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/java-note">Java Core ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux-note">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-big-data-introduce">å¤§æ•°æ®å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-computational-ad">è®¡ç®—å¹¿å‘Š Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-crawler-spider">ç½‘ç»œçˆ¬è™« Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-desktop-develop">æ¡Œé¢åº”ç”¨å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-http">HTTP protocol Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-reactive-programming">å“åº”å¼ç¼–ç¨‹ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/outline-about-rule-engine-note">è§„åˆ™å¼•æ“ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quant-money">é‡åŒ–äº¤æ˜“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/saas-paas-iaas-as-a-service">SaaS Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/springmvc-note">Spring MVC</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Design Pattern ç¬”è®°</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>Design Pattern ç¬”è®°</h1></header><div align="center">https://github.com/xiaoyureed/design-patern-note https://github.com/iluwatar/java-design-patterns<p><a href="https://www.zhihu.com/question/39972591" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/39972591</a></p></div><ul><li><a href="#1-%E5%AE%9E%E8%B7%B5-%E6%A1%88%E4%BE%8B">1. å®è·µ æ¡ˆä¾‹</a></li><li><a href="#2-uml-%E7%B1%BB%E5%9B%BE">2. uml ç±»å›¾</a></li><li><a href="#3-%E7%A8%8B%E5%BA%8F-6-%E5%A4%A7%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99">3. ç¨‹åº 6 å¤§è®¾è®¡åŸåˆ™</a><ul><li><a href="#31-open-close-principle">3.1. open close principle</a></li><li><a href="#32-single-responsibility-principle">3.2. single responsibility principle</a></li><li><a href="#33-interface-separation-principle">3.3. interface separation principle</a></li><li><a href="#34-%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99">3.4. é‡Œæ°æ›¿æ¢åŸåˆ™</a></li><li><a href="#35-dependence-inversion-principle">3.5. dependence inversion principle</a></li><li><a href="#36-least-knowledge-principle">3.6. Least Knowledge Principle</a></li></ul></li><li><a href="#4-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%A6%82%E8%A6%81">4. è®¾è®¡æ¨¡å¼æ¦‚è¦</a><ul><li><a href="#41-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93">4.1. è®¾è®¡æ¨¡å¼æ€»ç»“</a></li><li><a href="#42-spring-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">4.2. spring ä¸­çš„è®¾è®¡æ¨¡å¼</a></li><li><a href="#43-%E4%B8%8D%E8%A6%81%E8%BF%87%E5%BA%A6%E4%BD%BF%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">4.3. ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼</a></li></ul></li><li><a href="#5-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">5. å·¥å‚æ¨¡å¼</a><ul><li><a href="#51-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95">5.1. å·¥å‚æ–¹æ³•</a></li><li><a href="#52-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82">5.2. æŠ½è±¡å·¥å‚</a></li></ul></li><li><a href="#6-%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F">6. æ¨¡æ¿æ¨¡å¼</a></li><li><a href="#7-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F">7. ç­–ç•¥æ¨¡å¼</a></li><li><a href="#8-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F">8. è§‚å¯Ÿè€…æ¨¡å¼</a><ul><li><a href="#81-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89">8.1. è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰</a></li><li><a href="#82-jdk-%E4%B8%AD%E7%9A%84%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F">8.2. jdk ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼</a><ul><li><a href="#821-jdk-%E4%B8%AD%E7%9A%84-api">8.2.1. jdk ä¸­çš„ api</a></li><li><a href="#822-jdk-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">8.2.2. jdk è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹</a></li></ul></li><li><a href="#83-%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9E%8B">8.3. äº‹ä»¶é©±åŠ¨æ¨¡å‹</a></li></ul></li><li><a href="#9-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F">9. ä»£ç†æ¨¡å¼</a><ul><li><a href="#91-%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86">9.1. é™æ€ä»£ç†</a></li><li><a href="#92-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">9.2. åŠ¨æ€ä»£ç†</a><ul><li><a href="#921-%E7%9C%8B%E4%B8%80%E4%B8%AA%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">9.2.1. çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#922-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0">9.2.2. è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± </a></li></ul></li></ul></li><li><a href="#10-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F">10. è£…é¥°å™¨æ¨¡å¼</a></li><li><a href="#11-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">11. é€‚é…å™¨æ¨¡å¼</a></li><li><a href="#12-%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F">12. è´£ä»»é“¾æ¨¡å¼</a></li><li><a href="#13-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F">13. å•ä¾‹æ¨¡å¼</a></li><li><a href="#14-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F">14. å‘½ä»¤æ¨¡å¼</a></li><li><a href="#15-%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F">15. é—¨é¢æ¨¡å¼</a></li><li><a href="#16-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">16. å»ºé€ è€…æ¨¡å¼</a></li><li><a href="#17-%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%A8%A1%E5%BC%8F">17. æµæ°´çº¿æ¨¡å¼</a></li><li><a href="#18-%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F-state-machine">18. çŠ¶æ€æ¨¡å¼ state machine</a></li></ul><h1>å®è·µ æ¡ˆä¾‹</h1><p><a href="https://mp.weixin.qq.com/s/3wHFNFQPtj86AocLhUQahw" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/3wHFNFQPtj86AocLhUQahw</a>
TODO</p><h1>uml ç±»å›¾</h1><ul><li><p>ä¸‰è§’ç©ºå¿ƒç®­å¤´, è™šçº¿ - å®ç°å…³ç³», ä»£ç ä¸­ä¸º<code>ç»§æ‰¿æŠ½è±¡ç±»oræ¥å£</code></p></li><li><p>ä¸‰è§’ç©ºå¿ƒç®­å¤´, å®çº¿ - æ³›åŒ–å…³ç³», ä»£ç ä¸­ä¸º <code>ç»§æ‰¿éæŠ½è±¡ç±»</code></p></li><li><p>æ™®é€šç®­å¤´, è™šçº¿ - ä¾èµ–å…³ç³», ä»£ç ä¸­ä¸º <code>ç±»æ–¹æ³•ä¸­çš„ä¼ å…¥å‚æ•°</code></p></li></ul><h1>ç¨‹åº 6 å¤§è®¾è®¡åŸåˆ™</h1><p>ref: &lt;&lt;è®¾è®¡æ¨¡å¼ä¹‹ç¦…&gt;&gt;</p><ul><li><p>å¼€æ”¾å°é—­åŸåˆ™ï¼ˆOpen Close Principle,ç®€ç§°OCPï¼‰ - å°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®ä½“æ¥è§£å†³éœ€æ±‚å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®Œæˆå˜åŒ–</p><p>  &quot;å¯¹æ–°å¢å¼€æ”¾, å¯¹ä¿®æ”¹å…³é—­&quot;</p><p>  å³æŠ½è±¡å‡ºä¸€ä¸ª interface, æ–°çš„åŠŸèƒ½åªéœ€è¦å¢åŠ å®ç°ç±»å³å¯, ä½¿ç”¨çš„æ—¶å€™, é€šè¿‡ interface çš„ api ä½¿ç”¨.</p></li></ul><ul><li><p>å•ä¸€èŒè´£åŸåˆ™(Single Responsibility Principleï¼Œç®€ç§°SRP )</p><p>  ä¸€ä¸ªç±»çš„èŒè´£åº”è¯¥å°½å¯èƒ½å°‘, å°½å¯èƒ½æ‹†åˆ†ç±»ä¸ºå¤šä¸ª</p><p>  å¦‚æœ‰ç±»Class1å®ŒæˆèŒè´£T1ï¼ŒT2ï¼Œå½“èŒè´£T1æˆ–T2æœ‰å˜æ›´éœ€è¦ä¿®æ”¹æ—¶ï¼Œæœ‰å¯èƒ½å½±å“åˆ°è¯¥ç±»çš„å¦å¤–ä¸€ä¸ªèŒè´£æ­£å¸¸å·¥ä½œã€‚</p></li><li><p>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Separation Principle,ç®€ç§°ISPï¼‰;</p><p>  å°½é‡ç»†åŒ–æ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å°½é‡å°‘. (è¿™æ ·å®ç°ç±»å°±æ— éœ€å®ç°ä¸å…³å¿ƒçš„æ–¹æ³•)</p><p>  å’Œå•ä¸€èŒè´£åŸåˆ™ç±»ä¼¼, åªä¸è¿‡é’ˆå¯¹æ¥å£æ¥è¯´çš„. </p><p>  è§£å†³ç±»ä¼¼è¿™ç§é—®é¢˜: ç±»Aé€šè¿‡æ¥å£interfaceä¾èµ–ç±»Bï¼Œç±»Cé€šè¿‡æ¥å£interfaceä¾èµ–ç±»Dï¼Œå¦‚æœæ¥å£interfaceå¯¹äºç±»Aå’Œç±»Bæ¥è¯´ä¸æ˜¯æœ€å°æ¥å£ï¼Œåˆ™ç±»Bå’Œç±»Då¿…é¡»å»å®ç°ä»–ä»¬ä¸éœ€è¦çš„æ–¹æ³•ã€‚</p></li><li><p>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principle,ç®€ç§°LSPï¼‰</p><p>  åœ¨ä½¿ç”¨åŸºç±»çš„çš„åœ°æ–¹å¯ä»¥ä»»æ„ä½¿ç”¨å…¶å­ç±»ï¼Œèƒ½ä¿è¯å­ç±»å®Œç¾æ›¿æ¢åŸºç±»</p><p>  ä¹Ÿå°±æ˜¯: å­ç±»ä¸€èˆ¬ä¸ä¼šé‡å†™çˆ¶ç±»çš„æ–¹æ³•, å°½é‡ä¸è¦ç ´åç»§æ‰¿ä½“ç³»</p><p>  éœ€è¦å¤šæ³¨æ„çš„æ˜¯ï¼šæœ‰æ—¶å€™ä¼šä¸ºäº†çµæ´»æ€§ç‰ºç‰²è¿™ä¸ªåŸåˆ™</p></li><li><p>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependence Inversion Principle,ç®€ç§°DIPï¼‰</p><p>  å³å®ç°éƒ½æ˜¯æ˜“å˜çš„ï¼Œè€Œåªæœ‰æŠ½è±¡æ˜¯ç¨³å®šçš„ï¼Œæ‰€ä»¥å½“ä¾èµ–äºæŠ½è±¡æ—¶ï¼Œå®ç°çš„å˜åŒ–å¹¶ä¸ä¼šå½±å“å®¢æˆ·ç«¯çš„è°ƒç”¨ã€‚</p><p>  ä¹Ÿå°±æ˜¯ &quot;é¢å‘æ¥å£ç¼–ç¨‹&quot;</p></li><li><p>æœ€å°‘çŸ¥è¯†åŸåˆ™/è¿ªç±³ç‰¹æ³•åˆ™ (Least Knowledge Principle, LKP)</p><ul><li><p>ç±»é—´è§£è€¦: talk only to your immediate friendsï¼ˆåªå’Œç›´æ¥çš„æœ‹å‹äº¤æµï¼‰.</p><p>  å‡ºç°åœ¨æˆå‘˜å˜é‡, æ–¹æ³•çš„è¾“å…¥è¾“å‡ºå‚æ•°ä¸­çš„ç±» å°±æ˜¯ç›´æ¥çš„æœ‹å‹ã€‚è¿ªç±³ç‰¹æ³•åˆ™è¦æ±‚åªå’Œç›´æ¥çš„æœ‹å‹é€šä¿¡. åªå‡ºç°åœ¨æ–¹æ³•ä½“å†…éƒ¨çš„ç±»å°±ä¸æ˜¯ç›´æ¥çš„æœ‹å‹</p></li><li><p>æš´éœ²å°½é‡å°‘çš„æ–¹æ³•ç»™å¤–ç•Œ (èƒ½ private å°±ä¸è¦ public).</p></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-close-principle">open close principle<a href="#open-close-principle" class="hash-link" aria-label="open close principleçš„ç›´æ¥é“¾æ¥" title="open close principleçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// bad demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¿¡æ¯å‘é€ç±», é€šè¿‡çŸ­ä¿¡å‘é€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author: xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date: 2018å¹´1æœˆ23æ—¥ ä¸‹åˆ10:27:28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageSend {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void send(String msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Text Message send : &quot; + msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æœåŠ¡ç±», ä¾›å®¢æˆ·ç«¯è°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author: xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date: 2018å¹´1æœˆ23æ—¥ ä¸‹åˆ10:29:09</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private MessageSend sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MessageService() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.sender = new MessageSend();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void send(String msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sender.send(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * å®¢æˆ·ç«¯è°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author: xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date: 2018å¹´1æœˆ23æ—¥ ä¸‹åˆ10:30:11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageClient {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MessageService messageService = new MessageService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageService.send(&quot;Merry Christmas !&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç°åœ¨éœ€è¦æ–°æ”¯æŒå¦ä¸€ç§å‘é€æ–¹å¼: å¾®ä¿¡, åªå¥½ä¿®æ”¹æºç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æ–°å¢çš„ä¿¡æ¯å‘é€å¸®åŠ©ç±», æ”¯æŒemail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author: xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date: 2018å¹´1æœˆ23æ—¥ ä¸‹åˆ10:37:55</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EmailMessageSend {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public  void send(String msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Email Message send: &quot; + msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æ–°å¢çš„ä¿¡æ¯å‘é€ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author: xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date: 2018å¹´1æœˆ23æ—¥ ä¸‹åˆ10:42:36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public enum SendType {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * çŸ­ä¿¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TEXT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é‚®ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EMAIL </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æœåŠ¡ç±», ä¾›å®¢æˆ·ç«¯è°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ23æ—¥ ä¸‹åˆ10:53:18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private MessageSend sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SendType t;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MessageService(SendType t) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.t= t;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void send(String msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ ¹æ®ä¸åŒçš„ç±»å‹è¿›è¡Œä¸åŒçš„å¤„ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç„¶åæ˜¯clientå¢åŠ æ–°çš„è°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åç»­å¦‚æœåˆè¦æ”¯æŒæ–°çš„å‘é€æ–¹å¼, åˆéœ€è¦å¤§æ”¹MessageServiceæºç ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¦‚æœéµå¾ªå¼€é—­åŸåˆ™è®¾è®¡, ä¼šæ€ä¹ˆæ ·å‘¢?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// good demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¿¡æ¯å‘é€æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ23æ—¥ ä¸‹åˆ11:02:30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface ISendable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void send();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å„ä¸ªä¿¡æ¯å‘é€ç±»å®ç°æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageSend implements ISendable{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EmailMessageSend implements ISendable{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// messageServiceä»¥åå¯ä»¥ä¸€ç›´ä¸å˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ISendable sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MessageService(ISendable sender) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.sender = messageHelper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void send(String msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sender.send(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®¢æˆ·ç«¯è°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageClient {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MessageService messageService = new MessageService(new MessageSend());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageService.send(&quot;Merry Christmas !&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MessageService messageService2 = new MessageService(new EmailMessageSend());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messageService2.send(&quot;Merry Christmas !&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯¹äºMessageServiceæœåŠ¡ç±»æ¥è¯´ï¼Œä¸ç”¨åšä»»ä½•ä¿®æ”¹ï¼Œåªéœ€è¦æ‰©å±•æ–°çš„æ¨é€æ¶ˆæ¯çš„å·¥å…·ç±»å³å¯, è¿™å°±æ˜¯éµå¾ªå¼€é—­åŸåˆ™çš„å¥½å¤„</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="single-responsibility-principle">single responsibility principle<a href="#single-responsibility-principle" class="hash-link" aria-label="single responsibility principleçš„ç›´æ¥é“¾æ¥" title="single responsibility principleçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// bad demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Calculator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int add() throws NumberFormatException, IOException{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è¿™é‡Œè¯»å–å’ŒåŠ æ³•è€¦åˆåœ¨ä¸€èµ·äº†ï¼Œå¦‚æœéœ€è¦å¢åŠ ä¸šåŠ¡æ–¹æ³•ã€å‡æ³•ã€‘ï¼Œå°±è¦æ›´æ”¹ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File file = new File(&quot;E:/data.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BufferedReader br = new BufferedReader(new FileReader(file));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int a = Integer.valueOf(br.readLine());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int b = Integer.valueOf(br.readLine());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return a+b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws NumberFormatException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Calculator calculator = new Calculator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;result:&quot; + calculator.add());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// good demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//éµå¾ªå•ä¸€èŒè´£åŸåˆ™å, æ˜¯è¿™æ ·: åˆ†ç¦»å‡ºæ¥ä¸€ä¸ªç±»ç”¨æ¥è¯»å–æ•°æ®ï¼Œå°†ä¸€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ä¸ªç±»æ‹†æˆäº†ä¸¤ä¸ªç±»ï¼Œè¿™æ ·ä»¥åæˆ‘ä»¬å¦‚æœæœ‰å‡æ³•ï¼Œä¹˜æ³•ç­‰ç­‰ï¼Œå°±ä¸ç”¨å‡ºç°é‚£ä¹ˆå¤šé‡å¤ä»£ç äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Reader {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int a,b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Reader(String path) throws NumberFormatException, IOException{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BufferedReader br = new BufferedReader(new FileReader(new File(path)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        a = Integer.valueOf(br.readLine());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b = Integer.valueOf(br.readLine());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int getA(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int getB(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//å•ç‹¬çš„è®¡ç®—ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Calculator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int add(int a,int b){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return a + b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws NumberFormatException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Reader reader = new Reader(&quot;E:/data.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Calculator calculator = new Calculator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;result:&quot; + calculator.add(reader.getA(),reader.getB()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interface-separation-principle">interface separation principle<a href="#interface-separation-principle" class="hash-link" aria-label="interface separation principleçš„ç›´æ¥é“¾æ¥" title="interface separation principleçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//è¿™æ˜¯é”™è¯¯ç¤ºä¾‹ï¼Œå½“å®ç°æ­¤æ¥å£ æ—¶ï¼Œå¿…é¡»å®ç°ä¸å¿…è¦çš„æ–¹æ³• other()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface Mobile {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void call();//æ‰‹æœºå¯ä»¥æ‰“ç”µè¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sendMessage();//æ‰‹æœºå¯ä»¥å‘çŸ­ä¿¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void game();//æ‰‹æœºå¯ä»¥ç©æ„¤æ€’çš„å°é¸Ÿï¼Ÿè¿™æ˜¯ä¸åˆé€‚çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æ­£ç¡®çš„æ–¹å¼æ˜¯ï¼šæ–°å»ºä¸€ä¸ªæ¥å£æ¥æ‹“å±•Mobileæ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface SmartPhone extends Mobile{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void game();//æ™ºèƒ½æ‰‹æœºçš„æ¥å£å°±å¯ä»¥åŠ å…¥è¿™ä¸ªæ–¹æ³•äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é‡Œæ°æ›¿æ¢åŸåˆ™">é‡Œæ°æ›¿æ¢åŸåˆ™<a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="hash-link" aria-label="é‡Œæ°æ›¿æ¢åŸåˆ™çš„ç›´æ¥é“¾æ¥" title="é‡Œæ°æ›¿æ¢åŸåˆ™çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åŸºç±»å­ç±»å¯æ›¿æ¢</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// çœ‹ä¸€ä¸ªç ´åç»§æ‰¿ä½“ç³»çš„ä¾‹å­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¹Ÿå°±æ˜¯ä¸ç¬¦åˆææ°æ›¿æ¢åŸåˆ™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* çˆ¶ç±» */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Parent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;parent method&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* å­ç±» */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SubClass extends Parent{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ç»“æœæŸä¸€ä¸ªå­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¯´ä¸æ”¯æŒè¯¥æ“ä½œäº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new UnsupportedOperationException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æŸä¸€ä¸ªç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SomeoneClass {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æœ‰æŸä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨äº†ä¸€ä¸ªçˆ¶ç±»ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void someoneMethod(Parent parent){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parent.method();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* æµ‹è¯•ç±» */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SomeoneClass someoneClass = new SomeoneClass();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        someoneClass.someoneMethod(new Parent());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        someoneClass.someoneMethod(new SubClass());//æ­¤å¤„æŠ¥é”™, è¿è¡Œæ—¶æ‰äº§ç”ŸæŠ¥é”™ // ç ´åäº†ç»§æ‰¿ä½“ç³»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependence-inversion-principle">dependence inversion principle<a href="#dependence-inversion-principle" class="hash-link" aria-label="dependence inversion principleçš„ç›´æ¥é“¾æ¥" title="dependence inversion principleçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="least-knowledge-principle">Least Knowledge Principle<a href="#least-knowledge-principle" class="hash-link" aria-label="Least Knowledge Principleçš„ç›´æ¥é“¾æ¥" title="Least Knowledge Principleçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç±»é—´è§£è€¦</p><p>ä¸€ä¸ªç±»åº”è¯¥å°½é‡ä¸è¦å’Œé™Œç”Ÿçš„ç±»æœ‰å¤ªå¤šæ¥è§¦ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// é”™è¯¯ç¤ºä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class demo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void a() {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void b() {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void c() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        a();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ”¹è¿›å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åªæš´éœ²å¿…é¡»çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class demo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void a() {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void b() {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void c() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        a();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>è®¾è®¡æ¨¡å¼æ¦‚è¦</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è®¾è®¡æ¨¡å¼æ€»ç»“">è®¾è®¡æ¨¡å¼æ€»ç»“<a href="#è®¾è®¡æ¨¡å¼æ€»ç»“" class="hash-link" aria-label="è®¾è®¡æ¨¡å¼æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="è®¾è®¡æ¨¡å¼æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¸¸è§çš„:</p><ul><li><p>å·¥å‚æ¨¡å¼ &amp; æŠ½è±¡å·¥å‚æ¨¡å¼ - ä¸åŒæ¡ä»¶ä¸‹åˆ›å»ºä¸åŒå®ä¾‹</p></li><li><p>æ¨¡æ¿æ¨¡å¼ - åœ¨çˆ¶ç±»ä¸­å®šä¹‰é«˜å±‚çš„ç®—æ³•æ‰§è¡Œé¡ºåº, å­ç±»ä¸­å…·ä½“å®ç°æ¯ä¸ªæ­¥éª¤</p></li><li><p>ç­–ç•¥æ¨¡å¼ - ç­–ç•¥å¯¹è±¡ä¾èµ–æ³¨å…¥åˆ°contextå¯¹è±¡ï¼Œcontextå¯¹è±¡æ ¹æ®å®ƒçš„ç­–ç•¥æ”¹å˜è€Œæ”¹å˜å®ƒçš„ç›¸å…³è¡Œä¸º</p></li><li><p>é€‚é…å™¨æ¨¡å¼ - ä½¿å¾—æŸä¸ªä¸å¯ä¿®æ”¹çš„ç›®æ ‡ç±»ç¬¦åˆç‰¹å®šè¦æ±‚çš„æ¥å£</p></li><li><p>è£…é¥°å™¨æ¨¡å¼ - å¯¹è¢«è£…é¥°ç±»å¢å¼º</p></li><li><p>è´£ä»»é“¾æ¨¡å¼ - æ‹¦æˆªçš„ç±»éƒ½å®ç°ç»Ÿä¸€æ¥å£ï¼Œæ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹ä¸‹ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p></li><li><p>ä»£ç†æ¨¡å¼ - ä¸ºç›®æ ‡å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®</p></li><li><p>è§‚å¯Ÿè€…æ¨¡å¼ - ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œåœ¨è§‚å¯Ÿç›®æ ‡ç±»é‡Œæœ‰ä¸€ä¸ª ArrayList å­˜æ”¾è§‚å¯Ÿè€…ä»¬ã€‚å½“è§‚å¯Ÿç›®æ ‡å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„è§‚å¯Ÿè€…éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œä½¿è¿™äº›è§‚å¯Ÿè€…èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°ï¼ˆå³ä½¿ç”¨æ¨é€æ–¹å¼ï¼‰</p></li><li><p>å•ä¾‹æ¨¡å¼ - ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹</p></li></ul><p>ä¸å¸¸è§çš„:</p><ul><li><p>å»ºé€ è€…æ¨¡å¼ - ç”¨äºæ„é€ å¤æ‚å¯¹è±¡</p></li><li><p>åŸå‹æ¨¡å¼ - é€šè¿‡æ‹·è´åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡</p></li><li><p>è¿‡æ»¤å™¨æ¨¡å¼ - </p></li><li><p>æ¡¥æ¥æ¨¡å¼</p></li><li><p>é—¨é¢æ¨¡å¼ - åœ¨å®¢æˆ·ç«¯å’Œå¤æ‚ç³»ç»Ÿä¹‹é—´å†åŠ ä¸€å±‚, éšè—ç³»ç»Ÿçš„å¤æ‚æ€§</p></li><li><p>ç»„åˆæ¨¡å¼</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-ä¸­çš„è®¾è®¡æ¨¡å¼">spring ä¸­çš„è®¾è®¡æ¨¡å¼<a href="#spring-ä¸­çš„è®¾è®¡æ¨¡å¼" class="hash-link" aria-label="spring ä¸­çš„è®¾è®¡æ¨¡å¼çš„ç›´æ¥é“¾æ¥" title="spring ä¸­çš„è®¾è®¡æ¨¡å¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><p>ç®€å•å·¥å‚</p><ul><li>BeanFactory, æ ¹æ®ä¼ å…¥ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ¥è·å¾—Beanå¯¹è±¡</li></ul></li><li><p>å·¥å‚æ–¹æ³•æ¨¡å¼</p><ul><li><p>FactoryBeanæ¥å£ã€‚</p><p>  å®ç°äº†FactoryBeanæ¥å£çš„beanæ˜¯ä¸€ç±»å«åšfactoryçš„beanã€‚å…¶ç‰¹ç‚¹æ˜¯ï¼Œspringä¼šåœ¨ä½¿ç”¨getBean()è°ƒç”¨è·å¾—è¯¥beanæ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¯¥beançš„getObject()æ–¹æ³•ï¼Œæ‰€ä»¥è¿”å›çš„ä¸æ˜¯factoryè¿™ä¸ªbeanï¼Œè€Œæ˜¯è¿™ä¸ªbean.getOjbect()æ–¹æ³•çš„è¿”å›å€¼ã€‚</p></li></ul></li><li><p>å•ä¾‹æ¨¡å¼</p><ul><li>Springä¾èµ–æ³¨å…¥Beanå®ä¾‹é»˜è®¤æ˜¯å•ä¾‹çš„ã€‚</li></ul></li><li><p>ä»£ç†æ¨¡å¼</p><ul><li>aop åº•å±‚ï¼Œå°±æ˜¯åŠ¨æ€ä»£ç†æ¨¡å¼çš„å®ç°ã€‚</li></ul></li><li><p>è§‚å¯Ÿè€…æ¨¡å¼</p><ul><li><p>springçš„äº‹ä»¶é©±åŠ¨æ¨¡å‹ä½¿ç”¨çš„æ˜¯ è§‚å¯Ÿè€…æ¨¡å¼ ï¼ŒSpringä¸­Observeræ¨¡å¼å¸¸ç”¨çš„åœ°æ–¹æ˜¯listenerçš„å®ç°ã€‚</p><p>  åº•å±‚æ˜¯é€šè¿‡ jdk æä¾›çš„äº‹ä»¶æ¨¡å‹å®ç°çš„. EventObject, EventListener</p></li></ul></li><li><p>é€‚é…å™¨æ¨¡å¼</p><ul><li><p>SpringMVCä¸­çš„é€‚é…å™¨HandlerAdatper</p><p>  HandlerAdatperä½¿å¾—Handlerçš„æ‰©å±•å˜å¾—å®¹æ˜“ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„Handlerå’Œä¸€ä¸ªå¯¹åº”çš„HandlerAdapterå³å¯ã€‚</p></li></ul></li><li><p>è£…é¥°å™¨æ¨¡å¼</p><ul><li>spring ä¸­ ç±»åä¸­å«æœ‰Wrapper, éƒ½æ˜¯, å¦‚: httpServletRquestWrapper...</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼">ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼<a href="#ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼" class="hash-link" aria-label="ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„ç›´æ¥é“¾æ¥" title="ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.zhihu.com/question/23757906/answer/25567356" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/23757906/answer/25567356</a></p><p>é™¤äº†Java, å…¶ä»–æä¾›åŠ¨æ€ç¼–ç¨‹çš„ç‰¹æ€§çš„è¯­è¨€æ— éœ€è®¾è®¡æ¨¡å¼, å› ä¸º:</p><ul><li>å¦‚æœä½ ç”¨çš„è¯­è¨€èƒ½æŠŠç±»å‹åƒå˜é‡ä¸€æ ·èµ‹å€¼å¹¶ä¼ æ¥ä¼ å»ï¼Œå¾ˆå¤šåˆ›å»ºå‹æ¨¡å¼å°±æ²¡ç”¨äº†ã€‚</li><li>å¦‚æœä½ ç”¨çš„è¯­è¨€èƒ½æŠŠå‡½æ•°åƒå˜é‡ä¸€æ ·èµ‹å€¼å¹¶ä¼ æ¥ä¼ å»ï¼Œå¾ˆå¤šè¡Œä¸ºæ¨¡å¼å°±æ²¡ç”¨äº†ã€‚</li><li>å¦‚æœä½ ç”¨çš„è¯­è¨€ style åå¯¹å åºŠæ¶å±‹çš„ class hierarchyï¼Œå¾ˆå¤šç»“æ„æ¨¡å¼å°±æ²¡ç”¨äº†ã€‚</li></ul><h1>å·¥å‚æ¨¡å¼</h1><p>ä¼˜ç‚¹:</p><ul><li>å°†å¤æ‚çš„å¯¹è±¡åˆ›å»ºè¿‡ç¨‹å°è£…, ç®€åŒ–å¯¹è±¡çš„åˆ›å»º</li><li>è§£è€¦</li></ul><p>ä¸åŒçš„å·¥å‚æ¨¡å¼æœ‰ä¸åŒç‰¹ç‚¹:</p><ul><li><p>ç®€å•å·¥å‚(é™æ€å·¥å‚): æä¾›ä¸€ä¸ªè¶…çº§å·¥å‚ç±», é€šè¿‡ if else å°è£…æ‰€æœ‰ product çš„åˆ›å»ºé€»è¾‘. </p><ul><li><p>è¿™æ ·å¸¦æ¥ä¸¤ä¸ªé—®é¢˜:</p><ul><li><p>å·¥å‚ç±»è¿èƒŒ single responsibilities principle</p><p>  å¦‚æœéœ€è¦ç”Ÿäº§çš„äº§å“è¿‡å¤šï¼Œæ­¤æ¨¡å¼ä¼šå¯¼è‡´å·¥å‚ç±»è¿‡äºåºå¤§ï¼Œæ‰¿æ‹…è¿‡å¤šçš„èŒè´£ï¼Œå˜æˆè¶…çº§ç±»ã€‚å½“è‹¹æœç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œè¦æ¥ä¿®æ”¹æ­¤å·¥å‚ã€‚æ¢¨å­ç”Ÿäº§è¿‡ç¨‹éœ€è¦ä¿®æ”¹æ—¶ï¼Œä¹Ÿè¦æ¥ä¿®æ”¹æ­¤å·¥å‚ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç±»ä¸æ­¢ä¸€ä¸ªå¼•èµ·ä¿®æ”¹çš„åŸå› ã€‚è¿èƒŒäº†å•ä¸€èŒè´£åŸåˆ™</p></li><li><p>å·¥å‚ç±»è¿èƒŒäº† open close principle </p><p>  å½“è¦ç”Ÿäº§æ–°çš„äº§å“æ—¶ï¼Œå¿…é¡»åœ¨å·¥å‚ç±»ä¸­æ·»åŠ æ–°çš„åˆ†æ”¯ã€‚è€Œå¼€é—­åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼šç±»åº”è¯¥å¯¹ä¿®æ”¹å°é—­ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€å¢åŠ æ–°çš„ç±»ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—¢æœ‰çš„ç±»ï¼Œæ‰€ä»¥è¿™å°±è¿èƒŒäº†å¼€é—­åŸåˆ™</p></li></ul></li><li><p>é€‰æ‹©å…³é”®ç‚¹ï¼šä¸€ç§äº§å“æ˜¯å¦å¯æ ¹æ®æŸä¸ªå‚æ•°å†³å®šå®ƒçš„ç§ç±»</p><p>  å·¥å‚ç±»è´Ÿè´£åˆ›å»ºçš„å¯¹è±¡è¾ƒå°‘, ä¸ä¼šé€ æˆå·¥å‚æ–¹æ³•å¤ªè¿‡å¤æ‚</p><p>  å®¢æˆ·ç«¯åªçŸ¥é“ä¼ å…¥å‚æ•°, å¯¹äºæ˜¯ä»€ä¹ˆå¯¹è±¡ä¸å…³å¿ƒ</p></li></ul></li><li><p>å·¥å‚æ–¹æ³•æ¨¡å¼: æ¯ä¸ªäº§å“éƒ½æä¾›ä¸€ä¸ªå•ç‹¬çš„å·¥å‚ç±»</p><ul><li><p>è§£å†³äº†ç®€å•å·¥å‚æ¨¡å¼çš„ä¸¤ä¸ªé—®é¢˜.</p><p>  æ–°å¢ product åˆ›å»º æ—¶, å¢åŠ  å¯¹åº” factory class å³å¯, æ— éœ€ä¿®æ”¹å·²æœ‰çš„å·¥å‚ç±»</p></li><li><p>è¿˜æ˜¯å­˜åœ¨é—®é¢˜: å·¥å‚ç±»ä¸æ˜¯é¢å‘æ¥å£çš„</p><p>  å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæå–å‡ºå·¥å‚æ¥å£</p></li><li><p>é€‰æ‹©å…³é”®ç‚¹ï¼šå·¥å‚ç±»å’Œäº§å“ç±»æ˜¯å¦æ˜¯åŒç”ŸåŒç­çš„å…³ç³»</p><p>  å®¢æˆ·ç«¯åªçŸ¥é“å…·ä½“å·¥å‚ç±»å’Œäº§å“å‚æ•°</p><p>  å°†åˆ›å»ºå¯¹è±¡çš„ä»»åŠ¡å§”æ‰˜ç»™å¤šä¸ªå·¥å‚ä¸­çš„ä¸€ä¸ª, clientæ— éœ€å…³å¿ƒåˆ°åº•æ˜¯å“ªä¸ªå·¥å‚ç±», éœ€è¦æ—¶å†åŠ¨æ€æŒ‡å®š, å¯ä»¥å°†å·¥å‚å­ç±»çš„ç±»åå­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­oræ•°æ®åº“ä¸­</p></li></ul></li><li><p>æŠ½è±¡å·¥å‚æ¨¡å¼: ä¸åŒäº§å“çš„å·¥å‚ç±»å®ç°åŒä¸€ä¸ª factory interface, æ¯ä¸ª å…·ä½“çš„ å·¥å‚å®ç°ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªäº§å“æ—</p><ul><li><p>ä½¿ç”¨åœºæ™¯: ç³»ç»Ÿä¸­æœ‰å¤šäºä¸€ä¸ªçš„äº§å“æ—ï¼Œè€Œä¸”æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªäº§å“æ—ã€‚</p><p>  ä¸€ä¸ªäº§å“æ—ä½¿ç”¨ä¸€ä¸ªå·¥å‚ç±».</p><p>  äº§å“æ—è¡¨ç¤ºä¸åŒçš„äº§å“çš„é›†åˆ, ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»</p></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·¥å‚æ–¹æ³•">å·¥å‚æ–¹æ³•<a href="#å·¥å‚æ–¹æ³•" class="hash-link" aria-label="å·¥å‚æ–¹æ³•çš„ç›´æ¥é“¾æ¥" title="å·¥å‚æ–¹æ³•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>===============ç®€å•å·¥å‚ æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ç‰¹ä¾‹</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class FruitFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Fruit create(String type){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        switch (type){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;è‹¹æœ&quot;: return new Apple(); // å¯¹è±¡åˆ›å»ºé€»è¾‘å¯èƒ½éå¸¸å¤æ‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;æ¢¨å­&quot;: return new Pear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            default: throw new IllegalArgumentException(&quot;æš‚æ—¶æ²¡æœ‰è¿™ç§æ°´æœ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void eat(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FruitFactory fruitFactory = new FruitFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Fruit apple = fruitFactory.create(&quot;è‹¹æœ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Fruit pear = fruitFactory.create(&quot;æ¢¨å­&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        apple.eat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pear.eat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>==============å·¥å‚æ–¹æ³•æ¨¡å¼</p><p>ä¸ºäº†è§£å†³ç®€å•å·¥å‚æ¨¡å¼çš„è¿™ä¸¤ä¸ªå¼Šç«¯ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åº”è¿è€Œç”Ÿï¼Œå®ƒè§„å®šæ¯ä¸ªäº§å“éƒ½æœ‰ä¸€ä¸ªä¸“å±å·¥å‚ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class AppleFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Fruit create(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Apple();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PearFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Fruit create(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Pear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void eat(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AppleFactory appleFactory = new AppleFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Fruit apple = appleFactory.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PearFactory pearFactory = new PearFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Fruit pear = pearFactory.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        apple.eat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pear.eat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æŠ½è±¡å·¥å‚">æŠ½è±¡å·¥å‚<a href="#æŠ½è±¡å·¥å‚" class="hash-link" aria-label="æŠ½è±¡å·¥å‚çš„ç›´æ¥é“¾æ¥" title="æŠ½è±¡å·¥å‚çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface IFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Fruit create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AppleFactory implements IFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Fruit create(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Apple();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PearFactory implements IFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Fruit create(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Pear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void eat(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IFactory appleFactory = new AppleFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Fruit apple = appleFactory.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IFactory pearFactory = new PearFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Fruit pear = pearFactory.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        apple.eat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pear.eat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>æ¨¡æ¿æ¨¡å¼</h1><p>å®šä¹‰: å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­</p><p>ä¼˜ç‚¹: </p><ul><li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼é€šè¿‡æŠŠä¸å˜çš„è¡Œä¸ºæ¬ç§»åˆ°è¶…ç±»ï¼Œå»é™¤äº†å­ç±»ä¸­çš„é‡å¤ä»£ç ã€‚</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//ä¸¾ä¸ªä¾‹å­ï¼Œä»¥å‡†å¤‡å»å­¦æ ¡æ‰€è¦åšçš„å·¥ä½œï¼ˆprepareGotoSchoolï¼‰ä¸ºä¾‹ï¼Œå‡è®¾éœ€è¦åˆ†ä¸‰æ­¥ï¼šç©¿è¡£æœï¼ˆdressUpï¼‰ï¼Œåƒæ—©é¥­ï¼ˆeatBreakfastï¼‰ï¼Œå¸¦ä¸Šä¸œè¥¿ï¼ˆtakeThingsï¼‰ã€‚å­¦ç”Ÿå’Œè€å¸ˆè¦åšå¾—å…·ä½“äº‹æƒ…è‚¯å®šæœ‰æ‰€åŒºåˆ«</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public abstract class AbstractPerson{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     //æŠ½è±¡ç±»å®šä¹‰æ•´ä¸ªæµç¨‹éª¨æ¶  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     public void prepareGotoSchool(){  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          dressUp();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          eatBreakfast();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          takeThings();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     //ä»¥ä¸‹æ˜¯ä¸åŒå­ç±»æ ¹æ®è‡ªèº«ç‰¹æ€§å®Œæˆçš„å…·ä½“æ­¥éª¤  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected abstract void dressUp();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected abstract void eatBreakfast();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected abstract void takeThings();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Student extends AbstractPerson{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected void dressUp() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          System.out.println(&quot;ç©¿æ ¡æœ&quot;);  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected void eatBreakfast() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          System.out.println(&quot;åƒå¦ˆå¦ˆåšå¥½çš„æ—©é¥­&quot;);  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected void takeThings() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          System.out.println(&quot;èƒŒä¹¦åŒ…ï¼Œå¸¦ä¸Šå®¶åº­ä½œä¸šå’Œçº¢é¢†å·¾&quot;);  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Teacher extends AbstractPerson{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected void dressUp() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          System.out.println(&quot;ç©¿å·¥ä½œæœ&quot;);  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected void eatBreakfast() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          System.out.println(&quot;åšæ—©é¥­ï¼Œç…§é¡¾å­©å­åƒæ—©é¥­&quot;);  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     protected void takeThings() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          System.out.println(&quot;å¸¦ä¸Šæ˜¨æ™šå‡†å¤‡çš„è€ƒå·&quot;);  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     public static void main(String[] args) {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Student student = new Student()  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     student.prepareGotoSchool();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Teacher teacher  = new Teacher()  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     teacher.prepareGotoSchool();  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>ç­–ç•¥æ¨¡å¼</h1><p>å®šä¹‰äº†ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•éƒ½å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬ä¹‹é—´å¯ä»¥äº’æ¢. </p><p>åœºæ™¯: (å»é™¤ if else)</p><p>æ¶‰åŠåˆ°ä¸‰ä¸ªè§’è‰²:</p><ul><li><p>ç¯å¢ƒ(Context)è§’è‰²ï¼šæŒæœ‰ä¸€ä¸ªStrategyçš„å¼•ç”¨ã€‚</p></li><li><p>æŠ½è±¡ç­–ç•¥(Strategy)è§’è‰²ï¼šè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œé€šå¸¸ç”±ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»å®ç°ã€‚æ­¤è§’è‰²ç»™å‡ºæ‰€æœ‰çš„å…·ä½“ç­–ç•¥ç±»æ‰€éœ€çš„æ¥å£ã€‚</p></li><li><p>å…·ä½“ç­–ç•¥(ConcreteStrategy)è§’è‰²ï¼šåŒ…è£…äº†ç›¸å…³çš„å…·ä½“ç®—æ³•æˆ–è¡Œä¸º</p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//å‡è®¾æŸåº—å®¶æ¨å‡ºä¸‰ç§ä¼šå‘˜ï¼Œåˆ†åˆ«ä¸ºæ™®é€šä¼šå‘˜ï¼Œé‡‘ç‰Œä¼šå‘˜å’Œé’»çŸ³ä¼šå‘˜ï¼Œè¿˜æœ‰å°±æ˜¯æ™®é€šé¡¾å®¢ï¼Œé’ˆå¯¹ä¸åŒçš„ä¼šå‘˜é¡¾å®¢ï¼Œè´­ç‰©ç»“ç®—æ—¶æœ‰ä¸åŒçš„æ‰“æŠ˜æ–¹å¼ã€‚è´­ç‰©åï¼Œå®¢æˆ·çš„å†å²è´­ç‰©é‡‘é¢ç´¯è®¡ï¼Œå¯ä»¥è‡ªåŠ¨å‡çº§åˆ°ç›¸åº”çš„ä¼šå‘˜çº§åˆ«ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç­–ç•¥æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface IVipAlgo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int calc(int originalPrice);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//å®ç°æ¥å£, æœ‰å¤šä¸ªå®ç°, æ¯ä¸ªå®ç°çš„ç®—æ³•ä¸åŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class VipAlgo1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int calc(int originalPrice) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class VipAlgo2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int calc(int originalPrice) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ä¸Šä¸‹æ–‡ç±», å…·ä½“æ‰§è¡ŒæŸä¸ªç®—æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class VipCalculator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private IVipAlgo vipAlgo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public VipCalculator(IVipAlgo IVipAlgo) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.vipAlgo = IVipAlgo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int execAlgo(int originalPrice) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return vipAlgo.calc(originalPrice)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Main {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VipCalculator calc = new VipCalculator(new VipAlgo1());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int result = calc(112);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>===========åœ¨ spring ä¸­è¿™ä¹ˆä½¿ç”¨:</p><h1>è§‚å¯Ÿè€…æ¨¡å¼</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰">è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰<a href="#è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰" class="hash-link" aria-label="è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰çš„ç›´æ¥é“¾æ¥" title="è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åˆ«å å‘å¸ƒè®¢é˜…æ¨¡å¼</p><p>å®šä¹‰: è§‚å¯Ÿç›®æ ‡å‘ç”ŸçŠ¶æ€å˜åŒ–æ—¶, ä¼šé€šçŸ¥ä¼—å¤šçš„è§‚å¯Ÿè€…</p><p>è¿™å°±è¦æ±‚è§‚å¯Ÿç›®æ ‡å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨, ä»¥ä¾¿ä¸€ä¸€é€šçŸ¥</p><p>ä¸€ä¸ªè§‚å¯Ÿç›®æ ‡æœ‰å¤šä¸ªè§‚å¯Ÿè€…, è¿™äº›è§‚å¯Ÿè€…æ´¾ç”Ÿè‡ªåŒä¸€ä¸ªæ¥å£</p><p>ä¼˜ç‚¹:</p><ul><li>è§£è€¦åˆ</li></ul><p>ç¼ºç‚¹:</p><ul><li>è§‚å¯Ÿè€…å¾ˆå¤šæ—¶è€—æ—¶ä¸¥é‡</li><li>è§‚å¯Ÿè€…æ¨¡å¼æ— æ³•è®©è§‚å¯Ÿè€…çŸ¥é“ç›®æ ‡æ˜¯å¦‚ä½•å˜åŒ–çš„, ä»…ä»…åªæ˜¯çŸ¥é“ç›®æ ‡å‘ç”Ÿäº†å˜åŒ–</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æŠ½è±¡è§‚å¯Ÿè€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ25æ—¥ ä¸‹åˆ9:29:32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface IObserver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç›®æ ‡å¯¹è±¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•é€šçŸ¥è§‚å¯Ÿè€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void update(Target t);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * observe target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ25æ—¥ ä¸‹åˆ11:19:52</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public abstract class Target {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * observer list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;IObserver&gt; observerList = new ArrayList&lt;IObserver&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * add observer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param observer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void add(IObserver observer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        observerList.add(observer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * remove observer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param observer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void remove(IObserver observer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        observerList.remove(observer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * change status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void change() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;TargetçŠ¶æ€å‘ç”Ÿå˜åŒ–&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.inform();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * inform observers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void inform() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for(IObserver observer: observerList) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            observer.update(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">///////////////////// å¦‚ä½•ä½¿ç”¨?  ////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å…ˆå®šä¹‰ observers, å¤šä¸ª, å®ç°è‡ªå·±çš„ update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  concrete observer1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ25æ—¥ ä¸‹åˆ11:42:45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Observer1 implements IObserver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void update(Target t) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Observer1è§‚å¯Ÿåˆ°&quot; + t.getClass().getSimpleName()+ &quot;å‘ç”Ÿå˜åŒ–&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * concrete observer2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ25æ—¥ ä¸‹åˆ11:45:16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Observer2 implements IObserver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void update(Target t) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Observer2è§‚å¯Ÿåˆ°&quot; + t.getClass().getSimpleName() + &quot;å‘ç”Ÿå˜åŒ–.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ25æ—¥ ä¸‹åˆ11:53:28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyTarget extends Target {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Target t = new MyTarget();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IObserver observer1 = new Observer1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IObserver observer2=  new Observer2();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.add(observer1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.add(observer2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.change();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="jdk-ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼">jdk ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼<a href="#jdk-ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼" class="hash-link" aria-label="jdk ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼çš„ç›´æ¥é“¾æ¥" title="jdk ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jdk-ä¸­çš„-api">jdk ä¸­çš„ api<a href="#jdk-ä¸­çš„-api" class="hash-link" aria-label="jdk ä¸­çš„ apiçš„ç›´æ¥é“¾æ¥" title="jdk ä¸­çš„ apiçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//è§‚å¯Ÿè€…æ¥å£ï¼Œæ¯ä¸€ä¸ªè§‚å¯Ÿè€…éƒ½å¿…é¡»å®ç°è¿™ä¸ªæ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface Observer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¿™ä¸ªæ–¹æ³•æ˜¯è§‚å¯Ÿè€…åœ¨è§‚å¯Ÿå¯¹è±¡äº§ç”Ÿå˜åŒ–æ—¶æ‰€åšçš„å“åº”åŠ¨ä½œï¼Œä»ä¸­ä¼ å…¥äº†è§‚å¯Ÿçš„å¯¹è±¡å’Œä¸€ä¸ªé¢„ç•™å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void update(Observable o, Object arg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//è¢«è§‚å¯Ÿè€…ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Observable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¿™æ˜¯ä¸€ä¸ªæ”¹å˜æ ‡è¯†ï¼Œæ¥æ ‡è®°è¯¥è¢«è§‚å¯Ÿè€…æœ‰æ²¡æœ‰æ”¹å˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean changed = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æŒæœ‰ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Vector obs;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Observable() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        obs = new Vector();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ·»åŠ è§‚å¯Ÿè€…ï¼Œæ·»åŠ æ—¶ä¼šå»é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void addObserver(Observer o) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (o == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new NullPointerException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!obs.contains(o)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            obs.addElement(o);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //åˆ é™¤è§‚å¯Ÿè€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void deleteObserver(Observer o) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        obs.removeElement(o);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //notifyObservers(Object arg)çš„é‡è½½æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void notifyObservers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        notifyObservers(null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ï¼Œè¢«è§‚å¯Ÿè€…æ”¹å˜äº†ï¼Œå¯ä»¥æ‰§è¡Œupdateæ–¹æ³•äº†ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void notifyObservers(Object arg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä¸€ä¸ªä¸´æ—¶çš„æ•°ç»„ï¼Œç”¨äºå¹¶å‘è®¿é—®è¢«è§‚å¯Ÿè€…æ—¶ï¼Œç•™ä½è§‚å¯Ÿè€…åˆ—è¡¨çš„å½“å‰çŠ¶æ€ï¼Œè¿™ç§å¤„ç†æ–¹å¼å…¶å®ä¹Ÿç®—æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå³å¤‡å¿˜å½•æ¨¡å¼ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object[] arrLocal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ³¨æ„è¿™ä¸ªåŒæ­¥å—ï¼Œå®ƒè¡¨ç¤ºåœ¨è·å–è§‚å¯Ÿè€…åˆ—è¡¨æ—¶ï¼Œè¯¥å¯¹è±¡æ˜¯è¢«é”å®šçš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æˆ‘è·å–åˆ°è§‚å¯Ÿè€…åˆ—è¡¨ä¹‹å‰ï¼Œä¸å…è®¸å…¶ä»–çº¿ç¨‹æ”¹å˜è§‚å¯Ÿè€…åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (this) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //å¦‚æœæ²¡å˜åŒ–ç›´æ¥è¿”å›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!changed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //è¿™é‡Œå°†å½“å‰çš„è§‚å¯Ÿè€…åˆ—è¡¨æ”¾å…¥ä¸´æ—¶æ•°ç»„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            arrLocal = obs.toArray();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //å°†æ”¹å˜æ ‡è¯†é‡æ–°ç½®å›æœªæ”¹å˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearChanged();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ³¨æ„è¿™ä¸ªforå¾ªç¯æ²¡æœ‰åœ¨åŒæ­¥å—ï¼Œæ­¤æ—¶å·²ç»é‡Šæ”¾äº†è¢«è§‚å¯Ÿè€…çš„é”ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥æ”¹å˜è§‚å¯Ÿè€…åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä½†æ˜¯è¿™å¹¶ä¸å½±å“æˆ‘ä»¬å½“å‰è¿›è¡Œçš„æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å°†è§‚å¯Ÿè€…åˆ—è¡¨å¤åˆ¶åˆ°ä¸´æ—¶æ•°ç»„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åœ¨é€šçŸ¥æ—¶æˆ‘ä»¬åªé€šçŸ¥æ•°ç»„ä¸­çš„è§‚å¯Ÿè€…ï¼Œå½“å‰åˆ é™¤å’Œæ·»åŠ è§‚å¯Ÿè€…ï¼Œéƒ½ä¸ä¼šå½±å“æˆ‘ä»¬é€šçŸ¥çš„å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = arrLocal.length-1; i&gt;=0; i--)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ((Observer)arrLocal[i]).update(this, arg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //åˆ é™¤æ‰€æœ‰è§‚å¯Ÿè€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized void deleteObservers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        obs.removeAllElements();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ ‡è¯†è¢«è§‚å¯Ÿè€…è¢«æ”¹å˜è¿‡äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected synchronized void setChanged() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changed = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ ‡è¯†è¢«è§‚å¯Ÿè€…æ²¡æ”¹å˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected synchronized void clearChanged() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changed = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¿”å›è¢«è§‚å¯Ÿè€…æ˜¯å¦æ”¹å˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized boolean hasChanged() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return changed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¿”å›è§‚å¯Ÿè€…æ•°é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public synchronized int countObservers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return obs.size();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jdk-è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹">jdk è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹<a href="#jdk-è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹" class="hash-link" aria-label="jdk è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥" title="jdk è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//è¯»è€…ç±»ï¼Œè¦å®ç°è§‚å¯Ÿè€…æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Reader implements Observer{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Reader(String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¯»è€…å¯ä»¥å…³æ³¨æŸä¸€ä½ä½œè€…ï¼Œå…³æ³¨åˆ™ä»£è¡¨æŠŠè‡ªå·±åŠ åˆ°ä½œè€…çš„è§‚å¯Ÿè€…åˆ—è¡¨é‡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void subscribe(String writerName){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WriterManager.getInstance().getWriter(writerName).addObserver(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¯»è€…å¯ä»¥å–æ¶ˆå…³æ³¨æŸä¸€ä½ä½œè€…ï¼Œå–æ¶ˆå…³æ³¨åˆ™ä»£è¡¨æŠŠè‡ªå·±ä»ä½œè€…çš„è§‚å¯Ÿè€…åˆ—è¡¨é‡Œåˆ é™¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void unsubscribe(String writerName){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WriterManager.getInstance().getWriter(writerName).deleteObserver(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å½“å…³æ³¨çš„ä½œè€…å‘è¡¨æ–°å°è¯´æ—¶ï¼Œä¼šé€šçŸ¥è¯»è€…å»çœ‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void update(Observable o, Object obj) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (o instanceof Writer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Writer writer = (Writer) o;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(name+&quot;çŸ¥é“&quot; + writer.getName() + &quot;å‘å¸ƒäº†æ–°ä¹¦ã€Š&quot; + writer.getLastNovel() + &quot;ã€‹ï¼Œéè¦å»çœ‹ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ä½œè€…ç±»ï¼Œè¦ç»§æ‰¿è‡ªè¢«è§‚å¯Ÿè€…ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Writer extends Observable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;//ä½œè€…çš„åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String lastNovel;//è®°å½•ä½œè€…æœ€æ–°å‘å¸ƒçš„å°è¯´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Writer(String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WriterManager.getInstance().add(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ä½œè€…å‘å¸ƒæ–°å°è¯´äº†ï¼Œè¦é€šçŸ¥æ‰€æœ‰å…³æ³¨è‡ªå·±çš„è¯»è€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addNovel(String novel) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(name + &quot;å‘å¸ƒäº†æ–°ä¹¦ã€Š&quot; + novel + &quot;ã€‹ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastNovel = novel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setChanged();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        notifyObservers();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getLastNovel() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return lastNovel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ç®¡ç†å™¨ï¼Œä¿æŒä¸€ä»½ç‹¬æœ‰çš„ä½œè€…åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WriterManager{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, Writer&gt; writerMap = new HashMap&lt;String, Writer&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ·»åŠ ä½œè€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void add(Writer writer){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        writerMap.put(writer.getName(), writer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ ¹æ®ä½œè€…å§“åè·å–ä½œè€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Writer getWriter(String name){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return writerMap.get(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private WriterManager(){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static WriterManager getInstance(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return WriterManagerInstance.instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class WriterManagerInstance{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static WriterManager instance = new WriterManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//å®¢æˆ·ç«¯è°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å‡è®¾å››ä¸ªè¯»è€…ï¼Œä¸¤ä¸ªä½œè€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Reader r1 = new Reader(&quot;è°¢å¹¿å¤&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Reader r2 = new Reader(&quot;èµµå››&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Reader r3 = new Reader(&quot;ä¸ƒå“¥&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Reader r4 = new Reader(&quot;åˆ˜èƒ½&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Writer w1 = new Writer(&quot;è°¢å¤§è„š&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Writer w2 = new Writer(&quot;ç‹å°è’™&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å››äººå…³æ³¨äº†è°¢å¤§è„š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r1.subscribe(&quot;è°¢å¤§è„š&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r2.subscribe(&quot;è°¢å¤§è„š&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r3.subscribe(&quot;è°¢å¤§è„š&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r4.subscribe(&quot;è°¢å¤§è„š&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä¸ƒå“¥å’Œåˆ˜èƒ½è¿˜å…³æ³¨äº†ç‹å°è’™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r3.subscribe(&quot;ç‹å°è’™&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r4.subscribe(&quot;ç‹å°è’™&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä½œè€…å‘å¸ƒæ–°ä¹¦å°±ä¼šé€šçŸ¥å…³æ³¨çš„è¯»è€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è°¢å¤§è„šå†™äº†è®¾è®¡æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        w1.addNovel(&quot;è®¾è®¡æ¨¡å¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç‹å°è’™å†™äº†JAVAç¼–ç¨‹æ€æƒ³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        w2.addNovel(&quot;JAVAç¼–ç¨‹æ€æƒ³&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è°¢å¹¿å¤å–æ¶ˆå…³æ³¨è°¢å¤§è„š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r1.unsubscribe(&quot;è°¢å¤§è„š&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è°¢å¤§è„šå†å†™ä¹¦å°†ä¸ä¼šé€šçŸ¥è°¢å¹¿å¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        w1.addNovel(&quot;è§‚å¯Ÿè€…æ¨¡å¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº‹ä»¶é©±åŠ¨æ¨¡å‹">äº‹ä»¶é©±åŠ¨æ¨¡å‹<a href="#äº‹ä»¶é©±åŠ¨æ¨¡å‹" class="hash-link" aria-label="äº‹ä»¶é©±åŠ¨æ¨¡å‹çš„ç›´æ¥é“¾æ¥" title="äº‹ä»¶é©±åŠ¨æ¨¡å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è§‚å¯Ÿè€…æ¨¡å¼çš„å¦ä¸€ç§å½¢æ€, ä¾‹å¦‚Tomcatä¸­çš„ç›‘å¬å™¨listener</p><p>ä¸¤ç§å½¢æ€åŒºåˆ«:</p><ul><li><p>è§‚å¯Ÿè€…æ¨¡å¼ä¸­, åªè¦ target å‘ç”Ÿå˜åŒ–, éƒ½ä¼šé€šçŸ¥ è§‚å¯Ÿè€…, è€Œè€Œäº‹ä»¶é©±åŠ¨åˆ™ä¸æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå·±æ„Ÿå…´è¶£çš„äº‹æƒ…, å¿½ç•¥å…¶ä»–å˜åŒ–</p></li><li><p>è§‚å¯Ÿè€…æ¨¡å¼è¦æ±‚è¢«è§‚å¯Ÿè€…ç»§æ‰¿Observableç±», äº‹ä»¶é©±åŠ¨ä¸­äº‹ä»¶æºåˆ™ä¸éœ€è¦ï¼Œå› ä¸ºäº‹ä»¶æºæ‰€ç»´æŠ¤çš„ç›‘å¬å™¨åˆ—è¡¨æ˜¯ç»™è‡ªå·±å®šåˆ¶çš„ï¼Œæ‰€ä»¥æ— æ³•å»åˆ¶ä½œä¸€ä¸ªé€šç”¨çš„çˆ¶ç±»å»å®Œæˆè¿™ä¸ªå·¥ä½œã€‚</p></li><li><p>è¢«è§‚å¯Ÿè€…ä¼ é€ç»™è§‚å¯Ÿè€…çš„ä¿¡æ¯æ˜¯æ¨¡ç³Šçš„ï¼Œæ¯”å¦‚updateä¸­ç¬¬äºŒä¸ªå‚æ•°ï¼Œç±»å‹æ˜¯Objectï¼Œè¿™éœ€è¦è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´æœ‰çº¦å®šæ‰å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‚æ•°ã€‚è€Œåœ¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­ï¼Œè¿™äº›ä¿¡æ¯æ˜¯è¢«å°è£…åœ¨Eventå½“ä¸­çš„ï¼Œå¯ä»¥æ›´æ¸…æ¥šçš„å‘Šè¯‰ç›‘å¬å™¨ï¼Œæ¯ä¸ªä¿¡æ¯éƒ½æ˜¯ä»£è¡¨çš„ä»€ä¹ˆã€‚</p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//å®šä¹‰ä½œè€…äº‹ä»¶, è¿™ä»£è¡¨äº†ä¸€ä¸ªä½œè€…äº‹ä»¶: å‘å¸ƒæ–°ä¹¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// è¿™ä¸ªäº‹ä»¶å½“ä¸­ä¸€èˆ¬å°±æ˜¯åŒ…å«ä¸€ä¸ªäº‹ä»¶æºï¼Œåœ¨è¿™é‡Œå°±æ˜¯ä½œè€…, é€šè¿‡ constructor ä¼ å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WriterEvent extends EventObject{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final long serialVersionUID = 8546459078247503692L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public WriterEvent(Writer writer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(writer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Writer getWriter(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (Writer) super.getSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//å¯¹åº”çš„ éœ€è¦æœ‰ä¸€ä¸ªç›‘å¬å™¨ç›‘å¬è¿™ä¸ªäº‹ä»¶, å¯¹&quot;æŒ‡å®šäº‹ä»¶&quot; åšå‡ºååº”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface WriterListener extends EventListener{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å‚æ•°: è¢«ç›‘å¬çš„äº‹ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void addNovel(WriterEvent writerEvent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ä½œè€…ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯ä»¥çœ‹åˆ°ï¼Œä½œè€…ç±»çš„ä¸»è¦å˜åŒ–æ˜¯æ·»åŠ äº†ä¸€ä¸ªè‡ªå·±çš„ç›‘å¬å™¨åˆ—è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨setæ˜¯ä¸ºäº†å®ƒçš„å¤©ç„¶å»é‡æ•ˆæœï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Writer{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;//ä½œè€…çš„åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String lastNovel;//è®°å½•ä½œè€…æœ€æ–°å‘å¸ƒçš„å°è¯´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Set&lt;WriterListener&gt; writerListenerList = new HashSet&lt;WriterListener&gt;();//ä½œè€…ç±»è¦åŒ…å«ä¸€ä¸ªè‡ªå·±ç›‘å¬å™¨çš„åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Writer(String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WriterManager.getInstance().add(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ä½œè€…å‘å¸ƒæ–°å°è¯´äº†ï¼Œè¦é€šçŸ¥æ‰€æœ‰å…³æ³¨è‡ªå·±çš„è¯»è€…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addNovel(String novel) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(name + &quot;å‘å¸ƒäº†æ–°ä¹¦ã€Š&quot; + novel + &quot;ã€‹ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastNovel = novel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireEvent();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è§¦å‘å‘å¸ƒæ–°ä¹¦çš„äº‹ä»¶ï¼Œé€šçŸ¥æ‰€æœ‰ç›‘å¬è¿™ä»¶äº‹çš„ç›‘å¬å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void fireEvent(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WriterEvent writerEvent = new WriterEvent(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (WriterListener writerListener : writerListenerList) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            writerListener.addNovel(writerEvent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æä¾›ç»™å¤–éƒ¨æ³¨å†Œæˆä¸ºè‡ªå·±çš„ç›‘å¬å™¨çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerListener(WriterListener writerListener){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        writerListenerList.add(writerListener);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æä¾›ç»™å¤–éƒ¨æ³¨é”€çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void unregisterListener(WriterListener writerListener){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        writerListenerList.remove(writerListener);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getLastNovel() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return lastNovel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// è¯»è€…ç±»çš„å˜åŒ–ï¼Œé¦–å…ˆæœ¬æ¥æ˜¯å®ç°Observeræ¥å£ï¼Œç°åœ¨è¦å®ç°WriterListeneræ¥å£ï¼Œå“åº”çš„updateæ–¹æ³•å°±æ”¹ä¸ºæˆ‘ä»¬å®šä¹‰çš„addNovelæ–¹æ³•ï¼Œå½“ä¸­çš„å“åº”åŸºæœ¬æ²¡å˜ã€‚å¦å¤–å°±æ˜¯å…³æ³¨å’Œå–æ¶ˆå…³æ³¨çš„æ–¹æ³•ä¸­ï¼ŒåŸæ¥æ˜¯ç»™ä½œè€…ç±»æ·»åŠ è§‚å¯Ÿè€…å’Œåˆ é™¤è§‚å¯Ÿè€…ï¼Œç°åœ¨æ˜¯æ³¨å†Œç›‘å¬å™¨å’Œæ³¨é”€ç›‘å¬å™¨ï¼Œå‡ ä¹æ˜¯æ²¡ä»€ä¹ˆå˜åŒ–çš„ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Reader implements WriterListener{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Reader(String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¯»è€…å¯ä»¥å…³æ³¨æŸä¸€ä½ä½œè€…ï¼Œå…³æ³¨åˆ™ä»£è¡¨æŠŠè‡ªå·±åŠ åˆ°ä½œè€…çš„ç›‘å¬å™¨åˆ—è¡¨é‡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void subscribe(String writerName){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WriterManager.getInstance().getWriter(writerName).registerListener(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¯»è€…å¯ä»¥å–æ¶ˆå…³æ³¨æŸä¸€ä½ä½œè€…ï¼Œå–æ¶ˆå…³æ³¨åˆ™ä»£è¡¨æŠŠè‡ªå·±ä»ä½œè€…çš„ç›‘å¬å™¨åˆ—è¡¨é‡Œæ³¨é”€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void unsubscribe(String writerName){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WriterManager.getInstance().getWriter(writerName).unregisterListener(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addNovel(WriterEvent writerEvent) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Writer writer = writerEvent.getWriter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(name+&quot;çŸ¥é“&quot; + writer.getName() + &quot;å‘å¸ƒäº†æ–°ä¹¦ã€Š&quot; + writer.getLastNovel() + &quot;ã€‹ï¼Œéè¦å»çœ‹ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>ä»£ç†æ¨¡å¼</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é™æ€ä»£ç†">é™æ€ä»£ç†<a href="#é™æ€ä»£ç†" class="hash-link" aria-label="é™æ€ä»£ç†çš„ç›´æ¥é“¾æ¥" title="é™æ€ä»£ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä»£ç†å¯¹è±¡å’Œè¢«ä»£ç†å¯¹è±¡å®ç°ç›¸åŒçš„æ¥å£</p><p>ä»£ç†å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä»£ç†ç›®æ ‡å’Œä»£ç†éƒ½è¦å®ç°çš„ç»Ÿä¸€æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ10:40:28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface Moveable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void move();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä»£ç†ç›®æ ‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ10:43:01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Car implements Moveable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void move() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Car å¼€å§‹ç§»åŠ¨...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(new Random().nextInt(10000));// å•ä½æ˜¯ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Car ä»£ç†ç±», æ·»åŠ äº†æ—¶é—´ç»Ÿè®¡åŠŸèƒ½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ10:47:44</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CarTimingProxy implements Moveable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Moveable car;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CarTimingProxy(Moveable car) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.car = car;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void move() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        long start = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        car.move();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        long end = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;moveæŒç»­æ—¶é—´: &quot; + (end-start));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * car ä»£ç†ç±», è®°å½•æ—¥å¿—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ10:57:13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CarLogProxy implements Moveable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Moveable car;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CarLogProxy(Moveable car) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.car = car;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void move() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;log: Carå¼€å§‹ç§»åŠ¨&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        car.move();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;log: Carç»“æŸç§»åŠ¨&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ11:00:13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Moveable car = new CarLogProxy(new CarTimingProxy(new Car()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        car.move();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ¨æ€ä»£ç†">åŠ¨æ€ä»£ç†<a href="#åŠ¨æ€ä»£ç†" class="hash-link" aria-label="åŠ¨æ€ä»£ç†çš„ç›´æ¥é“¾æ¥" title="åŠ¨æ€ä»£ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœéœ€è¦ä»£ç†çš„ç±»åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆé™æ€ä»£ç†æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœæœ‰å¾ˆå¤šç±»éœ€è¦ä»£ç†å‘¢ï¼Œç”¨é™æ€ä»£ç†çš„è¯å°±éœ€è¦ä¸ºæ¯ä¸€ä¸ªç±»åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼Œæ˜¾ç„¶è¿™ä¹ˆåšå¤ªè¿‡ç¹çä¹Ÿå®¹æ˜“å‡ºé”™ã€‚</p><p>JDK 5å¼•å…¥çš„åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œå…è®¸å¼€å‘äººå‘˜åœ¨è¿è¡Œæ—¶åˆ»åŠ¨æ€çš„åˆ›å»ºå‡ºä»£ç†ç±»åŠå…¶å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸ç”¨ä¸ºæ¯ä¸ªç±»å†å•ç‹¬åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡äº†ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸šåŠ¡ï¼Œè¦ä¸ºè¿™ä¸¤ä¸ªä¸šåŠ¡æ·»åŠ æ—¥å¿—æ‰“å°åŠŸèƒ½ã€‚å¦‚æœæ˜¯é™æ€ä»£ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ†åˆ«ä¸ºæ¯ä¸ªä¸šåŠ¡ç±»å†™ä¸€ä¸ªä»£ç†ç±»ï¼Œè€Œå¦‚æœç”¨åŠ¨æ€ä»£ç†ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªæ—¥å¿—æ‰“å°åŠŸèƒ½çš„handlerå³å¯ï¼Œå®Œå…¨ä¸éœ€è¦è‡ªå·±å†å•ç‹¬å†™ä»£ç†ç±»</p><p>å®šä¹‰: åœ¨ç¨‹åºè¿è¡Œæ—¶, åŠ¨æ€ä¸ºä¸åŒçš„å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡. åŠ¨æ€ä»£ç†ä¸»è¦æ˜¯åˆ©ç”¨äº†Javaçš„åå°„æœºåˆ¶ã€‚</p><p>åœºæ™¯: æ¯”å¦‚Springçš„aop</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹">çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹<a href="#çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹" class="hash-link" aria-label="çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥" title="çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Car car = new Car();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è¿™é‡Œå¿…é¡»ä½¿ç”¨æ¥å£æ¥æ”¶, ä¸ç„¶ä¼šè½¬å‹å¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Moveable proxy = (Moveable) Proxy.newProxyInstance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                car.getClass().getClassLoader(), // è¢«ä»£ç†å¯¹è±¡çš„classloader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new Class[] {Moveable.class},// æ‰‹åŠ¨åˆ—å‡ºæ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new InvocationHandler() {// è¯·æ±‚å¤„ç†ç±», å› ä¸ºçŸ¥é“ä¸ä¼šå¤ç”¨, è¿™é‡Œç›´æ¥ä½¿ç”¨åŒ¿åç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Object rst = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        String methodName = method.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (&quot;move&quot;.equals(methodName)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            System.out.println(&quot;æ–¹æ³•è¢«ä»£ç†å‰...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            rst = method.invoke(car, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            System.out.println(&quot;æ–¹æ³•è¢«ä»£ç†å...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            rst = method.invoke(car, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        return rst;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy.move();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± ">è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± <a href="#è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± " class="hash-link" aria-label="è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± çš„ç›´æ¥é“¾æ¥" title="è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// æ•°æ®åº“è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç°åœ¨éœ€è¦æ‰‹åŠ¨å®ç°ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± , æ²¡æœ‰ä½¿ç”¨ä»£ç†æ¨¡å¼çš„æƒ…å†µä¸‹æ˜¯è¿™æ ·:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyPool {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int init_count = 3;        // åˆå§‹åŒ–è¿æ¥æ•°ç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int max_count = 6;        // æœ€å¤§è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int current_count = 0;  // è®°å½•å½“å‰ä½¿ç”¨è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿æ¥æ±  ï¼ˆå­˜æ”¾æ‰€æœ‰çš„åˆå§‹åŒ–è¿æ¥ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private LinkedList&lt;Connection&gt; pool = new LinkedList&lt;Connection&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //1.  æ„é€ å‡½æ•°ä¸­ï¼Œåˆå§‹åŒ–è¿æ¥æ”¾å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MyPool() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆå§‹åŒ–è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i=0; i&lt;init_count; i++){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // è®°å½•å½“å‰è¿æ¥æ•°ç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_count++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // åˆ›å»ºåŸå§‹çš„è¿æ¥å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Connection con = createConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // æŠŠè¿æ¥åŠ å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pool.addLast(con);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //2. åˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Connection createConnection(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // åŸå§‹çš„ç›®æ ‡å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             Connection con = DriverManager.getConnection(&quot;jdbc:mysql:///jdbc_demo&quot;, &quot;root&quot;, &quot;root&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return con;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //3. è·å–è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Connection getConnection(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.1 åˆ¤æ–­è¿æ¥æ± ä¸­æ˜¯å¦æœ‰è¿æ¥, å¦‚æœæœ‰è¿æ¥ï¼Œå°±ç›´æ¥ä»è¿æ¥æ± å–å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (pool.size() &gt; 0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return pool.removeFirst();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.2 è¿æ¥æ± ä¸­æ²¡æœ‰è¿æ¥ï¼š åˆ¤æ–­ï¼Œå¦‚æœæ²¡æœ‰è¾¾åˆ°æœ€å¤§è¿æ¥æ•°ï¼Œåˆ›å»ºï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (current_count &lt; max_count) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // è®°å½•å½“å‰ä½¿ç”¨çš„è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_count++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // åˆ›å»ºè¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return createConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.3 å¦‚æœå½“å‰å·²ç»è¾¾åˆ°æœ€å¤§è¿æ¥æ•°ï¼ŒæŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new RuntimeException(&quot;å½“å‰è¿æ¥å·²ç»è¾¾åˆ°æœ€å¤§è¿æ¥æ•°ç›® ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //4. é‡Šæ”¾è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void realeaseConnection(Connection con) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 4.1 åˆ¤æ–­ï¼š æ± çš„æ•°ç›®å¦‚æœå°äºåˆå§‹åŒ–è¿æ¥ï¼Œå°±æ”¾å…¥æ± ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (pool.size() &lt; init_count){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pool.addLast(con);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 4.2 å…³é—­ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                current_count--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                con.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (SQLException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws SQLException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MyPool pool = new MyPool();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å½“å‰è¿æ¥: &quot; + pool.current_count);  // 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä½¿ç”¨è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con4 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con3 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con2 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con1 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // é‡Šæ”¾è¿æ¥, è¿æ¥æ”¾å›è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        pool.realeaseConnection(con1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å¸Œæœ›ï¼šå½“å…³é—­è¿æ¥çš„æ—¶å€™ï¼Œè¦æŠŠè¿æ¥æ”¾å…¥è¿æ¥æ± ï¼ã€å½“è°ƒç”¨Connectionæ¥å£çš„closeæ–¹æ³•æ—¶å€™ï¼Œå¸Œæœ›è§¦å‘pool.addLast(con);æ“ä½œã€‘æŠŠè¿æ¥æ”¾å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è§£å†³1ï¼šå®ç°Connectionæ¥å£ï¼Œé‡å†™closeæ–¹æ³•   connectionæ¥å£æ–¹æ³•å¤ªå¤šï¼Œéƒ½å®ç°å¤ªéº»çƒ¦ï¼Œæ”¾å¼ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è§£å†³2ï¼šåŠ¨æ€ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    con1.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å†è·å–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;è¿æ¥æ± ï¼š&quot; + pool.pool.size());      // 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;å½“å‰è¿æ¥: &quot; + pool.current_count);  // 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é‡‡ç”¨åŠ¨æ€çš„ä»£ç†å, æ”¹è¿›å¦‚ä¸‹:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  JDK åŠ¨æ€ä»£ç†  Object obj = Proxy.newProxyInstance(....)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  1.å‚æ•°1ï¼šClassLoader loader ,ç¡®å®šç±»åŠ è½½å™¨ã€‚ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºç±»ï¼Œéœ€è¦ç±»åŠ è½½åŠ è½½åˆ°å†…å­˜ã€‚ç±»åŠ è½½å™¨ä½œç”¨ï¼šclassæ–‡ä»¶ --&gt; Classå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      * ä¸€èˆ¬æƒ…å†µä½¿ç”¨éƒ½æ˜¯å½“å‰ç±»çš„ç±»åŠ è½½å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      * ç±»åŠ è½½å™¨è·å¾—æ–¹å¼ï¼šMyFactory.class.getClassLoader();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  2.å‚æ•°2ï¼šClass[] interfaces  ä»£ç†éœ€è¦å®ç°çš„æ¥å£ä»¬ï¼ˆå¯èƒ½æœ‰å¤šä¸ªï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      * æ–¹å¼1ï¼šuserService.getClass().getInterfaces()ã€æ­¤æ–¹å¼åªèƒ½åœ¨ä»£ç†å¯¹è±¡å’Œæ¥å£æ˜¯çˆ¶å­å…³ç³»æ—¶ä½¿ç”¨ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      * æ–¹å¼2ï¼šnew Class[]{UserService.class}ã€å½“è¢«ä»£ç†å¯¹è±¡å’Œå…¶å®ç°æ¥å£ä¹‹é—´æ˜¯éš”ä»£å…³ç³»æ—¶ï¼ˆå³ç¥–å­™å…³ç³»ï¼‰(å³:ä¸€ä¸ªä¸€ä¸ªåˆ—å‡ºæ¥å£)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  3.å‚æ•°3ï¼šInvocationHandler h è¯·æ±‚å¤„ç†ç±»ï¼Œä»£ç†ç±»æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œéœ€è¦è¯·æ±‚å¤„ç†ç±»æ¥å¤„ç†ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      * ä¸€èˆ¬é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»ï¼šnew InvocationHandler(){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      * å®ç°æ–¹æ³• invoke ï¼Œä»£ç†ç±»æ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¸€æ¬¡ï¼Œå°†è°ƒç”¨ä¸€æ¬¡invoke</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *          å‚æ•°1.1ï¼šObject proxy ,ä»£ç†å¯¹è±¡ï¼ˆå³ proxyServiceï¼Œä¸æ˜¯â€œä»£ç†ä¹‹å‰å¯¹è±¡â€ï¼‰ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *          å‚æ•°2.2ï¼šMethod method ï¼Œå½“å‰æ‰§è¡Œçš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *              * å½“å‰è°ƒç”¨æ–¹æ³•åï¼šmethod.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *              * æ‰§è¡Œç›®æ ‡ç±»æ–¹æ³•ï¼šObject obj = method.invoke(ä»£ç†ä¹‹å‰å¯¹è±¡ , args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *          å‚æ•°3.3ï¼šObject[] args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *              * å½“å‰æ–¹æ³•å®é™…å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyPool {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int init_count = 3;        // åˆå§‹åŒ–è¿æ¥æ•°ç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int max_count = 6;        // æœ€å¤§è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int current_count = 0;  // è®°å½•å½“å‰ä½¿ç”¨è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿æ¥æ±  ï¼ˆå­˜æ”¾æ‰€æœ‰çš„åˆå§‹åŒ–è¿æ¥ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private LinkedList&lt;Connection&gt; pool = new LinkedList&lt;Connection&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //1.  æ„é€ å‡½æ•°ä¸­ï¼Œåˆå§‹åŒ–è¿æ¥æ”¾å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MyPool() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆå§‹åŒ–è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i=0; i&lt;init_count; i++){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // è®°å½•å½“å‰è¿æ¥æ•°ç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_count++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // åˆ›å»ºåŸå§‹çš„è¿æ¥å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Connection con = createConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // æŠŠè¿æ¥åŠ å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pool.addLast(con);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //2. åˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Connection createConnection(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // åŸå§‹çš„ç›®æ ‡å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            final Connection con = DriverManager.getConnection(&quot;jdbc:mysql:///jdbc_demo&quot;, &quot;root&quot;, &quot;root&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            /**********å¯¹conå¯¹è±¡ä»£ç†**************/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // å¯¹conåˆ›å»ºå…¶ä»£ç†å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Connection proxy = (Connection) Proxy.newProxyInstance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    con.getClass().getClassLoader(),    // ç±»åŠ è½½å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //con.getClass().getInterfaces(),   // å½“ç›®æ ‡å¯¹è±¡æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»çš„æ—¶å€™ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    new Class[]{Connection.class},      // ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    new InvocationHandler() {            // å½“è°ƒç”¨conå¯¹è±¡æ–¹æ³•çš„æ—¶å€™ï¼Œ è‡ªåŠ¨è§¦å‘äº‹åŠ¡å¤„ç†å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        public Object invoke(Object proxy, Method method, Object[] args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            // æ–¹æ³•è¿”å›å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Object result = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            // å½“å‰æ‰§è¡Œçš„æ–¹æ³•çš„æ–¹æ³•å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            String methodName = method.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            // åˆ¤æ–­å½“æ‰§è¡Œäº†closeæ–¹æ³•çš„æ—¶å€™ï¼ŒæŠŠè¿æ¥æ”¾å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (&quot;close&quot;.equals(methodName)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                System.out.println(&quot;begin:å½“å‰æ‰§è¡Œcloseæ–¹æ³•å¼€å§‹ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                // è¿æ¥æ”¾å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                pool.addLast(con);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                System.out.println(&quot;end: å½“å‰è¿æ¥å·²ç»æ”¾å…¥è¿æ¥æ± äº†ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                // è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼Œæ³¨æ„è¿™é‡Œä¸æ˜¯ä»£ç†å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                result = method.invoke(con, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return proxy;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //3. è·å–è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Connection getConnection(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.1 åˆ¤æ–­è¿æ¥æ± ä¸­æ˜¯å¦æœ‰è¿æ¥, å¦‚æœæœ‰è¿æ¥ï¼Œå°±ç›´æ¥ä»è¿æ¥æ± å–å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (pool.size() &gt; 0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return pool.removeFirst();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.2 è¿æ¥æ± ä¸­æ²¡æœ‰è¿æ¥ï¼š åˆ¤æ–­ï¼Œå¦‚æœæ²¡æœ‰è¾¾åˆ°æœ€å¤§è¿æ¥æ•°ï¼Œåˆ›å»ºï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (current_count &lt; max_count) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // è®°å½•å½“å‰ä½¿ç”¨çš„è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_count++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // åˆ›å»ºè¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return createConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.3 å¦‚æœå½“å‰å·²ç»è¾¾åˆ°æœ€å¤§è¿æ¥æ•°ï¼ŒæŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new RuntimeException(&quot;å½“å‰è¿æ¥å·²ç»è¾¾åˆ°æœ€å¤§è¿æ¥æ•°ç›® ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //4. é‡Šæ”¾è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void realeaseConnection(Connection con) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 4.1 åˆ¤æ–­ï¼š æ± çš„æ•°ç›®å¦‚æœå°äºåˆå§‹åŒ–è¿æ¥ï¼Œå°±æ”¾å…¥æ± ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (pool.size() &lt; init_count){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pool.addLast(con);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 4.2 å…³é—­ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                current_count--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                con.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (SQLException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws SQLException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MyPool pool = new MyPool();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å½“å‰è¿æ¥: &quot; + pool.current_count);  // 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä½¿ç”¨è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con4 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con3 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con2 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connection con1 = pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // é‡Šæ”¾è¿æ¥, è¿æ¥æ”¾å›è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        pool.realeaseConnection(con1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * å¸Œæœ›ï¼šå½“å…³é—­è¿æ¥çš„æ—¶å€™ï¼Œè¦æŠŠè¿æ¥æ”¾å…¥è¿æ¥æ± ï¼ã€å½“è°ƒç”¨Connectionæ¥å£çš„closeæ–¹æ³•æ—¶å€™ï¼Œå¸Œæœ›è§¦å‘pool.addLast(con);æ“ä½œã€‘æŠŠè¿æ¥æ”¾å…¥è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * è§£å†³1ï¼šå®ç°Connectionæ¥å£ï¼Œé‡å†™closeæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * è§£å†³2ï¼šåŠ¨æ€ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        con1.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å†è·å–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¿æ¥æ± ï¼š&quot; + pool.pool.size());      // 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å½“å‰è¿æ¥: &quot; + pool.current_count);  // 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>è£…é¥°å™¨æ¨¡å¼</h1><p>å¸Œæœ›ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ è¡Œä¸º, ä½†æ˜¯åˆå¸Œæœ›è¿™ä¸ªæ”¹åŠ¨å¯¹è°ƒç”¨è€…é€æ˜</p><p>è¿™ä¸ªå’Œé€‚é…å™¨æ¨¡å¼ç›¸ä¼¼, ä½†æ˜¯æœ‰åŒºåˆ«: é€‚é…å™¨æ¨¡å¼çš„ç›®çš„åœ¨äºé€‚é…æ¥å£ï¼Œè£…é¥°å™¨æ¨¡å¼çš„ç›®çš„åœ¨äºåŠ¨æ€çš„æ·»åŠ åŠŸèƒ½ï¼Œä¸”å¯ä»¥å åŠ </p><p>ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ç»™ä¸€ä¸ªç±»æˆ–å¯¹è±¡å¢åŠ è¡Œä¸º(å’Œ adapter ç±»ä¼¼)ï¼š</p><ul><li><p>ç»§æ‰¿æœºåˆ¶ï¼Œä½¿ç”¨ç»§æ‰¿æœºåˆ¶æ˜¯ç»™ç°æœ‰ç±»æ·»åŠ åŠŸèƒ½çš„ä¸€ç§æœ‰æ•ˆé€”å¾„ï¼Œé€šè¿‡ç»§æ‰¿ä¸€ä¸ªç°æœ‰ç±»å¯ä»¥ä½¿å¾—å­ç±»åœ¨æ‹¥æœ‰è‡ªèº«æ–¹æ³•çš„åŒæ—¶è¿˜æ‹¥æœ‰çˆ¶ç±»çš„æ–¹æ³•ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•æ˜¯é™æ€çš„ï¼Œç”¨æˆ·ä¸èƒ½æ§åˆ¶å¢åŠ è¡Œä¸ºçš„æ–¹å¼å’Œæ—¶æœºã€‚</p></li><li><p>å…³è”æœºåˆ¶ï¼Œå³å°†ä¸€ä¸ªç±»çš„å¯¹è±¡åµŒå…¥å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç”±å¦ä¸€ä¸ªå¯¹è±¡æ¥å†³å®šæ˜¯å¦è°ƒç”¨åµŒå…¥å¯¹è±¡çš„è¡Œä¸ºä»¥ä¾¿æ‰©å±•è‡ªå·±çš„è¡Œä¸ºï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªåµŒå…¥çš„å¯¹è±¡ä¸ºè£…é¥°å™¨(Decorator)</p></li></ul><p>åœºæ™¯: å¸¦ wrapper çš„ç±», å¦‚ servlet ä¸­çš„ HttpServletRequestWrapper</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//å¾…è£…é¥°æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface Component {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void method();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//å…·ä½“å¾…è£…é¥°ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ConcreteComponent implements Component{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;åŸæ¥çš„æ–¹æ³•&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æŠ½è±¡è£…é¥°å™¨çˆ¶ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public abstract class Decorator implements Component{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected Component component;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Decorator(Component component) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.component = component;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        component.method();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//å…·ä½“è£…é¥°å™¨ç±»A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ConcreteDecoratorA extends Decorator{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ConcreteDecoratorA(Component component) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(component);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void methodA(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¢«è£…é¥°å™¨Aæ‰©å±•çš„åŠŸèƒ½&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // é‡å†™çˆ¶ç±»æ–¹æ³•, è¿›è¡Œå¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;é’ˆå¯¹è¯¥æ–¹æ³•åŠ ä¸€å±‚AåŒ…è£…&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.method();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;AåŒ…è£…ç»“æŸ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//å…·ä½“è£…é¥°å™¨ç±»B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ConcreteDecoratorB extends Decorator{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ConcreteDecoratorB(Component component) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(component);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void methodB(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¢«è£…é¥°å™¨Bæ‰©å±•çš„åŠŸèƒ½&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void method(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;é’ˆå¯¹è¯¥æ–¹æ³•åŠ ä¸€å±‚BåŒ…è£…&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.method();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;BåŒ…è£…ç»“æŸ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>é€‚é…å™¨æ¨¡å¼</h1><p>å°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œé€‚é…å™¨æ¨¡å¼ä½¿æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œ</p><p>java.util.Arrays#asList()
java.util.Collections#list()</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// å¾…é€‚é…ç±», å·²å­˜åœ¨çš„ã€å…·æœ‰ç‰¹æ®ŠåŠŸèƒ½ã€å¸Œæœ›è¢«é‡ç”¨, ä½†ä¸ç¬¦åˆæˆ‘ä»¬æ—¢æœ‰çš„æ ‡å‡†æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Adaptee {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void specificRequest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¢«é€‚é…ç±»å…·æœ‰ ç‰¹æ®ŠåŠŸèƒ½...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç›®æ ‡æ¥å£ï¼Œæˆ–ç§°ä¸ºæ ‡å‡†æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Target {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void request();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å…·ä½“ç›®æ ‡ç±»ï¼Œä½†æ˜¯åªæä¾›æ™®é€šåŠŸèƒ½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ConcreteTarget implements Target {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void request() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;æ™®é€šç±» å…·æœ‰ æ™®é€šåŠŸèƒ½...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// é€‚é…å™¨ç±»ï¼Œç»§æ‰¿äº†è¢«é€‚é…ç±»ï¼ŒåŒæ—¶å®ç°æ ‡å‡†æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Adapter extends Adaptee implements Target{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void request() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.specificRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ç±»public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä½¿ç”¨æ™®é€šåŠŸèƒ½ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Target concreteTarget = new ConcreteTarget();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        concreteTarget.request();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä½¿ç”¨ç‰¹æ®ŠåŠŸèƒ½ç±»ï¼Œå³é€‚é…ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Target adapter = new Adapter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter.request();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹è±¡é€‚é…å™¨ ---------------- ä½¿ç”¨ç»„åˆ(æ¨è)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// é€‚é…å™¨ç±»ï¼Œç›´æ¥å…³è”è¢«é€‚é…ç±»ï¼ŒåŒæ—¶å®ç°æ ‡å‡†æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Adapter implements Target{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç›´æ¥å…³è”è¢«é€‚é…ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Adaptee adaptee;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥å…·ä½“éœ€è¦é€‚é…çš„è¢«é€‚é…ç±»å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Adapter (Adaptee adaptee) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.adaptee = adaptee;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void request() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è¿™é‡Œæ˜¯ä½¿ç”¨å§”æ‰˜çš„æ–¹å¼å®Œæˆç‰¹æ®ŠåŠŸèƒ½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.adaptee.specificRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä½¿ç”¨æ™®é€šåŠŸèƒ½ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Target concreteTarget = new ConcreteTarget();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        concreteTarget.request();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä½¿ç”¨ç‰¹æ®ŠåŠŸèƒ½ç±»ï¼Œå³é€‚é…ç±»ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªè¢«é€‚é…ç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Target adapter = new Adapter(new Adaptee());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adapter.request();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>è´£ä»»é“¾æ¨¡å¼</h1><p>è´£ä»»é“¾é€šå¸¸éœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œç„¶åè°ƒç”¨æ–¹åªéœ€è¦è°ƒç”¨å¤´éƒ¨èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼Œåé¢ä¼šè‡ªåŠ¨æµè½¬ä¸‹å»ã€‚</p><p>å…¸å‹å¦‚ æµç¨‹å®¡æ‰¹</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¿¡æ¯å¤„ç†æ¥å£, é“¾æ¡ä¸Šçš„æ¯ä¸ªè¿‡æ»¤å™¨éƒ½å®ç°å®ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ5:45:12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å¤„ç†ä¿¡æ¯æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param rqt è¾“å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String doFilter(String rqt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/***</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * èŒè´£é“¾, é¢å‘å¤„ç†èŠ‚ç‚¹æ¥å£ç¼–ç¨‹, å’Œå…·ä½“çš„å¤„ç†èŠ‚ç‚¹æ²¡æœ‰å…³ç³»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ6:24:56</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FilterChain implements IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;IFilter&gt; filterChain =  new ArrayList&lt;IFilter&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String doFilter(String rqt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for(IFilter f: filterChain) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            rqt = f.doFilter(rqt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rqt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ·»åŠ è¿‡æ»¤èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FilterChain addFilter(IFilter filter) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.filterChain.add(filter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¿¡æ¯å¤„ç†å™¨, å°è£…äº†èŒè´£é“¾, è¿™é‡Œç›¸å½“ä¸ä¸€ä¸ªå¤–è§‚æ¨¡å¼, å°è£…äº†å†…éƒ¨ç»†èŠ‚,åªæä¾›ç»™å¤–éƒ¨ä¸€ä¸ªprocess()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  å®Œå…¨å¯ä»¥çœç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ6:01:33</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageProcessor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å°è£…çš„èŒè´£é“¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private FilterChain fc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MessageProcessor(FilterChain fc) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.fc = fc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String process(String rqt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return fc.doFilter(rqt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * å…·ä½“çš„å¤„ç†èŠ‚ç‚¹, å°†&lt;&gt;æ›¿æ¢ä¸º[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ6:11:58</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HtmlFilter implements IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String doFilter(String rqt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String replace = rqt.replaceAll(&quot;&lt;&quot;, &quot;[&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .replaceAll(&quot;&gt;&quot;, &quot;]&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return replace;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * å…·ä½“çš„å¤„ç†èŠ‚ç‚¹, æ•æ„Ÿè¯è¿‡æ»¤ å°†xxxæ¢ä¸ºyyy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ6:15:37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SensitiveFilter implements IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String doFilter(String rqt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rqt.replaceAll(&quot;xxx&quot;, &quot;yyy&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç®€å•èŒè´£é“¾æ¨¡å¼client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ6:17:51</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String str = &quot;hhh, xxx :) &lt;script&gt;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterChain fc = new FilterChain().addFilter(new HtmlFilter()).addFilter(new SensitiveFilter());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MessageProcessor processor = new MessageProcessor(fc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String rst = processor.process(str);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(rst);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>===================å¤æ‚ï¼ˆè¯·æ±‚å“åº”æœ‰åºï¼‰è´£ä»»é“¾</p><p>ç±»æ¯” servlet ä¸­çš„ filter</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ8:09:54</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Request {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String content;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ8:10:24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Response {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String content;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * èŠ‚ç‚¹æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ8:08:13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void doFilter(Request rqt, Response rsp, FilterChain chain);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * filter chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ8:20:58</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FilterChain implements IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * èŠ‚ç‚¹æ‰§è¡Œç´¢å¼•, åˆå§‹ä¸º0; è¡¨ç¤ºå½“å‰æ‰§è¡Œåˆ°å“ªä¸ªfilteräº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int currentFilterIndex = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è¿‡æ»¤èŠ‚ç‚¹å®¹å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;IFilter&gt; filters = new ArrayList&lt;IFilter&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(Request rqt, Response rsp, FilterChain chain) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å½“ chain ä¸­çš„ filter è¢«éå†æ‰§è¡Œå®Œ, è·³å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (this.filters.size() == currentFilterIndex) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IFilter filter = filters.get(currentFilterIndex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // å½“å‰èŠ‚ç‚¹è·å–åˆ°å, é©¬ä¸Šç´¢å¼•ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ª, ä¸ç„¶ä¼šå¾ªç¯è°ƒç”¨, ä¸€ç›´è°ƒç”¨ç¬¬ä¸€ä¸ªfilter, ç›´åˆ°ç³»ç»Ÿå´©æºƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            currentFilterIndex++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            filter.doFilter(rqt, rsp, chain);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FilterChain addFilter(IFilter filter) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.filters.add(filter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * html filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ8:32:39</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HtmlFilter implements IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(Request rqt, Response rsp, FilterChain chain) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rqt.setContent(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                rqt.getContent().replace(&quot;&lt;&quot;, &quot;[&quot;).replace(&quot;&gt;&quot;, &quot;]&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;HtmlFilter: è¯·æ±‚è¿‡ç¨‹ä¸­è¢«å¤„ç†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chain.doFilter(rqt, rsp, chain);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;HtmlFilter: è¿”å›è¿‡ç¨‹ä¸­è¢«å¤„ç†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * sensitive filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ8:38:58</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SensitiveFilter implements IFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(Request rqt, Response rsp, FilterChain chain) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rqt.setContent(rqt.getContent().replaceAll(&quot;xxx&quot;, &quot;yyy&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;SensitiveFilter: è¯·æ±‚è¿‡ç¨‹è¢«å¤„ç†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chain.doFilter(rqt, rsp, chain);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;SensitiveFilter: è¿”å›è¿‡ç¨‹è¢«å¤„ç†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ26æ—¥ ä¸‹åˆ8:43:43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String str = &quot;hhh, xxx :) &lt;script&gt;, &quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Request rqt = new Request();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rqt.setContent(str);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Response rsp = new Response();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rsp.setContent(&quot;response-content&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterChain fc = new FilterChain().addFilter(new HtmlFilter()).addFilter(new SensitiveFilter());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fc.doFilter(rqt, rsp, fc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(rsp.getContent());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>å•ä¾‹æ¨¡å¼</h1><p>æŸä¸ªå¯¹è±¡å…¨å±€åªéœ€è¦ä¸€ä¸ªå®ä¾‹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚å®ƒçš„ä¼˜ç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼š</p><ul><li>å®ƒèƒ½å¤Ÿé¿å…å¯¹è±¡é‡å¤åˆ›å»ºï¼ŒèŠ‚çº¦ç©ºé—´å¹¶æå‡æ•ˆç‡</li><li>é¿å…ç”±äºæ“ä½œä¸åŒå®ä¾‹å¯¼è‡´çš„é€»è¾‘é”™è¯¯</li></ul><p>çº¿ç¨‹å®‰å…¨çš„å®ç°:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * å¸¦æœ‰åŒé‡åˆ¤æ–­çš„å•ä¾‹æ¨¡å¼ ---- ä¸ç›´è§‚, ä¸æ¨è</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ25æ—¥ ä¸‹åˆ4:48:41</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SyncSingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //ä¸€ä¸ªé™æ€çš„å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static volatile SyncSingleton instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //ç§æœ‰åŒ–æ„é€ å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SyncSingleton() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //ç»™å‡ºä¸€ä¸ªå…¬å…±çš„é™æ€æ–¹æ³•è¿”å›ä¸€ä¸ªå•ä¸€å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static SyncSingleton getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (instance == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //è¿™é‡Œç¬¬äºŒé‡åˆ¤æ–­ï¼šABä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ç¬¬ä¸€ä¸ªåˆ¤æ–­å†…éƒ¨ï¼Œæ­¤æ—¶Aå½“å…ˆæ‹¿åˆ°é”è¿›å…¥ç¬¬äºŒåˆ¤æ–­ï¼Œåˆ›å»ºäº†å¯¹è±¡ï¼ŒBæ‹¿åˆ°é”åä¼šå†æ¬¡è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ­¤å¤„ä¸åˆ¤æ–­ï¼Œåˆ™ä¼šåˆ›å»ºç¬¬äºŒä¸ªå¯¹è±¡ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synchronized (SyncSingleton.class) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (instance == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    instance = new SyncSingleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">///////////////////////// æ¨èè¿™ç§å†™æ³•: å€ŸåŠ© jvm çš„ç‰¹æ€§å¸®åŠ©å®ç° singleton ////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æ›´å®‰å…¨, æ›´ç®€å•çš„å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *é¦–å…ˆæ¥è¯´ä¸€ä¸‹ï¼Œè¿™ç§æ–¹å¼ä¸ºä½•ä¼šé¿å…äº†ä¸Šé¢è«åçš„é”™è¯¯ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *ä¸»è¦æ˜¯å› ä¸ºä¸€ä¸ªç±»çš„é™æ€å±æ€§åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»æ—¶åˆå§‹åŒ–ï¼Œè¿™æ˜¯JVMå¸®æˆ‘ä»¬ä¿è¯çš„ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *æ‰€ä»¥æˆ‘ä»¬æ— éœ€æ‹…å¿ƒå¹¶å‘è®¿é—®çš„é—®é¢˜ã€‚æ‰€ä»¥åœ¨åˆå§‹åŒ–è¿›è¡Œä¸€åŠçš„æ—¶å€™ï¼Œåˆ«çš„çº¿ç¨‹æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œå› ä¸ºJVMä¼šå¸®æˆ‘ä»¬å¼ºè¡ŒåŒæ­¥è¿™ä¸ªè¿‡ç¨‹ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *å¦å¤–ç”±äºé™æ€å˜é‡åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œæ‰€ä»¥singletonä»ç„¶æ˜¯å•ä¾‹çš„ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2018å¹´1æœˆ25æ—¥ ä¸‹åˆ5:02:23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Singleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Singleton(){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Singleton getInstance(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return SingletonInstance.instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ç±»çš„é™æ€æˆå‘˜åªåŠ è½½ä¸€æ¬¡ï¼Œè¿™ä¿è¯äº†åªæœ‰ä¸€ä¸ªå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class SingletonInstance{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static Singleton instance = new Singleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>å‘½ä»¤æ¨¡å¼</h1><h1>é—¨é¢æ¨¡å¼</h1><h1>å»ºé€ è€…æ¨¡å¼</h1><h1>æµæ°´çº¿æ¨¡å¼</h1><p><a href="https://juejin.cn/post/7070338942184194084" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7070338942184194084</a></p><p><a href="https://www.baiyp.ren/JAVA%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-10%E7%AE%A1%E9%81%93%E6%A8%A1%E5%BC%8F.html" target="_blank" rel="noopener noreferrer">https://www.baiyp.ren/JAVA%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-10%E7%AE%A1%E9%81%93%E6%A8%A1%E5%BC%8F.html</a></p><p><a href="http://www.uml.org.cn/j2ee/201909271.asp" target="_blank" rel="noopener noreferrer">http://www.uml.org.cn/j2ee/201909271.asp</a></p><p><a href="https://blog.csdn.net/huzhiqiangCSDN/article/details/56846268" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/huzhiqiangCSDN/article/details/56846268</a></p><h1>çŠ¶æ€æ¨¡å¼ state machine</h1></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/design-pattern-note.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/data-structure-and-algorithm"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Data Structure and Algorithm</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/dev-resources"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">å¼€å‘è€…èµ„æº</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#open-close-principle" class="table-of-contents__link toc-highlight">open close principle</a></li><li><a href="#single-responsibility-principle" class="table-of-contents__link toc-highlight">single responsibility principle</a></li><li><a href="#interface-separation-principle" class="table-of-contents__link toc-highlight">interface separation principle</a></li><li><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="table-of-contents__link toc-highlight">é‡Œæ°æ›¿æ¢åŸåˆ™</a></li><li><a href="#dependence-inversion-principle" class="table-of-contents__link toc-highlight">dependence inversion principle</a></li><li><a href="#least-knowledge-principle" class="table-of-contents__link toc-highlight">Least Knowledge Principle</a></li><li><a href="#è®¾è®¡æ¨¡å¼æ€»ç»“" class="table-of-contents__link toc-highlight">è®¾è®¡æ¨¡å¼æ€»ç»“</a></li><li><a href="#spring-ä¸­çš„è®¾è®¡æ¨¡å¼" class="table-of-contents__link toc-highlight">spring ä¸­çš„è®¾è®¡æ¨¡å¼</a></li><li><a href="#ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼" class="table-of-contents__link toc-highlight">ä¸è¦è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼</a></li><li><a href="#å·¥å‚æ–¹æ³•" class="table-of-contents__link toc-highlight">å·¥å‚æ–¹æ³•</a></li><li><a href="#æŠ½è±¡å·¥å‚" class="table-of-contents__link toc-highlight">æŠ½è±¡å·¥å‚</a></li><li><a href="#è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰" class="table-of-contents__link toc-highlight">è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰</a></li><li><a href="#jdk-ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼" class="table-of-contents__link toc-highlight">jdk ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼</a><ul><li><a href="#jdk-ä¸­çš„-api" class="table-of-contents__link toc-highlight">jdk ä¸­çš„ api</a></li><li><a href="#jdk-è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹" class="table-of-contents__link toc-highlight">jdk è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹</a></li></ul></li><li><a href="#äº‹ä»¶é©±åŠ¨æ¨¡å‹" class="table-of-contents__link toc-highlight">äº‹ä»¶é©±åŠ¨æ¨¡å‹</a></li><li><a href="#é™æ€ä»£ç†" class="table-of-contents__link toc-highlight">é™æ€ä»£ç†</a></li><li><a href="#åŠ¨æ€ä»£ç†" class="table-of-contents__link toc-highlight">åŠ¨æ€ä»£ç†</a><ul><li><a href="#çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹" class="table-of-contents__link toc-highlight">çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± " class="table-of-contents__link toc-highlight">è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± </a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e1853de5.js"></script>
<script src="/assets/js/main.c56d5ac7.js"></script>
</body>
</html>