"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6037],{3905:function(t,e,a){a.d(e,{Zo:function(){return m},kt:function(){return c}});var l=a(67294);function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,l)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(t,e){if(null==t)return{};var a,l,p=function(t,e){if(null==t)return{};var a,l,p={},n=Object.keys(t);for(l=0;l<n.length;l++)a=n[l],e.indexOf(a)>=0||(p[a]=t[a]);return p}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(l=0;l<n.length;l++)a=n[l],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(p[a]=t[a])}return p}var k=l.createContext({}),u=function(t){var e=l.useContext(k),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=u(t.components);return l.createElement(k.Provider,{value:e},t.children)},N={inlineCode:"code",wrapper:function(t){var e=t.children;return l.createElement(l.Fragment,{},e)}},o=l.forwardRef((function(t,e){var a=t.components,p=t.mdxType,n=t.originalType,k=t.parentName,m=r(t,["components","mdxType","originalType","parentName"]),o=u(a),c=p,d=o["".concat(k,".").concat(c)]||o[c]||N[c]||n;return a?l.createElement(d,i(i({ref:e},m),{},{components:a})):l.createElement(d,i({ref:e},m))}));function c(t,e){var a=arguments,p=e&&e.mdxType;if("string"==typeof t||p){var n=a.length,i=new Array(n);i[0]=o;var r={};for(var k in e)hasOwnProperty.call(e,k)&&(r[k]=e[k]);r.originalType=t,r.mdxType="string"==typeof t?t:p,i[1]=r;for(var u=2;u<n;u++)i[u]=a[u];return l.createElement.apply(null,i)}return l.createElement.apply(null,a)}o.displayName="MDXCreateElement"},4889:function(t,e,a){a.r(e),a.d(e,{assets:function(){return m},contentTitle:function(){return k},default:function(){return c},frontMatter:function(){return r},metadata:function(){return u},toc:function(){return N}});var l=a(83117),p=a(80102),n=(a(67294),a(3905)),i=["components"],r={title:"TCP IP, p2p",date:new Date("2017-06-21T11:15:06.000Z"),tags:["network"],toc_min_heading_level:2,toc_max_heading_level:5},k=void 0,u={unversionedId:"tcp-ip-note-p2p",id:"tcp-ip-note-p2p",title:"TCP IP, p2p",description:"https://github.com/isno/theByteBook",source:"@site/docs/tcp-ip-note-p2p.md",sourceDirName:".",slug:"/tcp-ip-note-p2p",permalink:"/docs/tcp-ip-note-p2p",draft:!1,tags:[{label:"network",permalink:"/docs/tags/network"}],version:"current",frontMatter:{title:"TCP IP, p2p",date:"2017-06-21T11:15:06.000Z",tags:["network"],toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"Task Schedule",permalink:"/docs/task-schedule-note"},next:{title:"Tomcat Jetty Nginx \u7b49 web \u5bb9\u5668",permalink:"/docs/tomcat-jetty-nginx"}},m={},N=[{value:"1. \u7269\u7406\u5c42(physical-layer)",id:"1-\u7269\u7406\u5c42physical-layer",level:2},{value:"2. \u6570\u636e\u94fe\u8def\u5c42(data-link-layer \u6216\u8005 mac layer)",id:"2-\u6570\u636e\u94fe\u8def\u5c42data-link-layer-\u6216\u8005-mac-layer",level:2},{value:"2.1. mac \u548c mac\u5730\u5740",id:"21-mac-\u548c-mac\u5730\u5740",level:3},{value:"2.2. mac \u5c42\u6570\u636e\u5305\u683c\u5f0f",id:"22-mac-\u5c42\u6570\u636e\u5305\u683c\u5f0f",level:3},{value:"2.3. ARP \u534f\u8bae",id:"23-arp-\u534f\u8bae",level:3},{value:"2.3.1. \u89e3\u51b3\u73af\u8def\u95ee\u9898(\u5e7f\u64ad\u98ce\u66b4) stp \u534f\u8bae",id:"231-\u89e3\u51b3\u73af\u8def\u95ee\u9898\u5e7f\u64ad\u98ce\u66b4-stp-\u534f\u8bae",level:4},{value:"2.3.2. \u7f51\u7edc\u9694\u79bb",id:"232-\u7f51\u7edc\u9694\u79bb",level:4},{value:"2.4. \u4e24\u53f0\u673a\u5668\u4e0d\u901a",id:"24-\u4e24\u53f0\u673a\u5668\u4e0d\u901a",level:3},{value:"3. \u7f51\u7edc\u5c42(network-layer \u6216\u8005 ip \u5c42)",id:"3-\u7f51\u7edc\u5c42network-layer-\u6216\u8005-ip-\u5c42",level:2},{value:"3.1. ip \u5730\u5740",id:"31-ip-\u5730\u5740",level:3},{value:"3.1.1. \u67e5\u8be2 IP\u5730\u5740",id:"311-\u67e5\u8be2-ip\u5730\u5740",level:4},{value:"3.1.2. \u624b\u52a8\u914d\u7f6e ip \u5730\u5740",id:"312-\u624b\u52a8\u914d\u7f6e-ip-\u5730\u5740",level:4},{value:"3.1.3. \u52a8\u6001\u5206\u914d\u5730\u5740 DHCP",id:"313-\u52a8\u6001\u5206\u914d\u5730\u5740-dhcp",level:4},{value:"3.2. ping \u539f\u7406 ICMP\u534f\u8bae",id:"32-ping-\u539f\u7406-icmp\u534f\u8bae",level:3},{value:"3.3. \u8def\u7531\u5668\u4f5c\u4e3a\u7f51\u5173",id:"33-\u8def\u7531\u5668\u4f5c\u4e3a\u7f51\u5173",level:3},{value:"3.4. nat \u7f51\u7edc\u5730\u5740\u8f6c\u6362",id:"34-nat-\u7f51\u7edc\u5730\u5740\u8f6c\u6362",level:3},{value:"3.4.1. nat \u5206\u7c7b",id:"341-nat-\u5206\u7c7b",level:4},{value:"4. \u4f20\u8f93\u5c42(transport-layer)",id:"4-\u4f20\u8f93\u5c42transport-layer",level:2},{value:"4.1. udp\u534f\u8bae",id:"41-udp\u534f\u8bae",level:3},{value:"4.2. tcp\u534f\u8bae",id:"42-tcp\u534f\u8bae",level:3},{value:"4.2.1. \u57fa\u672c\u7279\u70b9",id:"421-\u57fa\u672c\u7279\u70b9",level:4},{value:"4.2.2. \u4e09\u6b21\u63e1\u624b",id:"422-\u4e09\u6b21\u63e1\u624b",level:4},{value:"4.2.3. \u56db\u6b21\u6325\u624b",id:"423-\u56db\u6b21\u6325\u624b",level:4},{value:"4.2.4. TCP\u5305\u7684\u5e8f\u53f7\u95ee\u9898",id:"424-tcp\u5305\u7684\u5e8f\u53f7\u95ee\u9898",level:4},{value:"4.3. tcp\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u4f20\u8f93",id:"43-tcp\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u4f20\u8f93",level:3},{value:"5. \u5e94\u7528\u5c42(application-layer)",id:"5-\u5e94\u7528\u5c42application-layer",level:2},{value:"6. \u5165\u95e8",id:"6-\u5165\u95e8",level:2},{value:"6.1. \u4e94\u5c42\u6a21\u578b",id:"61-\u4e94\u5c42\u6a21\u578b",level:3},{value:"6.2. \u4e00\u6b21\u8bf7\u6c42\u6d89\u53ca\u5230\u7684\u7f51\u7edc\u534f\u8bae",id:"62-\u4e00\u6b21\u8bf7\u6c42\u6d89\u53ca\u5230\u7684\u7f51\u7edc\u534f\u8bae",level:3},{value:"6.3. \u6570\u636e\u5305\u7ed3\u6784",id:"63-\u6570\u636e\u5305\u7ed3\u6784",level:3},{value:"p2p",id:"p2p",level:2}],o={toc:N};function c(t){var e=t.components,r=(0,p.Z)(t,i);return(0,n.kt)("wrapper",(0,l.Z)({},o,r,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/isno/theByteBook"},"https://github.com/isno/theByteBook")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://iximiuz.com/en/posts/computer-networking-101/"},"https://iximiuz.com/en/posts/computer-networking-101/")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"http://c.biancheng.net/tcp_ip/"},"http://c.biancheng.net/tcp_ip/"),"\n",(0,n.kt)("a",{parentName:"p",href:"https://coolshell.cn/articles/11564.html"},"https://coolshell.cn/articles/11564.html"),"\n",(0,n.kt)("a",{parentName:"p",href:"http://www.tcpipguide.com/"},"http://www.tcpipguide.com/"),"\n",(0,n.kt)("a",{parentName:"p",href:"https://www.lanqiao.cn/courses/98"},"https://www.lanqiao.cn/courses/98"),"\n\u7ed3\u5408WireShark (",(0,n.kt)("a",{parentName:"p",href:"https://www.wireshark.org/"},"https://www.wireshark.org/"),") \u6216\u8005 tcpdump \u8fb9\u770b\u8fb9\u6293\u5305. \u63a8\u8350\u4e66\u76ee\u300aWireShark \u6570\u636e\u5305\u5206\u6790\u5b9e\u6218\u300b\u3001\u300aTCP/IP\u8be6\u89e3 \u5377\u4e00\u300b\n\u8c22\u5e0c\u4ec1\u6559\u6388\u7684\u300a\u8ba1\u7b97\u673a\u7f51\u7edc\u300b\nTODO"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#1-%E7%89%A9%E7%90%86%E5%B1%82physical-layer"},"1. \u7269\u7406\u5c42(physical-layer)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#2-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82data-link-layer-%E6%88%96%E8%80%85-mac-layer"},"2. \u6570\u636e\u94fe\u8def\u5c42(data-link-layer \u6216\u8005 mac layer)"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#21-mac-%E5%92%8C-mac%E5%9C%B0%E5%9D%80"},"2.1. mac \u548c mac\u5730\u5740")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#22-mac-%E5%B1%82%E6%95%B0%E6%8D%AE%E5%8C%85%E6%A0%BC%E5%BC%8F"},"2.2. mac \u5c42\u6570\u636e\u5305\u683c\u5f0f")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#23-arp-%E5%8D%8F%E8%AE%AE"},"2.3. ARP \u534f\u8bae"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#231-%E8%A7%A3%E5%86%B3%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98%E5%B9%BF%E6%92%AD%E9%A3%8E%E6%9A%B4-stp-%E5%8D%8F%E8%AE%AE"},"2.3.1. \u89e3\u51b3\u73af\u8def\u95ee\u9898(\u5e7f\u64ad\u98ce\u66b4) stp \u534f\u8bae")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#232-%E7%BD%91%E7%BB%9C%E9%9A%94%E7%A6%BB"},"2.3.2. \u7f51\u7edc\u9694\u79bb")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#24-%E4%B8%A4%E5%8F%B0%E6%9C%BA%E5%99%A8%E4%B8%8D%E9%80%9A"},"2.4. \u4e24\u53f0\u673a\u5668\u4e0d\u901a")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#3-%E7%BD%91%E7%BB%9C%E5%B1%82network-layer-%E6%88%96%E8%80%85-ip-%E5%B1%82"},"3. \u7f51\u7edc\u5c42(network-layer \u6216\u8005 ip \u5c42)"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#31-ip-%E5%9C%B0%E5%9D%80"},"3.1. ip \u5730\u5740"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#311-%E6%9F%A5%E8%AF%A2-ip%E5%9C%B0%E5%9D%80"},"3.1.1. \u67e5\u8be2 IP\u5730\u5740")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#312-%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-ip-%E5%9C%B0%E5%9D%80"},"3.1.2. \u624b\u52a8\u914d\u7f6e ip \u5730\u5740")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#313-%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D%E5%9C%B0%E5%9D%80-dhcp"},"3.1.3. \u52a8\u6001\u5206\u914d\u5730\u5740 DHCP")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#32-ping-%E5%8E%9F%E7%90%86-icmp%E5%8D%8F%E8%AE%AE"},"3.2. ping \u539f\u7406 ICMP\u534f\u8bae")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#33-%E8%B7%AF%E7%94%B1%E5%99%A8%E4%BD%9C%E4%B8%BA%E7%BD%91%E5%85%B3"},"3.3. \u8def\u7531\u5668\u4f5c\u4e3a\u7f51\u5173")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#34-nat-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2"},"3.4. nat \u7f51\u7edc\u5730\u5740\u8f6c\u6362"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#341-nat-%E5%88%86%E7%B1%BB"},"3.4.1. nat \u5206\u7c7b")))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#4-%E4%BC%A0%E8%BE%93%E5%B1%82transport-layer"},"4. \u4f20\u8f93\u5c42(transport-layer)"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#41-udp%E5%8D%8F%E8%AE%AE"},"4.1. udp\u534f\u8bae")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#42-tcp%E5%8D%8F%E8%AE%AE"},"4.2. tcp\u534f\u8bae"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#421-%E5%9F%BA%E6%9C%AC%E7%89%B9%E7%82%B9"},"4.2.1. \u57fa\u672c\u7279\u70b9")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#422-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"},"4.2.2. \u4e09\u6b21\u63e1\u624b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#423-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"},"4.2.3. \u56db\u6b21\u6325\u624b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#424-tcp%E5%8C%85%E7%9A%84%E5%BA%8F%E5%8F%B7%E9%97%AE%E9%A2%98"},"4.2.4. TCP\u5305\u7684\u5e8f\u53f7\u95ee\u9898")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#43-tcp%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"},"4.3. tcp\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u4f20\u8f93")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#5-%E5%BA%94%E7%94%A8%E5%B1%82application-layer"},"5. \u5e94\u7528\u5c42(application-layer)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#6-%E5%85%A5%E9%97%A8"},"6. \u5165\u95e8"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#61-%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B"},"6.1. \u4e94\u5c42\u6a21\u578b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#62-%E4%B8%80%E6%AC%A1%E8%AF%B7%E6%B1%82%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE"},"6.2. \u4e00\u6b21\u8bf7\u6c42\u6d89\u53ca\u5230\u7684\u7f51\u7edc\u534f\u8bae")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#63-%E6%95%B0%E6%8D%AE%E5%8C%85%E7%BB%93%E6%9E%84"},"6.3. \u6570\u636e\u5305\u7ed3\u6784")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#p2p"},"p2p"))),(0,n.kt)("h2",{id:"1-\u7269\u7406\u5c42physical-layer"},"1. \u7269\u7406\u5c42(physical-layer)"),(0,n.kt)("p",null,"\u7f51\u7ebf, \u7535\u78c1\u4fe1\u53f7... \u901a\u8fc7\u7535\u4fe1\u53f7\u4f20\u8f93 0 1"),(0,n.kt)("p",null,"\u65e9\u4e9b\u5e74, \u7535\u8111\u8fde\u7535\u8111\u554a\uff0c\u8fd8\u662f\u7535\u8111\u8fde\u7f51\u53e3\u7528\u7684\u7f51\u7ebf\u4e0d\u540c; "),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u7535\u8111\u8fde\u7535\u8111\u3002\u8fd9\u79cd\u65b9\u5f0f\u5c31\u662f\u4e00\u6839\u7f51\u7ebf\uff0c\u6709\u4e24\u4e2a\u5934\u3002\u4e00\u5934\u63d2\u5728\u4e00\u53f0\u7535\u8111\u7684\u7f51\u5361\u4e0a\uff0c\u53e6\u4e00\u5934\u63d2\u5728\u53e6\u4e00\u53f0\u7535\u8111\u7684\u7f51\u5361\u4e0a\u3002\u4f46\u662f\u5728\u5f53\u65f6\uff0c\u666e\u901a\u7684\u7f51\u7ebf\u8fd9\u6837\u662f\u901a\u4e0d\u4e86\u7684\uff0c\u6240\u4ee5\u6c34\u6676\u5934\u8981\u505a\u4ea4\u53c9\u7ebf\uff0c\u7528\u7684\u5c31\u662f\u6240\u8c13\u76841\uff0d3\u30012\uff0d6\u4ea4\u53c9\u63a5\u6cd5: \u6c34\u6676\u5934\u7684\u7b2c1\u30012\u548c\u7b2c3\u30016\u811a\uff0c\u5b83\u4eec\u5206\u522b\u8d77\u7740\u6536\u3001\u53d1\u4fe1\u53f7\u7684\u4f5c\u7528\u3002\u5c06\u4e00\u7aef\u76841\u53f7\u548c3\u53f7\u7ebf\u30012\u53f7\u548c6\u53f7\u7ebf\u4e92\u6362\u4e00\u4e0b\u4f4d\u7f6e\uff0c\u5c31\u80fd\u591f\u5728\u7269\u7406\u5c42\u5b9e\u73b0\u4e00\u7aef\u53d1\u9001\u7684\u4fe1\u53f7\uff0c\u53e6\u4e00\u7aef\u80fd\u6536\u5230\n\u9664\u4e86\u7f51\u7ebf\u8981\u4ea4\u53c9\uff0c\u8fd8\u9700\u8981\u914d\u7f6e\u8fd9\u4e24\u53f0\u7535\u8111\u7684IP\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u548c\u9ed8\u8ba4\u7f51\u5173, \u53ef\u4ee5\u4e00\u4e2a\u662f192.168.0.1/24\uff0c\u53e6\u4e00\u4e2a\u662f192.168.0.2/24")),(0,n.kt)("p",null,"\u591a\u53f0\u673a\u5668\u4e92\u8054: "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u96c6\u7ebf\u5668(hub, \u6ca1\u6709\u5927\u8111\uff0c\u5b83\u5b8c\u5168\u5728\u7269\u7406\u5c42\u5de5\u4f5c\u3002\u5b83\u4f1a\u5c06\u81ea\u5df1\u6536\u5230\u7684\u6bcf\u4e00\u4e2a\u5b57\u8282\uff0c\u90fd\u590d\u5236\u5230\u5176\u4ed6\u7aef\u53e3\u4e0a\u53bb), ")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4ea4\u6362\u673a(Switch, \u5728 mac \u5c42\u5de5\u4f5c, \u4f1a\u8bb0\u4f4f\u6bcf\u4e2a\u53e3\u5bf9\u5e94\u673a\u5668\u7684 mac \u5730\u5740, \u8f6c\u53d1\u5305\u65f6, \u80fd\u628aMAC\u5934\u62ff\u4e0b\u6765\uff0c\u68c0\u67e5\u4e00\u4e0b\u76ee\u6807MAC\u5730\u5740, \u5982\u679c\u76ee\u6807MAC\u5730\u5740\u4e0d\u662f\u8fd9\u53f0\u7535\u8111\u7684\uff0c\u8fd9\u4e2a\u53e3\u5c31\u4e0d\u7528\u8f6c\u53d1\u4e86)"))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4ea4\u6362\u673a\u600e\u4e48\u77e5\u9053\u6bcf\u4e2a\u53e3\u7684\u7535\u8111\u7684MAC\u5730\u5740\u5462\uff1f\u8fd9\u9700\u8981\u4ea4\u6362\u673a\u4f1a\u5b66\u4e60\n\u4e00\u53f0MAC1\u7535\u8111\u5c06\u4e00\u4e2a\u5305\u53d1\u9001\u7ed9\u53e6\u4e00\u53f0MAC2\u7535\u8111\uff0c\u5f53\u8fd9\u4e2a\u5305\u5230\u8fbe\u4ea4\u6362\u673a\u7684\u65f6\u5019\uff0c\u4e00\u5f00\u59cb\u4ea4\u6362\u673a\u4e5f\u4e0d\u77e5\u9053MAC2\u7684\u7535\u8111\u5728\u54ea\u4e2a\u53e3\uff0c\u6240\u4ee5\u6ca1\u529e\u6cd5\uff0c\u5b83\u53ea\u80fd\u5c06\u5305\u8f6c\u53d1\u7ed9\u9664\u4e86\u6765\u7684\u90a3\u4e2a\u53e3\u4e4b\u5916\u7684\u5176\u4ed6\u6240\u6709\u7684\u53e3\u3002\u4f46\u662f\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u4ea4\u6362\u673a\u4f1a\u5e72\u4e00\u4ef6\u975e\u5e38\u806a\u660e\u7684\u4e8b\u60c5\uff0c\u5c31\u662f\u4ea4\u6362\u673a\u4f1a\u8bb0\u4f4f\uff0cMAC1\u662f\u6765\u81ea\u4e00\u4e2a\u660e\u786e\u7684\u53e3\u3002\u4ee5\u540e\u6709\u5305\u7684\u76ee\u7684\u5730\u5740\u662fMAC1\u7684\uff0c\u76f4\u63a5\u53d1\u9001\u5230\u8fd9\u4e2a\u53e3\u5c31\u53ef\u4ee5\u4e86\n\u8fc7\u4e86\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\uff0c\u5c31\u6709\u4e86\u6574\u4e2a\u7f51\u7edc\u7684\u4e00\u4e2a\u7ed3\u6784\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u57fa\u672c\u4e0a\u4e0d\u7528\u5e7f\u64ad\u4e86\uff0c\u5168\u90e8\u53ef\u4ee5\u51c6\u786e\u8f6c\u53d1\u3002\u5f53\u7136\uff0c\u6bcf\u4e2a\u673a\u5668\u7684IP\u5730\u5740\u4f1a\u53d8\uff0c\u6240\u5728\u7684\u53e3\u4e5f\u4f1a\u53d8\uff0c\u56e0\u800c\u4ea4\u6362\u673a\u4e0a\u7684\u5b66\u4e60\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u79f0\u4e3a\u8f6c\u53d1\u8868\uff0c\u662f\u6709\u4e00\u4e2a\u8fc7\u671f\u65f6\u95f4\u7684")),(0,n.kt)("h2",{id:"2-\u6570\u636e\u94fe\u8def\u5c42data-link-layer-\u6216\u8005-mac-layer"},"2. \u6570\u636e\u94fe\u8def\u5c42(data-link-layer \u6216\u8005 mac layer)"),(0,n.kt)("p",null,"ARP, VLAN, STP \u534f\u8bae"),(0,n.kt)("p",null,"\u6570\u636e\u5305\u7684\u5b9a\u4e49, \u7f51\u5361mac\u5730\u5740, broadcasting ------- \u73b0\u5728\u53ef\u4ee5\u5728\u6570\u636e\u94fe\u8def\u5c42\u8f93\u51fa\u6570\u636e\u4e86"),(0,n.kt)("p",null,"\u8003\u8651\u4e09\u4e2a\u95ee\u9898:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u6570\u636e\u5305\u7684\u53d1\u9001\u65b9, \u63a5\u6536\u65b9\u5982\u4f55\u786e\u5b9a --- mac\u5730\u5740"),(0,n.kt)("li",{parentName:"ul"},"\u5305\u53d1\u9001\u5148\u540e\u987a\u5e8f, \u5982\u4f55\u9632\u6b62\u5835\u8f66\u6df7\u4e71 --- \u4fe1\u9053\u5212\u5206\u534f\u8bae, \u8f6e\u6d41\u534f\u8bae, \u968f\u673a\u63a5\u5165\u534f\u8bae"),(0,n.kt)("li",{parentName:"ul"},"\u5982\u4f55\u5904\u7406\u53d1\u9001\u4e2d\u7684\u9519\u8bef - CRC \u5faa\u73af\u5197\u4f59\u68c0\u6d4b")),(0,n.kt)("h3",{id:"21-mac-\u548c-mac\u5730\u5740"},"2.1. mac \u548c mac\u5730\u5740"),(0,n.kt)("p",null,"Medium Access Control\uff0c\u5373\u5a92\u4f53\u8bbf\u95ee\u63a7\u5236, \u5176\u5b9e\u5c31\u662f\u63a7\u5236\u5728\u5f80\u5a92\u4f53\u4e0a\u53d1\u6570\u636e\u7684\u65f6\u5019\uff0c\u8c01\u5148\u53d1\u3001\u8c01\u540e\u53d1\u7684\u95ee\u9898\u3002\u9632\u6b62\u53d1\u751f\u6df7\u4e71, \u8fd9\u4e2a\u89c4\u5219\u53eb\u505a ",(0,n.kt)("inlineCode",{parentName:"p"},"\u591a\u8def\u8bbf\u95ee")),(0,n.kt)("p",null,"\u4e09\u79cd\u65b9\u5f0f\u89e3\u51b3\u6df7\u4e71\u95ee\u9898:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u65b9\u5f0f\u4e00\uff1a\u5206\u591a\u4e2a\u8f66\u9053\u3002\u6bcf\u4e2a\u8f66\u4e00\u4e2a\u8f66\u9053\uff0c\u4f60\u8d70\u4f60\u7684\uff0c\u6211\u8d70\u6211\u7684\u3002\u8fd9\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u91cc\u53eb\u4f5c\u4fe1\u9053\u5212\u5206\uff1b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u65b9\u5f0f\u4e8c\uff1a\u4eca\u5929\u5355\u53f7\u51fa\u884c\uff0c\u660e\u5929\u53cc\u53f7\u51fa\u884c\uff0c\u8f6e\u7740\u6765\u3002\u8fd9\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u91cc\u53eb\u4f5c\u8f6e\u6d41\u534f\u8bae\uff1b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u65b9\u5f0f\u4e09\uff1a\u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00\uff0c\u6709\u4e8b\u513f\u5148\u51fa\u95e8\uff0c\u53d1\u73b0\u7279\u5835\uff0c\u5c31\u56de\u53bb\u3002\u9519\u8fc7\u9ad8\u5cf0\u518d\u51fa\u3002\u6211\u4eec\u53eb\u4f5c\u968f\u673a\u63a5\u5165\u534f\u8bae\u3002\u8457\u540d\u7684\u4ee5\u592a\u7f51\uff0c\u7528\u7684\u5c31\u662f\u8fd9\u4e2a\u65b9\u5f0f\u3002"))),(0,n.kt)("p",null,"MAC\u5730\u5740: \u6bcf\u4e2a\u7269\u7406\u8bbe\u5907(\u7f51\u5361)\u90fd\u6709\u7684\u552f\u4e00\u6807\u8bc6, 48\u4e8c\u8fdb\u5236\u4f4d, \u901a\u8fc712\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u8868\u793a;\u53ea\u548c\u5382\u5546\u6709\u5173; \u89e3\u51b3\u53d1\u7ed9\u8c01\uff0c\u8c01\u63a5\u6536\u7684\u95ee\u9898;"),(0,n.kt)("p",null,"MAC\u5730\u5740\u7684\u901a\u4fe1\u8303\u56f4\u6bd4\u8f83\u5c0f\uff0c\u5c40\u9650\u5728\u4e00\u4e2a\u5b50\u7f51\u91cc\u9762\u3002\u4f8b\u5982\uff0c\u4ece192.168.0.2/24\u8bbf\u95ee192.168.0.3/24\u662f\u53ef\u4ee5\u7528MAC\u5730\u5740\u7684\u3002\u4e00\u65e6\u8de8\u5b50\u7f51\uff0c\u5373\u4ece192.168.0.2/24\u5230192.168.1.2/24\uff0cMAC\u5730\u5740\u5c31\u4e0d\u884c\u4e86\uff0c\u9700\u8981IP\u5730\u5740\u8d77\u4f5c\u7528\u4e86"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e3a\u4ec0\u4e48\u6709\u4e86 mac \u5730\u5740, \u8fd8\u4f1a\u53d1\u660e ip \u5730\u5740\u5462"),(0,n.kt)("p",{parentName:"li"},"mac \u5730\u5740\u672c\u8eab\u65e0\u6cd5\u5728\u7f51\u7edc\u4e2d\u5b9a\u4f4d: \u56e0\u4e3aMAC\u5730\u5740\u867d\u7136\u552f\u4e00\u4f46\u662f\u672c\u8eab\u5c31\u662f\u4e00\u4e32\u968f\u673a\u5b57\u7b26\u4e32, \u4e0d\u80fd\u8868\u660e\u7528\u6237\u5728\u6574\u4e2a\u4e92\u8054\u7f51\u4e2d\u7684\u4f4d\u7f6e\uff0c\u9664\u975e\u7ef4\u62a4\u4e00\u4e2a\u8d85\u7ea7\u5927MAC\u5730\u5740\u5bf9\u5e94\u8868\uff0c\u90a3\u5bfb\u5740\u6548\u7387\u80af\u5b9a\u7206\u70b8; \u800c IP\u5730\u5740\u662f\u7f51\u7edc\u63d0\u4f9b\u5546\u7ed9\u4f60\u7684\uff0c\u6240\u4ee5\u4f60\u5728\u54ea\u4e2a\u5c40\u57df\u7f51\u6574\u4e2a\u7f51\u7edc\u90fd\u662f\u77e5\u9053\u7684. "),(0,n.kt)("p",{parentName:"li"},"mac \u5730\u5740\u5b89\u5168\u6027\u95ee\u9898: \u83b7\u53d6MAC\u5730\u5740\u662f\u901a\u8fc7ARP\u534f\u8bae\u6765\u5b8c\u6210\u7684\uff0c\u5982\u679c\u53ea\u7528MAC\u5730\u5740\u901a\u4fe1\uff0c\u90a3\u4e48\u5e7f\u64ad\u98ce\u66b4\u662f\u4e2a\u96be\u9898")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e3a\u4ec0\u4e48\u6709\u4e86 ip \u5730\u5740\u8fd8\u8981 mac \u5730\u5740?"),(0,n.kt)("p",{parentName:"li"},"\u5c40\u57df\u7f51\u4e2d\u673a\u5668\u7684 ip \u90fd\u662f\u53d8\u5316\u7684, \u8fd9\u65f6\u5c31\u9700\u8981mac\u5730\u5740\u6765\u552f\u4e00\u5bf9\u5e94\u4e00\u53f0\u673a\u5668"))),(0,n.kt)("h3",{id:"22-mac-\u5c42\u6570\u636e\u5305\u683c\u5f0f"},"2.2. mac \u5c42\u6570\u636e\u5305\u683c\u5f0f"),(0,n.kt)("p",null,"\u5bf9\u4e8e\u4ee5\u592a\u7f51\uff0c\u7b2c\u4e8c\u5c42\u7684\u6700\u5f00\u59cb\uff0c\u5c31\u662f\u76ee\u6807\u7684MAC\u5730\u5740\u548c\u6e90\u7684MAC\u5730\u5740: "),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"target mac address 6 byte"),(0,n.kt)("p",{parentName:"li"},"\u6709\u4e86\u8fd9\u4e2a\u76ee\u6807MAC\u5730\u5740\uff0c\u6570\u636e\u5305\u5728\u94fe\u8def\u4e0a\u5e7f\u64ad\uff0cMAC\u7684\u7f51\u5361\u624d\u80fd\u53d1\u73b0\uff0c\u8fd9\u4e2a\u5305\u662f\u7ed9\u5b83\u7684\u3002MAC\u7684\u7f51\u5361\u628a\u5305\u6536\u8fdb\u6765\uff0c\u7136\u540e\u6253\u5f00IP\u5305\uff0c\u53d1\u73b0IP\u5730\u5740\u4e5f\u662f\u81ea\u5df1\u7684\uff0c\u518d\u6253\u5f00TCP\u5305\uff0c\u53d1\u73b0\u7aef\u53e3\u662f\u81ea\u5df1\uff0c\u4e5f\u5c31\u662f80\uff0c\u800cnginx\u5c31\u662f\u76d1\u542c80"),(0,n.kt)("p",{parentName:"li"},"nginx\u8fd4\u56de\u4e00\u4e2a\u7f51\u9875\u3002\u7136\u540e\u5c06\u7f51\u9875\u9700\u8981\u53d1\u56de\u8bf7\u6c42\u7684\u673a\u5668\u3002\u7136\u540e\u5c42\u5c42\u5c01\u88c5\uff0c\u6700\u540e\u5230MAC\u5c42\u3002\u56e0\u4e3a\u6765\u7684\u65f6\u5019\u6709\u6e90MAC\u5730\u5740\uff0c\u8fd4\u56de\u7684\u65f6\u5019\uff0c\u6e90MAC\u5c31\u53d8\u6210\u4e86\u76ee\u6807MAC\uff0c\u518d\u8fd4\u7ed9\u8bf7\u6c42\u7684\u673a\u5668")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"source mac address 6byte")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u7c7b\u578b 2byte "))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7c7b\u578b 0800 : ip \u6570\u636e\u62a5 (\u5927\u90e8\u5206\u7684\u7c7b\u578b\u662fIP\u6570\u636e\u5305\uff0c\u7136\u540eIP\u91cc\u9762\u5305\u542bTCP\u3001UDP\uff0c\u4ee5\u53caHTTP\u7b49)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7c7b\u578b 0806: ARP \u8bf7\u6c42, \u5e94\u7b54"))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u6570\u636e 46 ~ 1500 byte")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"CRC 4 byte (\u5faa\u73af\u5197\u4f59\u68c0\u6d4b)"),(0,n.kt)("p",{parentName:"li"},"\u901a\u8fc7XOR\u5f02\u6216\u7684\u7b97\u6cd5\uff0c\u6765\u8ba1\u7b97\u6574\u4e2a\u5305\u662f\u5426\u5728\u53d1\u9001\u7684\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u4e3b\u8981\u89e3\u51b3\u7b2c\u4e09\u4e2a\u95ee\u9898\u3002"))),(0,n.kt)("h3",{id:"23-arp-\u534f\u8bae"},"2.3. ARP \u534f\u8bae"),(0,n.kt)("p",null,"ARP\u534f\u8bae\uff0c\u4e5f\u5c31\u662f\u5df2\u77e5IP\u5730\u5740\uff0c\u6c42MAC\u5730\u5740\u7684\u534f\u8bae, \u901a\u8fc7\u5e7f\u64ad\u7684\u65b9\u5f0f\u6765\u5bfb\u627e\u76ee\u6807MAC\u5730\u5740\uff0c\u62ff\u5230\u540e\u8bb0\u4f4f\u4e00\u6bb5\u65f6\u95f4\uff0c\u8fd9\u4e2a\u53eb\u4f5c\u7f13\u5b58\uff1b"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"RARP\u534f\u8bae\uff0c\u5373\u5df2\u77e5MAC\u6c42IP\u7684\u534f\u8bae")),(0,n.kt)("p",null,"\u673a\u5668 a \u8bbf\u95ee\u673a\u5668 b \u8fc7\u7a0b:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"a \u6839\u636e b \u7684 ip \u67e5\u770b\u672c\u5730 ARP\u7f13\u5b58\u8868, \u6ca1\u627e\u5230 mac")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'\u5e7f\u64ad ARP\u8bf7\u6c42, "\u8c01\u662f 192.168.0.2 ? \u4f60\u7684 mac \u662f\u591a\u5c11"')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'b ARP \u5e94\u7b54 "\u6211\u5c31\u662f 192.168.0.2, \u6211\u7684 mac \u662f xxx"')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"a \u7f13\u5b58 ip-mac \u6620\u5c04\u8868"))),(0,n.kt)("p",null,"\u4e24\u53f0\u673a\u5668\u4e92\u8054\u53ef\u4ee5\u4f7f\u7528 hub, \u591a\u53f0\u673a\u5668\u4f7f\u7528\u6709\u5b66\u4e60\u529f\u80fd\u7684 switch"),(0,n.kt)("h4",{id:"231-\u89e3\u51b3\u73af\u8def\u95ee\u9898\u5e7f\u64ad\u98ce\u66b4-stp-\u534f\u8bae"},"2.3.1. \u89e3\u51b3\u73af\u8def\u95ee\u9898(\u5e7f\u64ad\u98ce\u66b4) stp \u534f\u8bae"),(0,n.kt)("p",null,"\u968f\u7740\u7f51\u7edc\u4e2d switch \u8d8a\u6765\u8d8a\u591a, \u51fa\u73b0\u73af\u8def\u95ee\u9898 and \u5e7f\u64ad\u98ce\u66b4"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u4e00\u4e2a\u5c40\u57df\u7f51\u91cc\u9762\u6709\u591a\u4e2a\u4ea4\u6362\u673a, \u6216\u8005 2 \u4e2a\u5c40\u57df\u7f51\u6709\u591a\u4e2a switch \u8fde\u63a5\uff0cARP\u5e7f\u64ad\u7684\u6a21\u5f0f\u6709\u5e7f\u64ad\u98ce\u66b4\u7684\u95ee\u9898\n\u6bd4\u5982\u6570\u636e\u5305\u7ecf\u8fc7\u4ea4\u6362\u673aA\u5230\u8fbe\u4ea4\u6362\u673aB\uff0c\u4ea4\u6362\u673aB\u53c8\u5c06\u5305\u590d\u5236\u4e3a\u591a\u4efd\u5e7f\u64ad\u51fa\u53bb, \u5982\u679c\u6574\u4e2a\u5c40\u57df\u7f51\u5b58\u5728\u4e00\u4e2a\u73af\u8def\uff0c\u4f7f\u5f97\u6570\u636e\u5305\u53c8\u91cd\u65b0\u56de\u5230\u4e86\u6700\u5f00\u59cb\u7684\u4ea4\u6362\u673aA\uff0c\u8fd9\u4e2a\u5305\u53c8\u4f1a\u88abA\u518d\u6b21\u590d\u5236\u591a\u4efd\u5e7f\u64ad\u51fa\u53bb\u3002\u5982\u6b64\u5faa\u73af\uff0c\u6570\u636e\u5305\u4f1a\u4e0d\u505c\u5f97\u8f6c\u53d1\uff0c\u800c\u4e14\u8d8a\u6765\u8d8a\u591a\uff0c\u6700\u7ec8\u5360\u6ee1\u5e26\u5bbd\uff0c\u6216\u8005\u4f7f\u89e3\u6790\u534f\u8bae\u7684\u786c\u4ef6\u8fc7\u8f7d\uff0c\u5f62\u6210\u5e7f\u64ad\u98ce\u66b4")),(0,n.kt)("p",null,"\u90a3\u4e48\u5982\u4f55\u7834\u9664\u73af\u8def\u5462?  stp \u534f\u8bae: \u6570\u636e\u7ed3\u6784\u4e2d, \u6709\u73af\u7684\u6211\u4eec\u5e38\u79f0\u4e3a\u56fe\u3002\u5c06\u56fe\u4e2d\u7684\u73af\u7834\u4e86\uff0c\u5c31\u751f\u6210\u4e86\u6811\u3002\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\uff0c\u751f\u6210\u6811\u7684\u7b97\u6cd5\u53eb\u4f5cSTP\uff0c\u5168\u79f0Spanning Tree Protocol\u3002"),(0,n.kt)("p",null,"stp \u7f3a\u70b9:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"STP \u5bf9\u4e8e\u8de8\u5730\u57df\u751a\u81f3\u8de8\u56fd\u7ec4\u7ec7\u7684\u7f51\u7edc\u652f\u6301\uff0c\u5c31\u5f88\u96be\u505a\u4e86\uff0c\u8ba1\u7b97\u91cf\u6446\u7740\u5462"),(0,n.kt)("li",{parentName:"ul"},"\u67d0\u4e2a\u4ea4\u6362\u673a\u72b6\u6001\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u6574\u4e2a\u6811\u9700\u8981\u91cd\u65b0\u6784\u5efa"),(0,n.kt)("li",{parentName:"ul"},"\u88ab\u7834\u5f00\u7684\u73af\u7684\u94fe\u8def\u88ab\u6d6a\u8d39\u4e86")),(0,n.kt)("p",null,"\u6240\u4ee5\u73b0\u5728\u5f88\u5c11\u7528\u4e86"),(0,n.kt)("h4",{id:"232-\u7f51\u7edc\u9694\u79bb"},"2.3.2. \u7f51\u7edc\u9694\u79bb"),(0,n.kt)("p",null,"\u968f\u7740 switch \u53d8\u591a, \u4e5f\u9700\u8981\u8fdb\u884c\u7f51\u7edc\u9694\u79bb, \u8fd9\u662f\u56e0\u4e3a\u5f53\u4e00\u4e2a\u5c40\u57df\u7f51\u4e2d\u6709\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5305, \u6df7\u5408\u5728\u4e00\u8d77, \u65e0\u6cd5\u4fdd\u8bc1\u5b89\u5168\u6027"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7269\u7406\u9694\u79bb: \u7ec4\u4ef6\u591a\u4e2a\u5b50\u7f51, \u901a\u8fc7\u8def\u7531\u5668\u8fde\u63a5")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u865a\u62df\u9694\u79bb: VLAN\uff0c\u6216\u8005\u53eb\u865a\u62df\u5c40\u57df\u7f51"),(0,n.kt)("p",{parentName:"li"},"\u4e00\u4e2a\u4ea4\u6362\u673a\u4e0a\u4f1a\u8fde\u5c5e\u4e8e\u591a\u4e2a\u865a\u62df\u5c40\u57df\u7f51\u7684\u673a\u5668"),(0,n.kt)("p",{parentName:"li"},"\u90a3\u4ea4\u6362\u673a\u600e\u4e48\u533a\u5206\u54ea\u4e2a\u673a\u5668\u5c5e\u4e8e\u54ea\u4e2a\u5c40\u57df\u7f51\u5462\uff1f\u5728\u539f\u6765\u7684\u4e8c\u5c42\u7684\u5934\u4e0a\u52a0\u4e00\u4e2aTAG\uff0c\u91cc\u9762\u6709\u4e00\u4e2aVLAN ID\uff0c\u4e00\u517112\u4f4d; \u5f53\u8fd9\u4e2a\u4ea4\u6362\u673a\u628a\u4e8c\u5c42\u7684\u5934\u53d6\u4e0b\u6765\u7684\u65f6\u5019\uff0c\u5c31\u80fd\u591f\u8bc6\u522b\u8fd9\u4e2aVLAN ID\u3002\u8fd9\u6837\u53ea\u6709\u76f8\u540cVLAN\u7684\u5305\uff0c\u624d\u4f1a\u4e92\u76f8\u8f6c\u53d1\uff0c\u4e0d\u540cVLAN\u7684\u5305\uff0c\u662f\u770b\u4e0d\u5230\u7684\u3002\u8fd9\u6837\u5e7f\u64ad\u95ee\u9898\u548c\u5b89\u5168\u95ee\u9898\u5c31\u90fd\u80fd\u591f\u89e3\u51b3\u4e86"),(0,n.kt)("p",{parentName:"li"},"\u4ea4\u6362\u673a\u4e4b\u95f4\u600e\u4e48\u8fde\u63a5\u5462\uff1f\u5c06\u4e24\u4e2a\u4ea4\u6362\u673a\u8fde\u63a5\u8d77\u6765\u7684\u53e3\u5e94\u8be5\u8bbe\u7f6e\u6210\u4ec0\u4e48VLAN\u5462\uff1f\u5bf9\u4e8e\u652f\u6301VLAN\u7684\u4ea4\u6362\u673a\uff0c\u6709\u4e00\u79cd\u53e3\u53eb\u4f5cTrunk\u53e3\u3002\u5b83\u53ef\u4ee5\u8f6c\u53d1\u5c5e\u4e8e\u4efb\u4f55VLAN\u7684\u53e3\u3002\u4ea4\u6362\u673a\u4e4b\u95f4\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u53e3\u76f8\u4e92\u8fde\u63a5"))),(0,n.kt)("h3",{id:"24-\u4e24\u53f0\u673a\u5668\u4e0d\u901a"},"2.4. \u4e24\u53f0\u673a\u5668\u4e0d\u901a"),(0,n.kt)("p",null,"ping + traceroute/wireshark"),(0,n.kt)("h2",{id:"3-\u7f51\u7edc\u5c42network-layer-\u6216\u8005-ip-\u5c42"},"3. \u7f51\u7edc\u5c42(network-layer \u6216\u8005 ip \u5c42)"),(0,n.kt)("p",null,"ICMP, ip, arp, ospf, bgp, IPSec, GRE"),(0,n.kt)("p",null,"\u5b9a\u4e49\u4e3b\u673a\u5230\u4e3b\u673a\u7684\u901a\u4fe1\u89c4\u8303\uff0c \u4f8b\u5982 ip\u534f\u8bae\uff0c \u5c06\u8fd0\u8f93\u5c42\u4ea7\u751f\u7684\u62a5\u6587\u6bb5or\u7528\u6237\u6570\u636e\u62a5\u5c01\u88c5\u6210ip\u6570\u636e\u62a5"),(0,n.kt)("p",null,"\u5f15\u5165\u65b0\u7684\u5730\u5740: \u7f51\u5740\uff08ip\u5730\u5740\uff09 ------------ \u786e\u5b9a\u673a\u5668\u6240\u5728\u7684\u5b50\u7f51 (mac\u5730\u5740\u786e\u5b9a\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u7684\u5177\u4f53\u54ea\u4e00\u53f0\u673a\u5668)"),(0,n.kt)("h3",{id:"31-ip-\u5730\u5740"},"3.1. ip \u5730\u5740"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"4 * 8 bit ; \u4e60\u60ef\u7528 4\u6bb5 \u5341\u8fdb\u5236\u6570\u5b57\u8868\u793a")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},'\u5206\u4e3a "\u7f51\u7edc\u6bb5" + "\u4e3b\u673a\u6bb5", \u5b50\u7f51\u63a9\u7801\u6765\u51b3\u5b9a\u600e\u4e48\u5206\u6bb5, \u540c\u4e00\u5b50\u7f51\u7684\u4e3b\u673a \u7f51\u7edc\u6bb5\u76f8\u540c;'),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u65e0\u7c7b\u578b\u57df\u95f4\u9009\u8def\uff08CIDR\uff09: \u8868\u793a\u6cd5, 10.100.122.2/24\uff0c\u8fd9\u4e2aIP\u5730\u5740\u4e2d\u6709\u4e00\u4e2a\u659c\u6760\uff0c\u659c\u6760\u540e\u9762\u6709\u4e2a\u6570\u5b5724\u3002\u8fd9\u79cd\u5730\u5740\u8868\u793a\u5f62\u5f0f\uff0c\u5c31\u662fCIDR\u3002\u540e\u976224\u7684\u610f\u601d\u662f\uff0c32\u4f4d\u4e2d\uff0c\u524d24\u4f4d\u662f\u7f51\u7edc\u53f7\uff0c\u540e8\u4f4d\u662f\u4e3b\u673a\u53f7")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5e7f\u64ad\u5730\u5740: 10.100.122.255\u3002\u5982\u679c\u53d1\u9001\u8fd9\u4e2a\u5730\u5740\uff0c\u6240\u670910.100.122\u7f51\u7edc\u91cc\u9762\u7684\u673a\u5668\u90fd\u53ef\u4ee5\u6536\u5230")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},'\u5b50\u7f51\u63a9\u7801: \u5199\u6cd5\u7c7b\u4f3cip\u5730\u5740, 32bit, \u7f51\u7edc\u6bb5"\u5168\u90e8\u662f1", \u4e3b\u673a\u6bb5"\u5168\u90e8\u662f0", \u4f8b\u5982 255.255.255.0; \u5224\u65ad\u4e24\u4e2aip\u5730\u5740\u662f\u5426\u5904\u4e8e\u540c\u4e00\u4e2a\u5b50\u7f51 - \u5c062\u4e2aip\u5206\u522b\u548c\u5404\u81ea\u7684\u5b50\u7f51\u63a9\u7801\u505a"and"\u8fd0\u7b97, \u7136\u540e\u770b\u770b\u662f\u5426\u76f8\u7b49')))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"ip\u5730\u5740\u5206\u7c7b: \u5206\u6210\u4e865\u7c7b\u3002C\u7c7b\u592a\u5c11\uff0cB\u7c7b\u592a\u591a\u3002C\u7c7b254\u4e2a\uff0c\u7f51\u7edc\u90fd\u4e0d\u591f\uff1bD\u7c7b6\u4e07\u591a\uff0c\u7ed9\u4f01\u4e1a\u90fd\u592a\u591a;"),(0,n.kt)("p",{parentName:"li"},"\u5982\u4f55\u5f25\u8865IP\u8bbe\u8ba1\u8005\u72af\u7684\u9519\u8bef: CIDR 10.100.122.2/24"),(0,n.kt)("p",{parentName:"li"},"D \u7c7b\u662f\u7ec4\u64ad\u5730\u5740\u3002\u4f7f\u7528\u8fd9\u4e00\u7c7b\u5730\u5740\uff0c\u5c5e\u4e8e\u67d0\u4e2a\u7ec4\u7684\u673a\u5668\u90fd\u80fd\u6536\u5230")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u516c\u6709 ip, \u79c1\u6709 ip: A\u7c7b\u3001B\u7c7b\u6216\u8005C\u7c7b ip \u5730\u5740\u4e2d, \u90fd\u6709\u79c1\u6709 ip \u5730\u5740\u6bb5, \u4f9b\u5c40\u57df\u7f51\u5185\u90e8\u4f7f\u7528, \u5982 192.168.0.x, \u5bb6\u5ead\u7f51\u8bbe\u5907\u4e0d\u4f1a\u8d85\u8fc7256\u4e2a\uff0c\u6240\u4ee5/24\u57fa\u672c\u5c31\u591f\u4e86"),(0,n.kt)("p",{parentName:"li"},"\u800c\u6574\u4e2a\u7f51\u7edc\u91cc\u9762\u7684\u7b2c\u4e00\u4e2a\u5730\u5740192.168.0.1\uff0c\u5f80\u5f80\u5c31\u662f\u4f60\u8fd9\u4e2a\u79c1\u6709\u7f51\u7edc\u7684\u51fa\u53e3\u5730\u5740; Wi-Fi\u8def\u7531\u5668\u7684\u5730\u5740\u5c31\u662f192.168.0.1\uff0c\u800c192.168.0.255\u5c31\u662f\u5e7f\u64ad\u5730\u5740")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"ipv6: 32\u4f4d\u5730\u5740\u4e0d\u591f\u7528\u3002\u4e8e\u662f\u6709\u4e86\u73b0\u5728IPv6\uff08128\u4f4d\uff09")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},'\u6839\u636eip\u534f\u8bae\u53d1\u9001\u7684\u6570\u636e \u53eb\u505a ip\u6570\u636e\u5305 ------ \u5b58\u50a8\u5728 \u4ee5\u592a\u7f51\u6570\u636e\u5305(frame)\u4e2d\u7684 "data(\u6570\u636e)" \u90e8\u5206; \u6700\u5927\u5bb9\u91cf 65535 byte'),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"head - \u7248\u672c\u53f7, \u957f\u5ea6, ip\u5730\u5740; 20 ~ 60 byte")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"data - ip\u6570\u636e\u5305\u7684\u5177\u4f53\u5185\u5bb9; \u6700\u5927\u5bb9\u91cf: 65535-20 = 65515byte"))))),(0,n.kt)("h4",{id:"311-\u67e5\u8be2-ip\u5730\u5740"},"3.1.1. \u67e5\u8be2 IP\u5730\u5740"),(0,n.kt)("p",null,"ifconfig, ipconfig, ip addr"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"scope: \u5728IP\u5730\u5740\u7684\u540e\u9762\u6709\u4e2ascope\uff0c\u5bf9\u4e8eeth0\u8fd9\u5f20\u7f51\u5361\u6765\u8bb2\uff0c\u662fglobal\uff0c\u8bf4\u660e\u8fd9\u5f20\u7f51\u5361\u662f\u53ef\u4ee5\u5bf9\u5916\u7684\uff0c\u53ef\u4ee5\u63a5\u6536\u6765\u81ea\u5404\u4e2a\u5730\u65b9\u7684\u5305\u3002\u5bf9\u4e8elo\u6765\u8bb2\uff0clo\u5168\u79f0\u662floopback\uff0c\u53c8\u79f0\u73af\u56de\u63a5\u53e3\uff0c\u5f80\u5f80\u4f1a\u88ab\u5206\u914d\u5230127.0.0.1\u8fd9\u4e2a\u5730\u5740\u3002\u8fd9\u4e2a\u5730\u5740\u7528\u4e8e\u672c\u673a\u901a\u4fe1\uff0c\u7ecf\u8fc7\u5185\u6838\u5904\u7406\u540e\u76f4\u63a5\u8fd4\u56de\uff0c\u4e0d\u4f1a\u5728\u4efb\u4f55\u7f51\u7edc\u4e2d\u51fa\u73b0")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7f51\u7edc\u8bbe\u5907\u7684\u72b6\u6001\u6807\u8bc6: ",(0,n.kt)("inlineCode",{parentName:"p"},"<BROADCAST,MULTICAST,UP,LOWER_UP>"),"; "),(0,n.kt)("p",{parentName:"li"},"UP\u8868\u793a\u7f51\u5361\u5904\u4e8e\u542f\u52a8\u7684\u72b6\u6001\uff1b"),(0,n.kt)("p",{parentName:"li"},"BROADCAST\u8868\u793a\u8fd9\u4e2a\u7f51\u5361\u6709\u5e7f\u64ad\u5730\u5740\uff0c\u53ef\u4ee5\u53d1\u9001\u5e7f\u64ad\u5305\uff1b"),(0,n.kt)("p",{parentName:"li"},"MULTICAST\u8868\u793a\u7f51\u5361\u53ef\u4ee5\u53d1\u9001\u591a\u64ad\u5305\uff1b"),(0,n.kt)("p",{parentName:"li"},"LOWER_UP\u8868\u793aL1\u662f\u542f\u52a8\u7684\uff0c\u4e5f\u5373\u7f51\u7ebf\u63d2\u7740\u5462, "),(0,n.kt)("p",{parentName:"li"},"MTU1500 \u6700\u5927\u4f20\u8f93\u5355\u5143MTU\u4e3a1500\uff0c\u8fd9\u662f\u4ee5\u592a\u7f51\u7684\u9ed8\u8ba4\u503c, MTU\u662f\u4e8c\u5c42MAC\u5c42\u7684\u6982\u5ff5, \u4ee5\u592a\u7f51\u89c4\u5b9a\u8fdeMAC\u5934\u5e26\u6b63\u6587\u5408\u8d77\u6765\uff0c\u4e0d\u5141\u8bb8\u8d85\u8fc71500\u4e2a\u5b57\u8282\u3002\u6b63\u6587\u91cc\u9762\u6709IP\u7684\u5934\u3001TCP\u7684\u5934\u3001HTTP\u7684\u5934\u3002\u5982\u679c\u653e\u4e0d\u4e0b\uff0c\u5c31\u9700\u8981\u5206\u7247\u6765\u4f20\u8f93; MTU \u5927\u5c0f\u662f\u4e0d\u5305\u542b\u4e8c\u5c42\u5934\u90e8\u548c\u5c3e\u90e8\u7684\uff0cMTU 1500\u8868\u793a\u4e8c\u5c42MAC\u5e27\u5927\u5c0f\u4e0d\u8d85\u8fc71518. MAC \u593414 \u5b57\u8282\uff0c\u5c3e4\u5b57\u8282")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"qdisc pfifo_fast : \u6392\u961f\u89c4\u5219\u3002\u89c4\u5b9a\u6570\u636e\u5305\u5982\u4f55\u8fdb\u51fa\u7684\u3002\u6709pfifo, pfifo_fast"))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"ifconfig \u5c5e\u4e8e net-tools, ip addr \u5c5e\u4e8eiproute2\nnet-tools\u8d77\u6e90\u4e8eBSD\uff0c\u81ea2001\u5e74\u8d77\uff0cLinux\u793e\u533a\u5df2\u7ecf\u5bf9\u5176\u505c\u6b62\u7ef4\u62a4\uff0c\u800ciproute2\u65e8\u5728\u53d6\u4ee3net-tools\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u4e9b\u65b0\u529f\u80fd\u3002\u4e00\u4e9bLinux\u53d1\u884c\u7248\u5df2\u7ecf\u505c\u6b62\u652f\u6301net-tools\uff0c\u53ea\u652f\u6301iproute2\u3002\nnet-tools\u901a\u8fc7procfs(/proc)\u548cioctl\u7cfb\u7edf\u8c03\u7528\u53bb\u8bbf\u95ee\u548c\u6539\u53d8\u5185\u6838\u7f51\u7edc\u914d\u7f6e\uff0c\u800ciproute2\u5219\u901a\u8fc7netlink\u5957\u63a5\u5b57\u63a5\u53e3\u4e0e\u5185\u6838\u901a\u8baf\u3002\nnet-tools\u4e2d\u5de5\u5177\u7684\u540d\u5b57\u6bd4\u8f83\u6742\u4e71\uff0c\u800ciproute2\u5219\u76f8\u5bf9\u6574\u9f50\u548c\u76f4\u89c2\uff0c\u57fa\u672c\u662fip\u547d\u4ee4\u52a0\u540e\u9762\u7684\u5b50\u547d\u4ee4\u3002\n\u867d\u7136\u53d6\u4ee3\u610f\u56fe\u5f88\u660e\u663e\uff0c\u4f46\u662f\u8fd9\u4e48\u591a\u5e74\u8fc7\u53bb\u4e86\uff0cnet-tool\u4f9d\u7136\u8fd8\u5728\u88ab\u5e7f\u6cdb\u4f7f\u7528")),(0,n.kt)("h4",{id:"312-\u624b\u52a8\u914d\u7f6e-ip-\u5730\u5740"},"3.1.2. \u624b\u52a8\u914d\u7f6e ip \u5730\u5740"),(0,n.kt)("p",null,"\u914d\u7f6e ip \u5730\u5740: ",(0,n.kt)("inlineCode",{parentName:"p"},"sudo ifconfig eth1 10.0.0.1/24 && sudo ifconfig eth1 up")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"sudo ip addr add 10.0.0.1/24 dev eth1 && sudo ip link set up eth1")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u771f\u6b63\u914d\u7f6e\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u4e0d\u662f\u76f4\u63a5\u7528\u547d\u4ee4\u914d\u7f6e\u7684\uff0c\u800c\u662f\u653e\u5728\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u3002\u4e0d\u540c\u7cfb\u7edf\u7684\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u4e0d\u540c\uff0c\u4f46\u662f\u65e0\u975e\u5c31\u662fCIDR\u3001\u5b50\u7f51\u63a9\u7801\u3001\u5e7f\u64ad\u5730\u5740\u548c\u7f51\u5173\u5730\u5740")),(0,n.kt)("p",null,"ip \u5730\u5740\u4e0d\u80fd\u968f\u4fbf\u914d\u7f6e, \u5426\u5219\u5305\u65e0\u6cd5\u53d1\u9001\u51fa\u53bb, \u6bd4\u5982 \u968f\u4fbf\u914d\u7f6e\u4e3a 16.158.23.6, \u5c40\u57df\u7f51\u53e6\u5916\u673a\u5668\u4e3a 192.168.1.6, \u672c\u673a ",(0,n.kt)("inlineCode",{parentName:"p"},"ping192.168.1.6"),", \u4e0d\u901a; \u8fd9\u662f\u53d1\u751f\u4e86\u4ec0\u4e48?"),(0,n.kt)("p",null,"\u6b64\u65f6\u6570\u636e\u5305 \u6e90IP\u5730\u574016.158.23.6\uff0c\u4e5f\u6709\u76ee\u6807IP\u5730\u5740192.168.1.6\uff0c\u4f46\u662f\u5305\u53d1\u4e0d\u51fa\u53bb\uff0c\u8fd9\u662f\u56e0\u4e3aMAC\u5c42\u8fd8\u6ca1\u586b. \u6e90 mac \u5730\u5740\u81ea\u5df1\u77e5\u9053, \u76ee\u6807 mac \u5730\u5740\u5374\u4e0d\u662f192.168.1.6\u8fd9\u53f0\u673a\u5668\u7684MAC\u5730\u5740, \u662f\u4ec0\u4e48\u5462 -----Linux\u9996\u5148\u4f1a\u5224\u65ad\uff0c\u8981\u53bb\u7684\u8fd9\u4e2a\u5730\u5740\u548c\u6211\u662f\u4e00\u4e2a\u7f51\u6bb5\u7684\u5417, \u53ea\u6709\u662f\u4e00\u4e2a\u7f51\u6bb5\u7684\uff0c\u5b83\u624d\u4f1a\u53d1\u9001ARP\u8bf7\u6c42\uff0c\u83b7\u53d6\u76ee\u6807MAC\u5730\u5740, \u82e5\u4e0d\u5728\u540c\u4e2a\u5b50\u7f51, Linux \u4f1a\u901a\u8fc7 ARP \u83b7\u53d6\u7f51\u5173 mac, \u5c06\u5305\u53d1\u9001\u7ed9\u7f51\u5173(\u82e5\u914d\u7f6e\u4e86\u7f51\u5173), \u518d\u901a\u8fc7\u7f51\u5173\u53d1\u7ed9\u53e6\u5916\u5b50\u7f51\u7684\u7f51\u5173"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u5c06\u7f51\u5173\u914d\u7f6e\u4e3a192.168.1.6\u5462\uff1f\u4e0d\u53ef\u80fd\uff0cLinux\u4e0d\u4f1a\u8ba9\u4f60\u914d\u7f6e\u6210\u529f\u7684\uff0c\u56e0\u4e3a\u7f51\u5173\u8981\u548c\u5f53\u524d\u7684\u7f51\u7edc\u81f3\u5c11\u4e00\u4e2a\u7f51\u5361\u662f\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684\uff0c\u600e\u4e48\u53ef\u80fd16.158.23.6\u7684\u7f51\u5173\u662f192.168.1.6\u5462")),(0,n.kt)("h4",{id:"313-\u52a8\u6001\u5206\u914d\u5730\u5740-dhcp"},"3.1.3. \u52a8\u6001\u5206\u914d\u5730\u5740 DHCP"),(0,n.kt)("p",null,"\u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae\uff08Dynamic Host Configuration Protocol\uff09\uff0c\u7b80\u79f0DHCP\u3002"),(0,n.kt)("p",null,"\u53ea\u9700\u8981\u914d\u7f6e\u4e00\u6bb5\u5171\u4eab\u7684IP\u5730\u5740\u3002\u6bcf\u4e00\u53f0\u65b0\u63a5\u5165\u7684\u673a\u5668\u90fd\u901a\u8fc7DHCP\u534f\u8bae\uff0c\u6765\u8fd9\u4e2a\u5171\u4eab\u7684IP\u5730\u5740\u91cc\u7533\u8bf7\uff0c\u7136\u540e\u81ea\u52a8\u914d\u7f6e\u597d\u5c31\u53ef\u4ee5\u4e86\u3002\u7b49\u4eba\u8d70\u4e86\uff0c\u6216\u8005\u7528\u5b8c\u4e86\uff0c\u8fd8\u56de\u53bb\uff0c\u8fd9\u6837\u5176\u4ed6\u7684\u673a\u5668\u4e5f\u80fd\u7528"),(0,n.kt)("p",null,"\u5de5\u4f5c\u8fc7\u7a0b: "),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"DHCP Discover: \u65b0\u6765\u7684\u673a\u5668\u4f7f\u7528IP\u5730\u57400.0.0.0\u53d1\u9001\u4e86\u4e00\u4e2a\u5e7f\u64ad\u5305\uff0c\u76ee\u7684IP\u5730\u5740\u4e3a255.255.255.255 (\u5e7f\u64ad\u5305\u5c01\u88c5\u4e86UDP\uff0cUDP\u5c01\u88c5\u4e86BOOTP\u534f\u8bae)\u6570\u636e\u5305\u7ed3\u6784:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"mac header: \u65b0\u4eba mac (xxx), \u5e7f\u64ad mac(ff:ff:ff:ff:ff:ff)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"ip header: \u65b0\u4eba ip (\u672a\u77e5 0.0.0.0), \u5e7f\u64ad ip(255.255.255.255)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"udp header: \u6e90\u7aef\u53e3(68), \u76ee\u6807\u7aef\u53e3(67)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"bootP header: boot request")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5b9e\u9645\u6570\u636e:  \u6211\u7684 mac \u662f xxx, \u8fd8\u6ca1\u6709 IP\u5730\u5740"))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"DHCP Offer: \u5982\u679c\u4e00\u4e2a\u7f51\u7edc\u4e2d\u914d\u7f6e\u4e86DHCP Server  , \u8fd9\u4e2a server \u6311\u9009\u4e00\u4e2a\u95f2\u7f6e ip, \u4e5f\u53d1\u9001\u5e7f\u64ad\u5305: (\u5982\u679c\u6709\u591a\u4e2aDHCP Server\uff0c\u8fd9\u53f0\u65b0\u673a\u5668\u4f1a\u6536\u5230\u591a\u4e2aIP\u5730\u5740)")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"mac header: DHCP server mac (xxx), \u5e7f\u64ad mac(ff:ff:ff:ff:ff:ff)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"ip header: DHCP server ip (192.168.1.2), \u5e7f\u64ad ip(255.255.255.255)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"udp header: \u6e90\u7aef\u53e3(67), \u76ee\u6807\u7aef\u53e3(68)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"bootP header: boot reply")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5b9e\u9645\u6570\u636e: \u6211\u77e5\u9053\u4e86\u4f60\u7684 mac, \u5206\u914d\u7ed9\u4f60\u7684 ip \u662f xxx, \u8bf7\u7b54\u590d"))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"DHCP request: \u65b0\u673a\u5668\u53d1\u9001\u5e7f\u64ad\u5305\u7b54\u590d\u51c6\u5907\u4f7f\u7528\u54ea\u4e2a ip")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"mac header: \u65b0\u4eba mac (xxx), \u5e7f\u64ad mac(ff:ff:ff:ff:ff:ff)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"ip header: \u65b0\u4eba ip (\u672a\u77e5 0.0.0.0), \u5e7f\u64ad ip(255.255.255.255)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"udp header: \u6e90\u7aef\u53e3(68), \u76ee\u6807\u7aef\u53e3(67)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"bootP header: boot request")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5b9e\u9645\u6570\u636e:  \u6211\u7684 mac \u662f xxx, \u6211\u51c6\u5907\u79df\u7528\u8fd9\u4e2a server \u7ed9\u7684 ip \u4e86, ip \u662f xxx, \u5176\u4ed6 ip \u90fd\u4e0d\u8981\u4e86"))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"DHCP ACK: server \u5e7f\u64ad\u786e\u8ba4\u6d88\u606f")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"mac header: DHCP server mac (xxx), \u5e7f\u64ad mac(ff:ff:ff:ff:ff:ff)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"ip header: DHCP server ip (192.168.1.2), \u5e7f\u64ad ip(255.255.255.255)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"udp header: \u6e90\u7aef\u53e3(67), \u76ee\u6807\u7aef\u53e3(68)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"bootP header: boot reply")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5b9e\u9645\u6570\u636e: \u8fd9\u4e2a\u65b0\u4eba\u7684 ip \u662f\u6211\u79df\u7ed9\u4ed6\u7684, \u79df\u7ea6\u5982\u4e0b"))),(0,n.kt)("p",null,"ip \u5730\u5740\u56de\u6536\u548c\u7eed\u79df: \u5ba2\u6237\u673a\u4f1a\u5728\u79df\u671f\u8fc7\u53bb50%\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u5411\u4e3a\u5176\u63d0\u4f9bIP\u5730\u5740\u7684DHCP Server\u53d1\u9001DHCP request\u6d88\u606f\u5305\u3002\u5ba2\u6237\u673a\u63a5\u6536\u5230\u8be5\u670d\u52a1\u5668\u56de\u5e94\u7684DHCP ACK\u6d88\u606f\u5305\uff0c\u4f1a\u6839\u636e\u5305\u4e2d\u6240\u63d0\u4f9b\u7684\u65b0\u7684\u79df\u671f\u4ee5\u53ca\u5176\u4ed6\u5df2\u7ecf\u66f4\u65b0\u7684TCP/IP\u53c2\u6570\uff0c\u66f4\u65b0\u81ea\u5df1\u7684\u914d\u7f6e"),(0,n.kt)("p",null,"\u9884\u542f\u52a8\u6267\u884c\u73af\u5883\uff08PXE\uff09:\u7ba1\u7406\u591a\u4e2a\u4e3b\u673a, \u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf (DHCP\u534f\u8bae\u80fd\u7ed9\u5ba2\u6237\u63a8\u8350\u201c\u88c5\u4fee\u961f\u201dPXE\uff0c\u80fd\u591f\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\uff0c\u8fd9\u4e2a\u5728\u4e91\u8ba1\u7b97\u9886\u57df\u5927\u6709\u7528\u5904)"),(0,n.kt)("h3",{id:"32-ping-\u539f\u7406-icmp\u534f\u8bae"},"3.2. ping \u539f\u7406 ICMP\u534f\u8bae"),(0,n.kt)("p",null,"ping\u662f\u57fa\u4e8eICMP\u534f\u8bae\u5de5\u4f5c\u7684\u3002ICMP\u5168\u79f0Internet Control Message Protocol\uff0c\u5c31\u662f\u4e92\u8054\u7f51\u63a7\u5236\u62a5\u6587\u534f\u8bae"),(0,n.kt)("p",null,"ICMP\u62a5\u6587\u662f\u5c01\u88c5\u5728IP\u5305\u91cc\u9762\u7684\u3002\u56e0\u4e3a\u4f20\u8f93\u6307\u4ee4\u7684\u65f6\u5019\uff0c\u80af\u5b9a\u9700\u8981\u6e90\u5730\u5740\u548c\u76ee\u6807\u5730\u5740."),(0,n.kt)("p",null,"\u5206\u7c7b\u5982\u4e0b:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u8be2\u62a5\u6587: \u4e3b\u52a8\u53d1\u8d77\u7684\u67e5\u8be2, \u4f8b\u5982\uff0c\u5e38\u7528\u7684ping\u5c31\u662f\u67e5\u8be2\u62a5\u6587\uff0c\u662f\u4e00\u79cd\u4e3b\u52a8\u8bf7\u6c42\uff0c\u5e76\u4e14\u83b7\u5f97\u4e3b\u52a8\u5e94\u7b54\u7684ICMP\u534f\u8bae")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5dee\u9519\u62a5\u6587: \u5f02\u5e38\u60c5\u51b5\u53d1\u8d77\u7684\uff0c\u6765\u62a5\u544a\u53d1\u751f\u4e86\u4e0d\u597d\u7684\u4e8b\u60c5, \u5982 Traceroute \u5c31\u662f\u4f7f\u7528\u7684\u5dee\u9519\u62a5\u6587"))),(0,n.kt)("p",null,"\u6570\u636e\u7ed3\u6784\u662f\u8fd9\u6837\u7684:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"ICMP \u62a5\u6587\u5185\u5bb9 (\u5982 \u7c7b\u578b, \u5e8f\u53f7)"),(0,n.kt)("li",{parentName:"ul"},"source ip, target ip"),(0,n.kt)("li",{parentName:"ul"},"source mac, target mac")),(0,n.kt)("h3",{id:"33-\u8def\u7531\u5668\u4f5c\u4e3a\u7f51\u5173"},"3.3. \u8def\u7531\u5668\u4f5c\u4e3a\u7f51\u5173"),(0,n.kt)("p",null,"\u8def\u7531\u5668\u5de5\u4f5c\u5728\u8fd9\u5c42, \u6240\u4ee5\u662f\u4e09\u5c42\u8bbe\u5907;"),(0,n.kt)("p",null,"\u7f51\u5173\u5f80\u5f80\u662f\u4e00\u4e2a\u8def\u7531\u5668\uff0c\u662f\u4e00\u4e2a\u4e09\u5c42\u8f6c\u53d1\u7684\u8bbe\u5907, \u5c31\u662f\u628aMAC\u5934\u548cIP\u5934\u90fd\u53d6\u4e0b\u6765\uff0c\u7136\u540e\u6839\u636e\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u770b\u770b\u63a5\u4e0b\u6765\u628a\u5305\u5f80\u54ea\u91cc\u8f6c\u53d1\u7684\u8bbe\u5907"),(0,n.kt)("p",null,"\u4e24\u53f0\u673a\u5668\u4e92\u8054:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5982\u679c\u662f\u540c\u4e00\u4e2a\u7f51\u6bb5\uff0c\u4f8b\u5982\uff0c\u4f60\u8bbf\u95ee\u4f60\u65c1\u8fb9\u7684\u5144\u5f1f\u7684\u7535\u8111\uff0c\u90a3\u5c31\u6ca1\u7f51\u5173\u4ec0\u4e48\u4e8b\u60c5\uff0c\u76f4\u63a5\u5c06\u6e90\u5730\u5740\u548c\u76ee\u6807\u5730\u5740\u653e\u5165IP\u5934\u4e2d\uff0c\u7136\u540e\u901a\u8fc7ARP\u83b7\u5f97MAC\u5730\u5740\uff0c\u5c06\u6e90MAC\u548c\u76ee\u7684MAC\u653e\u5165MAC\u5934\u4e2d\uff0c\u53d1\u51fa\u53bb\u5c31\u53ef\u4ee5\u4e86")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5982\u679c\u4e0d\u662f\u540c\u4e00\u7f51\u6bb5\uff0c\u5206\u4e24\u79cd\u7f51\u5173:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8f6c\u53d1\u7f51\u5173, \u4e0d\u6539\u53d8\u6570\u636e\u5305IP\u5730\u5740. \u4f8b\u5982\uff0c\u4f60\u8981\u8bbf\u95ee\u4f60\u4eec\u6821\u56ed\u7f51\u91cc\u9762\u7684BBS(192.168.4.0/24), \u5047\u8bbe\u7ecf\u5386\u4e86\u8def\u7531\u5668 A, B, \u9996\u5148\u9700\u8981\u53d1\u5f80\u9ed8\u8ba4\u7f51\u5173 A, \u5c06\u6e90\u5730\u5740\u548c\u76ee\u6807IP\u5730\u5740\u653e\u5165IP\u5934\u4e2d\uff0c\u901a\u8fc7ARP\u83b7\u5f97\u7f51\u5173\u7684MAC\u5730\u5740\uff0c\u5c06\u6e90MAC\u548c\u7f51\u5173\u7684MAC\u653e\u5165MAC\u5934\u4e2d\uff0c\u53d1\u9001\u51fa\u53bb\u3002\u7f51\u5173A\u6240\u5728\u7684\u7aef\u53e3\uff0c\u4f8b\u5982192.168.1.1/24 \u53d1\u73b0 mac \u5730\u5740\u7b26\u5408, \u5c06\u7f51\u7edc\u5305\u6536\u8fdb\u6765\uff0c\u67e5\u770bA\u914d\u7f6e\u7684\u9759\u6001\u8def\u7531, \u8981\u60f3\u8bbf\u95ee192.168.4.0/24\uff0c\u8981\u4ece192.168.56.1\u8fd9\u4e2a\u53e3\u51fa\u53bb\uff0c\u4e0b\u4e00\u8df3\u4e3a192.168.56.2(\u5373 B \u7684\u5165\u53e3), \u8def\u7531\u5668A\u53d1\u9001ARP\u83b7\u53d6B \u7684MAC\u5730\u5740\uff0c\u7136\u540e\u53d1\u9001\u5305, \u5305\u5230\u8fbeB \u7684192.168.56.2\u8fd9\u4e2a\u7f51\u53e3\uff0c\u53d1\u73b0MAC\u4e00\u81f4\uff0c\u5c06\u5305\u6536\u8fdb\u6765")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"NAT \u7f51\u5173 (Network Address Translation, \u5e38\u89c1), \u6539\u53d8IP\u5730\u5740. \u5982 \u673a\u5668 x, y \u90fd\u6709\u5c40\u57df\u7f51 ip 192.168.0.101/24, \u4e24\u8005\u901a\u4fe1, \u9700\u8981\u7f51\u5173\u5728\u53d1\u51fa\u63a5\u53d7\u6570\u636e\u5305\u65f6, \u8f6c\u6362 ip \u5730\u5740\u4e3a\u516c\u7f51 ip \u5730\u5740. \u5426\u5219\u5c31\u51b2\u7a81\u4e86"))))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4eba\u4eec\u628a\u7f51\u5173\u5c31\u53eb\u4f5c\u8def\u7531\u5668\u3002\u5176\u5b9e\u4e0d\u5b8c\u5168\u51c6\u786e\uff0c\u800c\u53e6\u4e00\u79cd\u6bd4\u55bb\u66f4\u52a0\u6070\u5f53\uff1a\u8def\u7531\u5668\u662f\u4e00\u53f0\u8bbe\u5907\uff0c\u5b83\u6709\u4e94\u4e2a\u7f51\u53e3\u6216\u8005\u7f51\u5361\uff0c\u76f8\u5f53\u4e8e\u6709\u4e94\u53ea\u624b\uff0c\u5206\u522b\u8fde\u7740\u4e94\u4e2a\u5c40\u57df\u7f51\u3002\u6bcf\u53ea\u624b\u7684IP\u5730\u5740\u90fd\u548c\u5bf9\u5e94\u5c40\u57df\u7f51\u7684IP\u5730\u5740\u5904\u5728\u76f8\u540c\u7684\u7f51\u6bb5\uff0c\u6bcf\u53ea\u624b\u90fd\u662f\u5b83\u63e1\u4f4f\u7684\u90a3\u4e2a\u5c40\u57df\u7f51\u7684\u7f51\u5173;\n\u60f3\u53d1\u5f80\u5176\u4ed6\u5c40\u57df\u7f51\u7684\u5305\uff0c\u90fd\u4f1a\u5230\u8fbe\u5176\u4e2d\u4e00\u53ea\u624b\uff0c\u88ab\u62ff\u8fdb\u6765\uff0c\u62ff\u4e0bMAC\u5934\u548cIP\u5934\uff0c\u770b\u770b\uff0c\u6839\u636e\u81ea\u5df1\u7684\u8def\u7531\u7b97\u6cd5\uff0c\u9009\u62e9\u53e6\u4e00\u53ea\u624b\uff0c\u52a0\u4e0aIP\u5934\u548cMAC\u5934\uff0c\u7136\u540e\u6254\u51fa\u53bb\u3002")),(0,n.kt)("p",null,"\u6570\u636e\u5305\u8de8\u8fc7\u7f51\u5173, mac \u90fd\u4f1a\u53d8, ip \u5730\u5740\u5219\u4e0d\u4e00\u5b9a\u53d8"),(0,n.kt)("p",null,"\u9759\u6001\u8def\u7531: \u5176\u5b9e\u5c31\u662f\u5728\u8def\u7531\u5668\u4e0a\uff0c\u914d\u7f6e\u4e00\u6761\u4e00\u6761\u89c4\u5219, \u6bcf\u4e00\u6761\u89c4\u5219\u81f3\u5c11\u5305\u542b\u8fd9\u4e09\u9879\u4fe1\u606f:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u76ee\u7684\u7f51\u7edc\uff1a\u8fd9\u4e2a\u5305\u60f3\u53bb\u54ea\u513f\uff1f")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u51fa\u53e3\u8bbe\u5907\uff1a\u5c06\u5305\u4ece\u54ea\u4e2a\u53e3\u6254\u51fa\u53bb\uff1f")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e0b\u4e00\u8df3\u7f51\u5173\uff1a\u4e0b\u4e00\u4e2a\u8def\u7531\u5668\u7684\u5730\u5740"))),(0,n.kt)("p",null,"\u901a\u8fc7route\u547d\u4ee4\u548cip route\u547d\u4ee4\u914d\u7f6e, \u4f8b\u5982\uff0c\u6211\u4eec\u8bbe\u7f6eip route add 10.176.48.0/20 via 10.173.32.1 dev eth0\uff0c\u5c31\u8bf4\u660e\u8981\u53bb10.176.48.0/20\u8fd9\u4e2a\u76ee\u6807\u7f51\u7edc\uff0c\u8981\u4eceeth0\u7aef\u53e3\u51fa\u53bb\uff0c\u7ecf\u8fc710.173.32.1\u3002\u8fd8\u80fd\u914d\u7f6e\u590d\u6742\u7684\u7b56\u7565\u8def\u7531, \u5b9e\u73b0\u63a7\u5236\u8f6c\u53d1\u7b56\u7565."),(0,n.kt)("p",null,"\u52a8\u6001\u8def\u7531: \u6839\u636e\u8def\u7531\u534f\u8bae\u7b97\u6cd5\u751f\u6210\u52a8\u6001\u8def\u7531\u8868. \u52a8\u6001\u8def\u7531\u4e3b\u6d41\u7b97\u6cd5\u6709\u4e24\u79cd\uff0c\u8ddd\u79bb\u77e2\u91cf\u7b97\u6cd5\u548c\u94fe\u8def\u72b6\u6001\u7b97\u6cd5\u3002\u57fa\u4e8e\u4e24\u79cd\u7b97\u6cd5\u4ea7\u751f\u4e24\u79cd\u534f\u8bae\uff0cBGP\u534f\u8bae\u548cOSPF\u534f\u8bae"),(0,n.kt)("h3",{id:"34-nat-\u7f51\u7edc\u5730\u5740\u8f6c\u6362"},"3.4. nat \u7f51\u7edc\u5730\u5740\u8f6c\u6362"),(0,n.kt)("p",null,"NAT\uff08Network Address Translation\uff0c\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff09\u5c06IP\u6570\u636e\u62a5\u6587\u5934\u4e2d\u7684IP\u5730\u5740\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2aIP\u5730\u5740, nat \u670d\u52a1\u4e00\u822c\u90e8\u7f72\u5728\u7f51\u7edc\u51fa\u53e3\u5982\u8def\u7531\u5668/\u9632\u706b\u5899\u4e2d"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4e3a\u4ec0\u4e48\u51fa\u73b0?\nTo ease off the lack of ipv4 number\nTo expose services in private network to the public internet")),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(80147).Z,width:"1780",height:"512"})),(0,n.kt)("p",null,"\u5c40\u9650\u6027:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"NAT\u8fdd\u53cd\u4e86IP\u5730\u5740\u7ed3\u6784\u6a21\u578b\u7684\u8bbe\u8ba1\u539f\u5219"),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"\u7531\u4e8eNAT\u7684\u5b58\u5728\uff0c\u4f7f\u5f97P2P\u5e94\u7528\u5b9e\u73b0\u51fa\u73b0\u56f0\u96be\uff0c\u56e0\u4e3aP2P\u7684\u6587\u4ef6\u5171\u4eab\u4e0e\u8bed\u97f3\u5171\u4eab\u90fd\u662f\u5efa\u7acb\u5728IP\u534f\u8bae\u7684\u57fa\u7840\u4e0a\u7684"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"NAT\u4f7f\u5f97IP\u534f\u8bae\u4ece\u9762\u5411\u65e0\u8fde\u63a5\u53d8\u6210\u9762\u5411\u8fde\u63a5"),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"NAT\u5fc5\u987b\u7ef4\u62a4\u4e13\u7528IP\u5730\u5740\u4e0e\u516c\u7528IP\u5730\u5740\u4ee5\u53ca\u7aef\u53e3\u53f7\u7684\u6620\u5c04\u5173\u7cfb\u3002"),(0,n.kt)("p",{parentName:"blockquote"},"\u5728TCP/IP\u534f\u8bae\u4f53\u7cfb\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8def\u7531\u5668\u51fa\u73b0\u6545\u969c\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230TCP\u534f\u8bae\u7684\u6267\u884c\u3002\u56e0\u4e3a\u53ea\u8981\u51e0\u79d2\u6536\u4e0d\u5230\u5e94\u7b54\uff0c\u53d1\u9001\u8fdb\u7a0b\u5c31\u4f1a\u8fdb\u5165\u8d85\u65f6\u91cd\u4f20\u5904\u7406\u3002\u800c\u5f53\u5b58\u5728NAT\u65f6\uff0c\u6700\u521d\u8bbe\u8ba1\u7684TCP/IP\u534f\u8bae\u8fc7\u7a0b\u5c06\u53d1\u751f\u53d8\u5316\uff0cInternet\u53ef\u80fd\u53d8\u5f97\u975e\u5e38\u8106\u5f31\u3002")))),(0,n.kt)("h4",{id:"341-nat-\u5206\u7c7b"},"3.4.1. nat \u5206\u7c7b"),(0,n.kt)("p",null,"\u9759\u6001 nat: every single private ip will be mapped to a corresponding public ip, \u591a\u7528\u4e8e\u670d\u52a1\u5668\u3002\n\u52a8\u6001 nat: \u5728\u5916\u90e8\u7f51\u7edc\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6216\u591a\u4e2a\u5408\u6cd5\u5730\u5740\uff0c\u91c7\u7528\u52a8\u6001\u5206\u914d\u7684\u65b9\u6cd5\u6620\u5c04\u5230\u5185\u90e8\u7f51\u7edc\u3002"),(0,n.kt)("p",null,"or"),(0,n.kt)("p",null,"Basic NAT:\u53ea\u8f6c\u5316IP\uff0c\u4e0d\u6620\u5c04\u7aef\u53e3\nPAT: \u9664\u4e86\u8f6c\u5316IP\uff0c\u8fd8\u505a\u7aef\u53e3\u6620\u5c04\uff0c\u53ef\u4ee5\u7528\u4e8e\u591a\u4e2a\u5185\u90e8\u5730\u5740\u6620\u5c04\u5230\u5c11\u91cf\uff08\u751a\u81f3\u4e00\u4e2a\uff09\u5916\u90e8\u5730\u5740"),(0,n.kt)("h2",{id:"4-\u4f20\u8f93\u5c42transport-layer"},"4. \u4f20\u8f93\u5c42(transport-layer)"),(0,n.kt)("p",null,"transport-layer \u5b9a\u4e49\u4e86\u4e0d\u540c\u4e3b\u673a\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u89c4\u5219\uff0c \u662f\u901a\u7528\u7684\uff0c \u4e0d\u540c\u5e94\u7528\u6709\u4e0d\u540c\u7684\u5e94\u7528\u5c42\u534f\u8bae\uff0c\u4f46\u662f\u90fd\u662f\u57fa\u4e8e\u901a\u7528\u7684transport-layer\u534f\u8bae\uff1b"),(0,n.kt)("p",null,"\u5982 tcp, udp, sctp\u534f\u8bae"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f20\u8f93\u63a7\u5236\u534f\u8bae TCP\uff08Transmission Control Protocol\uff09--\u63d0\u4f9b\u9762\u5411\u8fde\u63a5\u7684\uff0c\u53ef\u9760\u7684\u6570\u636e\u4f20\u8f93\u670d\u52a1\u3002"),(0,n.kt)("p",{parentName:"li"},"\u6240\u8c13\u9762\u5411\u8fde\u63a5, \u5c31\u662f\u901a\u4fe1\u53cc\u65b9\u53ef\u4ee5\u7ef4\u62a4\u4e00\u5b9a\u72b6\u6001")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7528\u6237\u6570\u636e\u534f\u8bae UDP\uff08User Datagram Protocol\uff09--\u63d0\u4f9b\u65e0\u8fde\u63a5\u7684\uff0c\u4e0d\u53ef\u9760\u7684\u6570\u636e\u4f20\u8f93\u670d\u52a1"))),(0,n.kt)("h3",{id:"41-udp\u534f\u8bae"},"4.1. udp\u534f\u8bae"),(0,n.kt)("p",null,'udp\u6570\u636e\u5305\u5185\u5d4c\u5728 ip\u6570\u636e\u5305 \u7684 "data"\u90e8\u5206; \u603b\u957f\u5ea6\u6700\u5927 65535byte'),(0,n.kt)("p",null,"\u7ed3\u6784:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"head - \u5305\u62ec: send port, receive port; 8byte")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"data"))),(0,n.kt)("p",null,"\u7279\u70b9:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u65e0\u8fde\u63a5\uff0c \u4e0d\u4fdd\u8bc1\u53ef\u9760\u6027\uff0c \u76f8\u5e94\u7684\u4e5f\u65e0\u9700\u7ef4\u62a4\u8d1f\u8d23\u7684\u8fde\u63a5\u72b6\u6001"),(0,n.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u62e5\u5835\u63a7\u5236 \uff08\u56e0\u6b64\u7f51\u7edc\u51fa\u73b0\u62e5\u585e\u4e0d\u4f1a\u4f7f\u6e90\u4e3b\u673a\u7684\u53d1\u9001\u901f\u7387\u964d\u4f4e\uff08\u5bf9\u5b9e\u65f6\u5e94\u7528\u5f88\u6709\u7528\uff0c\u5982 \u76f4\u64ad\uff0c\u5b9e\u65f6\u89c6\u9891\u4f1a\u8bae\u7b49\uff09\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u53d1\u9001\u4e00\u4e2a\u4e00\u4e2a\u6570\u636e\u5305\u6765\u4f20\u8f93\u6570\u636e (\u57fa\u4e8e\u6570\u636e\u62a5\u7684\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5730\u53d1\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5730\u6536)"),(0,n.kt)("li",{parentName:"ul"},"\u652f\u6301\u4e00\u5bf9\u4e00\uff0c \u4e00\u5bf9\u591a\uff0c \u591a\u5bf9\u4e00\uff0c\u591a\u5bf9\u591a\u7684\u901a\u4fe1"),(0,n.kt)("li",{parentName:"ul"},"UDP \u7684\u9996\u90e8\u5f00\u9500\u5c0f\uff0c\u53ea\u67098\u4e2a\u5b57\u8282\uff0c\u6bd4TCP\u768420\u4e2a\u5b57\u8282\u7684\u9996\u90e8\u8981\u77ed")),(0,n.kt)("p",null,"\u4f7f\u7528\u573a\u666f:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9700\u8981\u8d44\u6e90\u5c11\uff0c\u5728\u7f51\u7edc\u60c5\u51b5\u6bd4\u8f83\u597d\u7684\u5185\u7f51\u4e2d\u4f7f\u7528, \u5982 DHCP\u5c31\u662f\u57fa\u4e8eUDP\u534f\u8bae\u7684")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e0d\u9700\u8981\u4e00\u5bf9\u4e00\u6c9f\u901a\uff0c\u800c\u662f\u53ef\u4ee5\u5e7f\u64ad\u7684\u5e94\u7528, \u5982 DHCP\u5c31\u662f\u4e00\u79cd\u5e7f\u64ad")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9700\u8981\u5904\u7406\u901f\u5ea6\u5feb\uff0c\u65f6\u5ef6\u4f4e\uff0c\u53ef\u4ee5\u5bb9\u5fcd\u5c11\u6570\u4e22\u5305\u7684\u573a\u666f, \u5982\u76f4\u64ad\uff0c\u5b9e\u65f6\u89c6\u9891\u4f1a\u8bae"))),(0,n.kt)("p",null,"QUIC\uff08\u5168\u79f0Quick UDP Internet Connections\uff0c\u5feb\u901fUDP\u4e92\u8054\u7f51\u8fde\u63a5\uff09\u662fGoogle\u63d0\u51fa\u7684\u4e00\u79cd\u57fa\u4e8eUDP\u6539\u8fdb\u7684\u901a\u4fe1\u534f\u8bae"),(0,n.kt)("p",null,"\u7269\u8054\u7f51\u901a\u4fe1\u534f\u8baeThread\uff0c\u5c31\u662f\u57fa\u4e8eUDP\u534f\u8bae\u7684"),(0,n.kt)("h3",{id:"42-tcp\u534f\u8bae"},"4.2. tcp\u534f\u8bae"),(0,n.kt)("p",null,"\u987a\u5e8f\u95ee\u9898\uff0c\u4e22\u5305\u95ee\u9898\uff0c\u8fde\u63a5\u7ef4\u62a4\uff0c\u6d41\u91cf\u63a7\u5236(\u5bf9\u53e6\u4e00\u7aef)\uff0c\u62e5\u585e\u63a7\u5236(\u9488\u5bf9\u7f51\u7edc)"),(0,n.kt)("h4",{id:"421-\u57fa\u672c\u7279\u70b9"},"4.2.1. \u57fa\u672c\u7279\u70b9"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://hit-alibaba.github.io/interview/basic/network/TCP.html"},"https://hit-alibaba.github.io/interview/basic/network/TCP.html")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9762\u5411\u8fde\u63a5, \u53ef\u4ee5\u7ef4\u62a4\u901a\u4fe1\u53cc\u65b9\u7684\u72b6\u6001")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u53d1\u9001\u5b57\u8282\u6d41\u4f20\u8f93\u6570\u636e, \u53d1\u9001\u7684\u65f6\u5019\u53d1\u7684\u662f\u4e00\u4e2a\u6d41\uff0c\u6ca1\u5934\u6ca1\u5c3e")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6709\u62e5\u585e\u63a7\u5236 (\u610f\u8bc6\u5230\u5305\u4e22\u5f03\u4e86\u6216\u8005\u7f51\u7edc\u7684\u73af\u5883\u4e0d\u597d\u4e86\uff0c\u5c31\u4f1a\u6839\u636e\u60c5\u51b5\u8c03\u6574\u81ea\u5df1\u7684\u884c\u4e3a)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6709\u786e\u8ba4\u673a\u5236, \u6bcf\u6b21\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305, \u90fd\u8981\u6536\u5230\u786e\u8ba4\u624d\u4f1a\u8ba4\u4e3a\u53d1\u9001\u6210\u529f(\u4e0d\u6210\u529f\u5c31\u91cd\u53d1)"))),(0,n.kt)("p",null,'\u5185\u5d4c\u5728ip\u6570\u636e\u5305\u7684 "data\u90e8\u5206"'),(0,n.kt)("p",null,"\u6ca1\u6709\u957f\u5ea6\u9650\u5236, \u4f46\u662f\u4e3a\u4e86\u6027\u80fd, tcp \u5305\u957f\u5ea6\u4e0d\u4f1a\u8d85\u8fc7ip\u6570\u636e\u5305\u957f\u5ea6, \u4ee5\u786e\u4fdd\u5355\u4e2atcp\u5305\u4e0d\u4f1a\u88ab\u5206\u5272"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5fc5\u987b\u5148\u5efa\u7acb\u8fde\u63a5\uff0c \u53ef\u9760\uff08\u6570\u636e\u4e0d\u4e22\u5931\uff0c\u4e0d\u91cd\u590d\uff0c\u6709\u5e8f\u5230\u8fbe\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u53ea\u80fd\u4e00\u5bf9\u4e00\u901a\u4fe1"),(0,n.kt)("li",{parentName:"ul"},"\u9762\u5411\u5b57\u8282\u6d41\uff08\u201c\u9762\u5411\u5b57\u8282\u6d41\u201d\u7684\u542b\u4e49\u662f\uff1a\u867d\u7136\u5e94\u7528\u7a0b\u5e8f\u548c TCP \u7684\u4ea4\u4e92\u662f\u4e00\u6b21\u4e00\u4e2a\u6570\u636e\u5757\uff08\u5927\u5c0f\u4e0d\u7b49\uff09\uff0c\u4f46 TCP \u628a\u5e94\u7528\u7a0b\u5e8f\u4f20\u4e0b\u6765\u7684\u6570\u636e\u4ec5\u4ec5\u770b\u6210\u662f\u4e00\u8fde\u4e32\u7684\u65e0\u7ed3\u6784\u7684\u5b57\u8282\u6d41\u3002\uff09")),(0,n.kt)("h4",{id:"422-\u4e09\u6b21\u63e1\u624b"},"4.2.2. \u4e09\u6b21\u63e1\u624b"),(0,n.kt)("p",null,'\u5efa\u7acb tcp \u8fde\u63a5\u9700\u8981 "\u4e09\u6b21\u63e1\u624b"'),(0,n.kt)("p",null,"\u56fe\u793a: ",(0,n.kt)("a",{parentName:"p",href:"https://www.draw.io/?lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=Untitled%20Diagram.xml#R7VhNc9MwEP01OXbGX%2Fk6NimFQ5lhKANHRrY3tqhsGVluEn49K1uyrcgwOaRQWnyJ9LRayfverhTPwm1xeCtIlb%2FnKbBZ4KWHWXgzCwI%2FChb4o5Bjh6x8rwMyQVNtNAD39Ado0Jg1NIXaMpScM0krG0x4WUIiLYwIwfe22Y4ze9WKZOAA9wlhLvqFpjLXqO95w8A7oFmul17N9UBMkodM8KbU682CcNc%2B3XBBjC9tX%2Bck5fsRFL6ZhVvBuexaxWELTMXWhK2bd%2FuL0X7fAkp5zoRlTGLiJ1GcBMtdFHtXQefhkbBGx6IG8QhCb1ceTYhw55VqNgW7oztgtMTepgJBC5BoH94wDX8YsM0%2BpxLuK5KoqXsUD2K5LBj2fGwin5LgFNH3GSNVTeN2VQ8RAUkjavoIH6HuZKNQ3ki10raXQ2uqaIBUu%2Boj7bV%2BC5roNiMxsE3P25YzrpYveftCtRT8AQyIdHrt048YeagldpSxkeVt%2Bygc3%2BqWFJSpbPgMIiUl0bCWvh%2Fo%2FtRChNGsRCxBTtsgZoKkFAZjvVWXey0HpE%2FCYQRpLbwFjryII5ro0eVS69Lkre7uR0lgciAf6X9uDIlOvKx3PYgPG1p%2FZ2px5WgxYeq9%2F2vx%2BWhRv3jkXUaAuNTfE6Bb%2B2bBgkkdDktyi%2B8NNwNXXQyu0cCPqsMwiK1M%2FdbH8mtMZctMsFV%2B4Dt2DsY77qtboDN35D2Ix7Ml%2Bg2kPGraSCO5Up%2BQOc94Sdgd51Uv3U5ijva6pSB1TsMTCl2%2BBDAiUfr20TsRfD31A6dtCDXPoWfz7K9P%2BKt5IxLQs8YH2Imj5dp2FEQnjiQRGUjHUauF%2Fn3OkkfkyIPRWkLp8IValzZRQhUIMlSOSm2n3eB8M5vfqMRC%2BnQu%2BaM8Y7BTrlQCUbyeXGtYKmo3NdYuWmafWp6vop5PJ93OYrTPwLXNTLR2UjCayMDgAgk4fxURXoVLO8KLPxfhhXu9my5OR1OcYmHqEh5LtqUCyqboStnGd2f8wUpWY57La3X1V6cTI3VNk085Lc3QLWVmLShTY6gPVkT0%2BLMqipF3qaJ4ejperii6d7TfyOTYyeT1HW%2FRae6ezeTKdjQ%2FlcTlmFxPloZ66r79T5ffwA%2Bnk2NUfhdPVH7N941RkAHLU%2FzCIhzYEZ77boTnTxVh%2FzVEeBUFdoTX7hXiySI88YkICwX%2BGQYsmOkLC%2FTCrr%2FhcukEen2ZQGN3%2BO7X1e%2Fh42r45ic%3D"},"online")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u6b21\u63e1\u624b(SYN=1, seq=x):"),(0,n.kt)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2a TCP\u6570\u636e\u5305, \u5305\u7684 ",(0,n.kt)("inlineCode",{parentName:"p"},"SYN\u6807\u5fd7\u4f4d")," \u4e3a1, \u6307\u660e\u5ba2\u6237\u7aef\u6253\u7b97\u8fde\u63a5\u7684\u670d\u52a1\u5668\u7684\u7aef\u53e3\uff0c\u4ee5\u53ca",(0,n.kt)("inlineCode",{parentName:"p"},"\u521d\u59cb\u5e8f\u53f7")," X,\u4fdd\u5b58\u5728\u5305\u5934\u7684\u5e8f\u5217\u53f7(Sequence Number)\u5b57\u6bb5\u91cc\u3002"),(0,n.kt)("p",{parentName:"li"},"\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u5ba2\u6237\u7aef\u8fdb\u5165 SYN_SEND \u72b6\u6001\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u6b21\u63e1\u624b(SYN=1, ACK=1, seq=y, ACKnum=x+1):"),(0,n.kt)("p",{parentName:"li"},"\u670d\u52a1\u5668\u53d1\u56de\u786e\u8ba4\u5305, \u5305\u542b\u4e24\u90e8\u5206, \u4e00\u90e8\u5206\u662f\u786e\u8ba4client\u7aef\u7684\u8fde\u63a5\u8bf7\u6c42(ACK=1, ACKnum=x+1), \u544a\u8bc9client, server\u662f\u8fd0\u884c\u7740\u7684, server \u786e\u5b9e\u63a5\u53d7\u5230\u4e86 client \u7684\u6d88\u606f; \u53e6\u4e00\u90e8\u5206\u662f server \u6d4b\u8bd5\u80fd\u5426\u94fe\u63a5 client (SYN=1, seq=y), \u9700\u8981\u7b49\u5f85 client \u7684\u54cd\u5e94\u6765\u786e\u8ba4\u3002\u5373",(0,n.kt)("inlineCode",{parentName:"p"}," SYN \u6807\u5fd7\u4f4d"),"\u548c ",(0,n.kt)("inlineCode",{parentName:"p"},"ACK \u6807\u5fd7\u4f4d"),"\u5747\u4e3a1\u3002\u670d\u52a1\u5668\u7aef\u9009\u62e9\u81ea\u5df1 ISN \u5e8f\u5217\u53f7\uff0c\u653e\u5230 Seq \u57df\u91cc\uff0c\u540c\u65f6\u5c06\u786e\u8ba4\u5e8f\u53f7(Acknowledgement Number)\u8bbe\u7f6e\u4e3a\u5ba2\u6237\u7684 ISN \u52a01\uff0c\u5373X+1\u3002 "),(0,n.kt)("p",{parentName:"li"},"\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u670d\u52a1\u5668\u7aef\u8fdb\u5165 SYN_RCVD \u72b6\u6001\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u4e09\u6b21\u63e1\u624b(ACK=1\uff0cACKnum=y+1)"),(0,n.kt)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u518d\u6b21\u53d1\u9001\u786e\u8ba4\u5305(ACK)\uff0cSYN \u6807\u5fd7\u4f4d\u4e3a0 (\u5373\u4e0d\u53d1\u9001)\uff0cACK \u6807\u5fd7\u4f4d\u4e3a1\uff0c\u5e76\u4e14\u628a\u786e\u8ba4\u5e8f\u53f7\u8bbe\u7f6e\u4f4d\u670d\u52a1\u5668\u53d1\u6765 ACK \u7684\u5e8f\u53f7\u5b57\u6bb5+1\uff0c"),(0,n.kt)("p",{parentName:"li"},"\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u5ba2\u6237\u7aef\u8fdb\u5165 ESTABLISHED \u72b6\u6001\uff0c\u5f53\u670d\u52a1\u5668\u7aef\u63a5\u6536\u5230\u8fd9\u4e2a\u5305\u65f6\uff0c\u4e5f\u8fdb\u5165 ESTABLISHED \u72b6\u6001\uff0cTCP \u63e1\u624b\u7ed3\u675f\u3002"))),(0,n.kt)("p",null,"\u603b\u7ed3: \u4e00\u5f00\u59cb\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u90fd\u5904\u4e8eCLOSED\u72b6\u6001\u3002\u5148\u662f\u670d\u52a1\u7aef\u4e3b\u52a8\u76d1\u542c\u67d0\u4e2a\u7aef\u53e3\uff0c\u5904\u4e8eLISTEN\u72b6\u6001\u3002\u7136\u540e\u5ba2\u6237\u7aef\u4e3b\u52a8\u53d1\u8d77\u8fde\u63a5SYN\uff0c\u4e4b\u540e\u5904\u4e8eSYN-SENT\u72b6\u6001\u3002\u670d\u52a1\u7aef\u6536\u5230\u53d1\u8d77\u7684\u8fde\u63a5\uff0c\u8fd4\u56deSYN\uff0c\u5e76\u4e14ACK\u5ba2\u6237\u7aef\u7684SYN\uff0c\u4e4b\u540e\u5904\u4e8eSYN-RCVD\u72b6\u6001\u3002\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u7aef\u53d1\u9001\u7684SYN\u548cACK\u4e4b\u540e\uff0c\u53d1\u9001ACK\u7684ACK\uff0c\u4e4b\u540e\u5904\u4e8eESTABLISHED\u72b6\u6001\uff0c\u56e0\u4e3a\u5b83\u4e00\u53d1\u4e00\u6536\u6210\u529f\u4e86\u3002\u670d\u52a1\u7aef\u6536\u5230ACK\u7684ACK\u4e4b\u540e\uff0c\u5904\u4e8eESTABLISHED\u72b6\u6001\uff0c\u56e0\u4e3a\u5b83\u4e5f\u4e00\u53d1\u4e00\u6536\u4e86\u3002"),(0,n.kt)("p",null,"\u4e3a\u4ec0\u4e48\u4e24\u6b21\u63e1\u624b\u4e0d\u884c?"),(0,n.kt)("p",null,"\u5982\u679c\u53ea\u6709\u4e24\u6b21\u63e1\u624b, \u53ef\u80fd\u51fa\u73b0\u8fd9\u79cd\u9519\u8bef: \u8d85\u65f6\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u7a81\u7136\u6210\u529f\u5230\u8fbe\u670d\u52a1\u7aef, \u670d\u52a1\u7aef\u6210\u529f\u8fdb\u5165\u94fe\u63a5\u5efa\u7acb\u72b6\u6001, \u800c\u6b64\u65f6\u5ba2\u6237\u7aef\u5df2\u7ecf\u4f7f\u7528\u5b8c\u5173\u95ed\u4e86, \u90a3\u4e48\u670d\u52a1\u7aef\u4f1a\u6c38\u8fdc\u65e0\u6cd5\u5173\u95ed."),(0,n.kt)("p",null,"\u4e3a\u4ec0\u4e48\u56db\u6b21\u63e1\u624b\u4e0d\u884c?"),(0,n.kt)("p",null,"\u662f\u53ef\u4ee5\u7684, \u4f46\u662f\u8017\u8d39\u8d44\u6e90. \u7b2c\u4e09\u6b21\u63e1\u624b\u540e, \u5ba2\u6237\u7aef\u4f1a\u7ee7\u7eed\u53d1\u9001\u6570\u636e, server \u7aef\u6536\u5230, \u8fd9\u5b8c\u5168\u53ef\u4ee5\u4ee3\u66ff\u7b2c\u56db\u6b21\u63e1\u624b."),(0,n.kt)("h4",{id:"423-\u56db\u6b21\u6325\u624b"},"4.2.3. \u56db\u6b21\u6325\u624b"),(0,n.kt)("p",null,'\u65ad\u5f00 tcp \u8fde\u63a5\u9700\u8981 "\u56db\u6b21\u6325\u624b"'),(0,n.kt)("p",null,"\u56fe\u793a: ",(0,n.kt)("a",{parentName:"p",href:"https://www.draw.io/?lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=Untitled%20Diagram.xml#R7Vrfl6I2FP5rfJxzIIDAozrjdk5n2z3V032cEyFiupGwIY7av74JJECI0zpW7XYcXoSbmxu433d%2FEBx4k%2FXuE4PF6jNNERkAJ90NvPsBAK4PhuJHSva1JHKdWpAxnCqlVjDDfyIl1GobnKLSUOSUEo4LU5jQPEcJN2SQMbo11ZaUmKsWMEOWYJZAYku%2F4pSvlNR1nHbgJ4SzlVo6CtTAAibfMkY3uVpvALxlddTDa6htKf1yBVO67Yi8h4E3YZTy%2Bmy9myAifavdVs%2BbvjLa3DdDOT9mQriAC%2Bgm%2FiIB4dJfOHegtvACyUb5okTsBTF1u3yvXSTuvJCnmzV5wktEcC6uxgVieI240PfuiRJ%2FaWXj7QpzNCtgIqduBXmEbMXXRFy54lTgyaGYwpprQmBR4kW1qiMkDCUbVuIX9Bsqa9pIKd1wudKkoUOlKmFAqTLVeNqp7K5xos4JXCAybnCbUELl8jmtHqjkjH5DWijgdKqjGdH0kEssMSEdzWl1SLl4qilcYyKj4XfEUphDJVbUd4G6PrQQJDjLhSwRmFZOzBhMMWqV1a3a2Cs6CPg42nVEigufEBW4sL1QUaNhENZTVNx6Q8XTbScKdBCsOgEgQiNS4adCL2uMt%2FQTJ4qBR7IxstiYEPnkH2z8cdioHtx3zkNBoFPpf0NBO%2F8NwJBw5RCDdMPvG6oH7movjISC6xe7dlCcZfK33OfPC8wrbMBE2kHfxcVOWxf3VS9Qq1sEb%2BnjmCT9A3G%2BV8DBDaeSf4yvaEZzSJ4oLRry1iSz2FcvhVKrIvZAtBFjiEAuyG%2BW3wPOV1O%2FUFy5UCHtOWay8UPHNFHSDUuQmtUtYj1DYWwaCkDPEIcsQ9wyVHGheZ6j6OFb9CC45Ci38BJs5yZQTKYI2OaOQt5OdYPBeBDcy9AS8KlocjuRRtBSmpIhhEWLMlJiLqEdlyJ74TybVzjf%2BQ2eVsAdhaiOQX9oIgNiKwb9AyHY9%2FspARjchIcj3zc97F%2FPw0O7xTucnPY6OS2YzkuiMJmaUpBv1nUqG7v2jCtmslLEOR%2FJ9l%2FWJwLLEifzFc710BQTvRbKU62oSquQqPEfKikOo3MlxeHFkqLdpf0NTfY1TW6vvIXOqUhGPUN9SpwPyfhgaigPddz%2F6%2FTb5NF%2BcHTS7%2FBC6VfvcXScjER6WrwzD3umh8PY9nBwKQ%2B7t%2BDhCJgtRORd0cMHtolEohCvw0gkzPS9ORqYJVlvknQcHV%2FK0XaztsSvvUneQk01s0oUBKfWVNNQ7PUMna%2BmuqEF4T930R89879gheucvpPQo0VwsVbLtbtm%2FfKU4pf27akWicSWa9n08Zfnr6PH%2BbPb2TzqKnTEhqn3lJT7HVx84AU6ulRSttvkI6GbPP06e6jAu2Ho%2BnsfrgPszuVSBRXY3fcrBXV%2FCwU1jM2dvvYT51tTp%2Bf2LIG%2BpfPlTmA3%2BG%2FNneCGA7B5BW1A18XoCslTN9N2O3T3sVfUBk%2Ff1aduFrneBcPQOzUMn0az%2BfNo8vMNB2Hke70gjK8YhPZ3rCORmz9%2BvvkGpt97uiAG14PO%2FkD2lubz%2FoZxizxzI8f1fBu3S237Hvjs9oHbsZ%2Bjox5usXsp3MRl%2B%2B%2B7uia2f3H0Hv4C"},"online")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u6b21\u6325\u624b(FIN=1\uff0cseq=x)"),(0,n.kt)("p",{parentName:"li"},"\u5047\u8bbe\u5ba2\u6237\u7aef\u60f3\u8981\u5173\u95ed\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2a FIN \u6807\u5fd7\u4f4d\u4e3a1\u7684\u5305\uff0c\u8868\u793a\u81ea\u5df1\u5df2\u7ecf\u6ca1\u6709\u6570\u636e\u53ef\u4ee5\u53d1\u9001\u4e86\uff0c\u4f46\u662f\u4ecd\u7136\u53ef\u4ee5\u63a5\u53d7\u6570\u636e\u3002"),(0,n.kt)("p",{parentName:"li"},"\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u5ba2\u6237\u7aef\u8fdb\u5165 FIN_WAIT_1 \u72b6\u6001\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u6b21\u6325\u624b(ACK=1\uff0cACKnum=x+1)"),(0,n.kt)("p",{parentName:"li"},"\u670d\u52a1\u5668\u7aef\u786e\u8ba4\u5ba2\u6237\u7aef\u7684 FIN \u5305\uff0c\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\u5305\uff0c\u8868\u660e\u81ea\u5df1\u63a5\u53d7\u5230\u4e86\u5ba2\u6237\u7aef\u5173\u95ed\u8fde\u63a5\u7684\u8bf7\u6c42\uff0c\u4f46\u8fd8\u6ca1\u6709\u51c6\u5907\u597d\u5173\u95ed\u8fde\u63a5\u3002"),(0,n.kt)("p",{parentName:"li"},"\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u670d\u52a1\u5668\u7aef\u8fdb\u5165 CLOSE_WAIT \u72b6\u6001\uff0c\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u8fd9\u4e2a\u786e\u8ba4\u5305\u4e4b\u540e\uff0c\u8fdb\u5165 FIN_WAIT_2 \u72b6\u6001\uff0c\u7b49\u5f85\u670d\u52a1\u5668\u7aef\u5173\u95ed\u8fde\u63a5\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u4e09\u6b21\u6325\u624b(FIN=1\uff0cseq=y)"),(0,n.kt)("p",{parentName:"li"},"\u670d\u52a1\u5668\u7aef\u51c6\u5907\u597d\u5173\u95ed\u8fde\u63a5\u65f6\uff0c\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u7ed3\u675f\u8fde\u63a5\u8bf7\u6c42\uff0cFIN \u7f6e\u4e3a1\u3002"),(0,n.kt)("p",{parentName:"li"},"\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u670d\u52a1\u5668\u7aef\u8fdb\u5165 LAST_ACK \u72b6\u6001\uff0c\u7b49\u5f85\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u6700\u540e\u4e00\u4e2aACK\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u7b2c\u56db\u6b21\u6325\u624b(ACK=1\uff0cACKnum=y+1)"),(0,n.kt)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u6765\u81ea\u670d\u52a1\u5668\u7aef\u7684\u5173\u95ed\u8bf7\u6c42\uff0c\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\u5305\uff0c\u5e76\u8fdb\u5165 TIME_WAIT \u72b6\u6001\uff0c\u7b49\u5f85\u53ef\u80fd\u51fa\u73b0\u7684\u8981\u6c42\u91cd\u4f20\u7684 ACK \u5305\u3002"),(0,n.kt)("p",{parentName:"li"},"\u670d\u52a1\u5668\u7aef\u63a5\u6536\u5230\u8fd9\u4e2a\u786e\u8ba4\u5305\u4e4b\u540e\uff0c\u5173\u95ed\u8fde\u63a5\uff0c\u8fdb\u5165 CLOSED \u72b6\u6001\u3002"),(0,n.kt)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u7b49\u5f85\u4e86\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\uff08\u4e24\u4e2a\u6700\u5927\u6bb5\u751f\u547d\u5468\u671f\uff0c2MSL\uff0c2 Maximum Segment Lifetime\uff09\u4e4b\u540e\uff0c\u6ca1\u6709\u6536\u5230\u670d\u52a1\u5668\u7aef\u7684 ACK \uff0c\u8ba4\u4e3a\u670d\u52a1\u5668\u7aef\u5df2\u7ecf\u6b63\u5e38\u5173\u95ed\u8fde\u63a5\uff0c\u4e8e\u662f\u81ea\u5df1\u4e5f\u5173\u95ed\u8fde\u63a5\uff0c\u8fdb\u5165 CLOSED \u72b6\u6001\u3002"))),(0,n.kt)("p",null,"\u4e3a\u4ec0\u4e48\u9700\u8981\u56db\u6b21\u6325\u624b?"),(0,n.kt)("p",null,"TCP\u8fde\u63a5\u662f\u53cc\u5411\u7684\uff0c\u56e0\u6b64\u5728\u56db\u6b21\u6325\u624b\u4e2d\uff0c\u524d\u4e24\u6b21\u6325\u624b\u7528\u4e8e\u65ad\u5f00\u4e00\u4e2a\u65b9\u5411\u7684\u8fde\u63a5\uff0c\u540e\u4e24\u6b21\u6325\u624b\u7528\u4e8e\u65ad\u5f00\u53e6\u4e00\u65b9\u5411\u7684\u8fde\u63a5"),(0,n.kt)("h4",{id:"424-tcp\u5305\u7684\u5e8f\u53f7\u95ee\u9898"},"4.2.4. TCP\u5305\u7684\u5e8f\u53f7\u95ee\u9898"),(0,n.kt)("p",null,"A\u8981\u544a\u8bc9B\uff0c\u6211\u8fd9\u9762\u53d1\u8d77\u7684\u5305\u7684\u5e8f\u53f7\u8d77\u59cb\u662f\u4ece\u54ea\u4e2a\u53f7\u5f00\u59cb\u7684\uff0cB\u540c\u6837\u4e5f\u8981\u544a\u8bc9A\uff0cB\u53d1\u8d77\u7684\u5305\u7684\u5e8f\u53f7\u8d77\u59cb\u662f\u4ece\u54ea\u4e2a\u53f7\u5f00\u59cb\u7684\u3002"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4e3a\u4ec0\u4e48\u5e8f\u53f7\u4e0d\u80fd\u90fd\u4ece1\u5f00\u59cb\u5462\uff1f\n\u56e0\u4e3a\u8fd9\u6837\u5f80\u5f80\u4f1a\u51fa\u73b0\u51b2\u7a81\u3002\u4f8b\u5982\uff0cA\u8fde\u4e0aB\u4e4b\u540e\uff0c\u53d1\u9001\u4e861\u30012\u30013\u4e09\u4e2a\u5305\uff0c\u4f46\u662f\u53d1\u90013\u7684\u65f6\u5019\uff0c\u4e2d\u95f4\u4e22\u4e86\uff0c\u6216\u8005\u7ed5\u8def\u4e86\uff0c\u4e8e\u662f\u91cd\u65b0\u53d1\u9001\uff0c\u540e\u6765A\u6389\u7ebf\u4e86\uff0c\u91cd\u65b0\u8fde\u4e0aB\u540e\uff0c\u5e8f\u53f7\u53c8\u4ece1\u5f00\u59cb\uff0c\u7136\u540e\u53d1\u90012\uff0c\u4f46\u662f\u538b\u6839\u6ca1\u60f3\u53d1\u90013\uff0c\u4f46\u662f\u4e0a\u6b21\u7ed5\u8def\u7684\u90a3\u4e2a3\u53c8\u56de\u6765\u4e86\uff0c\u53d1\u7ed9\u4e86B\uff0cB\u81ea\u7136\u8ba4\u4e3a\uff0c\u8fd9\u5c31\u662f\u4e0b\u4e00\u4e2a\u5305\uff0c\u4e8e\u662f\u53d1\u751f\u4e86\u9519\u8bef\u3002\n\u56e0\u800c\uff0c\u6bcf\u4e2a\u8fde\u63a5\u90fd\u8981\u6709\u4e0d\u540c\u7684\u5e8f\u53f7\u3002\u8fd9\u4e2a\u5e8f\u53f7\u7684\u8d77\u59cb\u5e8f\u53f7\u662f\u968f\u7740\u65f6\u95f4\u53d8\u5316\u7684\uff0c\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a32\u4f4d\u7684\u8ba1\u6570\u5668\uff0c\u6bcf4ms\u52a0\u4e00\uff0c\u5982\u679c\u8ba1\u7b97\u4e00\u4e0b\uff0c\u5982\u679c\u5230\u91cd\u590d\uff0c\u9700\u89814\u4e2a\u591a\u5c0f\u65f6\uff0c\u90a3\u4e2a\u7ed5\u8def\u7684\u5305\u65e9\u5c31\u6b7b\u7fd8\u7fd8\u4e86")),(0,n.kt)("h3",{id:"43-tcp\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u4f20\u8f93"},"4.3. tcp\u5982\u4f55\u4fdd\u8bc1\u53ef\u9760\u4f20\u8f93"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u6570\u636e\u88ab\u5206\u5272\u6210\u5408\u9002\u7684\u6570\u636e\u5757"),(0,n.kt)("li",{parentName:"ul"},"tcp\u4f1a\u7ed9\u6bcf\u4e2a\u6570\u636e\u62a5\u7f16\u53f7\uff0c \u63a5\u6536\u65b9\u63a5\u6536\u5230\u540e\u6392\u5e8f\uff1b"),(0,n.kt)("li",{parentName:"ul"},"\u6821\u9a8c\u548c - tcp\u5c06\u7ef4\u62a4\u9996\u90e8\u548c\u6570\u636e\u7684\u6821\u9a8c\u548c\uff0c\u76ee\u7684\u662f\u68c0\u6d4b\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u4efb\u4f55\u53d8\u5316\u3002\u5982\u679c\u6536\u5230\u6bb5\u7684\u68c0\u9a8c\u548c\u6709\u5dee\u9519\uff0cTCP \u5c06\u4e22\u5f03\u8fd9\u4e2a\u62a5\u6587\u6bb5"),(0,n.kt)("li",{parentName:"ul"},"TCP \u7684\u63a5\u6536\u7aef\u4f1a\u4e22\u5f03\u91cd\u590d\u7684\u6570\u636e\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u62e5\u585e\u63a7\u5236\uff1a \u5f53\u7f51\u7edc\u62e5\u585e\u65f6\uff0c\u51cf\u5c11\u6570\u636e\u7684\u53d1\u9001\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u505c\u6b62\u7b49\u5f85\u534f\u8bae \u4e5f\u662f\u4e3a\u4e86\u5b9e\u73b0\u53ef\u9760\u4f20\u8f93\u7684\uff0c\u5b83\u7684\u57fa\u672c\u539f\u7406\u5c31\u662f\u6bcf\u53d1\u5b8c\u4e00\u4e2a\u5206\u7ec4\u5c31\u505c\u6b62\u53d1\u9001\uff0c\u7b49\u5f85\u5bf9\u65b9\u786e\u8ba4\u3002\u5728\u6536\u5230\u786e\u8ba4\u540e\u518d\u53d1\u4e0b\u4e00\u4e2a\u5206\u7ec4"),(0,n.kt)("li",{parentName:"ul"},"\u8d85\u65f6\u91cd\u4f20\uff1a \u5f53 TCP \u53d1\u51fa\u4e00\u4e2a\u6bb5\u540e\uff0c\u5b83\u542f\u52a8\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u7b49\u5f85\u76ee\u7684\u7aef\u786e\u8ba4\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u6bb5\u3002\u5982\u679c\u4e0d\u80fd\u53ca\u65f6\u6536\u5230\u4e00\u4e2a\u786e\u8ba4\uff0c\u5c06\u91cd\u53d1\u8fd9\u4e2a\u62a5\u6587\u6bb5\u3002")),(0,n.kt)("p",null,"TCP\u534f\u8bae\u4e3a\u4e86\u4fdd\u8bc1\u987a\u5e8f\u6027\uff0c\u6bcf\u4e00\u4e2a\u5305\u90fd\u6709\u4e00\u4e2aID\u3002\u5728\u5efa\u7acb\u8fde\u63a5\u7684\u65f6\u5019\uff0c\u4f1a\u5546\u5b9a\u8d77\u59cb\u7684ID\u662f\u4ec0\u4e48\uff0c\u7136\u540e\u6309\u7167ID\u4e00\u4e2a\u4e2a\u53d1\u9001, \u5bf9\u4e8e\u53d1\u9001\u7684\u5305\u90fd\u8981\u8fdb\u884c\u5e94\u7b54, \u8fd9\u4e2a\u5e94\u7b54\u4e5f\u4e0d\u662f\u4e00\u4e2a\u4e00\u4e2a\u6765\u7684, \u800c\u662f\u4f1a\u5e94\u7b54\u67d0\u4e2a\u4e4b\u524d\u7684ID\uff0c\u8868\u793a\u90fd\u6536\u5230\u4e86\uff0c\u8fd9\u79cd\u6a21\u5f0f\u79f0\u4e3a\u7d2f\u8ba1\u786e\u8ba4\u6216\u8005\u7d2f\u8ba1\u5e94\u7b54\uff08cumulative acknowledgment\uff09\u3002"),(0,n.kt)("p",null,"\u8fd9\u5c31\u9700\u8981\u53d1\u63a5\u53cc\u65b9\u90fd\u8981\u7ef4\u62a4\u6570\u636e\u5305\u7684\u7f13\u5b58, \u53d1\u9001\u7aef\u7684\u7f13\u5b58\u91cc\u662f\u6309\u7167\u5305\u7684ID\u4e00\u4e2a\u4e2a\u6392\u5217\uff0c\u6839\u636e\u5904\u7406\u7684\u60c5\u51b5\u5206\u6210\u56db\u4e2a\u90e8\u5206:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u53d1\u9001\u4e86\u5e76\u4e14\u5df2\u7ecf\u786e\u8ba4\u7684"),(0,n.kt)("li",{parentName:"ol"},"\u53d1\u9001\u4e86\u5e76\u4e14\u5c1a\u672a\u786e\u8ba4\u7684"),(0,n.kt)("li",{parentName:"ol"},"\u6ca1\u6709\u53d1\u9001\uff0c\u4f46\u662f\u5df2\u7ecf\u7b49\u5f85\u53d1\u9001\u7684"),(0,n.kt)("li",{parentName:"ol"},"\u6ca1\u6709\u53d1\u9001\uff0c\u5e76\u4e14\u6682\u65f6\u8fd8\u4e0d\u4f1a\u53d1\u9001\u7684")),(0,n.kt)("p",null,"\u8fd9\u91cc\u9762\u4e3a\u4ec0\u4e48\u8981\u533a\u5206\u7b2c\u4e09\u90e8\u5206\u548c\u7b2c\u56db\u90e8\u5206\u5462\uff1f\u4e3a\u4e86\u6d41\u91cf\u63a7\u5236, \u9632\u6b62\u62e5\u5835"),(0,n.kt)("p",null,"\u63a5\u6536\u7aef\u4f1a\u7ed9\u53d1\u9001\u7aef\u62a5\u4e00\u4e2a\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u53ebAdvertised window\u3002\u8fd9\u4e2a\u7a97\u53e3\u7684\u5927\u5c0f\u5e94\u8be5\u7b49\u4e8e\u4e0a\u9762\u7684\u7b2c\u4e8c\u90e8\u5206\u52a0\u4e0a\u7b2c\u4e09\u90e8\u5206\uff0c\u5c31\u662f\u5df2\u7ecf\u4ea4\u4ee3\u4e86\u6ca1\u505a\u5b8c\u7684\u52a0\u4e0a\u9a6c\u4e0a\u8981\u4ea4\u4ee3\u7684\u3002\u8d85\u8fc7\u8fd9\u4e2a\u7a97\u53e3\u7684\uff0c\u63a5\u6536\u7aef\u505a\u4e0d\u8fc7\u6765\uff0c\u5c31\u4e0d\u80fd\u53d1\u9001\u4e86"),(0,n.kt)("p",null,"\u6d89\u53ca\u5230\u4e09\u4e2a\u503c:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"LastByteAcked\uff1a\u7b2c\u4e00\u90e8\u5206\u548c\u7b2c\u4e8c\u90e8\u5206\u7684\u5206\u754c\u7ebf")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"LastByteSent\uff1a\u7b2c\u4e8c\u90e8\u5206\u548c\u7b2c\u4e09\u90e8\u5206\u7684\u5206\u754c\u7ebf")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"LastByteAcked + len(AdvertisedWindow)\uff1a\u7b2c\u4e09\u90e8\u5206\u548c\u7b2c\u56db\u90e8\u5206\u7684\u5206\u754c\u7ebf"))),(0,n.kt)("p",null,"\u5bf9\u4e8e\u63a5\u6536\u7aef\u6765\u8bb2\uff0c\u5b83\u7684\u7f13\u5b58\u91cc\u8bb0\u5f55\u7684\u5185\u5bb9:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u63a5\u53d7\u5e76\u4e14\u786e\u8ba4\u8fc7\u7684"),(0,n.kt)("li",{parentName:"ol"},"\u8fd8\u6ca1\u63a5\u6536\uff0c\u4f46\u662f\u9a6c\u4e0a\u5c31\u80fd\u63a5\u6536\u7684 (\u80fd\u591f\u63a5\u53d7\u7684\u6700\u5927\u5de5\u4f5c\u91cf)"),(0,n.kt)("li",{parentName:"ol"},"\u8fd8\u6ca1\u63a5\u6536\uff0c\u4e5f\u6ca1\u6cd5\u63a5\u6536\u7684")),(0,n.kt)("p",null,"\u6d89\u53ca\u5230\u4e09\u4e2a\u503c:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"MaxRcvBuffer\uff1a\u6700\u5927\u7f13\u5b58\u7684\u91cf\uff1b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"LastByteRead\u4e4b\u540e\u662f\u5df2\u7ecf\u63a5\u6536\u4e86\uff0c\u4f46\u662f\u8fd8\u6ca1\u88ab\u5e94\u7528\u5c42\u8bfb\u53d6\u7684\uff1b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"NextByteExpected\u662f\u7b2c\u4e00\u90e8\u5206\u548c\u7b2c\u4e8c\u90e8\u5206\u7684\u5206\u754c\u7ebf"))),(0,n.kt)("p",null,"TODO"),(0,n.kt)("h2",{id:"5-\u5e94\u7528\u5c42application-layer"},"5. \u5e94\u7528\u5c42(application-layer)"),(0,n.kt)("p",null,"application-layer \u5b9a\u4e49\u4e86app\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u89c4\u5219\uff0c\u4e13\u95e8\u5b8c\u6210\u8fdb\u7a0b\u95f4\u7684\u6570\u636e\u4ea4\u4e92, \u4e0d\u540c\u5e94\u7528\u6709\u4e0d\u540c\u7684\u5e94\u7528\u5c42\u534f\u8bae"),(0,n.kt)("p",null,"\u5e94\u7528\u5c42\u534f\u8bae\u5305\u62ec\uff1aDHCP(\u5206\u914d ip), DNS\uff08\u57df\u540d\u67e5\u8be2\uff09, HTTP/HTTPS\uff08\u7f51\u9875\u8bbf\u95ee\uff09\uff0cSMTP\u90ae\u4ef6\u534f\u8bae,  P2p, rpc\uff1b"),(0,n.kt)("p",null,"\u5e94\u7528\u5c42\u4ea4\u4e92\u7684\u6570\u636e\u5355\u5143\u79f0\u4e3a\u62a5\u6587\u3002"),(0,n.kt)("h2",{id:"6-\u5165\u95e8"},"6. \u5165\u95e8"),(0,n.kt)("h3",{id:"61-\u4e94\u5c42\u6a21\u578b"},"6.1. \u4e94\u5c42\u6a21\u578b"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5e94\u7528\u5c42: (http) \u4e1a\u52a1\u6570\u636e\u5c01\u88c5"),(0,n.kt)("li",{parentName:"ol"},"\u4f20\u8f93\u5c42 (tcp) "),(0,n.kt)("li",{parentName:"ol"},"\u7f51\u7edc\u5c42(ip) \u8fdc\u7a0b\u8def\u7531"),(0,n.kt)("li",{parentName:"ol"},"\u6570\u636e\u94fe\u8def\u5c42(mac) \u5c40\u57df\u7f51\u5b9a\u4f4d"),(0,n.kt)("li",{parentName:"ol"},"\u7269\u7406\u5c42 (\u7f51\u7ebf) \u8fde\u63a5")),(0,n.kt)("p",null,"\u6240\u8c13\u7684\u4e8c\u5c42\u8bbe\u5907\u3001\u4e09\u5c42\u8bbe\u5907\uff0c\u90fd\u662f\u8fd9\u4e9b\u8bbe\u5907\u4e0a\u8dd1\u7684\u7a0b\u5e8f\u4e0d\u540c\u800c\u5df2\u3002\u4e00\u4e2aHTTP\u534f\u8bae\u7684\u5305\u7ecf\u8fc7\u4e00\u4e2a\u4e8c\u5c42\u8bbe\u5907\uff0c\u4e8c\u5c42\u8bbe\u5907\u6536\u8fdb\u53bb\u7684\u662f\u6574\u4e2a\u7f51\u7edc\u5305\u3002\u8fd9\u91cc\u9762HTTP\u3001TCP\u3001 IP\u3001 MAC\u90fd\u6709\u3002\u4ec0\u4e48\u53eb\u4e8c\u5c42\u8bbe\u5907\u5440\uff0c\u5c31\u662f\u53ea\u628aMAC\u5934\u6458\u4e0b\u6765\uff0c\u770b\u770b\u5230\u5e95\u662f\u4e22\u5f03\u3001\u8f6c\u53d1\uff0c\u8fd8\u662f\u81ea\u5df1\u7559\u7740\u3002\u90a3\u4ec0\u4e48\u53eb\u4e09\u5c42\u8bbe\u5907\u5462\uff1f\u5c31\u662f\u628aMAC\u5934\u6458\u4e0b\u6765\u4e4b\u540e\uff0c\u518d\u628aIP\u5934\u6458\u4e0b\u6765\uff0c\u770b\u770b\u5230\u5e95\u662f\u4e22\u5f03\u3001\u8f6c\u53d1\uff0c\u8fd8\u662f\u81ea\u5df1\u7559\u7740"),(0,n.kt)("h3",{id:"62-\u4e00\u6b21\u8bf7\u6c42\u6d89\u53ca\u5230\u7684\u7f51\u7edc\u534f\u8bae"},"6.2. \u4e00\u6b21\u8bf7\u6c42\u6d89\u53ca\u5230\u7684\u7f51\u7edc\u534f\u8bae"),(0,n.kt)("p",null,"\u4e09\u8981\u7d20: \u8bed\u6cd5, \u8bed\u4e49, \u987a\u5e8f"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5e94\u7528\u5c42: \u8f93\u5165 URL, \u6d4f\u89c8\u5668\u901a\u8fc7 DNS/httpdns \u67e5\u627e \u5230 ip \u5730\u5740 (\u5047\u8bbe \u672c\u673a host \u4e2d\u6ca1\u6709\u4efb\u4f55\u914d\u7f6e), \u6839\u636e HTTP/HTTPS \u534f\u8bae, \u6d4f\u89c8\u5668\u6253\u5305\u8bf7\u6c42, \u4ea4\u7ed9\u4f20\u8f93\u5c42."),(0,n.kt)("li",{parentName:"ol"},"\u4f20\u8f93\u5c42: tcp/udp \u534f\u8bae\u5c06\u6d4f\u89c8\u5668\u76d1\u542c\u7aef\u53e3, \u76ee\u6807\u670d\u52a1\u5668\u7aef\u53e3\u5c01\u88c5, \u4ea4\u7ed9\u7f51\u7edc\u5c42"),(0,n.kt)("li",{parentName:"ol"},"\u7f51\u7edc\u5c42: ip \u534f\u8bae\u5c06\u5c06\u672c\u673a ip \u548c\u76ee\u6807 ip \u5c01\u88c5. \u4ea4\u7ed9mac \u5c42(\u6570\u636e\u94fe\u8def\u5c42)"),(0,n.kt)("li",{parentName:"ol"},"mac \u5c42: os  \u901a\u8fc7 ARP \u534f\u8bae\u4ee5\u53ca\u9ed8\u8ba4\u7f51\u5173 ip \u627e\u5230\u672c\u5730\u7f51\u5173 mac \u5730\u5740(\u4e00\u822c\u5728 os \u542f\u52a8\u65f6, os \u6839\u636e DHCP\u534f\u8bae\u5206\u914d\u672c\u673a ip \u5730\u5740, \u5df2\u7ecf\u7f51\u5173\u5730\u5740192.168.1.1). \u5c06\u672c\u673a mac \u5730\u5740, \u7f51\u5173 mac \u5730\u5740\u5c01\u88c5, \u4ea4\u7ed9\u7f51\u5361, \u53d1\u7ed9\u672c\u5730\u7f51\u5173"),(0,n.kt)("li",{parentName:"ol"},"\u7f51\u5173/\u8def\u7531\u5668\u5728\u4e0d\u540c\u7684\u5c40\u57df\u7f51\u95f4, \u901a\u8fc7\u8def\u7531\u534f\u8bae\uff0c(\u5e38\u7528\u7684\u6709OSPF\u548cBGP)\u6c9f\u901a")),(0,n.kt)("h3",{id:"63-\u6570\u636e\u5305\u7ed3\u6784"},"6.3. \u6570\u636e\u5305\u7ed3\u6784"),(0,n.kt)("p",null,"Mac\u5934 Ip\u5934 Tcp\u5934 Http\u5934 \u6570\u636e\u4f53"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4ee5\u592a\u7f51\u5934\u90e8 (mac header)  ---  \u5728\u6570\u636e\u94fe\u8def\u5c42\u5305\u88c5/\u89e3\u9664",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"target mac address 48bit"),(0,n.kt)("li",{parentName:"ul"},"source mac address 48bit"),(0,n.kt)("li",{parentName:"ul"},"\u534f\u8bae\u7c7b\u578b 16bit : \u7528\u6765\u8bf4\u660e\u91cc\u9762\u662fIP\u534f\u8bae"))),(0,n.kt)("li",{parentName:"ul"},"ip header                 --- \u5728\u7f51\u7edc\u5c42\u5305\u88c5/\u89e3\u9664",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u7248\u672c 4bit: \u76ee\u524d\u4e3b\u6d41\u7684\u8fd8\u662fIPv4"),(0,n.kt)("li",{parentName:"ul"},"\u9996\u90e8\u957f\u5ea6 4bit"),(0,n.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7c7b\u578b TOS (type of service) 8bit:  \u4ee3\u8868\u4e86\u5f53\u524d\u7684\u5305\u662f\u9ad8\u4f18\u5148\u7ea7\u7684\uff0c\u8fd8\u662f\u4f4e\u4f18\u5148\u7ea7\u7684\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u603b\u957f\u5ea6 16bit"),(0,n.kt)("li",{parentName:"ul"},"\u6807\u8bc6 16bit"),(0,n.kt)("li",{parentName:"ul"},"\u6807\u5fd7 3bit"),(0,n.kt)("li",{parentName:"ul"},"\u7247\u504f\u79fb 13bit"),(0,n.kt)("li",{parentName:"ul"},"TTL 8bit"),(0,n.kt)("li",{parentName:"ul"},"\u534f\u8bae 8bit: TCP\u8fd8\u662fUDP"),(0,n.kt)("li",{parentName:"ul"},"\u9996\u90e8\u6821\u9a8c\u548c 16bit"),(0,n.kt)("li",{parentName:"ul"},"\u6e90 ip address 32bit"),(0,n.kt)("li",{parentName:"ul"},"\u76ee\u7684 ip address 32bit"),(0,n.kt)("li",{parentName:"ul"},"\u9009\u9879"))),(0,n.kt)("li",{parentName:"ul"},"tcp header               --- \u4f20\u8f93\u5c42\u5305\u88c5/\u89e3\u9664",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6e90 port number"),(0,n.kt)("li",{parentName:"ul"},"\u76ee\u7684 port number"),(0,n.kt)("li",{parentName:"ul"},"tcp \u6821\u9a8c\u548c (checkSum, \u6307\u4f20\u8f93\u4f4d\u6570\u7684\u7d2f\u52a0,\u5f53\u4f20\u8f93\u7ed3\u675f\u65f6,\u63a5\u6536\u8005\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u6570\u503c\u5224\u65ad\u662f\u5426\u63a5\u5230\u4e86\u6240\u6709\u7684\u6570\u636e\u3002\u53e6\u5916, \u9632\u7be1\u6539)"),(0,n.kt)("li",{parentName:"ul"},"\u5e8f\u53f7 32bit, \u89e3\u51b3\u4e71\u5e8f\u95ee\u9898"),(0,n.kt)("li",{parentName:"ul"},"\u786e\u8ba4\u5e8f\u53f7 32bit, \u786e\u8ba4\u5305\u6536\u5230, \u89e3\u51b3\u4e22\u5305\u7684\u95ee\u9898"))),(0,n.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u6570\u636e        --- \u5e94\u7528\u5c42 (http \u6570\u636e,ftp \u6570\u636e...)")),(0,n.kt)("h2",{id:"p2p"},"p2p"))}c.isMDXComponent=!0},80147:function(t,e,a){e.Z=a.p+"assets/images/nat-41f3e2cfad6fa9b39d7832fb1c6f4db5.png"}}]);