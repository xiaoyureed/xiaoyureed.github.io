"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6700],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(t),m=o,k=d["".concat(l,".").concat(m)]||d[m]||s[m]||a;return t?r.createElement(k,c(c({ref:n},p),{},{components:t})):r.createElement(k,c({ref:n},p))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,c=new Array(a);c[0]=d;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var u=2;u<a;u++)c[u]=t[u];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},76403:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return s}});var r=t(83117),o=t(80102),a=(t(67294),t(3905)),c=["components"],i={title:"Establish the Docker Develop Environment for frontend",date:"2023-3-11",tags:["docker","react","vue"],authors:"me",keywords:["docker","react","vue"]},l=void 0,u={permalink:"/react-vue-docker",editUrl:"https://github.com/xiaoyureed/xiaoyureed.github.io/edit/main/blog/react-vue-docker.md",source:"@site/blog/react-vue-docker.md",title:"Establish the Docker Develop Environment for frontend",description:"In this article I'm gonna show you how to build a docker env when develop a frontend app",date:"2023-03-11T00:00:00.000Z",formattedDate:"2023\u5e743\u670811\u65e5",tags:[{label:"docker",permalink:"/tags/docker"},{label:"react",permalink:"/tags/react"},{label:"vue",permalink:"/tags/vue"}],readingTime:1.7066666666666668,hasTruncateMarker:!0,authors:[{name:"Xiao Yu",title:"Unknown",url:"https://github.com/xiaoyureed",imageURL:"https://github.com/xiaoyureed.png",key:"me"}],frontMatter:{title:"Establish the Docker Develop Environment for frontend",date:"2023-3-11",tags:["docker","react","vue"],authors:"me",keywords:["docker","react","vue"]},prevItem:{title:"redmi ax6000 crack",permalink:"/redmi-router-crack"},nextItem:{title:"Best Practice for Spring Boot Working with Docker",permalink:"/spring-boot-with-docker"}},p={authorsImageUrls:[void 0]},s=[{value:"vue",id:"vue",level:2}],d={toc:s};function m(e){var n=e.components,t=(0,o.Z)(e,c);return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In this article I'm gonna show you how to build a docker env when develop a frontend app"),(0,a.kt)("h2",{id:"vue"},"vue"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"vue create vue-docker")," to generate the basic structure"),(0,a.kt)("p",null,"create dockerfile:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dockerfile"},"#\u8bbe\u7f6e\u6784\u5efa\u7684\u57fa\u7840\u955c\u50cf\nFROM node\n#\u521b\u5efa\u4e00\u4e2a\u540d\u4e3avue-docker\u7684\u6587\u4ef6\u5939\nRUN  mkdir -p  /vue-docker\n#\u8fdb\u5165\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e2d\uff08\u5f53\u6211\u4eec\u6253\u5f00\u955c\u50cf\u7ec8\u7aef\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u8fdb\u5165\u8fd9\u4e2a\u76ee\u5f55\u4e2d\u53bb\uff09\nWORKDIR /vue-docker\n#\u62f7\u8d1d\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u4e1c\u897f\u5230vue-docker\u76ee\u5f55\u4e2d\nCOPY . .\n#\u8bbe\u7f6enpm\u4e0b\u8f7d\u4f9d\u8d56\u6765\u6e90\u4e3a\u6dd8\u5b9d\u6e90\nRUN npm config set registry https://registry.npm.taobao.org\n#\u5b89\u88c5\u9879\u76ee\u4f9d\u8d56\nRUN npm i\n#\u5728\u542f\u52a8\u955c\u50cf\u65f6\u6267\u884c\u542f\u52a8\u9879\u76ee\u7684\u547d\u4ee4\nCMD npm run serve\n#\u66b4\u9732\u7aef\u53e3\u7528\u4e8e\u5916\u90e8\u8bbf\u95ee\nEXPOSE 8080\n\n\n\n\n")),(0,a.kt)("p",null,"if you want to get it work with nginx: create docker-compose.yml"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},'version: "3" # \u6307\u5b9a\u7248\u672c(\u4e0d\u540c\u7684\u7248\u672c\u5b58\u5728\u8bed\u6cd5\u5dee\u5f02\uff0c\u8fd9\u8fb9\u4f7f\u7528\u6700\u65b0\u7684\u7248\u672c)\nservices:\n  nginx: # \u7528\u6237\u81ea\u5b9a\u4e49\u7684\u670d\u52a1\u540d\u79f0\n    image: nginx # \u4f7f\u7528\u7684nginx\u6700\u65b0\u7684\u955c\u50cf\n    volumes:\n        # \u4f7f\u7528\u672c\u5730\u7684 nginx \u914d\u7f6e default.conf\n      - /default.conf:/etc/nginx/conf.d/default.conf\n    # \u58f0\u660e\u66b4\u9732\u7684\u7aef\u53e3\n    ports:\n      - "80:80"\n  vue: \n    build: # \u6784\u5efa\u76f8\u5173\u7684\u914d\u7f6e \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528image:xxx\u53bb\u6784\u5efa\n      context: .\n      dockerfile: vue # \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684 dockerfile \u6587\u4ef6\u540d\n    working_dir: /vue-docker # \u8fdb\u5165\u5de5\u4f5c\u7684\u76ee\u5f55\u4e2d\n    command: npm run serve # \u5728\u542f\u52a8\u955c\u50cf\u65f6\u6267\u884c\u542f\u52a8\u9879\u76ee\u7684\u547d\u4ee4\n    volumes: # \u6307\u5b9a\u6620\u5c04\u7684\u8def\u5f84\uff08\u53ef\u6307\u5b9a\u591a\u4e2a\uff09\n      - ./x\'x\'x:/xxx\n      - /src:/vue-docker/src  # \u6620\u5c04\u672c\u5730\u6e90\u7801\u76ee\u5f55\n    ports: # \u66b4\u9732\u7aef\u53e3\u7528\u4e8e\u5916\u90e8\u8bbf\u95ee\uff08\u53ef\u6307\u5b9a\u591a\u4e2a\uff09\n      - 8080:8080\n      - 8081:8081\n\n\n\n')),(0,a.kt)("p",null,"then you need create the nginx configuration: default.conf"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-conf"},"server {\n    listen       80;\n    server_name  localhost;\n\n    location / {\n       proxy_pass http://vue:8080; # \u8fd9\u91cc\u7684vue\u5c31\u662fdocker-compose\u4e2d\u81ea\u5b9a\u4e49\u7684services\u540d\n    }\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n\n\n")),(0,a.kt)("p",null,"vue.config.js \u4e2d\u6dfb\u52a0 disableHostCheck\uff0c\u4e0d\u53bb\u68c0\u6d4b\u57df\u540d:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  devServer: {\n    disableHostCheck: true,\n  },\n};\n\n\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"docker-compose -d up")," To start the env."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"docker build -t vue-docker .")," to build the vue app image"),(0,a.kt)("p",null,"If you don't want to use nginx, you also can start the container directly:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -d -p 8080:8080 -v /src:/vue-docker/src vue-docker\n# \u8fdb\u5165\u547d\u4ee4\u884c\ndocker run -it vue-docker /bin/bash\n\n\n")),(0,a.kt)("p",null,"now we can try ",(0,a.kt)("inlineCode",{parentName:"p"},"http://localhost:8080")))}m.isMDXComponent=!0}}]);