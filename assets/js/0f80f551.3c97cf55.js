"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6131],{3905:function(e,a,t){t.d(a,{Zo:function(){return u},kt:function(){return s}});var n=t(67294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=n.createContext({}),m=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},u=function(e){var a=m(e.components);return n.createElement(o.Provider,{value:a},e.children)},k={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=m(t),s=l,d=c["".concat(o,".").concat(s)]||c[s]||k[s]||r;return t?n.createElement(d,i(i({ref:a},u),{},{components:t})):n.createElement(d,i({ref:a},u))}));function s(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=c;var p={};for(var o in a)hasOwnProperty.call(a,o)&&(p[o]=a[o]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var m=2;m<r;m++)i[m]=t[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},14706:function(e,a,t){t.r(a),t.d(a,{assets:function(){return u},contentTitle:function(){return o},default:function(){return s},frontMatter:function(){return p},metadata:function(){return m},toc:function(){return k}});var n=t(83117),l=t(80102),r=(t(67294),t(3905)),i=["components"],p={title:"JMM and GC\ud83c\udf08",tags:["jvm","gc","\u5185\u5b58\u6a21\u578b"],date:new Date("2015-03-07T11:02:43.000Z"),toc_min_heading_level:2,toc_max_heading_level:5},o=void 0,m={unversionedId:"java-memory-model-jmm-jvm",id:"java-memory-model-jmm-jvm",title:"JMM and GC\ud83c\udf08",description:"Java Memory Model.",source:"@site/docs/java-memory-model-jmm-jvm.md",sourceDirName:".",slug:"/java-memory-model-jmm-jvm",permalink:"/docs/java-memory-model-jmm-jvm",draft:!1,tags:[{label:"jvm",permalink:"/docs/tags/jvm"},{label:"gc",permalink:"/docs/tags/gc"},{label:"\u5185\u5b58\u6a21\u578b",permalink:"/docs/tags/\u5185\u5b58\u6a21\u578b"}],version:"current",frontMatter:{title:"JMM and GC\ud83c\udf08",tags:["jvm","gc","\u5185\u5b58\u6a21\u578b"],date:"2015-03-07T11:02:43.000Z",toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"Java Concurrent\ud83c\udf08",permalink:"/docs/java-concurrent"},next:{title:"Java Core \u7b14\u8bb0",permalink:"/docs/java-note"}},u={},k=[{value:"2.1. Method Area",id:"21-method-area",level:2},{value:"2.2. Heap",id:"22-heap",level:2},{value:"2.3. JVM Stack",id:"23-jvm-stack",level:2},{value:"2.4. Native Method Stack",id:"24-native-method-stack",level:2},{value:"2.5. PC Register(\u7a0b\u5e8f\u8ba1\u6570\u5668)",id:"25-pc-register\u7a0b\u5e8f\u8ba1\u6570\u5668",level:2},{value:"3.1. \u5783\u573e\u6536\u96c6\u5668",id:"31-\u5783\u573e\u6536\u96c6\u5668",level:2},{value:"3.2. \u5982\u4f55\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5e94\u8be5\u56de\u6536",id:"32-\u5982\u4f55\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5e94\u8be5\u56de\u6536",level:2},{value:"3.2.1. \u5f15\u7528\u8ba1\u6570\u6cd5 reference counting",id:"321-\u5f15\u7528\u8ba1\u6570\u6cd5-reference-counting",level:3},{value:"3.2.2. \u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5 reachability analysis",id:"322-\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5-reachability-analysis",level:3},{value:"3.2.3. reference \u5206\u7c7b",id:"323-reference-\u5206\u7c7b",level:3},{value:"3.3. \u5783\u573e\u56de\u6536\u7b97\u6cd5",id:"33-\u5783\u573e\u56de\u6536\u7b97\u6cd5",level:2},{value:"3.3.1. \u6807\u8bb0-\u6e05\u9664 \u7b97\u6cd5",id:"331-\u6807\u8bb0-\u6e05\u9664-\u7b97\u6cd5",level:3},{value:"3.3.2. \u590d\u5236\u7b97\u6cd5",id:"332-\u590d\u5236\u7b97\u6cd5",level:3},{value:"3.3.3. \u6807\u8bb0-\u6574\u7406 \u7b97\u6cd5",id:"333-\u6807\u8bb0-\u6574\u7406-\u7b97\u6cd5",level:3},{value:"3.3.4. \u5206\u4ee3\u6536\u96c6\u7b97\u6cd5",id:"334-\u5206\u4ee3\u6536\u96c6\u7b97\u6cd5",level:3},{value:"4.1. \u7c7b\u7f16\u8bd1",id:"41-\u7c7b\u7f16\u8bd1",level:2},{value:"4.2. \u7c7b\u52a0\u8f7d",id:"42-\u7c7b\u52a0\u8f7d",level:2},{value:"4.2.1. classloader\u7c7b\u52a0\u8f7d\u5668",id:"421-classloader\u7c7b\u52a0\u8f7d\u5668",level:3},{value:"4.2.2. \u88c5\u8f7d(load)",id:"422-\u88c5\u8f7dload",level:3},{value:"4.2.3. \u94fe\u63a5(Link)",id:"423-\u94fe\u63a5link",level:3},{value:"4.2.4. \u521d\u59cb\u5316(Initialize)",id:"424-\u521d\u59cb\u5316initialize",level:3},{value:"4.3. \u7c7b\u6267\u884c",id:"43-\u7c7b\u6267\u884c",level:2},{value:"4.3.1. \u5b57\u8282\u7801\u89e3\u91ca\u6267\u884cand\u7f16\u8bd1\u6267\u884c\u5e76\u5b58\u5982\u4f55\u5206\u754c",id:"431-\u5b57\u8282\u7801\u89e3\u91ca\u6267\u884cand\u7f16\u8bd1\u6267\u884c\u5e76\u5b58\u5982\u4f55\u5206\u754c",level:3},{value:"4.3.2. \u5b57\u8282\u7801\u89e3\u91ca\u6267\u884c",id:"432-\u5b57\u8282\u7801\u89e3\u91ca\u6267\u884c",level:3},{value:"4.3.2.1. \u65b9\u6cd5\u76f8\u5173\u7684jvm\u6307\u4ee4",id:"4321-\u65b9\u6cd5\u76f8\u5173\u7684jvm\u6307\u4ee4",level:4},{value:"4.3.2.2. jvm\u6307\u4ee4\u600e\u4e48\u89e3\u91ca\u6267\u884c",id:"4322-jvm\u6307\u4ee4\u600e\u4e48\u89e3\u91ca\u6267\u884c",level:4},{value:"4.3.3. \u5b57\u8282\u7801\u7f16\u8bd1\u6267\u884c",id:"433-\u5b57\u8282\u7801\u7f16\u8bd1\u6267\u884c",level:3},{value:"4.3.3.1. client compiler",id:"4331-client-compiler",level:4},{value:"4.3.3.2. server compiler",id:"4332-server-compiler",level:4},{value:"4.3.4. \u53cd\u5c04\u6267\u884c",id:"434-\u53cd\u5c04\u6267\u884c",level:3},{value:"5.1. final",id:"51-final",level:2},{value:"5.2. volatile",id:"52-volatile",level:2},{value:"5.3. synchronized",id:"53-synchronized",level:2},{value:"5.4. static",id:"54-static",level:2},{value:"6.1. \u4f1a\u9020\u6210\u54ea\u4e9b\u6ea2\u51fa",id:"61-\u4f1a\u9020\u6210\u54ea\u4e9b\u6ea2\u51fa",level:2},{value:"6.2. Java\u5185\u5b58\u6cc4\u9732\u5f15\u8d77\u539f\u56e0",id:"62-java\u5185\u5b58\u6cc4\u9732\u5f15\u8d77\u539f\u56e0",level:2},{value:"7.1. \u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b(\u5185\u5b58\u600e\u4e48\u5206\u914d)",id:"71-\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u5185\u5b58\u600e\u4e48\u5206\u914d",level:2},{value:"7.2. \u5bf9\u8c61\u7684\u8bbf\u95ee",id:"72-\u5bf9\u8c61\u7684\u8bbf\u95ee",level:2},{value:"7.2.1. \u5bf9\u8c61\u76842\u79cd\u8bbf\u95ee\u65b9\u5f0f",id:"721-\u5bf9\u8c61\u76842\u79cd\u8bbf\u95ee\u65b9\u5f0f",level:3},{value:"7.2.2. thread\u5177\u4f53\u600e\u4e48\u8bbf\u95ee\u5bf9\u8c61\u4e2d\u7684\u503c\u5462\u4ee5\u53cavolatile\u5173\u952e\u5b57",id:"722-thread\u5177\u4f53\u600e\u4e48\u8bbf\u95ee\u5bf9\u8c61\u4e2d\u7684\u503c\u5462\u4ee5\u53cavolatile\u5173\u952e\u5b57",level:3},{value:"7.3. \u5bf9\u8c61\u56de\u6536(\u5185\u5b58\u600e\u4e48\u91ca\u653e)",id:"73-\u5bf9\u8c61\u56de\u6536\u5185\u5b58\u600e\u4e48\u91ca\u653e",level:2},{value:"9.1. \u65e5\u5fd7\u68c0\u7d22",id:"91-\u65e5\u5fd7\u68c0\u7d22",level:2},{value:"9.2. \u67e5\u770b\u6570\u636e\u5e93\u8fde\u63a5",id:"92-\u67e5\u770b\u6570\u636e\u5e93\u8fde\u63a5",level:2},{value:"9.3. \u67e5\u770bCPU \u8d1f\u8f7d",id:"93-\u67e5\u770bcpu-\u8d1f\u8f7d",level:2},{value:"9.3.1. CPU User\u9ad8 and  CPU Load \u9ad8",id:"931-cpu-user\u9ad8-and--cpu-load-\u9ad8",level:3},{value:"9.3.1.1. \u4ee3\u7801\u4e2d\u5b58\u5728\u975e\u5e38\u6d88\u8017 CPU \u7684\u64cd\u4f5c",id:"9311-\u4ee3\u7801\u4e2d\u5b58\u5728\u975e\u5e38\u6d88\u8017-cpu-\u7684\u64cd\u4f5c",level:4},{value:"9.3.1.2. \u9891\u7e41gc",id:"9312-\u9891\u7e41gc",level:4},{value:"9.3.2. CPU System \u9ad8 and CPU Load \u9ad8",id:"932-cpu-system-\u9ad8-and-cpu-load-\u9ad8",level:3},{value:"9.3.3. CPU Wait\u9ad8 and CPU Load\u9ad8 and CPU\u5229\u7528\u7387\u4f4e",id:"933-cpu-wait\u9ad8-and-cpu-load\u9ad8-and-cpu\u5229\u7528\u7387\u4f4e",level:3},{value:"9.4. \u67e5\u5185\u5b58",id:"94-\u67e5\u5185\u5b58",level:2},{value:"9.5. \u6392\u67e5\u5783\u573e\u56de\u6536\u95ee\u9898",id:"95-\u6392\u67e5\u5783\u573e\u56de\u6536\u95ee\u9898",level:2},{value:"9.6. \u7f51\u7edc\u95ee\u9898",id:"96-\u7f51\u7edc\u95ee\u9898",level:2},{value:"10.1. java \u542f\u52a8 javac \u7f16\u8bd1 javap \u53cd\u7f16\u8bd1",id:"101-java-\u542f\u52a8-javac-\u7f16\u8bd1-javap-\u53cd\u7f16\u8bd1",level:2},{value:"10.2. jstack",id:"102-jstack",level:2},{value:"10.3. jcmd",id:"103-jcmd",level:2},{value:"10.4. jps",id:"104-jps",level:2},{value:"10.5. jstat",id:"105-jstat",level:2},{value:"10.6. jvisualvm",id:"106-jvisualvm",level:2},{value:"10.7. jconsole",id:"107-jconsole",level:2},{value:"10.8. jhat",id:"108-jhat",level:2},{value:"10.9. jmap",id:"109-jmap",level:2},{value:"10.10. jrunscript",id:"1010-jrunscript",level:2},{value:"10.11. jinfo",id:"1011-jinfo",level:2},{value:"10.12. jprofile",id:"1012-jprofile",level:2},{value:"12.1. \u6709\u54ea\u4e9b\u53c2\u6570",id:"121-\u6709\u54ea\u4e9b\u53c2\u6570",level:2},{value:"12.2. \u914d\u7f6e\u65b9\u5f0f",id:"122-\u914d\u7f6e\u65b9\u5f0f",level:2}],c={toc:k};function s(e){var a=e.components,t=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("div",{align:"center"},"Java Memory Model. references: [1](https://zhuanlan.zhihu.com/p/34461147) Java \u5185\u5b58\u6a21\u578b: https://zhuanlan.zhihu.com/p/42546444 https://openjdk.java.net/projects/panama/ - \u548ccpp\u4ea4\u4e92, native \u65b9\u6cd5"),(0,r.kt)("h1",{id:"1-\u4e3a\u4ec0\u4e48\u8981\u6709jmm"},"1. \u4e3a\u4ec0\u4e48\u8981\u6709jmm"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89jmm"},"1. \u4e3a\u4ec0\u4e48\u8981\u6709jmm")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#2-jvm%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E6%A8%A1%E5%9E%8B"},"2. jvm\u5185\u5b58\u533a\u57df\u6a21\u578b"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#21-method-area"},"2.1. Method Area")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#22-heap"},"2.2. Heap")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#23-jvm-stack"},"2.3. JVM Stack")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#24-native-method-stack"},"2.4. Native Method Stack")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#25-pc-register%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8"},"2.5. PC Register(\u7a0b\u5e8f\u8ba1\u6570\u5668)")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#3-gc-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"},"3. gc \u5783\u573e\u56de\u6536"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#31-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8"},"3.1. \u5783\u573e\u6536\u96c6\u5668")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#32-%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E5%BA%94%E8%AF%A5%E5%9B%9E%E6%94%B6"},"3.2. \u5982\u4f55\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5e94\u8be5\u56de\u6536"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#321-%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%B3%95-reference-counting"},"3.2.1. \u5f15\u7528\u8ba1\u6570\u6cd5 reference counting")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#322-%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95-reachability-analysis"},"3.2.2. \u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5 reachability analysis")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#323-reference-%E5%88%86%E7%B1%BB"},"3.2.3. reference \u5206\u7c7b")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#33-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95"},"3.3. \u5783\u573e\u56de\u6536\u7b97\u6cd5"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#331-%E6%A0%87%E8%AE%B0-%E6%B8%85%E9%99%A4-%E7%AE%97%E6%B3%95"},"3.3.1. \u6807\u8bb0-\u6e05\u9664 \u7b97\u6cd5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#332-%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95"},"3.3.2. \u590d\u5236\u7b97\u6cd5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#333-%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86-%E7%AE%97%E6%B3%95"},"3.3.3. \u6807\u8bb0-\u6574\u7406 \u7b97\u6cd5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#334-%E5%88%86%E4%BB%A3%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95"},"3.3.4. \u5206\u4ee3\u6536\u96c6\u7b97\u6cd5")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#4-java%E7%9A%84%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6"},"4. Java\u7684\u4ee3\u7801\u6267\u884c\u673a\u5236"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#41-%E7%B1%BB%E7%BC%96%E8%AF%91"},"4.1. \u7c7b\u7f16\u8bd1")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#42-%E7%B1%BB%E5%8A%A0%E8%BD%BD"},"4.2. \u7c7b\u52a0\u8f7d"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#421-classloader%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"},"4.2.1. classloader\u7c7b\u52a0\u8f7d\u5668")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#422-%E8%A3%85%E8%BD%BDload"},"4.2.2. \u88c5\u8f7d(load)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#423-%E9%93%BE%E6%8E%A5link"},"4.2.3. \u94fe\u63a5(Link)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#424-%E5%88%9D%E5%A7%8B%E5%8C%96initialize"},"4.2.4. \u521d\u59cb\u5316(Initialize)")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#43-%E7%B1%BB%E6%89%A7%E8%A1%8C"},"4.3. \u7c7b\u6267\u884c"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#431-%E5%AD%97%E8%8A%82%E7%A0%81%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8Cand%E7%BC%96%E8%AF%91%E6%89%A7%E8%A1%8C%E5%B9%B6%E5%AD%98%E5%A6%82%E4%BD%95%E5%88%86%E7%95%8C"},"4.3.1. \u5b57\u8282\u7801\u89e3\u91ca\u6267\u884cand\u7f16\u8bd1\u6267\u884c\u5e76\u5b58\u5982\u4f55\u5206\u754c")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#432-%E5%AD%97%E8%8A%82%E7%A0%81%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C"},"4.3.2. \u5b57\u8282\u7801\u89e3\u91ca\u6267\u884c"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#4321-%E6%96%B9%E6%B3%95%E7%9B%B8%E5%85%B3%E7%9A%84jvm%E6%8C%87%E4%BB%A4"},"4.3.2.1. \u65b9\u6cd5\u76f8\u5173\u7684jvm\u6307\u4ee4")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#4322-jvm%E6%8C%87%E4%BB%A4%E6%80%8E%E4%B9%88%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C"},"4.3.2.2. jvm\u6307\u4ee4\u600e\u4e48\u89e3\u91ca\u6267\u884c")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#433-%E5%AD%97%E8%8A%82%E7%A0%81%E7%BC%96%E8%AF%91%E6%89%A7%E8%A1%8C"},"4.3.3. \u5b57\u8282\u7801\u7f16\u8bd1\u6267\u884c"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#4331-client-compiler"},"4.3.3.1. client compiler")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#4332-server-compiler"},"4.3.3.2. server compiler")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#434-%E5%8F%8D%E5%B0%84%E6%89%A7%E8%A1%8C"},"4.3.4. \u53cd\u5c04\u6267\u884c")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#5-java%E4%B8%AD%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97%E5%92%8C%E5%86%85%E5%AD%98%E7%9A%84%E5%85%B3%E7%B3%BB"},"5. java\u4e2d\u7684\u5173\u952e\u5b57\u548c\u5185\u5b58\u7684\u5173\u7cfb"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#51-final"},"5.1. final")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#52-volatile"},"5.2. volatile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#53-synchronized"},"5.3. synchronized")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#54-static"},"5.4. static")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#6-java%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2"},"6. java\u7684\u5185\u5b58\u6cc4\u9732"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#61-%E4%BC%9A%E9%80%A0%E6%88%90%E5%93%AA%E4%BA%9B%E6%BA%A2%E5%87%BA"},"6.1. \u4f1a\u9020\u6210\u54ea\u4e9b\u6ea2\u51fa")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#62-java%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%BC%95%E8%B5%B7%E5%8E%9F%E5%9B%A0"},"6.2. Java\u5185\u5b58\u6cc4\u9732\u5f15\u8d77\u539f\u56e0")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#7-jvm-%E4%B8%AD%E7%9A%84-object"},"7. jvm \u4e2d\u7684 object"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#71-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B%E5%86%85%E5%AD%98%E6%80%8E%E4%B9%88%E5%88%86%E9%85%8D"},"7.1. \u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b(\u5185\u5b58\u600e\u4e48\u5206\u914d)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#72-%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BF%E9%97%AE"},"7.2. \u5bf9\u8c61\u7684\u8bbf\u95ee"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#721-%E5%AF%B9%E8%B1%A1%E7%9A%842%E7%A7%8D%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F"},"7.2.1. \u5bf9\u8c61\u76842\u79cd\u8bbf\u95ee\u65b9\u5f0f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#722-thread%E5%85%B7%E4%BD%93%E6%80%8E%E4%B9%88%E8%AE%BF%E9%97%AE%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9A%84%E5%80%BC%E5%91%A2%E4%BB%A5%E5%8F%8Avolatile%E5%85%B3%E9%94%AE%E5%AD%97"},"7.2.2. thread\u5177\u4f53\u600e\u4e48\u8bbf\u95ee\u5bf9\u8c61\u4e2d\u7684\u503c\u5462\u4ee5\u53cavolatile\u5173\u952e\u5b57")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#73-%E5%AF%B9%E8%B1%A1%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E6%80%8E%E4%B9%88%E9%87%8A%E6%94%BE"},"7.3. \u5bf9\u8c61\u56de\u6536(\u5185\u5b58\u600e\u4e48\u91ca\u653e)")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#8-%E6%9C%89%E5%93%AA%E4%BA%9B%E8%99%9A%E6%8B%9F%E6%9C%BA"},"8. \u6709\u54ea\u4e9b\u865a\u62df\u673a")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#9-java%E7%BA%BF%E4%B8%8A%E9%97%AE%E9%A2%98%E8%AF%8A%E6%96%AD%E6%8E%92%E6%9F%A5"},"9. java\u7ebf\u4e0a\u95ee\u9898\u8bca\u65ad\u6392\u67e5"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#91-%E6%97%A5%E5%BF%97%E6%A3%80%E7%B4%A2"},"9.1. \u65e5\u5fd7\u68c0\u7d22")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#92-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"},"9.2. \u67e5\u770b\u6570\u636e\u5e93\u8fde\u63a5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#93-%E6%9F%A5%E7%9C%8Bcpu-%E8%B4%9F%E8%BD%BD"},"9.3. \u67e5\u770bCPU \u8d1f\u8f7d"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#931-cpu-user%E9%AB%98-and--cpu-load-%E9%AB%98"},"9.3.1. CPU User\u9ad8 and  CPU Load \u9ad8"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#9311-%E4%BB%A3%E7%A0%81%E4%B8%AD%E5%AD%98%E5%9C%A8%E9%9D%9E%E5%B8%B8%E6%B6%88%E8%80%97-cpu-%E7%9A%84%E6%93%8D%E4%BD%9C"},"9.3.1.1. \u4ee3\u7801\u4e2d\u5b58\u5728\u975e\u5e38\u6d88\u8017 CPU \u7684\u64cd\u4f5c")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#9312-%E9%A2%91%E7%B9%81gc"},"9.3.1.2. \u9891\u7e41gc")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#932-cpu-system-%E9%AB%98-and-cpu-load-%E9%AB%98"},"9.3.2. CPU System \u9ad8 and CPU Load \u9ad8")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#933-cpu-wait%E9%AB%98-and-cpu-load%E9%AB%98-and-cpu%E5%88%A9%E7%94%A8%E7%8E%87%E4%BD%8E"},"9.3.3. CPU Wait\u9ad8 and CPU Load\u9ad8 and CPU\u5229\u7528\u7387\u4f4e")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#94-%E6%9F%A5%E5%86%85%E5%AD%98"},"9.4. \u67e5\u5185\u5b58")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#95-%E6%8E%92%E6%9F%A5%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E9%97%AE%E9%A2%98"},"9.5. \u6392\u67e5\u5783\u573e\u56de\u6536\u95ee\u9898")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#96-%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98"},"9.6. \u7f51\u7edc\u95ee\u9898")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#10-jdk-%E8%87%AA%E5%B8%A6%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7"},"10. jdk \u81ea\u5e26\u547d\u4ee4\u884c\u5de5\u5177"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#101-java-%E5%90%AF%E5%8A%A8-javac-%E7%BC%96%E8%AF%91-javap-%E5%8F%8D%E7%BC%96%E8%AF%91"},"10.1. java \u542f\u52a8 javac \u7f16\u8bd1 javap \u53cd\u7f16\u8bd1")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#102-jstack"},"10.2. jstack")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#103-jcmd"},"10.3. jcmd")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#104-jps"},"10.4. jps")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#105-jstat"},"10.5. jstat")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#106-jvisualvm"},"10.6. jvisualvm")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#107-jconsole"},"10.7. jconsole")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#108-jhat"},"10.8. jhat")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#109-jmap"},"10.9. jmap")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#1010-jrunscript"},"10.10. jrunscript")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#1011-jinfo"},"10.11. jinfo")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#1012-jprofile"},"10.12. jprofile")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#11-%E9%98%BF%E9%87%8C-arthas"},"11. \u963f\u91cc arthas")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#12-jvm-%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98-and-%E5%AE%9E%E7%94%A8%E5%8F%82%E6%95%B0"},"12. jvm \u6027\u80fd\u8c03\u4f18 and \u5b9e\u7528\u53c2\u6570"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#121-%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8F%82%E6%95%B0"},"12.1. \u6709\u54ea\u4e9b\u53c2\u6570")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#122-%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"},"12.2. \u914d\u7f6e\u65b9\u5f0f"))))),(0,r.kt)("p",null,"JMM\u53ef\u4ee5\u5c4f\u853d\u6389\u5404\u79cd\u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u5b58\u8bbf\u95ee\u5dee\u5f02\uff0c\u4ee5\u5b9e\u73b0\u8ba9java\u7a0b\u5e8f\u5728\u5404\u79cd\u5e73\u53f0\u4e0b\u90fd\u80fd\u8fbe\u5230\u4e00\u81f4\u7684\u5185\u5b58\u8bbf\u95ee\u6548\u679c\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u4e32\u884c\u6267\u884c\u7684\u7a0b\u5e8f, \u5929\u7136\u5c31\u662f\u6b63\u786e\u7684, \u4f46\u662f\u5bf9\u4e8e\u5e76\u884c\u7a0b\u5e8f\u5c31\u9700\u8981 jmm \u6765\u4fdd\u8bc1\u591a\u4e2a thread \u534f\u540c\u5de5\u4f5c"),(0,r.kt)("h1",{id:"2-jvm\u5185\u5b58\u533a\u57df\u6a21\u578b"},"2. jvm\u5185\u5b58\u533a\u57df\u6a21\u578b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u7ebf\u7a0b\u5171\u4eab\u5185\u5b58\u533a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"method area (\u65b9\u6cd5\u533a)"),(0,r.kt)("p",{parentName:"li"},"  \u4fdd\u5b58 \u7c7b \u4fe1\u606f (\u5982 class name, \u65b9\u6cd5\u5b9a\u4e49, \u5b57\u6bb5\u4fe1\u606f)"),(0,r.kt)("p",{parentName:"li"},"  \u5bf9\u4e8e\u9891\u7e41\u521b\u5efa\u7c7b\u7684\u7cfb\u7edf (\u5982\u5b58\u5728\u5927\u91cf\u53cd\u5c04, \u52a8\u6001\u4ee3\u7406\u7684\u7cfb\u7edf), \u65b9\u6cd5\u533a\u8981\u8bbe\u7f6e\u5927\u4e00\u70b9"),(0,r.kt)("p",{parentName:"li"},"  -XX:MetaspaceSize \u6c38\u4e45\u4ee3\u521d\u59cb\u5206\u914d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u503c\u662f21m\n-XX:MaxMetaspaceSize\u6765\u8bbe\u5b9a\u6c38\u4e45\u4ee3\u6700\u5927\u53ef\u5206\u914d\u7a7a\u95f4\uff0c\u503c\u4e3a-1, \u6ca1\u6709\u4e0a\u9650")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"heap (\u5806)"),(0,r.kt)("p",{parentName:"li"},"  \u4fdd\u5b58\u5bf9\u8c61\u5b9e\u4f8b, \u6570\u7ec4"),(0,r.kt)("p",{parentName:"li"},"  gc \u4e3b\u8981\u662f\u5728\u8fd9\u91cc"),(0,r.kt)("p",{parentName:"li"},"  \u7a7a\u95f4\u4e0d\u8db3\u4f1a\u629b\u51fa java.lang.OutOfMemoryError"),(0,r.kt)("p",{parentName:"li"},"  \u7a7a\u95f4\u8fdc\u5927\u4e8e jvm stack"),(0,r.kt)("p",{parentName:"li"},"  \u5e38\u91cf\u6c60: "),(0,r.kt)("p",{parentName:"li"},"  -Xms512m \u5806\u521d\u59cb\u5185\u5b58\n-Xmx1g \u5806\u6700\u5927\u53ef\u7528\u5185\u5b58"))))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u7ebf\u7a0b\u79c1\u6709\u5185\u5b58\u533a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"register (\u7a0b\u5e8f\u8ba1\u6570\u5668)"),(0,r.kt)("p",{parentName:"li"},"  \u7528\u4e8e\u5728 thread \u4e0a\u4e0b\u6587\u5207\u6362\u65f6\u8bb0\u5f55\u5f53\u524d\u6267\u884c\u5230\u5b57\u8282\u7801\u7684\u54ea\u4e00\u6b65 ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"jvm stack (\u6808)"),(0,r.kt)("p",{parentName:"li"},"  \u4fdd\u5b58\u65b9\u6cd5\u8c03\u7528\u6808, \u5bf9\u8c61\u5f15\u7528, \u5c40\u90e8\u53d8\u91cf"),(0,r.kt)("p",{parentName:"li"},"  \u7a7a\u95f4\u4e0d\u8db3\u4f1a\u629b\u51fa Stack Overflow"),(0,r.kt)("p",{parentName:"li"},"  -Xss1m (\u6808)\u5185\u5b58\u5927\u5c0f, \u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6808, \u51cf\u5c0f\u8fd9\u4e2a\u503c\u80fd\u751f\u6210\u66f4\u591a\u7684\u7ebf\u7a0b\u3002\u5982\u679c\u8fd9\u4e2a\u503c\u592a\u5c0f\u4f1a\u5f71\u54cd\u65b9\u6cd5\u8c03\u7528\u7684\u6df1\u5ea6")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("del",{parentName:"p"},"native method stack")," (sun jdk \u5b9e\u73b0\u4e2d\u5e76\u5165 jvm stack)"))))),(0,r.kt)("h2",{id:"21-method-area"},"2.1. Method Area"),(0,r.kt)("p",null,"\u793a\u610f\u56fe:"),(0,r.kt)("p",null,'\u8fd9\u91cc "\u5bf9\u8c61\u7c7b\u578b\u6570\u636e" \u5373 \u7c7b\u4fe1\u606f'),(0,r.kt)("p",null,"\u867d\u7136\u5bf9\u8c61\u5b9e\u4f8b\u6709\u591a\u4e2a, \u4f46\u662f\u65b9\u6cd5\u5b9a\u4e49\u53ea\u6709\u4e00\u4efd, \u5b58\u50a8\u4e8e method area"),(0,r.kt)("p",null,"\u7528\u4e8e\u5b58\u50a8\u5df2\u88ab\u865a\u62df\u673a\u52a0\u8f7d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"\u7c7b\u4fe1\u606f"),"(\u7c7b\u540d, \u7c7b\u4fee\u9970\u7b26), ",(0,r.kt)("inlineCode",{parentName:"p"},"\u9759\u6001\u53d8\u91cf"),' (\u6240\u4ee5\u53c8\u53eb "\u9759\u6001\u5b58\u50a8\u533a"), ',(0,r.kt)("inlineCode",{parentName:"p"},"final\u5e38\u91cf"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"\u65b9\u6cd5\u5b9a\u4e49"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"field")," ; \u5f53\u901a\u8fc7 class \u5bf9\u8c61\u7684 getName, isInstaceOf \u65b9\u6cd5\u83b7\u53d6\u4fe1\u606f\u65f6, \u6570\u636e\u6765\u81ea\u6b64\u533a\u57df"),(0,r.kt)("p",null,"Sun jdk \u4e2d\u5bf9\u5e94 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u6301\u4e45\u4ee3 (Permanent Genaration)"),", \u9ed8\u8ba4\u6700\u5c0f\u503c\u4e3a16MB\uff0c\u6700\u5927\u503c\u4e3a64MB\uff0c\u53ef\u4ee5\u901a\u8fc7-XX:PermSize \u548c -XX:MaxPermSize \u53c2\u6570\u9650\u5236\u65b9\u6cd5\u533a\u7684\u5927\u5c0f, \u5bb9\u91cf\u4e0d\u591f\u65f6\u629b\u51fa OutOfMemory\u9519\u8bef"),(0,r.kt)("p",null,"\u76f8\u5bf9\u800c\u8a00\uff0c\u5783\u573e\u6536\u96c6\u884c\u4e3a\u5728\u8fd9\u4e2a\u533a\u57df\u662f\u6bd4\u8f83\u5c11\u51fa\u73b0\u7684, \u4f46\u5e76\u975e\u6570\u636e\u8fdb\u5165\u65b9\u6cd5\u533a\u540e\u5c31\u201c\u6c38\u4e45\u5b58\u5728\u201d\u4e86\u3002"),(0,r.kt)("p",null,"\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60 (runtime constant pool) - JDK1.7\u53ca\u4e4b\u540e\u7248\u672c\u7684 JVM \u5df2\u7ecf\u5c06\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u4ece\u65b9\u6cd5\u533a\u4e2d\u79fb\u4e86\u51fa\u6765\uff0c\u5728 Java \u5806\uff08Heap\uff09\u4e2d\u5f00\u8f9f\u4e86\u4e00\u5757\u533a\u57df\u5b58\u653e\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u3002"),(0,r.kt)("h2",{id:"22-heap"},"2.2. Heap"),(0,r.kt)("p",null,"\u552f\u4e00\u76ee\u7684\u5c31\u662f\u5b58\u653e",(0,r.kt)("inlineCode",{parentName:"p"},"\u5bf9\u8c61\u5b9e\u4f8b"),"\u53ca",(0,r.kt)("inlineCode",{parentName:"p"},"\u6570\u7ec4"),'; \u4e5f\u5c31\u662f \u901a\u8fc7 "new" \u521b\u5efa\u7684\u5bf9\u8c61'),(0,r.kt)("p",null,'\u662f\u6240\u6709\u533a\u57df\u4e2d\u6700\u5927\u7684\u4e00\u5757, \u5783\u573e\u56de\u6536\u4e3b\u8981\u662f\u56de\u6536\u8fd9\u4e00\u5757 (\u6240\u4ee5\u53c8\u53eb "GC\u5806")'),(0,r.kt)("p",null,"\u4e3a\u4e86\u4fbf\u4e8e\u5783\u573e\u56de\u6536\uff0cJava\u5806\u7a7a\u95f4\u6709\u66f4\u7ec6\u81f4\u7684\u5212\u5206: \u89c1 gc \u4e00\u8282 (",(0,r.kt)("inlineCode",{parentName:"p"},"\u8fdb\u4e00\u6b65\u7ec6\u5206\u7684\u76ee\u7684: \u52a0\u5feb\u5185\u5b58\u56de\u6536\u5206\u914d\u7684\u901f\u5ea6"),")"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"New Generation (\u65b0\u751f\u4ee3) - \u4e00\u822c\u65b0\u5efa\u5bf9\u8c61\u90fd\u5b58\u653e\u5728\u8fd9\u91cc;\n"),(0,r.kt)("li",{parentName:"ul"},"Old Generation \u6216\u53eb\u4f5c Tenured(\u5e74\u8001) Generation\uff0c - \u5b58\u653e\u7ecf\u8fc7\u591a\u4e2a GC \u4ecd\u7136\u5b58\u6d3b\u7684 \u5bf9\u8c61 (\u5982 \u7f13\u5b58\u5bf9\u8c61), \u65b0\u5efa\u7684\u5bf9\u8c61\u4e5f\u53ef\u80fd\u76f4\u63a5\u5b58\u5728\u8fd9\u91cc (\u901a\u8fc7 -XX:PretenureSizeThreshold=1024, \u5355\u4f4d\u5b57\u8282, \u9ed8\u8ba40, \u6765\u8bbe\u7f6e\u5f53\u524d\u5bf9\u8c61\u8d85\u8fc7\u591a\u5c11size, \u5c31\u76f4\u63a5\u5206\u914d\u5230 old generation)")),(0,r.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u7528JVM\u7684\u547d\u4ee4\u884c\u9009\u9879 -Xms, -Xmx, -Xmn\u6765\u8c03\u6574Java\u5806\u7a7a\u95f4\u7684\u5927\u5c0f\u3002\u4e0d\u8981\u5fd8\u4e86\u5728\u5927\u5c0f\u540e\u9762\u52a0\u4e0a\u201dM\u201d\u6216\u8005\u201dG\u201d\u6765\u8868\u793a\u5355\u4f4d\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"-Xmx256M")," \u6700\u5927\u5806\u5185\u5b58 \u4e3a 256M. \u9ed8\u8ba4\u4e3a\u7269\u7406\u5185\u5b58\u76841/4\u4f46\u5c0f\u4e8e1G. \u9ed8\u8ba4\u5f53\u7a7a\u4f59\u5806\u5185\u5b58\u5c0f\u4e8e40%\u65f6\uff0cJVM\u4f1a\u589e\u5927Heap\u5230-Xmx\u6307\u5b9a\u7684\u5927\u5c0f\uff0c\u53ef\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"-XX:MinHeapFreeRation="),"\u6765\u6307\u5b9a\u8fd9\u4e2a\u6bd4\u5217"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"-Xms256M")," \u6700\u5c0f\u5806\u4e3a 256M (\u4e3a\u907f\u514d\u5728\u8fd0\u884c\u65f6\u9891\u7e41\u8c03\u6574Heap\u7684\u5927\u5c0f\uff0c\u901a\u5e38-Xms\u4e0e-Xmx\u7684\u503c\u8bbe\u6210\u4e00\u6837), \u5982\u679c\u4e0d\u8bbe\u7f6e, \u9ed8\u8ba4\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u7269\u7406\u5185\u5b58\u76841/64\u4f46\u5c0f\u4e8e1G. \u5f53\u7a7a\u4f59\u5806\u5185\u5b58\u5927\u4e8e70%\u65f6\uff0cJVM\u4f1a\u51cf\u5c0fheap\u7684\u5927\u5c0f\u5230-Xms\u6307\u5b9a\u7684\u5927\u5c0f\uff0c\u53ef\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"XX:MaxHeapFreeRation="),"\u6765\u6307\u5b9a\u8fd9\u4e2a\u6bd4\u5217"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"-Xmn")," \u6307\u5b9a\u9ed8\u8ba4\u5927\u5c0f"),(0,r.kt)("p",null,"\u53ef\u4ee5\u7528JConsole\u6216\u8005 Runtime.maxMemory(), Runtime.totalMemory(), Runtime.freeMemory()\u6765\u5b9e\u65f6\u67e5\u770bJava\u4e2d\u5806\u5185\u5b58\u7684\u5927\u5c0f"),(0,r.kt)("p",null,"\u5f53\u9047\u5230java.lang.outOfMemoryError\u65f6\uff0c\u6709\u65f6\u5019\u4ec5\u4ec5\u589e\u52a0\u5806\u7a7a\u95f4\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f46\u5982\u679c\u7ecf\u5e38\u51fa\u73b0\u7684\u8bdd\uff0c\u5c31\u8981\u770b\u770bJava\u7a0b\u5e8f\u4e2d\u662f\u4e0d\u662f\u5b58\u5728\u5185\u5b58\u6cc4\u9732\u4e86;"),(0,r.kt)("h2",{id:"23-jvm-stack"},"2.3. JVM Stack"),(0,r.kt)("p",null,'JVM stack \u8bb0\u5f55\u4e86\u7ebf\u7a0b\u7684 "',(0,r.kt)("inlineCode",{parentName:"p"},"\u65b9\u6cd5\u8c03\u7528"),'" and ',(0,r.kt)("inlineCode",{parentName:"p"},"\u5c40\u90e8\u53d8\u91cf"),"; "),(0,r.kt)("p",null,"java\u865a\u62df\u673a\u6808\u662f\u7531\u4e00\u4e2a\u4e2a\u6808\u5e27\u7ec4\u6210\uff0c\u800c\u6bcf\u4e2a\u6808\u5e27\u4e2d\u90fd\u62e5\u6709\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"\u5c40\u90e8\u53d8\u91cf\u8868"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u64cd\u4f5c\u6570\u6808"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u52a8\u6001\u94fe\u63a5"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u65b9\u6cd5\u51fa\u53e3\u4fe1\u606f"),"\u3002(\u6bcf\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528\u5230\u6267\u884c\u5b8c\u7684\u8fc7\u7a0b\uff0c\u5c31\u5bf9\u5e94\u7740\u4e00\u4e2a\u6808\u5e27\u5728jvm stack\u4e2d\u4ece\u5165\u6808\u5230\u51fa\u6808\u7684\u8fc7\u7a0b\u3002) \u5c40\u90e8\u53d8\u91cf\u8868\u5b58\u653e\u4e86\u7f16\u8bd1\u5668\u53ef\u77e5\u7684\u5404\u79cd\u57fa\u672c\u6570\u636e\u7c7b\u578b(boolean\u3001byte\u3001char\u3001short\u3001int\u3001float\u3001long\u3001double)\u3001\u5bf9\u8c61\u5f15\u7528(\u5f15\u7528\u6307\u9488\uff0c\u5e76\u975e\u5bf9\u8c61\u672c\u8eab)"),(0,r.kt)("p",null,"Java \u865a\u62df\u673a\u6808\u4f1a\u51fa\u73b0\u4e24\u79cd\u5f02\u5e38\uff1aStackOverFlowError \u548c OutOfMemoryError\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'StackOverFlowError\uff1a \u82e5Java\u865a\u62df\u673a\u6808\u7684\u5185\u5b58\u5927\u5c0f\u4e0d\u5141\u8bb8\u52a8\u6001\u6269\u5c55\uff0c\u90a3\u4e48\u5f53\u7ebf\u7a0b\u8bf7\u6c42\u6808\u7684\u6df1\u5ea6\u8d85\u8fc7\u5f53\u524dJava\u865a\u62df\u673a\u6808\u7684\u6700\u5927\u6df1\u5ea6\u7684\u65f6\u5019\uff0c\u5c31\u629b\u51faStackOverFlowError\u5f02\u5e38 -------- "\u6808\u6ea2\u51fa", \u53ef\u901a\u8fc7 -Xss \u4fee\u6539\u5927\u5c0f (\u4f8b\u5982 -Xss1K, \u8bbe\u7f6e\u5927\u5c0f\u4e3a 1K)')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'OutOfMemoryError\uff1a \u82e5 Java \u865a\u62df\u673a\u6808\u7684\u5185\u5b58\u5927\u5c0f\u5141\u8bb8\u52a8\u6001\u6269\u5c55\uff0c\u4e14\u5f53\u7ebf\u7a0b\u8bf7\u6c42\u6808\u65f6\u5185\u5b58\u7528\u5b8c\u4e86\uff0c\u65e0\u6cd5\u518d\u52a8\u6001\u6269\u5c55\u4e86\uff0c\u6b64\u65f6\u629b\u51faOutOfMemoryError\u5f02\u5e38\u3002-------- "\u5185\u5b58\u7528\u5149\u4e86"'))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"-Xss ")," \u63a7\u5236\u6808\u5bb9\u91cf"),(0,r.kt)("h2",{id:"24-native-method-stack"},"2.4. Native Method Stack"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"}," \u5728 HotSpot \u865a\u62df\u673a(\u4e5f\u5c31\u662f sun jdk\u5b9e\u73b0)\u4e2d\u548c Java \u865a\u62df\u673a\u6808\u5408\u4e8c\u4e3a\u4e00"),"\u3002\u6027\u8d28\u7c7b\u4f3c"),(0,r.kt)("p",null,"\u7528\u4e8e\u652f\u6301 native \u65b9\u6cd5\u7684\u6267\u884c, \u5b58\u50a8\u6bcf\u4e2a native \u65b9\u6cd5\u7684\u8c03\u7528\u72b6\u6001;"),(0,r.kt)("h2",{id:"25-pc-register\u7a0b\u5e8f\u8ba1\u6570\u5668"},"2.5. PC Register(\u7a0b\u5e8f\u8ba1\u6570\u5668)"),(0,r.kt)("p",null,"\u662f\u6700\u5c0f\u7684\u4e00\u5757\u5185\u5b58\u533a\u57df\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u5f53\u524d\u7ebf\u7a0b\u6240\u6267\u884c\u7684\u5b57\u8282\u7801\u7684\u884c\u53f7\u6307\u793a\u5668; "),(0,r.kt)("p",null,"\u5b57\u8282\u7801\u89e3\u91ca\u5668\u5de5\u4f5c\u65f6\u901a\u8fc7\u6539\u53d8\u8fd9\u4e2a\u8ba1\u6570\u5668\u7684\u503c\u6765\u9009\u53d6\u4e0b\u4e00\u6761\u9700\u8981\u6267\u884c\u7684\u5b57\u8282\u7801\u6307\u4ee4\uff0c\u5206\u652f\u3001\u5faa\u73af\u3001\u8df3\u8f6c\u3001\u5f02\u5e38\u5904\u7406\u3001\u7ebf\u7a0b\u6062\u590d\u7b49\u529f\u80fd\u90fd\u9700\u8981\u4f9d\u8d56\u8fd9\u4e2a\u8ba1\u6570\u5668\u6765\u5b8c\u3002"),(0,r.kt)("p",null,'\u6bcf\u4e2a thread \u90fd\u6709\u4e00\u4e2a\u72ec\u7acb\u7684 "pc-register" ---------- \u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1 \u7ebf\u7a0b\u5207\u6362\u540e\u80fd\u627e\u5230\u6b63\u786e\u7684\u6267\u884c\u4f4d\u7f6e'),(0,r.kt)("h1",{id:"3-gc-\u5783\u573e\u56de\u6536"},"3. gc \u5783\u573e\u56de\u6536"),(0,r.kt)("p",null,"gc \u4e3b\u8981\u53d1\u751f\u5728\u5806\u5185\u5b58\u3002\u6240\u4ee5\u5bf9\u5185\u5b58\u53c8\u79f0\u4e3a gc \u5806"),(0,r.kt)("h2",{id:"31-\u5783\u573e\u6536\u96c6\u5668"},"3.1. \u5783\u573e\u6536\u96c6\u5668"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"serial \u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u7528\u4e8e\u65b0\u751f\u4ee3, \u5355\u7ebf\u7a0b, \u6709 stop the world"),(0,r.kt)("p",{parentName:"li"},"  \u7b80\u5355\u9ad8\u6548, \u7528\u4e8e client \u6a21\u5f0f\u4e0b\u7684 jvm  (\u4e5f\u5c31\u662f\u684c\u9762\u5e94\u7528, \u505c\u987f\u65f6\u95f4 100 ms\u5185, \u5b8c\u5168\u53ef\u4ee5\u63a5\u53d7) \u7684\u65b0\u751f\u4ee3\u6536\u96c6\u5668")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"ParNew \u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u65b0\u751f\u4ee3, \u591a\u7ebf\u7a0b (\u5c31\u662f Serial \u7684\u591a\u7ebf\u7a0b\u7248\u672c ), \u6709 stop the world"),(0,r.kt)("p",{parentName:"li"},"  \u53ea\u6709\u5b83\u80fd\u591f\u914d\u5408\u8001\u5e74\u4ee3\u7684 CMS (concurrent mark sweep)\u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u7528\u4e8e Server \u6a21\u5f0f\u8fd0\u884c\u7684jvm\u7684\u65b0\u751f\u4ee3\u6536\u96c6\u5668")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Parallel Scavenge \u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u65b0\u751f\u4ee3, \u591a\u7ebf\u7a0b"),(0,r.kt)("p",{parentName:"li"},"  \u541e\u5410\u91cf\u53ef\u63a7, \u53ef\u4ee5\u901a\u8fc7jvm\u53c2\u6570\u8bbe\u7f6e (\u541e\u5410\u91cf = cpu\u8fd0\u884c\u4ee3\u7801\u7684\u65f6\u95f4 / (cpu\u8fd0\u884c\u4ee3\u7801\u65f6\u95f4 + cpu \u8fd0\u884c\u5783\u573e\u56de\u6536\u65f6\u95f4))"),(0,r.kt)("p",{parentName:"li"},"  \u81ea\u9002\u5e94\u8c03\u8282 , \u5373\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a jvm \u53c2\u6570, \u7531jvm\u81ea\u52a8\u8bbe\u7f6e \u65b0\u751f\u4ee3\u5927\u5c0f, Eden\u548cSurvivor\u6bd4\u4f8b, \u664b\u5347\u8001\u5e74\u4ee3\u5e74\u9f84\u9608\u503c")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Serial Old \u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u5355\u7ebf\u7a0b, \u8001\u5e74\u4ee3 (Serial \u6536\u96c6\u5668\u7684\u8001\u5e74\u4ee3\u7248\u672c), \u6709stop the world"),(0,r.kt)("p",{parentName:"li"},"  \u7528\u5728 client \u6a21\u5f0f \u4e0b\u7684 jvm")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Parallel Old \u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u8001\u5e74\u4ee3 (Parallel Scavenge \u7684\u8001\u5e74\u4ee3\u7248\u672c), \u591a\u7ebf\u7a0b"),(0,r.kt)("p",{parentName:"li"},"  \u541e\u5410\u91cf\u53ef\u63a7"),(0,r.kt)("p",{parentName:"li"},"  jvm \u81ea\u9002\u5e94\u8c03\u8282")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"CMS (concurrent mark sweep) \u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u591a\u7ebf\u7a0b, \u8001\u5e74\u4ee3 (\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5, \u6709\u5185\u5b58\u788e\u7247, \u4e0d\u5229\u4e8e\u5927Object\u7684\u5185\u5b58\u5206\u914d)"),(0,r.kt)("p",{parentName:"li"},"  \u4f4e\u505c\u987f (\u5c3d\u91cf\u7f29\u77ed\u4e86 stop the world \u505c\u987f\u65f6\u95f4)"),(0,r.kt)("p",{parentName:"li"},"  \u66f4\u8017cpu\u8d44\u6e90 (\u56e0\u4e3a\u5e76\u53d1\u6536\u96c6\u561b)"),(0,r.kt)("p",{parentName:"li"},"  \u65e0\u6cd5\u5904\u7406\u6d6e\u52a8\u5783\u573e (\u5373\u5e76\u53d1\u6e05\u7406\u9636\u6bb5, \u7528\u6237\u7ebf\u7a0b\u4ea7\u751f\u7684\u5783\u573e, \u53ea\u80fd\u4e0b\u6b21 GC \u6e05\u9664)"),(0,r.kt)("p",{parentName:"li"},"  \u7528\u4e8e \u7f51\u7ad9, b/s \u67b6\u6784\u7cfb\u7edf, \u6ce8\u91cd\u670d\u52a1\u7684\u54cd\u5e94\u901f\u5ea6")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"G1 \u6536\u96c6\u5668"),(0,r.kt)("p",{parentName:"li"},"  \u591a\u7ebf\u7a0b, \u7edf\u9886 \u65b0\u751f\u4ee3, \u8001\u5e74\u4ee3 (\u901a\u8fc7 Region)"),(0,r.kt)("p",{parentName:"li"},"  \u6807\u8bb0-\u6574\u7406, and \u590d\u5236"),(0,r.kt)("p",{parentName:"li"},"  \u53ef\u9884\u6d4b\u7684\u505c\u987f"),(0,r.kt)("p",{parentName:"li"},"  \u7528\u4e8e server \u6a21\u5f0f\u7684jvm"))),(0,r.kt)("h2",{id:"32-\u5982\u4f55\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5e94\u8be5\u56de\u6536"},"3.2. \u5982\u4f55\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5e94\u8be5\u56de\u6536"),(0,r.kt)("h3",{id:"321-\u5f15\u7528\u8ba1\u6570\u6cd5-reference-counting"},"3.2.1. \u5f15\u7528\u8ba1\u6570\u6cd5 reference counting"),(0,r.kt)("p",null,"\u5c31\u662f\u7ed9 object \u52a0\u4e0a\u4e00\u4e2a\u8ba1\u6570\u5668, \u8bb0\u5f55 object \u6709\u591a\u5c11\u4e2a\u5f15\u7528, \u4e3a 0 \u65f6\u8bc1\u660e\u6ca1\u6709\u5f15\u7528, \u53ef\u4ee5\u56de\u6536"),(0,r.kt)("p",null,"\u65e0\u6cd5\u89e3\u51b3\u5bf9\u8c61\u95f4\u5faa\u73af\u5f15\u7528\u7684\u95ee\u9898"),(0,r.kt)("h3",{id:"322-\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5-reachability-analysis"},"3.2.2. \u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5 reachability analysis"),(0,r.kt)("p",null,"\u5c31\u662f\u770b gc roots \u5230 object \u662f\u5426\u6709 reference chain, \u5982\u679c\u6ca1\u6709, \u8bc1\u660e\u53ef\u4ee5\u56de\u6536"),(0,r.kt)("p",null,"\u54ea\u4e9b\u5bf9\u8c61\u53ef\u4f5c\u4e3a GC roots Object?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jvm stack \u4e2d\u7684 \u5bf9\u8c61\u5f15\u7528"),(0,r.kt)("li",{parentName:"ul"},"method area \u4e2d\u7c7b\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684Object \u6bd4\u5982 \u7c7b\u53d8\u91cf"),(0,r.kt)("li",{parentName:"ul"},"method area \u4e2d\u5e38\u91cf\u5f15\u7528\u7684Object")),(0,r.kt)("p",null,"\u4e0d\u53ef\u8fbe\u5bf9\u8c61\u4e00\u5b9a\u4f1a\u88ab\u56de\u6536\u5417?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"object \u53ea\u6709\u7ecf\u5386 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u4e8c\u6b21\u6807\u8bb0")," \u624d\u4f1a\u88ab\u56de\u6536"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u6b21\u6807\u8bb0  - \u7ecf\u8fc7 reachability analysis \u5f53\u524dObject\u6ca1\u6709\u53d1\u73b0\u5230 gc roots \u7684 reference chain, \u4e0d\u4e00\u5b9a\u5c31\u88ab\u56de\u6536, \u8fd9\u65f6\u4f1a\u7b2c\u4e00\u6b21\u6807\u8bb0")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u6b21\u6807\u8bb0 - \u5982\u679c \u5f53\u524d Object \u8986\u76d6\u4e86 finalize(), \u5c06\u5f53\u524dObject \u548c reference chain \u4e0a\u4efb\u610fObject\u5efa\u7acb\u8fde\u63a5(\u5982 \u5c06this\u8d4b\u503c\u7ed9\u9759\u6001\u6210\u5458\u53d8\u91cf) \u5c31\u53ef\u4ee5\u9003\u907f\u56de\u6536, \u5982\u679c\u6ca1\u6709\u5efa\u7acb\u94fe\u63a5, \u4f1a\u88ab\u7b2c\u4e8c\u6b21\u6807\u8bb0, \u771f\u6b63\u56de\u6536")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"obj.finalize() \u5bf9\u8c61\u88ab\u56de\u6536\u524d\u4f1a\u6267\u884c\u8fd9\u4e2a\u65b9\u6cd5"))),(0,r.kt)("h3",{id:"323-reference-\u5206\u7c7b"},"3.2.3. reference \u5206\u7c7b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"strong reference"),(0,r.kt)("li",{parentName:"ul"},"soft reference"),(0,r.kt)("li",{parentName:"ul"},"weak reference"),(0,r.kt)("li",{parentName:"ul"},"phantom reference")),(0,r.kt)("h2",{id:"33-\u5783\u573e\u56de\u6536\u7b97\u6cd5"},"3.3. \u5783\u573e\u56de\u6536\u7b97\u6cd5"),(0,r.kt)("h3",{id:"331-\u6807\u8bb0-\u6e05\u9664-\u7b97\u6cd5"},"3.3.1. \u6807\u8bb0-\u6e05\u9664 \u7b97\u6cd5"),(0,r.kt)("p",null,"\u9996\u5148\u53ef\u8fbe\u6027\u5206\u6790, \u4e24\u6b21\u6807\u8bb0\u8fc7\u7a0b\u540e, \u6e05\u9664\u88ab\u6807\u8bb0\u7684\u5185\u5b58\u5757"),(0,r.kt)("p",null,"\u4f1a\u9020\u6210\u5185\u5b58\u788e\u7247 (\u56e0\u4e3a\u56de\u6536\u7684\u5bf9\u8c61\u4e0d\u662f\u5185\u5b58\u8fde\u7eed\u7684), \u7ed9\u65b0Object\u5206\u914d\u5185\u5b58\u65f6\u627e\u4e0d\u5230\u8db3\u591f\u7684\u8fde\u7eed\u7a7a\u95f4, \u5bfc\u81f4\u63d0\u524d\u89e6\u53d1GC"),(0,r.kt)("h3",{id:"332-\u590d\u5236\u7b97\u6cd5"},"3.3.2. \u590d\u5236\u7b97\u6cd5"),(0,r.kt)("p",null,"\u5c06\u5806\u7a7a\u95f4\u4e00\u5206\u4e3a\u4e8c, \u5185\u5b58\u5206\u914d\u53ea\u5728\u67d0\u4e00\u5757\u7a7a\u95f4, \u5f53\u7a7a\u95f4\u4e0d\u591f\u65f6\u5019, \u5c06\u4ecd\u7136\u4f1a\u5b58\u6d3b\u7684\u5bf9\u8c61\u590d\u5236\u5230\u7a7a\u95f2\u7684\u53e6\u4e00\u5757\u7a7a\u95f4, \u7136\u540e\u6e05\u9664\u6ee1\u4e86\u7684\u7a7a\u95f4"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u89e3\u51b3\u4e86\u5185\u5b58\u788e\u7247\u5316\u7684\u95ee\u9898"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u5927\u5bf9\u8c61, \u590d\u5236\u662f\u4e2a\u8017\u65f6\u8017\u529b\u7684\u64cd\u4f5c"),(0,r.kt)("li",{parentName:"ul"},"\u4f1a\u6d6a\u8d39\u4e00\u534a\u7684\u7a7a\u95f4")),(0,r.kt)("h3",{id:"333-\u6807\u8bb0-\u6574\u7406-\u7b97\u6cd5"},"3.3.3. \u6807\u8bb0-\u6574\u7406 \u7b97\u6cd5"),(0,r.kt)("p",null,"\u6807\u8bb0\u5f85\u56de\u6536\u7684\u5bf9\u8c61, \u5c06\u6807\u8bb0\u7684Object\u5411\u5185\u5b58\u4e00\u7aef\u79fb\u52a8, \u7136\u540e\u6e05\u7406\u6389\u6807\u8bb0\u7684Object\u6240\u5728\u7684\u5185\u5b58"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u590d\u5236\u64cd\u4f5c, \u7701\u65f6\u7701\u529b"),(0,r.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u7a7a\u95f4\u6d6a\u8d39")),(0,r.kt)("h3",{id:"334-\u5206\u4ee3\u6536\u96c6\u7b97\u6cd5"},"3.3.4. \u5206\u4ee3\u6536\u96c6\u7b97\u6cd5"),(0,r.kt)("p",null,"\u4e3a\u4e86\u63d0\u9ad8\u56de\u6536\u6548\u7387, \u6839\u636eObject\u5b58\u6d3b\u5468\u671f\u4e0d\u540c, \u5b58\u5230\u4e0d\u540c\u7684\u5185\u5b58\u5757, \u8fd9\u4e9b\u5185\u5b58\u5757\u91c7\u7528\u4e0d\u540c\u7684\u6536\u96c6\u7b97\u6cd5:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"new generation (\u65b0\u751f\u4ee3\u3002) - \u91c7\u7528\u590d\u5236\u7b97\u6cd5, \u5206\u4e3a\u4e09\u5757, eden: survivor1: survivor2 = 8:1:1, \u59cb\u7ec8\u4fdd\u8bc1\u6709\u4e00\u4e2a survivor \u7a7a\u95f2, \u4e5f\u5c31\u662f\u8bf4\u4f1a\u6d6a\u8d39 10% \u7a7a\u95f4"),(0,r.kt)("p",{parentName:"li"},"  \u65b0\u521b\u5efa\u7684 object \u653e\u5728 Eden, \u7a7a\u95f4\u4e0d\u591f\u53d1\u8d77 minor gc (\u5927\u91cf\u5bf9\u8c61\u5206\u914d\u5728\u8fd9\u91cc, \u6240\u4ee5 minor gc \u53d1\u751f\u7684\u5f88\u9891\u7e41, \u4f46\u662f\u5f88\u5feb)"),(0,r.kt)("p",{parentName:"li"},"  \u5bf9\u8c61\u7ecf\u5386 15 \u6b21 minor gc \u540e, \u4f1a\u8fdb\u5165\u5230 \u8001\u5e74\u4ee3, \u8fd9\u4e2a\u9608\u503c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"-XX:MaxTenuringThreshold")," \u8bbe\u5b9a"),(0,r.kt)("p",{parentName:"li"},"  \u5927\u5bf9\u8c61 (\u957f\u5b57\u7b26\u4e32, \u6570\u7ec4 \u8fd9\u6837\u7684\u9700\u8981\u8fde\u7eed\u7a7a\u95f4\u7684\u5bf9\u8c61) \u76f4\u63a5\u5206\u914d\u8fdb\u5165\u8001\u5e74\u4ee3, \u8fd9\u4e2a\u5c3a\u5bf8\u9608\u503c \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"-XX:PretenureSizeThreshold")," \u8bbe\u5b9a. (\u4e3a\u4ec0\u4e48\u8981\u8bbe\u7f6e\u8fd9\u6761\u7b56\u7565? \u4e00\u662f\u907f\u514d\u63d0\u524d\u89e6\u53d1 major gc, \u660e\u660eEden\u8fd8\u6709\u7a7a\u95f4, \u4f46\u662f\u5bb9\u4e0d\u4e0b\u8fd9\u4e2a \u5927\u5bf9\u8c61\u4e86. \u4e8c\u662f\u65b0\u751f\u4ee3 gc \u91c7\u7528\u590d\u5236\u7b97\u6cd5, \u800c\u590d\u5236\u5927\u5bf9\u8c61\u662f\u975e\u5e38\u8017\u65f6\u7684)"),(0,r.kt)("p",{parentName:"li"},"  \u5185\u5b58\u5206\u914d\u62c5\u4fdd\u673a\u5236: minor gc \u65f6\u5019, \u82e5 survivor2 \u7a7a\u95f4\u4e5f\u4e0d\u591f, \u5219\u5b58\u6d3b\u5bf9\u8c61\u76f4\u63a5\u8fdb\u5165 old generation (\u5982\u679c old generation \u4e5f\u6ee1\u4e86, \u5219\u53ea\u80fd\u89e6\u53d1 full/major gc \u4e86)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"old generation (\u8001\u5e74\u4ee3\u3002) - \u6807\u8bb0-\u6574\u7406 \u7b97\u6cd5"),(0,r.kt)("p",{parentName:"li"},"  \u8fd9\u91cc\u7684\u5bf9\u8c61\u751f\u547d\u5468\u671f\u957f, \u5982\u679c\u7ee7\u7eed\u4f7f\u7528 \u590d\u5236\u7b97\u6cd5, \u9700\u8981\u5927\u5757\u7684\u5206\u914d\u62c5\u4fdd\u5185\u5b58, \u4e0d\u5212\u7b97")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6c38\u4e45\u4ee3"))),(0,r.kt)("p",null,"minor gc : \u65b0\u751f\u4ee3\u53d1\u8d77\u7684 gc \u53eb\u505a minor gc.  eden \u548c survivor1 \u4e2d\u5b58\u6d3b\u7684\u5bf9\u8c61\u88ab\u590d\u5236\u8fdb\u5165\u7a7a\u95f2\u7684 survivor2\uff0c\u6e05\u7a7aeden \u548c survivor1. "),(0,r.kt)("p",null,"major gc: \u53d1\u751f\u5728 \u8001\u5e74\u4ee3 \u7684 gc . \u975e\u5e38\u6162"),(0,r.kt)("p",null,"\u4e3a\u4ec0\u4e48\u9700\u8981 survivor\uff1f\u52a0\u5165 survivor\uff0c\u5b58\u6d3b\u5bf9\u8c61\u6709\u4e86\u4e00\u4e2a\u7f13\u51b2\u533a\u57df\uff0c \u4e0d\u4f1a\u76f4\u63a5\u8fdb\u5165\u8001\u5e74\u4ee3\uff0c\u51cf\u5c11\u4e86 full gc"),(0,r.kt)("p",null,"\u4e3a\u4ec0\u4e48\u9700\u89812\u5757 survivor\uff1f\u7c7b\u4f3c \u590d\u5236\u6536\u96c6\u7b97\u6cd5\uff0c \u662f\u4e3a\u4e86\u5229\u7528\u590d\u5236\u64cd\u4f5c, \u907f\u514d\u5185\u5b58\u788e\u7247\u5316\u7684\u95ee\u9898"),(0,r.kt)("p",null,"\u4ec0\u4e48\u65f6\u5019\u51fa\u53d1 minor gc: \u5f53\u5e74\u8f7b\u4ee3\u6ee1\u65f6\u5c31\u4f1a\u89e6\u53d1Minor GC\uff0c\u8fd9\u91cc\u7684\u5e74\u8f7b\u4ee3\u6ee1\u6307\u7684\u662fEden\u4ee3\u6ee1\uff0cSurvivor\u6ee1\u4e0d\u4f1a\u5f15\u53d1GC"),(0,r.kt)("p",null,"\u4ec0\u4e48\u65f6\u5019\u51fa\u53d1 full gc: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5806\u5185\u5b58\u7684\u8001\u5e74\u4ee3\u6ee1\u4e86"),(0,r.kt)("li",{parentName:"ul"},"\u65b9\u6cd5\u533a\u6ee1\u4e86")),(0,r.kt)("p",null,"\u5185\u5b58\u5206\u914d\u62c5\u4fdd\u673a\u5236\u8be6\u7ec6\u8fc7\u7a0b:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"jvm \u5148\u68c0\u67e5 \u8001\u5e74\u4ee3\u7a7a\u95f2\u8fde\u7eed\u7a7a\u95f4\u662f\u5426\u5927\u4e8e \u65b0\u751f\u4ee3\u6240\u6709Object\u603b\u5927\u5c0f, \u82e5 TRUE, Minor GC \u53ef\u4ee5\u786e\u4fdd\u5b89\u5168, \u82e5 FALSE, \u4e0b\u4e00\u6b65")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"jvm \u67e5\u770b\u662f\u5426\u914d\u7f6e\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"-XX:-HandlePromotionFailure")," (\u4e00\u822c\u4f1a\u6253\u5f00, \u907f\u514d Full GC \u9891\u7e41), \u82e5 FALSE, \u4e0d\u5141\u8bb8\u5192\u62c5\u4fdd\u5931\u8d25\u7684\u98ce\u9669, \u8001\u5e74\u4ee3\u76f4\u63a5\u8fdb\u884c Full GC, \u82e5 TRUE, \u90a3\u4e48\u5141\u8bb8\u5192\u62c5\u4fdd\u5931\u8d25\u7684\u98ce\u9669, \u4e0b\u4e00\u6b65")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u7ee7\u7eed\u68c0\u67e5\u8001\u5e74\u4ee3\u8fde\u7eed\u7a7a\u95f2\u7a7a\u95f4\u662f\u5426\u5927\u4e8e \u5386\u53f2\u4e0a\u664b\u5347\u5230\u8001\u5e74\u4ee3\u7684Object\u7684\u5e73\u5747\u5927\u5c0f, \u82e5TRUE, \u5c1d\u8bd5\u8fdb\u884c Minor GC (\u5192\u7740\u98ce\u9669), \u82e5 FALSE, \u8fdb\u884c Full GC"))),(0,r.kt)("h1",{id:"4-java\u7684\u4ee3\u7801\u6267\u884c\u673a\u5236"},"4. Java\u7684\u4ee3\u7801\u6267\u884c\u673a\u5236"),(0,r.kt)("h2",{id:"41-\u7c7b\u7f16\u8bd1"},"4.1. \u7c7b\u7f16\u8bd1"),(0,r.kt)("p",null,"jvm \u89c4\u5b9a\u4e86 class \u89c4\u8303\uff0c \u4f46\u662f\u600e\u4e48\u4ece java \u6587\u4ef6\u5230 class \u6587\u4ef6\u5e76\u6ca1\u6709\u89c4\u5b9a\uff0c \u5382\u5546\u6709\u5f88\u591a\u5b9e\u73b0\uff0c javac\uff0c ecj \uff08eclipse compiler for Java\uff09\uff0c jikes"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"javac -g Foo.java")," \u7f16\u8bd1 \uff08-g \u751f\u6210 \u6240\u6709\u8c03\u8bd5\u4fe1\u606f\uff09\uff0c \u7136\u540e \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"javap -c -s -l -verbose Foo")," \u67e5\u770b class \u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'/**\n * Foo\n */\npublic class Foo {\n\n    private static final int MAX_COUNT = 100;\n    private static int count = 0;\n\n    public int bar() throws Exception {\n        if (++count >= MAX_COUNT) {\n            count = 0;\n            throw new Exception("count overflow.");\n        }\n        return count;\n    }\n}\n\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'Classfile /C:/Users/xiaoyu/Desktop/Foo.class\n  Last modified 2018-12-28; size 607 bytes\n  MD5 checksum f76c99d05a7c762ddacdbd5c4c2d1650\n  Compiled from "Foo.java"\npublic class Foo\n  minor version: 0\n  major version: 52 // -- jdk \u7248\u672c\u53f7, 50 -> jdk 6, 51 -> jdk7, 52 -> jdk8\n  flags: ACC_PUBLIC, ACC_SUPER\nConstant pool: //-- \u5e38\u91cf\u6c60, \u5b58\u653e field name, method name, type name, \u5e38\u91cf\u503c\n   #1 = Methodref          #7.#27         // java/lang/Object."<init>":()V\n   #2 = Fieldref           #3.#28         // Foo.count:I\n   #3 = Class              #29            // Foo\n   #4 = Class              #30            // java/lang/Exception\n   #5 = String             #31            // count overflow.\n   #6 = Methodref          #4.#32         // java/lang/Exception."<init>":(Ljava/lang/String;)V\n   #7 = Class              #33            // java/lang/Object\n   #8 = Utf8               MAX_COUNT\n   #9 = Utf8               I\n  #10 = Utf8               ConstantValue\n  #11 = Integer            100\n  #12 = Utf8               count\n  #13 = Utf8               <init>\n  #14 = Utf8               ()V\n  #15 = Utf8               Code\n  #16 = Utf8               LineNumberTable\n  #17 = Utf8               LocalVariableTable\n  #18 = Utf8               this\n  #19 = Utf8               LFoo;\n  #20 = Utf8               bar\n  #21 = Utf8               ()I\n  #22 = Utf8               StackMapTable\n  #23 = Utf8               Exceptions\n  #24 = Utf8               <clinit>\n  #25 = Utf8               SourceFile\n  #26 = Utf8               Foo.java\n  #27 = NameAndType        #13:#14        // "<init>":()V\n  #28 = NameAndType        #12:#9         // count:I\n  #29 = Utf8               Foo\n  #30 = Utf8               java/lang/Exception\n  #31 = Utf8               count overflow.\n  #32 = NameAndType        #13:#34        // "<init>":(Ljava/lang/String;)V\n  #33 = Utf8               java/lang/Object\n  #34 = Utf8               (Ljava/lang/String;)V\n{\n  public Foo(); // -- \u751f\u6210\u7684\u9ed8\u8ba4\u6784\u9020\u5668\u65b9\u6cd5\n    descriptor: ()V\n    flags: ACC_PUBLIC\n    Code:\n      stack=1, locals=1, args_size=1\n         0: aload_0\n         1: invokespecial #1                  // Method java/lang/Object."<init>":()V //-- jvm\u63d0\u4f9b\u7684\u56db\u4e2a\u65b9\u6cd5\u6307\u4ee4\u4e4b\u4e00\n         4: return\n      LineNumberTable:\n        line 4: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  this   LFoo;\n\n  public int bar() throws java.lang.Exception; //-- bar \u65b9\u6cd5\u7684\u5143\u6570\u636e\u4fe1\u606f\n    descriptor: ()I\n    flags: ACC_PUBLIC\n    Code:\n      stack=3, locals=1, args_size=1\n         0: getstatic     #2                  // Field count:I\n         3: iconst_1\n         4: iadd\n         5: dup\n         6: putstatic     #2                  // Field count:I\n         9: bipush        100\n        11: if_icmplt     28\n        14: iconst_0\n        15: putstatic     #2                  // Field count:I\n        18: new           #4                  // class java/lang/Exception\n        21: dup\n        22: ldc           #5                  // String count overflow.\n        24: invokespecial #6                  // Method java/lang/Exception."<init>":(Ljava/lang/String;)V\n        27: athrow\n        28: getstatic     #2                  // Field count:I\n        31: ireturn\n      LineNumberTable: // -- \u5bf9\u5e94\u4e86\u6e90\u7801\u7684\u884c\u53f7, \u67e5\u627e\u95ee\u9898\u5f88\u65b9\u4fbf\n        line 10: 0\n        line 11: 14\n        line 12: 18\n        line 14: 28\n      LocalVariableTable: // -- \u5c40\u90e8\u53d8\u91cf\u4fe1\u606f, \u5982\u679c\u6ca1\u6709\u8fd9\u884c\u4fe1\u606f, \u6211\u4eec\u65e0\u6cd5\u77e5\u9053\u5c40\u90e8\u53d8\u91cf\u540d\u79f0\n        Start  Length  Slot  Name   Signature\n            0      32     0  this   LFoo;\n      StackMapTable: number_of_entries = 1 //--\u8bb0\u5f55\u6709\u5206\u652f\u7684\u60c5\u51b5\n        frame_type = 28 /* same */\n    Exceptions: //-- \u5f02\u5e38\u5904\u7406\u5668\u8868\n      throws java.lang.Exception\n\n  static {};\n    descriptor: ()V\n    flags: ACC_STATIC\n    Code:\n      stack=1, locals=0, args_size=0\n        //-- \u65b9\u6cd5\u5bf9\u5e94\u7684\u5b57\u8282\u7801\n         0: iconst_0\n         1: putstatic     #2                  // Field count:I\n         4: return\n      LineNumberTable:\n        line 7: 0\n}\nSourceFile: "Foo.java"\n\n')),(0,r.kt)("h2",{id:"42-\u7c7b\u52a0\u8f7d"},"4.2. \u7c7b\u52a0\u8f7d"),(0,r.kt)("p",null,"\u5c06 class \u6587\u4ef6 \u52a0\u8f7d\u5230 jvm , \u5e76\u5f62\u6210 Class \u5bf9\u8c61 \u7684\u8fc7\u7a0b;"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u88c5\u8f7d"),(0,r.kt)("li",{parentName:"ul"},"\u94fe\u63a5 (\u6b64\u65f6\u5df2\u7ecf\u52a0\u8f7d\u5b8c\u6bd5, \u5f62\u6210 Class \u5bf9\u8c61)"),(0,r.kt)("li",{parentName:"ul"},"\u521d\u59cb\u5316 (\u4f7f\u7528\u5bf9\u8c61\u524d\u5fc5\u987b\u521d\u59cb\u5316, \u4e3a\u9759\u6001\u53d8\u91cf\u8d4b\u503c)")),(0,r.kt)("h3",{id:"421-classloader\u7c7b\u52a0\u8f7d\u5668"},"4.2.1. classloader\u7c7b\u52a0\u8f7d\u5668"),(0,r.kt)("p",null,"check java-note#classloader\u7c7b\u52a0\u8f7d\u5668"),(0,r.kt)("h3",{id:"422-\u88c5\u8f7dload"},"4.2.2. \u88c5\u8f7d(load)"),(0,r.kt)("p",null,"\u627e\u5230 class \u6587\u4ef6 \u5e76\u52a0\u8f7d\u5230 jvm, jvm \u901a\u8fc7  ",(0,r.kt)("inlineCode",{parentName:"p"},"ClassLoader \u5b9e\u4f8b")," \u548c \u7c7b\u7684",(0,r.kt)("inlineCode",{parentName:"p"}," full qualified name")," \u52a0\u8f7d, \u540c\u6837\u4e5f\u901a\u8fc7\u8fd9\u4e24\u4e2a\u5143\u7d20\u6807\u8bc6\u88ab\u52a0\u8f7d\u4e86\u7684 \u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testClassLoad() {\n    // \u5bf9\u4e8e \u6570\u7ec4\u7c7b\u578b\u7684\u7c7b\uff0c\u7c7b\u540d \u201c[\u201d + "\u57fa\u672c\u7c7b\u578bor L" + \u5f15\u7528\u7c7b\u578b\u7c7b\u540d\n    byte[] bytes = new byte[1024];\n    Object[] objArr = new Object[10];\n    System.out.println(">>> bytes name: " + bytes.toString());\n    System.out.println(">>> objArr name: " + objArr.toString());\n    // result:\n    //>>> bytes name: [B@11028347\n    //>>> objArr name: [Ljava.lang.Object;@14899482\n}\n\n')),(0,r.kt)("h3",{id:"423-\u94fe\u63a5link"},"4.2.3. \u94fe\u63a5(Link)"),(0,r.kt)("p",null,"\u4e5f\u5c31\u662f\u5e38\u89c1class\u5bf9\u8c61\uff1b\u5177\u4f53\u5305\u62ec\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5bf9class\u6587\u4ef6\u7684\u683c\u5f0f\u6821\u9a8c, \u5982\u679cclass\u683c\u5f0f\u4e0d\u7b26\u5408, \u629b\u51fa error, \u6821\u9a8c\u4e2d\u5982\u679c\u78b0\u5230\u5176\u4ed6\u7c7b, \u4e5f\u52a0\u8f7d, \u82e5\u52a0\u8f7d\u5931\u8d25, \u629b\u51fa NoClassdeffoundError")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6821\u9a8c\u5b8c\u540e, \u521d\u59cb\u5316 \u9759\u6001\u53d8\u91cf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6700\u540e\u6821\u9a8c \u5c5e\u6027, \u65b9\u6cd5. \u786e\u4fdd\u5c5e\u6027,\u65b9\u6cd5\u5b58\u5728. \u53ef\u80fd\u629b\u51fa NosuchmethodError, NosuchfieldError"))),(0,r.kt)("h3",{id:"424-\u521d\u59cb\u5316initialize"},"4.2.4. \u521d\u59cb\u5316(Initialize)"),(0,r.kt)("p",null,"\u6267\u884c\u7c7b\u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u9759\u6001\u521d\u59cb\u5316\u4ee3\u7801"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"\u6784\u9020\u5668\u4ee3\u7801"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"\u9759\u6001\u5c5e\u6027\u521d\u59cb\u5316")),(0,r.kt)("h2",{id:"43-\u7c7b\u6267\u884c"},"4.3. \u7c7b\u6267\u884c"),(0,r.kt)("h3",{id:"431-\u5b57\u8282\u7801\u89e3\u91ca\u6267\u884cand\u7f16\u8bd1\u6267\u884c\u5e76\u5b58\u5982\u4f55\u5206\u754c"},"4.3.1. \u5b57\u8282\u7801\u89e3\u91ca\u6267\u884cand\u7f16\u8bd1\u6267\u884c\u5e76\u5b58\u5982\u4f55\u5206\u754c"),(0,r.kt)("p",null,"\u6839\u636e\u65b9\u6cd5\u4e0a\u76842\u4e2a\u8ba1\u6570\u5668\u662f\u5426\u8d85\u8fc7\u9608\u503c\u51b3\u5b9a\u662f\u5426\u7531 \u89e3\u91ca\u6267\u884c\u5347\u7ea7\u4e3a\u7f16\u8bd1\u6267\u884c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8c03\u7528\u8ba1\u6570\u5668 - \u65b9\u6cd5\u88ab\u8c03\u7528\u7684\u6b21\u6570"),(0,r.kt)("li",{parentName:"ul"},"\u56de\u8fb9\u8ba1\u6570\u5668 - \u65b9\u6cd5\u5185\u90e8\u5faa\u73af\u4ee3\u7801\u7684\u5faa\u73af\u6b21\u6570")),(0,r.kt)("h3",{id:"432-\u5b57\u8282\u7801\u89e3\u91ca\u6267\u884c"},"4.3.2. \u5b57\u8282\u7801\u89e3\u91ca\u6267\u884c"),(0,r.kt)("h4",{id:"4321-\u65b9\u6cd5\u76f8\u5173\u7684jvm\u6307\u4ee4"},"4.3.2.1. \u65b9\u6cd5\u76f8\u5173\u7684jvm\u6307\u4ee4"),(0,r.kt)("p",null,"class \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d, jvm\u63d0\u4f9b\u4e00\u5957\u6307\u4ee4\u6765\u6267\u884c\u4e0d\u540c\u7684\u65b9\u6cd5\u8c03\u7528"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"invokestatic - \u8c03\u7528 static \u65b9\u6cd5"),(0,r.kt)("li",{parentName:"ul"},"invokevirtual  - \u8c03\u7528\u5bf9\u8c61\u5b9e\u4f8b\u7684\u65b9\u6cd5"),(0,r.kt)("li",{parentName:"ul"},"invokeinterface - \u8c03\u7528\u63a5\u53e3\u7684\u65b9\u6cd5"),(0,r.kt)("li",{parentName:"ul"},"invokespecial - \u8c03\u7528 private \u7684\u65b9\u6cd5 \u548c \u8c03\u7528 \u7f16\u8bd1\u540e\u751f\u6210\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"<init>")," \u65b9\u6cd5 (\u5373\u5bf9\u8c61\u5b9e\u4f8b\u5316\u65f6\u7684\u521d\u59cb\u5316\u65b9\u6cd5)")),(0,r.kt)("p",null,"\u901a\u8fc7 javap -c xxx \u53ef\u4ee5\u4ee5\u6587\u672c\u5f62\u5f0f\u67e5\u770b class\u4e8c\u8fdb\u5236\u6587\u4ef6"),(0,r.kt)("p",null,"jvm \u4ee5 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u57fa\u4e8e \u6808\u7684\u7ed3\u6784")," \u6765\u6267\u884c \u5b57\u8282\u7801, \u597d\u5904\u65f6\u4f53\u79ef\u5c0f, \u4ee3\u7801\u7d27\u51d1"),(0,r.kt)("p",null,"\u4e00\u4e2a thread \u5728\u521b\u5efa\u540e\u4f1a\u4ea7\u751f "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u7a0b\u5e8f\u8ba1\u6570\u5668")," (pc register) - \u5b58\u653e\u4e0b\u4e00\u6761\u5f85\u6267\u884c\u7684\u6307\u4ee4\u5728\u65b9\u6cd5\u5185\u7684\u504f\u79fb\u91cf"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u6808"),' - \u5b58\u653e "\u6808\u5e27" (stack frame), \u6bcf\u4e2a\u65b9\u6cd5\u6bcf\u6b21\u8c03\u7528\u90fd\u4f1a\u4ea7\u751f\u6808\u5e27')),(0,r.kt)("p",null,"\u793a\u610f\u56fe:"),(0,r.kt)("p",null,"\u5c40\u90e8\u53d8\u91cf\u533a  : \u5b58\u653e\u5c40\u90e8\u53d8\u91cf\u548c\u53c2\u6570"),(0,r.kt)("p",null,"\u64cd\u4f5c\u6570\u6808: \u5b58\u653e\u65b9\u6cd5\u6267\u884c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4e2d\u95f4\u7ed3\u679c"),(0,r.kt)("h4",{id:"4322-jvm\u6307\u4ee4\u600e\u4e48\u89e3\u91ca\u6267\u884c"},"4.3.2.2. jvm\u6307\u4ee4\u600e\u4e48\u89e3\u91ca\u6267\u884c"),(0,r.kt)("p",null,"\u51af-\u8bfa\u4f0a\u66fc \u4f53\u7cfb \u4e2d\u7684 fdx \u5faa\u73af, \u601d\u8def\u5982\u4e0b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"// \u5b9e\u73b0 fdx \u5faa\u73af\u6709\u591a\u79cd\u65b9\u5f0f, switch-threading, token-threading, inline-threading...\n// switch-threading \u5b9e\u73b0\u5faa\u73af\nwhile(true) {\n    // // \u83b7\u53d6\u4e0b\u4e00\u6761\u6307\u4ee4, \u5206\u6d3e, \u6267\u884c\n    int code = fetchNextCode(); \n    switch (code) {\n        case IADD:\n            // do int add\n        case ...:\n            // do sth\n    }\n}\n\n// token-threading \u5b9e\u73b0\u5faa\u73af, sun jdk \u9ed8\u8ba4\u91c7\u7528\u8fd9\u79cd\u5faa\u73af\u65b9\u5f0f\n// \u8f83\u4e4b \u524d\u4e00\u79cd\u65b9\u5f0f, \u5197\u4f59\u4e86 fetch \u548c dispatch, \u53bb\u9664\u4e86 switch; \u6240\u4ee5\u6027\u80fd\u597d\u4e9b, \u4f46\u662f\u5185\u5b58\u5360\u7528\u66f4\u591a\nwhile(true) {\n    IADD: {\n        // do int add\n        fetchNextCode();\n        dispatch();\n    }\n    ICONST_0: {\n        push(0);\n        fetchNextCode();\n        dispatch();\n    }\n\n}\n")),(0,r.kt)("h3",{id:"433-\u5b57\u8282\u7801\u7f16\u8bd1\u6267\u884c"},"4.3.3. \u5b57\u8282\u7801\u7f16\u8bd1\u6267\u884c"),(0,r.kt)("p",null,"\u5b57\u8282\u7801\u89e3\u91ca\u6267\u884c\u7684\u6548\u7387\u4e0d\u591f\u597d, \u65b0\u7684\u6267\u884c\u65b9\u5f0f\u51fa\u73b0: \u5c06 \u5b57\u8282\u7801 \u7f16\u8bd1\u4e3a \u673a\u5668\u7801, \u5728\u8fd0\u884c\u65f6\u8fdb\u884c ------- ",(0,r.kt)("inlineCode",{parentName:"p"},"JIT\u7f16\u8bd1\u5668")," (just-in-time compiler \u5373\u65f6\u7f16\u8bd1\u5668)"),(0,r.kt)("p",null,'sun jdk \u5bf9\u5b57\u8282\u7801\u4e2d\u6267\u884c\u9891\u7387\u8f83\u9ad8\u7684\u90e8\u5206\u4ee3\u7801\u7f16\u8bd1\u4e3a\u673a\u5668\u7801, \u9891\u7387\u4e0d\u591f\u9ad8\u7684\u90e8\u5206\u4e8c\u5b57\u8282\u7801\u4ecd\u65e7\u89e3\u91ca\u6267\u884c -------- \u56e0\u6b64 sun jdk \u53c8\u79f0\u4e3a Hotspot VM, \u53d6 "\u70ed\u70b9"\u4e4b\u610f'),(0,r.kt)("p",null,"sun jdk \u63d0\u4f9b\u4e24\u79cd\u7f16\u8bd1\u6a21\u5f0f : client compiler, server compiler"),(0,r.kt)("p",null,"sun jdk \u6839\u636e \u673a\u5668\u914d\u7f6e\u51b3\u5b9a\u4f7f\u7528\u4ec0\u4e48\u6a21\u5f0f, \u4e5f\u53ef\u4ee5\u5f3a\u5236\u6307\u5b9a\u4ee5\u54ea\u79cd\u6a21\u5f0f\u542f\u52a8jvm"),(0,r.kt)("h4",{id:"4331-client-compiler"},"4.3.3.1. client compiler"),(0,r.kt)("p",null,"\u53c8\u540d ",(0,r.kt)("inlineCode",{parentName:"p"},"C1 \u7f16\u8bd1"),", \u8f7b\u91cf\u7ea7, \u5360\u7528\u5185\u5b58\u5c11, \u9002\u5408\u684c\u9762\u4ea4\u4e92\u5f0f\u5e94\u7528"),(0,r.kt)("p",null,"\u4e3b\u8981\u4f18\u5316\u624b\u6bb5:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u65b9\u6cd5\u5185\u8054 - \u5f53\u524d\u65b9\u6cd5\u5185\u90e8\u8c03\u7528\u53e6\u4e00\u4e2a\u65b9\u6cd5, JIT \u7f16\u8bd1\u540e, \u53e6\u5916\u7684\u65b9\u6cd5\u4ee3\u7801\u76f4\u63a5\u88ab\u7f16\u5165\u5f53\u524d\u65b9\u6cd5\u4e2d"),(0,r.kt)("li",{parentName:"ul"},"\u53bb\u9664\u865a\u62df\u5316 - class\u5b57\u8282\u7801\u88ab load \u540e, \u4f1a\u5206\u6790\u5176\u7c7b\u5c42\u6b21\u7ed3\u6784, \u5982\u679c\u4e00\u4e2a\u63a5\u53e3\u53ea\u6709\u4e00\u4e2a\u5b9e\u73b0\u7c7b, \u800c\u8fd9\u4e2a\u63a5\u53e3\u5728\u67d0\u4e2a\u5730\u65b9\u88ab\u4f7f\u7528\u4e86, JIT \u4f1a\u5728 \u8c03\u7528\u5904\u8fdb\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"\u65b9\u6cd5\u5185\u8054"),"\u4f18\u5316"),(0,r.kt)("li",{parentName:"ul"},"\u5197\u4f59\u524a\u9664, \u5728\u7f16\u8bd1\u65f6, \u6839\u636e\u4ee3\u7801\u8fd0\u884c\u60c5\u51b5\u8fdb\u884c\u4ee3\u7801\u7684\u524a\u9664, \u5982\u679c\u67d0\u4e2a\u6761\u4ef6\u5206\u652f\u7684\u4ee3\u7801\u6ca1\u6709\u6267\u884c\u5230, C1\u7f16\u8bd1 \u4f1a\u5728\u7f16\u8bd1\u540e\u76f4\u63a5\u53bb\u6389\u8fd9\u6bb5\u4e0d\u4f1a\u88ab\u6267\u884c\u5230\u7684\u4ee3\u7801")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'\n// \u4f18\u5316 - \u65b9\u6cd5\u5185\u8054\n\npublic void bar() {\n    foo()\n}\nprivate void foo() {\n    // foo method\n    System.out.println("foo method");\n}\n\n// \u4f18\u5316\u540e:\npublic void bar() {\n    // foo method\n    System.out.println("foo method");\n}\n\n////////////////////////////////////////////\n\n// \u4f18\u5316 - \u53bb\u9664\u865a\u62df\u5316\n\npublic interface IFoo {\n    void bar();\n}\npublic class Foo implements IFoo {// IFoo \u53ea\u6709\u8fd9\u4e00\u4e2a\u5b9e\u73b0\n public void bar() {\n     // bar method\n }\n}\n\npublic class Demo {\n    public void exec(IFoo foo) {\n        foo.bar();\n    }\n}\n\n// \u4f18\u5316\u540e:\n// \u5f53 jvm \u53d1\u73b0 \u53ea\u6709 Foo \u5b9e\u73b0\u4e86 IFoo, \u4f1a\u5982\u4e0b\u4f18\u5316: \u76f4\u63a5\u628a bar() \u7684\u5b9e\u73b0\u4ee3\u7801\u79fb\u5230 exec() \u4e2d\u53bb\npublic void exec(IFoo foo) {\n    // bar method\n}\n\n////////////////////////////////////////////////////\n\n// \u4f18\u5316 - \u5197\u4f59\u524a\u9664\nprivate static final Log log = ....\nprivate static final boolean isDebug = log.isDebugEnable();\n\npublic void exec() {\n    if (isDebug) {\n        log.debug("...");\n    }\n\n    // do sth\n}\n\n// \u4f18\u5316\u540e:\n// isDebug \u4e3a false \u624d\u4f1a\u4f18\u5316\npublic void exec() {\n    // do sth\n}\n\n// \u8fd9\u7c7b\u4f18\u5316\u4e5f\u662f\u4e3a\u4ec0\u4e48\u6709\u7684\u4ee3\u7801\u7f16\u5199\u89c4\u8303\u89c4\u5b9a: \u4e0d\u8981\u76f4\u63a5\u4f7f\u7528 log.debug(), \u800c\u8981\u5148\u5224\u65ad debug \u662f\u5426\u5f00\u542f; \n// \u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u6027\u80fd\n\n\n')),(0,r.kt)("h4",{id:"4332-server-compiler"},"4.3.3.2. server compiler"),(0,r.kt)("p",null,"\u53c8\u79f0\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"C2\u7f16\u8bd1"),", \u91cd\u91cf\u7ea7, \u5185\u5b58\u5360\u7528\u8f83\u591a, \u9002\u5408\u670d\u52a1\u5668\u7aef\u5e94\u7528"),(0,r.kt)("p",null,"\u548c c1\u7f16\u8bd1 \u4e3b\u8981\u7684\u4e0d\u540c\u5728\u4e8e: \u5bc4\u5b58\u5668\u5206\u914d\u7b56\u7565and\u4f18\u5316\u8303\u56f4\u4e0d\u540c"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"\u9003\u9038\u5206\u6790"),"\u662fC2\u7f16\u8bd1\u4f18\u5316\u7684\u57fa\u7840, \u57fa\u4e8e \u9003\u9038\u5206\u6790, \u6709\u8fd9\u4e9b\u4f18\u5316\u624b\u6bb5: (\u9003\u9038\u5206\u6790: ",(0,r.kt)("a",{parentName:"p",href:"http://www.importnew.com/23150.html"},"http://www.importnew.com/23150.html"),") ------ \u9003\u9038\u5206\u6790\u7684\u57fa\u672c\u884c\u4e3a\u5c31\u662f\u5206\u6790\u5bf9\u8c61\u52a8\u6001\u4f5c\u7528\u57df\uff1a\u5f53\u4e00\u4e2a\u5bf9\u8c61\u5728\u65b9\u6cd5\u4e2d\u88ab\u5b9a\u4e49\u540e\uff0c\u5b83\u53ef\u80fd\u88ab\u5916\u90e8\u65b9\u6cd5\u6240\u5f15\u7528\uff0c\u4f8b\u5982\u4f5c\u4e3a\u8c03\u7528\u53c2\u6570\u4f20\u9012\u5230\u5176\u4ed6\u5730\u65b9\u4e2d\uff0c\u79f0\u4e3a\u65b9\u6cd5\u9003\u9038"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6807\u91cf\u66ff\u6362 (\u805a\u5408\u91cf\u66ff\u6362\u4e3a\u6807\u91cf) - \u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"\u5bf9\u8c61")," \u4ee3\u7801\u66ff\u6362\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"\u5c5e\u6027")," \u4ee3\u7801\u7684\u5f62\u5f0f; \u597d\u5904: \u7531\u4e8e\u9003\u9038\u53d8\u91cf\u88ab\u5176\u5185\u90e8\u5c5e\u6027\u66ff\u6362, \u53ef\u8282\u7701\u5185\u5b58; \u800c\u4e14\u4ee3\u7801\u6267\u884c\u65f6\u65e0\u9700\u53bb\u627e\u9003\u9038\u5bf9\u8c61\u7684\u5f15\u7528, \u4f1a\u66f4\u5feb\u4e00\u70b9"),(0,r.kt)("li",{parentName:"ul"},"\u6808\u4e0a\u5206\u914d - \u5982\u679c \u53d8\u91cf \u6ca1\u6709\u9003\u9038, C2 \u4f1a\u76f4\u63a5\u5728 \u6808\u4e0a\u521b\u5efa\u8fd9\u4e2a\u53d8\u91cf\u4ee3\u8868\u7684\u5bf9\u8c61 \u597d\u5904: \u8bbf\u95ee\u66f4\u52a0\u5feb\u901f; \u968f\u7740\u65b9\u6cd5\u6267\u884c\u7ed3\u675f, \u5bf9\u8c61\u4e5f\u81ea\u52a8\u9500\u6bc1\u4e86, \u51cf\u8f7b\u4e86\u5783\u573e\u56de\u6536\u7684\u538b\u529b"),(0,r.kt)("li",{parentName:"ul"},'\u540c\u6b65\u524a\u9664 (\u8fd9\u91cc\u7684 "\u540c\u6b65" \u662f\u540d\u8bcd) - \u5982\u679c\u53d1\u73b0\u540c\u6b65\u7684\u5bf9\u8c61\u6ca1\u6709\u9003\u9038, \u4e5f\u5c31\u6ca1\u6709\u540c\u6b65\u7684\u5fc5\u8981\u4e86, C2\u7f16\u8bd1\u65f6\u4f1a\u76f4\u63a5\u53bb\u6389\u540c\u6b65')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'\n// \u6807\u91cf\u66ff\u6362\n\nPoint point = new Point(1, 2);\nSysout.out.println("point\u7684x\u5750\u6807\u4e3a: " + point.x + ", point \u7684y\u5750\u6807\u4e3a: " + point.y);\n\n// \u4f18\u5316\u540e: (point \u5728\u4ee3\u7801\u4e2d\u6ca1\u6709\u88ab\u76f4\u63a5\u4f7f\u7528, \u53ea\u662f\u4f7f\u7528\u4e86\u5185\u90e8\u7684\u5c5e\u6027)\nint x = 1;\nint y = 2;\nSysout.out.println("point\u7684x\u5750\u6807\u4e3a: " + x + ", point \u7684y\u5750\u6807\u4e3a: " + y);\n\n// \u540c\u6b65\u524a\u9664\n// \u5c31\u662f \u53bb\u6389 \u4ee3\u7801\u540c\u6b65 synchronized\n\n\n')),(0,r.kt)("h3",{id:"434-\u53cd\u5c04\u6267\u884c"},"4.3.4. \u53cd\u5c04\u6267\u884c"),(0,r.kt)("p",null,"\u5178\u578b\u5982 mvc \u6846\u67b6"),(0,r.kt)("p",null,"\u53cd\u5c04\u4ee3\u7801\u4e2d\uff0c ",(0,r.kt)("inlineCode",{parentName:"p"},"getMethod()")," \u6bd4\u8f83\u6d88\u8017\u6027\u80fd(\u80cc\u540e\u9700\u8981\u8fdb\u884c\u65b9\u6cd5\u6743\u9650\u6821\u9a8c, \u6240\u6709\u65b9\u6cd5\u7684\u626b\u63cf, Method \u5bf9\u8c61\u7684\u590d\u5236), \u6240\u4ee5 \u5f97\u5230\u7684 Method \u5bf9\u8c61\u6700\u597d\u7f13\u5b58"),(0,r.kt)("h1",{id:"5-java\u4e2d\u7684\u5173\u952e\u5b57\u548c\u5185\u5b58\u7684\u5173\u7cfb"},"5. java\u4e2d\u7684\u5173\u952e\u5b57\u548c\u5185\u5b58\u7684\u5173\u7cfb"),(0,r.kt)("h2",{id:"51-final"},"5.1. final"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/Ditto_zhou/article/details/78738197"},"https://blog.csdn.net/Ditto_zhou/article/details/78738197")),(0,r.kt)("p",null,"final\u5982\u679c\u7528\u6765\u8868\u793a\u6570\u636e\u53d8\u91cf\u7684\u8bdd\uff0c\u901a\u5e38\u662f\u6307\u8be5\u53d8\u91cf\u88ab\u8d4b\u503c\u4e00\u6b21\uff0c\u5c31\u4e0d\u80fd\u6539\u53d8\uff1b\u5982\u679c\u8fd9\u4e2afinal\u53d8\u91cf\u662f\u590d\u6742\u7c7b\u578b\uff0c \u53d8\u91cf\u5185\u90e8\u6570\u636e\u4ecd\u7136\u53ef\u53d8"),(0,r.kt)("p",null,"\u5199final\u53d8\u91cf\u65f6\u7684\u91cd\u6392\u5e8f\u7279\u6027\uff1a\u5982\u679c\u4e00\u4e2a\u7c7b\u4e2d\u5b9a\u4e49\u4e86final\u53d8\u91cf\uff0c \u90a3\u4e48\u9488\u5bf9\u8fd9\u4e2a\u53d8\u91cf\u7684write\u64cd\u4f5c",(0,r.kt)("inlineCode",{parentName:"p"},"\u4e0d\u4f1a\u88ab\u91cd\u6392\u5e8f\u5230\u6784\u9020\u51fd\u6570\u4e4b\u5916")," ------\u76f8\u53cd\u7684, \u666e\u901a\u53d8\u91cf\u53ef\u80fd\u88ab\u91cd\u6392\u5e8f\u5230\u6784\u9020\u51fd\u6570\u4e4b\u5916"),(0,r.kt)("p",null,"\u7ed3\u8bba\u5c31\u662f: \u5728\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u5bf9\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u89c1\u524d\uff0c\u80fd\u4fdd\u8bc1final\u53d8\u91cf\u88ab\u6b63\u786e\u521d\u59cb\u5316\uff0c\u800c\u666e\u901a\u57df\u4e0d\u5177\u6709\u8fd9\u4e2a\u7279\u6027\uff0c\u56e0\u4e3a\u666e\u901a\u57df\u7684\u5199\u5165\u53ef\u80fd\u4f1a\u91cd\u6392\u5e8f\u5230\u6784\u9020\u51fd\u6570\u5916.\u4e5f\u5c31\u662f\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u62ff\u5230\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u540e\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5b83\u7684\u666e\u901a\u5c5e\u6027\u7684\u53d8\u91cf\u8fd8\u6ca1\u6709\u88ab\u6b63\u786e\u521d\u59cb\u5316\u7684\u60c5\u51b5."),(0,r.kt)("p",null,"\u8bfb\u53d6final\u53d8\u91cf\u65f6\u7684\u91cd\u6392\u5e8f: \u8bfb\u53d6\u4e00\u4e2a\u5305\u542bfinal\u53d8\u91cf\u7684\u5bf9\u8c61\u7684\u5f15\u7528\u548c\u968f\u540e\u8bfb\u53d6\u8fd9\u4e2afinal\u53d8\u91cf\uff0c\u4e0d\u80fd\u91cd\u6392\u5e8f"),(0,r.kt)("p",null,"\u53e6\u5916, \u5982\u679c\u533f\u540d\u5185\u90e8\u7c7b\u8bbf\u95ee\u4e86\u5916\u90e8\u6570\u636e:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u8bbf\u95ee\u7684\u662f\u5c40\u90e8\u53d8\u91cf(\u65b9\u6cd5\u5185\u90e8\u7684\u53d8\u91cf), \u6570\u636e\u5b58\u5728\u4e8e\u7ebf\u7a0b\u6808\u4e0a, \u53d8\u91cf\u65e0\u6cd5\u8fdb\u884c\u5171\u4eab, \u533f\u540d\u5185\u90e8\u7c7b\u65e0\u6cd5\u83b7\u5f97\u8fd9\u4e2a\u53d8\u91cf, \u53ea\u80fd\u901a\u8fc7\u503c\u4f20\u9012(\u62f7\u8d1d)\u7684\u65b9\u5f0f\u4f20\u9012\u5230\u533f\u540d\u5185\u90e8\u7c7b\u4e2d ---- \u533f\u540d\u5185\u90e8\u7c7b\u548c\u5916\u90e8\u7c7b\u4e2d\u7684\u6570\u636e\u65e0\u6cd5\u81ea\u52a8\u540c\u6b65\uff1b\u7c7b\u4f3cjs\u4e2d\u7684\u95ed\u5305\uff0c \u4f46\u662fjs\u4e2d\u7684\u95ed\u5305\u53ef\u4ee5\u81ea\u52a8\u540c\u6b65\u5185\u5916\u53d8\u91cf\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u8fd9\u4e2a\u5916\u90e8\u6570\u636e\u662f\u6210\u5458\u53d8\u91cf, \u5bf9\u5e94\u7684\u5728\u865a\u62df\u673a\u91cc\u662f\u5728\u5806\u7684\u4f4d\u7f6e, \u53d8\u91cf\u53ef\u4ee5\u5171\u4eab, \u56e0\u6b64\u5728\u521b\u5efa\u533f\u540d\u5185\u90e8\u7c7b\u7684\u5bf9\u8c61\u65f6\u65e0\u9700\u62f7\u8d1d, \u76f4\u63a5\u901a\u8fc7 this.xxx \u5373\u53ef\u83b7\u53d6\uff1b")),(0,r.kt)("p",null,"\u56e0\u6b64\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff1a\u533f\u540d\u5185\u90e8\u7c7b\u6765\u81ea\u5916\u90e8\u95ed\u5305\u73af\u5883\u7684\u81ea\u7531\u53d8\u91cf\u5fc5\u987b\u662ffinal\u7684\uff0c\u9664\u975e\u81ea\u7531\u53d8\u91cf\u6765\u81ea\u7c7b\u7684\u6210\u5458\u53d8\u91cf\u3002"),(0,r.kt)("h2",{id:"52-volatile"},"5.2. volatile"),(0,r.kt)("p",null,"\u4e00\u6761thread\u6bcf\u6b21\u5bf9\u53d8\u91cf\u8fdb\u884c\u4fee\u6539\u90fd\u4f1a\u7acb\u5373\u5237\u65b0\u5230\u5806\u5185\u5b58\u4e2d\u88ab\u5176\u4ed6thread\u770b\u5230;"),(0,r.kt)("p",null,"\u5176\u4ed6\u6240\u6709 thread \u6682\u5b58\u7684\u8be5\u53d8\u91cf\u90fd\u5931\u6548, \u9700\u8981\u5230\u5806\u5185\u5b58\u91cd\u65b0\u83b7\u53d6"),(0,r.kt)("h2",{id:"53-synchronized"},"5.3. synchronized"),(0,r.kt)("p",null,"\u4e00\u6761thread\u8fdb\u5165synchronized\u4ee3\u7801\u5757, \u4f1a\u83b7\u53d6\u76ee\u6807\u5bf9\u8c61\u7684\u9501"),(0,r.kt)("h2",{id:"54-static"},"5.4. static"),(0,r.kt)("h1",{id:"6-java\u7684\u5185\u5b58\u6cc4\u9732"},"6. java\u7684\u5185\u5b58\u6cc4\u9732"),(0,r.kt)("h2",{id:"61-\u4f1a\u9020\u6210\u54ea\u4e9b\u6ea2\u51fa"},"6.1. \u4f1a\u9020\u6210\u54ea\u4e9b\u6ea2\u51fa"),(0,r.kt)("p",null,'\u5185\u5b58\u6cc4\u9732\u4f1a\u9020\u6210 "\u6ea2\u51fa", \u5806\u6ea2\u51fa, \u6808\u6ea2\u51fa, \u65b9\u6cd5\u533a\u6ea2\u51fa'),(0,r.kt)("p",null,"\u5806\u6ea2\u51fa: \u5178\u578b\u5982\u4e0d\u65ad\u5f80\u4e00\u4e2a\u96c6\u5408\u4e2d\u6dfb\u52a0\u5bf9\u8c61, \u76f4\u5230\u5806\u6ea2\u51fa, \u4f46\u662f\u7531\u4e8e GC,\u73b0\u5728\u4e0d\u6210\u95ee\u9898\u4e86"),(0,r.kt)("p",null,"\u65b9\u6cd5\u533a\u6ea2\u51fa: \u8fd0\u884c\u65f6\u52a8\u6001\u751f\u6210\u5927\u91cf\u7c7b (\u53cd\u5c04, cglib), \u65b9\u6cd5\u533a\u4e0d\u591f\u7528\u4e86"),(0,r.kt)("p",null,"\u6808\u6ea2\u51fa: \u65b9\u6cd5\u9012\u5f52\u8c03\u7528,\u6ca1\u6709\u9000\u51fa\u6761\u4ef6; or \u5185\u5b58\u5bf9\u8c61\u660e\u660e\u5df2\u7ecf\u4e0d\u9700\u8981\u7684\u65f6\u5019\uff0c\u8fd8\u4ecd\u7136\u4fdd\u7559\u7740\u8fd9\u5757\u5185\u5b58\u548c\u5b83\u7684\u8bbf\u95ee\u65b9\u5f0f\uff08\u5f15\u7528\uff09, \u9020\u6210\u65e0\u6cd5 GC, \u6bd4\u5982\u5f39\u6808\u65f6\u6ca1\u6709\u5c06\u6808\u4e2d\u7684\u5143\u7d20\u8d4b\u503c\u4e3anull;"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class Heap\n{\n    public static void main(String[] args)\n    {\n        ArrayList list=new ArrayList();\n        while(true)\n        {\n            list.add(new Heap());\n        }\n    }\n}\n\n////////////////////////\n\npublic class Stack\n{\n    public static void main(String[] args)//java.lang.StackOverflowError\n    {\n        new Stack().test();\n    }\n    public void test()\n    {\n        test();\n    }\n}\n\n")),(0,r.kt)("h2",{id:"62-java\u5185\u5b58\u6cc4\u9732\u5f15\u8d77\u539f\u56e0"},"6.2. Java\u5185\u5b58\u6cc4\u9732\u5f15\u8d77\u539f\u56e0"),(0,r.kt)("p",null,"\u9759\u6001\u96c6\u5408\u7c7b\u5f15\u8d77\u5185\u5b58\u6cc4\u9732 (\u9759\u6001\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u548c\u5e94\u7528\u7a0b\u5e8f\u4e00\u81f4\uff0c\u4ed6\u4eec\u6240\u5f15\u7528\u7684\u6240\u6709\u7684\u5bf9\u8c61Object\u4e5f\u4e0d\u80fd\u88ab\u91ca\u653e)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Static Vector v = new Vector(10);\nfor (int i = 1; i<100; i++)\n{\n    Object o = new Object();\n    v.add(o);\n    o = null; // \u91ca\u653e\u65e0\u6548\n}\n\n")),(0,r.kt)("p",null,"\u5f53\u96c6\u5408\u91cc\u9762\u7684\u5bf9\u8c61\u5c5e\u6027\u88ab\u4fee\u6539\u540e\uff0c\u518d\u8c03\u7528remove\uff08\uff09\u65b9\u6cd5\u65f6\u4e0d\u8d77\u4f5c\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args)\n{\nSet<Person> set = new HashSet<Person>();\nPerson p1 = new Person("\u5510\u50e7","pwd1",25);\nPerson p2 = new Person("\u5b59\u609f\u7a7a","pwd2",26);\nPerson p3 = new Person("\u732a\u516b\u6212","pwd3",27);\nset.add(p1);\nset.add(p2);\nset.add(p3);\nSystem.out.println("\u603b\u5171\u6709:"+set.size()+" \u4e2a\u5143\u7d20!"); //\u7ed3\u679c\uff1a\u603b\u5171\u6709:3 \u4e2a\u5143\u7d20!\np3.setAge(2); //\u4fee\u6539p3\u7684\u5e74\u9f84,\u6b64\u65f6p3\u5143\u7d20\u5bf9\u5e94\u7684hashcode\u503c\u53d1\u751f\u6539\u53d8\n\nset.remove(p3); //\u6b64\u65f6remove\u4e0d\u6389\uff0c\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\n\nset.add(p3); //\u91cd\u65b0\u6dfb\u52a0\uff0c\u5c45\u7136\u6dfb\u52a0\u6210\u529f\nSystem.out.println("\u603b\u5171\u6709:"+set.size()+" \u4e2a\u5143\u7d20!"); //\u7ed3\u679c\uff1a\u603b\u5171\u6709:4 \u4e2a\u5143\u7d20!\nfor (Person person : set)\n{\nSystem.out.println(person);\n}\n}\n\n')),(0,r.kt)("p",null,"\u5404\u79cd\u8fde\u63a5: \u6bd4\u5982\u6570\u636e\u5e93\u8fde\u63a5\uff08dataSourse.getConnection()\uff09\uff0c\u7f51\u7edc\u8fde\u63a5(socket)\u548cio\u8fde\u63a5\uff0c\u9664\u975e\u5176\u663e\u5f0f\u7684\u8c03\u7528\u4e86\u5176close\uff08\uff09\u65b9\u6cd5\u5c06\u5176\u8fde\u63a5\u5173\u95ed\uff0c\u5426\u5219\u662f\u4e0d\u4f1a\u81ea\u52a8\u88abGC \u56de\u6536\u7684\u3002\u5bf9\u4e8eResultset \u548cStatement \u5bf9\u8c61\u53ef\u4ee5\u4e0d\u8fdb\u884c\u663e\u5f0f\u56de\u6536\uff0c\u4f46Connection \u4e00\u5b9a\u8981\u663e\u5f0f\u56de\u6536\uff0c\u56e0\u4e3aConnection \u5728\u4efb\u4f55\u65f6\u5019\u90fd\u65e0\u6cd5\u81ea\u52a8\u56de\u6536\uff0c\u800cConnection\u4e00\u65e6\u56de\u6536\uff0cResultset \u548cStatement \u5bf9\u8c61\u5c31\u4f1a\u7acb\u5373\u4e3aNULL\u3002\u4f46\u662f\u5982\u679c\u4f7f\u7528\u8fde\u63a5\u6c60\uff0c\u60c5\u51b5\u5c31\u4e0d\u4e00\u6837\u4e86\uff0c\u9664\u4e86\u8981\u663e\u5f0f\u5730\u5173\u95ed\u8fde\u63a5\uff0c\u8fd8\u5fc5\u987b\u663e\u5f0f\u5730\u5173\u95edResultset Statement \u5bf9\u8c61"),(0,r.kt)("p",null,"\u5355\u4f8b\u6a21\u5f0f: \u82e5\u5355\u4f8b\u5bf9\u8c61\u6301\u6709\u5916\u90e8\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5916\u90e8\u5bf9\u8c61\u5c06\u4e0d\u80fd\u88abjvm\u6b63\u5e38\u56de\u6536\uff0c\u5bfc\u81f4\u5185\u5b58\u6cc4\u9732"),(0,r.kt)("h1",{id:"7-jvm-\u4e2d\u7684-object"},"7. jvm \u4e2d\u7684 object"),(0,r.kt)("p",null,"HotSpot \u865a\u62df\u673a\u5728 Java \u5806\u4e2d\u5bf9\u8c61\u521b\u5efa\u3001\u5e03\u5c40\u548c\u8bbf\u95ee\u7684\u5168\u8fc7\u7a0b\u3002reference: ",(0,r.kt)("a",{parentName:"p",href:"https://juejin.im/post/5b7d69e4e51d4538ca5730cb"},"https://juejin.im/post/5b7d69e4e51d4538ca5730cb")),(0,r.kt)("h2",{id:"71-\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u5185\u5b58\u600e\u4e48\u5206\u914d"},"7.1. \u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b(\u5185\u5b58\u600e\u4e48\u5206\u914d)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u52a0\u8f7d\u68c0\u67e5 - \u68c0\u67e5\u7c7b\u662f\u5426\u5df2\u7ecf\u52a0\u8f7d\u8fc7, \u5982\u679c\u6ca1\u6709\u9700\u8981\u5148\u52a0\u8f7d\u7c7b"),(0,r.kt)("li",{parentName:"ul"},'\u5206\u914d\u5185\u5b58 - \u4e3a\u65b0\u5efa\u5bf9\u8c61\u5206\u914d\u5185\u5b58 (\u5373\u5c06\u4e00\u5757\u786e\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\u5757\u4ece Heap \u4e2d\u5212\u5206\u51fa\u6765, \u5bf9\u8c61\u8017\u8d39\u5185\u5b58\u5927\u5c0f\u5728\u7c7b\u52a0\u8f7d\u540e\u53ef\u4ee5\u5f97\u77e5); \u5206\u914d\u65b9\u5f0f: "\u6307\u9488\u78b0\u649e", "\u7a7a\u95f2\u6563\u5217" . \u9009\u62e9\u90a3\u79cd\u5206\u914d\u65b9\u5f0f\u7531',(0,r.kt)("inlineCode",{parentName:"li"}," Java \u5806\u662f\u5426\u89c4\u6574"),"(\u662f\u5426\u6709\u5185\u5b58\u788e\u7247)\u51b3\u5b9a\uff0c\u800cJava\u5806\u662f\u5426\u89c4\u6574\u53c8\u7531",(0,r.kt)("inlineCode",{parentName:"li"},"\u6240\u91c7\u7528\u7684\u5783\u573e\u6536\u96c6\u5668\u662f\u5426\u5e26\u6709\u538b\u7f29\u6574\u7406\u529f\u80fd"),"\u51b3\u5b9a\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u521d\u59cb\u53160\u503c - \u7ed9\u5bf9\u8c61\u5b9e\u4f8b\u7684\u5c5e\u6027\u8d4b\u96f6\u503c"),(0,r.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u5bf9\u8c61\u5934 - \u865a\u62df\u673a\u8981\u5bf9\u5bf9\u8c61\u8fdb\u884c\u5fc5\u8981\u7684\u8bbe\u7f6e, \u4fdd\u8bc1\u5bf9\u8c61\u548c\u7c7b\u80fd\u591f\u8054\u7cfb\u8d77\u6765\uff0c\u4f8b\u5982\u8fd9\u4e2a",(0,r.kt)("inlineCode",{parentName:"li"},"\u5bf9\u8c61\u662f\u90a3\u4e2a\u7c7b\u7684\u5b9e\u4f8b"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"\u5982\u4f55\u624d\u80fd\u627e\u5230\u7c7b\u7684\u5143\u6570\u636e\u4fe1\u606f"),"\u3001\u5bf9\u8c61\u7684\u54c8\u5e0c\u5417\u3001\u5bf9\u8c61\u7684 GC \u5206\u4ee3\u5e74\u9f84\u7b49\u4fe1\u606f\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5b58\u653e\u5728\u5bf9\u8c61\u5934\u4e2d\u3002 \u53e6\u5916\uff0c\u6839\u636e\u865a\u62df\u673a\u5f53\u524d\u8fd0\u884c\u72b6\u6001\u7684\u4e0d\u540c\uff0c\u5982\u662f\u5426\u542f\u7528\u504f\u5411\u9501\u7b49\uff0c\u5bf9\u8c61\u5934\u4f1a\u6709\u4e0d\u540c\u7684\u8bbe\u7f6e\u65b9\u5f0f\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6267\u884c\u5b98init\u65b9\u6cd5 - \u628a\u5bf9\u8c61\u6309\u7167\u7a0b\u5e8f\u5458\u7684\u610f\u613f\u8fdb\u884c\u521d\u59cb\u5316")),(0,r.kt)("p",null,"\u7ed9\u65b0\u5efa\u5bf9\u8c61\u5206\u914d\u5185\u5b58\u7684\u4e24\u79cd\u65b9\u5f0f:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'\u6307\u9488\u78b0\u649e - \u7528\u8fc7\u7684\u5185\u5b58\u548c\u7a7a\u767d\u5185\u5b58\u5206\u5f00, \u4e2d\u95f4\u6709\u5206\u754c\u6307\u9488, \u5206\u914d\u65f6, \u6307\u9488\u5411\u7a7a\u767d\u5185\u5b58\u65b9\u5411\u79fb\u52a8"\u65b0\u5efa\u5bf9\u8c61"\u5927\u5c0f\u7684\u4f4d\u7f6e\u5373\u53ef'),(0,r.kt)("li",{parentName:"ul"},"\u7a7a\u95f2\u5217\u8868 - \u865a\u62df\u673a\u7ef4\u62a4\u4e00\u4e2a\u5217\u8868, \u8bb0\u5f55\u54ea\u4e9b\u7a7a\u767d\u5185\u5b58, \u5206\u914d\u65f6, \u4ece\u4e2d\u627e\u5230\u4e00\u5757\u5408\u9002\u7684\u5185\u5b58\u5206\u7ed9\u5bf9\u8c61\u5b9e\u4f8b, \u540c\u65f6\u66f4\u65b0\u8fd9\u4e2a\u5217\u8868 ")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"\u5185\u5b58\u5206\u914d\u600e\u4e48\u9632\u6b62\u5e76\u53d1\u95ee\u9898"),": TLAB (thread local allocation buffer) -> \u4e3a\u6bcf\u4e00\u4e2a\u7ebf\u7a0b\u9884\u5148\u5728new generation \u533a\u57df\u7684 Eden\u533a\u5206\u914d\u7684\u4e00\u5757\u513f\u5185\u5b58 (\u53ef\u901a\u8fc7 jvm \u53c2\u6570\u6307\u5b9a)\uff0cJVM\u5728\u7ed9\u7ebf\u7a0b\u4e2d\u7684\u5bf9\u8c61\u5206\u914d\u5185\u5b58\u65f6\uff0c\u9996\u5148\u5728TLAB\u5206\u914d\uff0c\u5f53\u5bf9\u8c61\u5927\u4e8eTLAB\u4e2d\u7684\u5269\u4f59\u5185\u5b58\u6216TLAB\u7684\u5185\u5b58\u5df2\u7528\u5c3d\u65f6\uff0c\u518d\u5728\u5806\u4e0a\u5206\u914d, \u91c7\u7528CAS\u8fdb\u884c\u5185\u5b58\u5206\u914d ( CAS+\u5931\u8d25\u91cd\u8bd5\uff1a CAS \u662f\u4e50\u89c2\u9501\u7684\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\u3002\u6240\u8c13\u4e50\u89c2\u9501\u5c31\u662f\uff0c\u6bcf\u6b21\u4e0d\u52a0\u9501\u800c\u662f\u5047\u8bbe\u6ca1\u6709\u51b2\u7a81\u800c\u53bb\u5b8c\u6210\u67d0\u9879\u64cd\u4f5c\uff0c\u5982\u679c\u56e0\u4e3a\u51b2\u7a81\u5931\u8d25\u5c31\u91cd\u8bd5\uff0c\u76f4\u5230\u6210\u529f\u4e3a\u6b62\u3002\u865a\u62df\u673a\u91c7\u7528 CAS \u914d\u4e0a\u5931\u8d25\u91cd\u8bd5\u7684\u65b9\u5f0f\u4fdd\u8bc1\u66f4\u65b0\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3002)"),(0,r.kt)("h2",{id:"72-\u5bf9\u8c61\u7684\u8bbf\u95ee"},"7.2. \u5bf9\u8c61\u7684\u8bbf\u95ee"),(0,r.kt)("h3",{id:"721-\u5bf9\u8c61\u76842\u79cd\u8bbf\u95ee\u65b9\u5f0f"},"7.2.1. \u5bf9\u8c61\u76842\u79cd\u8bbf\u95ee\u65b9\u5f0f"),(0,r.kt)("p",null,"\u76ee\u524d\u4e3b\u6d41\u7684\u8bbf\u95ee\u65b9\u5f0f\u6709\u2460\u4f7f\u7528\u53e5\u67c4\u548c\u2461\u76f4\u63a5\u6307\u9488\u4e24\u79cd\uff1a(Java\u7a0b\u5e8f\u901a\u8fc7\u6808\u4e0a\u7684 reference \u6570\u636e\u6765\u64cd\u4f5c\u5806\u4e0a\u7684\u5177\u4f53\u5bf9\u8c61)"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u53e5\u67c4\uff1a \u5982\u679c\u4f7f\u7528\u53e5\u67c4\u7684\u8bdd\uff0c\u90a3\u4e48",(0,r.kt)("inlineCode",{parentName:"p"},"Java\u5806\u4e2d\u5c06\u4f1a\u5212\u5206\u51fa\u4e00\u5757\u5185\u5b58\u6765\u4f5c\u4e3a\u53e5\u67c4\u6c60"),"\uff0creference \u4e2d\u5b58\u50a8\u7684\u5c31\u662f\u5bf9\u8c61\u7684\u53e5\u67c4\u5730\u5740\uff0c\u800c\u53e5\u67c4\u4e2d\u5305\u542b\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"\u5bf9\u8c61\u5b9e\u4f8b\u6570\u636e"),"(Heap)\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"\u7c7b\u578b\u6570\u636e"),"(Method Area)\u5404\u81ea\u7684\u5177\u4f53\u5730\u5740\u4fe1\u606f; \u597d\u5904:  reference \u4e2d\u5b58\u50a8\u7684\u662f\u7a33\u5b9a\u7684\u53e5\u67c4\u5730\u5740\uff0c\u5728\u5bf9\u8c61\u88ab\u79fb\u52a8\u65f6\u53ea\u4f1a\u6539\u53d8\u53e5\u67c4\u4e2d\u7684\u5b9e\u4f8b\u6570\u636e\u6307\u9488\uff0c\u800c reference \u672c\u8eab\u4e0d\u9700\u8981\u4fee\u6539")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u76f4\u63a5\u6307\u9488\uff1a \u5982\u679c\u4f7f\u7528\u76f4\u63a5\u6307\u9488\u8bbf\u95ee\uff0c\u90a3\u4e48 Java \u5806\u5bf9\u50cf\u7684\u5e03\u5c40\u4e2d\u5c31\u5fc5\u987b\u8003\u8651\u5982\u4f55\u9632\u6b62\u8bbf\u95ee\u7c7b\u578b\u6570\u636e\u7684\u76f8\u5173\u4fe1\u606f\uff0creference \u4e2d\u5b58\u50a8\u7684\u76f4\u63a5\u5c31\u662f\u5bf9\u8c61\u7684\u5730\u5740\u3002\u597d\u5904: \u901f\u5ea6\u5feb\uff0c\u5b83\u8282\u7701\u4e86\u4e00\u6b21\u6307\u9488\u5b9a\u4f4d\u7684\u65f6\u95f4\u5f00\u9500"))),(0,r.kt)("p",null,"\u300a\u6df1\u5165\u7406\u89e3java\u865a\u62df\u673a\u300b\u4e2d\u7684\u793a\u610f\u56fe:"),(0,r.kt)("h3",{id:"722-thread\u5177\u4f53\u600e\u4e48\u8bbf\u95ee\u5bf9\u8c61\u4e2d\u7684\u503c\u5462\u4ee5\u53cavolatile\u5173\u952e\u5b57"},"7.2.2. thread\u5177\u4f53\u600e\u4e48\u8bbf\u95ee\u5bf9\u8c61\u4e2d\u7684\u503c\u5462\u4ee5\u53cavolatile\u5173\u952e\u5b57"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://www.cnblogs.com/aigongsi/archive/2012/04/01/2429166.html"},"http://www.cnblogs.com/aigongsi/archive/2012/04/01/2429166.html")),(0,r.kt)("p",null,"jvm \u6709\u4e00\u4e2a\u5185\u5b58\u533a\u57df\u662fjvm\u865a\u62df\u673a\u6808\uff0c \u5305\u542b\u4e00\u4e2a\u4e2a\u7684 \u7ebf\u7a0b\u6808\uff08thread stack\uff09\uff0c\u6bcf\u4e2a thread stack \u4fdd\u5b58\u4e86\u4fdd\u5b58\u4e86\u7ebf\u7a0b\u8fd0\u884c\u65f6\u5019\u53d8\u91cf\u503c\u4fe1\u606f"),(0,r.kt)("p",null,"\u5f53\u7ebf\u7a0b\u8bbf\u95ee\u67d0\u4e00\u4e2a\u5bf9\u8c61\u65f6\u5019\u503c\u7684\u65f6\u5019\uff0c\u9996\u5148\u901a\u8fc7\u5bf9\u8c61\u7684\u5f15\u7528\u627e\u5230\u5bf9\u5e94\u5728\u5806\u5185\u5b58\u7684\u53d8\u91cf\u7684\u503c\uff0c\u7136\u540e\u628a\u5806\u5185\u5b58\u53d8\u91cf\u7684\u5177\u4f53\u503cload\u5230\u7ebf\u7a0b\u672c\u5730\u5185\u5b58\u4e2d\uff0c\u5efa\u7acb\u4e00\u4e2a\u53d8\u91cf\u526f\u672c\uff0c\u4e4b\u540e\u7ebf\u7a0b\u5c31\u4e0d\u518d\u548c\u5bf9\u8c61\u5728\u5806\u5185\u5b58\u53d8\u91cf\u503c\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u800c\u662f\u76f4\u63a5\u4fee\u6539\u526f\u672c\u53d8\u91cf\u7684\u503c\uff0c\u5728\u4fee\u6539\u5b8c\u4e4b\u540e\u7684\u67d0\u4e00\u4e2a\u65f6\u523b\uff08\u7ebf\u7a0b\u9000\u51fa\u4e4b\u524d\uff09\uff0c\u81ea\u52a8\u628a\u7ebf\u7a0b\u53d8\u91cf\u526f\u672c\u7684\u503c\u56de\u5199\u5230\u5bf9\u8c61\u5728\u5806\u4e2d\u53d8\u91cf"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"read and load \u4ece\u4e3b\u5b58\u590d\u5236\u53d8\u91cf\u5230\u5f53\u524d\u5de5\u4f5c\u5185\u5b58")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"use and assign  \u6267\u884c\u4ee3\u7801\uff0c\u6539\u53d8\u5171\u4eab\u53d8\u91cf\u503c \uff08\u53ef\u53cd\u590d\u51fa\u73b0, ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5982\u679c\u53d8\u91cf\u52a0\u4e0avolatile\uff0c \u6bcf\u6b21\u7ebf\u7a0b\u66f4\u65b0\u53d8\u91cf\u540e\uff0c \u4f1a\u7acb\u5373\u5c06\u53d8\u52a8\u540e\u7684\u7ed3\u679c\u66f4\u65b0\u5230\u5806\u5185\u5b58\u4e2d\u7684\u5bf9\u8c61\u4e2d"),"\uff09")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"store and write \u7528\u5de5\u4f5c\u5185\u5b58\u6570\u636e\u5237\u65b0\u4e3b\u5b58\u76f8\u5173\u5185\u5bb9"))),(0,r.kt)("p",null,"\u8fd9\u4e00\u7cfb\u5217\u64cd\u4f5c\u5e76\u975e\u539f\u5b50\u6027\u7684\uff0c \u5982\u679c\u4e00\u4e2athread1 \u8bfb\u53d6\u67d0\u4e2a\u53d8\u91cf\u540e\uff0c cpu \u88ab\u53e6\u4e00\u4e2a thread2\u62a2\u5360\uff0c \u5bf9\u8be5\u53d8\u91cf\u5199\u5165\u65b0\u7684\u503c\uff0c thread1\u7531\u4e8e\u5df2\u7ecf\u52a0\u8f7d\u8be5\u53d8\u91cf\uff0c \u5e76\u4e0d\u4f1a\u91cd\u65b0\u52a0\u8f7d\uff0c \u8bfb\u53d6\u4e86\u810f\u6570\u636e\uff1b"),(0,r.kt)("p",null,"\u5bf9\u4e8evolatile\u4fee\u9970\u7684\u53d8\u91cf\uff0cjvm\u865a\u62df\u673a\u53ea\u662f\u4fdd\u8bc1\u4ece\u4e3b\u5185\u5b58\u52a0\u8f7d\u5230\u7ebf\u7a0b\u5de5\u4f5c\u5185\u5b58\u7684\u503c\u662f\u6700\u65b0\u7684\uff0c \u65e0\u6cd5\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff0c \u6bd4\u5982\uff1a"),(0,r.kt)("p",null,"\u4f8b\u5982\u5047\u5982\u7ebf\u7a0b1\uff0c\u7ebf\u7a0b2 \u5728\u8fdb\u884cread,load \u64cd\u4f5c\u4e2d\uff0c\u53d1\u73b0\u4e3b\u5185\u5b58\u4e2dcount\u7684\u503c\u90fd\u662f5\uff0c\u90a3\u4e48\u90fd\u4f1a\u52a0\u8f7d\u8fd9\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"\u6700\u65b0\u7684\u503c")),(0,r.kt)("p",null,"\u5728\u7ebf\u7a0b1\u5806count\u8fdb\u884c\u4fee\u6539\u4e4b\u540e\uff0c\u4f1awrite\u5230\u4e3b\u5185\u5b58\u4e2d\uff0c\u4e3b\u5185\u5b58\u4e2d\u7684count\u53d8\u91cf\u5c31\u4f1a\u53d8\u4e3a6"),(0,r.kt)("p",null,"\u7ebf\u7a0b2\u7531\u4e8e\u5df2\u7ecf\u8fdb\u884cread,load\u64cd\u4f5c\uff0c\u5728\u8fdb\u884c\u8fd0\u7b97\u4e4b\u540e\uff0c\u4e5f\u4f1a\u66f4\u65b0\u4e3b\u5185\u5b58count\u7684\u53d8\u91cf\u503c\u4e3a6, \u4ea7\u751f\u4e86\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff1b"),(0,r.kt)("h2",{id:"73-\u5bf9\u8c61\u56de\u6536\u5185\u5b58\u600e\u4e48\u91ca\u653e"},"7.3. \u5bf9\u8c61\u56de\u6536(\u5185\u5b58\u600e\u4e48\u91ca\u653e)"),(0,r.kt)("p",null,"GC \u67092\u79cd\u5b9e\u73b0\u65b9\u5f0f:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'\u5f15\u7528\u8ba1\u6570\u6536\u96c6\u5668 - \u6bcf\u6b21\u5bf9\u8c61\u8d4b\u503c\u65f6\u8981\u8fdb\u884c "\u5f15\u7528\u8ba1\u6570"\u7684\u589e\u51cf, \u6709\u4e00\u5b9a\u6d88\u8017,, \u6709\u65f6\u5019\u4e00\u4e2a\u5bf9\u8c61\u88ab\u591a\u4e2a\u5176\u4ed6\u5bf9\u8c61\u5f15\u7528 Java\u4e2d\u6709\u5927\u91cf\u8fd9\u6837\u7684\u5f15\u7528, \u7d2f\u8ba1\u8d77\u6765\u6d88\u8017\u4e0d\u5c0f, sun jdk \u672a\u91c7\u7528\u8fd9\u79cd\u65b9\u5f0f'),(0,r.kt)("li",{parentName:"ul"},"\u8ddf\u8e2a\u6536\u96c6\u5668 - \u53ef\u80fd\u4f1a\u4f7f\u5f97\u5e94\u7528\u6682\u505c, \u6709\u4e09\u79cd\u5b9e\u73b0\u7b97\u6cd5 ...")),(0,r.kt)("h1",{id:"8-\u6709\u54ea\u4e9b\u865a\u62df\u673a"},"8. \u6709\u54ea\u4e9b\u865a\u62df\u673a"),(0,r.kt)("p",null,"Hotspot - \u76ee\u524d\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684"),(0,r.kt)("p",null,"ZGC - \u652f\u6301\u8d85\u5927\u5806\u7684\u540c\u65f6\u4fdd\u8bc1STW\u5f88\u77ed"),(0,r.kt)("p",null,"Graal - \u4e00\u4e2a\u7279\u5236\u7248\u7684\u7684JavaVM\u3002\u7528Java\u5199\u7684JavaVM\u3002\u80fd\u8ba9\u4e0d\u540c\u8bed\u8a00\u8dd1\u5728\u540c\u4e00\u4e2aVM\u4e0a\uff0c\u8fd8\u80fd\u4e92\u901a, \u53f7\u79f0\u5168\u6808vm, \u5fae\u670d\u52a1\u6846\u67b6Quarkus \u7ed9\u4e88\u4ed6"),(0,r.kt)("h1",{id:"9-java\u7ebf\u4e0a\u95ee\u9898\u8bca\u65ad\u6392\u67e5"},"9. java\u7ebf\u4e0a\u95ee\u9898\u8bca\u65ad\u6392\u67e5"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/GitChat/article/details/79019454"},"https://blog.csdn.net/GitChat/article/details/79019454"),"\n",(0,r.kt)("a",{parentName:"p",href:"http://ifeve.com/find-bug-online/"},"http://ifeve.com/find-bug-online/"),"\n",(0,r.kt)("a",{parentName:"p",href:"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzA4NTg4Njk0Mw==&scene=161#wechat_redirect"},"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzA4NTg4Njk0Mw==&scene=161#wechat_redirect")),(0,r.kt)("p",null,"\u4e00\u822c\u6d41\u7a0b\u5982\u4e0b:"),(0,r.kt)("h2",{id:"91-\u65e5\u5fd7\u68c0\u7d22"},"9.1. \u65e5\u5fd7\u68c0\u7d22"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\n# \u68c0\u7d22 exception \u5173\u952e\u5b57\u6216 error \u5173\u952e\u5b57\n# -E \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f, \u8fd9\u91cc\u53ef\u9009\n# or \u903b\u8f91\ngrep -E \"exception|error\" app.log\n# \u7b49\u4ef7\negrep \"xx\" xxx.log\n# and \u903b\u8f91\ngrep -E \u2018pattern1.*pattern2\u2019 filename\ngrep -E \u2018pattern1.*pattern2|pattern2.*pattern1\u2019 filename\n# not \u903b\u8f91\ngrep -v \u2018pattern1\u2019 filename\n\n\n# \u663e\u793a\u5173\u952e\u5b57\u4e0a\u4e0b 10 \u884c\u65e5\u5fd7\ngrep -C 10 exception app.log\n\n# \u68c0\u7d22 2020-05-05 19:23~25  \u5206\u949f\u6bb5\u65e5\u5fd7\ngrep '2020-05-05 19:2[3-5]' app.log\nsed -n '/2020-05-05 19:23/,/2020-05-05 19:25/p' app.log\n# \u68c0\u7d22 2020-05-05 19:23:10~15 \u79d2\u6bb5\u65e5\u5fd7\ngrep '2020-05-05 19:23:[10-15]' app.log\nsed -n '/2020-05-05 19:23:10/,/2020-05-05 19:23:15/p' app.log\n\n# \u67e5\u8be2 /data \u76ee\u5f55\u4e0b\u5927\u4e8e 500m \u7684\u6587\u4ef6\nfind /data -type f -size +500M\n")),(0,r.kt)("h2",{id:"92-\u67e5\u770b\u6570\u636e\u5e93\u8fde\u63a5"},"9.2. \u67e5\u770b\u6570\u636e\u5e93\u8fde\u63a5"),(0,r.kt)("p",null,"show processlist, \u67e5\u770b\u5f53\u524d\u6570\u636e\u5e93\u7684\u8fde\u63a5\u60c5\u51b5\u3002\u786e\u5b9e\u56e0\u4e3a\u6162\u67e5\u8be2\u9020\u6210\u3002\u987b\u8981\u624b\u52a8kill"),(0,r.kt)("h2",{id:"93-\u67e5\u770bcpu-\u8d1f\u8f7d"},"9.3. \u67e5\u770bCPU \u8d1f\u8f7d"),(0,r.kt)("h3",{id:"931-cpu-user\u9ad8-and--cpu-load-\u9ad8"},"9.3.1. CPU User\u9ad8 and  CPU Load \u9ad8"),(0,r.kt)("p",null,"(User\uff1aCPU \u5728\u7528\u6237\u6001\u7a7a\u95f4\uff08\u7528\u6237\u8fdb\u7a0b\uff09\u7684\u8fd0\u884c\u65f6\u95f4\u6bd4\u4f8b)"),(0,r.kt)("h4",{id:"9311-\u4ee3\u7801\u4e2d\u5b58\u5728\u975e\u5e38\u6d88\u8017-cpu-\u7684\u64cd\u4f5c"},"9.3.1.1. \u4ee3\u7801\u4e2d\u5b58\u5728\u975e\u5e38\u6d88\u8017 CPU \u7684\u64cd\u4f5c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'#\u627e\u51fa\u5bf9\u5e94\u7684 Java \u8fdb\u7a0b pid\n\nps -ef | grep java \n\n#\u627e\u51fa Java \u8fdb\u7a0b\u4e2d\u6700\u6d88\u8017 CPU \u7684\u8fdb\u7a0b\n\ntop -H -p <pid>\n\njstack \u83b7\u53d6 Java \u7684\u7ebf\u7a0b\u5806\u6808\n\njstack ...\n\n# \u5c06\u627e\u51fa\u7684\u7ebf\u7a0b id \u8f6c\u6362\u4e3a 16 \u8fdb\u5236\n# \u6839\u636e 16 \u8fdb\u5236\u7684 id \u4ece\u7ebf\u7a0b\u5806\u6808\u4e2d\u627e\u5230\u76f8\u5173\u7684\u5806\u6808\u4fe1\u606f\n\nprintf "%x\\n" pid\n\n')),(0,r.kt)("h4",{id:"9312-\u9891\u7e41gc"},"9.3.1.2. \u9891\u7e41gc"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"jstat -gcutil pid interval(ms)\n\n")),(0,r.kt)("h3",{id:"932-cpu-system-\u9ad8-and-cpu-load-\u9ad8"},"9.3.2. CPU System \u9ad8 and CPU Load \u9ad8"),(0,r.kt)("p",null,"System\uff1aCPU \u5728\u5185\u6838\u6001\u7a7a\u95f4\u7684\u8fd0\u884c\u65f6\u95f4\u6bd4\u4f8b\u3002\u4f8b\u5982\u5185\u5b58\u5206\u914d\u3001IO \u8bfb\u5199\u3001\u7ebf\u7a0b\u521b\u5efa\u548c\u5207\u6362\u7b49"),(0,r.kt)("p",null,"\u5e38\u89c1\u539f\u56e0\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5e76\u53d1\u9501\u7ade\u4e89\u4e25\u91cd"),(0,r.kt)("li",{parentName:"ul"},"\u6b7b\u9501"),(0,r.kt)("li",{parentName:"ul"},"\u7ebf\u7a0b\u9891\u7e41\u5207\u6362 (\u7ebf\u7a0b\u6c60\u91cc\u7684\u7ebf\u7a0b\u6570\u914d\u7f6e\u592a\u591a\u4e86)")),(0,r.kt)("p",null,"\u6392\u67e5\u65b9\u6cd5:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"jstack \u6253\u5370\u7ebf\u7a0b\u5806\u6808\uff0c\u6574\u4f53\u7edf\u8ba1\u7ebf\u7a0b\u72b6\u6001\uff0c\u5982 WAITING\u3001TIMED_WAITING\u3001BLOCKED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"pidstat -w \u53ef\u4ee5\u67e5\u770b CPU \u4e0a\u4e0b\u6587\u5207\u6362\u7684\u72b6\u6001\u3002"),(0,r.kt)("p",{parentName:"li"},"  cswch/s \u6bcf\u79d2\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\uff1a\u8fdb\u7a0b\u65e0\u6cd5\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u5185\u5b58\u3001IO \u7b49\uff1b"),(0,r.kt)("p",{parentName:"li"},"  nvcswch/s \u6bcf\u79d2\u975e\u81ea\u613f\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570\uff1a\u65f6\u95f4\u7247\u8017\u5c3d\u7cfb\u7edf\u5f3a\u5236\u8c03\u5ea6\uff0c\u5982\u8fdb\u7a0b\u9891\u7e41\u4e89\u62a2 CPU\u3002"))),(0,r.kt)("p",null,"\u5982\u4f55\u4f18\u5316:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u51cf\u5c0f\u9501\u7c92\u5ea6, \u4f7f\u7528\u65e0\u9501\u6570\u636e\u7ed3\u6784"),(0,r.kt)("li",{parentName:"ul"},"\u68c0\u67e5\u6b7b\u9501, \u4f7f\u7528 \u7ed9\u9501\u8bbe\u7f6e\u7b49\u5f85\u65f6\u95f4"),(0,r.kt)("li",{parentName:"ul"},"\u4fee\u6539\u7ebf\u7a0b\u6c60\u914d\u7f6e")),(0,r.kt)("h3",{id:"933-cpu-wait\u9ad8-and-cpu-load\u9ad8-and-cpu\u5229\u7528\u7387\u4f4e"},"9.3.3. CPU Wait\u9ad8 and CPU Load\u9ad8 and CPU\u5229\u7528\u7387\u4f4e"),(0,r.kt)("p",null,"\u8bf4\u660eCPU \u7b49\u5f85\u78c1\u76d8\u5199\u5165\u7684\u65f6\u95f4\u957f\u3002\u5f53 CPU \u53d1\u8d77 IO \u8bfb\u5199\u64cd\u4f5c\u540e\uff0c\u9700\u8981\u7b49\u5f85\u78c1\u76d8\u6570\u636e\u52a0\u8f7d\u81f3\u5185\u5b58"),(0,r.kt)("p",null,"\u53ef\u80fd\u539f\u56e0\u662f:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"IO \u64cd\u4f5c\u9891\u7e41"),(0,r.kt)("li",{parentName:"ul"},"\u8d44\u6e90\u672a\u53ca\u65f6\u91ca\u653e\u9020\u6210\u6cc4\u6f0f")),(0,r.kt)("p",null,"\u6392\u67e5\u65b9\u6cd5:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# \u67e5\u770b\u8bbe\u5907\u7684 IO \u72b6\u6001\n\niostat -x 2\n\n\u53c2\u6570\u542b\u4e49\uff1a\n\nrrqm/s : \u6bcf\u79d2\u5408\u5e76\u8bfb\u64cd\u4f5c\u7684\u6b21\u6570\nwrqm/s: \u6bcf\u79d2\u5408\u5e76\u5199\u64cd\u4f5c\u7684\u6b21\u6570\nr/s \uff1a\u6bcf\u79d2\u8bfb\u64cd\u4f5c\u7684\u6b21\u6570\nw/s : \u6bcf\u79d2\u5199\u64cd\u4f5c\u7684\u6b21\u6570\nrKB/s :\u6bcf\u79d2\u8bfb\u53d6\u5b57\u8282\u6570\nwKB/s: \u6bcf\u79d2\u5199\u5165\u5b57\u8282\u6570\navgrq-sz\uff1a\u5e73\u5747\u6bcf\u6b21 IO \u7684\u6570\u636e\u5927\u5c0f\uff0c\u4ee5\u6247\u533a\uff08512\u5b57\u8282\uff09\u4e3a\u5355\u4f4d\navgqu-sz\uff1a\u5e73\u5747 IO \u8bf7\u6c42\u961f\u5217\u957f\u5ea6\nawait\uff1a\u5e73\u5747\u6bcf\u4e2aIO\u6240\u9700\u8981\u7684\u65f6\u95f4\uff0c\u5305\u62ec\u5728\u961f\u5217\u7b49\u5f85\u7684\u65f6\u95f4\u548c\u8bf7\u6c42\u5904\u7406\u7684\u65f6\u95f4\u3002\nr_wait\uff1a\u6bcf\u4e2a\u8bfb\u64cd\u4f5c\u5e73\u5747\u6240\u9700\u8981\u7684\u65f6\u95f4\uff0c\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u8bfb\u64cd\u4f5c\u7684\u65f6\u95f4 + \u5185\u6838\u961f\u5217\u4e2d\u7684\u65f6\u95f4\u3002\nw_wait: \u6bcf\u4e2a\u5199\u64cd\u5e73\u5747\u6240\u9700\u8981\u7684\u65f6\u95f4\uff0c\u5305\u62ec\u786c\u76d8\u8bbe\u5907\u5199\u64cd\u4f5c\u7684\u65f6\u95f4 + \u961f\u5217\u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\u3002\n%util: \u6bcf\u79d2\u5185\u7528\u4e8e I/O \u64cd\u4f5c\u7684\u65f6\u95f4\u5360\u6bd4\n\n# \u67e5\u627e\u5f15\u8d77 iowait \u9ad8\u7684\u8fdb\u7a0b\niotop\n\niostat -m 1 10\n-m\uff1a\u67d0\u4e9b\u4f7f\u7528block\u4e3a\u5355\u4f4d\u7684\u5217\u5f3a\u5236\u4f7f\u7528MB\u4e3a\u5355\u4f4d\n1 10\uff1a\u6570\u636e\u663e\u793a\u6bcf\u96941\u79d2\u5237\u65b0\u4e00\u6b21\u3002\u5171\u663e\u793a10\u6b21\n\n# \u67e5\u770b\u5f15\u8d77 iowait \u9ad8\u7684\u5177\u4f53\u6587\u4ef6\n\nlsof -p <pid>\n")),(0,r.kt)("p",null,"\u4f18\u5316\u65b9\u6cd5:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6709\u6548\u63a7\u5236\u8d44\u6e90\u6570\u91cf\uff0c\u4f8b\u5982\u4f7f\u7528\u7ebf\u7a0b\u6c60\u7b49\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4e86\u89e3\u78c1\u76d8\u7279\u6027\u662f\u5fc5\u8981\u7684\uff0c\u4e00\u822c\u968f\u673a\u5199\u8f6c\u987a\u5e8f\u5199\uff0c\u540c\u6b65\u5199\u8f6c\u5f02\u6b65\u5199\uff0cIO \u5408\u5e76\u90fd\u53ef\u4ee5\u5f97\u5230\u8f83\u597d\u7684\u6539\u5584\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u538b\u7f29 & Dirty Page \u4f18\u5316\u3002Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u5f53 Dirty Page \u7684\u5927\u5c0f\u8fbe\u5230\u603b\u7269\u7406\u5185\u5b58\u5927\u5c0f 10%\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8fdb\u884c\u5237\u76d8\u4f46\u4e0d\u963b\u585e\u7cfb\u7edf\u8c03\u7528\u7684\u5199\u7ebf\u7a0b\uff0c\u82e5\u8fbe\u5230\u7269\u7406\u5185\u5b58\u5927\u5c0f\u7684 20%\uff0c\u5199\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\u3002\u901a\u8fc7\u5408\u9002\u7684\u538b\u7f29\u7b97\u6cd5\u51cf\u5c11\u843d\u76d8\u6570\u636e\u7684\u5927\u5c0f\u901a\u5e38\u6548\u679c\u663e\u8457\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9884\u8bfb\u53d6\u548c\u8bfb\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},"Zero Copy\u3002"),(0,r.kt)("li",{parentName:"ul"},"MMap \u5185\u5b58\u6620\u5c04\u3002")),(0,r.kt)("h2",{id:"94-\u67e5\u5185\u5b58"},"9.4. \u67e5\u5185\u5b58"),(0,r.kt)("p",null,"\u5185\u5b58\u5360\u7528\u9ad8, \u53ef\u80fd\u662f\u5185\u5b58\u6cc4\u6f0f"),(0,r.kt)("p",null,"\u901a\u8fc7 \u5185\u5b58\u6620\u50cf\u5206\u6790\u5de5\u5177\u5206\u6790 dump \u6587\u4ef6,  \u770b\u770b\u662f memory leak \u8fd8\u662f memory overflow"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"memory leak: \u8bc1\u660e\u6709\u65e0\u6cd5\u56de\u6536\u7684Object, \u67e5\u770b leak Object \u5230 gc roots\u7684\u5f15\u7528\u94fe, \u5b9a\u4f4dleak\u4ee3\u7801")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"memory overflow: \u67e5\u770b -Xms, -Xmx \u662f\u5426\u53ef\u4ee5\u589e\u5927, \u4ee3\u7801\u4e0a\u67e5\u770b\u5bf9\u8c61\u662f\u5426\u751f\u547d\u5468\u671f\u8fc7\u957f"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# \u5185\u5b58\u6574\u4f53\u60c5\u51b5\n\nfree -m \n\nfree -m -c10 -s1\n-m\uff1a\u4ee5MB\u4e3a\u5355\u4f4d\u663e\u793a\u3002\u5176\u5b83\u7684\u6709-k -g -b\n-s: \u95f4\u9694\u591a\u5c11\u79d2\u6301\u7eed\u89c2\u5bdf\u5185\u5b58\u4f7f\u7528\u72b6\u51b5\n-c:\u89c2\u5bdf\u591a\u5c11\u6b21\n\nvmstat 1 10\n1\u8868\u793a\u6bcf\u96941s\u8f93\u51fa\u4e00\u6b21,10 \u8868\u793a\u8f93\u51fa10\u6b21\n\n# JVM \u5806\u5185\u5b58\u5360\u7528\u6392\u884c\n\njmap -histo <pid> | head -n 30\n\n# JVM \u5185\u5b58\u5360\u7528\u4fe1\u606f\n\njstat -gccause <pid> 1000 1000\njstat -gcutil <pid>\n\n# dump\u5185\u5b58\n\njmap -F -dump:live,file=/home/admin/heap.bin <pid>\n\n")),(0,r.kt)("h2",{id:"95-\u6392\u67e5\u5783\u573e\u56de\u6536\u95ee\u9898"},"9.5. \u6392\u67e5\u5783\u573e\u56de\u6536\u95ee\u9898"),(0,r.kt)("h2",{id:"96-\u7f51\u7edc\u95ee\u9898"},"9.6. \u7f51\u7edc\u95ee\u9898"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"netstat -antp \n\n-a (all)\u663e\u793a\u5168\u90e8\u9009\u9879\u3002\u9ed8\u8ba4\u4e0d\u663e\u793aLISTEN\u76f8\u5173\n-t (tcp)\u4ec5\u663e\u793atcp\u76f8\u5173\u9009\u9879\n-u (udp)\u4ec5\u663e\u793audp\u76f8\u5173\u9009\u9879\n-n \u62d2\u7edd\u663e\u793a\u522b\u540d\uff0c\u80fd\u663e\u793a\u6570\u5b57\u7684\u6240\u6709\u8f6c\u5316\u6210\u6570\u5b57\u3002\n-l \u4ec5\u5217\u51fa\u6709\u5728 Listen (\u76d1\u542c) \u7684\u670d\u670d\u52a1\u72b6\u6001\n\n-p \u663e\u793a\u5efa\u7acb\u76f8\u5173\u94fe\u63a5\u7684\u7a0b\u5e8f\u540d\n\n")),(0,r.kt)("h1",{id:"10-jdk-\u81ea\u5e26\u547d\u4ee4\u884c\u5de5\u5177"},"10. jdk \u81ea\u5e26\u547d\u4ee4\u884c\u5de5\u5177"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"jps [-l]\n- \u5217\u51fajvm\u4e2d\u7684\u8fdb\u7a0b (id, \u4e3b\u7c7b)\n\njstat\n- \u76d1\u89c6jvm\u5185\u5b58\u53d8\u5316, gc\u60c5\u51b5\n\njinfo\n- \u67e5\u8be2jvm\u914d\u7f6e\u4fe1\u606f\n\njmap\n- \u751f\u6210Java heap \u5feb\u7167\n\njhat\n- \u5206\u6790 Java heap \u5feb\u7167\n- \u53ef\u5728\u751f\u4ea7\u673a\u5668\u4e0a\u76f4\u63a5\u8bbf\u95ee\u5206\u6790\u7ed3\u679chtml\n\njstack\n- \u751f\u6210\u7ebf\u7a0b\u5feb\u7167\n- \u7528\u4e8e\u5206\u6790\u7ebf\u7a0b\u505c\u987f, \u5982\u6b7b\u9501\n\n\u53ef\u89c6\u5316\u5de5\u5177\nJconsole\n- \u5185\u5b58, \u7ebf\u7a0b\u76d1\u63a7\nVirtualVM\n- \u76d1\u63a7, \u6027\u80fd\u5206\u6790\n- \u57fa\u4e8e\u63d2\u4ef6\n")),(0,r.kt)("h2",{id:"101-java-\u542f\u52a8-javac-\u7f16\u8bd1-javap-\u53cd\u7f16\u8bd1"},"10.1. java \u542f\u52a8 javac \u7f16\u8bd1 javap \u53cd\u7f16\u8bd1"),(0,r.kt)("p",null,"1\u3001\u4e0d\u5e26\u4efb\u4f55\u53ef\u9009\u53c2\u6570(\u5982\u679c\u5b57\u8282\u7801\u6587\u4ef6\u5c31\u4f4d\u4e8e\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff0c\u53ef\u4ee5\u4e0d\u5199\u7c7b\u7684\u5305\u540d)\uff1a"),(0,r.kt)("p",null,"\u5b9e\u9645\u4e0a\u7b49\u540c\u4e8e javap -package Person\njavap Person"),(0,r.kt)("p",null,"2\u3001\u53cd\u6c47\u7f16\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u5b57\u8282\u7801\u6587\u4ef6\uff1a"),(0,r.kt)("p",null,"javap -classpath D:/java/lib cn.softown.Person"),(0,r.kt)("p",null,"3\u3001\u53cd\u6c47\u7f16\u5b57\u8282\u7801\u6587\u4ef6\u4e3a JVM \u53ef\u4ee5\u8bc6\u522b\u3001\u6267\u884c\u7684\u5b57\u8282\u7801\u547d\u4ee4\uff1a"),(0,r.kt)("p",null,"javap -c Person"),(0,r.kt)("h2",{id:"102-jstack"},"10.2. jstack"),(0,r.kt)("p",null,"\u6253\u5370\u7ebf\u7a0b\u5feb\u7167\uff0c \u7528\u4e8e\u5206\u6790\u7ebf\u7a0b\u505c\u987f, \u5982\u6b7b\u9501"),(0,r.kt)("p",null,"\u7ebf\u7a0b\u5feb\u7167\u662f\u5f53\u524d java \u865a\u62df\u673a\u5185\u6bcf\u4e00\u6761\u7ebf\u7a0b\u6b63\u5728\u6267\u884c\u7684\u65b9\u6cd5\u5806\u6808\u7684\u96c6\u5408\uff0c"),(0,r.kt)("p",null,"\u751f\u6210\u7ebf\u7a0b\u5feb\u7167\u7684\u4e3b\u8981\u76ee\u7684\u662f\u5b9a\u4f4d\u7ebf\u7a0b\u51fa\u73b0\u957f\u65f6\u95f4\u505c\u987f\u7684\u539f\u56e0, \u4e00\u822c\u6253\u5370\u4e09\u6b21 dump\uff0c\u770b\u770b\u6ca1\u6709\u54cd\u5e94\u7684\u7ebf\u7a0b\u5230\u5e95\u5728\u540e\u53f0\u505a\u4ec0\u4e48\u4e8b\u60c5\uff0c\u5982\u7ebf\u7a0b\u95f4\u6b7b\u9501\u3001\u6b7b\u5faa\u73af\u3001\u8bf7\u6c42\u5916\u90e8\u8d44\u6e90\u5bfc\u81f4\u7684\u957f\u65f6\u95f4\u7b49\u5f85\u7b49\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# \u9ed8\u8ba4\u8f93\u51fa \u63a7\u5236\u53f0\njstack 1102\n\n\n")),(0,r.kt)("p",null,"dump \u6587\u4ef6\u5206\u6790:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'# \u6709\u4e00\u4e9b jvm \u7684 daemon thread\uff0c\u5982 gc\uff0c\u4f4e\u5185\u5b58\u68c0\u6d4b\uff0c \u4e0d\u5173\u6ce8\n\n"VM Thread" os_prio=2 tid=0x0000000018167000 nid=0xfccc runnable\n"GC task thread#0 (ParallelGC)" os_prio=0 tid=0x000000000352a000 nid=0x121b4 runnable\n"GC task thread#1 (ParallelGC)" os_prio=0 tid=0x000000000352c000 nid=0x12168 runnable\n"GC task thread#2 (ParallelGC)" os_prio=0 tid=0x000000000352d800 nid=0x121d0 runnable\n"GC task thread#3 (ParallelGC)" os_prio=0 tid=0x0000000003530000 nid=0x115d4 runnable\n"VM Periodic Task Thread" os_prio=2 tid=0x0000000019621000 nid=0x137b0 waiting on condition\n\n\n# \u5173\u6ce8u\u7528\u6237\u7ea7\u522b\u7684 thread\n- Runnable\n\n    - Wait on condition  \u7ebf\u7a0b\u7b49\u5f85\u67d0\u4e2a\u6761\u4ef6\u7684\u53d1\u751f\n\n        \u5e38\u89c1\u7684\u60c5\u51b5\u662f\u7ebf\u7a0b\u5728\u7b49\u5f85\u7f51\u7edc\u7684\u8bfb\u5199\uff0c\u6bd4\u5982\u5f53\u7f51\u7edc\u6570\u636e\u6ca1\u6709\u51c6\u5907\u597d\u8bfb\u65f6\uff0c\u7ebf\u7a0b\u5904\u4e8e\u8fd9\u79cd\u7b49\u5f85\u72b6\u6001\uff0c\u5982\u679c\u53d1\u73b0\u6709\u5927\u91cf\u7684\u7ebf\u7a0b\u90fd\u5728\u5904\u5728 Wait on condition \u53ef\u80fd\u662f\u4e00\u4e2a\u7f51\u7edc\u74f6\u9888\u7684\u5f81\u5146\u3002\n\n        - \u4e00\u79cd\u60c5\u51b5\u662f\u7f51\u7edc\u975e\u5e38\u5fd9\uff0c\u51e0 \u4e4e\u6d88\u8017\u4e86\u6240\u6709\u7684\u5e26\u5bbd\uff0c\u4ecd\u7136\u6709\u5927\u91cf\u6570\u636e\u7b49\u5f85\u7f51\u7edc\u8bfb \u5199\n\n        - \u53e6\u4e00\u79cd\u60c5\u51b5\u4e5f\u53ef\u80fd\u662f\u7f51\u7edc\u7a7a\u95f2\uff0c\u4f46\u7531\u4e8e\u8def\u7531\u7b49\u95ee\u9898\uff0c\u5bfc\u81f4\u5305\u65e0\u6cd5\u6b63\u5e38\u7684\u5230\u8fbe,\n\n        \u8fd9\u65f6\u53ef\u4ee5 netstat\u7edf\u8ba1\u5355\u4f4d\u65f6\u95f4\u7684\u53d1\u9001\u5305\u7684\u6570\u76ee, \u53ef\u4ee5\u89c2\u5bdf cpu\u7684\u5229\u7528\u7387\uff0c\u5982\u679c\u7cfb\u7edf\u6001\u7684 CPU\u65f6\u95f4\uff0c\u76f8\u5bf9\u4e8e\u7528\u6237\u6001\u7684 CPU\u65f6\u95f4\u6bd4\u4f8b\u8f83\u9ad8\u4f1a\u662f\u7f51\u7edc\u74f6\u9888\n\n        \u5916\u4e00\u79cd\u51fa\u73b0 Wait on condition\u7684\u5e38\u89c1\u60c5\u51b5\u662f\u8be5\u7ebf\u7a0b\u5728 sleep\uff0c\u7b49\u5f85 sleep\u7684\u65f6\u95f4\u5230\u4e86\u65f6\u5019\uff0c\u5c06\u88ab\u5524\u9192\n\n    - Waiting for monitor entry \u7ebf\u7a0b\u7b49\u5f85\u83b7\u53d6\u9501\uff0c \u4ee5\u4fbf\u8fdb\u5165\u4e34\u754c\u533a\uff0c \u4e00\u822c\u662f\u4f7f\u7528\u4e86 synchronizd\n\n        \u5982\u679c\u5728\u591a\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e2d\uff0c\u5927\u91cf\u4f7f\u7528 synchronized\uff0c\u6216\u8005\u4e0d\u9002\u5f53\u7684\u4f7f\u7528\u4e86\u5b83\uff0c\u4f1a\u9020\u6210\u5927\u91cf\u7ebf\u7a0b\u5728\u4e34\u754c\u533a\u7684\u5165\u53e3\u7b49\u5f85\uff0c\u9020\u6210\u7cfb\u7edf\u7684\u6027\u80fd\u5927\u5e45\u4e0b\u964d\u3002\u5982\u679c\u5728\u7ebf\u7a0b DUMP\u4e2d\u53d1\u73b0\u4e86\u8fd9\u4e2a\u60c5\u51b5\uff0c\u5e94\u8be5\u5ba1\u67e5\u6e90\u7801\uff0c\u6539\u8fdb\u7a0b\u5e8f\u3002\n\n    - in Object.wait() \u7ebf\u7a0b\u91ca\u653e\u9501\uff0c \u7b49\u5f85\u518d\u6b21\u83b7\u53d6\u9501\n\n        \u5f53\u7ebf\u7a0b\u83b7\u5f97\u4e86 Monitor\uff0c\u8fdb\u5165\u4e86\u4e34\u754c\u533a\u4e4b\u540e\uff0c\u5982\u679c\u53d1\u73b0\u7ebf\u7a0b\u7ee7\u7eed\u8fd0\u884c\u7684\u6761\u4ef6\u6ca1\u6709\u6ee1\u8db3\uff0c\u5b83\u5219\u8c03\u7528\u5bf9\u8c61\uff08\u4e00\u822c\u5c31\u662f\u88ab synchronized \u7684\u5bf9\u8c61\uff09\u7684 wait() \u65b9\u6cd5\uff0c\u653e\u5f03\u4e86 Monitor\uff0c\u8fdb\u5165 \u201cWait Set\u201d\u961f\u5217\u3002\u53ea\u6709\u5f53\u522b\u7684\u7ebf\u7a0b\u5728\u8be5\u5bf9\u8c61\u4e0a\u8c03\u7528\u4e86 notify() \u6216\u8005 notifyAll() \uff0c \u201c Wait Set\u201d\u961f\u5217\u4e2d\u7ebf\u7a0b\u624d\u5f97\u5230\u673a\u4f1a\u53bb\u7ade\u4e89\n\n\n# \u5904\u7406 http \u7684 thread\uff0c tomcat \u5f00\u4e86\u4e00\u4e2a thread pool\uff0c \u5305\u62ec http-nio-8090-exec-1\uff0c2\uff0c3.\u3002\u300210\n# \u53ef\u4ee5\u770b\u5230 thread state \u4e3a waiting\uff0c\u8c03\u7528\u6808\uff0c\u5f53\u524d\u9501\u4f4f\u7684\u8d44\u6e90 0x000000001d7ee000\n"http-nio-8090-exec-1" #23 daemon prio=5 os_prio=0 tid=0x000000001bc9d800 nid=0x13af4 waiting on condition [0x000000001d7ee000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00000000db266038> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n        at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:107)\n        at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:745)\n\n\n# \u8fd9\u662f\u4e00\u4e2a\u8fdb\u5165 \u4e34\u754c\u533a\uff0c \u53c8\u9000\u51fa\u4e34\u754c\u533a\u7684\u7ebf\u7a0b\n# \u6bd4\u5982\uff0c\u5728\u7a0b\u5e8f\u4e2d\uff0c\u6709\u591a\u4e2a\u670d\u52a1\u7ebf\u7a0b\uff0c\u8bbe\u8ba1\u6210\u4ece\u4e00\u4e2a\u961f\u5217\u91cc\u9762\u8bfb\u53d6\u8bf7\u6c42\u6570\u636e\u3002\u8fd9\u4e2a\u961f\u5217\u5c31\u662f lock\u4ee5\u53ca waiting on\u7684\u5bf9\u8c61\u3002\u5f53\u961f\u5217\u4e3a\u7a7a\u7684\u65f6\u5019\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u90fd\u4f1a\u5728\u8fd9\u4e2a\u961f\u5217\u4e0a\u7b49\u5f85\uff0c\u76f4\u5230\u961f\u5217\u6709\u4e86\u6570\u636e\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u88ab Notify\uff0c\u5f53\u7136\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u5f97\u4e86 lock\uff0c\u7ee7\u7eed\u6267\u884c\n"Thread-1" prio=10 tid=0x08223250 nid=0xa in Object.wait() [0xef47a000..0xef47aa38]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0xef63beb8> (a java.util.ArrayList) # \u5728 \u4e34\u754c\u533a\u8c03\u7528 obj.wait()\uff0c\u7b49\u5f85\u5728\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\uff0c \u91ca\u653e\u9501\n        at java.lang.Object.wait(Object.java:474)\n        at testthread.MyWaitThread.run(MyWaitThread.java:40)\n        - locked <0xef63beb8> (a java.util.ArrayList) #  \u7528 synchronized \u83b7\u5f97\u4e86\u8fd9\u4e2a\u5bf9\u8c61\u7684 \u9501\n        at java.lang.Thread.run(Thread.java:595)\n\n\n# \u6b7b\u9501\n"Thread-1" prio=5 tid=0x00acc490 nid=0xe50 waiting for monitor entry [0x02d3f000 ..0x02d3fd68]\n    at deadlockthreads.TestThread.run(TestThread.java:31)\n    - waiting to lock <0x22c19f18> (a java.lang.Object)  # \u7b49\u5f85\u83b7\u53d6 0x22c19f18 \u9501\n    - locked <0x22c19f20> (a java.lang.Object)  # \u6301\u6709 0x22c19f20 \u9501\n"Thread-0" prio=5 tid=0x00accdb0 nid=0xdec waiting for monitor entry [0x02cff000 ..0x02cff9e8]\n    at deadlockthreads.TestThread.run(TestThread.java:31)\n    - waiting to lock <0x22c19f20> (a java.lang.Object)\n    - locked <0x22c19f18> (a java.lang.Object)\n\n\n# \u70ed\u9501\uff1a\u7531\u4e8e\u591a\u4e2a\u7ebf\u7a0b\u5bf9\u4e34\u754c\u533a\uff0c\u6216\u8005\u9501\u7684\u7ade\u4e89\uff0c\u53ef\u80fd\u51fa\u73b0 \u9891\u7e41\u7684\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u5207\u6362\uff0c \u8fdb\u800c\u9020\u6210 \u5927\u90e8\u5206 CPU\u5f00\u9500\u7528\u5728 \u201c\u7cfb\u7edf\u6001 \u201d\n# \u8868\u73b0\u4e3a \u5927\u591a\u6570\u7684\u7ebf\u7a0b\u72b6\u6001\u90fd\u662f Waiting for monitor entry\u6216\u8005 Wait on monitor\n\u6211\u4eec\u66fe\u7ecf\u9047\u5230\u8fc7\u8fd9\u6837\u7684\u4f8b\u5b50\uff0c\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u51fa\u73b0\u4e86\u4ee5\u4e0a\u6307\u51fa\u7684\u5404\u79cd\u73b0\u8c61\uff0c\u901a\u8fc7\u89c2\u5bdf\u64cd\u4f5c\u7cfb\u7edf\u7684\u8d44\u6e90\u4f7f\u7528\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u53ca\u7ebf\u7a0b DUMP\u4fe1\u606f\uff0c\u786e\u5b9a\u4e86\u7a0b\u5e8f\u4e2d\u70ed\u9501\u7684\u5b58\u5728\uff0c\u5e76\u53d1\u73b0\u5927\u591a\u6570\u7684\u7ebf\u7a0b\u72b6\u6001\u90fd\u662f Waiting for monitor entry\u6216\u8005 Wait on monitor\uff0c\u4e14\u662f\u963b\u585e\u5728\u538b\u7f29\u548c\u89e3\u538b\u7f29\u7684\u65b9\u6cd5\u4e0a\u3002\u540e\u6765\u91c7\u7528\u7b2c\u4e09\u65b9\u7684\u538b\u7f29\u5305 javalib\u66ff\u4ee3 JDK\u81ea\u5e26\u7684\u538b\u7f29\u5305\u540e\uff0c\u7cfb\u7edf\u7684\u6027\u80fd\u63d0\u9ad8\u4e86\u51e0\u500d\u3002\n\n')),(0,r.kt)("h2",{id:"103-jcmd"},"10.3. jcmd"),(0,r.kt)("p",null,"\u7528\u4e8e\u5411\u6b63\u5728\u8fd0\u884c\u7684 JVM \u53d1\u9001\u8bca\u65ad\u547d\u4ee4\u8bf7\u6c42\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'# \u5355\u72ec\u4e0d\u5e26\u53c2\u6570\u4f7f\u7528\n# \u8fd4\u56de pid mainClass cli\u2014args\n# \u7c7b\u4f3c jps\njcmd [-l]\n\n# \u5411\u6307\u5b9a\u8fdb\u7a0b \u53d1\u9001 \u8bca\u65ad\u547d\u4ee4\njcmd 11022 name=\\"Value of name argument\\"\n# \u5411\u591a\u4e2a\u6709\u76f8\u540c main class  \u7684\u8fdb\u7a0b \u53d1\u9001\u547d\u4ee4\njcmd com.xxx.AppClass name=\\"Value of name argument\\"\n# \u6253\u5370\u6027\u80fd\u53c2\u6570\njcmd 1102 PerfCounter.print\n# \u4ece\u6307\u5b9a file \u8bfb\u53d6\u547d\u4ee4\njcmd 1102 -f xxx_file\n')),(0,r.kt)("h2",{id:"104-jps"},"10.4. jps"),(0,r.kt)("p",null,"\u672c\u5730\u5f53\u524d\u7528\u6237\u6240\u6709\u8fd0\u884c\u7684 java \u8fdb\u7a0b/jvm \u5b9e\u4f8b"),(0,r.kt)("p",null,"jps \u547d\u4ee4\u6709\u4e2a\u5730\u65b9\u5f88\u4e0d\u597d\uff0c\u4f3c\u4e4e\u53ea\u80fd\u663e\u793a\u5f53\u524d\u7528\u6237\u7684 java \u8fdb\u7a0b\uff0c\u8981\u663e\u793a\u5176\u4ed6\u7528\u6237\u7684\u8fd8\u662f\u53ea\u80fd\u7528 unix/linux \u7684 ps \u547d\u4ee4\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# pid, mainClass\njps\n# pid\njps -q\n# \u4f20\u9012\u7ed9 main class \u7684\u53c2\u6570\njps -m\n# main class \u5b8c\u6574 package path\njps -l\n# \u8f93\u51fa\u4f20\u9012\u7ed9JVM\u7684\u53c2\u6570\njps -v\n\n# \u5217\u51fa\u8fdc\u7a0b\u670d\u52a1\u5668192.168.0.77\u673a\u5668\u6240\u6709\u7684jvm\u5b9e\u4f8b\uff0c\u91c7\u7528rmi\u534f\u8bae\uff0c\u9ed8\u8ba4\u8fde\u63a5\u7aef\u53e3\u4e3a1099\uff08\u524d\u63d0\u662f\u8fdc\u7a0b\u670d\u52a1\u5668\u63d0\u4f9bjstatd\u670d\u52a1\uff09\njps 192.168.0.77\n")),(0,r.kt)("h2",{id:"105-jstat"},"10.5. jstat"),(0,r.kt)("p",null,"\u865a\u62df\u673a\u7edf\u8ba1\u76d1\u63a7\u5de5\u5177\u3002\u53ef\u4ee5\u7528\u4e8e\u670d\u52a1\u6027\u80fd\u4f18\u5316\u3002\u91cd\u8981"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# -class\uff0c\u76d1\u63a7\u4ec0\u4e48\u6570\u636e\uff0c \u8fd9\u91cc\u662f\u76d1\u63a7 class \u52a0\u8f7d\u60c5\u51b5\n    -class\uff1a\u7edf\u8ba1class loader\u884c\u4e3a\u4fe1\u606f\n    -compile\uff1a\u7edf\u8ba1\u7f16\u8bd1\u884c\u4e3a\u4fe1\u606f\n    -gc\uff1a\u7edf\u8ba1jdk gc\u65f6heap\u4fe1\u606f\n    -gccapacity\uff1a\u7edf\u8ba1\u4e0d\u540c\u7684generations\uff08\u4e0d\u77e5\u9053\u600e\u4e48\u7ffb\u8bd1\u597d\uff0c\u5305\u62ec\u65b0\u751f\u533a\uff0c\u8001\u5e74\u533a\uff0cpermanent\u533a\uff09\u76f8\u5e94\u7684heap\u5bb9\u91cf\u60c5\u51b5\n    -gccause\uff1a\u7edf\u8ba1gc\u7684\u60c5\u51b5\uff0c\uff08\u540c-gcutil\uff09\u548c\u5f15\u8d77gc\u7684\u4e8b\u4ef6\n    -gcnew\uff1a\u7edf\u8ba1gc\u65f6\uff0c\u65b0\u751f\u4ee3\u7684\u60c5\u51b5\n    -gcnewcapacity\uff1a\u7edf\u8ba1gc\u65f6\uff0c\u65b0\u751f\u4ee3heap\u5bb9\u91cf\n    -gcold\uff1a\u7edf\u8ba1gc\u65f6\uff0c\u8001\u5e74\u533a\u7684\u60c5\u51b5\n    -gcoldcapacity\uff1a\u7edf\u8ba1gc\u65f6\uff0c\u8001\u5e74\u533aheap\u5bb9\u91cf\n    -gcpermcapacity\uff1a\u7edf\u8ba1gc\u65f6\uff0cpermanent\u533aheap\u5bb9\u91cf\n    -gcutil\uff1a\u7edf\u8ba1gc\u65f6\uff0cheap\u60c5\u51b5\n    -printcompilation\uff1a\u4e0d\u77e5\u9053\u5e72\u4ec0\u4e48\u7684\uff0c\u4e00\u76f4\u6ca1\u7528\u8fc7\u3002\n# -t\uff0c\u663e\u793a timestamp \u5217\n# -h3\uff0c\u6bcfn\u6b21\u6253\u5370\u4e00\u6b21 \u8868\u683c title\n# 55912\uff0c\u8fdb\u7a0bid\n# 1000\uff08ms\uff09\uff0c\u6bcf1000ms\u76d1\u63a7\u6253\u5370\u4e00\u6b21\n# 100\uff0c\u5171\u6253\u5370\u591a\u5c11\u6b21\uff08\u4e0d\u5199\u7684\u8bdd\u5c31\u662f\u4e00\u76f4\u6253\u5370\u4e0b\u53bb\uff09\njstat -class -t -h3 55912 1000 100\n\n# \u7ed3\u679c\u5217\uff1a\n# timestamp\uff0c-t\u7684\u8f93\u51fa\u7ed3\u679c\n# loaded\uff0c\u5df2\u52a0\u8f7d\u7684\u7c7b\u6570\u91cf\uff08\u771f\u591a\u3002\u3002\u5f88\u591a\u90fd\u662f\u52a8\u6001\u4ee3\u7406\u7684\uff09\n# bytes\uff0c\u5df2\u52a0\u8f7d\u7684\u7c7b\u603b\u5927\u5c0f\n# unloaded\uff0c\u5df2\u5378\u8f7d\u7684\u7c7b\u6570\u91cf\uff08\u591a\u6001\u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\uff0c\u662f\u53ef\u4ee5\u5378\u8f7d\u7c7b\u7684\uff09\n# bytes\uff0c\u5df2\u5378\u8f7d\u7684\u7c7b\u603b\u5927\u5c0f\n# time\uff0cclassLoader\u64cd\u4f5c\u7c7b\u7684\u603b\u8017\u65f6\n\n\n# jit \u60c5\u51b5\njstat -compiler -t -h3 55912 1000 100\n\n# \u76d1\u63a7 gc \u60c5\u51b5\njstat -gc -t -h3 55912 1000 100\n# \u7ed3\u679c\u5217\uff1a\n# S01,S1C,S0U,S1U from\uff0cto\u7684\u5927\u5c0f\u548c\u5df2\u7528\u91cf\u5927\u5c0f(KB)\n# EC,EU eden\u7684\u5927\u5c0f\u548c\u5df2\u7528\u91cf\n# OC,OU \u8001\u8fb9\u4ee3\u7684\u5927\u5c0f\u548c\u5df2\u7528\u91cf\n# MC,MU \u6c38\u4e45\u533a\u5927\u5c0f\u548c\u5df2\u7528\u91cf\n# CCSC,CCSU \u538b\u7f29\u7c7b\u7a7a\u95f4\u5927\u5c0f\u548c\u5df2\u7528\u91cf\n# YGC,YGCT: \u65b0\u751f\u4ee3GC\u6b21\u6570\u548c\u8017\u65f6\n# FGC,FGCT: Full GC\u6b21\u6570\u548c\u8017\u65f6\n# GCT GC\u603b\u8017\u65f6\n\n\n# \u67e5\u770bgc\u539f\u56e0\u4ee5\u53ca\u5404\u4e2a\u5206\u4ee3\u7684\u767e\u5206\u4fe1\u606f\njstat -gccapacity -t -h3 55912 1000 100\n# \u7ed3\u679c\u5217\n# S0 \uff1a\u5e74\u8f7b\u4ee3\u4e2d\u7b2c\u4e00\u4e2asurvivor\uff08\u5e78\u5b58\u533a\uff09\u5df2\u4f7f\u7528\u7684\u5360\u5f53\u524d\u5bb9\u91cf\u767e\u5206\u6bd4\n# S1 \uff1a\u5e74\u8f7b\u4ee3\u4e2d\u7b2c\u4e8c\u4e2asurvivor\uff08\u5e78\u5b58\u533a\uff09\u5df2\u4f7f\u7528\u7684\u5360\u5f53\u524d\u5bb9\u91cf\u767e\u5206\u6bd4\n# E \uff1a\u5e74\u8f7b\u4ee3\u4e2dEden\uff08\u4f0a\u7538\u56ed\uff09\u5df2\u4f7f\u7528\u7684\u5360\u5f53\u524d\u5bb9\u91cf\u767e\u5206\u6bd4\n# O \uff1aold\u4ee3\u5df2\u4f7f\u7528\u7684\u5360\u5f53\u524d\u5bb9\u91cf\u767e\u5206\u6bd4\n# M \uff1a\u5143\u7a7a\u95f4\u5df2\u4f7f\u7528\u7684\u5360\u5f53\u524d\u5bb9\u91cf\u767e\u5206\u6bd4\n# CCS\uff1a \u538b\u7f29\n# YGC \uff1a\u4ece\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u5230\u91c7\u6837\u65f6\u5e74\u8f7b\u4ee3\u4e2dgc\u6b21\u6570\n# YGCT \uff1a\u4ece\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u5230\u91c7\u6837\u65f6\u5e74\u8f7b\u4ee3\u4e2dgc\u6240\u7528\u65f6\u95f4(s)\n# FGC \uff1a\u4ece\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u5230\u91c7\u6837\u65f6old\u4ee3(\u5168gc)gc\u6b21\u6570\n# FGCT \uff1a\u4ece\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u5230\u91c7\u6837\u65f6old\u4ee3(\u5168gc)gc\u6240\u7528\u65f6\u95f4(s)\n# GCT\uff1a\u4ece\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u5230\u91c7\u6837\u65f6gc\u7528\u7684\u603b\u65f6\u95f4(s)\n# LGCC\uff1a\u6700\u540e\u4e00\u6b21GC\u539f\u56e0\n# GCC\uff1a\u5f53\u524dGC\u539f\u56e0\uff08No GC \u4e3a\u5f53\u524d\u6ca1\u6709\u6267\u884cGC\uff09\n")),(0,r.kt)("h2",{id:"106-jvisualvm"},"10.6. jvisualvm"),(0,r.kt)("p",null,"\u68c0\u6d4b java \u5185\u5b58 \u7684\u53d8\u5316\u60c5\u51b5\uff0c\u4e0b\u8f7d\u5185\u5b58\u5feb\u7167, \u53ef\u7528\u4e8e\u6392\u67e5\u5185\u5b58\u6cc4\u9732, "),(0,r.kt)("p",null,"\u5783\u573e\u56de\u6536\u67e5\u770b"),(0,r.kt)("p",null,"CPU \u5360\u7528"),(0,r.kt)("p",null,"\u7ebf\u7a0b\u5206\u6790 : \u7eff\u8272(\u8fd0\u884c, \u6b63\u5728\u8fd0\u884c\u7684 thread), \u7d2b\u8272(\u4f11\u7720, \u8c03\u7528 sleep \u7684 thread), \u9ec4\u8272(\u7b49\u5f85, \u8c03\u7528 object.wait \u7684 thread), \u9a7b\u7559(\u7ebf\u7a0b\u6c60\u4e2d\u7684\u7a7a\u95f2\u7ebf\u7a0b), \u76d1\u89c6(\u6b63\u5728\u963b\u585e/\u7b49\u5f85\u9501\u7684 thread)"),(0,r.kt)("p",null,"\u662f jconsole \u5347\u7ea7\u7248"),(0,r.kt)("h2",{id:"107-jconsole"},"10.7. jconsole"),(0,r.kt)("p",null,"\u56fe\u5f62\u76d1\u63a7\u754c\u9762\uff0c \u7c7b\u4f3c jvisualvm"),(0,r.kt)("p",null,"\u4e0d\u8981 \u751f\u4ea7\u73af\u5883\u4f7f\u7528, \u56e0\u4e3a\u4f1a\u5bf9\u5e94\u7528\u6709\u6027\u80fd\u5f71\u54cd"),(0,r.kt)("h2",{id:"108-jhat"},"10.8. jhat"),(0,r.kt)("p",null,"JDK \u81ea\u5e26\u7684 Java \u5806\u5185\u5b58\u5206\u6790\u5de5\u5177\u3002"),(0,r.kt)("p",null,"jhat \u547d\u4ee4\u89e3\u6790\u4e00\u4e2a java heap dump \u6587\u4ef6\u5e76\u542f\u52a8\u4e00\u4e2a web \u670d\u52a1\u5668\uff0chttp://localhost:7000/oqlhelp/\u3002"),(0,r.kt)("h2",{id:"109-jmap"},"10.9. jmap"),(0,r.kt)("p",null,"\u6253\u5370\u6307\u5b9a Java \u8fdb\u7a0b\u5806\u5185\u5b58\u7ec6\u8282 linux \u4e0b\u7279\u6709"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# \u9009\u9879\u83b7\u53d6\u4e00\u4e2a\u8fd0\u884c\u65f6\u7684heap dump\njmap -dump 1102\n# \u4e8e64\u4f4d\u7684\u865a\u62df\u673a\u4e0a\njmap -J-d64 -heap pid\n")),(0,r.kt)("h2",{id:"1010-jrunscript"},"10.10. jrunscript"),(0,r.kt)("p",null,"\u89e3\u91ca\u6267\u884c javascript\u3001groovy\u3001ruby \u7b49\u811a\u672c\u8bed\u8a00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'# \u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f\njrunscript\n# \u6267\u884c\u5b57\u7b26\u4e32\njrunscript -e "print(\'hello world\')"\n# \u6307\u5b9a\u8bed\u8a00\uff0c \u6307\u5b9a\u6587\u4ef6\njrunscript -l js -f test.js\n# test.js\u662f\u4e00\u4e2a\u811a\u672c\u6587\u4ef6\uff0carg1\uff0carg2\u548carg3\u662f\u4f20\u9012\u7ed9\u811a\u672c\u7684\u811a\u672c\u53c2\u6570\u3002\u811a\u672c\u53ef\u4ee5\u4f7f\u7528"arguments"\u6570\u7ec4\u6765\u8bbf\u95ee\u8fd9\u4e9b\u53c2\u6570\njrunscript test.js arg1 arg2 arg3\n\n')),(0,r.kt)("h2",{id:"1011-jinfo"},"10.11. jinfo"),(0,r.kt)("h2",{id:"1012-jprofile"},"10.12. jprofile"),(0,r.kt)("p",null,"\u53ef\u8fde\u63a5\u5230 tomcat\uff0c \u53ef\u76d1\u63a7\u7ebf\u7a0b\uff0c \u5206\u6790\u670d\u52a1\u5668\u7684\u8d44\u6e90\u6d88\u8017\u60c5\u51b5, \u5546\u4e1a\u5de5\u5177, \u975e\u5f00\u6e90"),(0,r.kt)("h1",{id:"11-\u963f\u91cc-arthas"},"11. \u963f\u91cc arthas"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/alibaba/arthas"},"https://github.com/alibaba/arthas"),"\n",(0,r.kt)("a",{parentName:"p",href:"https://arthas.aliyun.com/doc/arthas-tutorials.html?language=en"},"https://arthas.aliyun.com/doc/arthas-tutorials.html?language=en")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/WangJi92/arthas-idea-plugin"},"https://github.com/WangJi92/arthas-idea-plugin"),"\n",(0,r.kt)("a",{parentName:"p",href:"https://wangji.blog.csdn.net/article/details/106964278"},"https://wangji.blog.csdn.net/article/details/106964278")),(0,r.kt)("h1",{id:"12-jvm-\u6027\u80fd\u8c03\u4f18-and-\u5b9e\u7528\u53c2\u6570"},"12. jvm \u6027\u80fd\u8c03\u4f18 and \u5b9e\u7528\u53c2\u6570"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://ifeve.com/jvm-optimize/"},"http://ifeve.com/jvm-optimize/"),"\n",(0,r.kt)("a",{parentName:"p",href:"http://ifeve.com/useful-jvm-flags/"},"http://ifeve.com/useful-jvm-flags/")),(0,r.kt)("h2",{id:"121-\u6709\u54ea\u4e9b\u53c2\u6570"},"12.1. \u6709\u54ea\u4e9b\u53c2\u6570"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"-XX:MetaspaceSize=128m \uff08\u5143\u7a7a\u95f4\u9ed8\u8ba4\u5927\u5c0f\uff09\n-XX:MaxMetaspaceSize=128m \uff08\u5143\u7a7a\u95f4\u6700\u5927\u5927\u5c0f\uff09\n-Xms1024m \uff08\u5806\u9ed8\u8ba4\u5927\u5c0f\uff09\n-Xmx1024m \uff08\u5806\u6700\u5927\u5927\u5c0f\uff09\n-Xmn256m \uff08\u65b0\u751f\u4ee3\u5927\u5c0f\uff09 eden \u533a \u5927\u5c0f(\u4f0a\u7538\u56ed\u533a)\n-Xss256k \uff08\u68e7\u6700\u5927\u6df1\u5ea6\u5927\u5c0f\uff09\n-XX:SurvivorRatio=8 \uff08\u65b0\u751f\u4ee3\u5206\u533a\u6bd4\u4f8b 8:2\uff09\n-XX:+UseConcMarkSweepGC \uff08\u6307\u5b9a\u4f7f\u7528\u7684\u5783\u573e\u6536\u96c6\u5668\uff0c\u8fd9\u91cc\u4f7f\u7528CMS\u6536\u96c6\u5668\uff09\n-XX:+PrintGCDetails \uff08\u6253\u5370\u8be6\u7ec6\u7684GC\u65e5\u5fd7\uff09\n\n\nJDK8\u4e4b\u540e\u628a-XX:PermSize \u548c -XX:MaxPermGen\u79fb\u9664\u4e86\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\n-XX:MetaspaceSize=128m \uff08\u5143\u7a7a\u95f4\u9ed8\u8ba4\u5927\u5c0f\uff09\n-XX:MaxMetaspaceSize=128m \uff08\u5143\u7a7a\u95f4\u6700\u5927\u5927\u5c0f\uff09\n\nJDK 8\u5f00\u59cb\u628a\u7c7b\u7684\u5143\u6570\u636e\u653e\u5230\u672c\u5730\u5316\u7684\u5806\u5185\u5b58(native heap)\u4e2d\uff0c\u8fd9\u4e00\u5757\u533a\u57df\u5c31\u53ebMetaspace\uff0c\u4e2d\u6587\u540d\u53eb\u5143\u7a7a\u95f4\u3002\n\n\u4f7f\u7528\u672c\u5730\u5316\u7684\u5185\u5b58\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f\u6700\u76f4\u63a5\u7684\u8868\u73b0\u5c31\u662fjava.lang.OutOfMemoryError: PermGen \u7a7a\u95f4\u95ee\u9898\u5c06\u4e0d\u590d\u5b58\u5728\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u7684\u7c7b\u7684\u5143\u6570\u636e\u5206\u914d\u53ea\u53d7\u672c\u5730\u5185\u5b58\u5927\u5c0f\u7684\u9650\u5236\uff0c\u4e5f\u5c31\u662f\u8bf4\u672c\u5730\u5185\u5b58\u5269\u4f59\u591a\u5c11\uff0c\u7406\u8bba\u4e0aMetaspace\u5c31\u53ef\u4ee5\u6709\u591a\u5927\uff08\u8c8c\u4f3c\u5bb9\u91cf\u8fd8\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7684\u865a\u62df\u5185\u5b58\u6709\u5173\uff1f\u8fd9\u91cc\u4e0d\u592a\u6e05\u695a\uff09\uff0c\u8fd9\u89e3\u51b3\u4e86\u7a7a\u95f4\u4e0d\u8db3\u7684\u95ee\u9898\u3002\u4e0d\u8fc7\uff0c\u8ba9Metaspace\u53d8\u5f97\u65e0\u9650\u5927\u663e\u7136\u662f\u4e0d\u73b0\u5b9e\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u8981\u9650\u5236Metaspace\u7684\u5927\u5c0f\uff1a\u4f7f\u7528-XX:MaxMetaspaceSize\u53c2\u6570\u6765\u6307\u5b9aMetaspace\u533a\u57df\u7684\u5927\u5c0f\u3002JVM\u9ed8\u8ba4\u5728\u8fd0\u884c\u65f6\u6839\u636e\u9700\u8981\u52a8\u6001\u5730\u8bbe\u7f6eMaxMetaspaceSize\u7684\u5927\u5c0f\u3002\n")),(0,r.kt)("h2",{id:"122-\u914d\u7f6e\u65b9\u5f0f"},"12.2. \u914d\u7f6e\u65b9\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"-XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=128m -Xms1024m -Xmx1024m -Xmn256m -Xss256k -XX:SurvivorRatio=8 -XX:+UseConcMarkSweepGC\n\n1. idea VM options\n1. java -jar -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=128m -Xms1024m -Xmx1024m -Xmn256m -Xss256k -XX:SurvivorRatio=8 -XX:+UseConcMarkSweepGC newframe-1.0.0.jar\n\n")))}s.isMDXComponent=!0}}]);