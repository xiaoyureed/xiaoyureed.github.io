"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1662],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return d}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),g=c(n),d=o,h=g["".concat(s,".").concat(d)]||g[d]||u[d]||a;return n?r.createElement(h,i(i({ref:t},l),{},{components:n})):r.createElement(h,i({ref:t},l))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=g;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},50413:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return p},metadata:function(){return c},toc:function(){return u}});var r=n(83117),o=n(80102),a=(n(67294),n(3905)),i=["components"],p={title:"Package Spring Boot & React App Together",date:"2022-7-3",tags:["spring","react"],authors:"me",keywords:["spring","react"]},s=void 0,c={permalink:"/spring-boot-react-package-together",editUrl:"https://github.com/xiaoyureed/xiaoyureed.github.io/edit/main/blog/spring-boot-react-package-together.md",source:"@site/blog/spring-boot-react-package-together.md",title:"Package Spring Boot & React App Together",description:"This article I will try to package a react app into Spring boot, so that they can share the same port, and make sure that the react static content can be served inside the spring boot app.",date:"2022-07-03T00:00:00.000Z",formattedDate:"2022\u5e747\u67083\u65e5",tags:[{label:"spring",permalink:"/tags/spring"},{label:"react",permalink:"/tags/react"}],readingTime:1.28,hasTruncateMarker:!0,authors:[{name:"Xiao Yu",title:"Unknown",url:"https://github.com/xiaoyureed",imageURL:"https://github.com/xiaoyureed.png",key:"me"}],frontMatter:{title:"Package Spring Boot & React App Together",date:"2022-7-3",tags:["spring","react"],authors:"me",keywords:["spring","react"]},prevItem:{title:"BT torrent \u534f\u8bae\u4ee5\u53ca\u5c1d\u8bd5\u5199\u4e00\u4e2a\u4e0b\u8f7d\u5de5\u5177",permalink:"/2022/11/10/bt-torrent-download"},nextItem:{title:"Web \u5f00\u53d1\u6a21\u5f0f\u7684\u8fdb\u5316",permalink:"/2022/06/11/web-dev-history"}},l={authorsImageUrls:[void 0]},u=[{value:"create the basic structure",id:"create-the-basic-structure",level:2},{value:"perform the integration process manually",id:"perform-the-integration-process-manually",level:2},{value:"integrate with maven plugins",id:"integrate-with-maven-plugins",level:2},{value:"reference materials",id:"reference-materials",level:2}],g={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This article I will try to package a react app into Spring boot, so that they can share the same port, and make sure that the react static content can be served inside the spring boot app."),(0,a.kt)("p",null,"Here I'm gonna take a next.js app for example."),(0,a.kt)("h2",{id:"create-the-basic-structure"},"create the basic structure"),(0,a.kt)("p",null,"As regards of spring boot app, please refer to ",(0,a.kt)("a",{parentName:"p",href:"https://start.spring.io"},"https://start.spring.io")),(0,a.kt)("p",null,"For next.js app, check the steps below:"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},'Usually I name the next.js app with "frontend"')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"npx create-next-app@latest --ts\n# or\nyarn create next-app --ts\n# or\npnpm create next-app\n\n# the static content will be generated in /out folder\nyarn build\n")),(0,a.kt)("p",null,"change the next.config.js"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const nextConfig = {\n  images: {\n    unoptimized: true,\n  },\n  output: 'export',\n  reactStrictMode: true,\n}\n\nmodule.exports = nextConfig\n")),(0,a.kt)("h2",{id:"perform-the-integration-process-manually"},"perform the integration process manually"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'Step -1 : Edit package.json -> add "export":" next export" in the scripts property\n\n    This measure is just form normal react app, if come up with next.js app, please refer to above\n\nStep - 2: The above step will build a folder named "out". Copy the contents of out folder. Paste it in the src -> main -> resources -> static folder.\n\nStep -3: Now build the spring boot jar/war, then run it. It will serve the contents inside the static folder.\n')),(0,a.kt)("h2",{id:"integrate-with-maven-plugins"},"integrate with maven plugins"),(0,a.kt)("p",null,"By using plugin ",(0,a.kt)("inlineCode",{parentName:"p"},"frontend-maven-plugin")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"maven-resources-plugin")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"<plugin>\n    <groupId>com.github.eirslett</groupId>\n    <artifactId>frontend-maven-plugin</artifactId>\n    <version>1.11.3</version>\n    <executions>\n      \x3c!-- check if nodejs/npm installed --\x3e\n        <execution>\n            <id>install node and npm</id>\n            <goals>\n                <goal>install-node-and-npm</goal>\n            </goals>\n            \x3c!-- optional, the default value is like this --\x3e\n            <phase>generate-resources</phase>\n        </execution>\n        \x3c!-- clear node_modules and package-lock.json --\x3e\n        <execution>\n            <id>npm run clean</id>\n            <goals>\n                <goal>npm</goal>\n            </goals>\n            <phase>generate-resources</phase>\n            <configuration>\n                <arguments>run clean</arguments>\n            </configuration>\n        </execution>\n        \x3c!-- install dependencies --\x3e\n        <execution>\n            <id>npm install</id>\n            <goals>\n                <goal>npm</goal>\n            </goals>\n            <phase>generate-resources</phase>\n            <configuration>\n                <arguments>install --registry=https://registry.npm.taobao.org</arguments>\n            </configuration>\n        </execution>\n        <execution>\n            <id>npm run build</id>\n            <goals>\n                <goal>npm</goal>\n            </goals>\n            <phase>generate-resources</phase>\n            <configuration>\n                <arguments>run build</arguments>\n            </configuration>\n        </execution>\n    </executions>\n    <configuration>\n        <workingDirectory>${project.baseDir}/frontend</workingDirectory>\n        <installDirectory>${project.build.directory}</installDirectory>\n        <nodeVersion>v18.14.0</nodeVersion>\n        \x3c!-- optional, just for projects in china main land --\x3e\n        \x3c!-- <downloadRoot>http://npm.taobao.org/mirrors/node/</downloadRoot> --\x3e\n    </configuration>\n</plugin>\n\n<plugin>\n                <artifactId>maven-resources-plugin</artifactId>\n                <version>3.2.0</version>\n                <executions>\n                    <execution>\n                        <id>copy-resources</id>\n                        <phase>generate-resources</phase>\n                        <goals>\n                            <goal>copy-resources</goal>\n                        </goals>\n                        <configuration>\n                            <outputDirectory>${basedir}/target/classes/static</outputDirectory>\n              \x3c!-- or --\x3e\n              \x3c!-- <outputDirectory>${project.build.outputDirectory}/static</outputDirectory> --\x3e\n                            <resources>\n                                <resource>\n                                    <directory>${basedir}/frontend/out</directory>\n                                    <filtering>false</filtering>\n                                </resource>\n                            </resources>\n                        </configuration>\n                    </execution>\n                </executions>\n            </plugin>\n")),(0,a.kt)("h2",{id:"reference-materials"},"reference materials"),(0,a.kt)("p",null,"First of all, we have to create a spring boot app and a react app,"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.tisonkun.org/2022/10/22/springboot-nextjs/"},"https://www.tisonkun.org/2022/10/22/springboot-nextjs/")," ",(0,a.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/576234428"},"https://zhuanlan.zhihu.com/p/576234428")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.infoq.cn/article/pqahoudgplvp3re73ipt"},"https://www.infoq.cn/article/pqahoudgplvp3re73ipt")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7148737053927145502"},"https://juejin.cn/post/7148737053927145502")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://developer.aliyun.com/article/752405"},"https://developer.aliyun.com/article/752405")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.google.com/search?q=springboot+react+%E5%85%B1%E7%94%A8%E7%AB%AF%E5%8F%A3&oq=springboot+react+%E5%85%B1%E7%94%A8%E7%AB%AF%E5%8F%A3&aqs=chrome..69i57j69i64.10285j0j7&sourceid=chrome&ie=UTF-8"},"https://www.google.com/search?q=springboot+react+%E5%85%B1%E7%94%A8%E7%AB%AF%E5%8F%A3&oq=springboot+react+%E5%85%B1%E7%94%A8%E7%AB%AF%E5%8F%A3&aqs=chrome..69i57j69i64.10285j0j7&sourceid=chrome&ie=UTF-8")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.google.com/search?q=springboot+react+%E7%AB%AF%E5%8F%A3%E5%94%AF%E4%B8%80&newwindow=1&sxsrf=APwXEddFQUTH93KDHzgoK8gq1hoebWCR9Q%3A1682523015864&ei=h0NJZMK_NMDmkPIPq5OL-AQ&ved=0ahUKEwiCn7_V7sf-AhVAM0QIHavJAk8Q4dUDCA8&uact=5&oq=springboot+react+%E7%AB%AF%E5%8F%A3%E5%94%AF%E4%B8%80&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQAzIFCAAQogQyBQgAEKIEOggIABCiBBCwAzoECAAQHjoFCCEQoAFKBAhBGAFQ1AZY7D9glkJoAnAAeAKAAbUKiAGfN5IBDTItMS4wLjEuMi4zLjKYAQCgAQHIAQHAAQE&sclient=gws-wiz-serp"},"https://www.google.com/search?q=springboot+react+%E7%AB%AF%E5%8F%A3%E5%94%AF%E4%B8%80&newwindow=1&sxsrf=APwXEddFQUTH93KDHzgoK8gq1hoebWCR9Q%3A1682523015864&ei=h0NJZMK_NMDmkPIPq5OL-AQ&ved=0ahUKEwiCn7_V7sf-AhVAM0QIHavJAk8Q4dUDCA8&uact=5&oq=springboot+react+%E7%AB%AF%E5%8F%A3%E5%94%AF%E4%B8%80&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQAzIFCAAQogQyBQgAEKIEOggIABCiBBCwAzoECAAQHjoFCCEQoAFKBAhBGAFQ1AZY7D9glkJoAnAAeAKAAbUKiAGfN5IBDTItMS4wLjEuMi4zLjKYAQCgAQHIAQHAAQE&sclient=gws-wiz-serp")))}d.isMDXComponent=!0}}]);