<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-spring-note">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Spring | Xiaoyureed&#x27;s ç½‘ç»œ Wiki </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/en/docs/spring-note"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring | Xiaoyureed&#x27;s ç½‘ç»œ Wiki "><meta data-rh="true" name="description" content="referencesï¼š 1, 2, 3"><meta data-rh="true" property="og:description" content="referencesï¼š 1, 2, 3"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/en/docs/spring-note"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/spring-note" hreflang="en"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/spring-note" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/spring-note" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  Atom Feed"><link rel="stylesheet" href="/en/assets/css/styles.c6a654bf.css">
<link rel="preload" href="/en/assets/js/runtime~main.b94328d8.js" as="script">
<link rel="preload" href="/en/assets/js/main.fc98d8e0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Xiaoyureed</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/en/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/FreeMarker-note">FreeMarker Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/SpringBoot-note">Spring Boot å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/agile-development-user-story-scrum">æ•æ·å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/android">Android å¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/autohotkey">Autohotkey è„šæœ¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/blockchain">blockchainåŒºå—é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/c-sharp-and-dot-net">C# &amp; .NET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cloud-native-platform">äº‘æœåŠ¡å¹³å°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cpp">CPP and C å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/css-pre-processor">å‡ ç§CSSé¢„å¤„ç†å™¨æ¯”è¾ƒé€‰å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/design-pattern-note">Design Pattern ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/dev-resources">å¼€å‘è€…èµ„æº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/devops">DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/distributed-system">Distributed System åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/effective-java-reading-note">Effective Java é˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/elk-elastic-log">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/english-note">è‹±è¯­å­¦ä¹ ğŸ”¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/extjs-note">Extjs ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/flutter">flutter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/games-development-introduce">æ¸¸æˆå¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/git-note">Git å¤‡å¿˜ ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/github-starts">Github æ˜Ÿæ ‡â­ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/golang-note">Golang ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gps-gis-tracing">åŸºäºåœ°ç†ä½ç½®å¼€å‘æŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gradle">gradle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/greasy-monkey">æ²¹çŒ´æ’ä»¶&amp;ç¼–å†™è„šæœ¬ğŸ’</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/groovy-note">groovy note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/health">Health å…³çˆ±ç¨‹åºå‘˜å¥åº·ğŸ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/html-note">HTML å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/idea-note">InteliJ idea tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/interview-system-design">ç»å…¸çš„ç³»ç»Ÿè®¾è®¡æ€è·¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/iot">Iot ç‰©è”ç½‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-concurrent">Java ConcurrentğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-memory-model-jmm-jvm">JMM and GCğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-note">Java Core ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/jquery-note">JQuery notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/js-tutorial">JavaScript tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kotlin">kotlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kubernetes-k8s">kubernetes-k8s â˜ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/linux-note">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mac">Mac å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/machine-learning-ml">machine-learning-ml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/maven-note">Maven NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/message-queue">Message QueueğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/money">Investment Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mongodb-note">MongoDB NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/monitor-system-grafana-prometheus-influxdb-hbase">monitor-system-grafana-prometheusç›‘æ§ğŸ–¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mvc-mvvm">MVC to MVVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/netty-note">netty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nlp-natural-language-processing">nlp-natural-language-processingğŸ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nodejs-yarn-npm">Nodejs, Yarn, Npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/oracle">Oracle å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-big-data-introduce">å¤§æ•°æ®å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-cache">Cache ç¼“å­˜ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-computational-ad">è®¡ç®—å¹¿å‘Š Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-crawler-spider">ç½‘ç»œçˆ¬è™« Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-db-design-note">å…³ç³»å‹æ•°æ®åº“è¡¨è®¾è®¡ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-desktop-develop">æ¡Œé¢åº”ç”¨å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-http">HTTP protocol Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-reactive-programming">å“åº”å¼ç¼–ç¨‹ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rest-api">RESTful api åŠ å…¶ä»–webServiceæŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rule-engine-note">è§„åˆ™å¼•æ“ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/php-note">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/play-framework">Playæ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/postgres-note">Postgres noteğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/process-workflow-bpm-engine">å·¥ä½œæµå¼•æ“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/protect-your-app-authentication-oauth2-jwt-https">Protect Your App å®‰å…¨ä¿æŠ¤è®¤è¯é‰´æƒğŸ”‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/python-note">PythonğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quant-money">é‡åŒ–äº¤æ˜“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quarkus">Quarkus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/react-note">ReactğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/real-time-communication-protocol">å®æ—¶é€šä¿¡ Real-time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/redis-note">RedisğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/regex">Regular Expression æ­£åˆ™ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/rust-note">Rust ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/saas-paas-iaas-as-a-service">SaaS Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/serverless">Serverless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/service-mesh">service mesh æœåŠ¡ç½‘æ ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/servlet">Servlet Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/shell-bash-note">shell-bashè„šæœ¬æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/en/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springcloud-note">Spring Cloud ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springmvc-note">Spring MVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/task-schedule-note">Task Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tcp-ip-note">TCP IP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tomcat-jetty-nginx">Tomcat Jetty Nginx ç­‰ web å®¹å™¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/vertx">Vertx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/video-creator">æ‹æ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webassembly">webassembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webpack-esbuild-vite-rollup">å‰ç«¯æ‰“åŒ…æ„å»ºå·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/windows-sub-system-on-linux">WSL ä½¿ç”¨</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spring</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring</h1></header><p>referencesï¼š <a href="https://docs.spring.io/spring/docs/5.1.2.RELEASE/spring-framework-reference/web.html#filters" target="_blank" rel="noopener noreferrer">1</a>, <a href="https://lfvepclr.gitbooks.io/spring-framework-5-doc-cn/content/32/32-1.html" target="_blank" rel="noopener noreferrer">2</a>, <a href="https://waylau.gitbooks.io/spring-framework-4-reference/" target="_blank" rel="noopener noreferrer">3</a></p><p><a href="https://github.com/huifer/spring-analysis" target="_blank" rel="noopener noreferrer">https://github.com/huifer/spring-analysis</a> æºç åˆ†æ</p><ul><li><a href="#1-%E6%8B%BE%E9%81%97">1. æ‹¾é—</a><ul><li><a href="#11-classpath%5C%E5%8C%BA%E5%88%AB">1.1. classpath<!-- -->*<!-- -->åŒºåˆ«</a></li><li><a href="#12-%E5%90%84%E7%A7%8D%E6%B3%A8%E8%A7%A3%E6%80%8E%E4%B9%88%E7%90%86%E8%A7%A3">1.2. å„ç§æ³¨è§£æ€ä¹ˆç†è§£</a></li></ul></li><li><a href="#2-%E8%AE%A4%E8%AF%86">2. è®¤è¯†</a><ul><li><a href="#21-core-%E9%83%A8%E5%88%86">2.1. core éƒ¨åˆ†</a></li><li><a href="#22-aop-%E9%83%A8%E5%88%86">2.2. aop éƒ¨åˆ†</a></li><li><a href="#23-data-access-%E9%83%A8%E5%88%86">2.3. data access éƒ¨åˆ†</a></li><li><a href="#24-web-%E9%83%A8%E5%88%86">2.4. web éƒ¨åˆ†</a></li><li><a href="#25-test-%E9%83%A8%E5%88%86context-support">2.5. test éƒ¨åˆ†&amp;context-support</a></li><li><a href="#26-spring4-%E6%96%B0%E5%A2%9E">2.6. spring4 æ–°å¢</a></li><li><a href="#27-%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84">2.7. ç»„ä»¶ç»“æ„</a><ul><li><a href="#271-ioc-container">2.7.1. ioc-container</a></li></ul></li></ul></li><li><a href="#3-api-%E4%BD%BF%E7%94%A8">3. api ä½¿ç”¨</a></li><li><a href="#4-quickstart">4. quickstart</a></li><li><a href="#5-%E9%85%8D%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F">5. é…ç½®çš„æ–¹å¼</a><ul><li><a href="#51-%E5%9F%BA%E4%BA%8E-xml">5.1. åŸºäº xml</a><ul><li><a href="#511-xml-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9">5.1.1. xml ä¸­çš„é…ç½®é¡¹</a></li><li><a href="#512-%E5%87%A0%E7%A7%8D%E6%B3%A8%E5%85%A5-%E5%AE%9E%E4%BE%8B%E5%8C%96%E6%96%B9%E5%BC%8F">5.1.2. å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼</a><ul><li><a href="#5121-%E9%80%9A%E8%BF%87%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">5.1.2.1. é€šè¿‡æ„é€ å‡½æ•°</a><ul><li><a href="#51211-%E9%80%9A%E8%BF%87%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95">5.1.2.1.1. é€šè¿‡é™æ€å·¥å‚æ–¹æ³•</a></li><li><a href="#51212-%E9%80%9A%E8%BF%87%E5%AE%9E%E4%BE%8B%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95">5.1.2.1.2. é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•</a></li></ul></li><li><a href="#5122-%E9%80%9A%E8%BF%87-setter-%E6%B3%A8%E5%85%A5">5.1.2.2. é€šè¿‡ setter æ³¨å…¥</a></li><li><a href="#5123-%E9%80%9A%E8%BF%87-methodinvokingfactorybean-%E6%B3%A8%E5%85%A5%E6%96%B9%E6%B3%95%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC">5.1.2.3. é€šè¿‡ MethodInvokingFactoryBean æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼</a></li><li><a href="#5124-autowired-%E6%B3%A8%E5%85%A5">5.1.2.4. @Autowired æ³¨å…¥</a></li></ul></li><li><a href="#513-springel-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5%E8%A1%A8%E8%BE%BE%E5%BC%8F">5.1.3. springEL è¡¨è¾¾å¼,æ³¨å…¥è¡¨è¾¾å¼</a></li><li><a href="#514-%E9%9B%86%E5%90%88%E7%9A%84%E6%B3%A8%E5%85%A5">5.1.4. é›†åˆçš„æ³¨å…¥</a></li></ul></li><li><a href="#52-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3">5.2. åŸºäºæ³¨è§£</a></li><li><a href="#53-xml-%E5%92%8C%E6%B3%A8%E8%A7%A3%E6%B7%B7%E7%94%A8">5.3. xml å’Œæ³¨è§£æ··ç”¨</a></li></ul></li><li><a href="#6-junit-%E6%95%B4%E5%90%88">6. JUnit æ•´åˆ</a></li><li><a href="#7-ioc">7. IoC</a></li><li><a href="#8-aop">8. AOP</a><ul><li><a href="#81-aop-%E6%A6%82%E5%BF%B5">8.1. aop æ¦‚å¿µ</a></li><li><a href="#82-aop-%E8%81%94%E7%9B%9F%E8%A7%84%E8%8C%83">8.2. aop è”ç›Ÿè§„èŒƒ</a><ul><li><a href="#821-%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B">8.2.1. é€šçŸ¥ç±»å‹</a></li><li><a href="#822-joinpoint-%E8%BF%9E%E6%8E%A5%E7%82%B9">8.2.2. Joinpoint è¿æ¥ç‚¹</a></li></ul></li><li><a href="#83-%E4%B8%8D%E5%92%8C-spring-%E9%9B%86%E6%88%90%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">8.3. ä¸å’Œ spring é›†æˆå•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†</a><ul><li><a href="#831-%E9%80%9A%E8%BF%87-jdk-%E5%8A%A8%E6%80%81%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86">8.3.1. é€šè¿‡ jdk åŠ¨æ€ç”Ÿæˆä»£ç†</a></li><li><a href="#832-%E9%80%9A%E8%BF%87-cglib-%E5%8A%A8%E6%80%81%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86">8.3.2. é€šè¿‡ cglib åŠ¨æ€ç”Ÿæˆä»£ç†</a></li></ul></li><li><a href="#84-%E9%80%9A%E8%BF%87-proxyfactorybean-%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E5%8D%8A%E8%87%AA%E5%8A%A8">8.4. é€šè¿‡ ProxyFactoryBean ç”Ÿæˆä»£ç†åŠè‡ªåŠ¨</a></li><li><a href="#85-%E5%85%A8%E8%87%AA%E5%8A%A8%E5%AE%9E%E7%8E%B0">8.5. å…¨è‡ªåŠ¨å®ç°</a></li><li><a href="#86-%E4%BD%BF%E7%94%A8-aspectj-%E6%A1%86%E6%9E%B6%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E5%92%8C-spring-%E9%9B%86%E6%88%90">8.6. ä½¿ç”¨ AspectJ æ¡†æ¶ç”Ÿæˆä»£ç†å’Œ spring é›†æˆ</a><ul><li><a href="#861-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">8.6.1. å‡†å¤‡å·¥ä½œ</a></li><li><a href="#862-aspectj-%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B">8.6.2. AspectJ é€šçŸ¥ç±»å‹</a></li><li><a href="#863-aspectj-%E7%BC%96%E7%A8%8B%E5%9F%BA%E4%BA%8E-xml">8.6.3. AspectJ ç¼–ç¨‹,åŸºäº xml</a></li><li><a href="#864-aspectj-%E7%BC%96%E7%A8%8B%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3">8.6.4. AspectJ ç¼–ç¨‹,åŸºäºæ³¨è§£</a></li></ul></li></ul></li><li><a href="#9-jdbc">9. JDBC</a><ul><li><a href="#91-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0">9.1. æ•°æ®åº“è¿æ¥æ± </a><ul><li><a href="#911-c3p0">9.1.1. C3P0</a></li><li><a href="#912-dbcp">9.1.2. DBCP</a></li><li><a href="#913-druid">9.1.3. Druid</a></li><li><a href="#914-bonecp">9.1.4. BoneCP</a></li><li><a href="#915-hikaricp">9.1.5. HikariCP</a></li></ul></li><li><a href="#92-jdbctemplate">9.2. JdbcTemplate</a><ul><li><a href="#921-quickstart">9.2.1. quickstart</a></li><li><a href="#922-dao-%E5%AE%9E%E7%8E%B0%E7%B1%BB%E7%BB%A7%E6%89%BF-jdbcdaosupport-%E6%94%AF%E6%8C%81%E7%B1%BB">9.2.2. Dao å®ç°ç±»ç»§æ‰¿ JdbcDaoSupport æ”¯æŒç±»</a></li><li><a href="#923-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%94%BE%E5%85%A5-properties-%E6%96%87%E4%BB%B6">9.2.3. æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥ Properties æ–‡ä»¶</a></li></ul></li></ul></li><li><a href="#10-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86">10. äº‹åŠ¡ç®¡ç†</a><ul><li><a href="#101-%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">10.1. äº‹åŠ¡å®ç°åŸç†</a></li><li><a href="#102-transactiondefinition-%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD">10.2. TransactionDefinition äº‹åŠ¡ä¼ æ’­</a></li><li><a href="#103-%E4%BA%8B%E5%8A%A1%E7%9B%B8%E5%85%B3-api">10.3. äº‹åŠ¡ç›¸å…³ api</a><ul><li><a href="#1031-platformtransactionmanager">10.3.1. PlatformTransactionManager</a></li><li><a href="#1032-transactionstatus">10.3.2. TransactionStatus</a></li><li><a href="#1033-%E4%BD%BF%E7%94%A8-jdbc-%E6%93%8D%E4%BD%9C%E4%BA%8B%E5%8A%A1">10.3.3. ä½¿ç”¨ jdbc æ“ä½œäº‹åŠ¡</a></li></ul></li><li><a href="#104-%E4%BA%8B%E5%8A%A1%E7%9B%B8%E5%85%B3%E6%A1%88%E4%BE%8B-%E8%BD%AC%E8%B4%A6">10.4. äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦</a><ul><li><a href="#1041-%E5%87%86%E5%A4%87">10.4.1. å‡†å¤‡</a></li><li><a href="#1042-%E6%89%8B%E5%8A%A8%E5%BC%80%E5%8F%91%E4%BA%8B%E5%8A%A1">10.4.2. æ‰‹åŠ¨å¼€å‘äº‹åŠ¡</a></li><li><a href="#1043-%E5%8D%8A%E8%87%AA%E5%8A%A8%E4%BA%8B%E5%8A%A1%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86">10.4.3. åŠè‡ªåŠ¨äº‹åŠ¡ç”Ÿæˆä»£ç†</a></li><li><a href="#1044-%E5%85%A8%E8%87%AA%E5%8A%A8%E4%BA%8B%E5%8A%A1%E5%9F%BA%E4%BA%8E-xml">10.4.4. å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº xml</a></li><li><a href="#1045-%E5%85%A8%E8%87%AA%E5%8A%A8%E4%BA%8B%E5%8A%A1%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3">10.4.5. å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£</a></li></ul></li></ul></li><li><a href="#11-spring-web-%E5%BC%80%E5%8F%91">11. spring web å¼€å‘</a></li><li><a href="#12-%E5%87%A0%E7%A7%8D%E5%8A%A0%E8%BD%BD-xml-%E6%96%B9%E5%BC%8F">12. å‡ ç§åŠ è½½ xml æ–¹å¼</a></li><li><a href="#13-spring-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">13. spring ä¸­çš„è®¾è®¡æ¨¡å¼</a></li><li><a href="#14-spring-bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">14. spring bean ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#15-%E5%B8%B8%E7%94%A8%E7%9A%84-spring-bean-%E6%8B%93%E5%B1%95%E6%8E%A5%E5%8F%A3">15. å¸¸ç”¨çš„ spring bean æ‹“å±•æ¥å£</a><ul><li><a href="#151-beannameawareapplicationcontextaware-%E5%92%8C-beanfactoryaware">15.1. BeanNameAwareã€ApplicationContextAware å’Œ BeanFactoryAware</a></li><li><a href="#152-beanpostprocessor-%E6%8E%A5%E5%8F%A3">15.2. BeanPostProcessor æ¥å£</a></li><li><a href="#153-initialingbean-%E5%92%8C-disposablebean">15.3. InitialingBean å’Œ DisposableBean</a></li><li><a href="#154-factorybean-%E6%8E%A5%E5%8F%A3">15.4. FactoryBean æ¥å£</a><ul><li><a href="#1541-factorybean-%E8%A7%A3%E9%87%8A">15.4.1. FactoryBean è§£é‡Š</a></li><li><a href="#1542-factorybean-%E6%8E%A5%E5%8F%A3%E7%9A%84-api">15.4.2. FactoryBean æ¥å£çš„ api</a></li><li><a href="#1543-factorybean-%E7%AE%80%E5%8D%95%E7%9A%84%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">15.4.3. FactoryBean ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#1544-factorybean-%E5%9C%A8-mabatis-spring-%E9%9B%86%E6%88%90%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8">15.4.4. factoryBean åœ¨ mabatis-spring é›†æˆä¸­çš„åº”ç”¨</a></li><li><a href="#1545-factorybean-%E6%A1%88%E4%BE%8B-dao-%E5%88%87%E6%8D%A2">15.4.5. factoryBean æ¡ˆä¾‹-dao åˆ‡æ¢</a></li></ul></li><li><a href="#155-beanfactory-%E6%8E%A5%E5%8F%A3">15.5. BeanFactory æ¥å£</a><ul><li><a href="#1551-beanfactory-%E8%A7%A3%E9%87%8A">15.5.1. BeanFactory è§£é‡Š</a></li><li><a href="#1552-api-%E6%9C%89%E5%93%AA%E4%BA%9B">15.5.2. api æœ‰å“ªäº›</a></li></ul></li><li><a href="#156-beanfactorypostprocessor">15.6. BeanFactoryPostProcessor</a></li><li><a href="#157-instantiationawarebeanpostprocessor">15.7. InstantiationAwareBeanPostProcessor</a></li></ul></li><li><a href="#16-%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C-bean">16. åŠ¨æ€æ³¨å†Œ bean</a><ul><li><a href="#161-%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E5%9C%BA%E6%99%AF">16.1. åŠ¨æ€æ³¨å†Œåœºæ™¯</a></li><li><a href="#162-%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C-api">16.2. åŠ¨æ€æ³¨å†Œ api</a></li><li><a href="#163-%E6%80%8E%E4%B9%88%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C">16.3. æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ</a><ul><li><a href="#1631-%E9%80%9A%E8%BF%87-beanfactorypostprocessor-%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C">16.3.1. é€šè¿‡ BeanFactoryPostProcessor å®ç°åŠ¨æ€æ³¨å†Œ</a></li><li><a href="#1632-%E9%80%9A%E8%BF%87-beandefinitionregistry-%E5%9C%A8%E6%99%AE%E9%80%9A-bean-%E4%B8%AD%E6%B3%A8%E5%86%8C">16.3.2. é€šè¿‡ BeanDefinitionRegistry åœ¨æ™®é€š bean ä¸­æ³¨å†Œ</a></li><li><a href="#1633-%E9%80%9A%E8%BF%87-importbeandefinitionregistrar">16.3.3. é€šè¿‡ ImportBeanDefinitionRegistrar</a></li></ul></li></ul></li><li><a href="#17-%E5%9B%BD%E9%99%85%E5%8C%96-and-%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C">17. å›½é™…åŒ– and å‚æ•°æ ¡éªŒ</a></li><li><a href="#18-spring5-%E6%96%B0%E7%89%B9%E6%80%A7">18. spring5 æ–°ç‰¹æ€§</a></li><li><a href="#19-guice">19. Guice</a></li></ul><h1>æ‹¾é—</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="classpathåŒºåˆ«">classpath<!-- -->*<!-- -->åŒºåˆ«<a href="#classpathåŒºåˆ«" class="hash-link" aria-label="Direct link to classpathåŒºåˆ«" title="Direct link to classpathåŒºåˆ«">â€‹</a></h2><p>classpath æ˜¯æŒ‡ WEB-INF æ–‡ä»¶å¤¹ä¸‹çš„ classes ç›®å½•</p><p>ç¼–è¯‘å, src ä¸‹çš„ä»£ç &amp;é…ç½®æ–‡ä»¶ éƒ½ä¼šè¢«å¤åˆ¶åˆ° <code>/WEB-INF/classes</code> æ–‡ä»¶å¤¹ä¸‹, éƒ¨ç½²åˆ°æœåŠ¡å™¨åçœŸæ­£ä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯ <code>WEB-INF/web.xml</code></p><p><code>classpath</code> ï¼šåªä¼šåˆ°ä½ çš„ class è·¯å¾„ä¸­æŸ¥æ‰¾æ‰¾æ–‡ä»¶; <code>classpath*</code>ï¼šä¸ä»…åŒ…å« class è·¯å¾„ï¼Œè¿˜åŒ…æ‹¬ jar æ–‡ä»¶ä¸­ï¼ˆclass è·¯å¾„ï¼‰è¿›è¡ŒæŸ¥æ‰¾ã€‚</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">å¦‚æœapplicationContext.xmlé…ç½®æ–‡ä»¶å­˜æ”¾åœ¨srcç›®å½•ä¸‹ï¼Œå°±å¥½æ¯”ä¸Šé¢çš„ä»£ç ç»“æ„ä¸­çš„å­˜æ”¾ä½ç½®ï¼Œé‚£ä¹ˆåœ¨web.xmlä¸­çš„é…ç½®å°±å¦‚ä¸‹æ‰€ç¤ºï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">contextConfigLocation</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">classpath:applicationContext.xml</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--classpathå‰ç¼€è¡¨ç¤º &quot;/WEB-INF/classes&quot;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å¦‚æœapplicationContext.xmlé…ç½®æ–‡ä»¶å­˜æ”¾åœ¨WEB-INFä¸‹é¢ï¼Œé‚£ä¹ˆåœ¨web.xmlä¸­çš„é…ç½®å°±å¦‚ä¸‹æ‰€ç¤ºï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">contextConfigLocation</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">WEB-INF/applicationContext*.xml</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å„ç§æ³¨è§£æ€ä¹ˆç†è§£">å„ç§æ³¨è§£æ€ä¹ˆç†è§£<a href="#å„ç§æ³¨è§£æ€ä¹ˆç†è§£" class="hash-link" aria-label="Direct link to å„ç§æ³¨è§£æ€ä¹ˆç†è§£" title="Direct link to å„ç§æ³¨è§£æ€ä¹ˆç†è§£">â€‹</a></h2><p>references: <a href="http://blog.leanote.com/post/sheng91666@163.com/spring%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%B1%87%E6%80%BB" target="_blank" rel="noopener noreferrer">å¸¸ç”¨æ³¨è§£åˆ†ç±»æ±‡æ€»</a></p><p><code>&lt;context:component-scan base-package=&quot;cn.test&quot;/&gt;</code> å¼€å¯æ³¨è§£æ‰«æ</p><p>è¦è®© JSR-250 çš„æ³¨é‡Šç”Ÿæ•ˆï¼Œé™¤äº†åœ¨ Bean ç±»ä¸­æ ‡æ³¨è¿™äº›æ³¨é‡Šå¤–ï¼Œè¿˜éœ€è¦åœ¨ Spring å®¹å™¨ä¸­æ³¨å†Œä¸€ä¸ªè´Ÿè´£å¤„ç†è¿™äº›æ³¨é‡Šçš„ <code>org.springframework.context.annotation.CommonAnnotationBeanPostProcessor</code> bean, æ— éœ€ bean id</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; Bean å£°æ˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; Beançš„åˆå§‹åŒ–å’Œé”€æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean           æ³¨è§£åœ¨æ–¹æ³•ä¸Š,å£°æ˜å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä¸ºä¸€ä¸ªbean; eg: @Bean(initMethod=&quot;init&quot;,destroyMethod=&quot;destory&quot;) æ³¨å†Œå‰æ‰§è¡Œinitæ–¹æ³•, é”€æ¯å‰æ‰§è¡Œdestroyæ–¹æ³•ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JSR-250è§„èŒƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PostConstruct  æ³¨è§£åœ¨æ–¹æ³•ä¸Š, åœ¨æ„é€ å‡½æ•°æ‰§è¡Œåæ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PreDestroy     æ³¨è§£åœ¨æ–¹æ³•ä¸Š, åœ¨Beané”€æ¯ä¹‹å‰æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DependsOn      æ³¨è§£åœ¨æ–¹æ³•ä¸Š, å®šä¹‰Beanåˆå§‹åŒ–åŠé”€æ¯æ—¶çš„é¡ºåº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; beanæ³¨å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    springåŸç”Ÿæä¾›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired   æŒ‰ç…§ç±»å‹è£…é…, æŒ‰åç§°è£…é…ï¼Œå¯ä»¥ç»“åˆ@Qualifier æ³¨è§£ä¸€èµ·ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JSR250æä¾›çš„æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Resource    é»˜è®¤æŒ‰åç§°è£…é…ï¼Œå½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ‰ä¼šæŒ‰ç±»å‹è£…é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JSR330</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Inject  æ ¹åŸºç±»å‹è£…é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; Javaé…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoConfiguration  æ ¹æ®æ·»åŠ çš„jarä¾èµ–çŒœæµ‹ä½ æƒ³å¦‚ä½•é…ç½®Springï¼Œå¦‚æœå‘ç°åº”ç”¨äº†ä½ ä¸æƒ³è¦çš„ç‰¹å®šè‡ªåŠ¨é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ç½®ç±»ï¼Œå¯ä»¥ä½¿ç”¨ @EnableAutoConfiguration æ³¨è§£çš„excludeå±æ€§æ¥ç¦ç”¨å®ƒä»¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        egï¼š@EnableAutoConfiguration(exclude = {MetricFilterAutoConfiguration.class, MetricRepositoryAutoConfiguration.class})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        @SpringBootApplication åŒ…å«å®ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration   å£°æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç›¸å½“äºä¸€ä¸ªSpringé…ç½®çš„xmlæ–‡ä»¶ã€‚ å’Œ@Bean æ­é…ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ç†è§£: æœ¬è´¨ä¸Šè¿˜æ˜¯ @Component; é€šå¸¸é€‰å®šä¸€ä¸ªä¸»configç±», é€šè¿‡ importå±æ€§å¯¼å…¥å…¶ä»–é…ç½®ç±» (ç”šè‡³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                å¯ä»¥æ˜¯xmlé…ç½®ç±», é€šè¿‡@ImportResource æ³¨è§£åŠ è½½XMLé…ç½®æ–‡ä»¶)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @SpringBootApplication åŒ…å«å®ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean            å£°æ˜å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä¸ºä¸€ä¸ªBean, ç”¨@Beanæ ‡æ³¨æ–¹æ³•ç­‰ä»·äºXMLä¸­é…ç½®bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ComponentScan   è‡ªåŠ¨æ‰«æåŒ…åä¸‹æ‰€æœ‰ä½¿ç”¨@Serviceã€@Compentã€@Repositoryã€@Controller çš„ç±»ï¼ˆä¸»@configuration ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                éœ€è¦åœ¨rootç›®å½•ä¸‹ï¼‰ï¼Œå¹¶æ³¨å†Œä¸ºBean, ä¸€èˆ¬åœ¨ä¸»@configuration ç±»ä¸Šä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    é€šè¿‡@autowired è‡ªåŠ¨æ³¨å…¥ï¼› @springbootapplicationåŒ…å«å®ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Lazy(true)      è¡¨ç¤ºå»¶è¿Ÿåˆå§‹åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Primary         è‡ªåŠ¨è£…é…æ—¶å½“å‡ºç°å¤šä¸ªBeanå€™é€‰è€…æ—¶ï¼Œè¢«æ³¨è§£ä¸º@Primaryçš„Beanå°†ä½œä¸ºé¦–é€‰è€…ï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Scope           æè¿°çš„æ˜¯Springå®¹å™¨å¦‚ä½•æ–°å»ºBeançš„å®ä¾‹çš„ã€‚å®ä¾‹ï¼šScope(&quot;Prototype&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Order           è°ƒæ•´é…ç½®ç±»åŠ è½½é¡ºåºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import          å¼•å…¥å¦å¤–çš„@configurationç±»,  @Import @ImportResourceéƒ½éœ€è¦é…åˆ@Configurationä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ImportResource  ç”¨æ¥å¼•å…¥å¤–ç½®çš„é…ç½®æ–‡ä»¶,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                eg: @ImportResource({&quot;classpath:datasource.xml&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PropertySource  springbooté»˜è®¤åªä¼šåŠ è½½application.propertiesä¸­çš„å±æ€§, @PropertySourceç”¨äºåŠ è½½å¦å¤–çš„å±æ€§é…ç½®æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                eg: @PropertySource(value = {&quot;classpath:person.properties&quot;}),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ä¸€èˆ¬å’Œ@ConfigurationProperties(prefix = &quot;person&quot;)ä¸€èµ·ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Value           æ³¨è§£åœ¨å˜é‡ä¸Š, è°ƒç”¨èµ„æºï¼ˆæ™®é€šæ–‡ä»¶ï¼Œç½‘å€ï¼Œé…ç½®æ–‡ä»¶ï¼Œç³»ç»Ÿç¯å¢ƒå˜é‡ç­‰ï¼‰,å’Œ @component åˆç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                egï¼š @Value(&quot;${com.neo.title}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Aspect         æ³¨è§£åœ¨ç±»ä¸Š, å£°æ˜æ˜¯ä¸€ä¸ªåˆ‡é¢ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@After          æ³¨è§£åœ¨æ–¹æ³•ä¸Š, å£°æ˜å»ºè¨€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Before         æ³¨è§£åœ¨æ–¹æ³•ä¸Š, å£°æ˜å»ºè¨€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Around         æ³¨è§£åœ¨æ–¹æ³•ä¸Š, å£°æ˜å»ºè¨€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PointCut       æ³¨è§£åœ¨æ–¹æ³•ä¸Š, å®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œå£°æ˜åˆ‡ç‚¹ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAspectJAutoProxy      ä½œç”¨åœ¨é…ç½®ç±»ä¸Š, å¼€å¯å¯¹AspectJè‡ªåŠ¨ä»£ç†çš„æ”¯æŒã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; Spring EL å’Œ èµ„æºè°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PropertySource  è§â†‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnbaleConfigurationProperties   å¼€å¯å¯¹@ConfigurationProperties æ³¨è§£é…ç½®Beançš„æ”¯æŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                eg: @EnableConfigurationProperties({LiquibaseProperties.class, ApplicationProperties.class})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties         æ³¨è§£åœ¨ç±»ä¸Š, æ˜ å°„é…ç½®æ–‡ä»¶ï¼ˆæ”¯æŒ ymlï¼‰åˆ°JavaBean egï¼š@ConfigurationProperties(prefix=&quot;myProps&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        è¿˜å¯ä»¥åœ¨@Beanæ–¹æ³•ä¸Šä½¿ç”¨ï¼Œ ä½œç”¨ç±»ä¼¼æ³¨è§£åœ¨ç±»ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                å¦å¤–ï¼Œ å½“ä¸€ä¸ª @ConfigurationProperties bean åƒå¦‚ä¸Šè¿™æ ·æ³¨å†Œï¼Œè¿™ä¸ªbeanå°±æœ‰äº†ä¸€ä¸ªåå­—ï¼Œè§„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                èŒƒæ˜¯è¿™æ ·ï¼š`&lt;prefix&gt;-&lt;fqn&gt;`, å³ï¼šå‰ç¼€-å…¨é™å®šåï¼Œå¦‚ : myProps-com.xy.PropertiesBean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; äº‹åŠ¡,ç¼“å­˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableTransactionManagement                    å¼€å¯æ³¨è§£å¼äº‹åŠ¡çš„æ”¯æŒ, å¯èƒ½éœ€è¦ proxyTargetClass = true, è¡¨ç¤ºåˆ›å»ºåŸºäºå­ç±»çš„ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transactional(transactionManager=&quot;xxx&quot; ...)     æ–¹æ³•orç±»ä¸Š, ä½¿ç”¨äº‹åŠ¡ç®¡ç† ;@TransactionConfiguration è¿‡æ—¶äº†, è¢« @Transactional ä»£æ›¿</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableCaching                                  å¼€å¯æ³¨è§£å¼çš„ç¼“å­˜æ”¯æŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; å¼‚æ­¥,å¤šçº¿ç¨‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAsync    æ³¨è§£åœ¨é…ç½®ç±»ä¸Š, å¼€å¯å¯¹å¼‚æ­¥ä»»åŠ¡çš„æ”¯æŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Async          åœ¨å®é™…æ‰§è¡Œçš„Beançš„æ–¹æ³•ä¸Š, å£°æ˜è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; å®šæ—¶ä»»åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EnableScheduling    æ³¨è§£åœ¨é…ç½®ç±»ä¸Š, å¼€å¯å¯¹è®¡åˆ’ä»»åŠ¡ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰çš„æ”¯æŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Scheduled           å®é™…æ‰§è¡Œçš„æ–¹æ³•ä¸Š, åŒ…å«ï¼šcron ã€fixDelayã€fixRateç­‰ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    eg: @Scheduled ï¼ˆcron=&quot;0 25 11 ï¼Ÿ * *&quot;ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @Scheduled ï¼ˆfixedDelay=5000ï¼‰å»¶è¿Ÿ5ç§’æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @Scheduled ï¼ˆfixedRate=5000ï¼‰æ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; æ¡ä»¶æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Conditional         ç”¨åœ¨é…ç½®ç±»ä¸­, æ ¹æ®æ»¡è¶³æŸä¸€ä¸ªç‰¹å®šæ¡ä»¶åˆ›å»ºä¸€ä¸ªç‰¹å®šçš„Beanã€‚ï¼ˆSpring4æä¾›ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; WebMVC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EnableWebMvc        å¼€å¯web mvcçš„é…ç½®æ”¯æŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Controller          å£°æ˜ä¸€ä¸ªç±»ä¸º mvc é‡Œçš„ controller, Dispatcher Servletä¼šè‡ªåŠ¨æ‰«ææ³¨è§£äº†æ­¤æ³¨è§£çš„ç±»ï¼Œå¹¶å°†Webè¯·æ±‚æ˜ å°„åˆ°@RequestMappinçš„æ–¹æ³•ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestController      ç»„åˆæ³¨è§£ =@Controller+@ResponseBody, ç”¨æ¥åˆ›å»ºRESTç±»å‹çš„æ§åˆ¶å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RequestMapping      ç±»oræ–¹æ³•ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ResponseBody        ç±»oræ–¹æ³•oræ–¹æ³•è¿”å›å€¼ä¸Š; å°†è¿”å›ç±»å‹ç›´æ¥è¾“å…¥åˆ°HTTP response bodyä¸­ã€‚jsonæ ¼å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RequestBody         å‚æ•°ä¸Š; è®¾ç½®å‚æ•°åœ¨è¯·æ±‚ä½“å†…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestParam       å‚æ•°ä¸Š;å°†è¯·æ±‚çš„å‚æ•°ç»‘å®šåˆ°æ–¹æ³•ä¸­çš„å‚æ•°ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PathVariable        å‚æ•°ä¸Š, æ”¯æŒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼,èƒ½åœ¨è·¯å¾„æ¨¡æ¿ä¸­ä½¿ç”¨å ä½ç¬¦; æ¥å—è·¯å¾„å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">InitBinder          ç”¨æ¥è®¾ç½®WebDataBinderï¼ŒWebDataBinderç”¨æ¥è‡ªåŠ¨ç»‘å®šå‰å°è¯·æ±‚å‚æ•°åˆ°Modelä¸­ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ModelAttribute      æ–¹æ³•oræ–¹æ³•å‚æ•°;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ControllerAdvice    ç±»ä¸Š; å°†å¯¹äºæ§åˆ¶å™¨çš„å…¨å±€ä»£ç æ”¾åœ¨åŒä¸€ä¸ªä½ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExceptionHandler    æ–¹æ³•ä¸Š; å…¨å±€å¤„ç†æ§åˆ¶å™¨é‡Œçš„å¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; test æµ‹è¯•ç›¸å…³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)  å¯åŠ¨ Spring å¯¹æµ‹è¯•ç±»çš„æ”¯æŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration                    æ³¨é‡Šæ ‡ç­¾æ¥æŒ‡å®š Spring é…ç½®æ–‡ä»¶æˆ–è€…é…ç½®ç±»çš„ä½ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Rollback(value=false)                  äº‹åŠ¡å›æ»š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>è®¤è¯†</h1><p>spring çš„ä½“ç³»ç»“æ„</p><p>å…ˆçœ‹çœ‹ spring3 çš„:</p><p>spring4: (å»æ‰äº† spring3 çš„ strutsï¼Œæ·»åŠ äº† messaging å’Œ websocketï¼Œå…¶ä»–æ¨¡å—ä¿æŒä¸å˜)</p><p>è‡³äº spring5 çš„æ–°ç‰¹æ€§, å‚è§: <a href="https://www.ibm.com/developerworks/cn/java/j-whats-new-in-spring-framework-5-theedom/index.html" target="_blank" rel="noopener noreferrer">https://www.ibm.com/developerworks/cn/java/j-whats-new-in-spring-framework-5-theedom/index.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-éƒ¨åˆ†">core éƒ¨åˆ†<a href="#core-éƒ¨åˆ†" class="hash-link" aria-label="Direct link to core éƒ¨åˆ†" title="Direct link to core éƒ¨åˆ†">â€‹</a></h2><ul><li><p>å››ä¸ªæ ¸å¿ƒ jar</p><ul><li><p>Spring core</p><p>è¿™ä¸ª jar æ–‡ä»¶åŒ…å« Spring æ¡†æ¶åŸºæœ¬çš„æ ¸å¿ƒå·¥å…·ç±»ã€‚Spring å…¶å®ƒç»„ä»¶è¦éƒ½è¦ä½¿ç”¨åˆ°è¿™ä¸ªåŒ…é‡Œçš„ç±»ï¼Œæ˜¯å…¶å®ƒç»„ä»¶çš„åŸºæœ¬æ ¸å¿ƒ</p><blockquote><p>Spring core çš„è¿è¡Œä¾èµ– Commons Logging åŒ…</p></blockquote></li><li><p>Spring Beans</p><p>è¿™ä¸ª jar æ–‡ä»¶æ˜¯æ‰€æœ‰åº”ç”¨éƒ½è¦ç”¨åˆ°çš„ï¼Œå®ƒåŒ…å«è®¿é—®é…ç½®æ–‡ä»¶ã€åˆ›å»ºå’Œç®¡ç† bean ä»¥åŠè¿›è¡Œ IOC/DI (æ§åˆ¶åè½¬/ä¾èµ–æ³¨å…¥)æ“ä½œç›¸å…³çš„æ‰€æœ‰ç±»</p><blockquote><p>å¦‚æœåªéœ€åŸºæœ¬çš„ IOC/DI æ”¯æŒï¼Œå¼•å…¥ spring-core.jar åŠ spring-beans.jar æ–‡ä»¶å°±å¯ä»¥äº†ã€‚
å¦‚æœæ˜¯ maven å·¥ç¨‹, ä»…ä»…éœ€è¦ Spring Context å³å¯</p></blockquote></li><li><p>Spring AOP</p><p>è¿™ä¸ª jar æ–‡ä»¶åŒ…å«åœ¨åº”ç”¨ä¸­ä½¿ç”¨ Spring çš„ AOP ç‰¹æ€§æ—¶æ‰€éœ€çš„ç±»å’Œæºç çº§å…ƒæ•°æ®æ”¯æŒã€‚ä½¿ç”¨åŸºäº AOP çš„ Spring ç‰¹æ€§ï¼Œå¦‚å£°æ˜å‹äº‹åŠ¡ç®¡ç†ï¼ˆDeclarative Transaction Managementï¼‰ï¼Œä¹Ÿè¦åœ¨åº”ç”¨é‡ŒåŒ…å«è¿™ä¸ª jar åŒ…</p></li><li><p>Spring Context</p><p>è¿™ä¸ª jar æ–‡ä»¶ä¸º Spring æ ¸å¿ƒæä¾›äº†å¤§é‡æ‰©å±•ã€‚å¯ä»¥æ‰¾åˆ°ä½¿ç”¨ Spring ApplicationContext ç‰¹æ€§æ—¶æ‰€éœ€çš„å…¨éƒ¨ç±»ï¼ŒJDNI æ‰€éœ€çš„å…¨éƒ¨ç±»ï¼Œinstrumentation ç»„ä»¶ä»¥åŠæ ¡éªŒ Validation æ–¹é¢çš„ç›¸å…³ç±»ã€‚</p><blockquote><p>æ³¨:
spring-context-support: context æ‹“å±•åŒ…, åŒ…å«æ”¯æŒ mvc ç›¸å…³, ç¼“å­˜ Cacheï¼ˆehcacheï¼‰ã€JCAã€JMXã€ é‚®ä»¶æœåŠ¡ï¼ˆJava Mailã€COS Mailï¼‰ã€ä»»åŠ¡è®¡åˆ’ Schedulingï¼ˆTimerã€Quartzï¼‰æ–¹é¢çš„ç±»</p></blockquote></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aop-éƒ¨åˆ†">aop éƒ¨åˆ†<a href="#aop-éƒ¨åˆ†" class="hash-link" aria-label="Direct link to aop éƒ¨åˆ†" title="Direct link to aop éƒ¨åˆ†">â€‹</a></h2><ul><li><p>spring-aopï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹</p></li><li><p>spring-aspectsï¼šé›†æˆ AspectJ</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-access-éƒ¨åˆ†">data access éƒ¨åˆ†<a href="#data-access-éƒ¨åˆ†" class="hash-link" aria-label="Direct link to data access éƒ¨åˆ†" title="Direct link to data access éƒ¨åˆ†">â€‹</a></h2><ul><li><p>spring-jdbcï¼šjdbc çš„æ”¯æŒ</p></li><li><p>spring-txï¼šäº‹åŠ¡æ§åˆ¶</p></li><li><p>spring-ormï¼šå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œé›†æˆ orm æ¡†æ¶</p></li><li><p>spring-oxmï¼šå¯¹è±¡ xml æ˜ å°„</p></li><li><p>spring-jmsï¼šjava æ¶ˆæ¯æœåŠ¡</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="web-éƒ¨åˆ†">web éƒ¨åˆ†<a href="#web-éƒ¨åˆ†" class="hash-link" aria-label="Direct link to web éƒ¨åˆ†" title="Direct link to web éƒ¨åˆ†">â€‹</a></h2><ul><li><p>spring-webï¼šåŸºç¡€ web åŠŸèƒ½ï¼Œå¦‚æ–‡ä»¶ä¸Šä¼ </p></li><li><p>spring-webmvcï¼šmvc å®ç°</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-éƒ¨åˆ†context-support">test éƒ¨åˆ†&amp;context-support<a href="#test-éƒ¨åˆ†context-support" class="hash-link" aria-label="Direct link to test éƒ¨åˆ†&amp;context-support" title="Direct link to test éƒ¨åˆ†&amp;context-support">â€‹</a></h2><ul><li><p>spring-testï¼šspring æµ‹è¯•ï¼Œæä¾› junit ä¸ mock æµ‹è¯•åŠŸèƒ½</p></li><li><p>spring-context-supportï¼šspring é¢å¤–æ”¯æŒåŒ…ï¼Œæ¯”å¦‚é‚®ä»¶æœåŠ¡ã€è§†å›¾è§£æç­‰</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring4-æ–°å¢">spring4 æ–°å¢<a href="#spring4-æ–°å¢" class="hash-link" aria-label="Direct link to spring4 æ–°å¢" title="Direct link to spring4 æ–°å¢">â€‹</a></h2><ul><li><p>spring-websocketï¼šä¸º web åº”ç”¨æä¾›çš„é«˜æ•ˆé€šä¿¡å·¥å…·</p></li><li><p>spring-messagingï¼šç”¨äºæ„å»ºåŸºäºæ¶ˆæ¯çš„åº”ç”¨ç¨‹åº</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»„ä»¶ç»“æ„">ç»„ä»¶ç»“æ„<a href="#ç»„ä»¶ç»“æ„" class="hash-link" aria-label="Direct link to ç»„ä»¶ç»“æ„" title="Direct link to ç»„ä»¶ç»“æ„">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ioc-container">ioc-container<a href="#ioc-container" class="hash-link" aria-label="Direct link to ioc-container" title="Direct link to ioc-container">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BeanFactory - é¡¶çº§æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ApplicationContext - ä»£è¡¨äº†  Spring IoC å®¹å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ClassPathXmlApplicationContext -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileSystemXmlApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FactoryBean - å®ç°è¿™ä¸ªæ¥å£çš„bean æ—¶ç‰¹æ®Šçš„ &quot;å·¥å‚bean&quot;, getObject() ç”¨æ¥è¿”å›ç”Ÿäº§çš„å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>api ä½¿ç”¨</h1><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class TestDI {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä¾èµ–æ³¨å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åŠ è½½å®Œé…ç½®æ–‡ä»¶å°±æ„é€ äº†BookServiceå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BookService bookService = applicationContext.getBean(&quot;bookServiceId&quot;,BookService.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bookService.addBook();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo02(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //beanFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Resource åœ¨ beanFactoryä¸­ç”¨äºæè¿°æ–‡ä»¶ä½ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // * ClassPathResource æè¿°ç±»è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // * FileSystemResource æè¿°æŒ‡å®šç›˜ç¬¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource(xmlPath));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è°ƒç”¨getBean()æ—¶ï¼Œæ‰æ„é€ BookServiceå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BookService bookService = beanFactory.getBean(&quot;bookServiceId&quot;,BookService.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bookService.addBook();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>quickstart</h1><p>å¼•å…¥ä¾èµ–</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- **************spring start******************************* --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-core</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${springframework.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-beans</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${springframework.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-context</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${springframework.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-context-support</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${springframework.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-web --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-web</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${springframework.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ****************spring end******************** --&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ›å»º applicationContext.xml (é»˜è®¤åç§°)</p><p>ä» Spring æ–‡æ¡£ copy é…ç½®æ–‡ä»¶çš„çº¦æŸ</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é…ç½®æ–‡ä»¶å†…å®¹</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * idå±æ€§å¯ä»¥è‡ªåŠ¨æç¤º(ä¸€èˆ¬ä½¿ç”¨idå±æ€§), nameå±æ€§åˆ™æ²¡æœ‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * idåªèƒ½æœ‰ä¸€ä¸ªå€¼, nameå¯ä»¥æœ‰å¤šä¸ª(é€—å·åˆ†éš”)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * æ ‡è¯†beançš„ä½œç”¨åŸŸ  &lt;bean id=&quot;&quot; class=&quot;&quot;, scope=&quot;&quot;&gt;&lt;/bean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»£ç </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;a_hello addUser&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestHello {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){     //è¿™æ˜¯åŸæ¥çš„å†™æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = new UserService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo02(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1 åŠ è½½é…ç½®æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/applicationContext.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2 ä»å®¹å™¨è·å¾—å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = (UserService) applicationContext.getBean(&quot;userServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æˆ–è€…è¿™æ ·å†™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     UserService userService = applicationContext.getBean(&quot;userServiceId&quot;, UserService.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>çœ‹ä¸€ä¸ª DI çš„ä¾‹å­</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!--beans.xml :--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        ä¾èµ–æ³¨å…¥ï¼šspringæä¾› &lt;property&gt; ç”¨äºé…ç½®setteræ–¹æ³•è¿›è¡Œæ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            æ ¼å¼ï¼š&lt;property name=&quot;&quot; ref=&quot;&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                name å½“å‰æ“ä½œå¯¹è±¡å±æ€§åï¼ˆå³é€šè¿‡setteræ–¹æ³•è·å¾—ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                ref éœ€è¦è®¾ç½®å¯¹è±¡çš„bean åç§°å¼•ç”¨ï¼ˆå³&lt;bean&gt;æ ‡ç­¾çš„idå€¼ï¼‰ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- spring åˆ›å»ºdao --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bookDaoId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.BookDaoImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- spring åˆ›å»ºservice ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * å•å®ä¾‹å¯ä»¥é€šè¿‡lazy-init=â€trueâ€ï¼Œåœ¨getBeanæ—¶è¿›è¡Œå®ä¾‹åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * å¯¹äºprototypeï¼Œåˆ™æ˜¯åœ¨getBeançš„æ—¶å€™è¢«å®ä¾‹åŒ–çš„ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * åœ¨beansé‡Œé¢default-lazy-init=â€trueâ€å¯¹æ‰€æœ‰beanè¿›è¡Œå»¶è¿Ÿå¤„ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * init-methodã€€åœ¨beanè¢«å®ä¾‹åŒ–ä¹‹åæ‰§è¡Œèµ„æºæ“ä½œç­‰æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * destroy-method åœ¨beané”€æ¯ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•(ä»€ä¹ˆæ—¶å€™è¢«é”€æ¯ï¼Ÿéšç€springå®¹å™¨è¢«å…³é—­æ—¶è¢«é”€æ¯ã€‚è°ƒç”¨springå®¹å™¨çš„closeæ–¹æ³•æ¥æ­£å¸¸å…³é—­ã€‚ä»¥å‰æ˜¯éšç€åº”ç”¨ç¨‹åºæ‰§è¡Œå®Œè€Œå…³é—­ã€‚)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * InitializingBeanæ¥å£ã€Disposableæ¥å£åº•å±‚ä½¿ç”¨ç±»å‹å¼ºè½¬.æ–¹æ³•å()è¿›è¡Œç›´æ¥æ–¹æ³•è°ƒç”¨ï¼Œinit-methodã€destory-methodåº•å±‚ä½¿ç”¨åå°„ï¼Œå‰è€…å’ŒSpringè€¦åˆç¨‹åº¦æ›´é«˜ä½†æ•ˆç‡é«˜ï¼Œåè€…è§£é™¤äº†å’ŒSpringä¹‹é—´çš„è€¦åˆä½†æ˜¯æ•ˆç‡ä½</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bookServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.BookServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lazy-init</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">init-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">init</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">destroy-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">destory</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ³¨å…¥å±æ€§å€¼, å¿…é¡»è¦æœ‰setter --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- &lt;property&gt; æ³¨å…¥ï¼ˆè®¾ç½®ï¼‰æ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * name ä½¿ç”¨å±æ€§å</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * value è®¾ç½®æ™®é€šæ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * ref å¼•ç”¨ç±»å‹ï¼ˆå¦ä¸€ä¸ªbean idå€¼ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bookDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bookDaoId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è¡¨ç¤ºBookServiceé‡Œé¢çš„bookDaoå±æ€§ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">name</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">123</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ä¸‹é¢æ˜¯å¦ä¸€ç§æ–¹å¼æ³¨å…¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        &lt;constructor-arg&gt; é…ç½®æ„é€ æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * name :å‚æ•°çš„åç§° ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                &lt;constructor-arg name=&quot;username&quot; value=&quot;jack&quot;&gt;&lt;/constructor-arg&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                &lt;constructor-arg name=&quot;age&quot; value=&quot;18&quot;&gt;&lt;/constructor-arg&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * index : å‚æ•°çš„ç´¢å¼•ï¼Œä»0å¼€å§‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * type : å‚æ•°ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            ## å¼€å‘ä¸­ä¸€èˆ¬indexå’Œtypeç»“åˆä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * value æ™®é€šæ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * ref å¼•ç”¨æ•°æ®ï¼ˆå¦ä¸€ä¸ªbean idå€¼ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- å¯¹åº”æ„é€ æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        public PersonServiceBean(String name, IDaoBean personDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            this.name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            this.personDao = personDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        } --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">index</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">æ„é€ æ³¨å…¥çš„name</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">index</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.persia.IDaoBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">personDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é›†åˆçš„æ³¨å…¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Setçš„æ³¨å…¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">sets</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">set</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">setsï¼šç¬¬ä¸€ä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">setsï¼šç¬¬äºŒä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">setsï¼šç¬¬ä¸‰ä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">set</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Listçš„æ³¨å…¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">lists</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">list</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">listsï¼šç¬¬ä¸€ä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">listsï¼šç¬¬äºŒä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">listsï¼šç¬¬ä¸‰ä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">list</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Propertiesçš„æ³¨å…¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">properties</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">props</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">props-key1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ï¼šç¬¬ä¸€ä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">props-key2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ï¼šç¬¬äºŒä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">props-key3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ï¼šç¬¬ä¸‰ä¸ªå€¼</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">props</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Mapçš„æ³¨å…¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maps</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">map</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">entry</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maps-key1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ï¼šç¬¬ä¸€ä¸ªå€¼</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">entry</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maps-key2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ï¼šç¬¬äºŒä¸ªå€¼</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">entry</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maps-key3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ï¼šç¬¬ä¸‰ä¸ªå€¼</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">map</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// BookDaoImpl &amp; BookDao</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface BookDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void save();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class BookDaoImpl implements BookDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void save() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;b_di  book save&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// BookService &amp; BookServiceImpl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface BookService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void addBook();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class BookServiceImpl implements BookService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public BookServiceImpl() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ä½ ç”Ÿäº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ä¹‹åç¼–ç¨‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private BookDao bookDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setBookDao(BookDao bookDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.bookDao = bookDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addBook() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bookDao.save();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ä¾èµ–æ³¨å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String xmlPath = &quot;config/applicationContext.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //åŠ è½½å®Œé…ç½®æ–‡ä»¶å°±æ„é€ äº†BookServiceå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BookService bookService = applicationContext.getBean(&quot;bookServiceId&quot;,BookService.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bookService.addBook();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>é…ç½®çš„æ–¹å¼</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºäº-xml">åŸºäº xml<a href="#åŸºäº-xml" class="hash-link" aria-label="Direct link to åŸºäº xml" title="Direct link to åŸºäº xml">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xml-ä¸­çš„é…ç½®é¡¹">xml ä¸­çš„é…ç½®é¡¹<a href="#xml-ä¸­çš„é…ç½®é¡¹" class="hash-link" aria-label="Direct link to xml ä¸­çš„é…ç½®é¡¹" title="Direct link to xml ä¸­çš„é…ç½®é¡¹">â€‹</a></h3><ul><li><p>id å±æ€§å¯ä»¥è‡ªåŠ¨æç¤º(ä¸€èˆ¬ä½¿ç”¨ id å±æ€§), name å±æ€§åˆ™æ²¡æœ‰</p></li><li><p>id åªèƒ½æœ‰ä¸€ä¸ªå€¼, name å¯ä»¥æœ‰å¤šä¸ª(é€—å·åˆ†éš”)</p></li><li><p>æ ‡è¯† bean çš„ä½œç”¨åŸŸ <code>&lt;bean scope=&quot;&quot;&gt;&lt;/bean&gt;</code></p><ul><li><p>singleton - æ•´ä¸ªå®¹å™¨ä¸­ï¼Œå°†åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œ å¯¹äºé‚£äº›æ— ä¼šè¯çŠ¶æ€çš„ Beanï¼ˆå¦‚è¾…åŠ©å·¥å…·ç±»ã€DAO ç»„ä»¶ã€ä¸šåŠ¡é€»è¾‘ç»„ä»¶ç­‰ï¼‰æ˜¯æœ€ç†æƒ³çš„é€‰æ‹©ã€‚</p></li><li><p>prototype - æ¯æ¬¡é€šè¿‡å®¹å™¨çš„ getBean æ–¹æ³•è·å–å®šä¹‰çš„ Bean æ—¶ï¼Œéƒ½å°†äº§ç”Ÿä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼Œ é€‚ç”¨äºé‚£äº›éœ€è¦ä¿æŒä¼šè¯çŠ¶æ€çš„ Bean å®ä¾‹</p></li><li><p>request - å¯¹äºæ¯æ¬¡ HTTP requestï¼Œå®šä¹‰çš„ Bean éƒ½å°†äº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹ï¼› åªåœ¨ web app ä¸­æœ‰æ•ˆ</p></li><li><p>session - å¯¹äºæ¯æ¬¡ HTTP Sessionï¼Œå®šä¹‰çš„ Bean éƒ½å°†äº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹ã€‚åŒæ ·åªåªåœ¨ web app ä¸­æœ‰æ•ˆ</p></li><li><p>globalsessionï¼šå­˜ç–‘ //todo</p></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼">å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼<a href="#å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼" class="hash-link" aria-label="Direct link to å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼" title="Direct link to å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼">â€‹</a></h3><p><a href="https://blog.csdn.net/a909301740/article/details/78379720" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/a909301740/article/details/78379720</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡æ„é€ å‡½æ•°">é€šè¿‡æ„é€ å‡½æ•°<a href="#é€šè¿‡æ„é€ å‡½æ•°" class="hash-link" aria-label="Direct link to é€šè¿‡æ„é€ å‡½æ•°" title="Direct link to é€šè¿‡æ„é€ å‡½æ•°">â€‹</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService implements IUserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private IUserDao userDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public UserService(IUserDao userDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.userDao = userDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void loginUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userDao.loginUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ³¨å†ŒuserService</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    å¤šä¸ª field æ³¨å…¥ é€šè¿‡ name å±æ€§æŒ‡å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.lyu.spring.service.impl.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDaoJdbc</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ³¨å†Œjdbcå®ç°çš„dao --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDaoJdbc</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.lyu.spring.dao.impl.UserDaoJdbc</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡é™æ€å·¥å‚æ–¹æ³•">é€šè¿‡é™æ€å·¥å‚æ–¹æ³•<a href="#é€šè¿‡é™æ€å·¥å‚æ–¹æ³•" class="hash-link" aria-label="Direct link to é€šè¿‡é™æ€å·¥å‚æ–¹æ³•" title="Direct link to é€šè¿‡é™æ€å·¥å‚æ–¹æ³•">â€‹</a></h5><p>å±äºæ„é€ å‡½æ•°æ³¨å…¥</p><p>ä½¿ç”¨åœºæ™¯: ä¸å…¶ä»–æ¡†æ¶æ•´åˆæ—¶ç”¨</p><p>ç±»ä¼¼å‚è€ƒ <a href="#%E7%89%B9%E6%AE%8A%E7%9A%84bean-FactoryBean">ç‰¹æ®Šçš„ bean-FactoryBean</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// PersonServiceï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PersonService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addPerson(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Personservice  addPerson&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// é™æ€å·¥å‚ï¼šé…ç½®åˆ° bean#class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyBeanFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•: æ–¹æ³•åé…ç½®åˆ° bean#factory-method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static PersonService createPerson(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new PersonService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestStatic {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PersonService personService = (PersonService) applicationContext.getBean(&quot;personServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        personService.addPerson();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>xml é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--  idè¡¨ç¤ºé™æ€å·¥å‚è¦ç”Ÿäº§çš„bean --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--  classè¡¨ç¤ºé™æ€å·¥å‚ç±» --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- factory-method è¡¨ç¤ºé™æ€å·¥å‚ç”Ÿäº§æœ¬beançš„é™æ€æ–¹æ³• --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">personServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.MyBeanFactory</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">factory-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">createPerson</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--test: static factory construct å·¥å‚æ–¹æ³•å¸¦æœ‰å‚æ•°--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bean3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">spring.BeanFactory</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">factory-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">createBean3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--factory method argsï¼Œ beanå¯ä»¥é€šè¿‡ ref æ³¨å…¥åˆ°æ–¹æ³•å‚æ•°ä¸­--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bean4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bean4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">str</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">haha</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•">é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•<a href="#é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•" class="hash-link" aria-label="Direct link to é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•" title="Direct link to é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•">â€‹</a></h5><p>å±äºæ„é€ å‡½æ•°æ³¨å…¥</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// studentServiceï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StudentService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addStudent(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;StudentService  addStudent&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ä¾‹å·¥å‚ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyBeanFactory2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * éé™æ€æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public StudentService createStudent(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new StudentService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ç›´æ¥è·å¾—studentServiceå®ä¾‹ï¼Œå®ä¾‹å·¥å‚çš„å®ä¾‹å¯¹è±¡springè‡ªåŠ¨åˆ›å»º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StudentService studentService = (StudentService) applicationContext.getBean(&quot;studentServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        studentService.addStudent();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®å·¥å‚å®ä¾‹ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myFactoryId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.MyBeanFactory2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½® studentServiceå®ä¾‹ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">studentServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">factory-bean</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myFactoryId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">factory-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">createStudent</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">instanceFac</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">spring.InstanceFactory</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bean3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">factory-bean</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">instanceFac</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">factory-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">createBean3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bean4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">bean4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">constructor-arg</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">str</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">hoho</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-setter-æ³¨å…¥">é€šè¿‡ setter æ³¨å…¥<a href="#é€šè¿‡-setter-æ³¨å…¥" class="hash-link" aria-label="Direct link to é€šè¿‡ setter æ³¨å…¥" title="Direct link to é€šè¿‡ setter æ³¨å…¥">â€‹</a></h4><p>(setter injection)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ³¨å†ŒuserService --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.lyu.spring.service.impl.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- å†™æ³•ä¸€ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- &lt;property name=&quot;UserDao&quot; ref=&quot;userDaoMyBatis&quot;&gt;&lt;/property&gt; --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- å†™æ³•äºŒ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDaoMyBatis</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ³¨å†Œmybatiså®ç°çš„dao --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDaoMyBatis</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.lyu.spring.dao.impl.UserDaoMyBatis</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šé¢è¿™ä¸¤ç§å†™æ³•éƒ½å¯ä»¥,spring ä¼šå°† name å€¼çš„æ¯ä¸ªå•è¯é¦–å­—æ¯è½¬æ¢æˆå¤§å†™ï¼Œç„¶åå†åœ¨å‰é¢æ‹¼æ¥ä¸Š&quot;set&quot;æ„æˆä¸€ä¸ªæ–¹æ³•å,ç„¶åå»å¯¹åº”çš„ç±»ä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•,<code>é€šè¿‡åå°„è°ƒç”¨</code>,å®ç°æ³¨å…¥</p><p>å¦‚æœé€šè¿‡ set æ–¹æ³•æ³¨å…¥å±æ€§ï¼Œé‚£ä¹ˆ spring ä¼šé€šè¿‡é»˜è®¤çš„ç©ºå‚æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœåœ¨ç±»ä¸­å†™äº†ä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œ<code>ä¸€å®šè¦æŠŠç©ºå‚æ•°çš„æ„é€ æ–¹æ³•å†™ä¸Š</code>ï¼Œå¦åˆ™ spring æ²¡æœ‰åŠæ³•å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¯¼è‡´æŠ¥é”™</p><p>xml é…ç½®æ–¹å¼ä¹‹å¤–, è¿˜æä¾›æ³¨è§£çš„æ–¹å¼, ä¹Ÿæ˜¯éœ€è¦ setter æ–¹æ³•;</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-methodinvokingfactorybean-æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼">é€šè¿‡ MethodInvokingFactoryBean æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼<a href="#é€šè¿‡-methodinvokingfactorybean-æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼" class="hash-link" aria-label="Direct link to é€šè¿‡ MethodInvokingFactoryBean æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼" title="Direct link to é€šè¿‡ MethodInvokingFactoryBean æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼">â€‹</a></h4><p>MethodInvokingFactoryBean å¯ä»¥æ³¨å†ŒæŸä¸ªæ–¹æ³•çš„è¿”å›å€¼åˆ° spring ä¸­, è¿™ä¸ªæ–¹æ³•å¯ä»¥æ˜¯å®ä¾‹æ–¹æ³•, ä¹Ÿå¯ä»¥æ˜¯é™æ€æ–¹æ³•;</p><p>å½“ç„¶ä¹Ÿå¯ä»¥å°±ä½¿ç”¨æ™®é€šçš„é™æ€å·¥å‚æ³¨å…¥ or å®ä¾‹å·¥å‚æ³¨å…¥ï¼Œ ä½†æ˜¯ä¸å¤Ÿçµæ´»</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.MessageSource;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import plm.common.exceptions.CheckException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç±»æ— éœ€æ ‡æ³¨ä¸º component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CheckUtil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static MessageSource resources;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ³¨å…¥åˆ°è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ä¸­äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ²¡æœ‰ä½¿ç”¨è¿”å›å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public static void setResources(MessageSource resources) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CheckUtil.resources = resources;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public static void check(boolean condition, String msgKey, Object... args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!condition) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fail(msgKey, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public static void notEmpty(String str, String msgKey, Object... args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (str == null || str.isEmpty()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fail(msgKey, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public static void notNull(Object obj, String msgKey, Object... args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (obj == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fail(msgKey, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static void fail(String msgKey, Object... args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw new CheckException(resources.getMessage(msgKey, args, UserUtil.getLocale()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>xml é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.beans.factory.config.MethodInvokingFactoryBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">staticMethod</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">plm.common.utils.CheckUtil.setResources</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è¿™é‡Œé…ç½®æ–¹æ³•å‚æ•° --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">arguments</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">messageSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- å›½é™…åŒ– --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">messageSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.context.support.ResourceBundleMessageSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">basenames</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">list</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">format</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">exceptions</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">windows</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">list</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ–è€…ä¸é€šè¿‡ xml é…ç½®ï¼Œ ä½¿ç”¨ä»£ç é…ç½®ï¼š</p><p>åœ¨ Configuration class ä¸­</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * inject messageSource into I18nUtils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public MethodInvokingFactoryBean methodInvokingFactoryBean() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MethodInvokingFactoryBean methodInvokingFactoryBean = new MethodInvokingFactoryBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    methodInvokingFactoryBean.setStaticMethod(&quot;io.github.xiaoyureed.core.util.I18nUtils.setMessageSource&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                // è¿™é‡Œè®¾ç½®ä½¿ç”¨å“ªä¸ªæ–¹æ³•æ³¨å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    methodInvokingFactoryBean.setArguments(this.messageSource());// åœ¨è¿™é‡Œè®¾ç½®æ³¨å…¥çš„å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return methodInvokingFactoryBean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="autowired-æ³¨å…¥">@Autowired æ³¨å…¥<a href="#autowired-æ³¨å…¥" class="hash-link" aria-label="Direct link to @Autowired æ³¨å…¥" title="Direct link to @Autowired æ³¨å…¥">â€‹</a></h4><p>åº•å±‚æ˜¯ä½¿ç”¨äº†åå°„, ä¸ä¾èµ–æ„é€ å‡½æ•°, ä¸ä¾èµ– setter</p><p>@Autowired æœ‰ä¸ªå±æ€§ä¸º requiredï¼Œå¯ä»¥é…ç½®ä¸º false (é»˜è®¤ true)ï¼Œå¦‚æœé…ç½®ä¸º false ä¹‹åï¼Œå½“æ²¡æœ‰æ‰¾åˆ°ç›¸åº” bean çš„æ—¶å€™ï¼Œç³»ç»Ÿä¸ä¼šæŠ›é”™</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Resourceé»˜è®¤æ˜¯æŒ‰ç…§åç§°æ¥è£…é…æ³¨å…¥çš„ï¼Œåªæœ‰å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ‰ä¼šæŒ‰ç…§ç±»å‹æ¥è£…é…æ³¨å…¥ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowiredé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹è£…é…æ³¨å…¥çš„, è‹¥åŒç±»å‹beanæœ‰å¤šä¸ªåˆ™æŒ‰ç…§åç§°æ³¨å…¥ï¼Œå¦‚æœæƒ³ç›´æ¥æŒ‰ç…§åç§°æ¥è½¬é…æ³¨å…¥ï¼Œåˆ™éœ€è¦ç»“åˆ@Qualifierä¸€èµ·ä½¿ç”¨ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Resourceæ³¨è§£æ˜¯åˆJ2EEæä¾›ï¼Œè€Œ@Autowiredæ˜¯ç”±Springæä¾›ï¼Œæ•…å‡å°‘ç³»ç»Ÿå¯¹springçš„ä¾èµ–å»ºè®®ä½¿ç”¨@Resourceçš„æ–¹å¼ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Resourceå’Œ@Autowiredéƒ½å¯ä»¥ä¹¦å†™æ ‡æ³¨åœ¨å­—æ®µæˆ–è€…è¯¥å­—æ®µçš„setteræ–¹æ³•ä¹‹ä¸Šã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Injectæ˜¯JSR330è§„èŒƒå®ç°çš„, æ ¹æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œå¦‚æœéœ€è¦æŒ‰åç§°è¿›è¡Œè£…é…ï¼Œåˆ™éœ€è¦é…åˆ@Named</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="springel-è¡¨è¾¾å¼æ³¨å…¥è¡¨è¾¾å¼">springEL è¡¨è¾¾å¼,æ³¨å…¥è¡¨è¾¾å¼<a href="#springel-è¡¨è¾¾å¼æ³¨å…¥è¡¨è¾¾å¼" class="hash-link" aria-label="Direct link to springEL è¡¨è¾¾å¼,æ³¨å…¥è¡¨è¾¾å¼" title="Direct link to springEL è¡¨è¾¾å¼,æ³¨å…¥è¡¨è¾¾å¼">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// å®ä½“ç±»Personï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Person {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name = &quot;jack&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Double pi; //java.lang.Mathç±»ä¸­çš„é™æ€å¸¸é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Address homeAddress;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    setters&amp;getters..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;Person [name=&quot; + name + &quot;, pi=&quot; + pi + &quot;, homeAddress=&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                + homeAddress + &quot;]&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Personä¸­çš„Addressç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Address {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String tel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    getters&amp;setters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;Address [addr=&quot; + addr + &quot;, tel=&quot; + tel + &quot;]&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è¡¨è¾¾å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * #{æ•°å­—} ã€#{&#x27;å­—ç¬¦ä¸²&#x27;} : å¸¸é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * #{beançš„idå€¼} : è·å¾—å¼•ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * #{å¯¹è±¡.å±æ€§}  ï¼šè·å¾—å±æ€§å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * #{å¯¹è±¡.æ–¹æ³•()}  ï¼š æ‰§è¡Œæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * #{å¯¹è±¡.æ–¹æ³•()?.æ–¹æ³•()} : æ‰§è¡Œæ–¹æ³•, é¿å…nullå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * #{T{ç±»}.æ–¹æ³•() | å±æ€§} ï¼šé™æ€èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">personId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.Person</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">name</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">#{personId.name.toUpperCase()}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">pi</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">#{T(java.lang.Math).PI}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">homeAddress</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">#{addressId}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">addressId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.Address</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é›†åˆçš„æ³¨å…¥">é›†åˆçš„æ³¨å…¥<a href="#é›†åˆçš„æ³¨å…¥" class="hash-link" aria-label="Direct link to é›†åˆçš„æ³¨å…¥" title="Direct link to é›†åˆçš„æ³¨å…¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// å®ä½“ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CollBean {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;String&gt; dataList;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String[] dataArray;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Set&lt;String&gt; dataSet;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, String&gt; dataMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Properties dataProps;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   getters&amp;setters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;CollBean [\ndataList=&quot; + dataList + &quot;, \ndataArray=&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                + Arrays.toString(dataArray) + &quot;, \ndataSet=&quot; + dataSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                + &quot;, \ndataMap=&quot; + dataMap + &quot;, \ndataProps=&quot; + dataProps + &quot;\n]&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestColl {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01() throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CollBean collBean = (CollBean) applicationContext.getBean(&quot;collBeanId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(collBean);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;property name=&quot;&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">* å¦‚æœè¦æ³¨å…¥æ•°æ®è¿›é›†åˆï¼Œä¸”è¯¥é›†åˆåªæœ‰ä¸€ä¸ªå€¼æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨&lt;property value=&quot;&quot;&gt;æ ‡ç­¾çš„valueå±æ€§èµ‹å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">* &lt;property&gt; æä¾›å­æ ‡ç­¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;value&gt; å­æ ‡ç­¾ ç­‰æ•ˆ valueå±æ€§ &lt;property value=&quot;&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;ref&gt; å­æ ‡ç­¾ ç­‰æ•ˆrefå±æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;list&gt;å­æ ‡ç­¾ listé›†åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;array&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;set&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;map&gt; mapé›†åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        æ–¹å¼1ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        &lt;entry key=&quot;ds&quot; value=&quot;å±Œä¸&quot;&gt;&lt;/entry&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        æ–¹å¼2ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        &lt;entry&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            &lt;key&gt;&lt;value&gt;dzd&lt;/value&gt;&lt;/key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            &lt;value&gt;å±Œä¸­å±Œ&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        &lt;/entry&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;props&gt; Propertieså¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        &lt;prop key=&quot;é”®&quot;&gt;å€¼&lt;/prop&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">collBeanId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.CollBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataList</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">list</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">a</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">b</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">c</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">list</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataArray</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">array</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">a</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">b</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">c</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">array</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSet</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">set</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">å¬²</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">å«</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">æŒŠ</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">é¾˜</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">set</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataMap</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">map</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">entry</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ds</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">efe</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">entry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">entry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dzd</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dfd</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">entry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">map</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataProps</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">props</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">DG1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dg</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">DG2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dg</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">DG3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dg</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">props</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºäºæ³¨è§£">åŸºäºæ³¨è§£<a href="#åŸºäºæ³¨è§£" class="hash-link" aria-label="Direct link to åŸºäºæ³¨è§£" title="Direct link to åŸºäºæ³¨è§£">â€‹</a></h2><ul><li><p>æ·»åŠ çº¦æŸ: å³ context schema,åœ¨ xsd-config.xml ä¸­æ‰¾</p></li><li><p>å¼€å¯æ³¨è§£ç±»æ‰«æ<code>&lt;context:component-scan base-package=&quot;xxxxpackage&quot;&gt;&lt;/context:component-scan&gt;</code></p><ul><li><p>åŠŸèƒ½æ˜¯å°†@component ä¹‹ç±»çš„æ³¨è§£æ ‡æ³¨çš„ bean æ³¨å†Œåˆ° spring ä¸­</p></li><li><p>annotation-config å¤„ç†@autowired ä¹‹ç±»çš„æ³¨è§£ï¼ˆå…±æœ‰å››ç±»ï¼‰ å‰ææ˜¯æ³¨è§£ä½œç”¨çš„ç±»å·²ç»è¢«æ³¨å†Œåˆ° spring å®¹å™¨é‡Œï¼ˆbean id=â€œâ€ class=â€œâ€ï¼‰ ;component-scan é™¤äº†åŒ…å« annotation-config çš„ä½œç”¨å¤–ï¼Œè¿˜èƒ½è‡ªåŠ¨æ‰«æå’Œæ³¨å†Œ base-package ä¸‹æœ‰@component ä¹‹ç±»æ³¨è§£çš„ç±»ï¼Œå°†å…¶ä½œä¸º bean æ³¨å†Œåˆ° spring å®¹å™¨é‡Œ; æ‰€ä»¥é…ç½®æ–‡ä»¶å¦‚æœæœ‰ component-scan å°±ä¸éœ€è¦ annotation-config äº†ã€‚</p></li><li><p>ä¹Ÿå¯ä»¥ scan æ’é™¤:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">base-package</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.baobaotao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">include-filter</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">regex</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">expression</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com\.baobaotao\.service\..*</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">exclude-filter</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">aspectj</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">expression</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.baobaotao.util..*</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul><ul><li><p>åˆ†å±‚ web å¼€å‘ä¸­çš„æ³¨è§£: @Controller--web å±‚, @Service--service å±‚, @Repository--dao å±‚, @component--ç¬¼ç»Ÿçš„</p></li><li><p>ä¾èµ–æ³¨å…¥ç›¸å…³æ³¨è§£:</p><ul><li><p>æŒ‰ç…§ç±»å‹æ³¨å…¥: @Autowire, ä½¿ç”¨åœ¨æˆå‘˜å±æ€§ or setter æ–¹æ³•ä¸Š</p></li><li><p>æŒ‰ç…§åç§°æ³¨å…¥ : @Qualified å’Œ@Autowired ç»“åˆä½¿ç”¨, @Qualified(&quot;userDaoId&quot;) ã€å‰ææ˜¯ UserDao é…ç½®äº†@Repository(&quot;userDaoId&quot;) ã€‘</p></li><li><p>æŒ‰ç…§åç§°æ³¨å…¥ï¼ˆç®€åŒ–ï¼‰ï¼š@Resourceï¼ˆname=â€œåç§°â€ï¼‰</p></li><li><p>æ™®é€šæˆå‘˜å±æ€§æ³¨å…¥ï¼š@Valueï¼ˆâ€œå€¼â€ï¼‰ ç›´æ¥ç»™æˆå‘˜å±æ€§æ³¨å…¥æ™®é€šå€¼</p></li></ul></li></ul><ul><li><p>åˆå§‹åŒ–ï¼Œé”€æ¯ï¼Œä½œç”¨åŸŸæ³¨è§£</p><ul><li><p>åˆå§‹åŒ–å’Œé”€æ¯: @PostConstruct, @PreDestroy</p></li><li><p>ä½œç”¨åŸŸ: @Scope(&quot;singleton&quot;), @Scope(&quot;prototype&quot;)</p></li></ul></li></ul><p>åˆ†å±‚å¼€å‘:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// UserDaoï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Repository(&quot;userDaoId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;jack&quot;)  //ç›´æ¥è®¾ç½®å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String username ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void save() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;web dao user --&gt;&quot; + username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// UserServiceï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œé…ç½®ã€æˆå‘˜å±æ€§ä¸Šé…ç½®@Autowiredã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private UserDao userDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ–¹å¼1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired//---ã€æ ¹æ®ç±»å‹åŒ¹é…ï¼Œå¯å•ç‹¬ä½¿ç”¨ã€‘ï¼šå¦‚æœæ˜¯é…ç½®@Autowiredã€åé¢ä¸ç”¨è·Ÿå€¼ã€‘ï¼Œåˆ™UserDaoç±»åªéœ€è¦é…ç½®@Repositoryã€ä¸ç”¨è·Ÿå€¼ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Qualifier(&quot;userDaoId&quot;)//---ã€æ ¹æ®åå­—åŒ¹é…ï¼Œå¿…é¡»å’Œ@Autowiredä¸€èµ·ä½¿ç”¨ã€‘ï¼šUserDaoç±»é…ç½®äº†@Repository(&quot;userDaoId&quot;)ï¼Œåˆ™è¦ä½¿ç”¨è¿™ç§æ–¹å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ–¹å¼2ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Resource(name=&quot;userDaoId&quot;)            //--ä¸€ä¸ªé¡¶ä¿©ã€ä¸€ä¸ª@Resource(name=&quot;userDaoId&quot;)å¯é¡¶@Autowired&amp;&amp;@Qualifier(&quot;userDaoId&quot;)ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setUserDao(UserDao userDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.userDao = userDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void saveUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;web user service&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userDao.save();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// UserActionï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Controller(&quot;userActionId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserAction {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired  //ç›¸å½“äº &lt;property  name=&quot;&quot; ref=&quot;xxx&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private UserService userService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œé…ç½®@Autowired ï¼Œå’Œåœ¨æˆå‘˜å±æ€§ä¸Šé…ç½®æ•ˆæœä¸€æ ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setUserService(UserService userService) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.userService = userService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;action add user&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.saveUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestAnnoWeb {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01() throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;com/itheima/h_annotation/b_web/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserAction userAction = (UserAction) applicationContext.getBean(&quot;userActionId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userAction.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">é…ç½®ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">context</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/context</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context/spring-context.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ³¨è§£ç±»æ‰«æï¼šé€šçŸ¥springï¼Œå“ªäº›ç±»æ·»åŠ æ³¨è§£,å±äºæ§åˆ¶åè½¬ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">base-package</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.h_annotation.b_web</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆå§‹åŒ–, é”€æ¯, ä½œç”¨åŸŸ:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// CategoryServiceï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component(&quot;categoryServiceId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Scope(&quot;prototype&quot;)                  //-------------ä½œç”¨åŸŸæ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CategoryService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addCategory(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;c_other addCategory&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostConstruct //--------åˆå§‹åŒ–æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myInit(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;anno åˆå§‹åŒ–&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PreDestroy //------------é”€æ¯æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myDestroy(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;anno é”€æ¯&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestAnnoHello {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01() throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CategoryService categoryService1 = (CategoryService) applicationContext.getBean(&quot;categoryServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        categoryService1.addCategory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CategoryService categoryService2 = (CategoryService) applicationContext.getBean(&quot;categoryServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        categoryService2.addCategory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(categoryService1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(categoryService2);//ç»™CategoryServiceç±»åŠ äº†æ³¨è§£@Scope(&quot;prototype&quot;)ï¼›å˜æˆäº†å¤šä¾‹ï¼›æ‰“å°ç»“æœæ˜¯ä¸¤è€…åœ°å€ä¸åŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        applicationContext.close();  //éœ€è¦æ‰‹åŠ¨å…³é—­applicationContextï¼Œé”€æ¯æ³¨è§£æ‰ä¼šç”Ÿæ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½® --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">context</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/context</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context/spring-context.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ³¨è§£ç±»æ‰«æï¼šé€šçŸ¥springï¼Œå“ªäº›ç±»æ·»åŠ æ³¨è§£ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">base-package</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="xml-å’Œæ³¨è§£æ··ç”¨">xml å’Œæ³¨è§£æ··ç”¨<a href="#xml-å’Œæ³¨è§£æ··ç”¨" class="hash-link" aria-label="Direct link to xml å’Œæ³¨è§£æ··ç”¨" title="Direct link to xml å’Œæ³¨è§£æ··ç”¨">â€‹</a></h2><ul><li>xml è´Ÿè´£é…ç½® bean(æ‰€ä»¥å¯ä»¥å»æ‰<code>context:component-scan</code>é…ç½®), æ³¨è§£è´Ÿè´£é…ç½®æ³¨å…¥(æ‰€ä»¥å¼€å¯<code>&lt;context:annotation-config/&gt;</code>)</li></ul><p>è§ <a href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3">åŸºäºæ³¨è§£</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// UserDao:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;jack&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String username ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void save() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;web dao user --&gt;&quot; + username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// UserService:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private UserDao userDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ–¹å¼1ï¼šï¼ˆæŒæ¡ï¼‰å€¼ä¸ºbean idå€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Qualifier(&quot;userDaoId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ–¹å¼2ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  @Resource(name=&quot;userDaoId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setUserDao(UserDao userDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.userDao = userDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void saveUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;web user service&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userDao.save();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// UserAction:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserAction {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired  //å–ä»£ &lt;property  name=&quot;&quot; ref=&quot;æŒ‰ç…§ç±»å‹é…ç½®&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private UserService userService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setUserService(UserService userService) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.userService = userService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;action add user&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.saveUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestAnnoWeb {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01() throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserAction userAction = (UserAction) applicationContext.getBean(&quot;userActionId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userAction.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">context</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/context</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context/spring-context.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        å·²ç»é…ç½®beanï¼Œä¸éœ€è¦æ‰«æpackageäº†ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;context:component-scan base-package=&quot;com.itheima.h_annotation.b_web&quot;&gt;&lt;/context:component-scan&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ã€xml&amp;æ³¨è§£æ··ç”¨æ—¶è¦ç‰¹åˆ«é…ç½®ã€‘ï¼šé…ç½®ä½¿å¾—æ³¨è§£å¼æ³¨å…¥å¯ä»¥ä½¿ç”¨ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">annotation-config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">annotation-config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- dao --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDaoId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- service --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- action --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userActionId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserAction</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">scope</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">prototype</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>JUnit æ•´åˆ</h1><p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-springunitest/index.html" target="_blank" rel="noopener noreferrer">https://www.ibm.com/developerworks/cn/java/j-lo-springunitest/index.html</a></p><p>å¼•å…¥ä¾èµ–: <a href="http://mvnrepository.com/artifact/org.springframework/spring-test" target="_blank" rel="noopener noreferrer">http://mvnrepository.com/artifact/org.springframework/spring-test</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// UserServiceï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;a_hello addUser&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)  //junit spring æ•´åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations=&quot;classpath:config/beans.xml&quot;)  //åŠ è½½é…ç½®æ–‡ä»¶ â€œclasspath:â€è¡¨ç¤ºåœ¨/srcç›®å½•ä¸‹ï¼ˆä¹Ÿå°±æ˜¯åœ¨WEB-INF/classesä¸‹ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transactional//insert ä¹‹åä¸å¿…æ¸…ç†æ•°æ®åº“, ä¼šè‡ªåŠ¨ rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestJunit {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired  //æ•´åˆjunit è‡ªåŠ¨æ³¨å…¥(ä»¥ç±»å‹æ–¹å¼æ³¨å…¥)ï¼Œâ€œæ³¨å…¥â€ä¸éœ€è¦å†åœ¨xmlé…ç½®ã€ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private UserService userService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo02(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1 åŠ è½½é…ç½®æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//      String xmlPath = &quot;com/itheima/i_test/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//      ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//      //2 ä»å®¹å™¨è·å¾—å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//      UserService userService = (UserService) applicationContext.getBean(&quot;userServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();//ç°åœ¨ç®€å•ä¸€æ­¥æå®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    è¿™é‡Œæ˜¯é…ç½®çš„UserServiceè¿™ä¸ªbeanï¼Œä¸æ˜¯é…ç½®çš„å±æ€§æ³¨å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>IoC</h1><p>Spring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯å·¥å‚æ¨¡å¼åŠ åå°„æœºåˆ¶ã€‚</p><p><a href="https://www.zhihu.com/question/23277575/answer/169698662" target="_blank" rel="noopener noreferrer">ioc æœ‰ä»€ä¹ˆå¥½å¤„</a></p><h1>AOP</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aop-æ¦‚å¿µ">aop æ¦‚å¿µ<a href="#aop-æ¦‚å¿µ" class="hash-link" aria-label="Direct link to aop æ¦‚å¿µ" title="Direct link to aop æ¦‚å¿µ">â€‹</a></h2><p>åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹, å¢å¼ºæŸä¸ªæ–¹æ³•, æ¯”å¦‚åœ¨è¿™ä¸ªæ–¹æ³•é€»è¾‘æ‰§è¡Œä¹‹å‰, ä¹‹å, å‰å, è¿”å›å€¼è¿”å›ä¹‹å, æŠ›å‡ºå¼‚å¸¸ä¹‹å</p><p>ç›®å‰ä¸»æµæœ‰ä¸¤ç§æ–¹æ³•</p><ul><li><p>Spring AOP:ä½¿ç”¨çº¯ Java å®ç°ï¼Œ<code>ä¸éœ€è¦ä¸“é—¨çš„ç¼–è¯‘å™¨</code>ï¼Œåœ¨<code>è¿è¡ŒæœŸ</code>é€šè¿‡åŠ¨æ€ç”Ÿæˆä»£ç†ç±», å¦‚æœç±»å®ç°äº†æ¥å£, ä½¿ç”¨ jdk è‡ªå¸¦çš„åŠ¨æ€ä»£ç†, å¦‚æœç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£, ä½¿ç”¨ cglib ç”ŸæˆåŠ¨æ€ä»£ç†;Spring AOP è™½ç„¶ä½¿ç”¨äº† AspectJ çš„ Annotation, ä½†æ˜¯ä¸¤è€…æ˜¯ä¸åŒçš„</p></li><li><p>AspectJ: æ˜¯ä¸€ä¸ªåŸºäº Java è¯­è¨€çš„ AOP æ¡†æ¶,å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼ŒSpring 2.0 å¼€å§‹ï¼ŒSpring å¼•å…¥å¯¹ AspectJ çš„æ”¯æŒï¼ŒAspectJ æ‰©å±•äº† Java è¯­è¨€ï¼Œæä¾›äº†ä¸€ä¸ª<code>ä¸“é—¨çš„ç¼–è¯‘å™¨</code>(ç›¸å½“äº javac çš„å¢å¼ºç‰ˆæœ¬)ï¼Œåœ¨<code>ç¼–è¯‘æ—¶ç»‡å…¥</code>, è€Œä¸æ˜¯è¿è¡Œæ˜¯åŠ¨æ€ç”Ÿæˆ;</p></li></ul><p>ç»å…¸åº”ç”¨</p><p>æƒé™ç®¡ç†, é”™è¯¯å¤„ç†, æ‡’åŠ è½½, æ€§èƒ½ç›‘è§†ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ£€æŸ¥ã€ç¼“å­˜ ã€æ—¥å¿—</p><p>åè¯æ¦‚å¿µ</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.target ç›®æ ‡ç±» ï¼Œè¢«å¢å¼ºç±»ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.JoinPoint è¿æ¥ç‚¹ï¼Œç›®æ ‡ç±»ä¸Šé‚£äº›æœ‰å¯èƒ½è¢«å¢å¼ºçš„æ–¹æ³•ã€‚ï¼ˆä¸€èˆ¬æŒ‡æ‰€æœ‰æ–¹æ³•ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.PointCut åˆ‡å…¥ç‚¹ï¼Œç›®æ ‡ç±»è¢«å¢å¼ºçš„æ–¹æ³•ï¼Œè¢«å¢å¼ºçš„è¿æ¥ç‚¹ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.Advice å¢å¼º/é€šçŸ¥ï¼Œå¢å¼ºçš„é‚£äº›å†…å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5.weaving ç»‡å…¥ï¼Œå°†é€šçŸ¥ï¼ˆå¢å¼ºï¼‰åº”ç”¨åˆ°è¿æ¥ç‚¹ä¸Šï¼Œç”Ÿæˆä»£ç†çš„è¿‡ç¨‹ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6.proxy ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7.aspect åˆ‡é¢ï¼Œåˆ‡å…¥ç‚¹ å’Œ é€šçŸ¥ ç»“åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aop-è”ç›Ÿè§„èŒƒ">aop è”ç›Ÿè§„èŒƒ<a href="#aop-è”ç›Ÿè§„èŒƒ" class="hash-link" aria-label="Direct link to aop è”ç›Ÿè§„èŒƒ" title="Direct link to aop è”ç›Ÿè§„èŒƒ">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šçŸ¥ç±»å‹">é€šçŸ¥ç±»å‹<a href="#é€šçŸ¥ç±»å‹" class="hash-link" aria-label="Direct link to é€šçŸ¥ç±»å‹" title="Direct link to é€šçŸ¥ç±»å‹">â€‹</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1ï¼‰ aopè”ç›Ÿ å®šä¹‰ aopé€šçŸ¥ç±»å‹ï¼Œspring å¯¹ aopè”ç›Ÿè§„èŒƒæ”¯æŒã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2ï¼‰ aopè”ç›Ÿå®šä¹‰5ç§é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å‰ç½®é€šçŸ¥ org.springframework.aop.MethodBeforeAdvice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å®æ–½å¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    åç½®é€šçŸ¥ org.springframework.aop.AfterReturningAdvice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåå®æ–½å¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ç¯ç»•é€šçŸ¥ org.aopalliance.intercept.MethodInterceptor ã€æ³¨æ„ï¼šè¿™ä¸ªæ¥å£æ˜¯aopè”ç›Ÿçš„ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åå®æ–½å¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ org.springframework.aop.ThrowsAdvice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        åœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åå®æ–½å¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¼•ä»‹é€šçŸ¥ org.springframework.aop.IntroductionInterceptorå¯¹ä¸€ä¸ªç±»è¿›è¡Œå¢å¼ºï¼ˆæ·»åŠ æ–¹æ³•æˆ–å±æ€§ç­‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        åœ¨ç›®æ ‡ç±»ä¸­æ·»åŠ ä¸€äº›æ–°çš„æ–¹æ³•å’Œå±æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               å‰ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ç¯ç»•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               åç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               å¼‚å¸¸æŠ›å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3ï¼‰ å¦‚æœä½¿ç”¨aopè”ç›Ÿè§„èŒƒè¿›è¡Œaopå¼€å‘ï¼Œæ‰€æœ‰çš„é€šçŸ¥å¿…é¡»å®ç°æ¥å£ã€‚ï¼ˆåº•å±‚ä¸ºäº†ç¡®å®šé€šçŸ¥æ–¹æ³•åç§°ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="joinpoint-è¿æ¥ç‚¹">Joinpoint è¿æ¥ç‚¹<a href="#joinpoint-è¿æ¥ç‚¹" class="hash-link" aria-label="Direct link to Joinpoint è¿æ¥ç‚¹" title="Direct link to Joinpoint è¿æ¥ç‚¹">â€‹</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1ï¼‰ JoinPointè¿æ¥ç‚¹çš„ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2ï¼‰ æ¥å£ï¼šorg.aspectj.lang.JoinPoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ è·å¾—ç›®æ ‡å¯¹è±¡(è¢«ä»£ç†å¯¹è±¡)ï¼šgetTarget()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ è·å¾—è¢«å¢å¼ºæ–¹æ³•ç­¾åï¼šgetSignature()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ è·å¾—è¢«å¢å¼ºæ–¹æ³•åç§°ï¼šgetSignature().getName()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * è·å–è¢«å¢å¼ºæ–¹æ³•å¯¹è±¡æœ¬èº«: getSignature().getMethod()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ è·å¾—å®é™…å‚æ•°ï¼šgetArgs()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ è·å¾—å½“å‰æŒ‡å®šæ–¹æ³•çš„ç±»å‹ï¼šgetKind()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        method-execution æ–¹æ³•æ‰§è¡Œã€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        constructor-executionæ„é€ æ–¹æ³•æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        field-get getæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * proceed() æ‰§è¡ŒåŸå§‹æ–¹æ³•</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸å’Œ-spring-é›†æˆå•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†">ä¸å’Œ spring é›†æˆ(å•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†)<a href="#ä¸å’Œ-spring-é›†æˆå•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†" class="hash-link" aria-label="Direct link to ä¸å’Œ spring é›†æˆ(å•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†)" title="Direct link to ä¸å’Œ spring é›†æˆ(å•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†)">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-jdk-åŠ¨æ€ç”Ÿæˆä»£ç†">é€šè¿‡ jdk åŠ¨æ€ç”Ÿæˆä»£ç†<a href="#é€šè¿‡-jdk-åŠ¨æ€ç”Ÿæˆä»£ç†" class="hash-link" aria-label="Direct link to é€šè¿‡ jdk åŠ¨æ€ç”Ÿæˆä»£ç†" title="Direct link to é€šè¿‡ jdk åŠ¨æ€ç”Ÿæˆä»£ç†">â€‹</a></h3><p>spring å¯¹äºå®ç°äº†æ¥å£çš„ç±», ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ç”Ÿæˆä»£ç†</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">æ­¥éª¤ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. æ¥å£ + å®ç°ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. ç¼–å†™åˆ‡é¢ç±» MyAspect ï¼Œå¹¶æä¾›é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. ç¼–å†™å·¥å‚ï¼Œç”Ÿæˆä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç°ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserServiceImpl implements UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;a_jdk addUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void updateUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;a_jdk updateUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ‡é¢ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åˆ‡é¢ç±»ï¼Œå­˜æ”¾æ‰€æœ‰çš„é€šçŸ¥ï¼ˆå¢å¼ºï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAspect {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myBefore(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot; a_proxy.a_jdk  å‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfter(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot; a_proxy.a_jdk  å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å·¥å‚ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  JDK åŠ¨æ€ä»£ç†  Object obj = Proxy.newProxyInstance(....)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  1.å‚æ•°1ï¼šClassLoader loader ,ç¡®å®šç±»åŠ è½½å™¨ã€‚ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºç±»ï¼Œéœ€è¦ç±»åŠ è½½åŠ è½½åˆ°å†…å­˜ã€‚ç±»åŠ è½½å™¨ä½œç”¨ï¼šclassæ–‡ä»¶ --&gt; Classå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      * ä¸€èˆ¬æƒ…å†µä½¿ç”¨éƒ½æ˜¯å½“å‰ç±»çš„ç±»åŠ è½½å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      * ç±»åŠ è½½å™¨è·å¾—æ–¹å¼ï¼šMyFactory.class.getClassLoader();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  2.å‚æ•°2ï¼šClass[] interfaces  ä»£ç†éœ€è¦å®ç°çš„æ¥å£ä»¬ï¼ˆå¯èƒ½æœ‰å¤šä¸ªï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      * æ–¹å¼1ï¼šuserService.getClass().getInterfaces()ã€æ­¤æ–¹å¼åªèƒ½åœ¨ä»£ç†å¯¹è±¡å’Œæ¥å£æ˜¯çˆ¶å­å…³ç³»æ—¶ä½¿ç”¨ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      * æ–¹å¼2ï¼šnew Class[]{UserService.class}ã€å½“è¢«ä»£ç†å¯¹è±¡å’Œå…¶å®ç°æ¥å£ä¹‹é—´æ˜¯éš”ä»£å…³ç³»æ—¶ï¼ˆå³ç¥–å­™å…³ç³»ï¼‰å¿…é¡»ä½¿ç”¨æ–¹å¼2è·å–æ¥å£ä»¬ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  3.å‚æ•°3ï¼šInvocationHandler h è¯·æ±‚å¤„ç†ç±»ï¼Œä»£ç†ç±»æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œéœ€è¦è¯·æ±‚å¤„ç†ç±»æ¥å¤„ç†ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      * ä¸€èˆ¬é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»ï¼šnew InvocationHandler(){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *      * å®ç°æ–¹æ³• invoke ï¼Œä»£ç†ç±»æ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¸€æ¬¡ï¼Œå°†è°ƒç”¨ä¸€æ¬¡invoke</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *          å‚æ•°1.1ï¼šObject proxy ,ä»£ç†æˆåŠŸå¯¹è±¡ï¼ˆå³ proxyServiceï¼Œä¸æ˜¯â€œä»£ç†ä¹‹å‰å¯¹è±¡â€ï¼‰ï¼Œä¸€èˆ¬æ²¡ç”¨ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *          å‚æ•°2.2ï¼šMethod method ï¼Œå½“å‰æ‰§è¡Œçš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *              * å½“å‰è°ƒç”¨æ–¹æ³•åï¼šmethod.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *              * æ‰§è¡Œç›®æ ‡ç±»æ–¹æ³•ï¼šObject obj = method.invoke(ä»£ç†ä¹‹å‰å¯¹è±¡ , args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *          å‚æ•°3.3ï¼šObject[] args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *              * å½“å‰æ–¹æ³•å®é™…å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static UserService createService(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1 åˆ›å»ºç›®æ ‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final UserService userService = new UserServiceImpl();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2 åˆ‡é¢ç±»ï¼ˆé€šçŸ¥ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final MyAspect myAspect = new MyAspect();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //3 ç¼–å†™ä»£ç†ï¼Œå°†é€šçŸ¥ åº”ç”¨ åˆ°ç›®æ ‡ç±»æ–¹æ³•ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService proxyService = (UserService)Proxy.newProxyInstance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                MyFactory.class.getClassLoader(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                userService.getClass().getInterfaces(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new InvocationHandler(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    public Object invoke(Object proxy, Method method,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Object[] args) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //å‰é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        myAspect.myBefore();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //æ‰§è¡Œç›®æ ‡ç±»çš„æ–¹æ³•, æ³¨æ„ç”¨çš„ä¸æ˜¯ proxyå¯¹è±¡è€Œæ˜¯åŸå§‹å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Object obj = method.invoke(userService, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //åé€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        myAspect.myAfter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return proxyService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-cglib-åŠ¨æ€ç”Ÿæˆä»£ç†">é€šè¿‡ cglib åŠ¨æ€ç”Ÿæˆä»£ç†<a href="#é€šè¿‡-cglib-åŠ¨æ€ç”Ÿæˆä»£ç†" class="hash-link" aria-label="Direct link to é€šè¿‡ cglib åŠ¨æ€ç”Ÿæˆä»£ç†" title="Direct link to é€šè¿‡ cglib åŠ¨æ€ç”Ÿæˆä»£ç†">â€‹</a></h3><p>spring å¯¹äºæ²¡æœ‰å®ç°æ¥å£çš„ç±», ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ç”Ÿæˆä»£ç†</p><ul><li><p>cglibï¼šå­—èŠ‚ç å¢å¼ºæ¡†æ¶ï¼ˆspring å­—èŠ‚ç å¢å¼ºæ¡†æ¶ï¼Œé»˜è®¤ä½¿ç”¨ cglibï¼‰ï¼Œè¿è¡Œæ—¶é‡‡ç”¨åŠ¨æ€ç”Ÿæˆå­ç±»æ–¹å¼ï¼Œå­ç±»å°±æ˜¯ä»£ç†ç±»</p></li><li><p>spring å°† asm å’Œ cglib å†…ç½®åˆ° spring-core...jarã€spring ä¸­ä½¿ç”¨æ—¶å¯¼å…¥è¿™ä¸ª jar åŒ…ã€‘</p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// UserServiceï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;b_cglib addUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void updateUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;b_cglib updateUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ‡é¢ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åˆ‡é¢ç±»ï¼Œå­˜æ”¾æ‰€æœ‰çš„é€šçŸ¥ï¼ˆå¢å¼ºï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAspect {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myBefore(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot; b_cglib  å‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfter(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot; b_cglib  å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å·¥å‚ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static UserService createService() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1 ç›®æ ‡ç±»  ç±» = new ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final UserService userService = new UserService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2 åˆ‡é¢ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final MyAspect myAspect = new MyAspect();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //3 ä»£ç†ç±» --cglib (ä»£ç†ç±»ã€å­ã€‘ å’Œ ç›®æ ‡ç±»ã€çˆ¶ã€‘ çˆ¶å­å…³ç³»)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.1 åˆ›å»ºæ ¸å¿ƒç±»ï¼ˆEnhancer å¢å¼ºï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Enhancer enhancer = new Enhancer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.2 ç¡®å®šå³ç›®æ ‡ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enhancer.setSuperclass(userService.getClass());// å› ä¸ºä»£ç†ç±»å°±æ˜¯target class çš„ sub class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.3 è®¾ç½®å›è°ƒï¼Œç±»ä¼¼JDKä»£ç†ä¸­InvocationHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ** CallBack æ¥å£å¤„ç†æ‰€æœ‰å†…å®¹ï¼Œè¿™é‡Œä½¿ç”¨å®ƒçš„å­æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ** å­æ¥å£ MethodInterceptor ç”¨äºå¤„ç†æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enhancer.setCallback(new MethodInterceptor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             * intercept() ç­‰æ•ˆ jdk invoke()æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             *  * å‚æ•°1ã€å‚æ•°2ã€å‚æ•°3ï¼šä¸invokeä¸€æ ·çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             *  * å‚æ•°4ï¼šmethodProxy---è¡¨ç¤ºå±äºä»£ç†å¯¹è±¡çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public Object intercept(Object proxy, Method method, Object[] args,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    MethodProxy methodProxy) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //å‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                myAspect.myBefore();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //æ‰§è¡Œç›®æ ‡ç±»çš„å½“å‰æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Object obj = method.invoke(userService, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // ******** é€šè¿‡ä»£ç†ç±»æ‰§è¡Œâ€œä»£ç†ç±»çš„çˆ¶ç±»â€ã€å³ç›®æ ‡ç±»ã€‘çš„å½“å‰æ–¹æ³•ï¼Œå’Œä¸Šå¥ç­‰æ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // methodProxy.invokeSuper(proxy, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                myAspect.myAfter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3.4 åˆ›å»ºä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService proxyService = (UserService)enhancer.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return proxyService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestCglib {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = new UserService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo02(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = MyFactory.createService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-proxyfactorybean-ç”Ÿæˆä»£ç†åŠè‡ªåŠ¨">é€šè¿‡ ProxyFactoryBean ç”Ÿæˆä»£ç†(åŠè‡ªåŠ¨)<a href="#é€šè¿‡-proxyfactorybean-ç”Ÿæˆä»£ç†åŠè‡ªåŠ¨" class="hash-link" aria-label="Direct link to é€šè¿‡ ProxyFactoryBean ç”Ÿæˆä»£ç†(åŠè‡ªåŠ¨)" title="Direct link to é€šè¿‡ ProxyFactoryBean ç”Ÿæˆä»£ç†(åŠè‡ªåŠ¨)">â€‹</a></h2><p>æ·»åŠ  aop å¼€å‘åŒ…: <a href="http://mvnrepository.com/artifact/org.aopalliance/com.springsource.org.aopalliance/1.0.0" target="_blank" rel="noopener noreferrer">http://mvnrepository.com/artifact/org.aopalliance/com.springsource.org.aopalliance/1.0.0</a>, è¿˜æœ‰å®ç°ç±» spring-aop</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// æ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç°ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserServiceImpl implements UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;b_factory_bean addUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void updateUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;b_factory_bean updateUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ‡é¢ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åˆ‡é¢ç±»ï¼Œå­˜æ”¾æ‰€æœ‰çš„é€šçŸ¥ï¼Œä½¿ç”¨spring è”ç›Ÿæä¾›è§„èŒƒï¼Œå¿…é¡»å®ç°ç›¸åº”æ¥å£ï¼Œè¿™é‡Œå®ç°çš„æ˜¯ç¯ç»•é€šçŸ¥çš„æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * * ç¯ç»•é€šçŸ¥å¿…é¡»æ‰‹åŠ¨æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAspect implements MethodInterceptor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object invoke(MethodInvocation mi) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å¿…é¡»æ‰‹åŠ¨çš„æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object obj = mi.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestFactoryBean {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä»springè·å¾—æ™®é€šbeanæ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = (UserService) applicationContext.getBean(&quot;userServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo02(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä»spring æ‰‹åŠ¨ è·å¾—ä»£ç†beanï¼Œç§°ä¸ºåŠè‡ªåŠ¨å°±æ˜¯å› ä¸ºè¿™é‡Œï¼Œä¸€æ—¦åˆ å»ä»£ç†å¯¹è±¡çš„ç›¸å…³é…ç½®å°±æŠ¥é”™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = (UserService) applicationContext.getBean(&quot;proxyServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1 ç›®æ ‡ç±» --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2 åˆ‡é¢ç±» --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myAspectId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.MyAspect</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3 ç”Ÿæˆä»£ç†å¯¹è±¡ï¼šé€šçŸ¥ï¼ˆå¢å¼ºï¼‰ å’Œç›®æ ‡ç±» ç»“åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * ProxyFactoryBeanï¼ˆä»£ç†å·¥å‚beanï¼‰ ç”¨äºç”Ÿæˆä¸€ä¸ªä¸“é—¨ç”Ÿäº§ä»£ç†beançš„å·¥å‚beanã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        target ç¡®å®šç›®æ ‡ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        interceptorNames ç¡®å®šæ‰€æœ‰åˆ‡é¢ç±»ï¼Œç±»å‹String[],éœ€è¦åˆ‡é¢ç±»çš„bean idå€¼ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªå€¼ï¼Œå¯ç›´æ¥ç”¨&lt;property&gt;çš„valueå±æ€§èµ‹å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        proxyInterfaces ç¡®å®šä»£ç†ç±»éœ€è¦å®ç°æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        optimize å¼ºåˆ¶æ˜¯å¦ä½¿ç”¨cglibã€é…ç½®ä¸ºtrueåˆ™é…ç½®çš„æ¥å£å±æ€§ï¼ˆproxyInterfacesï¼‰å¯ä»¥çœç•¥ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">proxyServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.aop.framework.ProxyFactoryBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">interceptorNames</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myAspectId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">proxyInterfaces</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">optimize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¨è‡ªåŠ¨å®ç°">å…¨è‡ªåŠ¨å®ç°<a href="#å…¨è‡ªåŠ¨å®ç°" class="hash-link" aria-label="Direct link to å…¨è‡ªåŠ¨å®ç°" title="Direct link to å…¨è‡ªåŠ¨å®ç°">â€‹</a></h2><ul><li><p>é…ç½®æ–‡ä»¶ä¸­åŠ å…¥çº¦æŸ(ä½¿ç”¨ aop ç¼–ç¨‹ï¼Œå¿…é¡»ä½¿ç”¨ aop schemaï¼ˆå¼•ç”¨ aop å‘½åç©ºé—´ï¼‰ï¼Œåœ¨ index-config.html ä¸­æ‰¾)</p></li><li><p>åœ¨åŠè‡ªåŠ¨çš„ pom åŸºç¡€ä¸Šæ·»åŠ : <a href="http://www.mvnrepository.com/artifact/org.aspectj/com.springsource.org.aspectj.weaver" target="_blank" rel="noopener noreferrer">http://www.mvnrepository.com/artifact/org.aspectj/com.springsource.org.aspectj.weaver</a></p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// æ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç°ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserServiceImpl implements UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;c_aop addUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void updateUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;c_aop updateUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ‡é¢ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åˆ‡é¢ç±»ï¼Œå­˜æ”¾æ‰€æœ‰çš„é€šçŸ¥ï¼Œä½¿ç”¨spring è”ç›Ÿæä¾›è§„èŒƒï¼Œå¿…é¡»å®ç°æ¥å£MethodInterceptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * * ç¯ç»•é€šçŸ¥å¿…é¡»æ‰‹åŠ¨æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAspect implements MethodInterceptor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object invoke(MethodInvocation mi) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;c_aop å‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å¿…é¡»æ‰‹åŠ¨çš„æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object obj = mi.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;c_aop å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestAOP {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç»è¿‡é…ç½®ï¼ŒæŒ‰ç…§ä»¥å‰çš„æ™®é€šæ–¹å¼è·å¾—beanæ•°æ®ï¼Œå°±æ˜¯ä»£ç†beanå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = (UserService) applicationContext.getBean(&quot;userServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">aop</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/aop</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1 ç›®æ ‡ç±» --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2 åˆ‡é¢ç±»ï¼ˆé€šçŸ¥ï¼‰ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myAspectId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.MyAspect</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3 spring aop ç¼–ç¨‹ é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * aopç¼–ç¨‹ &lt;aop:config&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            proxy-target-class=&quot;true&quot; è¡¨ç¤ºå¼ºåˆ¶ä½¿ç”¨cglib</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * &lt;aop:pointcut&gt; ï¼šé…ç½®åˆ‡å…¥ç‚¹,ç¡®å®šç›®æ ‡ç±»ä¸Šé‚£äº›æ–¹æ³•éœ€è¦å¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        expression ï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œé‡‡ç”¨aspectJï¼ˆä¸€ç§AOPè§„èŒƒï¼‰çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            execution(* com.xiaoyu.spring.learn.UserServiceImpl.addUser())  æŒ‡å®šä¸€ç§æ–¹æ³•å¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            execution(* com.xiaoyu.spring.learn.UserServiceImpl.*())      æ‰€æœ‰ä»£ç†å¯¹è±¡æ–¹æ³•å¢å¼º</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        id : åˆ‡å…¥ç‚¹åç§°ï¼Œæä¾›ç»™åˆ«äººä½¿ç”¨ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * &lt;aop:advisor&gt;: è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šåˆ‡é¢ï¼Œã€ä¸€ä¸ªé€šçŸ¥ å’Œ ä¸€ä¸ªåˆ‡å…¥ç‚¹ ç»“åˆã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            advice-ref é€šçŸ¥çš„å¼•ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            pointcut-ref åˆ‡å…¥ç‚¹çš„å¼•ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">config</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">proxy-target-class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">pointcut</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myPointCut</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">expression</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">execution(* com.xiaoyu.spring.learn.UserServiceImpl.*())</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">advisor</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">advice-ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myAspectId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pointcut-ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myPointCut</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-aspectj-æ¡†æ¶ç”Ÿæˆä»£ç†å’Œ-spring-é›†æˆ">ä½¿ç”¨ AspectJ æ¡†æ¶ç”Ÿæˆä»£ç†(å’Œ spring é›†æˆ)<a href="#ä½¿ç”¨-aspectj-æ¡†æ¶ç”Ÿæˆä»£ç†å’Œ-spring-é›†æˆ" class="hash-link" aria-label="Direct link to ä½¿ç”¨ AspectJ æ¡†æ¶ç”Ÿæˆä»£ç†(å’Œ spring é›†æˆ)" title="Direct link to ä½¿ç”¨ AspectJ æ¡†æ¶ç”Ÿæˆä»£ç†(å’Œ spring é›†æˆ)">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ<a href="#å‡†å¤‡å·¥ä½œ" class="hash-link" aria-label="Direct link to å‡†å¤‡å·¥ä½œ" title="Direct link to å‡†å¤‡å·¥ä½œ">â€‹</a></h3><p>å¼•å…¥ jar åŒ…</p><ul><li><a href="http://www.mvnrepository.com/artifact/org.aspectj/aspectjrt" target="_blank" rel="noopener noreferrer">http://www.mvnrepository.com/artifact/org.aspectj/aspectjrt</a></li><li><a href="http://www.mvnrepository.com/artifact/org.aspectj/aspectjweaver" target="_blank" rel="noopener noreferrer">http://www.mvnrepository.com/artifact/org.aspectj/aspectjweaver</a></li></ul><p>å¯¼å…¥çš„ jar åŒ…è¿˜æœ‰å¦ä¸€ç§è¯´æ³•, å¯¹é”™å­˜ç–‘:
<!-- -->[aop è”ç›Ÿè§„èŒƒ]<!-- -->(<a href="http://mvnrepository.com/artifact/org.aopalliance/com.springsource.org.aopalliance/1.0.0" target="_blank" rel="noopener noreferrer">http://mvnrepository.com/artifact/org.aopalliance/com.springsource.org.aopalliance/1.0.0</a>, è¿˜æœ‰å®ç°ç±» spring-aop), å¯¹åº”çš„ spring-aop å®ç°</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aspectj-é€šçŸ¥ç±»å‹">AspectJ é€šçŸ¥ç±»å‹<a href="#aspectj-é€šçŸ¥ç±»å‹" class="hash-link" aria-label="Direct link to AspectJ é€šçŸ¥ç±»å‹" title="Direct link to AspectJ é€šçŸ¥ç±»å‹">â€‹</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">å®šä¹‰6ä¸­é€šçŸ¥ç±»å‹ï¼Œã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ before:å‰ç½®é€šçŸ¥(åº”ç”¨ï¼šå„ç§æ ¡éªŒ)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            åœ¨æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œï¼Œå¦‚æœé€šçŸ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé˜»æ­¢æ–¹æ³•è¿è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ afterReturning:åç½®é€šçŸ¥(åº”ç”¨ï¼šå¸¸è§„æ•°æ®å¤„ç†)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œï¼Œå¦‚æœæ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œé€šçŸ¥æ— æ³•æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            å¿…é¡»åœ¨æ–¹æ³•æ‰§è¡Œåæ‰æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥è·å¾—æ–¹æ³•çš„è¿”å›å€¼ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ around:ç¯ç»•é€šçŸ¥(åº”ç”¨ï¼šååˆ†å¼ºå¤§ï¼Œå¯ä»¥åšä»»ä½•äº‹æƒ…)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            æ–¹æ³•æ‰§è¡Œå‰ååˆ†åˆ«æ‰§è¡Œï¼Œå¯ä»¥é˜»æ­¢æ–¹æ³•çš„æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ afterThrowing:æŠ›å‡ºå¼‚å¸¸é€šçŸ¥(åº”ç”¨ï¼šåŒ…è£…å¼‚å¸¸ä¿¡æ¯)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œï¼Œå¦‚æœæ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œæ— æ³•æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¢ after:æœ€ç»ˆé€šçŸ¥(åº”ç”¨ï¼šæ¸…ç†ç°åœº)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            æ–¹æ³•æ‰§è¡Œå®Œæ¯•åæ‰§è¡Œï¼Œæ— è®ºæ–¹æ³•ä¸­æ˜¯å¦å‡ºç°å¼‚å¸¸</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //å‰ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Object = //ç¯ç»•--æ‰‹åŠ¨æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //åç½®(å¯ä»¥è·å¾—è¿”å›å€¼)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //æŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} finally{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //æœ€ç»ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aspectj-ç¼–ç¨‹åŸºäº-xml">AspectJ ç¼–ç¨‹,åŸºäº xml<a href="#aspectj-ç¼–ç¨‹åŸºäº-xml" class="hash-link" aria-label="Direct link to AspectJ ç¼–ç¨‹,åŸºäº xml" title="Direct link to AspectJ ç¼–ç¨‹,åŸºäº xml">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.ç›®æ ‡ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.åˆ‡é¢ç±»ï¼ˆä¸éœ€è¦å®ç°æ¥å£ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.springé…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç°ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserServiceImpl implements UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;d_aspectj.a_xml addUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String updateUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;d_aspectj.a_xml updateUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //int i = 1/ 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;xxxxx&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ‡é¢ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åˆ‡é¢ç±»ï¼Œå®šä¹‰éœ€è¦é€šçŸ¥ï¼Œä¸ç”¨å®ç°ä»»ä½•æ¥å£ï¼Œä½†ä¹‹åéœ€è¦é€šè¿‡é…ç½®æ–‡ä»¶ç¡®å®šå…·ä½“é€šçŸ¥ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAspect{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å‰ç½®é€šçŸ¥æ–¹æ³•å‚æ•°ç±»å‹ï¼šorg.aspectj.lang.JoinPointï¼Œå¯ä»¥è·å¾—æ–¹æ³•åç­‰å†…å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myBefore(JoinPoint joinPoint){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å‰ç½®é€šçŸ¥ :&quot; + joinPoint.getSignature().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  å‚æ•°1ï¼Œç±»å‹ JoinPoint è·å¾—å½“å‰æ“ä½œè¿æ¥ç‚¹è¯¦ç»†å†…å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  å‚æ•°2ï¼šç±»å‹Objectï¼Œç›®æ ‡å¯¹è±¡è¢«å¢å¼ºæ–¹æ³•è¿”å›å€¼ï¼›åç§°é€šè¿‡ returningå±æ€§ ç¡®å®šã€éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfterReturning(JoinPoint joinPoint,Object ret){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;åç½®é€šçŸ¥ï¼š&quot; + joinPoint.getSignature().getName() + &quot; , &quot; + ret);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ç¯ç»•é€šçŸ¥çš„å¢å¼ºå†…å®¹æ–¹æ³•ç­¾åæœ‰è§„å®šï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 1.ä¿®é¥°ç¬¦ï¼špublicï¼› 2.è¿”å›å€¼ï¼šObjectï¼› 3.æ–¹æ³•å‚æ•°ï¼šProceedingJoinPoint joinPointï¼› 4.æŠ›å‡ºå¼‚å¸¸ï¼šthrows Throwable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 5.æ‰‹åŠ¨æ‰§è¡Œç›®æ ‡å¯¹è±¡çš„è¢«å¢å¼ºæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object myAround(ProceedingJoinPoint joinPoint) throws Throwable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç¯ç»•å‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object obj = joinPoint.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç¯ç»•å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//   å‚æ•°1ï¼šç±»å‹ JoinPoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//   å‚æ•°2ï¼šç±»å‹ Throwable ï¼Œåç§°é€šè¿‡ throwingå±æ€§ç¡®å®šåç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfterThrowing(JoinPoint joinPoint, Throwable e){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;æŠ›å‡ºå¼‚å¸¸é€šçŸ¥ï¼š&quot; + joinPoint.getSignature().getName() + &quot; , &quot; + e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfter(JoinPoint joinPoint){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;æœ€ç»ˆ&quot;+ joinPoint.getSignature().getName() );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestXml {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String xmlPath = &quot;config/beans.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ­£å¸¸ä»springè·å¾—beanæ•°æ®å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = (UserService) applicationContext.getBean(&quot;userServiceId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">aop</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/aop</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1 ç›®æ ‡ç±» --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userServiceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2 åˆ‡é¢ç±»ï¼ˆé€šçŸ¥ï¼‰ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myAspectId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.MyAspect</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3 &lt;aop:aspect&gt; è¿›è¡Œaspectjç¼–ç¨‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * ref æŒ‡å®šåˆ‡é¢ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">aspect</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myAspectId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                1 å®šä¹‰â€œåˆ‡å…¥ç‚¹â€ï¼Œç¡®å®šç›®æ ‡ç±»ä¸Šï¼Œæœ€åéœ€è¦å¢å¼ºçš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                2 aspectåˆ‡é¢å®šä¹‰ï¼Œç¡®å®šåˆ‡é¢ç±»æ‰€æœ‰çš„é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                3 å°†é€šçŸ¥ åº”ç”¨åˆ° åˆ‡å…¥ç‚¹ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- åˆ‡å…¥ç‚¹ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">pointcut</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">expression</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">execution(* com.itheima.d_aspectj.a_xml.*.*(..))</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myPointcut</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- å…·ä½“é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                1ï¼‰ å‰ç½®é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    æ ¼å¼1ï¼š&lt;aop:before method=&quot;æ–¹æ³•åç§°&quot; pointcut-ref=&quot;åˆ‡å…¥ç‚¹å¼•ç”¨&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    æ ¼å¼2ï¼š&lt;aop:before method=&quot;æ–¹æ³•åç§°&quot; pointcut=&quot;åˆ‡å…¥ç‚¹è¡¨è¾¾å¼&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    ï¼ˆå‰ç½®é€šçŸ¥æ–¹æ³•å‚æ•°ç±»å‹ï¼šorg.aspectj.lang.JoinPointï¼Œå¯ä»¥è·å¾—æ–¹æ³•åç­‰å†…å®¹ã€‚ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    ä¾‹å¦‚ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        &lt;aop:before method=&quot;myBefore&quot; pointcut-ref=&quot;myPointcut&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                2ï¼‰ åç½®é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    æ ¼å¼ï¼š&lt;aop:after-returning method=&quot;&quot; pointcut-ref=&quot;&quot; returning=&quot;å‚æ•°2åç§°&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    ä¾‹å¦‚ï¼š&lt;aop:after-returning method=&quot;myAfterReturning&quot; pointcut-ref=&quot;myPointcut&quot; returning=&quot;ret&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    é€šçŸ¥æ–¹æ³•å‚æ•°ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        å‚æ•°1ï¼Œç±»å‹ JoinPoint è·å¾—å½“å‰æ“ä½œè¿æ¥ç‚¹è¯¦ç»†å†…å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        å‚æ•°2ï¼šç±»å‹Objectï¼Œåç§°é€šè¿‡ returningé…ç½®é¡¹ç¡®å®šã€å³éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    public void myAfterReturning(JoinPoint joinPoint,Object ret)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                3ï¼‰ç¯ç»•é€šçŸ¥,é€šçŸ¥æ–¹æ³•æœ‰è¦æ±‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    ç¯ç»•å¿…é¡»æ‰‹åŠ¨çš„æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    æ ¼å¼ï¼š&lt;aop:around method=&quot;&quot; pointcut-ref=&quot;&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    é€šçŸ¥æ–¹æ³•è¦æ±‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        public Object myAround(ProceedingJoinPoint joinPoint) throws Throwable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                            // something...</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                            //æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                            Object obj = joinPoint.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                            // something...</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                            return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    ä¾‹å¦‚ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        &lt;aop:around method=&quot;myAround&quot; pointcut-ref=&quot;myPointcut&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                4ï¼‰æŠ›å‡ºå¼‚å¸¸é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    æ ¼å¼ï¼š&lt;aop:after-throwing method=&quot;&quot; pointcut-ref=&quot;&quot; throwing=&quot;å‚æ•°2åç§°&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    é€šçŸ¥æ–¹æ³•å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        å‚æ•°1ï¼šç±»å‹ JoinPoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        å‚æ•°2ï¼šç±»å‹ Throwable ï¼Œåç§°é€šè¿‡ throwingå±æ€§ç¡®å®šåç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        public void myAfterThrowing(JoinPoint joinPoint, Throwable e){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    ä¾‹å¦‚ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                        &lt;aop:after-throwing method=&quot;myAfterThrowing&quot; pointcut-ref=&quot;myPointcut&quot; throwing=&quot;e&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                5ï¼‰æœ€ç»ˆé€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    æ ¼å¼ï¼š&lt;aop:after method=&quot;&quot; pointcut-ref=&quot;&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    é€šçŸ¥æ–¹æ³•å‚æ•°ç±»å‹ JoinPoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">after</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myAfter</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pointcut-ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">myPointcut</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">aspect</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aspectj-ç¼–ç¨‹åŸºäºæ³¨è§£">AspectJ ç¼–ç¨‹,åŸºäºæ³¨è§£<a href="#aspectj-ç¼–ç¨‹åŸºäºæ³¨è§£" class="hash-link" aria-label="Direct link to AspectJ ç¼–ç¨‹,åŸºäºæ³¨è§£" title="Direct link to AspectJ ç¼–ç¨‹,åŸºäºæ³¨è§£">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. å¼€å¯åŒ…æ‰«æ, æ‰«ææ³¨è§£ç±»ï¼š@Service ã€@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">é…ç½®æ–‡ä»¶è¦é…ç½®ï¼š&lt;context:component-scan&gt;&lt;/context:component-scan&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. aspectj æ³¨è§£è‡ªåŠ¨ä»£ç†ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Aspect ã€æ ‡è¯†åˆ‡é¢ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PointCutã€å®šä¹‰å¯å¤ç”¨çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Beforeã€å‰ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @AfterReturning åç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Around ç¯ç»•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @AfterThrowing æŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @After æœ€ç»ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. æœ€åè¿˜è¦é…ç½®ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç°ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserServiceImpl implements UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;d_aspectj.a_xml addUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String updateUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;d_aspectj.a_xml updateUser()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //int i = 1/ 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;xxxx&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ‡é¢ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åˆ‡é¢ç±»ï¼Œå®šä¹‰éœ€è¦é€šçŸ¥ï¼Œä¹‹åéœ€è¦é€šè¿‡é…ç½®æ–‡ä»¶ç¡®å®šå…·ä½“é€šçŸ¥ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component //åˆ‡é¢ç±»ä¸å±äºä»»ä½•å±‚ï¼Œæ‰€ä»¥ç”¨é€šç”¨çš„æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Aspect    //è¡¨ç¤ºæ­¤ç±»æ˜¯åˆ‡é¢ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAspect{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å®šä¹‰å¯å¤ç”¨çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä½¿ç”¨@Pointcutã€‚å…¶ä»–å¢å¼ºå†…å®¹æ–¹æ³•çš„æ³¨è§£ç›´æ¥è°ƒç”¨æ–¹æ³•åmyPointCut() egï¼š@before(&quot;myPointCut()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Pointcut(&quot;execution(* com.xiaoyu.spring.learn.*.*(..))&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void myPointCut(){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //  è¿™ä¸ªæ³¨è§£åªæœ‰ä¸€ä¸ªå±æ€§value=&quot;&quot;,å¯ä»¥çœç•¥å±æ€§åvalueï¼Œç›´æ¥å†™å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //@Before(&quot;execution(* com.xiaoyu.spring.learn.*.*(..))&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myBefore(JoinPoint joinPoint){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å‰ç½®é€šçŸ¥ :&quot; + joinPoint.getSignature().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¿™ä¸ªæ³¨è§£æœ‰å¤šä¸ªå±æ€§ï¼Œä¸èƒ½çœç•¥å±æ€§å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //@AfterReturning(value=&quot;execution(* com.xiaoyu.spring.learn.*.*(..))&quot;,returning=&quot;ret&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfterReturning(JoinPoint joinPoint,Object ret){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;åç½®é€šçŸ¥ï¼š&quot; + joinPoint.getSignature().getName() + &quot; , &quot; + ret);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è¿™é‡Œçš„æ³¨è§£ç›´æ¥è°ƒç”¨äº†å¯å¤ç”¨çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œç›´æ¥è°ƒç”¨å¯¹åº”çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //@Around(&quot;myPointCut()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object myAround(ProceedingJoinPoint joinPoint) throws Throwable{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç¯ç»•å‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object obj = joinPoint.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç¯ç»•å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ³¨è§£è°ƒç”¨çš„æ˜¯å¯å¤ç”¨çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //@AfterThrowing(value=&quot;myPointCut()&quot;,throwing=&quot;e&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfterThrowing(JoinPoint joinPoint, Throwable e){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;æŠ›å‡ºå¼‚å¸¸é€šçŸ¥ï¼š&quot; + joinPoint.getSignature().getName() + &quot; , &quot; + e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @After(&quot;myPointCut()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void myAfter(JoinPoint joinPoint){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;æœ€ç»ˆ&quot;+ joinPoint.getSignature().getName() );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//è¦å¼•å…¥spring-testçš„jaråŒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations=&quot;classpath:config/beans.xml&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestAnno {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private UserService userService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.updateUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸ºäº†è®©æ³¨è§£ç”Ÿæ•ˆ, éœ€è¦é…ç½®æ³¨è§£æ‰«æ</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">aop</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/aop</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">context</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/context</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context/spring-context.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1.1 ç”¨æ³¨è§£æ ‡è¯†ç›®æ ‡ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            @Service      // serviceå±‚æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            public class UserServiceImpl</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1.2 ä¸ºäº†è®©æ·»åŠ æ³¨è§£ç±»ç”Ÿæ•ˆï¼Œå¿…é¡»å¼€å¯åŒ…æ‰«æã€‚éœ€è¦contextå‘½åç©ºé—´ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">base-package</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2 ä½¿ç”¨æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        @Component  // åˆ‡é¢ç±»ä¸å±äºä»»ä½•å±‚ï¼Œä½¿ç”¨é€šç”¨æ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        public class MyAspect{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        3.1 &lt;aop:aspect ref=&quot;myAspectId&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            @Component      åˆ‡é¢ç±»ä¸å±äºä»»ä½•å±‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            @Aspect        æ ‡è¯†åˆ‡é¢ç±»ï¼ˆè¡¨ç¤ºè®©åˆ‡é¢ç±»æˆä¸ºåˆ‡é¢ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            public class MyAspect{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        3.2 ç¡®å®šé€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            å‰ç½®é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                @Before(&quot;åˆ‡å…¥ç‚¹è¡¨è¾¾å¼&quot;)  ç­‰æ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                &lt;aop:before method=&quot;æ–¹æ³•åç§°&quot; pointcut=&quot;åˆ‡å…¥ç‚¹è¡¨è¾¾å¼&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            åç½®é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                @AfterReturning(value=&quot;è¡¨è¾¾å¼&quot;,returning=&quot;å‚æ•°2åç§°&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            ç¯ç»•</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                @Around(&quot;myPointCut()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            æŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                @AfterThrowing(value=&quot;myPointCut()&quot;,throwing=&quot;å‚æ•°2åç§°&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            æœ€ç»ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                @After(&quot;myPointCut()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        3.3 å£°æ˜å…¬å…±åˆ‡å…¥ç‚¹è¡¨è¾¾å¼(å¯ä»¥å¤ç”¨)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            @Pointcut(&quot;execution(* com.itheima.d_aspectj.b_annotation.*.*(..))&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            private void myPointCut(){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ ‡æ˜ä½¿ç”¨æ³¨è§£å¼€å‘aspectj å¿…é¡»è¿›è¡Œçš„é…ç½® --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">aspectj-autoproxy</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">aspectj-autoproxy</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>JDBC</h1><p>references: <a href="https://blog.csdn.net/fysuccess/article/details/66972554" target="_blank" rel="noopener noreferrer">1</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ•°æ®åº“è¿æ¥æ± ">æ•°æ®åº“è¿æ¥æ± <a href="#æ•°æ®åº“è¿æ¥æ± " class="hash-link" aria-label="Direct link to æ•°æ®åº“è¿æ¥æ± " title="Direct link to æ•°æ®åº“è¿æ¥æ± ">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="c3p0">C3P0<a href="#c3p0" class="hash-link" aria-label="Direct link to C3P0" title="Direct link to C3P0">â€‹</a></h3><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">c3p0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">c3p0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.9.1.2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">destroy-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">close</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.url}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.driverClassName}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.username}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.password}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--è¿æ¥æ± ä¸­ä¿ç•™çš„æœ€å¤§è¿æ¥æ•°ã€‚Default: 15 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxPoolSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">100</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--è¿æ¥æ± ä¸­ä¿ç•™çš„æœ€å°è¿æ¥æ•°ã€‚--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">minPoolSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--åˆå§‹åŒ–æ—¶è·å–çš„è¿æ¥æ•°ï¼Œå–å€¼åº”åœ¨minPoolSizeä¸maxPoolSizeä¹‹é—´ã€‚Default: 3 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">initialPoolSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">10</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--æœ€å¤§ç©ºé—²æ—¶é—´,60ç§’å†…æœªä½¿ç”¨åˆ™è¿æ¥è¢«ä¸¢å¼ƒã€‚è‹¥ä¸º0åˆ™æ°¸ä¸ä¸¢å¼ƒã€‚Default: 0 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxIdleTime</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">30</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--å½“è¿æ¥æ± ä¸­çš„è¿æ¥è€—å°½çš„æ—¶å€™c3p0ä¸€æ¬¡åŒæ—¶è·å–çš„è¿æ¥æ•°ã€‚Default: 3 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">acquireIncrement</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">5</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--JDBCçš„æ ‡å‡†å‚æ•°ï¼Œç”¨ä»¥æ§åˆ¶æ•°æ®æºå†…åŠ è½½çš„PreparedStatementsæ•°é‡ã€‚Default: 0--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxStatements</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--æ¯60ç§’æ£€æŸ¥æ‰€æœ‰è¿æ¥æ± ä¸­çš„ç©ºé—²è¿æ¥ã€‚Default: 0 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">idleConnectionTestPeriod</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">60</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--å®šä¹‰åœ¨ä»æ•°æ®åº“è·å–æ–°è¿æ¥å¤±è´¥åé‡å¤å°è¯•çš„æ¬¡æ•°ã€‚Default: 30 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">acquireRetryAttempts</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">30</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--è·å–è¿æ¥å¤±è´¥å°†ä¼šå¼•èµ·æ‰€æœ‰ç­‰å¾…è¿æ¥æ± æ¥è·å–è¿æ¥çš„çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ã€‚Default: false--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">breakAfterAcquireFailure</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--å› æ€§èƒ½æ¶ˆè€—å¤§è¯·åªåœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨å®ƒã€‚Default: false --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">testConnectionOnCheckout</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">false</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dbcp">DBCP<a href="#dbcp" class="hash-link" aria-label="Direct link to DBCP" title="Direct link to DBCP">â€‹</a></h3><p>å¼•å…¥ jar</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">commons-dbcp</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">commons-dbcp</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.4</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">commons-collections</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">commons-collections</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.2.2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">commons-pool</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">commons-pool</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.6</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">destroy-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">close</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.apache.commons.dbcp.BasicDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClassName</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.driverClassName}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">url</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.url}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.username}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.password}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ± å¯åŠ¨æ—¶åˆ›å»ºçš„è¿æ¥æ•°é‡ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">initialSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">5</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- åŒä¸€æ—¶é—´å¯ä»¥ä»æ± åˆ†é…çš„æœ€å¤šè¿æ¥æ•°é‡ã€‚è®¾ç½®ä¸º0æ—¶è¡¨ç¤ºæ— é™åˆ¶ã€‚ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxActive</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">50</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ± é‡Œä¸ä¼šè¢«é‡Šæ”¾çš„æœ€å¤šç©ºé—²è¿æ¥æ•°é‡ã€‚è®¾ç½®ä¸º0æ—¶è¡¨ç¤ºæ— é™åˆ¶ã€‚ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxIdle</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">10</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- åœ¨ä¸æ–°å»ºè¿æ¥çš„æ¡ä»¶ä¸‹ï¼Œæ± ä¸­ä¿æŒç©ºé—²çš„æœ€å°‘è¿æ¥æ•°ã€‚ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">minIdle</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è®¾ç½®è‡ªåŠ¨å›æ”¶è¶…æ—¶è¿æ¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">removeAbandoned</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è‡ªåŠ¨å›æ”¶è¶…æ—¶æ—¶é—´(ä»¥ç§’æ•°ä¸ºå•ä½) --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">removeAbandonedTimeout</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">200</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è®¾ç½®åœ¨è‡ªåŠ¨å›æ”¶è¶…æ—¶è¿æ¥çš„æ—¶å€™æ‰“å°è¿æ¥çš„è¶…æ—¶é”™è¯¯  --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">logAbandoned</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ç­‰å¾…è¶…æ—¶ä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œåœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œæ± ç­‰å¾…è¿æ¥è¢«å›æ”¶çš„æœ€é•¿æ—¶é—´ï¼ˆå½“æ²¡æœ‰å¯ç”¨è¿æ¥æ—¶ï¼‰ã€‚è®¾ç½®ä¸º-1è¡¨ç¤ºæ— é™ç­‰å¾…ã€‚--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxWait</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">100</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="druid">Druid<a href="#druid" class="hash-link" aria-label="Direct link to Druid" title="Direct link to Druid">â€‹</a></h3><p>æ•°æ®æºé…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.alibaba.druid.pool.DruidDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">init-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">init</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">destroy-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">close</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- åŸºæœ¬å±æ€§ urlã€userã€password --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">url</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.url}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.username}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.password}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®åˆå§‹åŒ–å¤§å°ã€æœ€å°ã€æœ€å¤§ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">initialSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">minIdle</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxActive</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">20</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxWait</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">60000</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">timeBetweenEvictionRunsMillis</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">60000</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">minEvictableIdleTimeMillis</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">300000</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ‰“å¼€PSCacheï¼Œå¹¶ä¸”æŒ‡å®šæ¯ä¸ªè¿æ¥ä¸ŠPSCacheçš„å¤§å° --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">poolPreparedStatements</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxPoolPreparedStatementPerConnectionSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">20</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">filters</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">stat</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>web.xml ä¸­çš„é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!--druid WebStatFilterç”¨äºé‡‡é›†web-jdbcå…³è”ç›‘æ§çš„æ•°æ®--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">DruidWebStatFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba.druid.support.http.WebStatFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">exclusions</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">DruidWebStatFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--druidè®¿é—®ç›‘æ§ç•Œé¢ /druid/index.html--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">DruidStatView</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba.druid.support.http.StatViewServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">DruidStatView</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/druid/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bonecp">BoneCP<a href="#bonecp" class="hash-link" aria-label="Direct link to BoneCP" title="Direct link to BoneCP">â€‹</a></h3><p>å¼•å…¥ jar</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.jolbox</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">bonecp-spring</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.8.0.RELEASE</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- BoneCp Datasource --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSourceBoneCp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.jolbox.bonecp.BoneCPDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">destroy-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">close</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${db.driverClass}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${db.url}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${db.username}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${db.password}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">idleConnectionTestPeriodInMinutes</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">idleMaxAgeInMinutes</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxConnectionsPerPartition</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">minConnectionsPerPartition</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">partitionCount</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">acquireIncrement</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">statementsCacheSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">100</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">lazyInit</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxConnectionAgeInSeconds</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">20</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">defaultReadOnly</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hikaricp">HikariCP<a href="#hikaricp" class="hash-link" aria-label="Direct link to HikariCP" title="Direct link to HikariCP">â€‹</a></h3><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Hikari Datasource --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSourceHikari</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.zaxxer.hikari.HikariDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">destroy-method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">shutdown</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- &lt;property name=&quot;driverClassName&quot; value=&quot;${db.driverClass}&quot; /&gt; --&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ— éœ€æŒ‡å®šï¼Œé™¤éç³»ç»Ÿæ— æ³•è‡ªåŠ¨è¯†åˆ« --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${db.username}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${db.password}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è¿æ¥åªè¯»æ•°æ®åº“æ—¶é…ç½®ä¸ºtrueï¼Œ ä¿è¯å®‰å…¨ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">readOnly</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">false</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ç­‰å¾…è¿æ¥æ± åˆ†é…è¿æ¥çš„æœ€å¤§æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é•¿è¿˜æ²¡å¯ç”¨çš„è¿æ¥åˆ™å‘ç”ŸSQLExceptionï¼Œ ç¼ºçœ:30ç§’ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">connectionTimeout</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">30000</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ä¸€ä¸ªè¿æ¥idleçŠ¶æ€çš„æœ€å¤§æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ï¼Œè¶…æ—¶åˆ™è¢«é‡Šæ”¾ï¼ˆretiredï¼‰ï¼Œç¼ºçœ:10åˆ†é’Ÿ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">idleTimeout</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">600000</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ä¸€ä¸ªè¿æ¥çš„ç”Ÿå‘½æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ï¼Œè¶…æ—¶è€Œä¸”æ²¡è¢«ä½¿ç”¨åˆ™è¢«é‡Šæ”¾ï¼ˆretiredï¼‰ï¼Œç¼ºçœ:30åˆ†é’Ÿï¼Œå»ºè®®è®¾ç½®æ¯”æ•°æ®åº“è¶…æ—¶æ—¶é•¿å°‘30ç§’ï¼Œå‚è€ƒMySQL wait_timeoutå‚æ•°ï¼ˆshow variables like &#x27;%timeout%&#x27;;ï¼‰ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maxLifetime</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1800000</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è¿æ¥æ± ä¸­å…è®¸çš„æœ€å¤§è¿æ¥æ•°ã€‚ç¼ºçœå€¼ï¼š10ï¼›æ¨èçš„å…¬å¼ï¼š((core_count * 2) + effective_spindle_count) --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maximumPoolSize</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">15</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="jdbctemplate">JdbcTemplate<a href="#jdbctemplate" class="hash-link" aria-label="Direct link to JdbcTemplate" title="Direct link to JdbcTemplate">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quickstart-1">quickstart<a href="#quickstart-1" class="hash-link" aria-label="Direct link to quickstart" title="Direct link to quickstart">â€‹</a></h3><ul><li>jar åŒ…: spring-jdbc, spring-tx, æ•°æ®åº“é©±åŠ¨, è¿æ¥æ±  jar</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class TestJDBCTemplate {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // JDBCæ¨¡æ¿ä¾èµ–äºè¿æ¥æ± æ¥è·å¾—æ•°æ®çš„è¿æ¥ï¼Œæ‰€ä»¥å¿…é¡»å…ˆè¦æ„é€ è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DriverManagerDataSource dataSource = new DriverManagerDataSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/spring&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dataSource.setUsername(&quot;root&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dataSource.setPassword(&quot;123456&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆ›å»ºJDBCæ¨¡æ¿</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        JdbcTemplate jdbcTemplate = new JdbcTemplate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨æ„é€ æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jdbcTemplate.setDataSource(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // sqlè¯­å¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String sql = &quot;select count(*)  from user&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Long num = (long) jdbcTemplate.queryForObject(sql, Long.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(num);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨ spring çš„ç‰¹æ€§å</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">context</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/context</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">aop</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/aop</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">tx</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/tx</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/context</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/context/spring-context.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/aop/spring-aop.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/tx</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/tx/spring-tx.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- IOCå’ŒDIçš„æ³¨è§£æ‰«æ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">base-package</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.spring</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">component-scan</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ‰“å¼€AOPçš„æ³¨è§£ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">aspectj-autoproxy</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">aspectj-autoproxy</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- c3p0æ•°æ®æº --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql://localhost:3306/spring_03</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mysql.jdbc.Driver</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">123456</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.jdbc.core.JdbcTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.spring.dao.UserDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.spring.service.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private JdbcTemplate jdbcTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public JdbcTemplate getJdbcTemplate() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return jdbcTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.jdbcTemplate = jdbcTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser(User user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String sql = &quot;insert into user (username, password) values (?, ?)&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jdbcTemplate.update(sql, user.getUsername(), user.getPassword());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dao-å®ç°ç±»ç»§æ‰¿-jdbcdaosupport-æ”¯æŒç±»">Dao å®ç°ç±»ç»§æ‰¿ JdbcDaoSupport æ”¯æŒç±»<a href="#dao-å®ç°ç±»ç»§æ‰¿-jdbcdaosupport-æ”¯æŒç±»" class="hash-link" aria-label="Direct link to Dao å®ç°ç±»ç»§æ‰¿ JdbcDaoSupport æ”¯æŒç±»" title="Direct link to Dao å®ç°ç±»ç»§æ‰¿ JdbcDaoSupport æ”¯æŒç±»">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// User:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String username;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String password;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getter&amp;setter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// UserDao :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.jdbc.core.support.JdbcDaoSupport;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserDao extends JdbcDaoSupport {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ç»§æ‰¿äº†JdbcDaoSupportå·¥å…·ç±»ï¼Œçœç•¥å¦‚ä¸‹ä»£ç ï¼Œç›¸åº”é…ç½®è¦æ›´æ”¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  private JdbcTemplate jdbcTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//      this.jdbcTemplate = jdbcTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;User&gt; findAll(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return getJdbcTemplate().query(&quot;select * from t_user&quot;, ParameterizedBeanPropertyRowMapper.newInstance(User.class));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations=&quot;classpath:config/beans.xml&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestSupport {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Qualifier(&quot;userDaoId&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private UserDao userDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;User&gt; findAll = userDao.findAll();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (User user : findAll) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®æ•°æ®æº c3p0 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSourceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mysql.jdbc.Driver</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql:///spring_day02_db</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1234</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--è¿™é‡Œåˆ é™¤äº†JdbcTemplateçš„bean--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- dao , å°†æ•°æ®æºDataSource æ³¨å…¥ç»™daoï¼Œdaoæ²¡æœ‰ç›¸å…³å±æ€§ï¼Œå°±ç»™å®ƒçš„çˆ¶ç±» JdbcDaoSupportï¼Œè€ŒJdbcDaoSupportåº•å±‚ä½¿ç”¨æ•°æ®æºåˆ›å»ºäº†Jdbcæ¨¡æ¿ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDaoId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.e_jdbc.d_support.UserDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSourceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥-properties-æ–‡ä»¶">æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥ Properties æ–‡ä»¶<a href="#æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥-properties-æ–‡ä»¶" class="hash-link" aria-label="Direct link to æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥ Properties æ–‡ä»¶" title="Direct link to æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥ Properties æ–‡ä»¶">â€‹</a></h3><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">context</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/context</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/context/spring-context.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- åŠ è½½propertiesæ–‡ä»¶ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">context:</span><span class="token tag" style="color:#00009f">property-placeholder</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">location</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">classpath:config/jdbc.properties</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®æ•°æ®æº c3p0ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­å†…å®¹   ${key} --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSourceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.driverClass}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.jdbcUrl}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.user}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.password}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- dao , å°†æ•°æ®æºDataSource æ³¨å…¥ç»™daoçˆ¶ç±» JdbcDaoSupportï¼Œåº•å±‚ä½¿ç”¨æ•°æ®æºåˆ›å»ºæ¨¡æ¿ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userDaoId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.e_jdbc.e_properties.UserDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSourceId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>properties æ–‡ä»¶ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jdbc.driverClass=com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jdbc.jdbcUrl=jdbc:mysql:///spring_day02_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jdbc.user=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jdbc.password=1234</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>äº‹åŠ¡ç®¡ç†</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº‹åŠ¡å®ç°åŸç†">äº‹åŠ¡å®ç°åŸç†<a href="#äº‹åŠ¡å®ç°åŸç†" class="hash-link" aria-label="Direct link to äº‹åŠ¡å®ç°åŸç†" title="Direct link to äº‹åŠ¡å®ç°åŸç†">â€‹</a></h2><p>Java ä¸­æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„å°±æ˜¯åœ¨ service å±‚çš„å¢åˆ æ”¹æ–¹æ³•ä¸Šæ·»åŠ @Transactional æ³¨è§£ï¼Œè®© spring å»å¸®æˆ‘ä»¬ç®¡ç†äº‹åŠ¡ã€‚</p><p>åº•å±‚ä¼šç»™æˆ‘ä»¬çš„ service ç»„ä»¶ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ proxy åŠ¨æ€ä»£ç†ï¼Œè¿™æ ·æ‰€æœ‰å¯¹ service ç»„ä»¶çš„æ–¹æ³•éƒ½ç”±å®ƒå¯¹åº”çš„ proxy æ¥æ¥ç®¡ï¼Œå½“ proxy åœ¨è°ƒç”¨å¯¹åº”ä¸šåŠ¡æ–¹æ³•æ¯”å¦‚ add()æ—¶ï¼Œproxy å°±ä¼šåŸºäº AOP çš„æ€æƒ³åœ¨è°ƒç”¨çœŸæ­£çš„ä¸šåŠ¡æ–¹æ³•å‰æ‰§è¡Œ setAutoCommitï¼ˆfalseï¼‰æ‰“å¼€äº‹åŠ¡ã€‚</p><p>ç„¶ååœ¨ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå®Œåæ‰§è¡Œ commit æäº¤äº‹åŠ¡ï¼Œå½“åœ¨æ‰§è¡Œä¸šåŠ¡æ–¹æ³•çš„è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸æ—¶å°±ä¼šæ‰§è¡Œ rollback æ¥å›æ»šäº‹åŠ¡ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transactiondefinition-äº‹åŠ¡ä¼ æ’­">TransactionDefinition äº‹åŠ¡ä¼ æ’­<a href="#transactiondefinition-äº‹åŠ¡ä¼ æ’­" class="hash-link" aria-label="Direct link to TransactionDefinition äº‹åŠ¡ä¼ æ’­" title="Direct link to TransactionDefinition äº‹åŠ¡ä¼ æ’­">â€‹</a></h2><p>@transaction(propagation=...)</p><p>Spring åœ¨ TransactionDefinition æ¥å£ä¸­è§„å®šäº† 7 ç§ç±»å‹çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º, <font color="red">å®ƒä»¬è§„å®šäº†äº‹åŠ¡æ–¹æ³•å’Œäº‹åŠ¡æ–¹æ³•å‘ç”ŸåµŒå¥—è°ƒç”¨æ—¶æ˜¯å¦åŠ å…¥è°ƒç”¨æ–¹çš„äº‹åŠ¡</font></p><p>ä¼ æ’­è¡Œä¸ºï¼šä¸€ä¸ªä¸šåŠ¡ A (äº‹åŠ¡æ–¹æ³•A)ï¼Œè°ƒç”¨å¦ä¸€ä¸ªä¸šåŠ¡ B (å¸¦æœ‰äº‹åŠ¡)ï¼ŒBæ˜¯å¦åŠ å…¥ A çš„äº‹åŠ¡</p><ul><li><p><code>PROPAGATION_REQUIRED</code> required å¿…é¡» ï¼ˆé»˜è®¤å€¼ï¼‰</p><p>å¦‚æœ A ä½¿ç”¨äº‹åŠ¡ï¼Œé‚£ä¹ˆ B ä½¿ç”¨åŒä¸€ä¸ªäº‹åŠ¡ (æ­¤æ—¶ B çš„äº‹åŠ¡é…ç½®éƒ½æ— æ•ˆ, è¢« A çš„äº‹åŠ¡è¦†ç›–äº†)ã€‚å¦‚æœ A æ²¡æœ‰äº‹åŠ¡ï¼ŒB åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</p></li><li><p><code>PROPAGATION_REQUIRES_NEW</code> requires new å¿…é¡»æ–°çš„</p><p>æ— è®º a æ˜¯å¦å­˜åœ¨äº‹åŠ¡, b éƒ½å°†åˆ›å»ºæ–°çš„äº‹åŠ¡</p></li><li><p><code>PROPAGATION_NESTED</code> nested åµŒå¥—</p><p>AB ä½¿ç”¨åµŒå¥—äº‹åŠ¡ï¼Œåº•å±‚ä½¿ç”¨ Savepoint</p></li><li><p>PROPAGATION_SUPPORTS supports æ”¯æŒ</p><p>A ä½¿ç”¨äº‹åŠ¡ï¼ŒB ä½¿ç”¨åŒä¸€ä¸ªäº‹åŠ¡ã€‚A æ²¡æœ‰äº‹åŠ¡ï¼ŒB å°†ä»¥éäº‹åŠ¡æ‰§è¡Œ</p></li><li><p>PROPAGATION_NOT_SUPPORTED not supported ä¸æ”¯æŒ</p><p>æ— è®º a æ˜¯å¦å­˜åœ¨äº‹åŠ¡, b éƒ½ä»¥éäº‹åŠ¡æ‰§è¡Œ</p></li><li><p>PROPAGATION_NEVER never ä»ä¸</p><p>A ä½¿ç”¨äº‹åŠ¡ï¼ŒB å°†æŠ›å¼‚å¸¸ã€‚A æ²¡æœ‰äº‹åŠ¡ï¼ŒB å°†ä»¥éäº‹åŠ¡æ‰§è¡Œ</p></li><li><p>PROPAGATION_MANDATORY mandatory å¼ºåˆ¶</p><p>A ä½¿ç”¨äº‹åŠ¡ï¼ŒB ä½¿ç”¨åŒä¸€ä¸ªäº‹åŠ¡ã€‚A æ²¡æœ‰äº‹åŠ¡ï¼ŒB æŠ›å‡ºå¼‚å¸¸</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº‹åŠ¡ç›¸å…³-api">äº‹åŠ¡ç›¸å…³ api<a href="#äº‹åŠ¡ç›¸å…³-api" class="hash-link" aria-label="Direct link to äº‹åŠ¡ç›¸å…³ api" title="Direct link to äº‹åŠ¡ç›¸å…³ api">â€‹</a></h2><p>ä¸‰ä¸ªé¡¶çº§æ¥å£(è§„èŒƒ)</p><p>æ¶‰åŠåˆ°çš„ jar: spring-tx, spring-jdbc, orm çš„ jar</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="platformtransactionmanager">PlatformTransactionManager<a href="#platformtransactionmanager" class="hash-link" aria-label="Direct link to PlatformTransactionManager" title="Direct link to PlatformTransactionManager">â€‹</a></h3><p>spring dao ä½¿ç”¨ä¸åŒæŠ€æœ¯ï¼Œéœ€è¦çš„äº‹åŠ¡ç®¡ç†å™¨ä¸åŒã€‚JDBC äº‹åŠ¡ç®¡ç†å™¨ï¼šDataSourceTransactionManager, Hibernate äº‹åŠ¡ç®¡ç†å™¨ï¼šHibernateTransactionManager</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// äº‹åŠ¡çŠ¶æ€ éœ€è¦é€šè¿‡ â€œäº‹åŠ¡è¯¦æƒ…â€çš„é…ç½®ï¼Œä»è€Œè·å¾—äº‹åŠ¡çŠ¶æ€ï¼Œé€šè¿‡çŠ¶æ€ç»´æŠ¤äº‹åŠ¡ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TransactionStatus getTransaction(TransactionDefinition definition);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn.setAutocommit(false) // jdbcå¼€å¯äº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commit(TransactionStatus) //æäº¤äº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session.beginTransaction() //hibernateå¼€å¯äº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollback(TransactionStatus) //å›æ»šäº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transactionstatus">TransactionStatus<a href="#transactionstatus" class="hash-link" aria-label="Direct link to TransactionStatus" title="Direct link to TransactionStatus">â€‹</a></h3><p>äº‹åŠ¡çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯ spring åº•å±‚è‡ªåŠ¨ä½¿ç”¨</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-jdbc-æ“ä½œäº‹åŠ¡">ä½¿ç”¨ jdbc æ“ä½œäº‹åŠ¡<a href="#ä½¿ç”¨-jdbc-æ“ä½œäº‹åŠ¡" class="hash-link" aria-label="Direct link to ä½¿ç”¨ jdbc æ“ä½œäº‹åŠ¡" title="Direct link to ä½¿ç”¨ jdbc æ“ä½œäº‹åŠ¡">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// æŸä¸ªäº‹åŠ¡, åŒ…æ‹¬ABCD å››ä¸ªæ­¥éª¤(ä¸€ä¸ªæ•´ä½“äº‹åŠ¡)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection conn = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è·å¾—è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn = è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //#1 å¼€å¯äº‹åŠ¡, æ‰‹åŠ¨æäº¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn.setAutocommit(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //#2 å›æ»šäº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn.rollback();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} finally{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //#3 æäº¤äº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn.commit();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //é‡Šæ”¾èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//--Savepoint ï¼ˆä¿å­˜ç‚¹/å›æ»šç‚¹ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­, ABï¼ˆå¿…é€‰ï¼‰ï¼ŒCDï¼ˆå¯é€‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection conn = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Savepoint savepoint = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è·å¾—è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn = è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //#1 å¼€å¯äº‹åŠ¡, è®¾ç½®æ‰‹åŠ¨æäº¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn.setAutocommit(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //#2 è®¾ç½®å›æ»šç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    savepoint = conn.setSavepoint();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(savepoint != null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // savepoint ä¸ä¸ºç©º, è¯æ˜ ABæˆåŠŸï¼ŒCDå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å›æ»šåˆ°CDä¹‹å‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        conn.rollback(savepoint);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ABå¼‚å¸¸ï¼Œå›æ»šåˆ°å¼€å§‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        conn.rollback();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} finally{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //#4 æäº¤äº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn.commit();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //é‡Šæ”¾èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦">äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦<a href="#äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦" class="hash-link" aria-label="Direct link to äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦" title="Direct link to äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‡†å¤‡">å‡†å¤‡<a href="#å‡†å¤‡" class="hash-link" aria-label="Direct link to å‡†å¤‡" title="Direct link to å‡†å¤‡">â€‹</a></h3><p>ä¾èµ–:</p><ul><li>spring-core, spring-beans, spring-context, spring-context-support, (spring-web)</li><li>spring-test</li><li>spring-jdbc, spring-tx</li><li>aop è”ç›Ÿè§„èŒƒæ¥å£, spring-aop(spring å®ç°); aspectj è§„èŒƒæ¥å£, spring-aspect(spring å®ç°);</li><li>æ•°æ®åº“é©±åŠ¨, è¿æ¥æ± </li></ul><p>æ²¡æœ‰äº‹åŠ¡çš„ä»£ç </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AccountDaoæ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface AccountDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ±‡æ¬¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param outer æ±‡æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void out(String outer , int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ”¶æ¬¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param inner æ”¶æ¬¾æ”¶æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void in(String inner , int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AccountDaoå®ç°ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountDaoImpl extends JdbcDaoSupport implements AccountDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void out(String outer, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getJdbcTemplate().update(&quot;update account set money = money - ? where username = ?&quot;, money,outer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void in(String inner, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getJdbcTemplate().update(&quot;update account set money = money + ? where username = ?&quot;, money,inner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AccountServiceæ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface AccountService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è½¬è´¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param outer æ±‡æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param inner æ”¶æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param mo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void transfer(String outer,String inner,int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AccountServiceå®ç°ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountServiceImpl implements AccountService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AccountDao accountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setAccountDao(AccountDao accountDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.accountDao = accountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void transfer(String outer, String inner, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä¸¤ä¸ªæ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        accountDao.out(outer, money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ¨¡æ‹Ÿæ–­ç”µ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //int i = 1/0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        accountDao.in(inner, money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations=&quot;classpath:applicationContext.xml&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestApp {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AccountService accountService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        accountService.transfer(&quot;jack&quot;, &quot;rose&quot;, 100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1.æ•°æ®æº --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mysql.jdbc.Driver</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql:///spring_day03_db</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1234</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2.daoï¼Œæ•°æ®æºé…ç½®ç»™dao--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.dao.impl.AccountDaoImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3.service--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.service.impl.AccountServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰‹åŠ¨å¼€å‘äº‹åŠ¡">æ‰‹åŠ¨å¼€å‘äº‹åŠ¡<a href="#æ‰‹åŠ¨å¼€å‘äº‹åŠ¡" class="hash-link" aria-label="Direct link to æ‰‹åŠ¨å¼€å‘äº‹åŠ¡" title="Direct link to æ‰‹åŠ¨å¼€å‘äº‹åŠ¡">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Daoæ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface AccountDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ±‡æ¬¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param outer æ±‡æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void out(String outer , int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ”¶æ¬¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param inner æ”¶æ¬¾æ”¶æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void in(String inner , int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Daoå®ç°ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.jdbc.core.support.JdbcDaoSupport;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.itheima.dao.AccountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountDaoImpl extends JdbcDaoSupport implements AccountDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void out(String outer, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getJdbcTemplate().update(&quot;update account set money = money - ? where username = ?&quot;, money,outer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void in(String inner, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getJdbcTemplate().update(&quot;update account set money = money + ? where username = ?&quot;, money,inner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Serviceæ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface AccountService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è½¬è´¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param outer æ±‡æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param inner æ”¶æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param mo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void transfer(String outer,String inner,int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">serviceå®ç°ç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountServiceImpl implements AccountService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AccountDao accountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setAccountDao(AccountDao accountDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.accountDao = accountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private TransactionTemplate transactionTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setTransactionTemplate(TransactionTemplate transactionTemplate) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.transactionTemplate = transactionTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override   //æ‰‹åŠ¨å°†å‚æ•°æ”¹æˆfinalçš„ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void transfer(final String outer, final String inner, final int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transactionTemplate.execute(new TransactionCallbackWithoutResult() {//æ²¡æœ‰è¿”å›ç»“æœçš„äº‹åŠ¡å›è°ƒå¯¹è±¡ï¼ŒåŒ¿åå†…éƒ¨ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void doInTransactionWithoutResult(TransactionStatus ts) {//ä¸šåŠ¡ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //ä¸¤ä¸ªæ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                accountDao.out(outer, money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // æ¨¡æ‹Ÿæ–­ç”µ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //int i = 1/0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                accountDao.in(inner, money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations=&quot;classpath:applicationContext.xml&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestApp {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AccountService accountService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        accountService.transfer(&quot;jack&quot;, &quot;rose&quot;, 100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1.æ•°æ®æºï¼Œè¿æ¥æ±  --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mysql.jdbc.Driver</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql:///spring</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1234</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2.dao--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.AccountDaoImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3.service--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.AccountServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transactionTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transactionTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4 åˆ›å»ºæ¨¡æ¿ï¼Œéœ€è¦æ³¨å…¥txManager --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transactionTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.transaction.support.TransactionTemplate</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transactionManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 5 é…ç½®äº‹åŠ¡ç®¡ç†å™¨,éœ€è¦Connectionè¿æ¥ï¼Œè¿æ¥ä»è¿æ¥æ±  --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.jdbc.datasource.DataSourceTransactionManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŠè‡ªåŠ¨äº‹åŠ¡ç”Ÿæˆä»£ç†">åŠè‡ªåŠ¨äº‹åŠ¡(ç”Ÿæˆä»£ç†)<a href="#åŠè‡ªåŠ¨äº‹åŠ¡ç”Ÿæˆä»£ç†" class="hash-link" aria-label="Direct link to åŠè‡ªåŠ¨äº‹åŠ¡(ç”Ÿæˆä»£ç†)" title="Direct link to åŠè‡ªåŠ¨äº‹åŠ¡(ç”Ÿæˆä»£ç†)">â€‹</a></h3><p>ä»£ç æ— éœ€æ”¹åŠ¨, å°±æ˜¯æ²¡æœ‰äº‹åŠ¡çš„ä»£ç </p><p>ä¸»è¦ä¿®æ”¹é…ç½®æ–‡ä»¶</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">é…ç½®ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1.æ•°æ®æº --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mysql.jdbc.Driver</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql:///spring</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1234</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2.dao--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.AccountDaoImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3.service--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.service.impl.AccountServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4 æ‰‹åŠ¨ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * TransactionProxyFactoryBean ç”Ÿäº§ä¸€ä¸ªå…·æœ‰äº‹åŠ¡ç®¡ç†èƒ½åŠ›çš„ä»£ç†ç±»ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    ** 1) æä¾›äº‹åŠ¡ç®¡ç†ï¼Œç®¡ç†äº‹åŠ¡ ï¼štransactionManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    ** 2) æ¥å£ï¼šproxyInterfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    ** 3) ç›®æ ‡ç±»ï¼štarget</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    ** 4) äº‹åŠ¡è¯¦æƒ…ï¼ˆäº‹åŠ¡å±æ€§ï¼‰ï¼štransactionAttributes ,éœ€è¦ç±»å‹Properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        prop.key : ç»™æŒ‡å®šæ–¹æ³•é…ç½®è¯¦æƒ…ï¼Œç›´æ¥ç¼–å†™æ–¹æ³•åç§°ã€ä¸å¸¦ï¼ˆï¼‰ã€‘ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            ä¾‹å¦‚ï¼štransfer æŒ‡å®šæ–¹æ³•å</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        prop.text: è¯¦æƒ…ï¼ˆè¯¦æƒ…éœ€è¦æ ¼å¼ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            æ ¼å¼ï¼šPROPAGATION,ISOLATION,readOnly,-Exception,+Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                ä¼ æ’­è¡Œä¸º        éš”ç¦»çº§åˆ«        æ˜¯å¦åªè¯»    -æœ‰å¼‚å¸¸å°±å›æ»š     +æœ‰å¼‚å¸¸ä»ç„¶æäº¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        ä¾‹å¦‚ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            &lt;prop key=&quot;transfer&quot;&gt;PROPAGATION_REQUIRED,ISOLATION_REPEATABLE_READ&lt;/prop&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                ä¼ æ’­è¡Œä¸ºå’Œéš”ç¦»çº§åˆ« éƒ½æ˜¯é»˜è®¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">proxyService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.transaction.interceptor.TransactionProxyFactoryBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transactionManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">proxyInterfaces</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.service.AccountService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transactionAttributes</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">props</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transfer</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">PROPAGATION_REQUIRED,ISOLATION_REPEATABLE_READ</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">prop</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">props</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 5 äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.jdbc.datasource.DataSourceTransactionManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº-xml">å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº xml<a href="#å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº-xml" class="hash-link" aria-label="Direct link to å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº xml" title="Direct link to å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº xml">â€‹</a></h3><p>åŒæ ·ä»£ç æ— éœ€æ”¹åŠ¨, åªéœ€è®¾ç½®å¥½é…ç½®æ–‡ä»¶</p><p>é…ç½®æ–‡ä»¶éœ€è¦æ·»åŠ çº¦æŸ
xmlns:aop=&quot;<a href="http://www.springframework.org/schema/aop%22" target="_blank" rel="noopener noreferrer">http://www.springframework.org/schema/aop&quot;</a>
xmlns:tx=&quot;<a href="http://www.springframework.org/schema/tx%22" target="_blank" rel="noopener noreferrer">http://www.springframework.org/schema/tx&quot;</a></p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">aop</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/aop</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">tx</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/tx</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/tx</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/tx/spring-tx.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1.æ•°æ®æº --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mysql.jdbc.Driver</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql:///spring_day03_db</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1234</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2.dao--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.dao.impl.AccountDaoImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3.service--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.service.impl.AccountServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4 ä½¿ç”¨aopè¿›è¡Œäº‹åŠ¡ç®¡ç† --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4.1 äº‹åŠ¡ç®¡ç†å™¨ï¼Œéœ€è¦æ³¨å…¥æ•°æ®æº  --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.jdbc.datasource.DataSourceTransactionManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4.2 é…ç½®äº‹åŠ¡è¯¦æƒ…ï¼ˆäº‹åŠ¡å±æ€§ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;txManagerd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        id é€šçŸ¥åç§°ï¼Œç”¨äºaopå¼•ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        transaction-manager ç¡®å®šç®¡ç†å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * &lt;tx:attributes&gt; é…ç½®äº‹åŠ¡è¯¦æƒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * &lt;tx:method name=&quot;transfer&quot; ...&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            * name ï¼š ç›®æ ‡å¯¹è±¡è¢«å¢å¼ºæ–¹æ³•ï¼Œä¸å¸¦æ‹¬å·ã€å¯¹é€‰ä¸­çš„åˆ‡å…¥ç‚¹æ–¹æ³•ä»¬ï¼Œæ¯ä¸ªå•ç‹¬é…ç½®ï¼Œä¾‹å¦‚å…·ä½“çš„è¯»å†™æƒé™ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        ä¾‹å¦‚ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        1. &lt;tx:method name=&quot;transfer&quot; propagation=&quot;REQUIRED&quot; isolation=&quot;DEFAULT&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            ä¼ æ’­è¡Œä¸ºï¼Œéš”ç¦»çº§åˆ« é»˜è®¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        2. &lt;tx:method name=&quot;transfer&quot; propagation=&quot;REQUIRED&quot; isolation=&quot;DEFAULT&quot; read-only=&quot;true&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            åªè¯»</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        3ã€‚ &lt;tx:method name=&quot;transfer&quot; propagation=&quot;REQUIRED&quot; isolation=&quot;DEFAULT&quot; no-rollback-for=&quot;java.lang.ArithmeticException&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            å¦‚æœæœ‰ ArithmeticExceptionå¼‚å¸¸ ä»æäº¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                rollback-for=&quot;&quot;  ç›¸å½“äº  -Exception å›æ»š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                no-rollback-for=&quot;&quot; ç›¸å½“äº +Exception æäº¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * æ–¹æ³•åç§°æ”¯æŒé€šé…ç¬¦*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            &lt;tx:method name=&quot;add*&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            &lt;tx:method name=&quot;update*&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            &lt;tx:method name=&quot;delete*&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            &lt;tx:method name=&quot;find*&quot; read-only=&quot;true&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">tx:</span><span class="token tag" style="color:#00009f">advice</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txAdvice</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">transaction-manager</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">tx:</span><span class="token tag" style="color:#00009f">attributes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">tx:</span><span class="token tag" style="color:#00009f">method</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">transfer</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">propagation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">REQUIRED</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">isolation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">DEFAULT</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">tx:</span><span class="token tag" style="color:#00009f">attributes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">tx:</span><span class="token tag" style="color:#00009f">advice</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4.3 AOPç¼–ç¨‹ï¼Œç¡®å®šåˆ‡å…¥ç‚¹ï¼Œå¹¶å°†é€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹ ## åˆ‡é¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * æ–¹ä¾¿ç†è§£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            ç›®æ ‡ç±»ï¼šABCD (è¿æ¥ç‚¹)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            ä½¿ç”¨AOPï¼šABC(åˆ‡å…¥ç‚¹)  ## AOPåœ¨ç›®æ ‡çš„æ–¹æ³•ä¸­ç­›é€‰ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">advisor</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">advice-ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txAdvice</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pointcut</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">execution(* com.itheima.service..*.*(..))</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">aop:</span><span class="token tag" style="color:#00009f">config</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£">å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£<a href="#å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£" class="hash-link" aria-label="Direct link to å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£" title="Direct link to å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Daoæ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface AccountDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ±‡æ¬¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param outer æ±‡æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void out(String outer , int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ”¶æ¬¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param inner æ”¶æ¬¾æ”¶æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void in(String inner , int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Daoå®ç°ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.jdbc.core.support.JdbcDaoSupport;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.itheima.dao.AccountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountDaoImpl extends JdbcDaoSupport implements AccountDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void out(String outer, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getJdbcTemplate().update(&quot;update account set money = money - ? where username = ?&quot;, money,outer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void in(String inner, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getJdbcTemplate().update(&quot;update account set money=money-? where username=?&quot;,money,inner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Serviceæ¥å£ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface AccountService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è½¬è´¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param outer æ±‡æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param inner æ”¶æ¬¾äºº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param mo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void transfer(String outer,String inner,int money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Serviceå®ç°ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æ³¨è§£å¯åŠ åœ¨ç±»ä¸Šï¼Œå¯åŠ åœ¨æŸä¸€ä¸ªæ–¹æ³•ä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transactional(propagation=Propagation.REQUIRED , isolation=Isolation.DEFAULT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountServiceImpl implements AccountService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AccountDao accountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setAccountDao(AccountDao accountDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.accountDao = accountDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void transfer(String outer, String inner, int money) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä¸¤ä¸ªæ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        accountDao.out(outer, money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ¨¡æ‹Ÿæ–­ç”µ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //int i = 1/0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        accountDao.in(inner, money);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">æµ‹è¯•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations=&quot;classpath:applicationContext.xml&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestApp {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AccountService accountService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void demo01(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        accountService.transfer(&quot;jack&quot;, &quot;rose&quot;, 100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">é…ç½®ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">aop</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/aop</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">tx</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/tx</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/tx</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/tx/spring-tx.xsd</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1.æ•°æ®æº --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">driverClass</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.mysql.jdbc.Driver</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbcUrl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">jdbc:mysql:///spring_day03_db</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">user</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1234</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2.dao --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.dao.impl.AccountDaoImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3.service --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.itheima.service.impl.AccountServiceImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">accountDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4.1 äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.springframework.jdbc.datasource.DataSourceTransactionManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4.2 å°†äº‹åŠ¡ç®¡ç†å™¨ï¼Œäº¤äºˆspringï¼Œæ–¹ä¾¿è¿›è¡Œæ³¨è§£çš„äº‹åŠ¡ç®¡ç† --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">tx:</span><span class="token tag" style="color:#00009f">annotation-driven</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">transaction-manager</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">txManager</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>spring web å¼€å‘</h1><p>æ™®é€šçš„ spring ç¨‹åºé€šè¿‡ main å‡½æ•°åŠ è½½ xml å³å¯å®Œæˆå¯åŠ¨</p><p>web app ä¸åŒ:</p><ul><li><p>éœ€è¦ä¾èµ– spring-web</p></li><li><p>spring å®¹å™¨å­˜åœ¨äº application ä½œç”¨åŸŸ(ServletContext), æ‰€æœ‰ servlet å…±äº«</p></li><li><p>åœ¨ tomcat å¯åŠ¨æ—¶åŠ è½½ xml é…ç½®, åŠ è½½æ–¹æ¡ˆæœ‰ä¸‰ç§</p><ul><li>Filter --&gt; init()</li><li>Listener --&gt; ServletContextListener<!-- -->[spring é»˜è®¤ä½¿ç”¨ç›‘å¬å™¨åˆå§‹åŒ–, spring é€šè¿‡ç›‘å¬å™¨åŠ è½½ xml ä¸­çš„ ContextLoaderListener]</li><li>Servlet --&gt; init()</li></ul></li><li><p>é€šè¿‡ web é¡¹ç›®çš„åˆå§‹åŒ–å‚æ•° é…ç½® xml æ–‡ä»¶ä½ç½® <code>contextConfigLocation</code>, å¦‚æœä¸é…ç½®, é»˜è®¤åŠ è½½ä½ç½®ä¸º<code>/WEB-INF/applicationContext.xml</code></p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// UserServiceç±»ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addUser(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;addUser&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// HelloServletï¼šæ²¡æœ‰é›†æˆspringmvc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è·å¾—springå®¹å™¨ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 1. ServletContextä½œç”¨åŸŸè·å¾—å†…å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ** æ–¹å¼1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext = (ApplicationContext)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                this.getServletContext().getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // **  æ–¹å¼2 é€šè¿‡springæä¾›å·¥å…·ç±»ã€æ¨èã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext applicationContext =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                WebApplicationContextUtils.getWebApplicationContext(this.getServletContext());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.å†ä»å®¹å™¨è·å¾—service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserService userService = (UserService) applicationContext.getBean(&quot;userService&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userService.addUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.doGet(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- web.xmlé…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">web-app</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">2.5</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://java.sun.com/xml/ns/javaee</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://java.sun.com/xml/ns/javaee</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®xmlä½ç½® --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">contextConfigLocation</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">classpath:applicationContext.xml</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é…ç½®springç›‘å¬å™¨ï¼ŒåŠ è½½xmlé…ç½®æ–‡ä»¶ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">listener</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">listener-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.web.context.ContextLoaderListener</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">listener-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">listener</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">HelloServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.xiaoyu.spring.learn.web.servlet.HelloServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">HelloServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/HelloServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">web-app</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- applicationContext.xmlé…ç½®ï¼š --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">       </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">userService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.xiaoyu.spring.learn.UserService</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>å‡ ç§åŠ è½½ xml æ–¹å¼</h1><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å¼•ç”¨èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Resource resource = new ClassPathResource(&quot;com/xy/xmltest/MyXml.xml&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è¿™ä¸ªæ–¹æ³•è¿‡æ—¶äº†, ä¸æ¨è</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        XmlBeanFactory factory = new XmlBeanFactory(resource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        XmlBean bean = factory.createBean(XmlBean.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(bean);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test2() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç¼–è¯‘è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext factory=new ClassPathXmlApplicationContext(&quot;com/xy/xmltest/MyXml.xml&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext factory=new ClassPathXmlApplicationContext(new String[] {&quot;bean1.xml&quot;,&quot;bean2.xml&quot;});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        XmlBean bean = factory.getBean(XmlBean.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(bean);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext factory=new FileSystemXmlApplicationContext(&quot;src/com/xy/xmltest/MyXml.xml&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä½¿ç”¨äº†  classpath:  å‰ç¼€,ä½œä¸ºæ ‡å¿—,  è¿™æ ·,FileSystemXmlApplicationContext ä¹Ÿèƒ½å¤Ÿè¯»å…¥classpathä¸‹çš„ç›¸å¯¹è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext factory=new FileSystemXmlApplicationContext(&quot;classpath:appContext.xml&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        XmlBean bean = factory.getBean(XmlBean.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(bean);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test4() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // é€‚ç”¨äºWebå·¥ç¨‹ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletContext servletContext = request.getSession().getServletContext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(servletContext );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>spring ä¸­çš„è®¾è®¡æ¨¡å¼</h1><ul><li>å·¥å‚æ¨¡å¼ - BeanFactory, ApplicationContext éƒ½æ˜¯å·¥å‚</li><li>å•ä¾‹ - spring ä¸­çš„ bean æ„é€ é»˜è®¤éƒ½æ˜¯å•ä¾‹</li><li>ä»£ç†æ¨¡å¼ - AOP</li><li>è£…é¥°å™¨æ¨¡å¼ - ç±»åä¸­å«æœ‰ Wrapper çš„ç±»</li><li>æ¨¡æ¿æ¨¡å¼ - jdbcTemplate, JpaTemplate, RedisTemplate</li><li>è§‚å¯Ÿè€…æ¨¡å¼ - Spring ä¸­ Observer æ¨¡å¼å¸¸ç”¨çš„åœ°æ–¹æ˜¯ listener çš„å®ç°</li></ul><h1>spring bean ç”Ÿå‘½å‘¨æœŸ</h1><p><a href="https://www.cnblogs.com/zrtqsk/p/3735273.html" target="_blank" rel="noopener noreferrer">è¯¦ç»†çš„é¡ºåº</a></p><p><a href="https://crossoverjie.top/2018/03/21/spring/spring-bean-lifecycle/" target="_blank" rel="noopener noreferrer">https://crossoverjie.top/2018/03/21/spring/spring-bean-lifecycle/</a>
TODO</p><ol><li><p>é¦–å…ˆå½“ç„¶æ˜¯æ„é€ å‡½æ•°å®ä¾‹åŒ– bean, è®¾ç½®å±æ€§;</p></li><li><p>ç„¶åæ˜¯ Aware è¿™ç±»æ¥å£, ç”¨äºåœ¨å½“å‰ç±»æ³¨å…¥æŸä¸ªæˆå‘˜</p><p>(å¦‚æœå®ç°äº†è¿™ç±»æ¥å£çš„è¯, ä¼šæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•), æ¯”å¦‚ BeanNameAware.setBeanName(id), BeanFactoryAware.setBeanFactory, ApplicationContextAware.setApplicationContext</p></li><li><p>BeanPostProcessors ä¸­çš„æ–¹æ³•, postProcessBeforeInitialization ()</p><ol><li><p>æ³¨è§£@PostConstruct çš„æ–¹æ³•</p><ol><li><p>InitializingBean.afterPropertiesSet (Bean çš„å…¨éƒ¨å±æ€§è®¾ç½®æˆåŠŸåæ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•, åªæœ‰è¿™ä¸€ä¸ªæ–¹æ³•)</p><ol><li>æˆ‘ä»¬è‡ªå®šä¹‰çš„ init æ–¹æ³•, é€šè¿‡ <code>&lt;bean&gt; çš„ init-method å±æ€§æŒ‡å®š</code></li></ol></li></ol></li></ol></li><li><p>BeanPostProcessors ä¸­çš„æ–¹æ³•, postProcessAfterInitialization (æ˜¯åœ¨ Bean åˆå§‹åŒ–åæ‰§è¡Œçš„ï¼Œæ—¶æœºä¸åŒ )</p><ol><li><p>DisposableBean.destroy (é”€æ¯å‰æ‰§è¡Œ)</p><ol><li><code>&lt;bean&gt;çš„destroy-method</code>å±æ€§æŒ‡å®šçš„æ–¹æ³•</li></ol></li></ol></li></ol><h1>å¸¸ç”¨çš„ spring bean æ‹“å±•æ¥å£</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="beannameawareapplicationcontextaware-å’Œ-beanfactoryaware">BeanNameAwareã€ApplicationContextAware å’Œ BeanFactoryAware<a href="#beannameawareapplicationcontextaware-å’Œ-beanfactoryaware" class="hash-link" aria-label="Direct link to BeanNameAwareã€ApplicationContextAware å’Œ BeanFactoryAware" title="Direct link to BeanNameAwareã€ApplicationContextAware å’Œ BeanFactoryAware">â€‹</a></h2><p>&quot;Aware&quot;çš„æ„æ€æ˜¯&quot;æ„ŸçŸ¥åˆ°çš„&quot;, éƒ½æœ‰è‡ªå·± setXXX(xxx) æ–¹æ³•éœ€è¦è¦†ç›–</p><ul><li><p>å®ç° BeanNameAware æ¥å£çš„ Beanï¼Œåœ¨ Bean åŠ è½½çš„è¿‡ç¨‹ä¸­å¯ä»¥è·å–åˆ°è¯¥ Bean çš„ id</p></li><li><p>å®ç° ApplicationContextAware æ¥å£çš„ Beanï¼Œåœ¨ Bean åŠ è½½çš„è¿‡ç¨‹ä¸­å¯ä»¥è·å–åˆ° Spring çš„ ApplicationContextï¼Œè¿™ä¸ªå°¤å…¶é‡è¦ï¼ŒApplicationContext æ˜¯ Spring åº”ç”¨ä¸Šä¸‹æ–‡ï¼Œä» ApplicationContext ä¸­å¯ä»¥è·å–åŒ…æ‹¬ä»»æ„çš„ Bean åœ¨å†…çš„å¤§é‡ Spring å®¹å™¨å†…å®¹å’Œä¿¡æ¯</p></li><li><p>å®ç° BeanFactoryAware æ¥å£çš„ Beanï¼Œåœ¨ Bean åŠ è½½çš„è¿‡ç¨‹ä¸­å¯ä»¥è·å–åˆ°åŠ è½½è¯¥ Bean çš„ BeanFactory</p></li></ul><p>çœ‹çœ‹æ€ä¹ˆä½¿ç”¨</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class AwareBean implements BeanNameAware, BeanFactoryAware, ApplicationContextAware{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¦‚æœBeanNameã€ApplicationContextã€BeanFactoryæœ‰ç”¨ï¼Œé‚£ä¹ˆå°±è‡ªå·±å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡å°†å®ƒä»¬ä¿å­˜ä¸‹æ¥ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¦‚æœæ²¡ç”¨ï¼Œé‚£ä¹ˆåªéœ€è¦å®ç°setXXX()æ–¹æ³•ï¼Œç”¨ä¸€ä¸‹Springæ³¨å…¥è¿›æ¥çš„å‚æ•°å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String                     beanName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ApplicationContext        applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private BeanFactory                beanFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setBeanName(String beanName){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Enter AwareBean.setBeanName(), beanName = &quot; + beanName + &quot;\n&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.beanName = beanName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Enter AwareBean.setApplicationContext(), applicationContext = &quot; + applicationContext + &quot;\n&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.applicationContext = applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setBeanFactory(BeanFactory beanFactory) throws BeansException{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Enter AwareBean.setBeanFactory(), beanfactory = &quot; + beanFactory + &quot;\n&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.beanFactory = beanFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="beanpostprocessor-æ¥å£">BeanPostProcessor æ¥å£<a href="#beanpostprocessor-æ¥å£" class="hash-link" aria-label="Direct link to BeanPostProcessor æ¥å£" title="Direct link to BeanPostProcessor æ¥å£">â€‹</a></h2><p>ä¸æ˜¯é’ˆå¯¹å•ä¸€ bean, è€Œæ˜¯é’ˆå¯¹æ¯ä¸ª Bean çš„ç”Ÿæˆå‰ååšä¸€äº›é€»è¾‘æ“ä½œ, æœ‰ä¸¤ä¸ªæ–¹æ³•, è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œä¸è¦è¿”å› null å¦åˆ™<code>getBean</code>çš„æ—¶å€™æ‹¿ä¸åˆ°å¯¹è±¡</p><ul><li>postProcessBeforeInitializationï¼šåœ¨åˆå§‹åŒ– Bean ä¹‹å‰</li><li>postProcessAfterInitializationï¼šåœ¨åˆå§‹åŒ– Bean ä¹‹å</li></ul><p>attention: PostProcessorBean æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª Bean, ä¼šåœ¨åˆå§‹åŒ–å‰åè°ƒç”¨å‰ç½®åç½®æ–¹æ³•</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyBeanPostProcessor implements BeanPostProcessor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å®ç°BeanPostProcessoræ¥å£å¿…é¡»å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //1.ã€Object postProcessBeforeInitialization(final Object bean, String beanName)ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //2.ã€Object postProcessAfterInitialization(Object bean, String beanName)ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object postProcessBeforeInitialization(final Object bean, String beanName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;åˆå§‹åŒ–æ–¹æ³•å‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç”Ÿæˆä»£ç†å¯¹è±¡ javaweb Proxy--jdkåŠ¨æ€ä»£ç†ï¼Œå‰æï¼šéœ€è¦ä½¿ç”¨æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Proxy.newProxyInstance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                MyBeanPostProcessor.class.getClassLoader(),     //ç±»åŠ è½½å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                bean.getClass().getInterfaces(),                //éœ€è¦å®ç°çš„æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new InvocationHandler(){                        //è‡ªå®šä¹‰å¤„ç†ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    public Object invoke(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Object proxy,                       //ä»£ç†å¯¹è±¡ã€å³åˆ›å»ºçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Method method,                     //å½“å‰æ‰§è¡Œæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Object[] args) throws Throwable {  //æ–¹æ³•å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        String methodName = method.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //éœ€è¦å¢å¼ºçš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if(&quot;addOrder&quot;.equals(methodName)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            System.out.println(&quot;ä»£ç†å‰é¢&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            // æ‰§è¡Œç›®æ ‡ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Object obj = method.invoke(bean/*è¢«ä»£ç†çš„å¯¹è±¡*/, args/*æ–¹æ³•å‚æ•°*/);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            System.out.println(&quot;ä»£ç†åé¢&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //ä¸éœ€è¦å¢å¼ºçš„æ–¹æ³•ç›´æ¥return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        return method.invoke(bean, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object postProcessAfterInitialization(Object bean, String beanName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;åˆå§‹åŒ–æ–¹æ³•å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="initialingbean-å’Œ-disposablebean">InitialingBean å’Œ DisposableBean<a href="#initialingbean-å’Œ-disposablebean" class="hash-link" aria-label="Direct link to InitialingBean å’Œ DisposableBean" title="Direct link to InitialingBean å’Œ DisposableBean">â€‹</a></h2><p>å®ç°è¿™ä¸¤ä¸ªæ¥å£ä»¥åœ¨ bean æ„é€ å‰åæ‰§è¡Œè‡ªå®šä¹‰çš„ä»£ç ; å„æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ–¹æ³•, <code>afterPropertiesSet()</code>åœ¨ Bean å±æ€§(setters())éƒ½è®¾ç½®å®Œæ¯•åè°ƒç”¨, åšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œ, <code>destory()</code>åœ¨ Bean ç”Ÿå‘½å‘¨æœŸç»“æŸå‰è°ƒç”¨ destory()æ–¹æ³•åšä¸€äº›æ”¶å°¾å·¥ä½œ</p><p>ä½†æ˜¯,Spring å®˜æ–¹ä¸æ¨èä½¿ç”¨ä¸Šé¢è¿™ç§æ–¹å¼;å› ä¸ºå®ƒä¸å¿…è¦åœ°å°†ä»£ç è€¦åˆåˆ° Springã€‚å¦å¤–ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨@PostConstructæ³¨è§£æˆ–æŒ‡å®šbeanå®šä¹‰æ”¯æŒçš„é€šç”¨æ–¹æ³•;</p><ul><li><p>å’Œ xml é…ç½® <code>init-method</code>ã€<code>destory-method</code>ä½œç”¨ç±»ä¼¼. InitializingBean æ¥å£ã€Disposable æ¥å£åº•å±‚ä½¿ç”¨<code>ç±»å‹å¼ºè½¬.æ–¹æ³•å()</code>è¿›è¡Œç›´æ¥æ–¹æ³•è°ƒç”¨ï¼Œinit-methodã€destory-method åº•å±‚ä½¿ç”¨åå°„ï¼Œå‰è€…å’Œ Spring è€¦åˆç¨‹åº¦æ›´é«˜ä½†æ•ˆç‡é«˜ï¼Œåè€…è§£é™¤äº†å’Œ Spring ä¹‹é—´çš„è€¦åˆä½†æ˜¯æ•ˆç‡ä½; å¹¶ä¸” åŒæ—¶é…ç½®çš„æƒ…å†µä¸‹, å‰è€…å…ˆæ‰§è¡Œ</p></li><li><p>æˆ–è€… JSR-250 ä¸ºåˆå§‹åŒ–ä¹‹å/é”€æ¯ä¹‹å‰æ–¹æ³•çš„æŒ‡å®šå®šä¹‰äº†ä¸¤ä¸ªæ³¨é‡Šç±»ï¼Œåˆ†åˆ«æ˜¯ @PostConstruct å’Œ @PreDestroy;  Java 9 åå¯èƒ½è¢«åºŸå¼ƒ, è‹¥è¿˜æƒ³ä½¿ç”¨, å¯ä»¥å¯¼å…¥ javax.annotation-api</p><p>è¦è®© JSR-250 çš„æ³¨é‡Šç”Ÿæ•ˆï¼Œé™¤äº†åœ¨ Bean ç±»ä¸­æ ‡æ³¨è¿™äº›æ³¨é‡Šå¤–ï¼Œè¿˜éœ€è¦åœ¨ Spring å®¹å™¨ä¸­æ³¨å†Œä¸€ä¸ªè´Ÿè´£å¤„ç†è¿™äº›æ³¨é‡Šçš„ <code>org.springframework.context.annotation.CommonAnnotationBeanPostProcessor</code>, æ— éœ€ id; ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>&lt;context:annotation-config/&gt;</code> ç®€åŒ–é…ç½® --&gt; è¿›ä¸€æ­¥ä½¿ç”¨ <code>&lt;context:component-scan package=&quot;&quot; /&gt;</code></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="factorybean-æ¥å£">FactoryBean æ¥å£<a href="#factorybean-æ¥å£" class="hash-link" aria-label="Direct link to FactoryBean æ¥å£" title="Direct link to FactoryBean æ¥å£">â€‹</a></h2><p><a href="http://www.cnblogs.com/davidwang456/p/3688250.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/davidwang456/p/3688250.html</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="factorybean-è§£é‡Š">FactoryBean è§£é‡Š<a href="#factorybean-è§£é‡Š" class="hash-link" aria-label="Direct link to FactoryBean è§£é‡Š" title="Direct link to FactoryBean è§£é‡Š">â€‹</a></h3><p>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ bean, è€Œä¸æ˜¯å·¥å‚é€šè¿‡ getObject() å¯ä»¥è‡ªå®šä¹‰ç”Ÿæˆ bean çš„é€»è¾‘</p><p>ç±»ä¼¼å·¥å‚æ¨¡å¼, spring æä¾›äº†ä¸€ä¸ªé¡¶çº§å·¥å‚æ¥å£, ä½ è‡ªå·±å®ç°å…·ä½“çš„å·¥å‚ bean;</p><ul><li><p>é€šå¸¸ Spring å®¹å™¨åŠ è½½ä¸€ä¸ª Bean çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œéƒ½æ˜¯ç”± Spring æ§åˆ¶çš„, å¦‚æœå®ç° FactoryBean æ¥å£, æˆ‘ä»¬å¯ä»¥æ›´å¤§çš„è‡ªä¸»æƒæ¥å®šåˆ¶å®ä¾‹åŒ– bean, å¯é€šè¿‡ getObject() å®šåˆ¶è·å– bean çš„é€»è¾‘</p></li><li><p>æ ¹æ®è¯¥ FactoryBean çš„ ID ä» BeanFactory ä¸­è·å–çš„å®é™…ä¸Šæ˜¯ FactoryBean çš„ getObject()è¿”å›çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ FactoryBean æœ¬èº«ï¼Œå¦‚æœè¦è·å– FactoryBean å¯¹è±¡ï¼Œè¯·åœ¨ id å‰é¢åŠ ä¸€ä¸ª&amp;ç¬¦å·æ¥è·å–ã€‚</p></li><li><p>FactoryBean è¿™ä¸ªæ¥å£åœ¨ Spring å®¹å™¨ä¸­æœ‰å¤§é‡çš„å­å®ç°ã€‚</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="factorybean-æ¥å£çš„-api">FactoryBean æ¥å£çš„ api<a href="#factorybean-æ¥å£çš„-api" class="hash-link" aria-label="Direct link to FactoryBean æ¥å£çš„ api" title="Direct link to FactoryBean æ¥å£çš„ api">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">T getObject() throws Exception;// context.getBean(id)æ—¶, åº•å±‚å°±æ˜¯è°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•, idå‰æ·»åŠ &quot;&amp;&quot;åˆ™è¿”å›çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„FactoryBean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Class&lt;?&gt; getObjectType();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default boolean isSingleton() {return true;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="factorybean-ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹">FactoryBean ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹<a href="#factorybean-ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹" class="hash-link" aria-label="Direct link to FactoryBean ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹" title="Direct link to FactoryBean ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸€ä¸ªæ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface Animal{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void move();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸¤ä¸ªå®ç°ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Monkey implements Animal{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void move()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Monkey move!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Tiger implements Animal{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void move(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Tiger move!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// FactoryBeanå®ç°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AnimalFactoryBean implements FactoryBean&lt;Animal&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String    animal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æœ€é‡è¦çš„ï¼Œæ§åˆ¶Beançš„å®ä¾‹åŒ–è¿‡ç¨‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Animal getObject() throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (&quot;Monkey&quot;.equals(animal)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new Monkey();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else if (&quot;Tiger&quot;.equals(animal)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new Tiger();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è·å–æ¥å£è¿”å›çš„å®ä¾‹çš„class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Class&lt;?&gt; getObjectType(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Animal.class;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¯¥Beanæ˜¯å¦ä¸ºä¸€ä¸ªå•ä¾‹çš„Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean isSingleton(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setAnimal(String animal){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.animal = animal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringJUnit4ClassRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ContextConfiguration(locations = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;classpath*:spring.xml&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class BaseTest{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Animal    animal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void aa(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        animal.move(); // ç»“æœ: Tiger move!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ç„¶è¿˜æœ‰ xml é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.springframework.org/schema/beans</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag attr-value" style="color:#e3116c">    http://www.springframework.org/schema/beans/spring-beans-4.1.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æœ€åå¾—åˆ°çš„å¹¶ä¸æ˜¯FactoryBeanæœ¬èº«ï¼Œè€Œæ˜¯FactoryBeançš„æ³›å‹å¯¹è±¡tiger --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">animal</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.xrq.bean.factory.AnimalFactoryBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">animal</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Tiger</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">beans</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="factorybean-åœ¨-mabatis-spring-é›†æˆä¸­çš„åº”ç”¨">factoryBean åœ¨ mabatis-spring é›†æˆä¸­çš„åº”ç”¨<a href="#factorybean-åœ¨-mabatis-spring-é›†æˆä¸­çš„åº”ç”¨" class="hash-link" aria-label="Direct link to factoryBean åœ¨ mabatis-spring é›†æˆä¸­çš„åº”ç”¨" title="Direct link to factoryBean åœ¨ mabatis-spring é›†æˆä¸­çš„åº”ç”¨">â€‹</a></h3><p>ç±»ä¼¼ spring ä¸­çš„ &quot;é™æ€å·¥å‚æ–¹æ³•æ³¨å…¥&quot;</p><p>å¾ˆå¤šå¼€æºé¡¹ç›®åœ¨é›†æˆ Spring æ—¶éƒ½ä½¿ç”¨åˆ° FactoryBeanï¼Œæ¯”å¦‚ MyBatis3 æä¾› mybatis-spring é¡¹ç›®ä¸­çš„ <code>org.mybatis.spring.SqlSessionFactoryBean</code>ï¼š</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- springå’ŒMyBatisæ•´åˆï¼Œä¸éœ€è¦mybatisçš„é…ç½®æ˜ å°„æ–‡ä»¶ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">sqlSessionFactory</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">org.mybatis.spring.SqlSessionFactoryBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- property å°†æ³¨å…¥æˆä¸º SqlSessionFactoryBean çš„æˆå‘˜å˜é‡ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dataSource</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- è‡ªåŠ¨æ‰«æmapping.xmlæ–‡ä»¶ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">mapperLocations</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">classpath:mapper/*.xml</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="factorybean-æ¡ˆä¾‹-dao-åˆ‡æ¢">factoryBean æ¡ˆä¾‹-dao åˆ‡æ¢<a href="#factorybean-æ¡ˆä¾‹-dao-åˆ‡æ¢" class="hash-link" aria-label="Direct link to factoryBean æ¡ˆä¾‹-dao åˆ‡æ¢" title="Direct link to factoryBean æ¡ˆä¾‹-dao åˆ‡æ¢">â€‹</a></h3><p>çœ‹ä¸€ä¸ªæ¡ˆä¾‹: <a href="https://blog.csdn.net/ykdsg/article/details/18733041" target="_blank" rel="noopener noreferrer">check here</a></p><p>ç³»ç»Ÿå‘å±•åˆ°ä¸€å®šç¨‹åº¦å°±ä¼šé¢ä¸´åˆ†åº“åˆ†è¡¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¦è€ƒè™‘çš„æ˜¯æ€ä¹ˆè®©ç³»ç»Ÿå¹³æ»‘çš„ä»è€çš„è¡¨è¿ç§»åˆ°æ–°çš„è¡¨ã€‚é€šå¸¸æ–°è¡¨çš„æ•°æ®å¯ä»¥é€šè¿‡ binlog åŒæ­¥çš„æ–¹å¼åŒæ­¥è€è¡¨çš„æ•°æ®ï¼Œåœ¨æŸä¸€ä¸ªæ—¶é—´ç‚¹é€šè¿‡å¼€å…³çš„æ–¹å¼è®©è¯»å†™è€è¡¨çš„æ“ä½œåˆ‡æ¢åˆ°æ–°è¡¨ã€‚</p><p>é‚£è¿™é‡Œæœ‰ä¸ªé—®é¢˜: ä¸ºä»€ä¹ˆ è¦è®¾ç½®ä¸€ä¸ª&quot;å¼€å…³&quot; æ¥åˆ‡æ¢ æ–°/æ—§ dao å‘¢? å› ä¸ºåœ¨æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­, ç³»ç»Ÿä¸å¤Ÿç¨³å®š, éœ€è¦éšæ—¶å°† æ–° dao æ¢å› æ—§ dao ä»¥ä¿è¯ç³»ç»Ÿä¸ä¼šå´©. ç­‰åˆ°æ•°æ®è¿ç§»å…¨éƒ¨å®Œæˆ, ç³»ç»Ÿç¨³å®šä¸‹æ¥å, å¯ä»¥å»æ‰å¼€å…³, ç›´æ¥ç”¨ æ–° dao æ›¿æ¢æ‰ æ—§ dao. æ­¤æ—¶æ—§ dao ä»£ç  çš„äººç”Ÿä½¿å‘½ å°±å®Œå…¨ç»“æŸäº†.</p><p>é‚£ä¹ˆå…·ä½“æ€ä¹ˆæ“ä½œå‘¢ - é€šè¿‡ FactoryBean ç”Ÿäº§ æ—§ dao çš„ä»£ç† (ä½œä¸º æ–° dao), åœ¨ InvocationHandler ä¸­åšå¼€å…³çš„é€»è¾‘åˆ¤æ–­</p><p>æ³¨å…¥çš„é…ç½®æ—¶è¿™æ ·çš„:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">oldDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.taobao.misc.auction.repository.ProxyBidRepo</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain">Â </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">newDao</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.taobao.misc.auction.dao.impl.BidProxyDAOImpl</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">bean</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">oldDaoProxy</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.taobao.misc.auction.dao.impl.ProxyBidDAOProxyFactoryBean</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain">Â </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ ·ç³»ç»ŸåŸæ¥å¼•ç”¨ bidProxyDAO çš„ä»£ç éƒ½ä¸éœ€è¦åŠ¨å°±å¯ä»¥å®ç°æ ¹æ®å¼€å…³æ¥åˆ‡æ¢æ–°è€ DAO çš„å®ç°ã€‚ç­‰ç³»ç»Ÿä¸Šçº¿ç¨³å®šä¹‹åå¯ä»¥å°† æ—§ dao å®Œå…¨æ›¿æ¢æ‰</p><p>ä»£ç å¦‚ä¸‹:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- InvocationHandler - ä»£ç†éœ€è¦invocationhandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- FactoryBean       - å®ç°å…¶ getObjectï¼ˆï¼‰ æ–¹æ³•; å¦‚æœä¸€ä¸ªç±»å®ç°äº†FactoryBeanæ¥å£ï¼Œé‚£ä¹ˆcontext.getBeanå¾—åˆ°çš„ä¸æ˜¯ä»–æœ¬èº«äº†ï¼Œè€Œæ˜¯å®ƒæ‰€äº§ç”Ÿçš„å¯¹è±¡,å¦‚æœå¸Œæœ›å¾—åˆ°å®ƒæœ¬èº«ï¼Œåªéœ€è¦åŠ ä¸Š&amp;ç¬¦å·å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProxyBidDAOProxyFactoryBean implements InvocationHandler, FactoryBean {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  private static Logger log =Â  LoggerFactory.getLogger(ProxyBidDAOProxyFactoryBean.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â  * æ–°çš„dao</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â  */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  @Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  private BidProxyDAO bidProxyDAONew;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â  * è€çš„dao</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â  */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  @Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  private BidProxyDAO proxyBidRepo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  @Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  private DiamondSwitchConfig diamondSwitchConfig;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  //å¦‚æœå¼€å…³æ‰“å¼€é‚£ä¹ˆè°ƒç”¨æ–°çš„DAO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  if(diamondSwitchConfig.isNewTableSwitch()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â Â Â Â Â  log.warn(&quot;bid_proxy user new table..........................................&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â Â Â Â Â  return method.invoke(bidProxyDAONew, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  return method.invoke(proxyBidRepo, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  public Object getObject() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  Object proxyObj=Proxy.newProxyInstance(this.getClass().getClassLoader(), new Class[]{BidProxyDAO.class}, this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  return (BidProxyDAO) proxyObj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  public Class getObjectType() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  return BidProxyDAO.class;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  public boolean isSingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â Â Â Â Â  return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â Â Â  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}Â </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="beanfactory-æ¥å£">BeanFactory æ¥å£<a href="#beanfactory-æ¥å£" class="hash-link" aria-label="Direct link to BeanFactory æ¥å£" title="Direct link to BeanFactory æ¥å£">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beanfactory-è§£é‡Š">BeanFactory è§£é‡Š<a href="#beanfactory-è§£é‡Š" class="hash-link" aria-label="Direct link to BeanFactory è§£é‡Š" title="Direct link to BeanFactory è§£é‡Š">â€‹</a></h3><p>æ˜¯ä¸€ä¸ªæ¥å£, ç›¸å½“äºå®¹å™¨, ç®¡ç†æ‰€æœ‰çš„ bean, åŒ…æ‹¬ factory bean</p><ul><li><p>spring æä¾›å¤šä¸ªå®ç°, å¸¸ç”¨çš„ XmlBeanFactory</p></li><li><p>BeanFactory å’Œ ApplicationContext(é€šè¿‡å‰è€…æ´¾ç”Ÿ)å°±æ˜¯ spring æ¡†æ¶çš„ä¸¤ä¸ª IOC å®¹å™¨ï¼Œç°åœ¨ä¸€èˆ¬ä½¿ç”¨ ApplicationnContextï¼Œå…¶ä¸ä½†åŒ…å«äº† BeanFactory çš„ä½œç”¨ï¼ŒåŒæ—¶è¿˜è¿›è¡Œæ›´å¤šçš„æ‰©å±•ã€‚</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-æœ‰å“ªäº›">api æœ‰å“ªäº›<a href="#api-æœ‰å“ªäº›" class="hash-link" aria-label="Direct link to api æœ‰å“ªäº›" title="Direct link to api æœ‰å“ªäº›">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ã€€ã€€boolean containsBean(String beanName) åˆ¤æ–­å·¥å‚ä¸­æ˜¯å¦åŒ…å«ç»™å®šåç§°çš„beanå®šä¹‰ï¼Œè‹¥æœ‰åˆ™è¿”å›true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ã€€ã€€Object getBean(String) è¿”å›ç»™å®šåç§°æ³¨å†Œçš„beanå®ä¾‹ã€‚æ ¹æ®beançš„é…ç½®æƒ…å†µï¼Œå¦‚æœæ˜¯singletonæ¨¡å¼å°†è¿”å›ä¸€ä¸ªå…±äº«å®ä¾‹ï¼Œå¦åˆ™å°†è¿”å›ä¸€ä¸ªæ–°å»ºçš„å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°æŒ‡å®šbean,è¯¥æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ã€€ã€€Object getBean(String, Class) è¿”å›ä»¥ç»™å®šåç§°æ³¨å†Œçš„beanå®ä¾‹ï¼Œå¹¶è½¬æ¢ä¸ºç»™å®šclassç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ã€€ã€€Class getType(String name) è¿”å›ç»™å®šåç§°çš„beançš„Class,å¦‚æœæ²¡æœ‰æ‰¾åˆ°æŒ‡å®šçš„beanå®ä¾‹ï¼Œåˆ™æ’é™¤NoSuchBeanDefinitionExceptionå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ã€€ã€€boolean isSingleton(String) åˆ¤æ–­ç»™å®šåç§°çš„beanå®šä¹‰æ˜¯å¦ä¸ºå•ä¾‹æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ã€€ã€€String[] getAliases(String name) è¿”å›ç»™å®šbeanåç§°çš„æ‰€æœ‰åˆ«å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="beanfactorypostprocessor">BeanFactoryPostProcessor<a href="#beanfactorypostprocessor" class="hash-link" aria-label="Direct link to BeanFactoryPostProcessor" title="Direct link to BeanFactoryPostProcessor">â€‹</a></h2><p>åœ¨æ‰€æœ‰çš„ Bean åˆ›å»ºä¹‹å‰ï¼Œè¯»å– Bean çš„å…ƒå±æ€§(Scope ç­‰ç­‰)ï¼Œå¹¶æ ¹æ®è‡ªå·±çš„éœ€æ±‚å¯¹å…ƒå±æ€§è¿›è¡Œæ”¹å˜ ---------- åŠ¨æ€æ³¨å†Œ, è§ä¸‹æ–‡</p><ul><li><p>BeanFactoryPostProcessor çš„æ‰§è¡Œå…ˆäº BeanPostProcessor</p></li><li><p>BeanFactoryPostProcessor çš„ postProcessBeanFactory()æ–¹æ³•åªä¼šæ‰§è¡Œä¸€æ¬¡</p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void postProcessBeanFactory(ConfigurableListableBeanFactory configurablelistablebeanfactory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws BeansException{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BeanDefinition beanDefinition = configurablelistablebeanfactory.getBeanDefinition(&quot;common0&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MutablePropertyValues beanProperty = beanDefinition.getPropertyValues();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;scope before changeï¼š&quot; + beanDefinition.getScope());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    beanDefinition.setScope(&quot;singleton&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;scope after changeï¼š&quot; + beanDefinition.getScope());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(&quot;beanPropertyï¼š&quot; + beanProperty);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instantiationawarebeanpostprocessor">InstantiationAwareBeanPostProcessor<a href="#instantiationawarebeanpostprocessor" class="hash-link" aria-label="Direct link to InstantiationAwareBeanPostProcessor" title="Direct link to InstantiationAwareBeanPostProcessor">â€‹</a></h2><p>ç»§æ‰¿è‡ª BeanPostProcessor æ¥å£</p><p>bean å®ä¾‹åŒ–å‰ååšä¸€äº›å¤„ç†(åŒºåˆ«äº bean åˆå§‹åŒ–); 1ã€å®ä¾‹åŒ–----å®ä¾‹åŒ–çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªåˆ›å»º Bean çš„è¿‡ç¨‹ï¼Œå³è°ƒç”¨ Bean çš„æ„é€ å‡½æ•°ï¼Œå•ä¾‹çš„ Bean æ”¾å…¥å•ä¾‹æ± ä¸­. 2ã€åˆå§‹åŒ–----åˆå§‹åŒ–çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªèµ‹å€¼çš„è¿‡ç¨‹ï¼Œå³è°ƒç”¨ Bean çš„ setterï¼Œè®¾ç½® Bean çš„å±æ€§</p><ul><li>Bean æ„é€ å‡ºæ¥ä¹‹å‰è°ƒç”¨ postProcessBeforeInstantiation()æ–¹æ³•</li><li>Bean æ„é€ å‡ºæ¥ä¹‹åè°ƒç”¨ postProcessAfterInstantiation()æ–¹æ³•</li></ul><p>é€šå¸¸æ¥è®²ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥å®ç° InstantiationAwareBeanPostProcessor æ¥å£ï¼Œè€Œæ˜¯ä¼šé‡‡ç”¨ç»§æ‰¿ InstantiationAwareBeanPostProcessorAdapter è¿™ä¸ªæŠ½è±¡ç±»çš„æ–¹å¼æ¥ä½¿ç”¨ã€‚</p><h1>åŠ¨æ€æ³¨å†Œ bean</h1><p><a href="https://blog.csdn.net/neweastsun/article/details/79222256" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/neweastsun/article/details/79222256</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ¨æ€æ³¨å†Œåœºæ™¯">åŠ¨æ€æ³¨å†Œåœºæ™¯<a href="#åŠ¨æ€æ³¨å†Œåœºæ™¯" class="hash-link" aria-label="Direct link to åŠ¨æ€æ³¨å†Œåœºæ™¯" title="Direct link to åŠ¨æ€æ³¨å†Œåœºæ™¯">â€‹</a></h2><p>ç”¨æˆ·å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œè€Œæ¥å£çš„å®ç°åˆ™ç”±æ¡†æ¶ç”Ÿæˆï¼Œä¸éœ€è¦ç”¨æˆ·è‡ªè¡Œç¼–å†™ï¼Œæ­¤æ—¶å®ç°ç±»å°±éœ€è¦åŠ¨æ€æ³¨å†Œåˆ°å®¹å™¨ä¸­</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ¨æ€æ³¨å†Œ-api">åŠ¨æ€æ³¨å†Œ api<a href="#åŠ¨æ€æ³¨å†Œ-api" class="hash-link" aria-label="Direct link to åŠ¨æ€æ³¨å†Œ api" title="Direct link to åŠ¨æ€æ³¨å†Œ api">â€‹</a></h2><ul><li><p>Spring ä¸­çš„ bean å®šä¹‰éƒ½ä¿å­˜åœ¨ <strong>BeanDefinitionRegistry</strong> æ¥å£ä¸­ï¼Œå•ä¾‹çš„ bean çš„å®ä¾‹éƒ½ä¿å­˜åœ¨ <strong>SingletonBeanRegistry</strong> æ¥å£ä¸­ã€‚</p><p>DefaultListableBeanFactory æ¥å£åŒæ—¶å®ç°äº†è¿™ä¸¤ä¸ªæ¥å£ï¼Œåœ¨å®è·µä¸­é€šå¸¸ä¼šä½¿ç”¨è¿™ä¸ªæ¥å£</p><p>è¿™ç§æ–¹å¼æ³¨å†Œçš„ bean æ²¡æœ‰ aop æ”¯æŒ</p></li><li><p>è¿˜å¯ä»¥é€šè¿‡ BeanFactoryPostProcessor è¿›è¡ŒåŠ¨æ€æ³¨å†Œ</p></li><li><p>ImportBeanDefinitionRegistrar æ¥å£äº¦å¯</p><p>æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„ç±»çš„éƒ½ä¼šè¢« ConfigurationClassPostProcessor å¤„ç†ï¼ŒConfigurationClassPostProcessor å®ç°äº† BeanFactoryPostProcessor æ¥å£ï¼Œæ‰€ä»¥ ImportBeanDefinitionRegistrar ä¸­åŠ¨æ€æ³¨å†Œçš„ bean æ˜¯ä¼˜å…ˆä¸ä¾èµ–å…¶çš„ bean åˆå§‹åŒ–çš„ï¼Œä¹Ÿèƒ½è¢« aopã€validator ç­‰æœºåˆ¶å¤„ç†ã€‚</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ">æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ<a href="#æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ" class="hash-link" aria-label="Direct link to æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ" title="Direct link to æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-beanfactorypostprocessor-å®ç°åŠ¨æ€æ³¨å†Œ">é€šè¿‡ BeanFactoryPostProcessor å®ç°åŠ¨æ€æ³¨å†Œ<a href="#é€šè¿‡-beanfactorypostprocessor-å®ç°åŠ¨æ€æ³¨å†Œ" class="hash-link" aria-label="Direct link to é€šè¿‡ BeanFactoryPostProcessor å®ç°åŠ¨æ€æ³¨å†Œ" title="Direct link to é€šè¿‡ BeanFactoryPostProcessor å®ç°åŠ¨æ€æ³¨å†Œ">â€‹</a></h3><p>bean ä¸æ˜¯åœ¨ BeanFactoryPostProcessor ä¸­è¢«æ³¨å†Œï¼Œé‚£ä¹ˆè¯¥ bean åˆ™æ— æ³•è¢«<strong>BeanPostProcessor</strong>å¤„ç†ï¼Œå³æ— æ³•å¯¹å…¶åº”ç”¨ aopã€Bean Validation ç­‰åŠŸèƒ½ã€‚</p><p>BeanDefinitionRegistryPostProcessor</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PersonBeanFactoryPostProcessor implements BeanFactoryPostProcessor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultListableBeanFactory defaultListableBeanFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                = (DefaultListableBeanFactory) beanFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ³¨å†ŒBeanå®šä¹‰ï¼Œå®¹å™¨æ ¹æ®å®šä¹‰è¿”å›bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;register personManager1&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ„é€ bean å®šä¹‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BeanDefinitionBuilder beanDefinitionBuilder =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                BeanDefinitionBuilder.genericBeanDefinition(PersonManager.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ„é€ ä¾èµ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beanDefinitionBuilder.addPropertyReference(&quot;personDao&quot;, &quot;personDao&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BeanDefinition personManagerBeanDefinition = beanDefinitionBuilder.getRawBeanDefinition();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ³¨å†Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        defaultListableBeanFactory.registerBeanDefinition(&quot;personManager1&quot;, personManagerBeanDefinition);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç›´æ¥é€šè¿‡ç¼–ç¨‹å¼æ³¨å†Œbeanå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;register personManager2&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PersonDao personDao = beanFactory.getBean(PersonDao.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PersonManager personManager = new PersonManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        personManager.setPersonDao(personDao);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beanFactory.registerSingleton(&quot;personManager2&quot;, personManager);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-beandefinitionregistry-åœ¨æ™®é€š-bean-ä¸­æ³¨å†Œ">é€šè¿‡ BeanDefinitionRegistry åœ¨æ™®é€š bean ä¸­æ³¨å†Œ<a href="#é€šè¿‡-beandefinitionregistry-åœ¨æ™®é€š-bean-ä¸­æ³¨å†Œ" class="hash-link" aria-label="Direct link to é€šè¿‡ BeanDefinitionRegistry åœ¨æ™®é€š bean ä¸­æ³¨å†Œ" title="Direct link to é€šè¿‡ BeanDefinitionRegistry åœ¨æ™®é€š bean ä¸­æ³¨å†Œ">â€‹</a></h3><p>bean ä¸æ˜¯åœ¨ BeanFactoryPostProcessor ä¸­è¢«æ³¨å†Œï¼Œé‚£ä¹ˆè¯¥ bean åˆ™æ— æ³•è¢«<strong>BeanPostProcessor</strong>å¤„ç†ï¼Œå³æ— æ³•å¯¹å…¶åº”ç”¨ aopã€Bean Validation ç­‰åŠŸèƒ½ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PersonManagerRegisterController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * The Application context.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GenericApplicationContext applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * The Bean factory.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ç»§æ‰¿äº† SingletonBeanRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConfigurableBeanFactory beanFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * åŠ¨æ€æ³¨å†Œbeanï¼Œæ­¤å¤„æ³¨å†Œçš„beanæ²¡æœ‰AOPçš„æ”¯æŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * curl http://localhost:8080/registerPersonManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/registerPersonManager&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerPersonManager() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PersonDao personDao = applicationContext.getBean(PersonDao.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PersonManager personManager = new PersonManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        personManager.setPersonDao(personDao);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beanFactory.registerSingleton(&quot;personManager3&quot;, personManager);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-importbeandefinitionregistrar">é€šè¿‡ ImportBeanDefinitionRegistrar<a href="#é€šè¿‡-importbeandefinitionregistrar" class="hash-link" aria-label="Direct link to é€šè¿‡ ImportBeanDefinitionRegistrar" title="Direct link to é€šè¿‡ ImportBeanDefinitionRegistrar">â€‹</a></h3><p><a href="https://github.com/pkpk1234/registerbean-ImportBeanDefinitionRegistrar" target="_blank" rel="noopener noreferrer">https://github.com/pkpk1234/registerbean-ImportBeanDefinitionRegistrar</a></p><p>éœ€æ±‚, æ€è·¯:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ä¸»è¦æ€è·¯æ˜¯åˆ©ç”¨ClassPathScanningCandidateComponentProviderè·å–æ ‡æ³¨äº†HTTPUtilæ³¨è§£çš„æ¥å£ï¼Œå¹¶ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ç„¶åä½¿ç”¨DefaultListableBeanFactoryå°†ä»£ç†å¯¹è±¡æ³¨å†Œåˆ°å®¹å™¨ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@HTTPUtil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface IRequestDemo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è°ƒç”¨test1æ—¶ï¼Œä¼šå¯¹http://abc.comå‘é€getè¯·æ±‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @HTTPRequest(url = &quot;http://abc.com&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpResult&lt;String&gt; test1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //è°ƒç”¨test2æ—¶ï¼Œä¼šå¯¹http://test2.comå‘é€postè¯·æ±‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @HTTPRequest(url = &quot;http://test2.com&quot;, httpMethod = HTTPMethod.POST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpResult&lt;String&gt; test2();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®ç°:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 1. é¦–å…ˆç¼–å†™æ ¸å¿ƒImportBeanDefinitionRegistraræ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ImportBeanDefinitionRegistraréœ€è¦é…åˆ@Configurationå’Œ@Importæ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//@Configurationå®šä¹‰Javaæ ¼å¼çš„Springé…ç½®æ–‡ä»¶ï¼Œ@Importæ³¨è§£å¯¼å…¥å®ç°äº†ImportBeanDefinitionRegistraræ¥å£çš„ç±»ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HTTPRequestRegistrar implements ImportBeanDefinitionRegistrar,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ResourceLoaderAware, BeanClassLoaderAware, EnvironmentAware, BeanFactoryAware {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void registerBeanDefinitions(AnnotationMetadata annotationMetadata, BeanDefinitionRegistry beanDefinitionRegistry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       registerHttpRequest(beanDefinitionRegistry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * æ³¨å†ŒåŠ¨æ€beançš„ä¸»è¦æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @param beanDefinitionRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   private void registerHttpRequest(BeanDefinitionRegistry beanDefinitionRegistry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ClassPathScanningCandidateComponentProvider classScanner = getClassScanner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       classScanner.setResourceLoader(this.resourceLoader);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       //æŒ‡å®šåªå…³æ³¨æ ‡æ³¨äº†@HTTPUtilæ³¨è§£çš„æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       AnnotationTypeFilter annotationTypeFilter = new AnnotationTypeFilter(HTTPUtil.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       classScanner.addIncludeFilter(annotationTypeFilter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       //æŒ‡å®šæ‰«æçš„åŸºç¡€åŒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       String basePack = &quot;com.example.registerbean&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       Set&lt;BeanDefinition&gt; beanDefinitionSet = classScanner.findCandidateComponents(basePack);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       for (BeanDefinition beanDefinition : beanDefinitionSet) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           if (beanDefinition instanceof AnnotatedBeanDefinition) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               registerBeans(((AnnotatedBeanDefinition) beanDefinition));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * åˆ›å»ºåŠ¨æ€ä»£ç†ï¼Œå¹¶åŠ¨æ€æ³¨å†Œåˆ°å®¹å™¨ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @param annotatedBeanDefinition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   private void registerBeans(AnnotatedBeanDefinition annotatedBeanDefinition) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       String className = annotatedBeanDefinition.getBeanClassName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ((DefaultListableBeanFactory) this.beanFactory).registerSingleton(className, createProxy(annotatedBeanDefinition));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * æ„é€ Classæ‰«æå™¨ï¼Œè®¾ç½®äº†åªæ‰«æé¡¶çº§æ¥å£ï¼Œä¸æ‰«æå†…éƒ¨ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   private ClassPathScanningCandidateComponentProvider getClassScanner() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return new ClassPathScanningCandidateComponentProvider(false, this.environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           protected boolean isCandidateComponent(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   AnnotatedBeanDefinition beanDefinition) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               if (beanDefinition.getMetadata().isInterface()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       Class&lt;?&gt; target = ClassUtils.forName(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               beanDefinition.getMetadata().getClassName(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               classLoader);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       return !target.isAnnotation();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   } catch (Exception ex) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       log.error(&quot;load class exception:&quot;, ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * åˆ›å»ºåŠ¨æ€ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @param annotatedBeanDefinition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   private Object createProxy(AnnotatedBeanDefinition annotatedBeanDefinition) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           AnnotationMetadata annotationMetadata = annotatedBeanDefinition.getMetadata();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           Class&lt;?&gt; target = Class.forName(annotationMetadata.getClassName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           InvocationHandler invocationHandler = createInvocationHandler();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           Object proxy = Proxy.newProxyInstance(HTTPRequest.class.getClassLoader(), new Class[]{target}, invocationHandler);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           return proxy;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       } catch (ClassNotFoundException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           log.error(e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * åˆ›å»ºInvocationHandlerï¼Œå°†æ–¹æ³•è°ƒç”¨å…¨éƒ¨ä»£ç†ç»™DemoHttpHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   private InvocationHandler createInvocationHandler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return new InvocationHandler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           private DemoHttpHandler demoHttpHandler = new DemoHttpHandler();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               return demoHttpHandler.handle(method);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... çœç•¥setterä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//2. ç¼–å†™æ³¨è§£ï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨@Importå¯¼å…¥ç¬¬1æ­¥ç¼–å†™çš„HTTPRequestRegistrar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//3.å°†@EnableHttpUtilæ·»åŠ åˆ°@Configurationæ³¨è§£ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Target(ElementType.TYPE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import(HTTPRequestRegistrar.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface EnableHttpUtil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>å›½é™…åŒ– and å‚æ•°æ ¡éªŒ</h1><p><a href="https://blog.csdn.net/shuangyidehudie/article/details/40586143" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/shuangyidehudie/article/details/40586143</a>
<a href="https://blog.csdn.net/catoop/article/details/51284638" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/catoop/article/details/51284638</a></p><h1>spring5 æ–°ç‰¹æ€§</h1><p><a href="https://www.ibm.com/developerworks/cn/java/j-whats-new-in-spring-framework-5-theedom/index.html" target="_blank" rel="noopener noreferrer">https://www.ibm.com/developerworks/cn/java/j-whats-new-in-spring-framework-5-theedom/index.html</a></p><h1>Guice</h1><p><a href="https://www.ibm.com/developerworks/cn/java/j-guice.html" target="_blank" rel="noopener noreferrer">https://www.ibm.com/developerworks/cn/java/j-guice.html</a></p><p>ç¼–è¯‘å™¨ä¾èµ–æ³¨å…¥ï¼šDagger2 - <a href="https://zhuanlan.zhihu.com/p/24454466" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/24454466</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/docs/tags/spring">spring</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/spring-note.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/shell-bash-note"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">shell-bashè„šæœ¬æ”¶é›†</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/springcloud-note"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Spring Cloud ç¬”è®°ğŸŒˆ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#classpathåŒºåˆ«" class="table-of-contents__link toc-highlight">classpath*åŒºåˆ«</a></li><li><a href="#å„ç§æ³¨è§£æ€ä¹ˆç†è§£" class="table-of-contents__link toc-highlight">å„ç§æ³¨è§£æ€ä¹ˆç†è§£</a></li><li><a href="#core-éƒ¨åˆ†" class="table-of-contents__link toc-highlight">core éƒ¨åˆ†</a></li><li><a href="#aop-éƒ¨åˆ†" class="table-of-contents__link toc-highlight">aop éƒ¨åˆ†</a></li><li><a href="#data-access-éƒ¨åˆ†" class="table-of-contents__link toc-highlight">data access éƒ¨åˆ†</a></li><li><a href="#web-éƒ¨åˆ†" class="table-of-contents__link toc-highlight">web éƒ¨åˆ†</a></li><li><a href="#test-éƒ¨åˆ†context-support" class="table-of-contents__link toc-highlight">test éƒ¨åˆ†&amp;context-support</a></li><li><a href="#spring4-æ–°å¢" class="table-of-contents__link toc-highlight">spring4 æ–°å¢</a></li><li><a href="#ç»„ä»¶ç»“æ„" class="table-of-contents__link toc-highlight">ç»„ä»¶ç»“æ„</a><ul><li><a href="#ioc-container" class="table-of-contents__link toc-highlight">ioc-container</a></li></ul></li><li><a href="#åŸºäº-xml" class="table-of-contents__link toc-highlight">åŸºäº xml</a><ul><li><a href="#xml-ä¸­çš„é…ç½®é¡¹" class="table-of-contents__link toc-highlight">xml ä¸­çš„é…ç½®é¡¹</a></li><li><a href="#å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼" class="table-of-contents__link toc-highlight">å‡ ç§æ³¨å…¥-å®ä¾‹åŒ–æ–¹å¼</a><ul><li><a href="#é€šè¿‡æ„é€ å‡½æ•°" class="table-of-contents__link toc-highlight">é€šè¿‡æ„é€ å‡½æ•°</a><ul><li><a href="#é€šè¿‡é™æ€å·¥å‚æ–¹æ³•" class="table-of-contents__link toc-highlight">é€šè¿‡é™æ€å·¥å‚æ–¹æ³•</a></li><li><a href="#é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•" class="table-of-contents__link toc-highlight">é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•</a></li></ul></li><li><a href="#é€šè¿‡-setter-æ³¨å…¥" class="table-of-contents__link toc-highlight">é€šè¿‡ setter æ³¨å…¥</a></li><li><a href="#é€šè¿‡-methodinvokingfactorybean-æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼" class="table-of-contents__link toc-highlight">é€šè¿‡ MethodInvokingFactoryBean æ³¨å…¥æ–¹æ³•çš„è¿”å›å€¼</a></li><li><a href="#autowired-æ³¨å…¥" class="table-of-contents__link toc-highlight">@Autowired æ³¨å…¥</a></li></ul></li><li><a href="#springel-è¡¨è¾¾å¼æ³¨å…¥è¡¨è¾¾å¼" class="table-of-contents__link toc-highlight">springEL è¡¨è¾¾å¼,æ³¨å…¥è¡¨è¾¾å¼</a></li><li><a href="#é›†åˆçš„æ³¨å…¥" class="table-of-contents__link toc-highlight">é›†åˆçš„æ³¨å…¥</a></li></ul></li><li><a href="#åŸºäºæ³¨è§£" class="table-of-contents__link toc-highlight">åŸºäºæ³¨è§£</a></li><li><a href="#xml-å’Œæ³¨è§£æ··ç”¨" class="table-of-contents__link toc-highlight">xml å’Œæ³¨è§£æ··ç”¨</a></li><li><a href="#aop-æ¦‚å¿µ" class="table-of-contents__link toc-highlight">aop æ¦‚å¿µ</a></li><li><a href="#aop-è”ç›Ÿè§„èŒƒ" class="table-of-contents__link toc-highlight">aop è”ç›Ÿè§„èŒƒ</a><ul><li><a href="#é€šçŸ¥ç±»å‹" class="table-of-contents__link toc-highlight">é€šçŸ¥ç±»å‹</a></li><li><a href="#joinpoint-è¿æ¥ç‚¹" class="table-of-contents__link toc-highlight">Joinpoint è¿æ¥ç‚¹</a></li></ul></li><li><a href="#ä¸å’Œ-spring-é›†æˆå•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†" class="table-of-contents__link toc-highlight">ä¸å’Œ spring é›†æˆ(å•ç‹¬ä½¿ç”¨åŠ¨æ€ä»£ç†)</a><ul><li><a href="#é€šè¿‡-jdk-åŠ¨æ€ç”Ÿæˆä»£ç†" class="table-of-contents__link toc-highlight">é€šè¿‡ jdk åŠ¨æ€ç”Ÿæˆä»£ç†</a></li><li><a href="#é€šè¿‡-cglib-åŠ¨æ€ç”Ÿæˆä»£ç†" class="table-of-contents__link toc-highlight">é€šè¿‡ cglib åŠ¨æ€ç”Ÿæˆä»£ç†</a></li></ul></li><li><a href="#é€šè¿‡-proxyfactorybean-ç”Ÿæˆä»£ç†åŠè‡ªåŠ¨" class="table-of-contents__link toc-highlight">é€šè¿‡ ProxyFactoryBean ç”Ÿæˆä»£ç†(åŠè‡ªåŠ¨)</a></li><li><a href="#å…¨è‡ªåŠ¨å®ç°" class="table-of-contents__link toc-highlight">å…¨è‡ªåŠ¨å®ç°</a></li><li><a href="#ä½¿ç”¨-aspectj-æ¡†æ¶ç”Ÿæˆä»£ç†å’Œ-spring-é›†æˆ" class="table-of-contents__link toc-highlight">ä½¿ç”¨ AspectJ æ¡†æ¶ç”Ÿæˆä»£ç†(å’Œ spring é›†æˆ)</a><ul><li><a href="#å‡†å¤‡å·¥ä½œ" class="table-of-contents__link toc-highlight">å‡†å¤‡å·¥ä½œ</a></li><li><a href="#aspectj-é€šçŸ¥ç±»å‹" class="table-of-contents__link toc-highlight">AspectJ é€šçŸ¥ç±»å‹</a></li><li><a href="#aspectj-ç¼–ç¨‹åŸºäº-xml" class="table-of-contents__link toc-highlight">AspectJ ç¼–ç¨‹,åŸºäº xml</a></li><li><a href="#aspectj-ç¼–ç¨‹åŸºäºæ³¨è§£" class="table-of-contents__link toc-highlight">AspectJ ç¼–ç¨‹,åŸºäºæ³¨è§£</a></li></ul></li><li><a href="#æ•°æ®åº“è¿æ¥æ± " class="table-of-contents__link toc-highlight">æ•°æ®åº“è¿æ¥æ± </a><ul><li><a href="#c3p0" class="table-of-contents__link toc-highlight">C3P0</a></li><li><a href="#dbcp" class="table-of-contents__link toc-highlight">DBCP</a></li><li><a href="#druid" class="table-of-contents__link toc-highlight">Druid</a></li><li><a href="#bonecp" class="table-of-contents__link toc-highlight">BoneCP</a></li><li><a href="#hikaricp" class="table-of-contents__link toc-highlight">HikariCP</a></li></ul></li><li><a href="#jdbctemplate" class="table-of-contents__link toc-highlight">JdbcTemplate</a><ul><li><a href="#quickstart-1" class="table-of-contents__link toc-highlight">quickstart</a></li><li><a href="#dao-å®ç°ç±»ç»§æ‰¿-jdbcdaosupport-æ”¯æŒç±»" class="table-of-contents__link toc-highlight">Dao å®ç°ç±»ç»§æ‰¿ JdbcDaoSupport æ”¯æŒç±»</a></li><li><a href="#æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥-properties-æ–‡ä»¶" class="table-of-contents__link toc-highlight">æ•°æ®åº“è¿æ¥é…ç½®æ”¾å…¥ Properties æ–‡ä»¶</a></li></ul></li><li><a href="#äº‹åŠ¡å®ç°åŸç†" class="table-of-contents__link toc-highlight">äº‹åŠ¡å®ç°åŸç†</a></li><li><a href="#transactiondefinition-äº‹åŠ¡ä¼ æ’­" class="table-of-contents__link toc-highlight">TransactionDefinition äº‹åŠ¡ä¼ æ’­</a></li><li><a href="#äº‹åŠ¡ç›¸å…³-api" class="table-of-contents__link toc-highlight">äº‹åŠ¡ç›¸å…³ api</a><ul><li><a href="#platformtransactionmanager" class="table-of-contents__link toc-highlight">PlatformTransactionManager</a></li><li><a href="#transactionstatus" class="table-of-contents__link toc-highlight">TransactionStatus</a></li><li><a href="#ä½¿ç”¨-jdbc-æ“ä½œäº‹åŠ¡" class="table-of-contents__link toc-highlight">ä½¿ç”¨ jdbc æ“ä½œäº‹åŠ¡</a></li></ul></li><li><a href="#äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦" class="table-of-contents__link toc-highlight">äº‹åŠ¡ç›¸å…³æ¡ˆä¾‹-è½¬è´¦</a><ul><li><a href="#å‡†å¤‡" class="table-of-contents__link toc-highlight">å‡†å¤‡</a></li><li><a href="#æ‰‹åŠ¨å¼€å‘äº‹åŠ¡" class="table-of-contents__link toc-highlight">æ‰‹åŠ¨å¼€å‘äº‹åŠ¡</a></li><li><a href="#åŠè‡ªåŠ¨äº‹åŠ¡ç”Ÿæˆä»£ç†" class="table-of-contents__link toc-highlight">åŠè‡ªåŠ¨äº‹åŠ¡(ç”Ÿæˆä»£ç†)</a></li><li><a href="#å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº-xml" class="table-of-contents__link toc-highlight">å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäº xml</a></li><li><a href="#å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£" class="table-of-contents__link toc-highlight">å…¨è‡ªåŠ¨äº‹åŠ¡åŸºäºæ³¨è§£</a></li></ul></li><li><a href="#beannameawareapplicationcontextaware-å’Œ-beanfactoryaware" class="table-of-contents__link toc-highlight">BeanNameAwareã€ApplicationContextAware å’Œ BeanFactoryAware</a></li><li><a href="#beanpostprocessor-æ¥å£" class="table-of-contents__link toc-highlight">BeanPostProcessor æ¥å£</a></li><li><a href="#initialingbean-å’Œ-disposablebean" class="table-of-contents__link toc-highlight">InitialingBean å’Œ DisposableBean</a></li><li><a href="#factorybean-æ¥å£" class="table-of-contents__link toc-highlight">FactoryBean æ¥å£</a><ul><li><a href="#factorybean-è§£é‡Š" class="table-of-contents__link toc-highlight">FactoryBean è§£é‡Š</a></li><li><a href="#factorybean-æ¥å£çš„-api" class="table-of-contents__link toc-highlight">FactoryBean æ¥å£çš„ api</a></li><li><a href="#factorybean-ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹" class="table-of-contents__link toc-highlight">FactoryBean ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#factorybean-åœ¨-mabatis-spring-é›†æˆä¸­çš„åº”ç”¨" class="table-of-contents__link toc-highlight">factoryBean åœ¨ mabatis-spring é›†æˆä¸­çš„åº”ç”¨</a></li><li><a href="#factorybean-æ¡ˆä¾‹-dao-åˆ‡æ¢" class="table-of-contents__link toc-highlight">factoryBean æ¡ˆä¾‹-dao åˆ‡æ¢</a></li></ul></li><li><a href="#beanfactory-æ¥å£" class="table-of-contents__link toc-highlight">BeanFactory æ¥å£</a><ul><li><a href="#beanfactory-è§£é‡Š" class="table-of-contents__link toc-highlight">BeanFactory è§£é‡Š</a></li><li><a href="#api-æœ‰å“ªäº›" class="table-of-contents__link toc-highlight">api æœ‰å“ªäº›</a></li></ul></li><li><a href="#beanfactorypostprocessor" class="table-of-contents__link toc-highlight">BeanFactoryPostProcessor</a></li><li><a href="#instantiationawarebeanpostprocessor" class="table-of-contents__link toc-highlight">InstantiationAwareBeanPostProcessor</a></li><li><a href="#åŠ¨æ€æ³¨å†Œåœºæ™¯" class="table-of-contents__link toc-highlight">åŠ¨æ€æ³¨å†Œåœºæ™¯</a></li><li><a href="#åŠ¨æ€æ³¨å†Œ-api" class="table-of-contents__link toc-highlight">åŠ¨æ€æ³¨å†Œ api</a></li><li><a href="#æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ" class="table-of-contents__link toc-highlight">æ€ä¹ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ</a><ul><li><a href="#é€šè¿‡-beanfactorypostprocessor-å®ç°åŠ¨æ€æ³¨å†Œ" class="table-of-contents__link toc-highlight">é€šè¿‡ BeanFactoryPostProcessor å®ç°åŠ¨æ€æ³¨å†Œ</a></li><li><a href="#é€šè¿‡-beandefinitionregistry-åœ¨æ™®é€š-bean-ä¸­æ³¨å†Œ" class="table-of-contents__link toc-highlight">é€šè¿‡ BeanDefinitionRegistry åœ¨æ™®é€š bean ä¸­æ³¨å†Œ</a></li><li><a href="#é€šè¿‡-importbeandefinitionregistrar" class="table-of-contents__link toc-highlight">é€šè¿‡ ImportBeanDefinitionRegistrar</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.b94328d8.js"></script>
<script src="/en/assets/js/main.fc98d8e0.js"></script>
</body>
</html>