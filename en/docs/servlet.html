<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-servlet">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Servlet Note | Xiaoyureed&#x27;s 网络 Wiki </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/en/docs/servlet"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Servlet Note | Xiaoyureed&#x27;s 网络 Wiki "><meta data-rh="true" name="description" content="Servlet note"><meta data-rh="true" property="og:description" content="Servlet note"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/en/docs/servlet"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/servlet" hreflang="en"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/servlet" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/servlet" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Xiaoyureed&#39;s 网络 Wiki  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Xiaoyureed&#39;s 网络 Wiki  Atom Feed"><link rel="stylesheet" href="/en/assets/css/styles.c6a654bf.css">
<link rel="preload" href="/en/assets/js/runtime~main.b94328d8.js" as="script">
<link rel="preload" href="/en/assets/js/main.fc98d8e0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Xiaoyureed</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/en/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/FreeMarker-note">FreeMarker Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/SpringBoot-note">Spring Boot 备忘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/agile-development-user-story-scrum">敏捷开发 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/android">Android 开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/autohotkey">Autohotkey 脚本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/blockchain">blockchain区块链</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/c-sharp-and-dot-net">C# &amp; .NET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cloud-native-platform">云服务平台</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cpp">CPP and C 备忘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/css-pre-processor">几种CSS预处理器比较选型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/design-pattern-note">Design Pattern 笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/dev-resources">开发者资源</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/devops">DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/distributed-system">Distributed System 分布式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/effective-java-reading-note">Effective Java 阅读笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/elk-elastic-log">Distributed log collection分布式日志收集</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/english-note">英语学习🔥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/extjs-note">Extjs 笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/flutter">flutter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/games-development-introduce">游戏开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/git-note">Git 备忘 🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/github-starts">Github 星标⭐️</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/golang-note">Golang 笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gps-gis-tracing">基于地理位置开发技术</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gradle">gradle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/greasy-monkey">油猴插件&amp;编写脚本🐒</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/groovy-note">groovy note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/health">Health 关爱程序员健康🏥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/html-note">HTML 备忘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/idea-note">InteliJ idea tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/interview-system-design">经典的系统设计思路</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/iot">Iot 物联网</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-concurrent">Java Concurrent🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-memory-model-jmm-jvm">JMM and GC🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-note">Java Core 笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/jquery-note">JQuery notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/js-tutorial">JavaScript tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kotlin">kotlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kubernetes-k8s">kubernetes-k8s ☁️</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/linux-note">鸟哥的 Linux 私房菜阅读笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mac">Mac 开发环境</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/machine-learning-ml">machine-learning-ml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/maven-note">Maven Notes🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/message-queue">Message Queue🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/money">Investment Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mongodb-note">MongoDB Notes🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/monitor-system-grafana-prometheus-influxdb-hbase">monitor-system-grafana-prometheus监控🖥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mvc-mvvm">MVC to MVVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/netty-note">netty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nlp-natural-language-processing">nlp-natural-language-processing👄</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nodejs-yarn-npm">Nodejs, Yarn, Npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/oracle">Oracle 备忘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-big-data-introduce">大数据开发 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-cache">Cache 缓存🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-computational-ad">计算广告 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-crawler-spider">网络爬虫 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-db-design-note">关系型数据库表设计🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-desktop-develop">桌面应用开发 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-http">HTTP protocol Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-reactive-programming">响应式编程 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rest-api">RESTful api 及 其他webService技术</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rule-engine-note">规则引擎 Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/php-note">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/play-framework">Play框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/postgres-note">Postgres note🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/process-workflow-bpm-engine">工作流引擎</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/protect-your-app-authentication-oauth2-jwt-https">Protect Your App 安全保护认证鉴权🔑</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/python-note">Python🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quant-money">量化交易</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quarkus">Quarkus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/react-note">React🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/real-time-communication-protocol">实时通信 Real-time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/redis-note">Redis🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/regex">Regular Expression 正则🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/rust-note">Rust 笔记🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/saas-paas-iaas-as-a-service">SaaS Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/serverless">Serverless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/service-mesh">service mesh 服务网格</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/en/docs/servlet">Servlet Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/shell-bash-note">shell-bash脚本收集</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springcloud-note">Spring Cloud 笔记🌈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springmvc-note">Spring MVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/task-schedule-note">Task Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tcp-ip-note">TCP IP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tomcat-jetty-nginx">Tomcat Jetty Nginx 等 web 容器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/vertx">Vertx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/video-creator">拍摄</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webassembly">webassembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webpack-esbuild-vite-rollup">前端打包构建工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/windows-sub-system-on-linux">WSL 使用</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Servlet Note</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Servlet Note</h1></header><div align="center">Servlet note Servlet 是单实例多线程的, 因此会有 thread-safe 问题</div><ul><li><a href="#1-%E4%BB%8E%E8%B5%84%E6%BA%90%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B%E8%AF%B4%E8%B5%B7">1. 从资源请求过程说起</a></li><li><a href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8A%A8%E6%80%81%E8%B5%84%E6%BA%90">2. 什么是动态资源</a><ul><li><a href="#21-%E6%89%8B%E5%8A%A8%E5%BC%80%E5%8F%91servlet">2.1. 手动开发Servlet</a></li><li><a href="#22-%E5%80%9F%E5%8A%A9%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91servlet">2.2. 借助工具开发Servlet</a></li></ul></li><li><a href="#3-%E7%9B%AE%E5%BD%95%E8%A7%84%E8%8C%83">3. 目录规范</a></li><li><a href="#4-%E8%A7%A3%E5%86%B3web%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E4%B9%B1%E7%A0%81">4. 解决web项目中的乱码</a></li><li><a href="#5-web%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98">5. web项目中的路径问题</a></li><li><a href="#6-%E5%92%8C%E8%B7%AF%E5%BE%84%E7%9B%B8%E5%85%B3%E7%9A%84api">6. 和路径相关的api</a></li><li><a href="#7-servlet-details">7. Servlet details</a><ul><li><a href="#71-%E6%80%BB%E7%BB%93">7.1. 总结</a></li><li><a href="#72-tomcat%E6%9E%84%E9%80%A0servlet%E8%BF%87%E7%A8%8B">7.2. Tomcat构造Servlet过程</a></li><li><a href="#73-servlet%E6%98%A0%E5%B0%84%E8%B7%AF%E5%BE%84">7.3. Servlet映射路径</a></li><li><a href="#74-servlet%E7%BC%BA%E7%9C%81%E8%B7%AF%E5%BE%84">7.4. Servlet缺省路径</a></li><li><a href="#75-servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">7.5. Servlet生命周期</a></li><li><a href="#76-servlet%E6%8F%90%E5%89%8D%E5%8A%A0%E8%BD%BDload-on-startup">7.6. Servlet提前加载load-on-startup</a></li><li><a href="#77-initinitxxx%E5%8C%BA%E5%88%AB">7.7. init,initxxx区别</a></li><li><a href="#78-servlet%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91%E8%AE%BF%E9%97%AE">7.8. Servlet多线程并发访问</a></li><li><a href="#79-servletconfig%E5%AF%B9%E8%B1%A1">7.9. ServletConfig对象</a></li><li><a href="#710-servletcontext%E5%AF%B9%E8%B1%A1">7.10. ServletContext对象</a></li><li><a href="#711-demo">7.11. demo</a></li><li><a href="#712-%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE">7.12. 域对象共享数据</a></li></ul></li><li><a href="#8-jsp%E4%B9%9D%E4%B8%AA%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%9B%9B%E4%B8%AA%E5%9F%9F%E5%AF%B9%E8%B1%A1servlet%E4%B8%89%E5%A4%A7%E5%9F%9F%E5%AF%B9%E8%B1%A1">8. jsp九个内置对象/四个域对象,servlet三大域对象</a></li><li><a href="#9-%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%E8%AF%BB%E5%8F%96%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6">9. 三种方式读取资源文件</a></li><li><a href="#10-%E8%BD%AC%E5%8F%91%E9%87%8D%E5%AE%9A%E5%90%91">10. 转发&amp;重定向</a><ul><li><a href="#101-%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F">10.1. 调用方式</a></li><li><a href="#102-%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB">10.2. 本质区别</a></li><li><a href="#103-%E4%BB%A3%E7%A0%81%E4%BE%8B%E5%AD%90">10.3. 代码例子</a></li></ul></li><li><a href="#11-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86">11. 会话管理</a></li><li><a href="#12-%E8%BF%87%E6%BB%A4%E5%99%A8filter">12. 过滤器filter</a><ul><li><a href="#121-%E4%BC%A0%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95%E5%BC%80%E5%8F%91-filter">12.1. 传统配置方法开发 filter</a></li><li><a href="#122-%E6%A1%88%E4%BE%8B%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86%E7%BC%96%E7%A0%81">12.2. 案例:统一处理编码</a></li><li><a href="#123-%E6%A1%88%E4%BE%8B%E7%99%BB%E5%BD%95%E8%BF%87%E6%BB%A4">12.3. 案例:登录过滤</a></li><li><a href="#124-%E6%A1%88%E4%BE%8B%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95">12.4. 案例:自动登录</a></li><li><a href="#125-spring-boot-%E4%B8%AD%E4%BD%BF%E7%94%A8filter">12.5. spring boot 中使用filter</a></li></ul></li><li><a href="#13-%E7%9B%91%E5%90%AC%E5%99%A8listener">13. 监听器listener</a><ul><li><a href="#131-%E6%A6%82%E5%BF%B5">13.1. 概念</a></li><li><a href="#132-%E6%9C%89%E5%93%AA%E4%BA%9B%E7%9B%91%E5%90%AC%E5%99%A8">13.2. 有哪些监听器</a></li><li><a href="#133-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9B%91%E5%90%AC%E5%99%A8">13.3. 生命周期监听器</a></li><li><a href="#134-%E5%B1%9E%E6%80%A7%E7%9B%91%E5%90%AC%E5%99%A8">13.4. 属性监听器</a></li><li><a href="#135-session%E7%BB%91%E5%AE%9A%E7%9B%91%E5%90%AC%E5%99%A8">13.5. session绑定监听器</a></li></ul></li><li><a href="#14-i18n">14. i18n</a></li><li><a href="#15-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD">15. 文件上传下载</a><ul><li><a href="#151-form%E4%B8%AD%E5%8F%AA%E6%9C%89%E7%BA%AF%E6%96%87%E6%9C%AC%E6%95%B0%E6%8D%AE">15.1. form中只有纯文本数据</a></li><li><a href="#152-form%E4%B8%AD%E5%90%AB%E6%9C%89%E6%96%87%E6%9C%AC%E5%92%8C%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6">15.2. form中含有文本和二进制文件</a></li></ul></li><li><a href="#16-javamail%E9%82%AE%E4%BB%B6%E5%BC%80%E5%8F%91">16. javamail邮件开发</a></li><li><a href="#17-servlet30">17. servlet3.0</a><ul><li><a href="#171-%E5%BC%82%E6%AD%A5%E6%94%AF%E6%8C%81">17.1. 异步支持</a><ul><li><a href="#1711-%E5%AE%9E%E7%8E%B0%E8%AF%B7%E6%B1%82%E7%BA%BF%E7%A8%8B%E6%B1%A0%E9%9A%94%E7%A6%BB">17.1.1. 实现请求线程池隔离</a></li></ul></li><li><a href="#172-%E6%8F%92%E4%BB%B6%E5%BC%8F%E5%BC%80%E5%8F%91">17.2. 插件式开发</a></li><li><a href="#173-%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">17.3. 注解开发</a></li></ul></li><li><a href="#18-xxxwapper">18. xxxWapper</a></li><li><a href="#19-servlet%E5%92%8C%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98">19. servlet和线程安全问题</a></li></ul><h1>从资源请求过程说起</h1><h1>什么是动态资源</h1><p>动态资源是相对于静态资源来说的, 当多个user访问动态资源, 页面源代码可能会发生改变</p><p>Servlet本质是一个接口, 是定义的一套开发规范, 自定义的servlet需要实现该接口, 实现对应的方法, 如init(), service(), destroy();</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="手动开发servlet">手动开发Servlet<a href="#手动开发servlet" class="hash-link" aria-label="Direct link to 手动开发Servlet" title="Direct link to 手动开发Servlet">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 第一个servlet程序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloServlet extends HttpServlet{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void doGet(HttpServletRequest req, HttpServletResponse resp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //解决中文乱码问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resp.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //向浏览器输出内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resp.getWriter().write(&quot;这是第一个servlet程序。当前时间为：&quot;+new Date());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>编译后,拷贝helloServlet到Tomcat里的web项目的WEB-INF/classes.</p><p>配置web.xml:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 配置一个servlet程序 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- servlet的内部名称 ，可以自定义--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">HelloServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- servlet类名： 包名+简单类名--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">gz.itcast.d_servlet.HelloServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- servlet的内部名称，和上面的名称保持一致！！！--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">HelloServlet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- servlet的访问名称： /名称 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/hello</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>访问: http://localhost:8080/projectName/hello</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="借助工具开发servlet">借助工具开发Servlet<a href="#借助工具开发servlet" class="hash-link" aria-label="Direct link to 借助工具开发Servlet" title="Direct link to 借助工具开发Servlet">​</a></h2><ol><li>常见web project</li><li>在webroot文件夹下创建静态资源文件, 如js, css等</li><li>src文件夹下创建动态资源文件</li><li>在工具中关联Tomcat</li><li>部署(拷贝web app 到Tomcat的webapps文件夹下)</li><li>启动Tomcat, 访问</li></ol><h1>目录规范</h1><p><a href="https://blog.csdn.net/u011687186/article/details/61194580" target="_blank" rel="noopener noreferrer">java web项目WEB-INF与META-INF的作用</a></p><p>使用 eclipse 生成的 maven web 项目 目录规范如下:</p><h1>解决web项目中的乱码</h1><p><a href="https://blog.csdn.net/xiazdong/article/details/7217022" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/xiazdong/article/details/7217022</a></p><p>spring web 包提供一个filter 解决 post 请求乱码</p><p>web.xml配置</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 编码过滤器 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CharacterEncodingFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.web.filter.CharacterEncodingFilter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">encoding</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">UTF-8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CharacterEncodingFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>web项目中的路径问题</h1><p>根据request 获取的各种路径(以及, 登录成功后怎么根据记住的URL跳回用户最后访问的页面): <a href="https://www.cnblogs.com/JemBai/archive/2010/11/10/1873764.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/JemBai/archive/2010/11/10/1873764.html</a></p><p>转发和重定向中的路径有什么区别? 看看这个例子</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * web应用中路径问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PathDemo extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //目标资源： target.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 思考： 目标资源是给谁使用的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *      给服务器使用的：   / 表示在当前web应用的根目录（webRoot下）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *      给浏览器使用的： /  表示在webapps的根目录下-----意味着地址要加项目名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 1.转发, 给server用, &quot;/&quot;代表当前项目的webroot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        request.getRequestDispatcher(&quot;/target.html&quot;).forward(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //  2.请求重定向, 给client用, &quot;/&quot;代表Tomcat的webapps目录下, 需要带上项目名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.sendRedirect(&quot;/day11/target.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         // 3.html页面的超连接href</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.getWriter().write(&quot;&lt;html&gt;&lt;body&gt;&lt;a href=&#x27;/day11/target.html&#x27;&gt;超链接&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 4.html页面中的form提交地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.getWriter().write(&quot;&lt;html&gt;&lt;body&gt;&lt;form action=&#x27;/day11/target.html&#x27;&gt;&lt;input type=&#x27;submit&#x27;/&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>和路径相关的api</h1><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//假定你的web application 名称为news,你在浏览器中输入请求路径：http://localhost:8080/news/main/list.jsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//则执行下面代码后打印出如下结果：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> System.out.println(request.getContextPath());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//打印结果：/news</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(request.getServletPath());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//打印结果：/main/list.jsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(request.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//打印结果：/news/main/list.jsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(request.getRequestURL());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//打印结果：http://localhost:8080/news/main/list.jsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(request.getRealPath(&quot;/&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//打印结果：F:\Tomcat 6.0\webapps\news\test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果是Servlet , Action , Controller, 或者Filter , Listener , 拦截器等相关类时， 我们只需要获得ServletContext， 然后通过ServletContext.getRealPath(&quot;/&quot;)来获取当前应用在服务器上的物理地址。</li><li>如果在类中取不到ServletContext时，利用Java的类加载机制：调用XXX.class.getClassLoader().getResource(&quot;&quot;); 方法来获取到ClassPath , 然后处理获得WebRoot目录。</li><li>这种方式只能是该class在WebRoot/WEB-INF/classes下才能生效， 如果该class被打包到一个jar文件中， 则该方法失效。</li></ul><h1>Servlet details</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="Direct link to 总结" title="Direct link to 总结">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Servlet编程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1）Servlet生命周期</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    构造方法： 创建servlet对象。默认情况下，第一次访问servlet对象时。只调用1次。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    init方法（有参）： 创建完servlet对象后调用。只调用1次。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            注意： 会调用无参的init方法。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service方法： servlet提供服务的方法。每次发出请求调用。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            注意： request对象 ，response对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    destroy方法： tomcat服务器停止或web应用重新部署，servlet对象销毁，destroy方法被调用。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2）ServletConfig对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        获取servlet的初始化参数：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            getInitParameter(&quot;name    &quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            getInitParameterNames();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3）ServletContext对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        得到web应用路径：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.getContextPath();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                request.getContextPath();  等价于上面的代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        得到web应用参数：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.getInitParameter(&quot;name&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.getInitParameterNames();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        域对象:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.setAttribute(&quot;name&quot;,Object): 保存数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.getAttribute(&quot;name&quot;)   得到数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.removeAttribue(&quot;name&quot;)  清除数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        转发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.getRequestDispatcher(&quot;路径&quot;).forward(request,response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                request.getRequestDispacher(&quot;路径&quot;).forward(request,response);  等价于上面的代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        得到web应用中的资源文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.getRealPath(&quot;路径&quot;)          这里的路径一般是/WEB-INF/classes/db.properties，得到的是绝对路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.getResourceAsStream(&quot;路径&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                clazz.getResourceAcStream(&quot;/xxx&quot;);----------------带有斜杠，src目录下</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                clazz.getClassLoader().getResourceAsStream(“xxx”);------------不带斜杠，src目录下</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tomcat构造servlet过程">Tomcat构造Servlet过程<a href="#tomcat构造servlet过程" class="hash-link" aria-label="Direct link to Tomcat构造Servlet过程" title="Direct link to Tomcat构造Servlet过程">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="servlet映射路径">Servlet映射路径<a href="#servlet映射路径" class="hash-link" aria-label="Direct link to Servlet映射路径" title="Direct link to Servlet映射路径">​</a></h2><p>servlet 的 url pattern</p><p>demo:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="servlet缺省路径">Servlet缺省路径<a href="#servlet缺省路径" class="hash-link" aria-label="Direct link to Servlet缺省路径" title="Direct link to Servlet缺省路径">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="servlet生命周期">Servlet生命周期<a href="#servlet生命周期" class="hash-link" aria-label="Direct link to Servlet生命周期" title="Direct link to Servlet生命周期">​</a></h2><p>Servlet生命周期由Tomcat控制(何时创建, 何时调用, 何时销毁)</p><p>四个生命周期方法:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="servlet提前加载load-on-startup">Servlet提前加载(load-on-startup)<a href="#servlet提前加载load-on-startup" class="hash-link" aria-label="Direct link to Servlet提前加载(load-on-startup)" title="Direct link to Servlet提前加载(load-on-startup)">​</a></h2><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">LifeDemo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">gz.itcast.c_life.LifeDemo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 让servlet对象自动加载 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 当值 &gt;=0 时，表示容器在应用启动时就加载这个servlet；整数值越大，创建优先级越低</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    当 &lt;0 或者 没有指定时，则指示容器在该servlet被选择时才加载。</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                    默认值 = -1 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">load-on-startup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">load-on-startup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="initinitxxx区别">init(),init(xxx)区别<a href="#initinitxxx区别" class="hash-link" aria-label="Direct link to init(),init(xxx)区别" title="Direct link to init(),init(xxx)区别">​</a></h2><p>看下面demo</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 有参数的init和无参的init方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class InitDemo extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 有参数的init方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 该方法是servlet的生命周期方法，一定会被tomcat服务器调用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 注意：如果要编写初始代码，不需要覆盖有参数的init方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*@Override------------这是错误的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(ServletConfig config) throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;有参数的init方法&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 无参数的init方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 该方法是servlet的编写初始化代码的方法。是Sun公司设计出来专门给开发者进行覆盖，然后在里面编写servlet的初始逻辑代码的方法。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init() throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;无参数的init方法&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="servlet多线程并发访问">Servlet多线程并发访问<a href="#servlet多线程并发访问" class="hash-link" aria-label="Direct link to Servlet多线程并发访问" title="Direct link to Servlet多线程并发访问">​</a></h2><p>demo: 记录第几位访客</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * servlet的多线程并发问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TheradDemo extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int count = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (TheradDemo.class) {//锁对象必须唯一。建议使用类对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.getWriter().write(&quot;你现在是当前网站的第&quot;+count+&quot;个访客&quot;);   //线程1执行完  ， 线程2执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            count++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="servletconfig对象">ServletConfig对象<a href="#servletconfig对象" class="hash-link" aria-label="Direct link to ServletConfig对象" title="Direct link to ServletConfig对象">​</a></h2><p>每个 servlet 都有一个 ServletConfig</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ConfigDemo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.xy.ConfigDemo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 初始参数： 这些参数会在加载web应用的时候，封装到ServletConfig对象中, servlet的参数只能由当前的这个sevlet获取--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">path</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">e:/b.txt</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">BBB</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">BBB&#x27;s value</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CCCC</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CCCC&#x27;s value</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">servlet</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>获取初始化参数的api</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ConfigDemo extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  1）tomcat服务器把这些参数会在加载web应用的时候，封装到ServletConfig对象中 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  2）tomcat服务器调用init方法传入ServletConfig对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* 这是内部隐藏的代码:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ServletConfig config;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(ServletConfig config) throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.config = config;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 读取servlet的初始参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String path = this.getServletConfig().getInitParameter(&quot;path&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File file = new File(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //读取内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BufferedReader br = new BufferedReader(new FileReader(file));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String str = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while( (str=br.readLine())!=null ){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(str);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //查询当前servlet的所有初始化参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Enumeration&lt;String&gt; enums = this.getServletConfig().getInitParameterNames();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while(enums.hasMoreElements()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String paramName = enums.nextElement();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String paramValue = this.getServletConfig().getInitParameter(paramName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(paramName+&quot;=&quot;+paramValue);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //得到servlet的名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String servletName = this.getServletConfig().getServletName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(servletName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="servletcontext对象">ServletContext对象<a href="#servletcontext对象" class="hash-link" aria-label="Direct link to ServletContext对象" title="Direct link to ServletContext对象">​</a></h2><p><a href="https://www.zhihu.com/question/38481443" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/38481443</a></p><ul><li>每个应用程序都有一个唯一的ServletContext对象。它不能跨应用程序。它可以实现应用程序内的数据共享。</li><li>它的内部维护了一个Map集合，该集合中放的就是共享的数据。</li><li>用什么方法可以操作这个集合呢？<ul><li>setAttribute(key,value);//放key-value对</li><li>Object obj = getAttribute(key);  //取值</li><li>removeAttribute(key);       //移除key-value对</li><li>ServletContext的生命周期，与应用程序共存。</li></ul></li></ul><p>ServletContext的设计是这样的</p><p>api:</p><p>如何获取?</p><ul><li>config.getServletContext();</li><li>this.getServletContext()</li></ul><p>有哪些作用?</p><ul><li>获取全局（web应用）初始化参数</li><li>转发(获取转发器)</li><li>根据相对路径得到绝对路径</li><li>缓存(Web缓存----把不经常更改的内容读入内存，所以服务器响应请求的时候就不需要进行慢速的磁盘I/O了。)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="demo">demo<a href="#demo" class="hash-link" aria-label="Direct link to demo" title="Direct link to demo">​</a></h2><ul><li>得到web应用路径, 转发, 重定向</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 得到web应用路径, 转发, 重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ContextDemo1 extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.得到ServletContext对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ServletContext context = this.getServletConfig().getServletContext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletContext context = this.getServletContext(); //（推荐使用）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.得到web应用路径  /day10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * web应用路径：部署到tomcat服务器上运行的web应用名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String contextPath = context.getContextPath();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(contextPath);    //--     /day10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 案例：应用到请求重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.sendRedirect(contextPath+&quot;/index.html&quot;);//重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.getRequestDispatcher(&quot;servlet名&quot;).forward(request,response);//转发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>获取Context参数(web参数可以让应用中所有的Servlet获取, 而Servlet参数只能让对应的一个servlet获取)</li></ul><p>web.xml配置文件是这样:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">web-app</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 配置web应用参数 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">AAA</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">AAA&#x27;s value</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">BBB</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">BBB&#x27;s value</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CCC</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">CCC&#x27;s value</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">context-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">web-app</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 得到web应用参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ContextDemo2 extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //得到SErvletContext对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletContext context = this.getServletContext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;参数&quot;+context.getInitParameter(&quot;AAA&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Enumeration&lt;String&gt; enums = context.getInitParameterNames();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while(enums.hasMoreElements()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String paramName = enums.nextElement();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String paramValue  =context.getInitParameter(paramName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(paramName+&quot;=&quot;+paramValue);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //尝试得到ConfigDemo中的servlet参数，但是得不到, servlet参数不互通</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String path = this.getServletConfig().getInitParameter(&quot;path&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;path=&quot;+path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>读取应用下的资源文件（如properties文件）</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 读取web应用下的资源文件（例如properties）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ResourceDemo extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * “ .” 代表java命令运行目录。此时 在tomcat/bin目录下</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *  在web项目中， . 代表在tomcat/bin目录下开始，所以不能使用这种相对路径。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*File file = new File(&quot;./src/db.properties&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileInputStream in = new FileInputStream(file);*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 使用web应用下加载资源文件的方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 1. getRealPath读取,返回资源文件的绝对路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String path = this.getServletContext().getRealPath(&quot;/WEB-INF/classes/db.properties&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File file = new File(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileInputStream in = new FileInputStream(file);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 2. getResourceAsStream()，返回的是输入流</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        InputStream in = this.getServletContext().getResourceAsStream(&quot;/WEB-INF/classes/db.properties&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Properties prop = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //读取资源文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prop.load(in);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String user = prop.getProperty(&quot;user&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String password = prop.getProperty(&quot;password&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;user=&quot;+user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;password=&quot;+password);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="域对象共享数据">域对象共享数据<a href="#域对象共享数据" class="hash-link" aria-label="Direct link to 域对象共享数据" title="Direct link to 域对象共享数据">​</a></h2><h1>jsp九个内置对象/四个域对象,servlet三大域对象</h1><p>搜索&quot;jsp-note&quot;⬅️</p><h1>三种方式读取资源文件</h1><ul><li>servletContext.getRealPath(&quot;xxx&quot;)</li><li>ResourceBundle.getBundle(&quot;xxx&quot;)</li><li>this.getClass().getClassLoader().getResourceAsStram(&quot;xxx&quot;)</li></ul><p>demo:</p><h1>转发&amp;重定向</h1><p><a href="#web%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98">转发和重定向时候的路径问题</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="调用方式">调用方式<a href="#调用方式" class="hash-link" aria-label="Direct link to 调用方式" title="Direct link to 调用方式">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">我们知道，在servlet中调用转发、重定向的语句如下：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">request.getRequestDispatcher(&quot;new.jsp&quot;).forward(request, response);//转发到new.jsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response.sendRedirect(&quot;new.jsp&quot;);//重定向到new.jsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在jsp页面中你也会看到通过下面的方式实现转发：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;jsp:forward page=&quot;apage.jsp&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">当然也可以在jsp页面中实现重定向：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;%response.sendRedirect(&quot;new.jsp&quot;);//重定向到new.jsp%&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="本质区别">本质区别<a href="#本质区别" class="hash-link" aria-label="Direct link to 本质区别" title="Direct link to 本质区别">​</a></h2><p><a href="https://blog.csdn.net/meiyalei/article/details/2129120" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/meiyalei/article/details/2129120</a></p><p>转发是服务器行为，重定向是客户端行为</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="代码例子">代码例子<a href="#代码例子" class="hash-link" aria-label="Direct link to 代码例子" title="Direct link to 代码例子">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 转发（效果：跳转页面）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ForwardDemo1 extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //转发    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 注意：不能转发当前web应用以外的资源。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getServletContext().getRequestDispatcher(&quot;/GetDateServlet&quot;).forward(request, response);// 再 server服务器内部就完成了, so 路径无需加项目名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //包含</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getServletContext().getRequestDispatcher(&quot;&quot;).include(request, response);//将目标结果包含到源；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/*重定向效果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RedirectDemo1 extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 保存数据到request域对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        request.setAttribute(&quot;name&quot;, &quot;rose&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 注意：可以跳转到web应用内，或其他web应用，甚至其他外部域名。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        可以跳转到 servlet, 页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //response.sendRedirect(&quot;/day09/adv.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.sendRedirect(&quot;/day10/GetDataServlet&quot;);// 路径需要加上项目名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>会话管理</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1) 会话管理： 管理浏览器客户端 和 服务器端之间会话过程中产生的会话数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一次会话： 打开浏览器 -&gt; 访问一些服务器内容 -&gt; 关闭浏览器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> eg ：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">登录场景：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    打开浏览器 -&gt; 浏览到登陆页面 -&gt; 输入用户名和密码 -&gt; 访问到用户主页(显示用户名)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">购物场景：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     打开浏览器 -&gt; 浏览商品列表  -&gt; 加入购物车(把商品信息保存下来)  -&gt; 关闭浏览器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     打开浏览器-&gt;  直接进入购物车 -&gt; 查看到上次加入购物车的商品 -&gt; 下订单 -&gt; 支付</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">但是这里有个问题： 会话过程中，如何保存商品信息或者用户信息？？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">域对象： 实现资源之间的数据共享。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request域对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context域对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">尝试解决保存数据的问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">登录场景：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    小张： 输入“张三” （保存数据： context.setAttribute(&quot;name&quot;,&quot;张三&quot;)） -&gt; 用户主页（显示“张三”）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    小李： 输入“李四”(保存数据：context.setAttribute(&quot;name&quot;,&quot;李四&quot;)) -&gt;     用户主页（显示“李四”）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">问题： context是所有用户公有的资源！会覆盖数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">其实最好的办法：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    可以使用session域对象来保存会话数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">会话技术: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Cookie技术：会话数据保存在浏览器客户端。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Session技术：会话数据保存在服务器端。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2）Cookie技术： 会话数据保存在浏览器客户端。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cookie核心的API/原理：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2.1 在服务器端创建Cookie对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cookeie cookie = new Cookie(&quot;name&quot;,&quot;value&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void setPath(java.lang.String uri)   ：设置cookie的有效访问路径, 当访问的resource不再有效路径, 则不带cookies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            eg1: cookie.setPath(&quot;/day17&quot;), 浏览器再次访问/day17/xxx/xxx.jsp（就是项目/day17下的资源）时，就携带cookie信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            eg2: cookie.setPath(&quot;/&quot;);，则表示访问访问任何资源都带cookie信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void setMaxAge(int expiry) ： 设置cookie的有效时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            正整数：表示cookie数据保存浏览器的缓存目录（硬盘中），数值表示保存的时间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            负整数：表示cookie数据保存浏览器的内存中。浏览器关闭cookie就丢失了！！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            零：表示删除同名的cookie数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void setValue(java.lang.String newValue) ：设置cookie的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2.2 把cookie发送给浏览器端（隐式发送了一个响应头：set-cookie: name=value）保存起来</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.addCookie(cookie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2.3 再次访问, 浏览器带着cookie信息访问服务器（通过请求头：cookie），服务器得到cookie信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cookie[] cookies = request.getCookies();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">局限：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1）只能保存字符串类型，不能保存中文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2）可以保存多个cookie，但是浏览器一般只允许存放300个Cookie，每个站点最多存放20个Cookie，每个Cookie的大小限制为4KB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3）Session技术：会话数据保存在服务器端(内存中)。服务器能够识别不同的浏览者</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session核心的API/原理：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3.1 创建或得到session对象    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = request.getSession(); //创建或得到session对象, 若没有匹配的session编号, 则返回新创建的session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        request.getSession(false); //得到session对象, 若没有匹配的编号, 返回null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3.2 会话数据保存session对象中，和得到会话数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        session.setAttribute(&quot;name&quot;,Object);  保存数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        session.getAttribute(&quot;name&quot;)   得到数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void removeAttribute(java.lang.String name) ： 清除数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3.3 设置session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void setMaxInactiveInterval(int interval)  ： 设置session的有效时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            默认情况30分钟服务器自动回收</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- 修改session全局有效时间:   分钟； 在&lt;web-app&gt;里面--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;session-config&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;session-timeout&gt;1&lt;/session-timeout&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/session-config&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void invalidate()     ： 手动销毁session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String getId()  ： 得到session编号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session原理:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1）第一次访问创建session对象，给session对象分配一个唯一的ID，叫JSESSIONID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2）把JSESSIONID作为Cookie的值发送给浏览器保存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cookie cookie = new Cookie(&quot;JSESSIONID&quot;, sessionID);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.addCookie(cookie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3）第二次访问的时候，浏览器带着JSESSIONID的cookie访问服务器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4）服务器得到JSESSIONID，在服务器的内存中搜索是否存放对应编号的session对象。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    即搜索这样的数据结构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String,HttpSession&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;&quot;s001&quot;, s1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;&quot;s001,&quot;s2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(找到){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return map.get(sessionID);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        创建新的session对象，继续走1的流程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">结论：通过存储早浏览器中的JSESSION的cookie值在服务器找session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">问题: 如何避免浏览器的JSESSIONID的cookie随着浏览器关闭而丢失的问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 手动发送一个硬盘保存的cookie给浏览器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cookie c = new Cookie(&quot;JSESSIONID&quot;,session.getId());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c.setMaxAge(60*60);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response.addCookie(c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>cookies demo:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 第一个cookie的程序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CookieDemo1 extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.创建Cookie对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cookie cookie1 = new Cookie(&quot;name&quot;,&quot;eric&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Cookie cookie2 = new Cookie(&quot;email&quot;,&quot;jacky@qq.com&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Cookie cookie1 = new Cookie(&quot;email&quot;,&quot;eric@qq.com&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 1）设置cookie的有效路径。默认情况：有效路径在当前web应用下。 /day11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //cookie1.setPath(&quot;/day11&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //cookie2.setPath(&quot;/day12&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 2)设置cookie的有效时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 正整数：表示cookie数据保存浏览器的缓存目录（硬盘中），数值表示保存的时间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            负整数：表示cookie数据保存浏览器的内存中。浏览器关闭cookie就丢失了！！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            零：表示删除同名的cookie数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //cookie1.setMaxAge(20); //20秒，从最后不调用cookie开始计算</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cookie1.setMaxAge(-1); //cookie保存在浏览器内存（会话cookie）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //cookie1.setMaxAge(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.把cookie数据发送到浏览器（通过响应头发送： set-cookie名称）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //response.setHeader(&quot;set-cookie&quot;, cookie.getName()+&quot;=&quot;+cookie.getValue()+&quot;,email=eric@qq.com&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //推荐使用这种方法，避免手动发送cookie信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.addCookie(cookie1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //response.addCookie(cookie2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //response.addCookie(cookie1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //3.接收浏览器发送的cookie信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String name = request.getHeader(&quot;cookie&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //获取所有的cookies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cookie[] cookies = request.getCookies();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //注意：判断null,否则空指针</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(cookies!=null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //遍历</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for(Cookie c:cookies){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String name = c.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String value = c.getValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(name+&quot;=&quot;+value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;没有接收cookie数据&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>session demo: </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 保存会话数据到session域对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SessionDemo1 extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.创建session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = request.getSession();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 得到session编号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;id=&quot;+session.getId());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 修改session的有效时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        session.setMaxInactiveInterval(20);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 手动发送一个硬盘保存的cookie给浏览器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cookie c = new Cookie(&quot;JSESSIONID&quot;,session.getId());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        c.setMaxAge(60*60);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.addCookie(c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.保存会话数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        session.setAttribute(&quot;name&quot;, &quot;rose&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 从session域对象中取出会话数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SessionDemo2 extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.得到session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = request.getSession(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(session==null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;没有找到对应的sessino对象&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 得到session编号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;id=&quot;+session.getId());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.取出数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String name = (String)session.getAttribute(&quot;name&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;name=&quot;+name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 销毁session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DeleteSession extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = request.getSession(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(session!=null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            session.invalidate();//手动销毁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;销毁成功&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>案例: 上次访问时间</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 案例-用户上次访问时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HistServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //获取当前时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String curTime = format.format(new Date());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //取得cookie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cookie[] cookies = request.getCookies();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String lastTime = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 第n次访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(cookies!=null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (Cookie cookie : cookies) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if(cookie.getName().equals(&quot;lastTime&quot;)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //有lastTime的cookie，已经是第n次访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    lastTime = cookie.getValue();//上次访问的时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //第n次访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //1.把上次显示时间显示到浏览器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.getWriter().write(&quot;欢迎回来，你上次访问的时间为：&quot;+lastTime+&quot;,当前时间为：&quot;+curTime);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //2.更新cookie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    cookie.setValue(curTime);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    cookie.setMaxAge(1*30*24*60*60);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //3.把更新后的cookie发送到浏览器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.addCookie(cookie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 第一次访问（没有cookie 或 有cookie，但没有名为lastTime的cookie）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(cookies==null || lastTime==null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //1.显示当前时间到浏览器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.getWriter().write(&quot;你是首次访问本网站，当前时间为：&quot;+curTime);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //2.创建Cookie对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Cookie cookie = new Cookie(&quot;lastTime&quot;,curTime);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cookie.setMaxAge(1*30*24*60*60);//保存一个月，单位s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //3.把cookie发送到浏览器保存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.addCookie(cookie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>案例: 登录/注销场景</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 处理登录的逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        request.setCharacterEncoding(&quot;utf-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.接收参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String userName = request.getParameter(&quot;userName&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String userPwd = request.getParameter(&quot;userPwd&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.判断逻辑（这里写死了，正常应该要到数据库中比对）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(&quot;eric&quot;.equals(userName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 &amp;&amp; &quot;123456&quot;.equals(userPwd)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //登录成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             * 分析：选取哪个域对象？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             *    context域对象：不合适，可能会覆盖数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             *    request域对象： 不合适，整个网站必须得使用转发技术来跳转页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             *    session域对象：合适，每个用户对应一个session。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             * 一、登录成功后，把用户数据保存session对象中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //1.创建session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpSession session = request.getSession();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //2.把数据保存到session域中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            session.setAttribute(&quot;loginName&quot;, userName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //3.跳转到用户主页</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.sendRedirect(request.getContextPath()+&quot;/IndexServlet&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //登录失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //请求重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.sendRedirect(request.getContextPath()+&quot;/fail.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        doGet(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 用户主页的逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class IndexServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PrintWriter writer = response.getWriter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String html = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 二、在用户主页，判断session不为空且存在指定的属性才视为登录成功！才能访问资源。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 从session域中获取会话数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.得到session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = request.getSession(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(session==null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //没有登录成功，跳转到登录页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.sendRedirect(request.getContextPath()+&quot;/login.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.取出会话数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String loginName = (String)session.getAttribute(&quot;loginName&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(loginName==null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //没有登录成功，跳转到登录页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.sendRedirect(request.getContextPath()+&quot;/login.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        html = &quot;&lt;html&gt;&lt;body&gt;欢迎回来，&quot;+loginName+&quot;，&lt;a href=&#x27;&quot;+request.getContextPath()+&quot;/LogoutServlet&#x27;&gt;安全退出&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        writer.write(html);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        doGet(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 退出逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LogoutServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 三、安全退出：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *      删除掉session对象中指定的loginName属性即可！  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.得到session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = request.getSession(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(session!=null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //2.删除属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            session.removeAttribute(&quot;loginName&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.回来登录页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.sendRedirect(request.getContextPath()+&quot;/login.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        doGet(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>过滤器filter</h1><p><a href="https://blog.csdn.net/hanghangde/article/details/51298221" target="_blank" rel="noopener noreferrer">filter排除指定servlet</a></p><p>filter init() 会在程序启动时执行, 而 dofilter() 会在拦截请求成功时执行</p><p>过滤器，设计执行流程：</p><ol><li>用户访问服务器</li><li>过滤器： 对Servlet请求进行拦截</li><li>先进入过滤器， 过滤器处理</li><li>过滤器处理完后， 再放行， 此时，请求到达Servlet/JSP</li><li>Servlet处理</li><li>Servlet处理完后，再回到过滤器, 最后在由tomcat服务器回应用户</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="传统配置方法开发-filter">传统配置方法开发 filter<a href="#传统配置方法开发-filter" class="hash-link" aria-label="Direct link to 传统配置方法开发 filter" title="Direct link to 传统配置方法开发 filter">​</a></h2><ol><li><p>编写java类实现Filter接口，并实现其doFilter方法。</p></li><li><p>在web.xml文件中使用<code>&lt;filter&gt;</code>和<code>&lt;filter-mapping&gt;</code>元素对编写的filter类进行注册，并设置它所能拦截的资源。</p></li></ol><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 过滤器，测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloFilter implements Filter{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HelloFilter(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;1. 创建过滤器实例&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(FilterConfig filterConfig) throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;2. 执行过滤器初始化方法&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 获取过滤器在web.xml中配置的初始化参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String encoding = filterConfig.getInitParameter(&quot;encoding&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(encoding);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 获取过滤器在web.xml中配置的初始化参数 的名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Enumeration&lt;String&gt; enums =  filterConfig.getInitParameterNames();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while (enums.hasMoreElements()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 获取所有参数名称：encoding、path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    String name = enums.nextElement();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 获取名称对应的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    String value = filterConfig.getInitParameter(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(name + &quot;\t&quot; + value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 过滤器业务处理方法： 在请求到达servlet之前先进入此方法处理公用的业务逻辑操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest request, ServletResponse response,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    FilterChain chain) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;3. 执行过滤器业务处理方法&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 放行 (去到Servlet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 如果有下一个过滤器，进入下一个过滤器，否则就执行访问servlet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            chain.doFilter(request, response);     //必须要此行代码才能访问资源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;5. Servlet处理完成，又回到过滤器&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroy() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;6. 销毁过滤器实例&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 过滤器配置 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 配置初始化参数 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">encoding</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">UTF-8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">path</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">c:/...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">param-value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init-param</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 内部名称 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">hello_filter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 过滤器类的全名 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">cn.itcast.a_filter_hello.HelloFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- filter内部名称 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">hello_filter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 拦截资源, /* 表示对所有请求过滤 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 1. 拦截所有</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 2. 拦截指定的jsp ，拦截多个资源</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     &lt;url-pattern&gt;/index.jsp&lt;/url-pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     &lt;url-pattern&gt;/list.jsp&lt;/url-pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 拦截所有的jsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">      --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 3. 根据servlet的内部名称拦截</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">      &lt;servlet-name&gt;IndexServlet&lt;/servlet-name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 拦截指定的servlet </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">      &lt;url-pattern&gt;/index&lt;/url-pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">      --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 4. 拦截指定的类型，&lt;dispatcher&gt;指定过滤器所拦截的资源被 Servlet 容器调用的方式，可以是</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            REQUEST(默认): 拦截浏览器直接访问or重定向,</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            INCLUDE: 拦截转发,</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            FORWARD: 拦截包含的页面(RequestDispatcher.include(&quot;/page.jsp&quot;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            ERROR: 拦截声明式异常信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    ，用户可以设置多个&lt;dispatcher&gt; 子元素用来指定 Filter 对资源的多种调用方式进行拦截</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">      &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">      &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="案例统一处理编码">案例:统一处理编码<a href="#案例统一处理编码" class="hash-link" aria-label="Direct link to 案例:统一处理编码" title="Direct link to 案例:统一处理编码">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">过滤器：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 编码处理统一写到这里(servlet中不需要再处理编码)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EncodingFilter implements Filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 过滤器业务处理方法：包含的是公用的业务逻辑操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest req, ServletResponse res,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    FilterChain chain) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 转型，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final HttpServletRequest request = (HttpServletRequest) req;    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletResponse response = (HttpServletResponse) res;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 一、处理公用业务（公共代码）// 但是只对POST提交有效</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        request.setCharacterEncoding(&quot;UTF-8&quot;);                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 当时GET提交方式时，出现中文乱码，是因为在request.getParameter方法内部没有进行提交方式判断并处理。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * String name = request.getParameter(&quot;userName&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 解决：对指定接口的某一个方法进行功能扩展，可以使用代理!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *      对request对象(目标对象)，创建代理对象！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletRequest proxy =  (HttpServletRequest) Proxy.newProxyInstance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            request.getClass().getClassLoader(),         // 指定当前使用的类加载器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new Class[]{HttpServletRequest.class},         // 目标对象实现了哪些接口类型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new InvocationHandler() {                    // 事件处理器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public Object invoke(Object proxy, Method method, Object[] args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 定义方法返回值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Object returnValue = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 获取方法名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    String methodName = method.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 判断：对getParameter方法添加进行GET提交中文处理的代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (&quot;getParameter&quot;.equals(methodName)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // 获取请求数据值【 &lt;input type=&quot;text&quot; name=&quot;userName&quot;&gt;】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        String value = request.getParameter(args[0].toString());    // 调用目标对象的getPrameter()方法得到未处理的结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // 获取提交方式 GET   POST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        String methodSubmit = request.getMethod(); // 直接调用目标对象的方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // 判断如果是GET提交，需要对数据进行处理  (POST提交已经处理过了)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (&quot;GET&quot;.equals(methodSubmit)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (value != null &amp;&amp; !&quot;&quot;.equals(value.trim())){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                // 如果不空，处理GET中文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                value = new String(value.getBytes(&quot;ISO8859-1&quot;),&quot;UTF-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        /*这里还可以插入特殊词过滤的代码*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        return value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            // 执行request对象的其他方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        returnValue = method.invoke(request, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return returnValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 二、放行 (执行下一个过滤器或者servlet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chain.doFilter(proxy, response);        // 传入request的代理对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(FilterConfig filterConfig) throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroy() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>过滤器配置:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">过滤器配置：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 编码处理过滤器配置 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">encoding</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">cn.itcast.a_loginFilter.EncodingFilter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">encoding</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">/*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">url-pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter-mapping</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="案例登录过滤">案例:登录过滤<a href="#案例登录过滤" class="hash-link" aria-label="Direct link to 案例:登录过滤" title="Direct link to 案例:登录过滤">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//  过滤器，根据访问页面做出不同处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginFilter implements Filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroy() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // TODO Auto-generated method stub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(FilterConfig arg0) throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // TODO Auto-generated method stub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest arg0, ServletResponse arg1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterChain arg2) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         String uri = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletRequest request = (HttpServletRequest)arg0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletResponse response = (HttpServletResponse)arg1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String requestUri = request.getRequestURI();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String requestPath = requestUri.substring(requestUri.lastIndexOf(&quot;/&quot;) + 1, requestUri.length());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(&quot;login&quot;.equals(requestPath) || &quot;login.jsp&quot;.equals(requestPath)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //如果访问的是login.jsp, 放行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                arg2.doFilter(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //如果不是</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpSession session = request.getSession(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(session != null) {//判断是否登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Admin admin = (Admin)session.getAttribute(&quot;loginInfo&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if(admin != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        arg2.doFilter(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        uri = &quot;/login.jsp&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    uri = &quot;/login.jsp&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            request.getRequestDispatcher(uri).forward(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="案例自动登录">案例:自动登录<a href="#案例自动登录" class="hash-link" aria-label="Direct link to 案例:自动登录" title="Direct link to 案例:自动登录">​</a></h2><p>分析: </p><ul><li>需要使用的cookie的技术，保存用户名和密码<ul><li>用户如果选择了自动登录的功能，才会保存cookie     </li></ul></li><li>需要使用Filter的技术，完成自动登陆的功能</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">loginServlet代码：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 登录功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 接收用户名和密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * 通过用户名和密码去数据库中查询</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *  * 如果查询到了用户，说明没有问题，登录成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *  * 如果查询不到用户，说明登录失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 接收用户名和密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String username = request.getParameter(&quot;username&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String password = request.getParameter(&quot;password&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 调用持久层查询数据库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserDao dao = new UserDao();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 登录功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            User existUser = dao.login(username, password);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 如果，返回existUser为null，说明登录失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(existUser == null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                request.setAttribute(&quot;msg&quot;, &quot;用户名或者密码错误&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                request.getRequestDispatcher(&quot;/pages/login.jsp&quot;).forward(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }else{// 登录, session中保存user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 先判断，用户是否已经勾选自动登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String autologin = request.getParameter(&quot;autologin&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if(&quot;auto_ok&quot;.equals(autologin)){// 如果勾选</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 把用户名和密码，保存到cookie中，回写cookie, 保存到客户端</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    String value = username+&quot;#xxx#&quot;+password;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Cookie cookie = new Cookie(&quot;autologin&quot;,value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 设置cookie的一些属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 设置cookie的有效时间，单位是秒, 1h之内能够自动登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    cookie.setMaxAge(60*60);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 设置cookie的有效路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    cookie.setPath(&quot;/&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 回写cookie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.addCookie(cookie);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 保存user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                request.getSession().setAttribute(&quot;existUser&quot;, existUser);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.sendRedirect(request.getContextPath()+&quot;/pages/home.jsp&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (SQLException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        doGet(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filter代码：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 自动登录的过滤器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AutologinFilter implements Filter{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest request, ServletResponse response,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            FilterChain chain) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 从session中获取到用户</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletRequest req = (HttpServletRequest) request;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = req.getSession();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取用户</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User user = (User) session.getAttribute(&quot;existUser&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 如果user不为null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(user != null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 放行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            chain.doFilter(req, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 说明，用户为null了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 获取指定名称的cookie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Cookie[] cookies = req.getCookies();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 通过指定名称查找cookie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Cookie cookie = MyCookieUtil.findCookieByName(cookies, &quot;autologin&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 判断</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(cookie == null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 说明，没找到，登录时没有勾选自动登录功能,放行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                chain.doFilter(req, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 说明已经找到了该cookie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 获取到cookie中的value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String value = cookie.getValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String username = value.split(&quot;#xxx#&quot;)[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String password = value.split(&quot;#xxx#&quot;)[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 通过用户名和密码去数据库查询</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UserDao dao = new UserDao();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 查询用户</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    User existUser = dao.login(username, password);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 判断，如果用户为null，说明登录失败了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if(existUser == null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // 放行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        chain.doFilter(req, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // 不为null，登录成功,帮用户做自动登录功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        session.setAttribute(&quot;existUser&quot;, existUser);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // 放行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        chain.doFilter(req, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } catch (SQLException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroy() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(FilterConfig arg0) throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot-中使用filter">spring boot 中使用filter<a href="#spring-boot-中使用filter" class="hash-link" aria-label="Direct link to spring boot 中使用filter" title="Direct link to spring boot 中使用filter">​</a></h2><p>spring 中开发 filter 继承 抽象类 GenericFilterBean , 该类提供了 spring 中的许多信息, 实现了如下 5 个接口:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">javax.servlet.Filter、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.beans.factory.BeanNameAware、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.context.EnvironmentAware、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.web.context.ServletContextAware、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.beans.factory.InitializingBean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.beans.factory.DisposableBean</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果下往所有的请求只拦截一次, 推荐 OncePerRequestFilter, 并不是所有的container都像我们期望的对于加入了filter的请求只过滤一次，servlet版本不同，表现也不同, 比如 服务器内部使用forward转发的请求, servlet-2.3 都会拦截, 但是 servlet-2.4中Filter默认下只拦截外部提交的请求，forward和include这些内部转发都不会</p><p>========================原始的 filter 开发如下:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//启动类需要配置 servlet 扫描 @ServletComponentScan(basePackages={&quot;&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@WebFilter(urlPatterns=&quot;/*&quot;,filterName=&quot;helloFilter&quot;,initParams= {@WebInitParam(name=&quot;paramName&quot;,value=&quot;paramValue&quot;),@WebInitParam(name=&quot;paramName2&quot;,value=&quot;paramValue2&quot;)})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@order(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UrlFilter implements Filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init(FilterConfig filterConfig) throws ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;-----------------------&gt;过滤器被创建&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletRequest req = (HttpServletRequest) servletRequest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String requestURI = req.getRequestURI();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;---------------------&gt;过滤器：请求地址&quot;+requestURI);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(!requestURI.contains(&quot;info&quot;)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            servletRequest.getRequestDispatcher(&quot;/failed&quot;).forward(servletRequest, servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            filterChain.doFilter(servletRequest, servletResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroy() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;-----------------------&gt;过滤器被销毁&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果不使用注解, 可以在配置类中指定 interceptor</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration   //相当于spring中的&lt;beans&gt;标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean   //相当于spring中&lt;bean&gt;标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FilterRegistrationBean&lt;MyFilter&gt; testFilterRegistration() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterRegistrationBean&lt;MyFilter&gt; registration = new FilterRegistrationBean&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registration.setFilter(new MyFilter());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registration.addUrlPatterns(&quot;/*&quot;);//配置过滤路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registration.addInitParameter(&quot;paramName&quot;, &quot;paramValue&quot;);//添加初始值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registration.setName(&quot;myFilter&quot;);//设置filter名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registration.setOrder(1);//请求中过滤器执行的先后顺序，值越小越先执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return registration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>监听器listener</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="概念">概念<a href="#概念" class="hash-link" aria-label="Direct link to 概念" title="Direct link to 概念">​</a></h2><p>监听器：主要是用来监听特定对象的创建或销毁、属性的变化的. 是一个实现特定接口的普通java类</p><p>主要是一些容器创建的对象需要监听, 如request / session / servletContext, 分别对应的是request监听器、session相关监听器、servletContext监听器</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="有哪些监听器">有哪些监听器<a href="#有哪些监听器" class="hash-link" aria-label="Direct link to 有哪些监听器" title="Direct link to 有哪些监听器">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">三类:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. ServletContext 监听 (创建, 销毁, 属性变化)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interface ServletContextListener     监听servletContext对象的创建或销毁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interface ServletContextAttributeListener  监听servletContext对象属性变化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. HttpSession 监听 (创建, 销毁, 属性变化)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interface HttpSessionListener        监听session对象的创建或销毁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interface HttpSessionAttributeListener    监听session对象属性变化: 添加、移除、修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. ServletRequest 监听 (创建, 销毁, 属性变化)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interface ServletRequestListener     监听request对象的创建或销毁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interface ServletRequestAttributeListener 监听request对象属性变化: 添加、移除、修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session对象绑定相关监听器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Interface HttpSessionBindingListener   监听对象绑定到session上的事件    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                HttpSessionListener只需要设置到web.xml中就可以监听整个应用中的所有session。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 HttpSessionBindingListener必须实例化后通过session.setAttribute放入某一个session中，才可以进行监听。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="生命周期监听器">生命周期监听器<a href="#生命周期监听器" class="hash-link" aria-label="Direct link to 生命周期监听器" title="Direct link to 生命周期监听器">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  监听request对象的创建或销毁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyRequestListener implements ServletRequestListener{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 对象销毁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void requestDestroyed(ServletRequestEvent sre) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 获取request中存放的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Object obj = sre.getServletRequest().getAttribute(&quot;cn&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(obj);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;MyRequestListener.requestDestroyed()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 对象创建</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void requestInitialized(ServletRequestEvent sre) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;MyRequestListener.requestInitialized()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Web.xml , &lt;web-app&gt;下 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 监听request对象创建、销毁 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">listener</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">listener-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">cn.itcast.a_life.MyRequestListener</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">listener-class</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">listener</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Jsp文件： --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;%request.setAttribute(&quot;cn&quot;,&quot;China&quot;);%&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="属性监听器">属性监听器<a href="#属性监听器" class="hash-link" aria-label="Direct link to 属性监听器" title="Direct link to 属性监听器">​</a></h2><p>监听session域属性变化</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 监听session对象属性的变化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MySessionAttrListener implements HttpSessionAttributeListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 属性添加</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void attributeAdded(HttpSessionBindingEvent se) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 先获取session对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = se.getSession();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取添加的属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object obj = session.getAttribute(&quot;userName&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;添加的属性：&quot; + obj);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 属性移除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void attributeRemoved(HttpSessionBindingEvent se) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;属性移除&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 属性被替换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void attributeReplaced(HttpSessionBindingEvent se) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取sesison对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpSession session = se.getSession();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取替换前的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object old = se.getValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;原来的值：&quot; + old);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取新值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object obj_new = session.getAttribute(&quot;userName&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;新值：&quot; + obj_new);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="session绑定监听器">session绑定监听器<a href="#session绑定监听器" class="hash-link" aria-label="Direct link to session绑定监听器" title="Direct link to session绑定监听器">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/* HttpSessionBindingListener   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">监听对象绑定/解除绑定到sesison上的事件!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">步骤：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    对象实现接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    session.setAttribute(&quot;onlineUserBindingListener&quot;, new OnlineUserBindingListener(username));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    不用web.xml配置(原因:因为监听的对象是自己创建的对象，不是服务器对象！不用配置web.xml)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">典型应用：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (登陆后,显示上线提醒！) */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 监听此对象绑定到session上的过程，需要实现session特定接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Admin implements HttpSessionBindingListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     省略getter/setter…………</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 对象放入session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void valueBound(HttpSessionBindingEvent event) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;Admin对象已经放入session&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                这里可以显示上线提醒</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 对象从session中移除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void valueUnbound(HttpSessionBindingEvent event) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;Admin对象从session中移除！&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>实现用户上线提醒, 分析:
需求：做一个在线列表提醒的功能!
显示登陆信息，列表展示。(list.jsp)
显示在线用户列表        (list.jsp)
列表点击进入“在线列表页面”   onlineuser.jsp</p><p>实现：</p><ol><li>先增加退出功能；  再把session活跃时间1min;</li><li>写监听器，监听servletContext对象的创建： 初始化集合(onlineuserlist)</li><li>登陆功能： 用户登陆时候，把数据保存到servletContext中的onlineList集合</li><li>List.jsp  增加超链接， 点击时候提交直接跳转到online.jsp</li><li>写监听器： 监听session销毁，把当前登陆用户从onlineuserlist移除！</li></ol><h1>i18n</h1><h1>文件上传下载</h1><p>怎么获取表单中的数据? 有2中情况:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="form中只有纯文本数据">form中只有纯文本数据<a href="#form中只有纯文本数据" class="hash-link" aria-label="Direct link to form中只有纯文本数据" title="Direct link to form中只有纯文本数据">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">String username = request.getParameter(&quot;username&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String sex = request.getParameter(&quot;sex&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String education = request.getParameter(&quot;education&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String[] hobby = request.getParameterValues(&quot;hobby&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>数据编码： 对于纯文本的表单，其字段enctype=application/x-www-form-urlencoded 是默认值，表示表单的数据进行url编码，如：表单的数据被编码成username=123&amp;password=222 。</p><p>传输方式： 数据传输方式method ： 如果使用get ，那么该字符串会追加到请求的url地址后面；而如果使用post ，那么打开调试台，查看Form Data 项也可以查看到字符串。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="form中含有文本和二进制文件">form中含有文本和二进制文件<a href="#form中含有文本和二进制文件" class="hash-link" aria-label="Direct link to form中含有文本和二进制文件" title="Direct link to form中含有文本和二进制文件">​</a></h2><p>具体参考 <a href="https://docs.oracle.com/javaee/7/tutorial/servlets011.htm#BABFGCHB" target="_blank" rel="noopener noreferrer">这里</a>)</p><p>比如:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/webapp/formServlet</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">post</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">enctype</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">multipart/form-data</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">file</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">file</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">提交</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>servlet 3.0 将二进制文件封装为 Part 对象</p><p>传输方式： 因为是二进制流， 所以method 只能使用post 进行提交，无法使用get 。</p><h1>javamail邮件开发</h1><h1>servlet3.0</h1><p><a href="https://stackoverflow.com/questions/1638865/what-are-the-differences-between-servlet-2-5-and-3" target="_blank" rel="noopener noreferrer">main conception (sos)</a></p><p><a href="https://developer.ibm.com/zh/articles/j-lo-servlet30/" target="_blank" rel="noopener noreferrer">https://developer.ibm.com/zh/articles/j-lo-servlet30/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="异步支持">异步支持<a href="#异步支持" class="hash-link" aria-label="Direct link to 异步支持" title="Direct link to 异步支持">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="实现请求线程池隔离">实现请求线程池隔离<a href="#实现请求线程池隔离" class="hash-link" aria-label="Direct link to 实现请求线程池隔离" title="Direct link to 实现请求线程池隔离">​</a></h3><p><a href="https://blog.csdn.net/sumlyl/article/details/108749779" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sumlyl/article/details/108749779</a>
<a href="https://blog.csdn.net/liyantianmin/article/details/103760241" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/liyantianmin/article/details/103760241</a>
<a href="https://www.jianshu.com/p/0529c126e166?utm_campaign" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/0529c126e166?utm_campaign</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="插件式开发">插件式开发<a href="#插件式开发" class="hash-link" aria-label="Direct link to 插件式开发" title="Direct link to 插件式开发">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="注解开发">注解开发<a href="#注解开发" class="hash-link" aria-label="Direct link to 注解开发" title="Direct link to 注解开发">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//     web.xml 可选, 新增注解</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@WebServlet(name=&quot;myServlet&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    urlPatterns={&quot;/path/to/my/servlet&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initParams={@InitParam(name=&quot;configFile&quot;, value=&quot;config.xml&quot;)})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAwesomeServlet extends HttpServlet { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ServletFilter(name=&quot;myFilter&quot;, urlPatterns={&quot;/path/to/my/filter&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAwesomeFilter implements Filter { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@WebServletContextListener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAwesomeListener implements ServletContextListener { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    Modularization of web.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// n servlets 3, each &quot;loadable&quot; jar can have a web-fragment.xml in its META-INF directory specifying servlets, filters, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//       动态增加 servlets, filters and listeners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// following methods added to SevletContext: addServlet(), addFilter() and addListener()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">///////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">///////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//     异步的 servlet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// servlet 2.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAwesomeServlet extends HttpSerlvet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        runSlowProcess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // no async support, thread will be free when runSlowProcess() and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // doGet finish</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// servlet 3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@WebServlet(name=&quot;myServlet&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             urlPatterns={&quot;/mySlowProcess&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             asyncSupported=true) // asyncSupported MUST be specified for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  // servlets that support asynchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  // processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAwesomeServlet extends HttpSerlvet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest request, HttpServletResponse response) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // an AsyncContext is created, now the response will be completed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // not when doGet finalizes its execution, but when</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // myAsyncContext.complete() is called.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AsyncContext myAsyncContext = request.startAsync(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // myAsyncContext is passed to another thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delegateExecutionToProcessingThread(myAsyncContext);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // done, now this thread is free to serve another request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... and somewhere in another part of the code:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyProcessingObject {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doSlowProcess() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        runSlowProcess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        myAsyncContext.complete(); // request is now completed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 另外的一个示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@WebServlet(urlPatterns = &quot;/demo&quot;, asyncSupported = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncDemoServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doGet(HttpServletRequest req, HttpServletResponse resp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resp.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PrintWriter out = resp.getWriter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        out.println(&quot;进入Servlet的时间：&quot; + new Date() + &quot;.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        out.flush();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //在子线程中执行业务调用，并由其负责输出响应，主线程退出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AsyncContext ctx = req.startAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new Thread(new Executor(ctx)).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        out.println(&quot;结束Servlet的时间：&quot; + new Date() + &quot;.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        out.flush();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Executor implements Runnable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AsyncContext ctx = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Executor(AsyncContext ctx){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.ctx = ctx;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //等待十秒钟，以模拟业务方法的执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(10000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PrintWriter out = ctx.getResponse().getWriter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            out.println(&quot;业务处理完毕的时间：&quot; + new Date() + &quot;.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            out.flush();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.complete();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    可编程的 登陆 登出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// In servlets 3, the interface HttpServletRequest has been added two new methods: login(username, password) and logout().  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">///////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>xxxWapper</h1><p>HttpServletRequestWrapper ...</p><p>尽管不能改变ServletRequest不变对象本身，但却可以通过使用装饰模式(创建xxxWapper)来改变其状态. 一般和 filter 联合使用</p><p><a href="http://uule.iteye.com/blog/1947192" target="_blank" rel="noopener noreferrer">http://uule.iteye.com/blog/1947192</a></p><h1>servlet和线程安全问题</h1><p><a href="https://www.cnblogs.com/chanshuyi/p/5052426.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/chanshuyi/p/5052426.html</a>
<a href="http://tutorials.jenkov.com/java-servlets/servlet-concurrency.html" target="_blank" rel="noopener noreferrer">http://tutorials.jenkov.com/java-servlets/servlet-concurrency.html</a></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">同时有多个 http request 同一个 servlet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> 这个 servlet定义了 成员变量</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">静态变量</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    存在线程安全问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="#Servlet%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91%E8%AE%BF%E9%97%AE">并发访问 servlet</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/docs/tags/servlet">servlet</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/servlet.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/service-mesh"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">service mesh 服务网格</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/shell-bash-note"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">shell-bash脚本收集</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#手动开发servlet" class="table-of-contents__link toc-highlight">手动开发Servlet</a></li><li><a href="#借助工具开发servlet" class="table-of-contents__link toc-highlight">借助工具开发Servlet</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li><li><a href="#tomcat构造servlet过程" class="table-of-contents__link toc-highlight">Tomcat构造Servlet过程</a></li><li><a href="#servlet映射路径" class="table-of-contents__link toc-highlight">Servlet映射路径</a></li><li><a href="#servlet缺省路径" class="table-of-contents__link toc-highlight">Servlet缺省路径</a></li><li><a href="#servlet生命周期" class="table-of-contents__link toc-highlight">Servlet生命周期</a></li><li><a href="#servlet提前加载load-on-startup" class="table-of-contents__link toc-highlight">Servlet提前加载(load-on-startup)</a></li><li><a href="#initinitxxx区别" class="table-of-contents__link toc-highlight">init(),init(xxx)区别</a></li><li><a href="#servlet多线程并发访问" class="table-of-contents__link toc-highlight">Servlet多线程并发访问</a></li><li><a href="#servletconfig对象" class="table-of-contents__link toc-highlight">ServletConfig对象</a></li><li><a href="#servletcontext对象" class="table-of-contents__link toc-highlight">ServletContext对象</a></li><li><a href="#demo" class="table-of-contents__link toc-highlight">demo</a></li><li><a href="#域对象共享数据" class="table-of-contents__link toc-highlight">域对象共享数据</a></li><li><a href="#调用方式" class="table-of-contents__link toc-highlight">调用方式</a></li><li><a href="#本质区别" class="table-of-contents__link toc-highlight">本质区别</a></li><li><a href="#代码例子" class="table-of-contents__link toc-highlight">代码例子</a></li><li><a href="#传统配置方法开发-filter" class="table-of-contents__link toc-highlight">传统配置方法开发 filter</a></li><li><a href="#案例统一处理编码" class="table-of-contents__link toc-highlight">案例:统一处理编码</a></li><li><a href="#案例登录过滤" class="table-of-contents__link toc-highlight">案例:登录过滤</a></li><li><a href="#案例自动登录" class="table-of-contents__link toc-highlight">案例:自动登录</a></li><li><a href="#spring-boot-中使用filter" class="table-of-contents__link toc-highlight">spring boot 中使用filter</a></li><li><a href="#概念" class="table-of-contents__link toc-highlight">概念</a></li><li><a href="#有哪些监听器" class="table-of-contents__link toc-highlight">有哪些监听器</a></li><li><a href="#生命周期监听器" class="table-of-contents__link toc-highlight">生命周期监听器</a></li><li><a href="#属性监听器" class="table-of-contents__link toc-highlight">属性监听器</a></li><li><a href="#session绑定监听器" class="table-of-contents__link toc-highlight">session绑定监听器</a></li><li><a href="#form中只有纯文本数据" class="table-of-contents__link toc-highlight">form中只有纯文本数据</a></li><li><a href="#form中含有文本和二进制文件" class="table-of-contents__link toc-highlight">form中含有文本和二进制文件</a></li><li><a href="#异步支持" class="table-of-contents__link toc-highlight">异步支持</a><ul><li><a href="#实现请求线程池隔离" class="table-of-contents__link toc-highlight">实现请求线程池隔离</a></li></ul></li><li><a href="#插件式开发" class="table-of-contents__link toc-highlight">插件式开发</a></li><li><a href="#注解开发" class="table-of-contents__link toc-highlight">注解开发</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.b94328d8.js"></script>
<script src="/en/assets/js/main.fc98d8e0.js"></script>
</body>
</html>