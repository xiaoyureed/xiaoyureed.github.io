<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-elk-elastic-log">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›† - Xiaoyureed çš„ç½‘ç»œ Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/en/img/logo.webp"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/en/img/logo.webp"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/en/docs/elk-elastic-log"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="xiaoyureed"><meta data-rh="true" name="keywords" content="blog, java, spring, microservice, python, rust, typescript, react, web"><meta data-rh="true" name="keywords" content=" åŠè·¯è½¬è¡Œçš„ç¼–ç¨‹çˆ±å¥½è€…, å†™è¿‡ Python, Rust, ç°åœ¨ä¸»æ”» Java åˆ†å¸ƒå¼ç³»ç»Ÿ"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›† - Xiaoyureed çš„ç½‘ç»œ Wiki"><meta data-rh="true" name="description" content="https://github.com/spujadas/elk-docker ekl é•œåƒ"><meta data-rh="true" property="og:description" content="https://github.com/spujadas/elk-docker ekl é•œåƒ"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/en/docs/elk-elastic-log"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/elk-elastic-log" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/elk-elastic-log" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/elk-elastic-log" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5SAMPKXTP9-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Xiaoyureed çš„ç½‘ç»œ Wiki" href="/en/opensearch.xml">


<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?c9a3849aa75f9c4a4e65f846cd1a5155",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.defer=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script>
<link rel="alternate" type="application/rss+xml" href="/en/rss.xml" title="xiaoyureed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/atom.xml" title="xiaoyureed Atom Feed">
<link rel="alternate" type="application/json" href="/en/feed.json" title="xiaoyureed JSON Feed">

<link rel="icon" href="/en/img/logo.webp">
<link rel="manifest" href="/en/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)">
<meta name="description" content="Xiaoyureed çš„ä¸ªäººåšå®¢"><link rel="stylesheet" href="/en/assets/css/styles.d08d09a2.css">
<link rel="preload" href="/en/assets/js/runtime~main.3acb1efd.js" as="script">
<link rel="preload" href="/en/assets/js/main.10cd6cce.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><a href="/docs/rust-note" target="_blank">æœ€è¿‘æ­£åœ¨æŠ˜è…¾çš„ Rust, æ¬¢è¿æŸ¥çœ‹...</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">kuizuo</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">èœå•</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/archive">åšå®¢</a></li><li><a class="dropdown__link" href="/en/docs/intro">æ•™ç¨‹</a></li><li><a class="dropdown__link" href="/en/resource">Links</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/en/"><img src="/en/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.webp" alt="xiaoyureed" class="themedImage_ToTc themedImage--dark_i4oU"><b>kuizuo</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/FreeMarker-note">FreeMarker Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/SpringBoot-note">Spring Boot å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/agile-development-user-story-scrum">æ•æ·å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/android">Android å¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/autohotkey">Autohotkey è„šæœ¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/blockchain">blockchainåŒºå—é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/c-sharp-and-dot-net">C# &amp; .NET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cloud-native-platform">äº‘æœåŠ¡å¹³å°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cpp">CPP and C å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/css-pre-processor">å‡ ç§CSSé¢„å¤„ç†å™¨æ¯”è¾ƒé€‰å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/design-pattern-note">Design Pattern ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/dev-resources">å¼€å‘è€…èµ„æº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/devops">DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/distributed-system">Distributed System åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/effective-java-reading-note">Effective Java é˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/en/docs/elk-elastic-log">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/english-note">è‹±è¯­å­¦ä¹ ğŸ”¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/extjs-note">Extjs ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/flutter">flutter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/games-development-introduce">æ¸¸æˆå¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/git-note">Git å¤‡å¿˜ ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/github-starts">Github æ˜Ÿæ ‡â­ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/golang-note">Golang ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gps-gis-tracing">åŸºäºåœ°ç†ä½ç½®å¼€å‘æŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gradle">gradle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/greasy-monkey">æ²¹çŒ´æ’ä»¶&amp;ç¼–å†™è„šæœ¬ğŸ’</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/groovy-note">groovy note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/health">Health å…³çˆ±ç¨‹åºå‘˜å¥åº·ğŸ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/html-note">HTML å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/idea-note">InteliJ idea tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/interview-system-design">ç»å…¸çš„ç³»ç»Ÿè®¾è®¡æ€è·¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/iot">Iot ç‰©è”ç½‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-concurrent">Java ConcurrentğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-memory-model-jmm-jvm">JMM and GCğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-note">Java Core ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/jquery-note">JQuery notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/js-tutorial">JavaScript tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kotlin">kotlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kubernetes-k8s">kubernetes-k8s â˜ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/linux-note">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mac">Mac å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/machine-learning-ml">machine-learning-ml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/maven-note">Maven NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/message-queue">Message QueueğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/money">Investment Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mongodb-note">MongoDB NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/monitor-system-grafana-prometheus-influxdb-hbase">monitor-system-grafana-prometheusç›‘æ§ğŸ–¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mvc-mvvm">MVC to MVVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/netty-note">netty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nlp-natural-language-processing">nlp-natural-language-processingğŸ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nodejs-yarn-npm">Nodejs, Yarn, Npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/oracle">Oracle å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-big-data-introduce">å¤§æ•°æ®å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-cache">Cache ç¼“å­˜ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-computational-ad">è®¡ç®—å¹¿å‘Š Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-crawler-spider">ç½‘ç»œçˆ¬è™« Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-db-design-note">å…³ç³»å‹æ•°æ®åº“è¡¨è®¾è®¡ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-desktop-develop">æ¡Œé¢åº”ç”¨å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-http">HTTP protocol Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-reactive-programming">å“åº”å¼ç¼–ç¨‹ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rest-api">RESTful api åŠ å…¶ä»–webServiceæŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rule-engine-note">è§„åˆ™å¼•æ“ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/php-note">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/play-framework">Playæ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/postgres-note">Postgres noteğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/process-workflow-bpm-engine">å·¥ä½œæµå¼•æ“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/protect-your-app-authentication-oauth2-jwt-https">Protect Your App å®‰å…¨ä¿æŠ¤è®¤è¯é‰´æƒğŸ”‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/python-note">PythonğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quant-money">é‡åŒ–äº¤æ˜“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quarkus">Quarkus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/react-note">ReactğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/real-time-communication-protocol">å®æ—¶é€šä¿¡ Real-time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/redis-note">RedisğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/regex">Regular Expression æ­£åˆ™ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/rust-note">Rust ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/saas-paas-iaas-as-a-service">SaaS Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/serverless">Serverless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/service-mesh">service mesh æœåŠ¡ç½‘æ ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/servlet">Servlet Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/shell-bash-note">shell-bashè„šæœ¬æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springcloud-note">Spring Cloud ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springmvc-note">Spring MVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/task-schedule-note">Task Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tcp-ip-note">TCP IP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tomcat-jetty-nginx">Tomcat Jetty Nginx ç­‰ web å®¹å™¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/vertx">Vertx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/video-creator">æ‹æ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webassembly">webassembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webpack-esbuild-vite-rollup">å‰ç«¯æ‰“åŒ…æ„å»ºå·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/windows-sub-system-on-linux">WSL ä½¿ç”¨</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</h1></header><p><a href="https://github.com/spujadas/elk-docker" target="_blank" rel="noopener noreferrer">https://github.com/spujadas/elk-docker</a> ekl é•œåƒ</p><p>loki + promtail è½»é‡çš„å¤šï¼Œæ›´é€‚åˆæ—¥å¿—æŸ¥è¯¢</p><p>æ—¥å¿—å¯è§†åŒ–</p><p>logstash+kibana+elasticsearch+redis å¼€å‘å¼ºå¤§çš„æ—¥å¿—åˆ†æå¹³å°</p><p>log.io: nodejs å¼€å‘çš„å®æ—¶æ—¥å¿—æ”¶é›†ç³»ç»Ÿ</p><p>Graylog: æ˜“ç”¨ã€åŠŸèƒ½ä¸°å¯Œçš„æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼Œ éƒ¨ç½²ã€ç»´æŠ¤ã€æœç´¢æ¯” ELK ç®€å•</p><p><a href="https://elasticsearch.cn/" target="_blank" rel="noopener noreferrer">https://elasticsearch.cn/</a> es ä¸­æ–‡ç½‘</p><p><a href="https://kalasearch.cn/blog/chapter3-elastic-search-and-lucene/" target="_blank" rel="noopener noreferrer">https://kalasearch.cn/blog/chapter3-elastic-search-and-lucene/</a> å¡æ‹‰æœç´¢ä¸Šçš„ä¸€ç¯‡æ•™ç¨‹</p><ul><li><a href="#elasticsearch">ElasticSearch</a><ul><li><a href="#%E6%A6%82%E5%BF%B5">æ¦‚å¿µ</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">ä½¿ç”¨åœºæ™¯</a></li><li><a href="#%E5%90%AF%E5%8A%A8">å¯åŠ¨</a></li><li><a href="#%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D%E6%8F%92%E4%BB%B6">ä¸­æ–‡åˆ†è¯æ’ä»¶</a></li><li><a href="#%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a><ul><li><a href="#meta-info-api">meta info api</a></li><li><a href="#index-api">index api</a></li><li><a href="#document-api">document api</a></li><li><a href="#mapping-api">mapping api</a></li><li><a href="#search-api">search api</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ•°æ®ç±»å‹</a></li></ul></li><li><a href="#java-client">Java client</a></li></ul></li><li><a href="#logstash">logstash</a></li><li><a href="#filebeat">filebeat</a></li><li><a href="#kibana">kibana</a></li><li><a href="#%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9A%84%E6%96%B9%E6%A1%88">è½»é‡çº§çš„æ–¹æ¡ˆ</a></li><li><a href="#%E5%88%A9%E7%94%A8-websocket-%E5%AE%9E%E7%8E%B0%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E6%97%A5%E5%BF%97%E5%8F%AF%E8%A7%86%E5%8C%96">åˆ©ç”¨ websocket å®ç°æœ€ç®€å•çš„æ—¥å¿—å¯è§†åŒ–</a></li><li><a href="#%E5%88%A9%E7%94%A8-spring-boot-admin-%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E5%8F%AF%E8%A7%86%E5%8C%96">åˆ©ç”¨ spring boot admin å®ç°æ—¥å¿—å¯è§†åŒ–</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="elasticsearch">ElasticSearch<a href="#elasticsearch" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/index.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/elasticsearch/reference/index.html</a></p><p><a href="https://github.com/medcl" target="_blank" rel="noopener noreferrer">https://github.com/medcl</a> ä¸­æ–‡å¤§ç‰›
<a href="https://elasticsearch.cn/" target="_blank" rel="noopener noreferrer">https://elasticsearch.cn/</a> ä¸­æ–‡ç¤¾åŒº</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ¦‚å¿µ">æ¦‚å¿µ<a href="#æ¦‚å¿µ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p><a href="https://zhuanlan.zhihu.com/p/37964096" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/37964096</a> ç»¼åˆå¯¹æ¯”</p><p>Elastic æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå…è®¸å¤šå°æœåŠ¡å™¨ååŒå·¥ä½œï¼Œæ¯å°æœåŠ¡å™¨å¯ä»¥è¿è¡Œå¤šä¸ª Elastic å®ä¾‹</p><p>ES éœ€è¦åœ¨åˆ›å»ºå­—æ®µå‰è¦é¢„å…ˆå»ºç«‹ Mappingï¼ŒMapping ä¸­åŒ…å«æ¯ä¸ªå­—æ®µçš„ç±»å‹ä¿¡æ¯ï¼ŒES éœ€è¦æ ¹æ® Mapping ä¸ºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ã€‚ç”±äºè¿™ä¸ª Mapping çš„å­˜åœ¨ï¼ŒES ä¸­çš„å­—æ®µä¸€ä½†å»ºç«‹å°±ä¸èƒ½å†ä¿®æ”¹ç±»å‹äº†</p><ul><li><p>index, ç±»ä¼¼ MySQL çš„ db</p></li><li><p>type ç±»ä¼¼ table (æœ€æ–°ç‰ˆç§»é™¤äº†)</p></li><li><p>document ç±»ä¼¼ row</p><p>åŒä¸€ä¸ª Index é‡Œé¢çš„ Documentï¼Œä¸è¦æ±‚æœ‰ç›¸åŒçš„ç»“æ„ï¼ˆschemeï¼‰ï¼Œä½†æ˜¯æœ€å¥½ä¿æŒç›¸åŒï¼Œè¿™æ ·æœ‰åˆ©äºæé«˜æœç´¢æ•ˆç‡</p></li><li><p>æ•°æ®ç±»å‹</p><p><a href="https://www.cnblogs.com/betterwgo/p/11571275.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/betterwgo/p/11571275.html</a></p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯<a href="#ä½¿ç”¨åœºæ™¯" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><ul><li>æœç´¢</li><li>åœ°ç†ç©ºé—´æ•°æ®å¤„ç†åˆ†æå¯è§†åŒ–</li><li>æ—¥å¿—å¤„ç†åˆ†æ</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¯åŠ¨">å¯åŠ¨<a href="#å¯åŠ¨" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>ref: <a href="https://www.jianshu.com/p/d8b0c736070f" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/d8b0c736070f</a></p><p><a href="https://github.com/eiblog/docker" target="_blank" rel="noopener noreferrer">https://github.com/eiblog/docker</a> æ–°å‘ç°çš„ä¸€ä¸ª dockerfile</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">mkdir -p /mydata/es/config</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mkdir -p /mydata/es/data</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">mkdir -p /mydata/es/plugins</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">echo &quot;network.host: 0.0.0.0&quot; &gt;&gt; /mydata/es/config/elasticsearch.yml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">chmod -R 777 es/</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># å•ç‚¹å¯åŠ¨</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">docker run -d --name es -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms64m -Xmx128m&quot; -v ~/repo/docker_data/es/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v ~/docker_data/es/data:/usr/share/elasticsearch/data -v ~/docker_data/es/plugins:/usr/share/elasticsearch/plugins elasticsearch:7.9.2</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¸æ˜ å°„ç›®å½•ç‰ˆæœ¬</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#docker run -d --name es -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -v es:/usr/share/elasticsearch/data  elasticsearch:7.9.2</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># kibana</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># localhost:5601</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">docker run -d --name kibana --link es:es-link -e ELASTICSEARCH_HOSTS=http://es-link:9200 -p 5601:5601 kibana:7.9.1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸­æ–‡åˆ†è¯æ’ä»¶">ä¸­æ–‡åˆ†è¯æ’ä»¶<a href="#ä¸­æ–‡åˆ†è¯æ’ä»¶" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain"># è‹¥æ²¡æœ‰æ˜ å°„ plugins ç›®å½•åˆ° container å¤–éƒ¨ï¼Œ åˆ™éœ€è¦å¦‚ä¸‹ï¼š</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¸­æ–‡ åˆ†è¯æ’ä»¶ https://github.com/medcl/elasticsearch-analysis-ik/</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">docker exec -it es bash</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.0/elasticsearch-analysis-ik-6.3.0.zip # replace 6.3.0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">docker restart es</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># è‹¥æ˜ å°„äº† plugins ç›®å½•ï¼š</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># å…ˆåˆ° release é¡µé¢ä¸‹è½½ zip æ–‡ä»¶</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ç„¶åè§£å‹åˆ° plugins ç›®å½•, æ–‡ä»¶å¤¹å‘½åä¸è¦ä¿®æ”¹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># é‡å¯ es</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># è‡ªå®šä¹‰æ‹“å±•è¯åº“</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¿®æ”¹æ’ä»¶åŒ…ä¸‹çš„ config/IKAnalyzer.cgf.xml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä½¿ç”¨ nginx æ‰˜ç®¡ ik_fenci.txt æ–‡ä»¶</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨">ä½¿ç”¨<a href="#ä½¿ç”¨" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="meta-info-api">meta info api<a href="#meta-info-api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain"># åŸºæœ¬ä¿¡æ¯ , å¯ä»¥å¸¦ ?v è¡¨ç¤ºå¸¦è¡¨å¤´</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">/_cat/nodes  # æ‰€æœ‰èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X GET &#x27;http://localhost:9200/_cat/health&#x27;   # å¥åº·ä¿¡æ¯ </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X GET &#x27;http://localhost:9200/_cat/master&#x27;   # ä¸»èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X GET &#x27;http://localhost:9200/_cat/indices&#x27;  # ç´¢å¼•ä¿¡æ¯</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="index-api">index api<a href="#index-api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ–°å»º Index, </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># åä¸º weather</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X PUT &#x27;localhost:9200/weather&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># {&quot;acknowledged&quot;:true,&quot;shards_acknowledged&quot;:true,&quot;index&quot;:&quot;weather&quot;}% # æˆåŠŸ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># åˆ é™¤ index</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X DELETE &#x27;localhost:9200/weather&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æŸ¥çœ‹å½“å‰èŠ‚ç‚¹æ‰€æœ‰ index</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># v ä¸º verbose è¯¦ç»†ä¿¡æ¯</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X GET &#x27;http://localhost:9200/_cat/indices?v&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># health status index   uuid                   pri rep docs.count docs.deleted store.size pri.store.size</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># yellow open   weather 11BWkxZDSHicWIcg8UMF1A   1   1          0            0       208b           208b</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æŸ¥çœ‹å•ä¸€ index æƒ…å†µ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X GET &#x27;http://localhost:9200/_cat/indices/weather?v&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-api">document api<a href="#document-api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain"># æ–°å»º index, document </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¹Ÿå¯æ›´æ–° (ä¸æ˜¯å¢é‡æ›´æ–°, å¿…é¡»æŒ‡å®šå…¨éƒ¨çš„æ•°æ®), å¿…é¡»æŒ‡å®š ID, è¿™ä¸ª ID (_id) å’Œ json ä¸­çš„ id ä¸åŒ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">PUT /weather/_doc/2</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;name&quot;: &quot;aa&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ–°å»º index, document, </span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¸å¯æ›´æ–°</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># å¿…é¡»æŒ‡å®š path ä¸­çš„ id</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">PUT /people/_create/1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;name&quot;: &quot;bb&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ–°å»º</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># å¸¦ path id ä¸º ä¿®æ”¹/æ–°å»º, ä¸å¸¦åˆ™ä¸€å®šæ˜¯æ–°å»º</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">POST /account/_doc  # ä¸æ”¯æŒ _create</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;name&quot;: &quot;act&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æŸ¥è¯¢</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X GET &quot;localhost:9200/customer/_doc/1?pretty&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¹è§‚é” ?if_seq_no=xxx&amp;if_primary_term=1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ›´æ–° (å¢é‡æ›´æ–°, ä¸å¿…æŒ‡å®šå…¨é‡æ•°æ®)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">POST /users/_update/1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;doc&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &quot;name&quot;: &quot;updated name&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># åˆ é™¤</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">DELETE /users/_doc/1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ‰¹é‡ bulk</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mapping-api">mapping api<a href="#mapping-api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># specific a mapping while create an index</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># å¯ä»¥ç›´æ¥æ’å…¥ doc, ä¸åˆ›å»º mapping, è¿™æ · es ä¼šé»˜è®¤æ ¹æ® doc å­—æ®µç±»å‹åˆ›å»º mapping</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># éªŒè¯åˆ†è¯, æœ€æ–°ç‰ˆä¸æ”¯æŒ type äº† (è€ƒè™‘ å»æ‰ person {...})</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">#</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># é¦–å…ˆæ–°å»ºä¸€ä¸ªåç§°ä¸ºaccountsçš„ Indexï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåç§°ä¸ºpersonçš„ Typeã€‚personæœ‰ä¸‰ä¸ªå­—æ®µ</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># analyzeræ˜¯å­—æ®µæ–‡æœ¬çš„åˆ†è¯å™¨ï¼Œsearch_analyzeræ˜¯æœç´¢è¯çš„åˆ†è¯å™¨ã€‚ik_max_wordåˆ†è¯å™¨æ˜¯æ’ä»¶ikæä¾›çš„</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X PUT &#x27;localhost:9200/accounts&#x27; -H &#x27;Content-Type:application/json&#x27; -d &#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;mappings&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &quot;person&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        &quot;user&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          // ç›¸å…³æ€§å¾—åˆ†, é»˜è®¤ 1.0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          //&quot;boost&quot;: 1.0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        &quot;title&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        &quot;desc&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æœ€æ–°ç‰ˆè¿™æ ·åˆ›å»º index å’Œåˆ†è¯çº¦æŸ: åˆ†æ­¥</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -XPUT http://localhost:9200/accounts</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -X PUT &#x27;localhost:9200/accounts/_mapping&#x27; -H &#x27;Content-Type:application/json&#x27; -d &#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        &quot;user&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;search_analyzer&quot;: &quot;ik_max_word&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        &quot;title&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;search_analyzer&quot;: &quot;ik_max_word&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        &quot;desc&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            &quot;search_analyzer&quot;: &quot;ik_max_word&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ’å…¥</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># ä¹Ÿå¯ä»¥ç”¨ put ä½†æ˜¯ url å¿…é¡»è¦æœ‰ idï¼Œ ä¸€èˆ¬ç”¨äºä¿®æ”¹</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -XPOST http://localhost:9200/accounts/_create/1 -H &#x27;Content-Type:application/json&#x27; -d &#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;user&quot;: &quot;å¼ ä¸‰&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;title&quot;: &quot;å·¥ç¨‹å¸ˆ&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;desc&quot;: &quot;æ•°æ®åº“ç®¡ç†&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -XPOST http://localhost:9200/accounts/_create/2 -H &#x27;Content-Type:application/json&#x27; -d &#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;user&quot;: &quot;æå››&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;title&quot;: &quot;è¿ç»´ç¨‹åºå‘˜&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;desc&quot;: &quot;å¼€å‘&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æŸ¥çœ‹ mapping</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">GET /users/_mapping</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="search-api">search api<a href="#search-api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>ä¸¤ç§æ–¹å¼</p><ul><li>get è¯·æ±‚ + url å‚æ•°</li><li>get è¯·æ±‚+body å‚æ•°</li></ul><p>æ–¹å¼ 1: </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># search specific index</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">GET /users/_search </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">GET /users/_search?q=* # åŒä¸Š</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">GET /users/_search?q=*&amp;sort=id:asc # æ’åº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># search for multiple index</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">GET /users,account/_search # ä¸å¸¦ç©ºæ ¼</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ–¹å¼ 2: </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># search all data</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">curl -XGET &quot;http://es-link:9200/_search&quot; -H &#x27;Content-Type: application/json&#x27; -d&#x27;{  &quot;query&quot;: {    &quot;match_all&quot;: {}  }}&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"># æ’åº</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">GET /users/_search</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &quot;match_all&quot;: {}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  }, </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;sort&quot;: [</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;id&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        &quot;order&quot;: &quot;desc&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹<a href="#æ•°æ®ç±»å‹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p><a href="https://www.cnblogs.com/betterwgo/p/11571275.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/betterwgo/p/11571275.html</a></p><ul><li>nested , é˜²æ­¢ æ•°ç»„å†…çš„å¯¹è±¡æ‰å¹³åŒ–å­˜å‚¨, æ£€ç´¢æ—¶å‡º bug</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="java-client">Java client<a href="#java-client" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p><a href="https://github.com/spring-projects/spring-data-elasticsearch" target="_blank" rel="noopener noreferrer">https://github.com/spring-projects/spring-data-elasticsearch</a> ç‰ˆæœ¬å…¼å®¹é—®é¢˜</p><p>æ‰€ä»¥æ¨è <a href="https://www.elastic.co/guide/en/elasticsearch/client/java-rest/7.9/index.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/elasticsearch/client/java-rest/7.9/index.html</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logstash">logstash<a href="#logstash" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ”¶é›†æ—¥å¿—, è·‘åœ¨ jvm ä¸­, </p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="filebeat">filebeat<a href="#filebeat" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>å› ä¸ºlogstashæ˜¯jvmè·‘çš„ï¼Œèµ„æºæ¶ˆè€—æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åæ¥ä½œè€…åˆç”¨golangå†™äº†ä¸€ä¸ª, åŠŸèƒ½è¾ƒå°‘ä½†æ˜¯èµ„æºæ¶ˆè€—ä¹Ÿå°</p><p>logstash å’Œfilebeatéƒ½å…·æœ‰æ—¥å¿—æ”¶é›†åŠŸèƒ½ï¼Œfilebeatæ›´è½»é‡ï¼Œå ç”¨èµ„æºæ›´å°‘ï¼Œä½†logstash å…·æœ‰filteråŠŸèƒ½ï¼Œèƒ½è¿‡æ»¤åˆ†ææ—¥å¿—ã€‚ä¸€èˆ¬ç»“æ„éƒ½æ˜¯filebeaté‡‡é›†æ—¥å¿—ï¼Œç„¶åå‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œredisï¼Œkafakaã€‚ç„¶ålogstashå»è·å–ï¼Œåˆ©ç”¨filteråŠŸèƒ½è¿‡æ»¤åˆ†æï¼Œç„¶åå­˜å‚¨åˆ°elasticsearchä¸­</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="kibana">kibana<a href="#kibana" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è½»é‡çº§çš„æ–¹æ¡ˆ">è½»é‡çº§çš„æ–¹æ¡ˆ<a href="#è½»é‡çº§çš„æ–¹æ¡ˆ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Promtail + Loki + Grafana
<a href="https://blog.csdn.net/weixin_39975261/article/details/109980528" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_39975261/article/details/109980528</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆ©ç”¨-websocket-å®ç°æœ€ç®€å•çš„æ—¥å¿—å¯è§†åŒ–">åˆ©ç”¨ websocket å®ç°æœ€ç®€å•çš„æ—¥å¿—å¯è§†åŒ–<a href="#åˆ©ç”¨-websocket-å®ç°æœ€ç®€å•çš„æ—¥å¿—å¯è§†åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p><a href="https://blog.csdn.net/u014174854/article/details/82143595" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/u014174854/article/details/82143595</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆ©ç”¨-spring-boot-admin-å®ç°æ—¥å¿—å¯è§†åŒ–">åˆ©ç”¨ spring boot admin å®ç°æ—¥å¿—å¯è§†åŒ–<a href="#åˆ©ç”¨-spring-boot-admin-å®ç°æ—¥å¿—å¯è§†åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p><a href="https://blog.csdn.net/u014174854/article/details/82143595" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/u014174854/article/details/82143595</a>
<a href="https://www.fangzhipeng.com/springcloud/2019/01/04/sc-f-boot-admin.html" target="_blank" rel="noopener noreferrer">https://www.fangzhipeng.com/springcloud/2019/01/04/sc-f-boot-admin.html</a></p><p>å…¶ä»–æ–¹æ³•å‚è€ƒ: <a href="https://blog.csdn.net/weixin_42033269/article/details/102954953" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_42033269/article/details/102954953</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/docs/tags/es">es</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/docs/tags/elk">elk</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/docs/tags/log">log</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/effective-java-reading-note"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Effective Java é˜…è¯»ç¬”è®°</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/english-note"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">è‹±è¯­å­¦ä¹ ğŸ”¥</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#elasticsearch" class="table-of-contents__link toc-highlight">ElasticSearch</a><ul><li><a href="#æ¦‚å¿µ" class="table-of-contents__link toc-highlight">æ¦‚å¿µ</a></li><li><a href="#ä½¿ç”¨åœºæ™¯" class="table-of-contents__link toc-highlight">ä½¿ç”¨åœºæ™¯</a></li><li><a href="#å¯åŠ¨" class="table-of-contents__link toc-highlight">å¯åŠ¨</a></li><li><a href="#ä¸­æ–‡åˆ†è¯æ’ä»¶" class="table-of-contents__link toc-highlight">ä¸­æ–‡åˆ†è¯æ’ä»¶</a></li><li><a href="#ä½¿ç”¨" class="table-of-contents__link toc-highlight">ä½¿ç”¨</a><ul><li><a href="#meta-info-api" class="table-of-contents__link toc-highlight">meta info api</a></li><li><a href="#index-api" class="table-of-contents__link toc-highlight">index api</a></li><li><a href="#document-api" class="table-of-contents__link toc-highlight">document api</a></li><li><a href="#mapping-api" class="table-of-contents__link toc-highlight">mapping api</a></li><li><a href="#search-api" class="table-of-contents__link toc-highlight">search api</a></li><li><a href="#æ•°æ®ç±»å‹" class="table-of-contents__link toc-highlight">æ•°æ®ç±»å‹</a></li></ul></li><li><a href="#java-client" class="table-of-contents__link toc-highlight">Java client</a></li></ul></li><li><a href="#logstash" class="table-of-contents__link toc-highlight">logstash</a></li><li><a href="#filebeat" class="table-of-contents__link toc-highlight">filebeat</a></li><li><a href="#kibana" class="table-of-contents__link toc-highlight">kibana</a></li><li><a href="#è½»é‡çº§çš„æ–¹æ¡ˆ" class="table-of-contents__link toc-highlight">è½»é‡çº§çš„æ–¹æ¡ˆ</a></li><li><a href="#åˆ©ç”¨-websocket-å®ç°æœ€ç®€å•çš„æ—¥å¿—å¯è§†åŒ–" class="table-of-contents__link toc-highlight">åˆ©ç”¨ websocket å®ç°æœ€ç®€å•çš„æ—¥å¿—å¯è§†åŒ–</a></li><li><a href="#åˆ©ç”¨-spring-boot-admin-å®ç°æ—¥å¿—å¯è§†åŒ–" class="table-of-contents__link toc-highlight">åˆ©ç”¨ spring boot admin å®ç°æ—¥å¿—å¯è§†åŒ–</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">å†å²</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/en/archive">Archive</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social Media</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/about">About Me</a></li><li class="footer__item"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/xiaoyuhfq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/3fPgwd3naN" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/en/friends">Friends</a></li><li class="footer__item"><a class="footer__link-item" position="right" href="/en/resource">Links</a></li><li class="footer__item"><a href="https://docusaurus.io/zh-CN/" target="_blank"><img style="height:50px;margin-top:0.5rem" src="/img/buildwith.png"><a></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p><a href="http://beian.miit.gov.cn/">é—½ICPå¤‡2020017848å·-2</a></p><p>Copyright Â© 2020 â€“ PRESENT kuizuo Built with Docusaurus.</p></div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.3acb1efd.js"></script>
<script src="/en/assets/js/main.10cd6cce.js"></script>
</body>
</html>