<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-SpringBoot-note">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Spring Boot å¤‡å¿˜ | Xiaoyureed&#x27;s ç½‘ç»œ Wiki </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xiaoyureed.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xiaoyureed.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xiaoyureed.github.io/en/docs/SpringBoot-note"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring Boot å¤‡å¿˜ | Xiaoyureed&#x27;s ç½‘ç»œ Wiki "><meta data-rh="true" name="description" content="https://github.com/YunaiV/SpringBoot-Labs"><meta data-rh="true" property="og:description" content="https://github.com/YunaiV/SpringBoot-Labs"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xiaoyureed.github.io/en/docs/SpringBoot-note"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/en/docs/SpringBoot-note" hreflang="en"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/SpringBoot-note" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xiaoyureed.github.io/docs/SpringBoot-note" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Xiaoyureed&#39;s ç½‘ç»œ Wiki  Atom Feed"><link rel="stylesheet" href="/en/assets/css/styles.8eda099e.css">
<link rel="preload" href="/en/assets/js/runtime~main.71354b01.js" as="script">
<link rel="preload" href="/en/assets/js/main.be3ba4f3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.png" alt="xiaoyureed Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Xiaoyureed</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/en/blog">Blog</a><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/FreeMarker-note">FreeMarker Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/en/docs/SpringBoot-note">Spring Boot å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/agile-development-user-story-scrum">æ•æ·å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/android">Android å¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/autohotkey">Autohotkey è„šæœ¬</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/blockchain">blockchainåŒºå—é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/c-sharp-and-dot-net">C# &amp; .NET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/chatgpt">Chatgpt Usage Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cloud-native-platform">äº‘æœåŠ¡å¹³å°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cpp">CPP and C å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cross-gfw">Cross The GFW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/cs-note">Computer Science Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/css-pre-processor">å‡ ç§CSSé¢„å¤„ç†å™¨æ¯”è¾ƒé€‰å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/data-structure-and-algorithm">Data Structure and Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/design-pattern-note">Design Pattern ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/dev-resources">å¼€å‘è€…èµ„æº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/devops">DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/distributed-system">Distributed System åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/docker-note-virtual-dev-env">Docker Note &amp; Other Virtual Develop Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/effective-java-reading-note">Effective Java é˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/elk-elastic-log">Distributed log collectionåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/english-note">è‹±è¯­å­¦ä¹ ğŸ”¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/extjs-note">Extjs ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/flutter">flutter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/games-development-introduce">æ¸¸æˆå¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/git-note">Git å¤‡å¿˜ ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/github-starts">Github æ˜Ÿæ ‡â­ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/golang-note">Golang ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gps-gis-tracing">åŸºäºåœ°ç†ä½ç½®å¼€å‘æŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/gradle">gradle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/greasy-monkey">æ²¹çŒ´æ’ä»¶&amp;ç¼–å†™è„šæœ¬ğŸ’</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/groovy-note">groovy note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/health">Health å…³çˆ±ç¨‹åºå‘˜å¥åº·ğŸ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/how-to-test-java-app">How to Test Java App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/html-note">HTML å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/idea-note">InteliJ idea tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/interview-system-design">ç»å…¸çš„ç³»ç»Ÿè®¾è®¡æ€è·¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/iot">Iot ç‰©è”ç½‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-code-clean">Java Clean Code Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-concurrent">Java ConcurrentğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-memory-model-jmm-jvm">JMM and GCğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/java-note">Java Core ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/jquery-note">JQuery notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/js-tutorial">JavaScript tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kotlin">kotlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/kubernetes-k8s">kubernetes-k8s â˜ï¸</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/linux-note">é¸Ÿå“¥çš„ Linux ç§æˆ¿èœé˜…è¯»ç¬”è®°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mac">Mac å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/machine-learning-ml">machine-learning-ml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/maven-note">Maven NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/message-queue">Message QueueğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/money">Investment Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mongodb-note">MongoDB NotesğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/monitor-system-grafana-prometheus-influxdb-hbase">monitor-system-grafana-prometheusç›‘æ§ğŸ–¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mvc-mvvm">MVC to MVVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/mybatis-note">MyBatis Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/netty-note">netty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nlp-natural-language-processing">nlp-natural-language-processingğŸ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/nodejs-yarn-npm">Nodejs, Yarn, Npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/oracle">Oracle å¤‡å¿˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-audio-video">Audio and Video development Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-big-data-introduce">å¤§æ•°æ®å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-cache">Cache ç¼“å­˜ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-computational-ad">è®¡ç®—å¹¿å‘Š Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-crawler-spider">ç½‘ç»œçˆ¬è™« Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-db-design-note">å…³ç³»å‹æ•°æ®åº“è¡¨è®¾è®¡ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-desktop-develop">æ¡Œé¢åº”ç”¨å¼€å‘ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-http">HTTP protocol Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-reactive-programming">å“åº”å¼ç¼–ç¨‹ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rest-api">RESTful api åŠ å…¶ä»–webServiceæŠ€æœ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rpc">RPC Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/outline-about-rule-engine-note">è§„åˆ™å¼•æ“ Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/php-note">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/play-framework">Playæ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/postgres-note">Postgres noteğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/process-workflow-bpm-engine">å·¥ä½œæµå¼•æ“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/protect-your-app-authentication-oauth2-jwt-https">Protect Your App å®‰å…¨ä¿æŠ¤è®¤è¯é‰´æƒğŸ”‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/python-note">PythonğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quant-money">é‡åŒ–äº¤æ˜“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/quarkus">Quarkus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/react-note">ReactğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/real-time-communication-protocol">å®æ—¶é€šä¿¡ Real-time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/redis-note">RedisğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/regex">Regular Expression æ­£åˆ™ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/rust-note">Rust ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/saas-paas-iaas-as-a-service">SaaS Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/serverless">Serverless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/service-mesh">service mesh æœåŠ¡ç½‘æ ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/servlet">Servlet Note</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/shell-bash-note">shell-bashè„šæœ¬æ”¶é›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/spring-note">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springcloud-note">Spring Cloud ç¬”è®°ğŸŒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/springmvc-note">Spring MVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/task-schedule-note">Task Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tcp-ip-note">TCP IP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/tomcat-jetty-nginx">Tomcat Jetty Nginx ç­‰ web å®¹å™¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/vertx">Vertx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/video-creator">æ‹æ‘„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webassembly">webassembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/webpack-esbuild-vite-rollup">å‰ç«¯æ‰“åŒ…æ„å»ºå·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/windows-sub-system-on-linux">WSL ä½¿ç”¨</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spring Boot å¤‡å¿˜</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring Boot å¤‡å¿˜</h1></header><div align="center"><p><a href="https://github.com/YunaiV/SpringBoot-Labs" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/SpringBoot-Labs</a></p><p>è®°å½•springbootå­¦ä¹ ä¸­çš„é—®é¢˜, æ€»ç»“;
<a href="https://github.com/h2pl" target="_blank" rel="noopener noreferrer">https://github.com/h2pl</a> web é¡¹ç›®
<a href="https://github.com/dreamhead/moco" target="_blank" rel="noopener noreferrer">https://github.com/dreamhead/moco</a> mock æ¡†æ¶</p><p><a href="https://github.com/cloudfavorites/favorites-web" target="_blank" rel="noopener noreferrer">https://github.com/cloudfavorites/favorites-web</a> å•ä½“åº”ç”¨å®ä¾‹ hibernate jpa</p><p><a href="https://github.com/xkcoding/spring-boot-demo" target="_blank" rel="noopener noreferrer">https://github.com/xkcoding/spring-boot-demo</a> springboot demos</p></div><ul><li><a href="#1-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">1. å¸¸ç”¨å‘½ä»¤</a></li><li><a href="#2-%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC">2. éƒ¨ç½²è„šæœ¬</a></li><li><a href="#3-%E5%B7%A5%E5%85%B7%E7%B1%BB">3. å·¥å…·ç±»</a><ul><li><a href="#31-bean-%E5%A4%8D%E5%88%B6-%E5%85%8B%E9%9A%86">3.1. bean å¤åˆ¶ å…‹éš†</a></li><li><a href="#32-%E5%AD%97%E7%AC%A6%E4%B8%B2">3.2. å­—ç¬¦ä¸²</a></li><li><a href="#33-%E7%BC%96%E8%A7%A3%E7%A0%81">3.3. ç¼–è§£ç </a></li><li><a href="#34-commons-lang3">3.4. commons-lang3</a></li><li><a href="#35-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">3.5. æ–‡ä»¶æ“ä½œ</a></li><li><a href="#36-commons-collections4">3.6. commons-collections4</a></li></ul></li><li><a href="#4-%E5%92%8C-react-%E4%B8%80%E8%B5%B7%E6%89%93%E5%8C%85">4. å’Œ react ä¸€èµ·æ‰“åŒ…</a></li><li><a href="#5-spring-boot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3">5. Spring Bootä¸­çš„æ³¨è§£</a><ul><li><a href="#51-configurationproperties-%E5%92%8C-value">5.1. @ConfigurationProperties å’Œ @Value</a></li><li><a href="#52-enableconfigurationproperties">5.2. @EnableConfigurationProperties</a></li><li><a href="#53-enableautoconfiguration">5.3. @EnableAutoConfiguration</a></li><li><a href="#54-componentscan">5.4. @ComponentScan</a></li><li><a href="#55-springbootapplication">5.5. @SpringBootApplication</a></li><li><a href="#56-component%E5%92%8Cbean%E5%92%8Cconfigration%E5%8C%BA%E5%88%AB">5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«</a></li><li><a href="#57-import%E5%92%8Cimportresource%E5%92%8Cpropertysource%E6%AF%94%E8%BE%83">5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ</a></li></ul></li><li><a href="#6-context-%E4%B8%8A%E4%B8%8B%E6%96%87-%E6%89%8B%E5%8A%A8%E6%B3%A8%E5%86%8Cbean">6. context ä¸Šä¸‹æ–‡ æ‰‹åŠ¨æ³¨å†Œbean</a></li><li><a href="#7-%E5%AE%9E%E7%8E%B0%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8">7. å®ç°äº‹ä»¶é©±åŠ¨</a></li><li><a href="#8-%E4%BC%98%E9%9B%85%E5%81%9C%E6%9C%BA-%E5%85%B3%E6%9C%BA">8. ä¼˜é›…åœæœº å…³æœº</a></li><li><a href="#9-%E9%9D%99%E6%80%81%E6%B3%A8%E5%85%A5">9. é™æ€æ³¨å…¥</a><ul><li><a href="#91-set%E6%B3%A8%E5%85%A5">9.1. setæ³¨å…¥</a></li><li><a href="#92-postconstruct-%E6%B3%A8%E5%85%A5">9.2. @PostConstruct æ³¨å…¥</a></li><li><a href="#93-%E9%80%9A%E8%BF%87-applicationcontext">9.3. é€šè¿‡ ApplicationContext</a></li></ul></li><li><a href="#10-%E4%BD%BF%E7%94%A8starter">10. ä½¿ç”¨starter</a><ul><li><a href="#101-%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8Bor%E5%8E%9F%E7%90%86">10.1. åŠ è½½è¿‡ç¨‹oråŸç†</a></li><li><a href="#102-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E4%BC%9A%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E6%B3%A8%E8%A7%A3">10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£</a></li><li><a href="#103-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B">10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹</a><ul><li><a href="#1031-spring-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">10.3.1. spring åŠ¨æ€ä»£ç†</a></li></ul></li><li><a href="#104-conditional">10.4. @Conditional</a></li><li><a href="#105-%E5%B0%81%E8%A3%85%E7%BB%84%E5%90%88%E6%9D%A1%E4%BB%B6">10.5. å°è£…ç»„åˆæ¡ä»¶</a></li><li><a href="#106-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84-starter">10.6. åˆ›å»ºè‡ªå·±çš„ starter</a></li><li><a href="#107-%E5%8F%8D%E7%88%AC%E8%99%AB-starter">10.7. åçˆ¬è™« starter</a></li></ul></li><li><a href="#11-%E7%9B%91%E6%8E%A7-and-%E5%AE%89%E5%85%A8">11. ç›‘æ§ and å®‰å…¨</a><ul><li><a href="#111-spring-boot-actuator-%E7%9B%91%E6%8E%A7">11.1. spring-boot-actuator ç›‘æ§</a></li><li><a href="#112-spring-boot-admin-%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2">11.2. spring boot admin ç›‘æ§ç•Œé¢</a></li><li><a href="#113-spring-boot-starter-security">11.3. spring-boot-starter-security</a><ul><li><a href="#1131-security%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D">11.3.1. securityç»„ä»¶ä»‹ç»</a></li><li><a href="#1132-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-%E5%92%8C-%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81">11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç </a></li><li><a href="#1133-%E7%A6%81%E7%94%A8%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%81">11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯</a></li><li><a href="#1134-%E9%85%8D%E7%BD%AE%E4%B8%AD-websecurity-%E5%92%8C-httpsecurity-%E5%8C%BA%E5%88%AB">11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«</a></li><li><a href="#1135-%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F">11.3.5. é…ç½®è·¨åŸŸ</a></li></ul></li><li><a href="#114-oauth2">11.4. oauth2</a></li></ul></li><li><a href="#12-%E6%97%A5%E5%BF%97">12. æ—¥å¿—</a><ul><li><a href="#121-log4j2-marker-%E5%86%99%E5%85%A5%E5%88%B0%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6">12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶</a></li><li><a href="#122-logback">12.2. logback</a></li></ul></li><li><a href="#13-%E6%95%B0%E6%8D%AE%E5%B1%82">13. æ•°æ®å±‚</a><ul><li><a href="#131-canal-%E8%AE%A2%E9%98%85">13.1. canal è®¢é˜…</a></li><li><a href="#132-mybatis-%E8%87%AA%E5%8A%A8%E5%BB%BA%E8%A1%A8%E6%8F%92%E4%BB%B6">13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶</a></li><li><a href="#133-mybatis-crud-%E5%A2%9E%E5%BC%BA%E6%8F%92%E4%BB%B6">13.3. mybatis crud å¢å¼ºæ’ä»¶</a></li><li><a href="#134-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶</a><ul><li><a href="#1341-liquibase">13.4.1. liquibase</a></li><li><a href="#1342-flyway">13.4.2. Flyway</a></li></ul></li><li><a href="#135-%E6%95%B0%E6%8D%AE%E5%BA%93-url-%E5%92%8C%E9%A9%B1%E5%8A%A8">13.5. æ•°æ®åº“ url å’Œé©±åŠ¨</a></li><li><a href="#136-graphql%E9%9B%86%E6%88%90">13.6. graphqlé›†æˆ</a></li><li><a href="#137-%E5%90%AF%E5%8A%A8%E6%89%A7%E8%A1%8C-sql">13.7. å¯åŠ¨æ‰§è¡Œ SQL</a><ul><li><a href="#1371-sql-%E5%88%86%E9%9A%94%E7%AC%A6%E7%9A%84%E5%9D%91">13.7.1. SQL åˆ†éš”ç¬¦çš„å‘</a></li><li><a href="#1372-spring-datasource-%E8%87%AA%E5%B8%A6">13.7.2. spring datasource è‡ªå¸¦</a></li><li><a href="#1373-%E4%BD%BF%E7%94%A8-jpa">13.7.3. ä½¿ç”¨ jpa</a><ul><li><a href="#13731-springboot-%E6%8E%A5%E5%85%A5-jpa">13.7.3.1. springboot æ¥å…¥ jpa</a></li><li><a href="#13732-jpa-querydsl-%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5">13.7.3.2. jpa queryDsl å¤šè¡¨è”æŸ¥</a></li><li><a href="#13733-jpa-%E6%94%AF%E6%8C%81-java8-time">13.7.3.3. jpa æ”¯æŒ java8 time</a></li></ul></li><li><a href="#1374-datasourceinitializer">13.7.4. DataSourceInitializer</a></li><li><a href="#1375-maven-antrun-pluginn">13.7.5. maven-antrun-pluginn</a></li></ul></li><li><a href="#138-%E6%95%B4%E5%90%88-spring-jdbc">13.8. æ•´åˆ spring jdbc</a></li><li><a href="#139-%E6%95%B4%E5%90%88-hibernate">13.9. æ•´åˆ hibernate</a><ul><li><a href="#1391-jpa%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93">13.9.1. jpaæ³¨è§£æ€»ç»“</a></li><li><a href="#1392-%E5%AE%A1%E8%AE%A1-createddate">13.9.2. å®¡è®¡ createdDate</a></li><li><a href="#1393-%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%94%9F-sql">13.9.3. æ‰§è¡ŒåŸç”Ÿ SQL</a></li><li><a href="#1394-%E5%8A%A8%E6%80%81-sql">13.9.4. åŠ¨æ€ SQL</a></li><li><a href="#1395-spring-data-rest-%E9%85%8D%E5%90%88-spring-data-jpa">13.9.5. spring-data-rest é…åˆ spring-data-jpa</a></li></ul></li><li><a href="#1310-%E6%95%B4%E5%90%88-mybatis-plus">13.10. æ•´åˆ mybatis-plus</a></li><li><a href="#1311-%E6%95%B4%E5%90%88-mybatis">13.11. æ•´åˆ mybatis</a><ul><li><a href="#13111-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">13.11.1. åŸºæœ¬é…ç½®</a></li><li><a href="#13112-%E4%BD%BF%E7%94%A8-%E6%8B%A6%E6%88%AA%E5%99%A8-interceptor-plugins">13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins</a><ul><li><a href="#131121-principle-of-plugins">13.11.2.1. principle of plugins</a></li><li><a href="#131122-use-scenarios">13.11.2.2. use scenarios</a></li><li><a href="#131123-how-to-use-plugins">13.11.2.3. how to use plugins</a></li></ul></li><li><a href="#13113-typehandler">13.11.3. typehandler</a></li><li><a href="#13114-%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">13.11.4. å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13115-%E5%8A%A8%E6%80%81%E5%AE%9A%E6%97%B6%E5%88%B7%E6%96%B0-sql-mapper-%E5%AE%9E%E7%8E%B0%E7%83%AD%E5%8A%A0%E8%BD%BD">13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½</a></li><li><a href="#13116-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%E7%9B%AE%E5%BD%95-and-%E5%BC%80%E5%90%AF%E5%8D%A0%E4%BD%8D%E7%AC%A6%E8%BF%87%E6%BB%A4">13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤</a></li></ul></li><li><a href="#1312-springboot-%E4%BA%8B%E5%8A%A1">13.12. springboot äº‹åŠ¡</a><ul><li><a href="#13121-%E4%BA%8B%E5%8A%A1%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#13122-spring-%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E5%A4%B1%E6%95%88%E7%9A%84%E5%9D%91">13.12.2. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘</a></li><li><a href="#13123-transactional-%E6%B3%A8%E8%A7%A3">13.12.3. Transactional æ³¨è§£</a></li></ul></li><li><a href="#1313-%E7%BC%93%E5%AD%98">13.13. ç¼“å­˜</a><ul><li><a href="#13131-springboot-starter-cache">13.13.1. springboot-starter-cache</a></li><li><a href="#13132-caffeine">13.13.2. caffeine</a></li></ul></li><li><a href="#1314-%E9%85%8D%E5%90%88-h2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91">13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘</a><ul><li><a href="#13141-h2-%E5%92%8C-spring-data-jpa-%E9%85%8D%E5%90%88">13.14.1. h2 å’Œ spring data jpa é…åˆ</a></li><li><a href="#13142-%E5%92%8C-mybatis-plus-%E9%85%8D%E5%90%88">13.14.2. å’Œ mybatis-plus é…åˆ</a></li></ul></li><li><a href="#1315-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90">13.15. å¤šæ•°æ®æº</a><ul><li><a href="#13151-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE-%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13152-abstractroutingdatasource-%E5%8A%A8%E6%80%81%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2">13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢</a></li></ul></li><li><a href="#1316-%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B-databaseidprovider">13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider</a></li><li><a href="#1317-spring-kafka">13.17. spring kafka</a></li></ul></li><li><a href="#14-web-%E7%9B%B8%E5%85%B3">14. web ç›¸å…³</a><ul><li><a href="#141-%E5%8A%A0%E8%A7%A3%E5%AF%86">14.1. åŠ è§£å¯†</a></li><li><a href="#142-springboot-%E5%8F%91%E9%80%81-https-%E6%88%96%E8%80%85-http-%E5%AE%A2%E6%88%B7%E7%AB%AF-client">14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client</a><ul><li><a href="#1421-%E5%8F%91%E9%80%81-http-client">14.2.1. å‘é€ http client</a></li><li><a href="#1422-%E5%8F%91%E9%80%81-https-client">14.2.2. å‘é€ https client</a></li></ul></li><li><a href="#143-requestcontextholder">14.3. RequestContextHolder</a></li><li><a href="#144-%E8%A7%A3%E5%86%B3-api-%E7%89%88%E6%9C%AC%E5%85%B1%E5%AD%98">14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜</a><ul><li><a href="#1441-requestmappinghandlermapping">14.4.1. RequestMappingHandlerMapping</a></li><li><a href="#1442-request-matcher">14.4.2. request matcher</a></li><li><a href="#1443-request-condition">14.4.3. request condition</a></li></ul></li><li><a href="#145-%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%E7%9B%B8%E5%85%B3%E7%9A%84%E6%B3%A8%E8%A7%A3">14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£</a></li><li><a href="#146-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B">14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹</a></li><li><a href="#147-%E8%BF%94%E5%9B%9E%E5%9B%BE%E7%89%87">14.7. è¿”å›å›¾ç‰‡</a></li><li><a href="#148-rest-api-%E6%96%87%E6%A1%A3">14.8. rest api æ–‡æ¡£</a><ul><li><a href="#1481-knife4j">14.8.1. knife4j</a></li><li><a href="#1482-springdoc-openapi">14.8.2. springdoc-openapi</a></li><li><a href="#1483-swagger3">14.8.3. swagger3</a></li><li><a href="#1484-%E9%9B%86%E6%88%90swagger2">14.8.4. é›†æˆswagger2</a></li></ul></li><li><a href="#149-%E8%BF%87%E6%BB%A4%E5%99%A8-%E5%92%8C-%E6%8B%A6%E6%88%AA%E5%99%A8">14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨</a><ul><li><a href="#1491-%E5%8C%BA%E5%88%AB">14.9.1. åŒºåˆ«</a></li><li><a href="#1492-%E4%BD%BF%E7%94%A8-filter">14.9.2. ä½¿ç”¨ filter</a></li><li><a href="#1493-%E4%BD%BF%E7%94%A8-interceptor">14.9.3. ä½¿ç”¨ interceptor</a><ul><li><a href="#14931-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8">14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨</a></li><li><a href="#14932-%E5%9F%BA%E4%BA%8E-url-%E6%8B%A6%E6%88%AA">14.9.3.2. åŸºäº url æ‹¦æˆª</a></li><li><a href="#14933-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%8B%A6%E6%88%AA">14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª</a></li></ul></li></ul></li><li><a href="#1410-servlet-druid-%E7%9B%91%E6%8E%A7">14.10. servlet Druid ç›‘æ§</a></li><li><a href="#1411-aop-%E6%95%B4%E5%90%88%E4%BD%BF%E7%94%A8">14.11. aop æ•´åˆä½¿ç”¨</a><ul><li><a href="#14111-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">14.11.1. åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#14112-%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F">14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</a></li></ul></li><li><a href="#1412-controlleradvice-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">14.12. @controllerAdvice å¼‚å¸¸å¤„ç†</a></li><li><a href="#1413-httpservletrequest-%E7%9A%84%E8%BE%93%E5%85%A5%E6%B5%81%E5%8F%AA%E8%83%BD%E8%AF%BB%E5%8F%96%E4%B8%80%E6%AC%A1%E7%9A%84%E9%97%AE%E9%A2%98">14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜</a></li><li><a href="#1414-%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86">14.14. è·¯ç”±å¤„ç†</a><ul><li><a href="#14141-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84-%E6%9A%B4%E9%9C%B2%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90">14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº</a></li><li><a href="#14142-%E6%B7%BB%E5%8A%A0-view-controller">14.14.2. æ·»åŠ  view controller</a></li></ul></li><li><a href="#1415-spring-boot-starter-thymeleaf">14.15. spring-boot-starter-thymeleaf</a></li></ul></li><li><a href="#15-%E8%BF%90%E7%BB%B4%E9%83%A8%E7%BD%B2">15. è¿ç»´éƒ¨ç½²</a><ul><li><a href="#151-%E6%94%AF%E6%8C%81-https-ssl">15.1. æ”¯æŒ https ssl</a><ul><li><a href="#1511-nginx-%E9%85%8D%E7%BD%AE-https">15.1.1. nginx é…ç½® https</a></li><li><a href="#1512-%E6%94%AF%E6%8C%81-https-%E8%AE%BF%E9%97%AE">15.1.2. æ”¯æŒ https è®¿é—®</a></li><li><a href="#1513-http-%E8%AF%B7%E6%B1%82%E8%87%AA%E5%8A%A8%E8%BD%AC%E4%B8%BA-https">15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https</a></li><li><a href="#1514-%E5%90%8C%E6%97%B6%E6%94%AF%E6%8C%81-http-https">15.1.4. åŒæ—¶æ”¯æŒ http https</a></li></ul></li><li><a href="#152-%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2">15.2. å®¹å™¨åŒ–éƒ¨ç½²</a></li><li><a href="#153-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86">15.3. nginx åå‘ä»£ç†</a></li><li><a href="#154-%E5%86%85%E5%B5%8C-tomcat-%E8%B0%83%E4%BC%98">15.4. å†…åµŒ tomcat è°ƒä¼˜</a></li><li><a href="#155-%E9%85%8D%E7%BD%AE-war-%E5%8C%85%E9%83%A8%E7%BD%B2%E5%88%B0-tomcat">15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat</a></li></ul></li><li><a href="#16-spring-boot-%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91">16. spring boot ä¸­çš„å¹¶å‘</a><ul><li><a href="#161-%E4%BD%BF%E7%94%A8%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B">16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹</a><ul><li><a href="#1611-%E9%85%8D%E7%BD%AE%E7%BA%BF%E7%A8%8B%E6%B1%A0">16.1.1. é…ç½®çº¿ç¨‹æ± </a></li><li><a href="#1612-%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC-%E6%B2%A1%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC">16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼</a></li><li><a href="#1613-async%E5%A4%B1%E6%95%88">16.1.3. @Asyncå¤±æ•ˆ</a></li></ul></li></ul></li><li><a href="#17-%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81%E6%82%B2%E8%A7%82%E9%94%81">17. å®ç°ä¹è§‚é”æ‚²è§‚é”</a></li><li><a href="#18-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81">18. ç§»åŠ¨ç«¯æ¶ˆæ¯æ¨é€</a></li><li><a href="#19-%E5%8D%B3%E6%97%B6%E9%80%9A%E4%BF%A1-im%E7%B3%BB%E7%BB%9F">19. å³æ—¶é€šä¿¡ IMç³»ç»Ÿ</a></li><li><a href="#20-%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7">20. è¾…åŠ©å·¥å…·</a><ul><li><a href="#201-lombok-notice">20.1. lombok notice</a></li><li><a href="#202-devtools">20.2. devtools</a></li><li><a href="#203-maven-wrapper">20.3. maven wrapper</a></li></ul></li><li><a href="#21-%E6%A0%A1%E9%AA%8C">21. æ ¡éªŒ</a><ul><li><a href="#211-%E6%A0%A1%E9%AA%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">21.1. æ ¡éªŒé…ç½®æ–‡ä»¶</a></li><li><a href="#212-%E6%A0%A1%E9%AA%8C%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0">21.2. æ ¡éªŒè¯·æ±‚å‚æ•°</a></li><li><a href="#213-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C">21.3. è‡ªå®šä¹‰æ ¡éªŒ</a></li><li><a href="#214-validated%E5%92%8Cvalid">21.4. @Validatedå’Œ@Valid</a></li></ul></li><li><a href="#22-runner-%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0">22. runner è·å–å‘½ä»¤è¡Œå‚æ•°</a><ul><li><a href="#221-%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0">22.1. è·å–å‘½ä»¤è¡Œå‚æ•°</a></li><li><a href="#222-applicationrunner-or-commandlinerunner">22.2. <code>ApplicationRunner</code> or <code>CommandLineRunner</code></a></li></ul></li><li><a href="#23-%E5%BC%80%E5%8F%91%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BA%94%E7%94%A8">23. å¼€å‘å‘½ä»¤è¡Œåº”ç”¨</a></li><li><a href="#24-%E6%95%B4%E5%90%88-grpc">24. æ•´åˆ grpc</a></li><li><a href="#25-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6">25. ä»»åŠ¡è°ƒåº¦</a><ul><li><a href="#251-%E6%95%B4%E5%90%88-xxl-job-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%B9%B3%E5%8F%B0">25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°</a></li><li><a href="#252-%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1">25.2. å¼‚æ­¥ä»»åŠ¡</a></li><li><a href="#253-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1">25.3. å®šæ—¶ä»»åŠ¡</a><ul><li><a href="#2531-springboot-%E5%86%85%E7%BD%AE">25.3.1. springboot å†…ç½®</a></li><li><a href="#2532-%E9%9B%86%E6%88%90-quartz">25.3.2. é›†æˆ Quartz</a></li></ul></li></ul></li><li><a href="#26-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-and-%E7%8E%AF%E5%A2%83">26. é…ç½®æ–‡ä»¶ and ç¯å¢ƒ</a><ul><li><a href="#261-%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">26.1. è¯»å–é…ç½®æ–‡ä»¶</a><ul><li><a href="#2611-%E5%87%A0%E7%A7%8D%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95">26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•</a></li><li><a href="#2612-%E6%B3%A8%E5%85%A5%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B">26.1.2. æ³¨å…¥å¤æ‚ç±»å‹</a></li></ul></li><li><a href="#262-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%98%E5%85%88%E7%BA%A7">26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</a></li><li><a href="#263-%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF">26.3. è¯»å–ç¯å¢ƒä¿¡æ¯</a></li><li><a href="#264-%E4%B8%A4%E7%A7%8D%E5%BC%95%E5%85%A5-springboot-%E6%96%B9%E5%BC%8F">26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼</a></li></ul></li><li><a href="#27-%E5%BA%8F%E5%88%97%E5%8C%96-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">27. åºåˆ—åŒ– ååºåˆ—åŒ–</a><ul><li><a href="#271-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4-json">27.1. æ—¥æœŸæ—¶é—´ json</a></li><li><a href="#272-jackson-%E4%BD%BF%E7%94%A8">27.2. jackson ä½¿ç”¨</a><ul><li><a href="#2721-jsoncomponent">27.2.1. @JsonComponent</a></li><li><a href="#2722-jackson-%E5%9C%A8-springboot-%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE">27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®</a></li><li><a href="#2723-jackson%E6%B3%A8%E8%A7%A3">27.2.3. jacksonæ³¨è§£</a></li><li><a href="#2724-objectmapper-%E5%AE%9A%E5%88%B6">27.2.4. objectmapper å®šåˆ¶</a></li><li><a href="#2725-objectmapper-%E4%BD%BF%E7%94%A8">27.2.5. objectmapper ä½¿ç”¨</a></li></ul></li></ul></li><li><a href="#28-%E6%8E%A5%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98">28. æ¥å…¥ç¬¬ä¸‰æ–¹æ”¯ä»˜</a></li><li><a href="#29-%E6%8B%BE%E9%81%97">29. æ‹¾é—</a><ul><li><a href="#291-bean-%E6%87%92%E5%8A%A0%E8%BD%BD">29.1. bean æ‡’åŠ è½½</a></li></ul></li></ul><h1>1. å¸¸ç”¨å‘½ä»¤</h1><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">du -sh *.jar # jar size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ‰“åŒ…æ—¶æ²¡æœ‰æŒ‡å®šä¸»ç±»ï¼Œæ‰§è¡Œå¯ä»¥ç”¨java -cp {xxx.jar} {ä¸»ç±»åç§°ï¼ˆç»å¯¹è·¯å¾„ï¼‰}ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -cp æŒ‡å®šç±»è¿è¡Œæ‰€ä¾èµ–å…¶ä»–ç±»çš„è·¯å¾„ï¼Œé€šå¸¸æ˜¯ç±»åº“å’ŒjaråŒ…, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç­‰ä»· -classpath</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¤šä¸ªjaråŒ…ä¹‹é—´è¿æ¥ç¬¦ï¼šwindowä¸Šåˆ†å·â€œ;â€.Linuxä¸‹ä½¿ç”¨â€œ:â€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># win</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -cp .;d:\work\other.jar;d:\work\my.jar packname.mainclassname </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -cp .:/hone/myuser/work/other.jar:/hone/myuser/work/my.jar packname.mainclassname </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¡¨è¾¾å¼æ”¯æŒé€šé…ç¬¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -cp .;c:\work\my.jar;c:\work\*.jar packname.mainclassname </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æ‰“åŒ…æ—¶æŒ‡å®šäº†ä¸»ç±»ï¼Œæ‰§è¡Œå¯ä»¥ç›´æ¥ç”¨java -jar {xxx.jar}ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¼šç”¨åˆ°ç›®å½•META-INF\MANIFEST.MFæ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªå«Mainï¼Classçš„å‚æ•°ï¼Œå®ƒè¯´æ˜äº†java -jarå‘½ä»¤æ‰§è¡Œçš„ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># java -jaræ–¹å¼ä¸å¯ä»¥æŒ‡å®šé™„åŠ ä¾èµ–jaråŒ…ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -jar *.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¾èµ–å¤šä¸ª jar ä¸ä½¿ç”¨é€šé…ç¬¦ä¹Ÿå¯ä»¥è¿™æ ·æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -D è®¾ç½®ç³»ç»Ÿå±æ€§, é€šè¿‡System.getProperty(&quot;conf1&quot;);è·å¾—è¿™ä¸ªå€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -Djava.ext.dirs=lib MyClass </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è·³è¿‡æµ‹è¯•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -D è¡¨ç¤º maven ä¸­çš„ properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn -Dmaven.test.skip=true clean package # skip unit test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn -DskipTests clean package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean package -Pxxx # æŒ‡å®šè¦æ¿€æ´» maven profile çš„ id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -Dserver.port=8010 -jar xxx.jar # specific server port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -jar *.jar --server.port=8010 # åŒä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŒ‡å®š profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -jar *.jar --spring.properties.active=dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -jar -Dspring.profiles.active=dev demo-0.0.1-SNAPSHOT.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn spring-boot:run -Drun.profiles=dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>2. éƒ¨ç½²è„šæœ¬</h1><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#æœ¬è„šæœ¬åŸºæœ¬æ— éœ€æ”¹åŠ¨ï¼Œæ³¨æ„è¦ç‚¹å‡å·²ç”¨ä¸­æ–‡è¯´æ˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1. è¯·å°†æœ¬è„šæœ¬æ”¾åˆ°Linuxç³»ç»Ÿçš„pathè·¯å¾„ä¸‹ï¼Œæœ€å¥½æ˜¯/binç›®å½•ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. è¯·ç»™æœ¬è„šæœ¬è®¾å¤‡å¯æ‰§è¡Œæƒé™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. å¯åŠ¨ç¤ºä¾‹         springboot-starter xxx.jar start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. é‡å¯ç¤ºä¾‹         springboot-starter xxx.jar restart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 5. åœæ­¢ç¤ºä¾‹         springboot-starter xxx.jar stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 6. æŸ¥çœ‹çŠ¶æ€ç¤ºä¾‹     springboot-starter xxx.jar status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## è·å– java å‘½ä»¤çš„è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JAVA_CMD=`which java`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -z &quot;${JAVA_CMD}&quot; ];then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;Please install the Java environment&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## è¾“å‡ºæœ¬å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³• å¹¶é€€å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Usage: springboot-starter [app_name].jar [start|stop|restart|status]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## åˆ¤æ–­æ˜¯å¦è¾“å…¥äº†ä¸¤ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ $# -lt 2 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## è„šæœ¬åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APP_NAME=$1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## æ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATION=$2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## è¿è¡Œæ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MODEL=$3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -z &quot;$MODEL&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MODEL=&quot;production&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## å…¶å®ƒå‚æ•°å¤„ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OTHER_ARGS=&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ $# -gt 3 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shift 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shift $#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for ARG in $*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  OTHER_ARGS=&quot;$OTHER_ARGS $ARG&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## è„šæœ¬æ‰€åœ¨ç›®å½•ï¼Œç»å¯¹è·¯å¾„è¡¨ç¤º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BASE_PATH=$(cd `dirname $APP_NAME`;pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## å»æ‰æ‰€æœ‰ç›®å½•åçš„è„šæœ¬å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APP_NAME=${APP_NAME##*/}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## è„šæœ¬çš„è·¯å¾„ï¼Œç»å¯¹è·¯å¾„è¡¨ç¤º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APP_PATH=$BASE_PATH&quot;/&quot;$APP_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## åˆ¤æ–­ç›®æ ‡ç¨‹åºæ˜¯å¦å·²ç»å¯åŠ¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">is_running(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ## å°è¯•è·å–å·²ç»è¿è¡Œç¨‹åºçš„PID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PID=`ps -ef|grep ${APP_PATH}|grep -v grep|awk &#x27;{print $2}&#x27;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ -z &quot;${PID}&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## å¯åŠ¨ç¨‹åº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  is_running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ $? -eq &quot;1&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;${APP_NAME} is already running. pid is ${PID} .&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## å¯åŠ¨ jar åŒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;${APP_NAME} starting ...... &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nohup ${JAVA_CMD} -jar ${OTHER_ARGS} -Dspring.profiles.active=${MODEL} ${APP_PATH} &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;nohup ${JAVA_CMD} -jar ${OTHER_ARGS} -Dspring.profiles.active=${MODEL} ${APP_PATH} &gt; /dev/null 2&gt;&amp;1 &amp;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sleep 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;${APP_NAME} started  completed &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## åœæ­¢ç¨‹åº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stop(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  is_running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ $? -eq &quot;1&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;PID is ${PID}, ${APP_NAME} stopping ...... &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kill ${PID}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [ $? -ne &quot;0&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo &quot;kill ${PID} failedï¼Œexecute kill -9 ${PID}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        kill -9 ${PID}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sleep 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;${APP_NAME} stopped completed &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;${APP_NAME} is not running&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## è¾“å‡ºç¨‹åºè¿è¡ŒçŠ¶æ€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  is_running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ $? -eq &quot;1&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;${APP_NAME} is running. pid is ${PID}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;${APP_NAME} is NOT running.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## é‡å¯ç¨‹åº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">restart(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case &quot;$OPERATION&quot; in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;start&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;stop&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;restart&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    usage ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>3. å·¥å…·ç±»</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="31-bean-å¤åˆ¶-å…‹éš†">3.1. bean å¤åˆ¶ å…‹éš†<a href="#31-bean-å¤åˆ¶-å…‹éš†" class="hash-link" aria-label="Direct link to 3.1. bean å¤åˆ¶ å…‹éš†" title="Direct link to 3.1. bean å¤åˆ¶ å…‹éš†">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">beancopier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://github.com/mapstruct/mapstruct</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="32-å­—ç¬¦ä¸²">3.2. å­—ç¬¦ä¸²<a href="#32-å­—ç¬¦ä¸²" class="hash-link" aria-label="Direct link to 3.2. å­—ç¬¦ä¸²" title="Direct link to 3.2. å­—ç¬¦ä¸²">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// &gt;&gt;&gt; springboot è‡ªå¸¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RandomStringUtils ç”Ÿæˆéšæœºå­—ç¬¦ä¸², éšæœºæ•°å­—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StringUtils.isEmpty() å¹¶éä¸¥æ ¼çš„ç©º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="33-ç¼–è§£ç ">3.3. ç¼–è§£ç <a href="#33-ç¼–è§£ç " class="hash-link" aria-label="Direct link to 3.3. ç¼–è§£ç " title="Direct link to 3.3. ç¼–è§£ç ">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// &gt;&gt;&gt; springboot è‡ªå¸¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static String getMD5(String str) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String base = str + &quot;/&quot; + salt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String md5 = DigestUtils.md5DigestAsHex(base.getBytes());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return md5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="34-commons-lang3">3.4. commons-lang3<a href="#34-commons-lang3" class="hash-link" aria-label="Direct link to 3.4. commons-lang3" title="Direct link to 3.4. commons-lang3">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="35-æ–‡ä»¶æ“ä½œ">3.5. æ–‡ä»¶æ“ä½œ<a href="#35-æ–‡ä»¶æ“ä½œ" class="hash-link" aria-label="Direct link to 3.5. æ–‡ä»¶æ“ä½œ" title="Direct link to 3.5. æ–‡ä»¶æ“ä½œ">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// springboot åŸç”Ÿ æ–‡ä»¶ä¸‹è½½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@GetMapping(&quot;/download&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ResponseEntity&lt;Resource&gt; download(HttpServletResponse httpServletResponse,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            @RequestParam(&quot;id&quot;) String objId) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    final MongoSysFileServiceImpl.DownloadFileVo downloadFileVo = sysFileService.downloadFile(objId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (downloadFileVo == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new RuntimeException(&quot;æŒ‡å®šæ–‡ä»¶ä¸å­˜åœ¨, objId = &quot; + objId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return ResponseEntity.ok()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .contentType(MediaType.parseMediaType(&quot;application/octet-stream&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\&quot;&quot; + downloadFileVo.getFilename() + &quot;\&quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .body(new InputStreamResource(downloadFileVo.getIs()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ä¸Šä¼ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @PostMapping(value = &quot;upload&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public R&lt;SysFile&gt; upload(@RequestPart(&quot;file&quot;) MultipartFile file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä¸Šä¼ å¹¶è¿”å›è®¿é—®åœ°å€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final MongoSysFileServiceImpl.UploadFileResp uploadFileResp = sysFileService.uploadFile(file);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SysFile sysFile = new SysFile();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sysFile.setObjId(uploadFileResp.getObjId());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sysFile.setName(uploadFileResp.getGeneratedName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return R.ok(sysFile);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catch (Exception e)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.error(&quot;ä¸Šä¼ æ–‡ä»¶å¤±è´¥&quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return R.fail(e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//feign client è¿œç¨‹è°ƒç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PostMapping(value = &quot;/upload&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public R&lt;SysFile&gt; upload(@RequestPart(value = &quot;file&quot;) MultipartFile file);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¼ é€’ æ–‡ä»¶ , åŒæ—¶ä¼ é€’è¯·æ±‚å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PostMapping(&quot;/add&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public AjaxResult add( EstimateFile estimateFile, @RequestPart(&quot;files&quot;) MultipartFile[] files)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { //@RequestPart(&quot;estimateFile&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return toAjax(estimateFileService.insertEstimateFile(estimateFile, files));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="36-commons-collections4">3.6. commons-collections4<a href="#36-commons-collections4" class="hash-link" aria-label="Direct link to 3.6. commons-collections4" title="Direct link to 3.6. commons-collections4">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">isSubCollection(smallColl, bigColl)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 1ã€é™¤éå…ƒç´ ä¸ºnullï¼Œå¦åˆ™å‘é›†åˆæ·»åŠ å…ƒç´ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.addIgnoreNull(personList,null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// &gt;&gt;&gt; åˆå¹¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 2ã€å°†ä¸¤ä¸ªå·²æ’åºçš„é›†åˆaå’Œbåˆå¹¶ä¸ºä¸€ä¸ªå·²æ’åºçš„åˆ—è¡¨ï¼Œä»¥ä¾¿ä¿ç•™å…ƒç´ çš„è‡ªç„¶é¡ºåº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.collate(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 3ã€å°†ä¸¤ä¸ªå·²æ’åºçš„é›†åˆaå’Œbåˆå¹¶åˆ°ä¸€ä¸ªå·²æ’åºçš„åˆ—è¡¨ä¸­ï¼Œä»¥ä¾¿ä¿ç•™æ ¹æ®Comparator cçš„å…ƒç´ é¡ºåºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.collate(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b, Comparator&lt;? super O&gt; c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// &gt;&gt;&gt; åˆ¤ç©º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 5ã€å¦‚æœå‚æ•°æ˜¯nullï¼Œåˆ™è¿”å›ä¸å¯å˜çš„ç©ºé›†åˆï¼Œå¦åˆ™è¿”å›å‚æ•°æœ¬èº«ã€‚ï¼ˆå¾ˆå®ç”¨ ,æœ€ç»ˆè¿”å›List EMPTY_LIST = new EmptyList&lt;&gt;()ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.emptyIfNull(Collection&lt;T&gt; collection)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 6ã€ç©ºå®‰å…¨æ£€æŸ¥æŒ‡å®šçš„é›†åˆæ˜¯å¦ä¸ºç©º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.isEmpty(Collection&lt;?&gt; coll)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 7ã€ ç©ºå®‰å…¨æ£€æŸ¥æŒ‡å®šçš„é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.isNotEmpty(Collection&lt;?&gt; coll)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// &gt;&gt; åˆ¤æ–­æ˜¯å¦åŒ…å« </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 4ã€è¿”å›è¯¥ä¸ªé›†åˆä¸­æ˜¯å¦å«æœ‰è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.containsAny(Collection&lt;?&gt; coll1, T... coll2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// &gt;&gt;&gt; ç¿»è½¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 8ã€åè½¬ç»™å®šæ•°ç»„çš„é¡ºåºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.reverseArray(Object[] array);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 9ã€å·®é›†   or   chaList.removeAll(listB);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    or          listA.stream().filter(item -&gt; !listB.contains(item)).collect(toList());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.subtract(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 10ã€å¹¶é›†    or     å…ˆ bingList.removeAll(listB), å†bingList.addAll(listB); ((å…ˆåšå·®é›†å†åšæ·»åŠ æ‰€æœ‰ï¼‰)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.union(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * 11ã€äº¤é›†   ä¹Ÿå¯ç”¨ jiaoList.retainAll(listB); è¿”å› Boolean, ä¼šæ”¹å˜åŸæœ‰é›†åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    or          listA.stream().filter(item -&gt; listB.contains(item)).collect(toList())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.intersection(Collection a, Collection b) // è¿”å›æ–°é›†åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *12ã€ äº¤é›†çš„è¡¥é›†ï¼ˆæå–ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CollectionUtils.disjunction(Collection a, Collection b)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>4. å’Œ react ä¸€èµ·æ‰“åŒ…</h1><p><a href="https://github.com/arpan-banerjee7/demo-spring-react-maven-plugin" target="_blank" rel="noopener noreferrer">https://github.com/arpan-banerjee7/demo-spring-react-maven-plugin</a></p><p>TODO</p><h1>5. Spring Bootä¸­çš„æ³¨è§£</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="51-configurationproperties-å’Œ-value">5.1. @ConfigurationProperties å’Œ @Value<a href="#51-configurationproperties-å’Œ-value" class="hash-link" aria-label="Direct link to 5.1. @ConfigurationProperties å’Œ @Value" title="Direct link to 5.1. @ConfigurationProperties å’Œ @Value">â€‹</a></h2><p>@Value æ˜¯core containerçš„featureã€‚ä¸æ”¯æŒå®½æ¾ç»‘å®šï¼Œä¸æ”¯æŒMeta-dataã€‚ä½†æ”¯æŒspELlã€‚
@ConfigurationProperties åˆ™æ”¯æŒå®½æ¾ç»‘å®šï¼Œæ”¯æŒMeta-dataã€‚ä½†ä¸æ”¯æŒspELlã€‚</p><p>@ConfigurationPropertiesä¸€èˆ¬åªç”¨æ¥å¤„ç†ç¯å¢ƒä¿¡æ¯ï¼Œä¸ç”¨æ¥æ³¨å…¥è‡ªå®šä¹‰å±æ€§ï¼ˆè¿™æ®µä¸çŸ¥é“ç¿»è¯‘å¾—å‡†ä¸å‡†ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼šEven if the configuration above will create a regular bean for FooProperties, we recommend that @ConfigurationProperties only deal with the environment and in particular does not inject other beans from the context. Having said that, The @EnableConfigurationProperties annotation is also automatically applied to your project so that any existing bean annotated with @ConfigurationProperties will be configured from the Environment.ï¼‰   </p><p>é…ç½®æ–‡ä»¶ï¼š  </p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">myProps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#è‡ªå®šä¹‰çš„å±æ€§å’Œå€¼    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">simpleProp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> simplePropValue    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">arrayProps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">5</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">listProp1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> abc    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> abcValue    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> efg    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> efgValue    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">listProp2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> config2Value1    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> config2Vavlue2    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mapProps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">key1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> value1    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">key2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> value2  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ›å»ºä¸€ä¸ªbeanæ¥æ¥å—ä¿¡æ¯ï¼š(è¿™é‡Œä¸æ¨èè¿™ä¹ˆç”¨, åº”è¯¥ä½¿ç”¨ @value è€è€å®å®å±æ€§å†™å…¨)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// @Component    // è¿™ä¸ªæ³¨è§£å¯é€‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix=&quot;myProps&quot;) //æ¥æ”¶application.ymlä¸­çš„myPropsä¸‹é¢çš„å±æ€§   (prefix å¿…é¡», ä¸å¯ä¸º&quot;&quot;, éœ€è¦åœ¨é…ç½®ç±»ä¸­ enable config props class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ­¤æ—¶ idea æç¤º spring boot config annotation processor not configured, æ˜¯å› ä¸ºä»–ä»¥ä¸ºä½ è¦ä¸ºé…ç½®æ–‡ä»¶æŒ‡å®šè‡ªå®šä¹‰å±æ€§, éœ€è¦ç”Ÿæˆæç¤º </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯ä»¥https://docs.spring.io/spring-boot/docs/2.3.4.RELEASE/reference/html/appendix-configuration-metadata.html#configuration-metadata-annotation-processor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyProps {    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String simpleProp;    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String[] arrayProps;    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;Map&lt;String, String&gt;&gt; listProp1 = new ArrayList&lt;&gt;(); //æ¥æ”¶prop1é‡Œé¢çš„å±æ€§å€¼    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;String&gt; listProp2 = new ArrayList&lt;&gt;(); //æ¥æ”¶prop2é‡Œé¢çš„å±æ€§å€¼    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, String&gt; mapProps = new HashMap&lt;&gt;(); //æ¥æ”¶prop1é‡Œé¢çš„å±æ€§å€¼    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é™¤äº†å¯ä»¥ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ä¸€ä¸ªç±»ï¼Œè¿˜å¯ä»¥åœ¨@Beanæ–¹æ³•ä¸Šä½¿ç”¨ï¼›éœ€è¦ç»‘å®šå±æ€§åˆ°ä¸å—ä½ æ§åˆ¶çš„ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œè¿™ç§æ–¹å¼éå¸¸æœ‰ç”¨ã€‚  </p><p>ä¸ºäº†ä»ç¯å¢ƒå±æ€§é…ç½®ä¸€ä¸ªbeanï¼Œå°†@ConfigurationPropertiesæ·»åŠ åˆ°å®ƒçš„beanæ³¨å†Œè¿‡ç¨‹,ä»»ä½•ä»¥fooä¸ºå‰ç¼€çš„å±æ€§å®šä¹‰éƒ½ä¼šè¢«æ˜ å°„åˆ°FooComponentä¸Šï¼š  </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;foo&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public FooComponent fooComponent() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹äºæ— æ³•è½¬æ¢çš„å±æ€§, æ¯”å¦‚æœ¬æ¥æ˜¯ä¸€ä¸ª Boolean ç±»å‹, ä½†æ˜¯é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ˜¯ string ç±»å‹, ignoreInvalidFields å¯ä»¥å†³å®šæ˜¯å¦æŠ›å‡ºå¼‚å¸¸, é»˜è®¤ä¸º false, è¡¨ç¤ºè¦æŠ›å‡ºå¼‚å¸¸</p><p>å¯¹äºé…ç½®æ–‡ä»¶ä¸­å¤šä½™çš„å±æ€§, ignoreUnknownFields å†³å®šæ˜¯å¦æŠ›å‡ºå¼‚å¸¸, é»˜è®¤ true, è¡¨ç¤ºä¸æŠ›å‡ºå¼‚å¸¸</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="52-enableconfigurationproperties">5.2. @EnableConfigurationProperties<a href="#52-enableconfigurationproperties" class="hash-link" aria-label="Direct link to 5.2. @EnableConfigurationProperties" title="Direct link to 5.2. @EnableConfigurationProperties">â€‹</a></h2><p>é…ç½®å“ªäº›ç±»æ˜¯ç”¨æ¥æ¥å—é…ç½®æ–‡ä»¶ä¿¡æ¯çš„bean,å½“@EnableConfigurationPropertiesæ³¨è§£åº”ç”¨åˆ°ä½ çš„@Configurationæ—¶ï¼Œä»»ä½•è¢«@ConfigurationPropertiesæ³¨è§£çš„beanså°†è‡ªåŠ¨è¢«Environmentå±æ€§é…ç½®  , configBean æ— éœ€ @component</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties({LiquibaseProperties.class, ApplicationProperties.class})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ä¸€ä¸ª @ConfigurationProperties bean åƒå¦‚ä¸Šè¿™æ ·æ³¨å†Œï¼Œè¿™ä¸ªbeanå°±æœ‰äº†ä¸€ä¸ªåå­—ï¼Œè§„èŒƒæ˜¯è¿™æ ·ï¼š<code>&lt;prefix&gt;-&lt;fqn&gt;</code>, å³ï¼šå‰ç¼€-å…¨é™å®šåï¼Œå¦‚ï¼š  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">myProps-com.xy.PropertiesBean</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>enableXXX ç±»æ³¨è§£åŸç†å°±æ˜¯ å®šä¹‰ä¸€ä¸ªæ³¨è§£, åœ¨æ³¨è§£ä¸Šé€šè¿‡ @import å¼•å…¥ä¸€ä¸ªé…ç½®ç±»</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="53-enableautoconfiguration">5.3. @EnableAutoConfiguration<a href="#53-enableautoconfiguration" class="hash-link" aria-label="Direct link to 5.3. @EnableAutoConfiguration" title="Direct link to 5.3. @EnableAutoConfiguration">â€‹</a></h2><p>æ ¹æ®æ·»åŠ çš„jarä¾èµ–çŒœæµ‹ä½ æƒ³å¦‚ä½•é…ç½®Springï¼Œå¦‚æœå‘ç°åº”ç”¨äº†ä½ ä¸æƒ³è¦çš„ç‰¹å®šè‡ªåŠ¨é…ç½®ç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨ @EnableAutoConfiguration æ³¨è§£çš„excludeå±æ€§æ¥ç¦ç”¨å®ƒä»¬  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoConfiguration(exclude = {MetricFilterAutoConfiguration.class, MetricRepositoryAutoConfiguration.class})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨ä¸€èˆ¬æ˜¯@EnableAutoConfigurationåŠ åˆ°ä¸€ä¸ªä¸»@configrationç±»ä¸Šï¼Œä¸»é…ç½®ç±»ä¸€èˆ¬å°±æ˜¯appçš„å¯åŠ¨ç±»  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="54-componentscan">5.4. @ComponentScan<a href="#54-componentscan" class="hash-link" aria-label="Direct link to 5.4. @ComponentScan" title="Direct link to 5.4. @ComponentScan">â€‹</a></h2><p>æ‰«ææ‰€æœ‰Springç»„ä»¶ï¼Œé€šè¿‡@autowiredæ³¨å…¥ä½¿ç”¨  </p><p>å¦‚æœä½¿ç”¨ä¸Šé¢å»ºè®®çš„ç»“æ„ç»„ç»‡ä»£ç ï¼ˆå°†åº”ç”¨ç±»æ”¾åˆ°æ ¹åŒ…ä¸‹ï¼‰ï¼Œä½ å¯ä»¥æ·»åŠ  @ComponentScan æ³¨è§£è€Œä¸éœ€è¦ä»»ä½•å‚æ•°ã€‚ä½ çš„æ‰€æœ‰åº”ç”¨ç¨‹åºç»„ä»¶ï¼ˆ @Component , @Service , @Repository , @Controller ç­‰ï¼‰å°†è¢«è‡ªåŠ¨æ³¨å†Œä¸ºSpring Beansã€‚  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="55-springbootapplication">5.5. @SpringBootApplication<a href="#55-springbootapplication" class="hash-link" aria-label="Direct link to 5.5. @SpringBootApplication" title="Direct link to 5.5. @SpringBootApplication">â€‹</a></h2><p>@SpringBootApplication æ³¨è§£ç­‰ä»·äºä»¥é»˜è®¤å±æ€§ä½¿ç”¨ @Configuration ï¼Œ @EnableAutoConfiguration å’Œ @ComponentScan   </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="56-componentå’Œbeanå’ŒconfigrationåŒºåˆ«">5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«<a href="#56-componentå’Œbeanå’ŒconfigrationåŒºåˆ«" class="hash-link" aria-label="Direct link to 5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«" title="Direct link to 5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«">â€‹</a></h2><p>@Configuration æ³¨è§£æœ¬è´¨ä¸Šè¿˜æ˜¯ @Component, </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Target({ElementType.TYPE})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface Configuration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @AliasFor(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        annotation = Component.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String value() default &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    boolean proxyBeanMethods() default true;// é»˜è®¤ä¸º true, config bean ä¸­çš„æ–¹æ³•è¢« cglib ä»£ç†, è¡¨ç¤º åœ¨åŒä¸ª config bean ä¸­åµŒå¥—è°ƒç”¨æ–¹æ³•, è¿”å›çš„å¯¹è±¡é»˜è®¤ä» ioc container ä¸­è·å–, ä¸ä¼šæ–°åˆ›å»ºå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>@Configurationä¸€èˆ¬å’Œ@beanåˆç”¨, @componentå’Œ@beanä¸èƒ½åˆç”¨</p><p>Spring Bootæå€¡åŸºäºJavaçš„é…ç½®ï¼Œé€šå¸¸ç®€æ˜“å¯åŠ¨ç±»ä½œä¸ºä¸»é…ç½®ç±»ï¼Œå…¶ä»–é…ç½®ç±»é€šè¿‡@importå¯¼å…¥åˆ°ä¸»é…ç½®ç±»ï¼›@ComponentScanä¹Ÿä¼šæ‰«æé…ç½®ç±»  ,å¦‚æœä¸å¾—ä¸ä½¿ç”¨åŸºäºxmlçš„é…ç½®ï¼Œä»æ—§å¯ä»¥ä»ä¸€ä¸ª@configrationç±»å¼€å§‹ï¼Œé€šè¿‡@ImportResource æ³¨è§£åŠ è½½XMLé…ç½®æ–‡ä»¶ã€‚  </p><p>@Componentè¢«ç”¨åœ¨è¦è¢«è‡ªåŠ¨æ‰«æå’Œè£…é…çš„ç±»ä¸Šï¼ŒSpring æ³¨è§£@Componentç­‰æ•ˆäº@Service,@Controller,@Repositoryï¼›@Beanåªèƒ½ç”¨äºæ–¹æ³•(æ–¹æ³•åä½œä¸ºiocå®¹å™¨ä¸­çš„bean name)å’Œæ³¨è§£ä¸Šã€‚ç”¨@Configurationæ³¨è§£è¯¥ç±»ï¼Œç­‰ä»· ä¸XMLä¸­é…ç½®beansï¼›ç”¨@Beanæ ‡æ³¨æ–¹æ³•ç­‰ä»·äºXMLä¸­é…ç½®beanã€‚  </p><p>åœ¨é¡¹ç›®ä¸­ï¼Œæœ¬å·¥ç¨‹çš„beanæ³¨å†Œï¼Œä½¿ç”¨@Componentï¼Œé€šè¿‡web serviceå–å¾—çš„beanï¼Œé€šè¿‡@Beanæ ‡æ³¨åœ¨è·å–æ–¹æ³•ä¸Šæ³¨å†Œï¼›</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="57-importå’Œimportresourceå’Œpropertysourceæ¯”è¾ƒ">5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ<a href="#57-importå’Œimportresourceå’Œpropertysourceæ¯”è¾ƒ" class="hash-link" aria-label="Direct link to 5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ" title="Direct link to 5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ">â€‹</a></h2><ul><li>å‰ä¸¤è€…éƒ½éœ€è¦å’Œ@configurationé…åˆä½¿ç”¨(Both @Import @ImportResource work with @Configuration), è¡¨ç¤ºå¯¼å…¥é¢å¤–çš„é…ç½®<ul><li>@import å¯¼å…¥æŸä¸ªé…ç½®ç±», è¿™ä¸ªé…ç½®ç±»å¯ä»¥ä¸ç”¨æ ‡æ³¨ @configuration (ä¸€èˆ¬ä¼šé…åˆè‡ªå®šä¹‰æ³¨è§£ä½¿ç”¨: è‡ªå®šä¹‰æ³¨è§£ä¸Šé€šè¿‡ @import å¯¼å…¥å¤šä¸ªæœªæ ‡æ³¨@configuration çš„é…ç½®ç±»ä½¿å¾—è¿™äº›é…ç½®ç±»ç”Ÿæ•ˆ)</li></ul></li><li>@ImportResourceç”¨æ¥å¼•å…¥å¤–ç½®çš„é…ç½®æ–‡ä»¶, å¦‚@ImportResource({&quot;classpath:datasource.xml&quot;}), ä¸€èˆ¬ç”¨æ¥å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢åŠŸèƒ½ç”Ÿæ•ˆ</li><li>@Importå¼•å…¥å¦å¤–çš„@configurationç±»</li><li>@PropertySourceç”¨äºåŠ è½½å¦å¤–çš„å±æ€§é…ç½®æ–‡ä»¶, å¦‚@PropertySource(value = {&quot;classpath:person.properties&quot;}), ä¸€èˆ¬å’Œ@ConfigurationProperties(prefix = &quot;person&quot;)ä¸€èµ·ç”¨
springbooté»˜è®¤åªä¼šåŠ è½½application.propertiesä¸­çš„å±æ€§,</li></ul><p>ä¾‹å­:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import(AnotherConfig.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ImportResource(â€œclasspath:/com/acme/properties-config.xmlâ€)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PropertySource(â€œclasspath:some.propertiesâ€)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AppConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// blahâ€¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>6. context ä¸Šä¸‹æ–‡ æ‰‹åŠ¨æ³¨å†Œbean</h1><p><a href="https://blog.csdn.net/qq_36628536/article/details/113753368" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_36628536/article/details/113753368</a> ä»‹ç»</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// plan 1: (æ­¤ç§æ–¹å¼æ³¨å†Œçš„beanåœ¨è°ƒç”¨æ—¶å°†ç”±springè¿›è¡Œåˆ›å»ºï¼Œç›¸å½“äºå»¶è¿ŸåŠ è½½bean)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ApplicationContextUtil implements ApplicationContextAware {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static ApplicationContext applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setApplicationContext(ApplicationContext context) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        applicationContext=context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  åŠ¨æ€æ³¨å…¥bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param requiredType æ³¨å…¥ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param beanName beanåç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Object registerBean(Class&lt;?&gt; requiredType,String beanName){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å°†applicationContextè½¬æ¢ä¸ºConfigurableApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigurableApplicationContext configurableApplicationContext = (ConfigurableApplicationContext) applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è·å–BeanFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultListableBeanFactory defaultListableBeanFactory = (DefaultListableBeanFactory) configurableApplicationContext.getAutowireCapableBeanFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åˆ›å»ºbeanä¿¡æ¯.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BeanDefinitionBuilder beanDefinitionBuilder = BeanDefinitionBuilder.genericBeanDefinition(requiredType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åŠ¨æ€æ³¨å†Œbean.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        defaultListableBeanFactory.registerBeanDefinition(beanName, beanDefinitionBuilder.getBeanDefinition());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è·å–åŠ¨æ€æ³¨å†Œçš„bean.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return configurableApplicationContext.getBean(requiredType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ï½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// plan 2: (æ­¤ç§æ–¹å¼å…è®¸æ‰‹åŠ¨åˆ›å»ºå•ä¾‹beanå®ä¾‹å¹¶æ³¨å†Œï¼Œæ³¨æ„å¿…é¡»æ˜¯å•ä¾‹çš„ï¼Œåœ¨springè°ƒç”¨æ—¶ï¼Œä¼šå°†æ‰‹åŠ¨åˆ›å»ºçš„beanç›´æ¥æ³¨å…¥åˆ°è°ƒç”¨æ–¹)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ApplicationContextUtil implements ApplicationContextAware {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static ApplicationContext applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setApplicationContext(ApplicationContext context) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        applicationContext=context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  åŠ¨æ€æ³¨å…¥å•ä¾‹beanå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param beanName beanåç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param singletonObject å•ä¾‹beanå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return æ³¨å…¥å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Object registerSingletonBean(String beanName,Object singletonObject){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å°†applicationContextè½¬æ¢ä¸ºConfigurableApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigurableApplicationContext configurableApplicationContext = (ConfigurableApplicationContext) applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è·å–BeanFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultListableBeanFactory defaultListableBeanFactory = (DefaultListableBeanFactory) configurableApplicationContext.getAutowireCapableBeanFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åŠ¨æ€æ³¨å†Œbean.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        defaultListableBeanFactory.registerSingleton(beanName,singletonObject);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è·å–åŠ¨æ€æ³¨å†Œçš„bean.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return configurableApplicationContext.getBean(beanName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ï½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>7. å®ç°äº‹ä»¶é©±åŠ¨</h1><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ApplicationEventï¼šè¡¨ç¤ºäº‹ä»¶æœ¬èº«ï¼Œè‡ªå®šä¹‰äº‹ä»¶éœ€è¦ç»§æ‰¿è¯¥ç±»ï¼Œç”¨æ¥å®šä¹‰äº‹ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ApplicationEventPublisherï¼šäº‹ä»¶å‘é€å™¨ï¼Œä¸»è¦ç”¨æ¥å‘å¸ƒäº‹ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ApplicationListenerï¼šäº‹ä»¶ç›‘å¬å™¨æ¥å£ï¼Œç›‘å¬ç±»å®ç°ApplicationListener é‡ŒonApplicationEventæ–¹æ³•å³å¯ï¼Œä¹Ÿå¯ä»¥åœ¨æ–¹æ³•ä¸Šå¢åŠ @EventListenerä»¥å®ç°äº‹ä»¶ç›‘å¬ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// é»˜è®¤æƒ…å†µä¸‹äº‹ä»¶æ˜¯åŒæ­¥çš„ã€‚å³äº‹ä»¶è¢«publishåä¼šç­‰å¾…Listenerçš„å¤„ç†ã€‚å¦‚æœå‘å¸ƒäº‹ä»¶å¤„çš„ä¸šåŠ¡å­˜åœ¨äº‹åŠ¡ï¼Œç›‘å¬å™¨å¤„ç†ä¹Ÿä¼šåœ¨ç›¸åŒçš„äº‹åŠ¡ä¸­ã€‚å¦‚æœéœ€è¦å¼‚æ­¥å¤„ç†äº‹ä»¶ï¼Œå¯ä»¥onApplicationEventæ–¹æ³•ä¸ŠåŠ @Ayncæ”¯æŒå¼‚æ­¥æˆ–åœ¨æœ‰@EventListenerçš„æ³¨è§£æ–¹æ³•ä¸ŠåŠ ä¸Š@Aync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProductEvent extends ApplicationEvent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProductEvent(Product product) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(product);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProductServiceImpl implements IproductService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ApplicationEventPublisher publisher;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Transactional(rollbackFor = Exception.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void saveProduct(Product product) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        productMapper.saveProduct(product); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //äº‹ä»¶å‘å¸ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        publisher.publishEvent(product);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProductListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final NotifyService notifyServcie;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async // éœ€è¦@EnableAsync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @EventListener(ProductEvent.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void notify(ProductEvent event) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Product product = (Product) event.getSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        notifyServcie.notify(product, &quot;product&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç­‰æ•ˆ @eventListner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RegisterListener implements ApplicationListener&lt;UserRegisterEvent&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å®ç°ç›‘å¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param userRegisterEvent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void onApplicationEvent(UserRegisterEvent userRegisterEvent) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è·å–æ³¨å†Œç”¨æˆ·å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserBean user = userRegisterEvent.getUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //../çœç•¥é€»è¾‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è¾“å‡ºæ³¨å†Œç”¨æˆ·ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;æ³¨å†Œä¿¡æ¯ï¼Œç”¨æˆ·åï¼š&quot;+user.getName()+&quot;ï¼Œå¯†ç ï¼š&quot;+user.getPassword());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>8. ä¼˜é›…åœæœº å…³æœº</h1><p>ï¼Œ1ã€åˆ©ç”¨åº•å±‚JVM Runtime.getRuntime().addShutdownHook() æ·»åŠ è‡ªå·±çš„é’©å­å‡½æ•°ã€‚</p><p>2ã€åˆ©ç”¨Spring ç°æœ‰æœºåˆ¶ï¼ŒSpringä¼šåœ¨å…³æœºæ—¶å‘é€ContextClosedEventç»™åˆ°ç›‘å¬å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå…³é—­å‡½æ•°æ”¾åœ¨ç›‘å¬å™¨é‡Œå³å¯ã€‚</p><p>ä¼˜é›…å…³æœºçš„è¿‡ç¨‹åº”è¯¥æ˜¯é€šçŸ¥æ³¨å†Œä¸­å¿ƒ-&gt;æš‚åœæ¥æ”¶æ–°è¯·æ±‚-&gt;æ—§è¯·æ±‚æ‰§è¡Œå®Œæ¯•-&gt;å…¶ä½™çš„æ¸…ç†åŠ¨ä½œ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// è¿™é‡Œé‡‡ç”¨æ–¹å¼ 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç›‘å¬å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private static class GracefulShutdown implements TomcatConnectorCustomizer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationListener&lt;ContextClosedEvent&gt;, Ordered {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final Logger log = LoggerFactory.getLogger(GracefulShutdown.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private volatile Connector connector;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ§åˆ¶GracefulShutdown listenerä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int order = Ordered.HIGHEST_PRECEDENCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void customize(Connector connector) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.connector = connector;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void onApplicationEvent(ContextClosedEvent event) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;eureka client shutting down&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        eurekaClient.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;Completed shut down eureka client&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Tomcatæš‚åœæ¥æ”¶request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.connector.pause();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;connector pause&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å…³é—­Tomcatçº¿ç¨‹æ±         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Executor executor = this.connector.getProtocolHandler().getExecutor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (executor instanceof ThreadPoolExecutor) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) executor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                threadPoolExecutor.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                logger.info(&quot;connector executor shutting down&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (!threadPoolExecutor.awaitTermination(10, TimeUnit.SECONDS)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    logger.warn(&quot;Tomcat thread pool did not shut down gracefully within &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            + &quot;10 seconds. Proceeding with forceful shutdown&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                logger.info(&quot;completed shut down connector executor&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            catch (InterruptedException ex) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread.currentThread().interrupt();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int getOrder() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.order;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// springboot é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç”¨äºä¼˜é›…å…³é—­tomcat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public GracefulShutdown gracefulShutdown(EurekaClient eurekaClient) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new GracefulShutdown(eurekaClient);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç”¨äºä¼˜é›…å…³é—­tomcat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public WebServerFactoryCustomizer tomcatCustomizer(GracefulShutdown gracefulShutdown) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return factory -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (factory instanceof TomcatServletWebServerFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ((TomcatServletWebServerFactory) factory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addConnectorCustomizers(gracefulShutdown);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>9. é™æ€æ³¨å…¥</h1><p>ä¸ºé™æ€å±æ€§æ³¨å…¥å€¼, ä½¿ç”¨é€šè¿‡ XXXClass.xxx ä½¿ç”¨</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="91-setæ³¨å…¥">9.1. setæ³¨å…¥<a href="#91-setæ³¨å…¥" class="hash-link" aria-label="Direct link to 9.1. setæ³¨å…¥" title="Direct link to 9.1. setæ³¨å…¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component(value = &quot;MongoConfig&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;mongo.config&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MongoConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private static String chat_username;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Value(&quot;${mongo.config.username}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public void setChat_username(String chat_username) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> MongoConfig.chat_username = chat_username;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="92-postconstruct-æ³¨å…¥">9.2. @PostConstruct æ³¨å…¥<a href="#92-postconstruct-æ³¨å…¥" class="hash-link" aria-label="Direct link to 9.2. @PostConstruct æ³¨å…¥" title="Direct link to 9.2. @PostConstruct æ³¨å…¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ADUserUtils {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private  ADConfig adc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private  static ADConfig adc1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostConstruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.adc1 = adc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static List&lt;User&gt; getADUsers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adc1.readConf();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="93-é€šè¿‡-applicationcontext">9.3. é€šè¿‡ ApplicationContext<a href="#93-é€šè¿‡-applicationcontext" class="hash-link" aria-label="Direct link to 9.3. é€šè¿‡ ApplicationContext" title="Direct link to 9.3. é€šè¿‡ ApplicationContext">â€‹</a></h2><p>å¾—åˆ°é™æ€çš„ context, ç„¶åé€šè¿‡ getBean(xxx.class) ...</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@MapperScan({&quot;io.github.xiaoyureed.mockitomybatisplusdemo.mapper&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MockitoDemoApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static ConfigurableApplicationContext context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context = SpringApplication.run(MockitoDemoApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>10. ä½¿ç”¨starter</h1><p>servlet request wrapper</p><p><a href="https://blog.csdn.net/weixin_43935907/article/details/98476935" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_43935907/article/details/98476935</a>
<a href="https://www.cnblogs.com/JAYIT/p/10943155.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/JAYIT/p/10943155.html</a>
<a href="https://www.cnblogs.com/exmyth/p/10332328.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/exmyth/p/10332328.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="101-åŠ è½½è¿‡ç¨‹oråŸç†">10.1. åŠ è½½è¿‡ç¨‹oråŸç†<a href="#101-åŠ è½½è¿‡ç¨‹oråŸç†" class="hash-link" aria-label="Direct link to 10.1. åŠ è½½è¿‡ç¨‹oråŸç†" title="Direct link to 10.1. åŠ è½½è¿‡ç¨‹oråŸç†">â€‹</a></h2><p>@SpringBootApplicationåŒ…å«äº†@EnableAutoConfigurationï¼Œè¿™ä¸ªæ³¨è§£åˆåŒ…å«@Import(AutoConfigurationImportSelector.class)ã€‚</p><p>spring bootå¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨AutoConfigurationImportSelectorçš„å›è°ƒå‡½æ•°ï¼Œè®©å…¶è§£ææ‰€æœ‰åŒ…ä¸‹çš„&quot;META-INF/spring.factories&quot; (ä½äºé¡¹ç›®ç»“æ„çš„ <code>resources/META-INF/spring.factories</code> ä¸‹), å¹¶æŠŠkeyä¸º&quot;...EnableAutoConfiguration&quot;å¯¹åº”çš„valueé‡Œçš„ç±»éƒ½åŠ è½½ä¸ºBeanï¼Œè€Œé‚£äº›ç±»åŸºæœ¬éƒ½æ˜¯æ³¨è§£äº†@Configurationçš„é…ç½®ç±»ã€‚è¿™ä¾¿æ˜¯spring bootèƒ½è‡ªåŠ¨é…ç½®çš„åŸå› ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="102-è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£">10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£<a href="#102-è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£" class="hash-link" aria-label="Direct link to 10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£" title="Direct link to 10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£">â€‹</a></h2><p><a href="https://my.oschina.net/u/566591/blog/2250290" target="_blank" rel="noopener noreferrer">https://my.oschina.net/u/566591/blog/2250290</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration  è¡¨æ˜æ˜¯ä¸€ä¸ªé…ç½®ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class}) ä½¿ç”¨starterçš„æ—¶å€™æ’é™¤è‡ªåŠ¨é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnClass  å½“classpathä¸‹å‘ç°è¯¥ç±»çš„æƒ…å†µä¸‹è¿›è¡Œè‡ªåŠ¨é…ç½® (name, value ä»»é€‰å…¶ä¸€)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingClass æ²¡æœ‰è¿™ä¸ªç±»æ—¶åº”ç”¨æ ‡æ³¨çš„é…ç½®ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionOnMissingBean åœ¨springå®¹å™¨ä¸­æ²¡æ‰¾åˆ° bean æ—¶ (å¦‚æœä¸æŒ‡å®š, é»˜è®¤ æ–¹æ³•è¿”å›å€¼ç±»å‹/å½“å‰ç±»)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnBean  å½“å®¹å™¨ä¸­æœ‰æŒ‡å®šçš„Beançš„æ¡ä»¶ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é»˜è®¤æ˜¯æ£€æŸ¥beançš„ç±»å‹, çœ‹çœ‹å®¹å™¨ä¸­æ˜¯å¦æœ‰åŒç±»å‹ bean å­˜åœ¨, ä¸çœ‹ bean name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¼€å¯æŒ‰ç…§ bean name æ£€æŸ¥: å±æ€§ name = {xxx&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># @ConditionalOnBean(name = {&quot;hah&quot;, &quot;hoo&quot;}): &quot;and&quot; å…³ç³», æœ‰ hah, ä¸”æœ‰ hoo, return true. ä»»ä½•ä¸€ä¸ªç¼ºå¤±éƒ½return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># @ConditionalOnMissingBean(name = {&quot;hah&quot;, &quot;hoo&quot;}): &quot;and &quot; å…³ç³», æ²¡hah ä¸” æ²¡ hoo, return true. ä»»ä½•ä¸€ä¸ªå‡ºç°, return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties(XxxProperties.class)  ä½¿ @ConfigurationProperties(prefix=&quot;aaa.bbb&quot;) æ³¨è§£ç”Ÿæ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnProperty:æŒ‡å®šçš„å±æ€§æœ‰æŒ‡å®šçš„å€¼æ—¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ConditionalOnProperty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name/value (value ç”¨äºæŒ‡å®šæŸé…ç½®ä¸€å®šè¦å‡ºç°), havingValue æŒ‡å®šé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§, ä¸º nullè¿”å› false, ä¸åŒ¹é…è¿”å›false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchIfMissing é…ç½®é¡¹å¦‚æœç¼ºå¤±, æ˜¯å¦åŒ¹é…, é»˜è®¤ false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä¼˜å…ˆçº§æ¯” onBean, onClass è¿™äº›éƒ½é«˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;auto&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnSingleCandidate: (å’Œ @ConditionalOnBean ç±»ä¼¼)å½“æŒ‡å®šçš„Beanåœ¨å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªï¼Œæˆ–è€…åœ¨æœ‰å¤šä¸ªBeançš„æƒ…å†µä¸‹ï¼Œç”¨æ¥æŒ‡å®šé¦–é€‰çš„Bean </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnExpression:åŸºäºSpELè¡¨è¾¾å¼ä½œä¸ºåˆ¤æ–­æ¡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnResource(resources = {&quot;/xxx.yml&quot;}):ç±»è·¯å¾„ä¸‹æ˜¯å¦æœ‰æŒ‡å®šçš„èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnJava(javaversion.eight):åŸºäºJVM/Javaç‰ˆæœ¬ä½œä¸ºåˆ¤æ–­æ¡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnJndi:åœ¨JNDIå­˜åœ¨çš„æ¡ä»¶ä¸‹æŸ¥æ‰¾æŒ‡å®šçš„ä½ç½®, å¿…é¡»å­˜åœ¨ä¸€ä¸ª.å¦åˆ™,è¿”å›ä¸åŒ¹é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnNotWebApplication:å½“å‰é¡¹ç›®ä¸æ˜¯Webé¡¹ç›®çš„æ¡ä»¶ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnWebApplication:å½“å‰é¡¹ç›®æ˜¯Webé¡¹ç›®çš„æ¡ä»¶ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureAfter(A.class) é…ç½®ç±»å°†åœ¨ A.class ä¹‹ååŠ è½½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureBefore   ... ä¹‹å‰åŠ è½½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigureOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="103-è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹">10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹<a href="#103-è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹" class="hash-link" aria-label="Direct link to 10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹" title="Direct link to 10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1031-spring-åŠ¨æ€ä»£ç†">10.3.1. spring åŠ¨æ€ä»£ç†<a href="#1031-spring-åŠ¨æ€ä»£ç†" class="hash-link" aria-label="Direct link to 10.3.1. spring åŠ¨æ€ä»£ç†" title="Direct link to 10.3.1. spring åŠ¨æ€ä»£ç†">â€‹</a></h3><p><a href="https://lolico.me/2020/05/03/SpringBoot2-AOP-uses-cglib-proxy-by-default/" target="_blank" rel="noopener noreferrer">https://lolico.me/2020/05/03/SpringBoot2-AOP-uses-cglib-proxy-by-default/</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//SpringBoot1.5.xä¸­çš„è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¼šå‘ç°é»˜è®¤æ˜¯ä½¿ç”¨jdkåŠ¨æ€ä»£ç†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨SpringBoot2.xä¸­æ”¹ä¸ºé»˜è®¤ä½¿ç”¨Cglibäº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;auto&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AopAutoConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConditionalOnClass(Advice.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static class AspectJAutoProxyingConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @EnableAspectJAutoProxy(proxyTargetClass = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;proxy-target-class&quot;, havingValue = &quot;false&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                matchIfMissing = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        static class jdkDynamicAutoProxyConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Configuration(proxyBeanMethods = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @EnableAspectJAutoProxy(proxyTargetClass = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;proxy-target-class&quot;, havingValue = &quot;true&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                matchIfMissing = true) // èƒ½å¤Ÿçœ‹å‡ºAOPé»˜è®¤ä½¿ç”¨Cglibä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        static class CglibAutoProxyConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="104-conditional">10.4. @Conditional<a href="#104-conditional" class="hash-link" aria-label="Direct link to 10.4. @Conditional" title="Direct link to 10.4. @Conditional">â€‹</a></h2><p>è‡ªåŠ¨é…ç½®ç›¸å…³æ³¨è§£åº•å±‚éƒ½æ˜¯é€šè¿‡ @Conditional(OnClassCondition.class) å®ç°çš„</p><p>é€šè¿‡å®ƒ, å¯ä»¥è‡ªå·±å®šåˆ¶æ¡ä»¶</p><p><a href="https://my.oschina.net/u/566591/blog/2250290" target="_blank" rel="noopener noreferrer">https://my.oschina.net/u/566591/blog/2250290</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="105-å°è£…ç»„åˆæ¡ä»¶">10.5. å°è£…ç»„åˆæ¡ä»¶<a href="#105-å°è£…ç»„åˆæ¡ä»¶" class="hash-link" aria-label="Direct link to 10.5. å°è£…ç»„åˆæ¡ä»¶" title="Direct link to 10.5. å°è£…ç»„åˆæ¡ä»¶">â€‹</a></h2><p>ç»§æ‰¿ AllNestedConditions å°è£…å¤šæ¡ä»¶ (and å…³ç³»)</p><p>AnyNestedCondition (or å…³ç³»)</p><p>NoneNestedConditions (none å…³ç³»)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="106-åˆ›å»ºè‡ªå·±çš„-starter">10.6. åˆ›å»ºè‡ªå·±çš„ starter<a href="#106-åˆ›å»ºè‡ªå·±çš„-starter" class="hash-link" aria-label="Direct link to 10.6. åˆ›å»ºè‡ªå·±çš„ starter" title="Direct link to 10.6. åˆ›å»ºè‡ªå·±çš„ starter">â€‹</a></h2><p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-custom-starter" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://github.com/SpringForAll/spring-boot-starter-swagger" target="_blank" rel="noopener noreferrer">spring-boot-swagger ç¤ºä¾‹</a></p><ul><li><p>åˆ›å»ºä¸€ä¸ªstarter é¡¹ç›®</p><p>  å‘½åè§„åˆ™: spring boot å®˜æ–¹ starter å‘½åä¸º &quot;spring-boot-starter-xxx&quot;, è‡ªå®šä¹‰çš„starter å‘½å &quot;xxx-spring-boot-starter&quot;;</p><p>  å¼•å…¥ <code>spring-boot-configuration-processor</code> (ç¼–è¯‘æ—¶ç”Ÿæˆ spring-configuration-metadata.json ï¼Œåœ¨IDEä¸­ç¼–è¾‘é…ç½®æ–‡ä»¶æ—¶ï¼Œä¼šå‡ºç°æç¤º), æ ‡æ³¨ä¸º optional: true é¿å…ä¾èµ–ä¼ é€’</p><p>  å¼•å…¥ <code>spring boot starter</code> (ç›¸å…³æ³¨è§£éœ€è¦), æ ‡æ³¨ä¸º optional true,  idea ä¸­ spring boot app åˆ›å»ºæ—¶è‡ªåŠ¨å¯¼å…¥äº†</p><p>  ç»§æ‰¿ <code>spring-boot-starter-parent</code>, <a href="https://stackoverflow.com/questions/21317006/spring-boot-parent-pom-when-you-already-have-a-parent-pom/21318359#21318359" target="_blank" rel="noopener noreferrer">å¦‚æœæƒ³ä¸é€šè¿‡ç»§æ‰¿æ–¹å¼ä½¿ç”¨, å¯ä»¥ dependencyManagement <code>spring boot dependencies</code>, å‚è€ƒ</a></p><p>  å¦‚æœæ˜¯ç”Ÿæˆçš„ spring boot é¡¹ç›®, åˆ é™¤ å¯åŠ¨ç±», ç„¶åæ›¿æ¢ spring boot maven æ’ä»¶ ä¸º <code>maven-compile-plugin</code> (å› ä¸ºæ²¡æœ‰å¯åŠ¨ç±», repackage ä¼šæŠ¥é”™), è®¾ç½® properties ä¸‹ maven.compiler.source, maven.compiler.target, java.version</p></li><li><p>åˆ›å»ºä¸€ä¸ª @ConfigurationProperties ç±»ç”¨äºä¿å­˜ä½ çš„é…ç½®ä¿¡æ¯, åœ¨ @EnableConfigurationProperties(...) ç±»ä¸ŠæŒ‡å®š, (æˆ–è€…æ ‡æ³¨ component ç„¶åé…ç½®componentScan æˆ–è€…ç›´æ¥ @configurationPropertiesScan)</p><p>  ï¼ˆå¦‚æœä½ çš„é¡¹ç›®ä¸ä½¿ç”¨é…ç½®ä¿¡æ¯åˆ™å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œä¸è¿‡è¿™ç§æƒ…å†µéå¸¸å°‘è§ï¼‰</p></li><li><p>åˆ›å»ºä¸€ä¸ªAutoConfigurationï¼Œå¼•ç”¨å®šä¹‰å¥½çš„é…ç½®ä¿¡æ¯ï¼›åœ¨AutoConfigurationä¸­å®ç°æ‰€æœ‰starteråº”è¯¥å®Œæˆçš„æ“ä½œï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªç±»åŠ å…¥classpath:/META-INF/spring.factoriesé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå£°æ˜</p><p>  è‡ªåŠ¨é…ç½®ç±»ä¸åº”å¯ç”¨ç»„ä»¶æ‰«æä»¥æŸ¥æ‰¾å…¶ä»–ç»„ä»¶ (å³ è‹¥ç”Ÿæˆçš„æ˜¯spring boot éª¨æ¶, åº”å»æ‰å¯åŠ¨ç±»)ã€‚åº”è¯¥ä½¿ç”¨ @import æ¥å¯¼å…¥å…¶ä»–é…ç½®ç±»</p></li><li><p>æ‰“åŒ…å‘å¸ƒ</p><p>  å¦‚æœ starter å°±æ˜¯æœ¬åœ°è‡ªå·±ä½¿ç”¨, å¯ä»¥ä¸æ‰“åŒ…ä¸å‘å¸ƒ, ç›´æ¥åœ¨å¦å¤–çš„é¡¹ç›®ä¸­å¼•å…¥</p></li></ul><p>spring.factories ç¤ºä¾‹:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.boot.autoconfigure.EnableAutoConfiguration = \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.mycorp.libx.autoconfigure.LibXAutoConfiguration,\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.mycorp.libx.autoconfigure.LibXWebAutoConfiguration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="107-åçˆ¬è™«-starter">10.7. åçˆ¬è™« starter<a href="#107-åçˆ¬è™«-starter" class="hash-link" aria-label="Direct link to 10.7. åçˆ¬è™« starter" title="Direct link to 10.7. åçˆ¬è™« starter">â€‹</a></h2><p><a href="https://www.cnblogs.com/zouhao/p/12175653.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zouhao/p/12175653.html</a> </p><p>TODO</p><h1>11. ç›‘æ§ and å®‰å…¨</h1><p>å¯†ç åŠ å¯† Argon2</p><p>Spring Vaultï¼Œå®ƒä¸ºHashiCorp Vaultæ·»åŠ æŠ½è±¡ -&gt; å¯†ç å­˜å‚¨</p><p>OWASP ZAP æ¸—é€æµ‹è¯•æŠ¥å‘Š</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="111-spring-boot-actuator-ç›‘æ§">11.1. spring-boot-actuator ç›‘æ§<a href="#111-spring-boot-actuator-ç›‘æ§" class="hash-link" aria-label="Direct link to 11.1. spring-boot-actuator ç›‘æ§" title="Direct link to 11.1. spring-boot-actuator ç›‘æ§">â€‹</a></h2><p><a href="https://www.cnblogs.com/zwqh/p/11851300.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zwqh/p/11851300.html</a>
<a href="https://www.jianshu.com/p/8bfac9289c7e" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/8bfac9289c7e</a></p><p>spring boot çš„ sub project, æä¾›äº§å“çº§åˆ«çš„ç›‘æ§</p><p>spring cloud ä¸­, refresh çš„ post ç«¯ç‚¹è¢« actuator æ¥ç®¡, é…ç½® <code>management.endpoints.web.exposure.include=health,info</code> (é»˜è®¤) éœ€è¦æ·»åŠ  &#x27;refresh&#x27;, æœ€ç»ˆéœ€è¦ <code>curl -d{} http://xxx:xxx/actuator/refresh</code></p><p><a href="https://github.com/Netflix/Hystrix/issues/1566" target="_blank" rel="noopener noreferrer">hystrix.stream ä¹Ÿè¢«æ¥ç®¡</a>, é…ç½®æ·»åŠ  &#x27;hystrix.stream&#x27;, ç›‘æ§æµä¸º <code>http://xxx:xxx/actuator/hystrix.stream</code></p><p><a href="https://www.jianshu.com/p/d5943e303a1f" target="_blank" rel="noopener noreferrer">actuator ç¿»è¯‘</a>
<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/html/production-ready-features.html#production-ready" target="_blank" rel="noopener noreferrer">actuator å®˜æ–¹æ–‡æ¡£</a></p><p>è‡ªå·±å†™ç›‘æ§, å¯ä»¥:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ConfigurableApplicationContext context = SpringApplication.run(PaymentServiceApp.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigurableEnvironment        env     = context.getEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æˆ–è€… ç›´æ¥ @autowired Environment env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>uiå±•ç¤º: <a href="https://github.com/codecentric/spring-boot-admin" target="_blank" rel="noopener noreferrer">https://github.com/codecentric/spring-boot-admin</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="112-spring-boot-admin-ç›‘æ§ç•Œé¢">11.2. spring boot admin ç›‘æ§ç•Œé¢<a href="#112-spring-boot-admin-ç›‘æ§ç•Œé¢" class="hash-link" aria-label="Direct link to 11.2. spring boot admin ç›‘æ§ç•Œé¢" title="Direct link to 11.2. spring boot admin ç›‘æ§ç•Œé¢">â€‹</a></h2><p><a href="https://www.jianshu.com/p/483adafc6b3a" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/483adafc6b3a</a> //todo</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="113-spring-boot-starter-security">11.3. spring-boot-starter-security<a href="#113-spring-boot-starter-security" class="hash-link" aria-label="Direct link to 11.3. spring-boot-starter-security" title="Direct link to 11.3. spring-boot-starter-security">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1131-securityç»„ä»¶ä»‹ç»">11.3.1. securityç»„ä»¶ä»‹ç»<a href="#1131-securityç»„ä»¶ä»‹ç»" class="hash-link" aria-label="Direct link to 11.3.1. securityç»„ä»¶ä»‹ç»" title="Direct link to 11.3.1. securityç»„ä»¶ä»‹ç»">â€‹</a></h3><p>[ref]<!-- -->](<a href="https://www.cnblogs.com/demingblog/p/10874753.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/demingblog/p/10874753.html</a>)</p><p>spring security æ˜¯å®‰å…¨è®¤è¯æ¡†æ¶, åŸºäº Servlet filter, æ ¸å¿ƒå°±æ˜¯ä¸€ç»„è¿‡æ»¤å™¨é“¾; å¯åœ¨ Web è¯·æ±‚çº§å’Œæ–¹æ³•è°ƒç”¨çº§å¤„ç†èº«ä»½ç¡®è®¤å’Œæˆæƒ </p><p>å¦‚æœæ˜¯ æ™®é€šçš„ spring é¡¹ç›®, ä½¿ç”¨ shiro æ›´ç®€å•</p><p>================================= æ ¸å¿ƒç»„ä»¶</p><p>SecurityContext - ç”¨æˆ· auth é€šè¿‡å, authentication ä¿¡æ¯å­˜å‚¨åœ¨è¿™é‡Œ, å¯ä»¥åœ¨ä»»æ„åœ°æ–¹ä½¿ç”¨ <code>SecurityContextHolder.getContext().set/getAuthentication</code></p><p>SecurityContextHolder - åœ¨ä»»æ„åœ°æ–¹å¯ä»¥è·å– SecurityContext </p><p>Authentication - è®¤è¯ä¿¡æ¯å¯¹è±¡, è¡¨ç¤ºè®¤è¯åçš„ç”¨æˆ·</p><p>UserDetails - è®¤è¯ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯</p><p>UserDetailsService - å¯ä»¥ç”¨æ¥è·å–UserDetailsã€‚æˆ‘ä»¬ä¼šè‡ªå®šä¹‰ä¸€ä¸ªCustomUserDetailsServiceæ¥å®ç°UserDetailsServiceæ¥å£, é€šè¿‡ username æŸ¥è¯¢åˆ° userDetails, å¦‚æœæ²¡æŸ¥åˆ° , <code>UsernameNotFoundException</code></p><p>AuthenticationManager - ä½œç”¨å°±æ˜¯æ ¡éªŒAuthentication, æ ¡éªŒå¤±è´¥æŠ›å‡º <code>BadCredentialsException</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1132-åŸºæœ¬ä½¿ç”¨-å’Œ-é…ç½®ç”¨æˆ·åå¯†ç ">11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç <a href="#1132-åŸºæœ¬ä½¿ç”¨-å’Œ-é…ç½®ç”¨æˆ·åå¯†ç " class="hash-link" aria-label="Direct link to 11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç " title="Direct link to 11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç ">â€‹</a></h3><p>é…åˆ starter  (spring-boot-starter-security), å¯ä»¥é›¶é…ç½®ä½¿ç”¨. å¼•å…¥åä¾èµ–</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-security</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.security</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-security-test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚ä¸‹é…ç½®å³å¯</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">application</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spring</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">security</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">security</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœä¸é…ç½®, é»˜è®¤ä¸º user/æ§åˆ¶å°æ—¥å¿—ä¸­çœ‹åˆ°é»˜è®¤å¯†ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#   å‰ç«¯è°ƒç”¨, éœ€è¦ basic auth è®¤è¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ”¯æŒä¸¤ç§éªŒè¯æ–¹å¼:</p><ul><li><p>å¯ä»¥é€šè¿‡ form è¡¨å•æ¥è®¤è¯ (é»˜è®¤)</p><p>  é€‚åˆé¡µé¢éªŒè¯</p></li><li><p>å¯ä»¥é€šè¿‡ HttpBasic æ¥è®¤è¯ (basic auth)</p><p>  é€‚åˆ api æ¥å£çš„éªŒè¯, å½“ç„¶ä¹Ÿé€‚åˆé¡µé¢</p></li></ul><p>ç”¨æˆ·åå¯†ç ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œ:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableWebSecurity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebSecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public UserDetailsService userDetailsService() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserDetails user =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             User.withDefaultPasswordEncoder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .username(&quot;user&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .password(&quot;password&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .roles(&quot;USER&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new InMemoryUserDetailsManager(user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1133-ç¦ç”¨åŸºæœ¬è®¤è¯">11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯<a href="#1133-ç¦ç”¨åŸºæœ¬è®¤è¯" class="hash-link" aria-label="Direct link to 11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯" title="Direct link to 11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯">â€‹</a></h3><p>å¦‚æœæ—¢æƒ³ä½¿ç”¨securityåˆä¸æƒ³æ¯æ¬¡è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œå¯ä»¥ç›´æ¥åœ¨Applicationæ–‡ä»¶ä¸­ç¦ç”¨è‡ªåŠ¨é…ç½® (æ–¹æ³• 1)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoConfiguration(exclude = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ–è€… åœ¨ä»£ç ä¸­é…ç½® (æ–¹æ³• 2)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableWebSecurity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebSecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    æ˜¯å› ä¸ºè¦†ç›–äº†çˆ¶ç±»æ–¹æ³•, çˆ¶ç±»ä¸­çš„æ–¹æ³•å†…å®¹å¦‚ä¸‹:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        http.authorizeRequests((requests) -&gt; requests.anyRequest().authenticated()); // æ‰€æœ‰ è¯·æ±‚éƒ½éœ€è¦è®¤è¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        http.formLogin(); // æ”¯æŒè¡¨å•è®¤è¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        http.httpBasic(); // æ”¯æŒ basic auth è®¤è¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void configure(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è¿™é‡Œä¸ºç©º, è¡¨ç¤ºæ— éœ€ ä»»ä½•è®¤è¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        super.configure(http);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1134-é…ç½®ä¸­-websecurity-å’Œ-httpsecurity-åŒºåˆ«">11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«<a href="#1134-é…ç½®ä¸­-websecurity-å’Œ-httpsecurity-åŒºåˆ«" class="hash-link" aria-label="Direct link to 11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«" title="Direct link to 11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å½±å“å…¨å±€å®‰å…¨æ€§çš„é…ç½®ï¼ˆå¿½ç•¥èµ„æºï¼Œè®¾ç½®è°ƒè¯•æ¨¡å¼ï¼Œé€šè¿‡å®ç°è‡ªå®šä¹‰é˜²ç«å¢™å®šä¹‰æ‹’ç»è¯·æ±‚ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void configure(WebSecurity web) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .ignoring()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/resources/**&quot;) // å¿½ç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/publics/**&quot;); // å¿½ç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//èµ„æºçº§åˆ« é…ç½®åŸºäºWebçš„å®‰å…¨æ€§, ç²’åº¦æ›´ç»†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void configure(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .authorizeRequests()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/&quot;, &quot;/home&quot;).permitAll()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .antMatchers(&quot;/publics/**&quot;).hasRole(&quot;USER&quot;) // no effect, å› ä¸º  WebSecurity ä¸­é…ç½®äº† å¿½ç•¥ publics/** ä¸‹çš„éªŒè¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .anyRequest().authenticated()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .and()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .formLogin().loginPage(&quot;/login&quot;).permitAll()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .and()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .logout().permitAll();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>================================ å®ç°æ–¹æ³•çº§åˆ«çš„æƒé™æ§åˆ¶</p><p><code>@EnableGlobalMethodSecurity(prePostEnabled =true)</code> ä½¿ç”¨è¡¨è¾¾å¼å®ç°æ–¹æ³•çº§åˆ«çš„å®‰å…¨æ€§   ,  4ä¸ªæ³¨è§£å¯ç”¨</p><ul><li><p>@PreAuthorize åœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰,åŸºäºè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœæ¥é™åˆ¶å¯¹æ–¹æ³•çš„è®¿é—®</p></li><li><p>@PostAuthorize å…è®¸æ–¹æ³•è°ƒç”¨,ä½†æ˜¯å¦‚æœè¡¨è¾¾å¼è®¡ç®—ç»“æœä¸ºfalse,å°†æŠ›å‡ºä¸€ä¸ªå®‰å…¨æ€§å¼‚å¸¸</p></li><li><p>@PostFilter å…è®¸æ–¹æ³•è°ƒç”¨,ä½†å¿…é¡»æŒ‰ç…§è¡¨è¾¾å¼æ¥è¿‡æ»¤æ–¹æ³•çš„ç»“æœ</p></li><li><p>@PreFilter å…è®¸æ–¹æ³•è°ƒç”¨,ä½†å¿…é¡»åœ¨è¿›å…¥æ–¹æ³•ä¹‹å‰è¿‡æ»¤è¾“å…¥å€¼</p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//è¡¨ç¤ºå¦‚æœç”¨æˆ·å…·æœ‰adminè§’è‰²ï¼Œå°±èƒ½è®¿é—®listAllUsersæ–¹æ³•ï¼Œå¦‚æœæ–¹æ³•å‰ä¸åŠ @preAuthorizeæ³¨è§£ï¼Œæ„å‘³ç€æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®listAllUsers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PreAuthorize(&quot;hasRole(â€˜adminâ€˜)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(value = &quot;/user/&quot;, method = RequestMethod.GET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ResponseBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">publicList listAllUsers() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¦â€¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–è¿˜æœ‰ :</p><p>@EnableGlobalMethodSecurity(securedEnabled=true) å¼€å¯@Secured æ³¨è§£è¿‡æ»¤æƒé™</p><p>@EnableGlobalMethodSecurity(jsr250Enabled=true)å¼€å¯@RolesAllowed æ³¨è§£è¿‡æ»¤æƒé™</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1135-é…ç½®è·¨åŸŸ">11.3.5. é…ç½®è·¨åŸŸ<a href="#1135-é…ç½®è·¨åŸŸ" class="hash-link" aria-label="Direct link to 11.3.5. é…ç½®è·¨åŸŸ" title="Direct link to 11.3.5. é…ç½®è·¨åŸŸ">â€‹</a></h3><p><a href="https://lolico.me/2020/04/26/Spring-Security-CORS/" target="_blank" rel="noopener noreferrer">https://lolico.me/2020/04/26/Spring-Security-CORS/</a>
TODO</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="114-oauth2">11.4. oauth2<a href="#114-oauth2" class="hash-link" aria-label="Direct link to 11.4. oauth2" title="Direct link to 11.4. oauth2">â€‹</a></h2><p>spring security oauth2</p><p>check outline-about-authentication-oauth2.md</p><h1>12. æ—¥å¿—</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="121-log4j2-marker-å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶">12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶<a href="#121-log4j2-marker-å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶" class="hash-link" aria-label="Direct link to 12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶" title="Direct link to 12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶">â€‹</a></h2><p><a href="https://www.jianshu.com/p/1ff824bc997a?utm_campaign" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/1ff824bc997a?utm_campaign</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="122-logback">12.2. logback<a href="#122-logback" class="hash-link" aria-label="Direct link to 12.2. logback" title="Direct link to 12.2. logback">â€‹</a></h2><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--åº”ç”¨åç§°--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">APPLICATION_NAME</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">roncoo-pay-app-notify</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ–‡ä»¶è¾“å‡ºæ ¼å¼ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">PATTERN</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">%-12(%d{yyyy-MM-dd HH:mm:ss.SSS}) |-%-5level [%thread] %c [%L] -| %msg%n</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ–‡ä»¶è·¯å¾„ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">FILE_PATH</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/home/roncoo/opensource/pay/logs</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ§åˆ¶å° --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">CONSOLE</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ch.qos.logback.core.ConsoleAppender</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">encoder</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${PATTERN}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">encoder</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">appender</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--æ—¥å¿—æ–‡ä»¶ç­–ç•¥--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">LOGGER_FILE</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ch.qos.logback.core.rolling.RollingFileAppender</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">file</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${FILE_PATH}/${APPLICATION_NAME}/${APPLICATION_NAME}.log</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">file</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">rollingPolicy</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ch.qos.logback.core.rolling.TimeBasedRollingPolicy</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">fileNamePattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${FILE_PATH}/${APPLICATION_NAME}/${APPLICATION_NAME}.%d{yyyy-MM-dd}.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">fileNamePattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">MaxHistory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">100</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">MaxHistory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">rollingPolicy</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">layout</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ch.qos.logback.classic.PatternLayout</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${PATTERN}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">layout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">appender</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">logger</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.roncoo.pay</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">level</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">debug</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- LOG &quot;com.baeldung*&quot; at TRACE level --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">logger</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.baeldung</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">level</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">trace</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">additivity</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">false</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender-ref</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">RollingFile</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender-ref</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Console</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">logger</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ‰€æœ‰æ—¥å¿—éƒ½æ‰“å° info çº§åˆ« --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">root</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">level</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">info</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender-ref</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">CONSOLE</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender-ref</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">LOGGER_FILE</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">root</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>13. æ•°æ®å±‚</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="131-canal-è®¢é˜…">13.1. canal è®¢é˜…<a href="#131-canal-è®¢é˜…" class="hash-link" aria-label="Direct link to 13.1. canal è®¢é˜…" title="Direct link to 13.1. canal è®¢é˜…">â€‹</a></h2><p><a href="https://github.com/zendesk/maxwell" target="_blank" rel="noopener noreferrer">https://github.com/zendesk/maxwell</a> ç±»ä¼¼</p><p><a href="https://github.com/alibaba/otter" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/otter</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="132-mybatis-è‡ªåŠ¨å»ºè¡¨æ’ä»¶">13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶<a href="#132-mybatis-è‡ªåŠ¨å»ºè¡¨æ’ä»¶" class="hash-link" aria-label="Direct link to 13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶" title="Direct link to 13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶">â€‹</a></h2><p><a href="https://github.com/zyf970617/mybatis-auto-create-table" target="_blank" rel="noopener noreferrer">https://github.com/zyf970617/mybatis-auto-create-table</a></p><p><a href="https://blog.csdn.net/yuru974882032/article/details/106749299" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/yuru974882032/article/details/106749299</a></p><p><a href="https://gitee.com/sunchenbin/mybatis-enhance" target="_blank" rel="noopener noreferrer">https://gitee.com/sunchenbin/mybatis-enhance</a></p><p><a href="https://gitee.com/baomidou/mybatis-mate-examples?_from=gitee_search" target="_blank" rel="noopener noreferrer">https://gitee.com/baomidou/mybatis-mate-examples?_from=gitee_search</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="133-mybatis-crud-å¢å¼ºæ’ä»¶">13.3. mybatis crud å¢å¼ºæ’ä»¶<a href="#133-mybatis-crud-å¢å¼ºæ’ä»¶" class="hash-link" aria-label="Direct link to 13.3. mybatis crud å¢å¼ºæ’ä»¶" title="Direct link to 13.3. mybatis crud å¢å¼ºæ’ä»¶">â€‹</a></h2><p>mybatis plus</p><p>tk.mybatis</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="134-æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶">13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶<a href="#134-æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶" class="hash-link" aria-label="Direct link to 13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶" title="Direct link to 13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶">â€‹</a></h2><p>ä¸¤è€…å·®åˆ«ä¸å¤§ï¼Œå› åŠŸèƒ½å¤šï¼Œä¸ªäººâ€œç¨å¾®â€å€¾å‘ Liquibase; ä¸€èˆ¬æˆ‘çš„å€¾å‘æ˜¯å°é¡¹ç›®ï¼Œæ•´ä½“å˜åŠ¨ä¸å¤§çš„ç”¨Flywayï¼Œè€Œå¤§åº”ç”¨å’Œä¼ä¸šåº”ç”¨ç”¨Liquibaseæ›´åˆé€‚</p><p><a href="https://github.com/bytebase/bytebase" target="_blank" rel="noopener noreferrer">https://github.com/bytebase/bytebase</a> æ–°çš„æ›´ä¸ºå…¨é¢çš„æ•°æ®åº“ schema ç®¡ç†å·¥å…·</p><blockquote><p><a href="https://fastzhong.com/posts/db-migration/" target="_blank" rel="noopener noreferrer">https://fastzhong.com/posts/db-migration/</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1341-liquibase">13.4.1. liquibase<a href="#1341-liquibase" class="hash-link" aria-label="Direct link to 13.4.1. liquibase" title="Direct link to 13.4.1. liquibase">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1342-flyway">13.4.2. Flyway<a href="#1342-flyway" class="hash-link" aria-label="Direct link to 13.4.2. Flyway" title="Direct link to 13.4.2. Flyway">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="135-æ•°æ®åº“-url-å’Œé©±åŠ¨">13.5. æ•°æ®åº“ url å’Œé©±åŠ¨<a href="#135-æ•°æ®åº“-url-å’Œé©±åŠ¨" class="hash-link" aria-label="Direct link to 13.5. æ•°æ®åº“ url å’Œé©±åŠ¨" title="Direct link to 13.5. æ•°æ®åº“ url å’Œé©±åŠ¨">â€‹</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MySQL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jdbc:mysql://122.191.199.51:60000/js_phaseii_db?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jdbc:mysql://localhost:3306/ry-cloud?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oracle:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.ä½¿ç”¨service_name,é…ç½®æ–¹å¼: jdbc:oracle:thin:@//:1521/helowin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.ä½¿ç”¨SIDï¼Œé…ç½®æ–¹å¼ï¼š         jdbc:oracle:thin:@//:1521/helowin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.ä½¿ç”¨SIDï¼Œé…ç½®æ–¹å¼ï¼š         jdbc:oracle:thin:@:1521:helowin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="136-graphqlé›†æˆ">13.6. graphqlé›†æˆ<a href="#136-graphqlé›†æˆ" class="hash-link" aria-label="Direct link to 13.6. graphqlé›†æˆ" title="Direct link to 13.6. graphqlé›†æˆ">â€‹</a></h2><p><a href="https://www.awaimai.com/2876.html" target="_blank" rel="noopener noreferrer">https://www.awaimai.com/2876.html</a></p><p><a href="https://juejin.cn/post/6982083422567006245" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6982083422567006245</a> å…¥é—¨
<a href="https://graphql.cn/learn/queries/" target="_blank" rel="noopener noreferrer">https://graphql.cn/learn/queries/</a> å®˜ç½‘æ–‡æ¡£</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="137-å¯åŠ¨æ‰§è¡Œ-sql">13.7. å¯åŠ¨æ‰§è¡Œ SQL<a href="#137-å¯åŠ¨æ‰§è¡Œ-sql" class="hash-link" aria-label="Direct link to 13.7. å¯åŠ¨æ‰§è¡Œ SQL" title="Direct link to 13.7. å¯åŠ¨æ‰§è¡Œ SQL">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1371-sql-åˆ†éš”ç¬¦çš„å‘">13.7.1. SQL åˆ†éš”ç¬¦çš„å‘<a href="#1371-sql-åˆ†éš”ç¬¦çš„å‘" class="hash-link" aria-label="Direct link to 13.7.1. SQL åˆ†éš”ç¬¦çš„å‘" title="Direct link to 13.7.1. SQL åˆ†éš”ç¬¦çš„å‘">â€‹</a></h3><p>é»˜è®¤åˆ†éš”ç¬¦æ˜¯ åˆ†å·, è‹¥SQL ä¸­æœ‰æ‰§è¡Œè¿‡ç¨‹/å‡½æ•°, éœ€è¦ <code>spring.datasource.separator=|</code> </p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">drop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">exists</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">getChildrenProductName</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">getChildrenProductName</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orgid </span><span class="token keyword" style="color:#00009f">varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">BEGIN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DECLARE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">oTemp</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DECLARE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">oTempChild</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DECLARE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">oTempName</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DECLARE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">oTempChildName</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DECLARE</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> oTemp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CAST</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orgid </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CHAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> oTempChild </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CAST</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orgid </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CHAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> oTempName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> oTempChildName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHILE</span><span class="token plain"> oTempChild </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> oTempName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oTempName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">oTempChildName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> oTemp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CONCAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oTemp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;,&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">oTempChild</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GROUP_CONCAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">product_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">partnum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">into</span><span class="token plain"> oTempChildName </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> product p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> bom b </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PartID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PartID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> FIND_IN_SET</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ParentPartID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">oTempChild</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GROUP_CONCAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PartID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> oTempChild </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> product p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> bom b </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PartID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PartID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> FIND_IN_SET</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ParentPartID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">oTempChild</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">END</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHILE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">RETURN</span><span class="token plain"> oTempName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">END</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1372-spring-datasource-è‡ªå¸¦">13.7.2. spring datasource è‡ªå¸¦<a href="#1372-spring-datasource-è‡ªå¸¦" class="hash-link" aria-label="Direct link to 13.7.2. spring datasource è‡ªå¸¦" title="Direct link to 13.7.2. spring datasource è‡ªå¸¦">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   æ•°æ®æºåŸºæœ¬é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/mybatis</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">useUnicode=true</span><span class="token important">&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.alibaba.druid.pool.DruidDataSource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   æ•°æ®æºå…¶ä»–é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">initialSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">minIdle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxActive</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxWait</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">timeBetweenEvictionRunsMillis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">minEvictableIdleTimeMillis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">validationQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SELECT 1 FROM DUAL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testWhileIdle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testOnBorrow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">testOnReturn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">poolPreparedStatements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">wall</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">log4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">useGlobalDataSourceStat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">connectionProperties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">schema</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">sql/department.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">sql/employee.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">initialization-mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALWAYS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1373-ä½¿ç”¨-jpa">13.7.3. ä½¿ç”¨ jpa<a href="#1373-ä½¿ç”¨-jpa" class="hash-link" aria-label="Direct link to 13.7.3. ä½¿ç”¨ jpa" title="Direct link to 13.7.3. ä½¿ç”¨ jpa">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="13731-springboot-æ¥å…¥-jpa">13.7.3.1. springboot æ¥å…¥ jpa<a href="#13731-springboot-æ¥å…¥-jpa" class="hash-link" aria-label="Direct link to 13.7.3.1. springboot æ¥å…¥ jpa" title="Direct link to 13.7.3.1. springboot æ¥å…¥ jpa">â€‹</a></h4><p>1ã€SpringBootæ ¹æ®è„šæœ¬åˆå§‹åŒ–</p><p>ç»“æ„åˆå§‹åŒ–è„šæœ¬æ–‡ä»¶ç”±spring.datasource.schemaå±æ€§æŒ‡å®šï¼Œæ•°æ®åˆå§‹åŒ–è„šæœ¬ç”±æ–‡ä»¶spring.datasource.dataå±æ€§æŒ‡å®šã€‚</p><p>è¿™ä¸¤ä¸ªè„šæœ¬æ˜¯å¦æ‰§è¡Œçš„å¼€å…³ç”±spring.datasource.initialization-modeå†³å®šï¼šalways-ä¸€å®šæ‰§è¡Œï¼Œembedded-åªå¯¹å†…å­˜æ•°æ®åº“æ‰§è¡Œ(é»˜è®¤)ï¼Œnever-ä¸æ‰§è¡Œã€‚</p><p>2ã€JPAæ ¹æ®ç±»ç»“æ„åˆå§‹åŒ–</p><p>ã€€ã€€@Entityæ³¨è§£çš„ç±»å°†ä¼šè¢«åˆå§‹åŒ–ä¸€å¼ æ•°æ®åº“è¡¨ã€‚</p><p>ã€€ã€€æ˜¯å¦æ‰§è¡Œçš„å¼€å…³ç”±spring.jpa.hibernate.ddl-autoå±æ€§æ§åˆ¶ï¼Œå¯ä¸ºcreate/update/create-drop/none/validateï¼Œå…¶ä¸­noneå’Œvalidateä¸ºä¸æ‰§è¡Œã€‚</p><p>3ã€åˆå§‹åŒ–æ—¶å¯¹äºå¦ä¸€ä¸ªå±æ€§spring.jpa.generate-dllåœ¨ç†è§£ä¸Šçš„å›°æƒ‘</p><p>ã€€ã€€æŒ‰ç…§å®ƒçš„æè¿°ï¼Œspring.jpa.generate-dllæ˜¯jpaå±‚é¢å¯¹æ•°æ®è¡¨ç”Ÿæˆç­–ç•¥çš„æ§åˆ¶ï¼Œè€Œspring.jpa.hibernate.ddl-autoæ˜¯jpaå®ç°hibernateå±‚é¢ä¸Šå¯¹æ•°æ®è¡¨ç”Ÿæˆç­–ç•¥çš„æ§åˆ¶ã€‚</p><p>ã€€ã€€å®è·µä¹ŸéªŒè¯äº†æ–‡ç« é‡Œæ‰€è¯´çš„ï¼Œspring.jpa.generate-dllæ¯”spring.jpa.hibernate.ddl-autoæœ‰æ›´å¼ºçš„æ§åˆ¶åŠ›åº¦ï¼Œå³ä½¿spring.jpa.hibernate.ddl-autoä¸ºnoneï¼Œåªè¦spring.jpa.generate-dllä¸ºtrueï¼Œä¹Ÿä¼šæ ¹æ®@Entityæ³¨è§£çš„å®ä½“ç±»ç”Ÿæˆå¯¹åº”æ•°æ®è¡¨ã€‚</p><p>ã€€ã€€æŒ‰ç…§æ–‡ç« çš„å»ºè®®ï¼Œä¸ºäº†é¿å…æ··æ·†å’Œä¸å¥½ç†è§£ï¼Œè¿™ä¸¤è€…æœ€å¥½ä¸è¦æ··ç”¨ï¼Œåªå¯¹JPAå®ç°å±‚é¢çš„æ§åˆ¶å±æ€§spring.jpa.hibernate.ddl-autoè¿›è¡Œè®¾ç½®å³å¯ã€‚</p><p>4ã€è®©SpringBootæ ¹æ®è„šæœ¬å’Œè®©JPAæ ¹æ®å®ä½“ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸¤è€…ä¹‹ä¸­é€‰æ‹©ä¸€ä¸ªå³å¯ã€‚</p><p>5 spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect è™½ç„¶ ä¸åŒçš„æ•°æ®åº“æ–¹è¨€ä¼šè‡ªåŠ¨é€‰æ‹©, ä½†æ˜¯è‹¥æƒ³ä½¿ç”¨ç‰¹å®šå¼•æ“ç±»å‹éœ€è¦æŒ‡å®šæ–¹è¨€, ä¸åŠ è¿™å¥åˆ™ä¸ä¼šé»˜è®¤åˆ›å»ºMyISAMå¼•æ“çš„æ•°æ®åº“</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jpa:hibernate:ddl-auto: updateæ˜¯hibernateçš„é…ç½®å±æ€§ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼šè‡ªåŠ¨åˆ›å»ºã€æ›´æ–°ã€éªŒè¯æ•°æ®åº“è¡¨ç»“æ„ã€‚è¯¥å‚æ•°çš„å‡ ç§é…ç½®å¦‚ä¸‹ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.Â·createï¼šæ¯æ¬¡åŠ è½½hibernateæ—¶éƒ½ä¼šåˆ é™¤ä¸Šä¸€æ¬¡çš„ç”Ÿæˆçš„è¡¨ï¼Œç„¶åæ ¹æ®ä½ çš„modelç±»å†é‡æ–°æ¥ç”Ÿæˆæ–°è¡¨ï¼Œå“ªæ€•ä¸¤æ¬¡æ²¡æœ‰ä»»ä½•æ”¹å˜ä¹Ÿè¦è¿™æ ·æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¯¼è‡´æ•°æ®åº“è¡¨æ•°æ®ä¸¢å¤±çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.Â·create-dropï¼šæ¯æ¬¡åŠ è½½hibernateæ—¶æ ¹æ®modelç±»ç”Ÿæˆè¡¨ï¼Œä½†æ˜¯sessionFactoryä¸€å…³é—­,è¡¨å°±è‡ªåŠ¨åˆ é™¤ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.Â·updateï¼šæœ€å¸¸ç”¨çš„å±æ€§ï¼Œç¬¬ä¸€æ¬¡åŠ è½½hibernateæ—¶æ ¹æ®modelç±»ä¼šè‡ªåŠ¨å»ºç«‹èµ·è¡¨çš„ç»“æ„ï¼ˆå‰ææ˜¯å…ˆå»ºç«‹å¥½æ•°æ®åº“ï¼‰ï¼Œä»¥ååŠ è½½hibernateæ—¶æ ¹æ®modelç±»è‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„ï¼Œå³ä½¿è¡¨ç»“æ„æ”¹å˜äº†ä½†è¡¨ä¸­çš„è¡Œä»ç„¶å­˜åœ¨ä¸ä¼šåˆ é™¤ä»¥å‰çš„è¡Œã€‚è¦æ³¨æ„çš„æ˜¯å½“éƒ¨ç½²åˆ°æœåŠ¡å™¨åï¼Œè¡¨ç»“æ„æ˜¯ä¸ä¼šè¢«é©¬ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œæ˜¯è¦ç­‰åº”ç”¨ç¬¬ä¸€æ¬¡è¿è¡Œèµ·æ¥åæ‰ä¼šã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.Â·validateï¼šæ¯æ¬¡åŠ è½½hibernateæ—¶ï¼ŒéªŒè¯åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼Œåªä¼šå’Œæ•°æ®åº“ä¸­çš„è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¼šåˆ›å»ºæ–°è¡¨ï¼Œä½†æ˜¯ä¼šæ’å…¥æ–°å€¼ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">æˆ‘åœ¨åˆæ¬¡åˆ›å»ºæ—¶ä¼šè®¾ä¸ºcreate,åˆ›å»ºå¥½åæ”¹ä¸ºvalidate.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="13732-jpa-querydsl-å¤šè¡¨è”æŸ¥">13.7.3.2. jpa queryDsl å¤šè¡¨è”æŸ¥<a href="#13732-jpa-querydsl-å¤šè¡¨è”æŸ¥" class="hash-link" aria-label="Direct link to 13.7.3.2. jpa queryDsl å¤šè¡¨è”æŸ¥" title="Direct link to 13.7.3.2. jpa queryDsl å¤šè¡¨è”æŸ¥">â€‹</a></h4><p><a href="https://zhongpan.tech/2020/07/20/034-best-practice-of-multi-table-joint-query-in-spring-data-jpa/" target="_blank" rel="noopener noreferrer">https://zhongpan.tech/2020/07/20/034-best-practice-of-multi-table-joint-query-in-spring-data-jpa/</a>
<a href="https://www.baeldung.com/querydsl-with-jpa-tutorial" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/querydsl-with-jpa-tutorial</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="13733-jpa-æ”¯æŒ-java8-time">13.7.3.3. jpa æ”¯æŒ java8 time<a href="#13733-jpa-æ”¯æŒ-java8-time" class="hash-link" aria-label="Direct link to 13.7.3.3. jpa æ”¯æŒ java8 time" title="Direct link to 13.7.3.3. jpa æ”¯æŒ java8 time">â€‹</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://stackoverflow.com/questions/54840769/how-to-persist-localdate-with-jpa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.baeldung.com/jpa-java-time</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1374-datasourceinitializer">13.7.4. DataSourceInitializer<a href="#1374-datasourceinitializer" class="hash-link" aria-label="Direct link to 13.7.4. DataSourceInitializer" title="Direct link to 13.7.4. DataSourceInitializer">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CustomizeDataSourceInitializer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;classpath:testSql/test_farms.sql&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Resource functionScriptFarms;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;classpath:testSql/test_miners.sql&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Resource functionScriptMiners;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;classpath:testSql/test_pool_config.sql&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Resource functionScriptPoolConfig;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSourceInitializer dataSourceInitializer(final DataSource dataSource) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final DataSourceInitializer initializer = new DataSourceInitializer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è®¾ç½®æ•°æ®æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initializer.setDataSource(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initializer.setDatabasePopulator(databasePopulator());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return initializer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DatabasePopulator databasePopulator() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final ResourceDatabasePopulator populator = new ResourceDatabasePopulator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        populator.addScripts(functionScriptFarms);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        populator.addScripts(functionScriptMiners);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        populator.addScripts(functionScriptPoolConfig);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return populator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1375-maven-antrun-pluginn">13.7.5. maven-antrun-pluginn<a href="#1375-maven-antrun-pluginn" class="hash-link" aria-label="Direct link to 13.7.5. maven-antrun-pluginn" title="Direct link to 13.7.5. maven-antrun-pluginn">â€‹</a></h3><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">refresh-db</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.maven.plugins</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">maven-antrun-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">file</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">src/main/resources/application.properties</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">sql</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">driver</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.driver}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">url</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.url}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">userid</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.username}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">password</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${jdbc.password}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onerror</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">continue</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">encoding</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${project.build.sourceEncoding}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">classpath</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">refid</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">maven.test.classpath</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">transaction</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">src/main/resources/sql/h2/schema.sql</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">transaction</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">src/test/resources/data/h2/import-data.sql</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">sql</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="138-æ•´åˆ-spring-jdbc">13.8. æ•´åˆ spring jdbc<a href="#138-æ•´åˆ-spring-jdbc" class="hash-link" aria-label="Direct link to 13.8. æ•´åˆ spring jdbc" title="Direct link to 13.8. æ•´åˆ spring jdbc">â€‹</a></h2><p><a href="https://www.cnblogs.com/liyihua/p/12333967.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/liyihua/p/12333967.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="139-æ•´åˆ-hibernate">13.9. æ•´åˆ hibernate<a href="#139-æ•´åˆ-hibernate" class="hash-link" aria-label="Direct link to 13.9. æ•´åˆ hibernate" title="Direct link to 13.9. æ•´åˆ hibernate">â€‹</a></h2><p>å³ spring data jpa</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1391-jpaæ³¨è§£æ€»ç»“">13.9.1. jpaæ³¨è§£æ€»ç»“<a href="#1391-jpaæ³¨è§£æ€»ç»“" class="hash-link" aria-label="Direct link to 13.9.1. jpaæ³¨è§£æ€»ç»“" title="Direct link to 13.9.1. jpaæ³¨è§£æ€»ç»“">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// anno on class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DynamicInsert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DynamicUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EntityListeners(AuditingEntityListener.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//anno on field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// uuid as primary key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GenericGenerator(name = &quot;generator&quot;, strategy = &quot;uuid&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GeneratedValue(generator = &quot;generator&quot;, strategy = GenerationType.TABLE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Column(name = &quot;id&quot;, length = 32)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1392-å®¡è®¡-createddate">13.9.2. å®¡è®¡ createdDate<a href="#1392-å®¡è®¡-createddate" class="hash-link" aria-label="Direct link to 13.9.2. å®¡è®¡ createdDate" title="Direct link to 13.9.2. å®¡è®¡ createdDate">â€‹</a></h3><p><a href="https://blog.csdn.net/a972669015/article/details/104778172" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/a972669015/article/details/104778172</a>
TODO</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1393-æ‰§è¡ŒåŸç”Ÿ-sql">13.9.3. æ‰§è¡ŒåŸç”Ÿ SQL<a href="#1393-æ‰§è¡ŒåŸç”Ÿ-sql" class="hash-link" aria-label="Direct link to 13.9.3. æ‰§è¡ŒåŸç”Ÿ SQL" title="Direct link to 13.9.3. æ‰§è¡ŒåŸç”Ÿ SQL">â€‹</a></h3><p><a href="https://github.com/cloudfavorites/favorites-web" target="_blank" rel="noopener noreferrer">https://github.com/cloudfavorites/favorites-web</a></p><p><a href="https://www.cnblogs.com/myknow/p/9559011.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/myknow/p/9559011.html</a>
<a href="https://segmentfault.com/a/1190000022338883" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000022338883</a>
<a href="https://liuyanzhao.com/8069.html" target="_blank" rel="noopener noreferrer">https://liuyanzhao.com/8069.html</a>
TODO</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1394-åŠ¨æ€-sql">13.9.4. åŠ¨æ€ SQL<a href="#1394-åŠ¨æ€-sql" class="hash-link" aria-label="Direct link to 13.9.4. åŠ¨æ€ SQL" title="Direct link to 13.9.4. åŠ¨æ€ SQL">â€‹</a></h3><p><a href="https://www.cnblogs.com/kongxianghai/p/7575988.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/kongxianghai/p/7575988.html</a></p><p>æ’å…¥å’Œä¿®æ”¹å¯ä»¥åœ¨ç±»å®ä½“ä¸Šæ ‡æ³¨
@DynamicInsertå’Œ@DynamicUpdate
è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆéç©ºå­—æ®µçš„ æ’å…¥å’Œ æ›´æ–°è¯­å¥</p><p>åŠ¨æ€æŸ¥è¯¢åˆ™éœ€è¦ç”¨ Criteria API</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1395-spring-data-rest-é…åˆ-spring-data-jpa">13.9.5. spring-data-rest é…åˆ spring-data-jpa<a href="#1395-spring-data-rest-é…åˆ-spring-data-jpa" class="hash-link" aria-label="Direct link to 13.9.5. spring-data-rest é…åˆ spring-data-jpa" title="Direct link to 13.9.5. spring-data-rest é…åˆ spring-data-jpa">â€‹</a></h3><p><a href="http://docs.jcohy.com/docs/spring-data-rest/3.2.8.RELEASE/html5/zh-cn/" target="_blank" rel="noopener noreferrer">http://docs.jcohy.com/docs/spring-data-rest/3.2.8.RELEASE/html5/zh-cn/</a>
<a href="https://docs.spring.io/spring-data/rest/docs/3.4.5/reference/html/#Project" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-data/rest/docs/3.4.5/reference/html/#Project</a></p><p><a href="https://docs.spring.io/spring-data/jpa/docs/2.4.5/reference/html/#repositories" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-data/jpa/docs/2.4.5/reference/html/#repositories</a></p><p>spring data rest å¯ä»¥ç›´æ¥å°† repository å‘å¸ƒä¸º rest service, å’Œ spring data jpa (è‡ªåŠ¨ç”Ÿæˆ crud api) é…åˆ</p><p>ç›®å‰æ”¯æŒSpring Data JPAã€Spring Data MongoDBã€Spring Data Neo4jã€Spring Data GemFireã€Spring Data Cassandraçš„ repository è‡ªåŠ¨è½¬æ¢æˆRESTæœåŠ¡</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-data-jpa</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-data-rest</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RepositoryRestResource // publish repository as rest service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface ReservationRepository extends JpaRepository&lt;Reservation, Long&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * customized rest service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * http://localhost:8080/reservations/search/by-name?name=hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RestResource(path = &quot;by-name&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional&lt;Reservation&gt; findByName(String name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨åˆ†å¸ƒå¼ä¸‹, åœ¨ feign client æ¥æ”¶ spring data rest å‘å¸ƒçš„ service éœ€è¦å’Œ hateoas (spring-boot-starter-hateoas) é…åˆ:(<a href="https://docs.spring.io/spring-hateoas/docs/current/reference/html/#migrate-to-1.0.changes" target="_blank" rel="noopener noreferrer">hateoas ç‰ˆæœ¬æ›´æ–°, æ¥å—æ•°æ®çš„å®ä½“æœ‰æ”¹å˜</a>)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@FeignClient(&quot;reservation-service&quot;) // also support &#x27;url&#x27; ( outside eureka)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface ReservationResources {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(&quot;/reservations&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CollectionModel&lt;Reservation&gt; reservations();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(&quot;/message&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String message();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1310-æ•´åˆ-mybatis-plus">13.10. æ•´åˆ mybatis-plus<a href="#1310-æ•´åˆ-mybatis-plus" class="hash-link" aria-label="Direct link to 13.10. æ•´åˆ mybatis-plus" title="Direct link to 13.10. æ•´åˆ mybatis-plus">â€‹</a></h2><p>mybatis-plus-boot-starter</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface IAccountService extends IService&lt;Account&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountService extends ServiceImpl&lt;AccountMapper, Account&gt; implements IAccountService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@mapper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æˆ–è€…å¯åŠ¨ç±» @MapperScan(&quot;io.github.xiaoyureed.workflow.mapper&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface AccountMapper extends BaseMapper&lt;Account&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AccountMapper.xml</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">mapper</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">PUBLIC</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype string" style="color:#e3116c;font-style:italic">&quot;-//mybatis.org/DTD Mapper 3.0&quot;</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype string" style="color:#e3116c;font-style:italic">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mapper</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">namespace</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">io.github.xiaoyureed.workflow.mapper.AccountMapper</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">mapper</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1311-æ•´åˆ-mybatis">13.11. æ•´åˆ mybatis<a href="#1311-æ•´åˆ-mybatis" class="hash-link" aria-label="Direct link to 13.11. æ•´åˆ mybatis" title="Direct link to 13.11. æ•´åˆ mybatis">â€‹</a></h2><ul><li>ä¾èµ–ï¼šmybatis-spring-boot-starter</li><li>@Mapperæ ‡æ³¨åˆ›å»ºçš„xxxMapperæ¥å£ï¼›æˆ–è€… åœ¨ å¯åŠ¨ç±»ä¸Š æ ‡æ³¨ @mapperscan(basepackage...)</li><li>@Select(&quot;SELECT * FROM USER WHERE NAME = #{name}&quot;)æ ‡æ³¨æ–¹æ³•ï¼Œè¿˜æœ‰@insertç­‰ï¼›æ–¹æ³•å‚æ•°@Param(&quot;name&quot;)æ ‡æ³¨</li><li>é€šè¿‡@Autowiredæ³¨å…¥ä½¿ç”¨</li></ul><p>ä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥ mybatisplus-spring-boot-starter é€šè¿‡ mybatis plus ä½¿ç”¨</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13111-åŸºæœ¬é…ç½®">13.11.1. åŸºæœ¬é…ç½®<a href="#13111-åŸºæœ¬é…ç½®" class="hash-link" aria-label="Direct link to 13.11.1. åŸºæœ¬é…ç½®" title="Direct link to 13.11.1. åŸºæœ¬é…ç½®">â€‹</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/mall</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">useUnicode=true</span><span class="token important">&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">mybatis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># config-locationå±æ€§å’Œconfigurationå±æ€§ä¸èƒ½åŒæ—¶æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#config-location: classpath:mybatis.xml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type-aliases-package</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> me.zingon.pagehelper.model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mapper-locations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mapper/</span><span class="token important">*.xml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#mapper-locations: {&quot;classpath:mapper/*.xml&quot;, &quot;classpath*:com/**/mapper/*.xml&quot;}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">configuration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">map-underscore-to-camel-case</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">default-fetch-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">default-statement-timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13112-ä½¿ç”¨-æ‹¦æˆªå™¨-interceptor-plugins">13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins<a href="#13112-ä½¿ç”¨-æ‹¦æˆªå™¨-interceptor-plugins" class="hash-link" aria-label="Direct link to 13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins" title="Direct link to 13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="131121-principle-of-plugins">13.11.2.1. principle of plugins<a href="#131121-principle-of-plugins" class="hash-link" aria-label="Direct link to 13.11.2.1. principle of plugins" title="Direct link to 13.11.2.1. principle of plugins">â€‹</a></h4><p>åŸºäºæ’ä»¶æœºåˆ¶ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ§åˆ¶SQLæ‰§è¡Œçš„å„ä¸ªé˜¶æ®µï¼Œå¦‚æ‰§è¡Œé˜¶æ®µï¼Œå‚æ•°å¤„ç†é˜¶æ®µï¼Œè¯­æ³•æ„å»ºé˜¶æ®µï¼Œç»“æœé›†å¤„ç†é˜¶æ®µï¼Œå…·ä½“å¯ä»¥æ ¹æ®é¡¹ç›®ä¸šåŠ¡æ¥å®ç°å¯¹åº”ä¸šåŠ¡é€»è¾‘ã€‚</p><p>è®¾è®¡æ¨¡å¼ï¼šä»£ç†æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="131122-use-scenarios">13.11.2.2. use scenarios<a href="#131122-use-scenarios" class="hash-link" aria-label="Direct link to 13.11.2.2. use scenarios" title="Direct link to 13.11.2.2. use scenarios">â€‹</a></h4><ul><li>paging æ‹¦æˆªStatementHandlerç±»çš„prepareæ–¹æ³•ï¼Œæ”¹å˜è¦æ‰§è¡Œçš„SQLè¯­å¥ä¸ºåˆ†é¡µè¯­å¥å³å¯ï¼›</li><li>Assign default values to fields before SQL execution</li><li>SQL performance monitor é€šè¿‡æ‹¦æˆªExecutorç±»çš„update, queryç­‰æ–¹æ³•ï¼Œç”¨æ—¥å¿—è®°å½•æ¯ä¸ªæ–¹æ³•æ‰§è¡Œçš„æ—¶é—´</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="131123-how-to-use-plugins">13.11.2.3. how to use plugins<a href="#131123-how-to-use-plugins" class="hash-link" aria-label="Direct link to 13.11.2.3. how to use plugins" title="Direct link to 13.11.2.3. how to use plugins">â€‹</a></h4><p>å®ç° Interceptor æ¥å£, æ ‡æ³¨@Intercepts(@Signature) , å‚è€ƒ <a href="https://www.jianshu.com/p/0a72bb1f6a21" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/0a72bb1f6a21</a></p><p>scenario 1: ç›´æ¥ç»™è‡ªå®šä¹‰æ‹¦æˆªå™¨æ·»åŠ ä¸€ä¸ª @Componentæ³¨è§£ , å¯åŠ¨æ—¶ä¸ä¼šè‡ªåŠ¨è°ƒç”¨è‡ªå®šä¹‰æ‹¦æˆªå™¨çš„setPropertiesæ–¹æ³•
scenario 2: æ— éœ€ @component ,åªéœ€è¦ @bean ConfigurationCustomizer ä¸­ addInterceptor , ä¸ä¼šè‡ªåŠ¨è°ƒç”¨setPropertiesæ–¹æ³• --- mybatis plus  ä¸­çš„é…ç½®æ–¹æ³•
scenario 3: æ— éœ€ @component ,éœ€è¦ @bean SqlSessionFactoryBean ä¸­ setPlugins --- (app å¯åŠ¨æ—¶, setPropertiesè¢«è‡ªåŠ¨è°ƒç”¨)</p><p><a href="https://github.com/miaoxinwei/mybatis-crypt/blob/master/src/main/java/org/apache/ibatis/plugin/CryptInterceptor.java" target="_blank" rel="noopener noreferrer">https://github.com/miaoxinwei/mybatis-crypt/blob/master/src/main/java/org/apache/ibatis/plugin/CryptInterceptor.java</a> æ—¥å¿—è„±æ•<br>
<!-- -->TODO</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * åœ¨mybatisä¸­å¯è¢«æ‹¦æˆªçš„ç±»å‹æœ‰å››ç§(æŒ‰ç…§æ‹¦æˆªé¡ºåº):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * &lt;p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Executorï¼šæ‰§è¡Œ SQL è¯­å¥ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ParameterHandlerï¼šå¤„ç†å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ResultHandlerï¼šå¤„ç†ç»“æœé›†ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * StatementHandlerï¼šSqlè¯­æ³•æ„å»ºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ¯ä¸ªç±»å‹å¯ä»¥è¢«æ‹¦æˆªçš„æ–¹æ³•:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     æ‹¦æˆªçš„ç±»   æ‹¦æˆªçš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Executor   update, query, flushStatements, commit, rollback,getTransaction, close, isClosed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ParameterHandler   getParameterObject, setParameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     StatementHandler   prepare, parameterize, batch, update, query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ResultSetHandler   handleResultSets, handleOutputParameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ ‡è¯†è¯¥ç±»æ˜¯ä¸€ä¸ªæ‹¦æˆªå™¨ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Intercepts({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //æŒ‡æ˜è‡ªå®šä¹‰æ‹¦æˆªå™¨éœ€è¦æ‹¦æˆªå“ªä¸€ä¸ªç±»å‹ï¼Œå“ªä¸€ä¸ªæ–¹æ³•(æ–¹æ³•æœ‰é‡è½½, æ‰€ä»¥è¿˜éœ€è¦ æŒ‡æ˜ args æ‰èƒ½ç¡®å®šæ˜¯å“ªä¸ªæ–¹æ³•)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Signature(type = Executor.class, method = &quot;update&quot;, args = {MappedStatement.class, Object.class}),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Signature(type = Executor.class, method = &quot;query&quot;, args = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class SqlInterceptor implements Interceptor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Object intercept(Invocation invocation) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            Object target = invocation.getTarget(); //è¢«ä»£ç†å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            Method method = invocation.getMethod(); //ä»£ç†æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            Object[] args = invocation.getArgs(); //æ–¹æ³•å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Object[] args = invocation.getArgs();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Object param = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MappedStatement mappedStatement = (MappedStatement) args[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (args.length &gt; 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                param = args[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String sql = sql(mappedStatement, param);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return invocation.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private String sql(MappedStatement statement, Object param) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            BoundSql boundSql = statement.getBoundSql(param);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;ParameterMapping&gt; parameterMappings = boundSql.getParameterMappings();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //å°†åŸå§‹sqlä¸­çš„ç©ºç™½å­—ç¬¦ï¼ˆ\såŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œåˆ¶è¡¨ç¬¦ï¼Œç©ºæ ¼ç¬¦ï¼‰æ›¿æ¢ä¸º&quot; &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String sql = boundSql.getSql().replaceAll(&quot;[\\s]+&quot;, &quot; &quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (param == null || parameterMappings.size() == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return sql;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            org.apache.ibatis.session.Configuration configuration = statement.getConfiguration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TypeHandlerRegistry typeHandlerRegistry = configuration.getTypeHandlerRegistry();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (typeHandlerRegistry.hasTypeHandler(param.getClass())) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sql = sql.replaceFirst(&quot;\\?&quot;, getParameterValue(param));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                MetaObject metaObject = configuration.newMetaObject(param);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for (ParameterMapping parameterMapping : parameterMappings) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    String propertyName = parameterMapping.getProperty();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (metaObject.hasGetter(propertyName)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Object obj = metaObject.getValue(propertyName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        sql = sql.replaceFirst(&quot;\\?&quot;, getParameterValue(obj));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    } else if (boundSql.hasAdditionalParameter(propertyName)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Object obj = boundSql.getAdditionalParameter(propertyName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        sql = sql.replaceFirst(&quot;\\?&quot;, getParameterValue(obj));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return sql;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private String getParameterValue(Object obj) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String value = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (obj instanceof String) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                value = &quot;&#x27;&quot; + obj.toString() + &quot;&#x27;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else if (obj instanceof Date) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                DateFormat formatter = DateFormat.getDateTimeInstance(DateFormat.DEFAULT, DateFormat.DEFAULT, Locale.CHINA);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                value = &quot;&#x27;&quot; + formatter.format(obj) + &quot;&#x27;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (obj != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    value = obj.toString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    value = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * ç”Ÿæˆä»£ç†å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * å¯é€‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * æˆ‘ä»¬å¯ä»¥å†³å®šæ˜¯å¦è¦è¿›è¡Œæ‹¦æˆª, å¦‚æœæ‹¦æˆª, å°±è¿”å›ä»£ç†åçš„å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *       * å¦‚æœä¸æ‹¦æˆª, åˆ™è¿”å›åŸå§‹å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *  æ¯ç»è¿‡ä¸€ä¸ªæ‹¦æˆªå™¨å¯¹è±¡éƒ½ä¼šè°ƒç”¨æ’ä»¶çš„pluginæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨4æ¬¡ã€‚æ ¹æ®@Interceptsæ³¨è§£æ¥å†³å®šæ˜¯å¦è¿›è¡Œæ‹¦æˆªå¤„ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Object plugin(Object target) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //è¿”å›å››å¤§æ¥å£å¯¹è±¡çš„ä»£ç†å¯¹è±¡, è¡¨ç¤ºå§‹ç»ˆä¼šæ‰§è¡Œæ‹¦æˆª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Plugin.wrap(target, this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // æ§åˆ¶æ˜¯å¦æ‹¦æˆª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // è‹¥ç±»ä¸ŠåŠ äº† @Signature æŒ‡æ˜äº† æ‹¦æˆªç±»å‹, è¿™ä¸€æ­¥å°±çœäº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            if (target instanceof StatementHandler) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                return Plugin.wrap(target, this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            return target;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * å¯é€‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * ç”¨äºåœ¨ Mybatis é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä¸€äº›å±æ€§çš„ã€‚ç±»ä¼¼ spring ä¸­æœ‰ @value,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * ä¸€èˆ¬ä¸ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void setProperties(Properties properties) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13113-typehandler">13.11.3. typehandler<a href="#13113-typehandler" class="hash-link" aria-label="Direct link to 13.11.3. typehandler" title="Direct link to 13.11.3. typehandler">â€‹</a></h3><p><a href="https://blog.csdn.net/m0_37735176/article/details/103107759" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/m0_37735176/article/details/103107759</a>
<a href="https://www.cnblogs.com/haoliyou/p/13743698.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/haoliyou/p/13743698.html</a>
<a href="https://www.cnblogs.com/dyf-stu/p/10162301.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/dyf-stu/p/10162301.html</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13114-å…¨æ³¨è§£å¼€å‘">13.11.4. å…¨æ³¨è§£å¼€å‘<a href="#13114-å…¨æ³¨è§£å¼€å‘" class="hash-link" aria-label="Direct link to 13.11.4. å…¨æ³¨è§£å¼€å‘" title="Direct link to 13.11.4. å…¨æ³¨è§£å¼€å‘">â€‹</a></h3><p><a href="https://zhuanlan.zhihu.com/p/94554180" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/94554180</a>
TODO</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13115-åŠ¨æ€å®šæ—¶åˆ·æ–°-sql-mapper-å®ç°çƒ­åŠ è½½">13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½<a href="#13115-åŠ¨æ€å®šæ—¶åˆ·æ–°-sql-mapper-å®ç°çƒ­åŠ è½½" class="hash-link" aria-label="Direct link to 13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½" title="Direct link to 13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½">â€‹</a></h3><p><a href="https://veevv.com/2015/09/30/mybatis-mapper-xml-reloader/" target="_blank" rel="noopener noreferrer">https://veevv.com/2015/09/30/mybatis-mapper-xml-reloader/</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class XMLMapperReloader implements ApplicationContextAware {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ConfigurableApplicationContext context = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private HashMap&lt;String, Long&gt; fileMapping = new HashMap&lt;String, Long&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Scanner scanner = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String packageSearchPath = &quot;classpath:com/xx/xx/dao/*/*.xml&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ScheduledExecutorService service = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.context = (ConfigurableApplicationContext) applicationContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public XMLMapperReloader(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        service = Executors.newScheduledThreadPool(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        service.scheduleAtFixedRate(new Task(), 5, 5, TimeUnit.SECONDS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class Task implements Runnable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                scanner = new Scanner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                scanner.refreshMapper();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @SuppressWarnings({ &quot;rawtypes&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class Scanner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private Resource[] mapperLocations;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void refreshMapper() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SqlSessionFactory factory = context.getBean(SqlSessionFactory.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Configuration configuration = factory.getConfiguration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // step.1 æ‰«ææ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    this.scanMapperXml();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } catch (IOException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // step.2 åˆ¤æ–­æ˜¯å¦æœ‰æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (this.isChanged()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.println(&quot;==============æ£€æµ‹åˆ°mapperæœ‰æ”¹å˜, å¼€å§‹åˆ·æ–°...===============&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // step.2.1 æ¸…ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    this.removeConfig(configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // step.2.2 é‡æ–°åŠ è½½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    for (Resource configLocation : mapperLocations) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            XMLMapperBuilder xmlMapperBuilder = new XMLMapperBuilder(configLocation.getInputStream(), configuration, configLocation.toString(), configuration.getSqlFragments());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            xmlMapperBuilder.parse();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.println(&quot;==============mapperåˆ·æ–°å®Œæ¯•===============&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private void scanMapperXml() throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.mapperLocations = new PathMatchingResourcePatternResolver().getResources(packageSearchPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private void removeConfig(Configuration configuration) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Class&lt;?&gt; classConfig = configuration.getClass();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearMap(classConfig, configuration, &quot;mappedStatements&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearMap(classConfig, configuration, &quot;caches&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearMap(classConfig, configuration, &quot;resultMaps&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearMap(classConfig, configuration, &quot;parameterMaps&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearMap(classConfig, configuration, &quot;keyGenerators&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearMap(classConfig, configuration, &quot;sqlFragments&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearSet(classConfig, configuration, &quot;loadedResources&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private void clearMap(Class&lt;?&gt; classConfig, Configuration configuration, String fieldName) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Field field = classConfig.getDeclaredField(fieldName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            field.setAccessible(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Map mapConfig = (Map) field.get(configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mapConfig.clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private void clearSet(Class&lt;?&gt; classConfig, Configuration configuration, String fieldName) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Field field = classConfig.getDeclaredField(fieldName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            field.setAccessible(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Set setConfig = (Set) field.get(configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            setConfig.clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private boolean isChanged() throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            boolean flag = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (Resource resource : mapperLocations) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String resourceName = resource.getFilename();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                boolean addFlag = !fileMapping.containsKey(resourceName);// æ­¤ä¸ºæ–°å¢æ ‡è¯†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // ä¿®æ”¹æ–‡ä»¶:åˆ¤æ–­æ–‡ä»¶å†…å®¹æ˜¯å¦æœ‰å˜åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Long compareFrame = fileMapping.get(resourceName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                long lastFrame = resource.contentLength() + resource.lastModified();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                boolean modifyFlag = null != compareFrame &amp;&amp; compareFrame.longValue() != lastFrame;// æ­¤ä¸ºä¿®æ”¹æ ‡è¯†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // æ–°å¢æˆ–æ˜¯ä¿®æ”¹æ—¶,å­˜å‚¨æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if(addFlag || modifyFlag) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fileMapping.put(resourceName, Long.valueOf(lastFrame));// æ–‡ä»¶å†…å®¹å¸§å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    flag = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return flag;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getPackageSearchPath() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return packageSearchPath;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setPackageSearchPath(String packageSearchPath) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.packageSearchPath = packageSearchPath;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13116-è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½•-and-å¼€å¯å ä½ç¬¦è¿‡æ»¤">13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤<a href="#13116-è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½•-and-å¼€å¯å ä½ç¬¦è¿‡æ»¤" class="hash-link" aria-label="Direct link to 13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤" title="Direct link to 13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤">â€‹</a></h3><p>mapper.xml å’Œ dao interface æ”¾åœ¨ä¸€èµ·: (å¼€å¯èµ„æºæ–‡ä»¶è¿‡æ»¤)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-maven-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- maven é»˜è®¤ä»…ä»… å°†src/main/resources ä¸‹çš„æ–‡ä»¶æ‰“åŒ…åˆ° jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">            è‹¥ mapper.xml ä¸åœ¨æ ‡å‡†ç›®å½•ä¸‹, éœ€è¦æŒ‡å®šèµ„æºè¿‡æ»¤å¤„ç† --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">resources</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">resource</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">directory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">src/main/java</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">directory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">includes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">**/*.*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">includes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ‰“åŒ…åˆ°å“ªé‡Œ? å¯çœç•¥, é»˜è®¤ jar æ ¹ç›®å½• --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- &lt;targetPath&gt;META-INF/plexus&lt;/targetPath&gt; --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ˜¯å¦å¼€å¯èµ„æºæ–‡ä»¶å ä½ç¬¦è¿‡æ»¤ (å¦‚ ${project.version}), é»˜è®¤ false --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- &lt;filtering&gt;false&lt;/filtering&gt; --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">resource</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- å¯çœç•¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">resource</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">directory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">src/main/resources</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">directory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">includes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">**/*.*</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">includes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">resource</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- æ·»åŠ é¢å¤–çš„é…ç½®æ–‡ä»¶, ç”¨æ¥è§£æèµ„æºæ–‡ä»¶ä¸­çš„å ä½ç¬¦ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filters</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">src/main/filters/filter.properties</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filter</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">filters</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">resources</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1312-springboot-äº‹åŠ¡">13.12. springboot äº‹åŠ¡<a href="#1312-springboot-äº‹åŠ¡" class="hash-link" aria-label="Direct link to 13.12. springboot äº‹åŠ¡" title="Direct link to 13.12. springboot äº‹åŠ¡">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13121-äº‹åŠ¡åŸºæœ¬ä½¿ç”¨">13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨<a href="#13121-äº‹åŠ¡åŸºæœ¬ä½¿ç”¨" class="hash-link" aria-label="Direct link to 13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨" title="Direct link to 13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨">â€‹</a></h3><p>Spring bootæ˜¯é»˜è®¤å¯åŠ¨äº‹åŠ¡çš„ï¼Œåªéœ€è¦åœ¨ç±»æˆ–è€…æ–¹æ³•ä¸Šæ·»åŠ @Transactionalæ³¨è§£å³å¯</p><p>ä¸ç”Ÿæ•ˆ, å¯èƒ½æ˜¯:</p><p>1ã€é¦–å…ˆè¦çœ‹æ•°æ®åº“å¼•æ“æ˜¯å¦æ”¯æŒæ³¨è§£ï¼Œmysqlé»˜è®¤å¼•æ“INNODBæ˜¯æ”¯æŒçš„ï¼Œä½†MYISAMæ˜¯ä¸æ”¯æŒçš„ï¼›</p><p>2ã€æ³¨è§£åªèƒ½è¢«åº”ç”¨åˆ°publicæ–¹æ³•ä¸Š, å…¶å®ƒæ–¹æ³•ä¸Šä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸ç”Ÿæ•ˆï¼›</p><p>3ã€é»˜è®¤æƒ…å†µä¸‹åªä¼šå¯¹è¿è¡ŒæœŸå¼‚å¸¸(java.lang.RuntimeExceptionåŠå…¶å­ç±»)å’Œ Error è¿›è¡Œå›æ»šï¼›</p><p>4ã€å¦‚æœæ˜¯å…¶å®ƒå¼‚å¸¸, æ‰‹åŠ¨æŒ‡å®š<code>@Transactional(rollbackFor={Exception.class})</code></p><p>å¦‚æœè¿˜æ˜¯ä¸ç”Ÿæ•ˆ, æ‰‹åŠ¨å›æ»š: <code>TransactionAspectSupport.currentTransactionStatus().setRollbackOnly()</code></p><p><a href="https://blog.csdn.net/laoxilaoxi_/article/details/99896738" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/laoxilaoxi_/article/details/99896738</a> ä½¿ç”¨ cglib or jdk åŠ¨æ€ä»£ç† <code>@EnableTransactionManagement(proxyTargetClass = true)// ä½¿ç”¨cglib</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13122-spring-äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘">13.12.2. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘<a href="#13122-spring-äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘" class="hash-link" aria-label="Direct link to 13.12.2. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘" title="Direct link to 13.12.2. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘">â€‹</a></h3><p>åŒä¸€ä¸ª service bean ä¸­çš„ äº‹åŠ¡æ–¹æ³•äº’ç›¸è°ƒç”¨, å¦‚ a() è°ƒç”¨ b(), åªä¼šä½¿ç”¨ a() çš„ äº‹åŠ¡, b çš„æ— æ•ˆ, å› ä¸ºäº‹åŠ¡æœ¬è´¨æ˜¯åŸºäºåŠ¨æ€ä»£ç†, åœ¨åŒä¸ª bean ä¸­çš„æ–¹æ³•äº’è°ƒ, å‘ç”Ÿåœ¨ä¸»åŠ¨è°ƒç”¨æ–¹ a() çš„ä»£ç†å¯¹è±¡ä¸­, æ‰€ä»¥åªæœ‰ a() çš„äº‹åŠ¡ç”Ÿæ•ˆ</p><p>å¦‚æœ a(), b() å¤„äºä¸åŒ service bean ä¸­, åˆ™ äº‹åŠ¡ä¼ æ’­ç”Ÿæ•ˆ.</p><p>è§£å†³:</p><p>å¼•å…¥ starter aop, ä¼šå¼•å…¥ aspectJ, @enableAspectJAutoProxy(exposeProxy=true) å¼€å¯ aspectJ å¹¶æš´éœ²ä»£ç†å¯¹è±¡, åœ¨äº’è°ƒçš„éƒ¨åˆ†, ä½¿ç”¨ä»£ç†å¯¹è±¡äº’è°ƒ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void a() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // b()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // c()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OrderService thisService = (OrderService) Aopcontext.currentProxy()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    thisService.b()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    thisService.c()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13123-transactional-æ³¨è§£">13.12.3. Transactional æ³¨è§£<a href="#13123-transactional-æ³¨è§£" class="hash-link" aria-label="Direct link to 13.12.3. Transactional æ³¨è§£" title="Direct link to 13.12.3. Transactional æ³¨è§£">â€‹</a></h3><p>äº‹åŠ¡è¶…æ—¶</p><p>@transaction(timeout=...) unit: s</p><p>éš”ç¦»çº§åˆ«</p><p>@transaction(isolation=...)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1313-ç¼“å­˜">13.13. ç¼“å­˜<a href="#1313-ç¼“å­˜" class="hash-link" aria-label="Direct link to 13.13. ç¼“å­˜" title="Direct link to 13.13. ç¼“å­˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13131-springboot-starter-cache">13.13.1. springboot-starter-cache<a href="#13131-springboot-starter-cache" class="hash-link" aria-label="Direct link to 13.13.1. springboot-starter-cache" title="Direct link to 13.13.1. springboot-starter-cache">â€‹</a></h3><p>å¼•å…¥ redis starter, cache starter</p><p>é…ç½®æ–‡ä»¶ä¸­é…ç½®ç±»å‹ä¸º redis</p><p>æ³¨è§£:</p><ul><li>@cacheable({&quot;xxxCache&quot;}, sync=true) ç¼“å­˜æ•°æ®, æ–¹æ³•ä¸Š, æŒ‡å®šç¼“å­˜åˆ†åŒº, sync åŠ é”é˜²æ­¢ç¼“å­˜å‡»ç©¿</li><li>@cacheEvic(value=&quot;xxx&quot;, allEntries=true) åˆ é™¤ç¼“å­˜, allEntries è¡¨ç¤ºåˆ é™¤åˆ†åŒº cache ä¸‹çš„å…¨éƒ¨ç¼“å­˜å¯¹</li><li>@cacheput æ›´æ–°</li><li>caching ç»„åˆå¤šä¸ªæ“ä½œ  </li><li>@cacheconfig åœ¨ç±»çº§åˆ«å…±äº«ç¼“å­˜é…ç½®</li><li>@enablecaching å¼€å¯ç¼“å­˜</li></ul><p>è‡ªå®šä¹‰é…ç½®</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// è‡ªå®šä¹‰ç¼“å­˜ key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// è‡ªå®šä¹‰ json åºåˆ—åŒ–, ä¸ç”¨é»˜è®¤çš„ jdk åºåˆ—åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// è‡ªå®šä¹‰è¿‡æœŸæ—¶é—´, é»˜è®¤-1 æ°¸ä¸è¿‡æœŸ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¼˜åŠ¿æ˜¯ç®€å•æ–¹ä¾¿,</p><p>å¯¹äºè¯»æ¨¡å¼:</p><ul><li>ç¼“å­˜ç©¿é€ (æŸ¥è¯¢ä¸€ä¸ª null æ•°æ®), é…ç½® cache-null-value=true ç¼“å­˜ null æ•°æ®</li><li>ç¼“å­˜å‡»ç©¿ (å¤§é‡å¹¶å‘åŒæ—¶è¯·æ±‚ä¸€ä¸ªå¿«è¿‡æœŸçš„key): </li><li>é›ªå´©(å¤§é‡key åŒæ—¶è¿‡æœŸ), é…ç½® time-to-live è¿‡æœŸæ—¶é—´, </li></ul><p>å¯¹äºå†™æ¨¡å¼: æ²¡æœ‰å¾ˆå¥½çš„å†…ç½®è§£å†³æ–¹æ³•, å¯ä»¥é€šè¿‡:</p><ul><li>è¯»å†™åŠ é”</li><li>canal ä¸­é—´ä»¶</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13132-caffeine">13.13.2. caffeine<a href="#13132-caffeine" class="hash-link" aria-label="Direct link to 13.13.2. caffeine" title="Direct link to 13.13.2. caffeine">â€‹</a></h3><p>Caffeineæ˜¯ä½¿ç”¨Java8å¯¹Guavaç¼“å­˜çš„é‡å†™ç‰ˆæœ¬ï¼Œåœ¨Spring Boot 2.0ä¸­å°†å–ä»£Guava</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1314-é…åˆ-h2-æ•°æ®åº“è¿›è¡Œå¼€å‘">13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘<a href="#1314-é…åˆ-h2-æ•°æ®åº“è¿›è¡Œå¼€å‘" class="hash-link" aria-label="Direct link to 13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘" title="Direct link to 13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13141-h2-å’Œ-spring-data-jpa-é…åˆ">13.14.1. h2 å’Œ spring data jpa é…åˆ<a href="#13141-h2-å’Œ-spring-data-jpa-é…åˆ" class="hash-link" aria-label="Direct link to 13.14.1. h2 å’Œ spring data jpa é…åˆ" title="Direct link to 13.14.1. h2 å’Œ spring data jpa é…åˆ">â€‹</a></h3><p>æ— éœ€ä»»ä½•é…ç½®æ–‡ä»¶</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableDiscoveryClient // compared with @EnableEurekaClient, more comprehensive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ReservationServiceApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(ReservationServiceApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ApplicationRunner initData(ReservationRepository reservationRepository) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return args -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Stream.of(&quot;ehllo&quot;, &quot;hello&quot;, &quot;llhoe&quot;, &quot;jojo&quot;, &quot;çŒ•çŒ´æ¡ƒ&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .forEach(name -&gt; reservationRepository.save(new Reservation(null, name)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            reservationRepository.findAll().forEach(System.out::println);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RepositoryRestResource // publish repository as rest service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ¯”å¦‚æŸ¥è¯¢æ‰€æœ‰ /reservations, æŸ¥æŸä¸ª /reservations/1, æœç´¢ /reservations/search ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface ReservationRepository extends JpaRepository&lt;Reservation, Long&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * customized rest service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * http://localhost:8080/reservations/search/by-name?name=hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RestResource(path = &quot;by-name&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional&lt;Reservation&gt; findByName(String name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RefreshScope</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ConfigRefreshTestController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final String message;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final DiscoveryClient discoveryClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ConfigRefreshTestController(@Value(&quot;${message: defaultMsg}&quot;) String message,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       @Autowired DiscoveryClient discoveryClient) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.message = message;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.discoveryClient = discoveryClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(value = &quot;/message&quot;, method = RequestMethod.GET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String readMessage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.message;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(&quot;/eureka-services&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;List&lt;String&gt;&gt; eurekaServices() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new ResponseEntity&lt;&gt;(discoveryClient.getServices(), HttpStatus.OK);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * entity: é¢„å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NoArgsConstructor // if removed, jpa error may be produced</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Reservation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GeneratedValue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Long id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13142-å’Œ-mybatis-plus-é…åˆ">13.14.2. å’Œ mybatis-plus é…åˆ<a href="#13142-å’Œ-mybatis-plus-é…åˆ" class="hash-link" aria-label="Direct link to 13.14.2. å’Œ mybatis-plus é…åˆ" title="Direct link to 13.14.2. å’Œ mybatis-plus é…åˆ">â€‹</a></h3><p><a href="https://mp.baomidou.com/guide/quick-start.html" target="_blank" rel="noopener noreferrer">h2 å’Œ mybatis-plus é…åˆ</a>:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># DataSource Config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> org.h2.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">schema</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">db/schema</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">h2.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">db/data</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">h2.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">h2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mem</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>@MapperScan(&quot;mapper package&quot;)</code></p><p>mapper extends BaseMapper</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1315-å¤šæ•°æ®æº">13.15. å¤šæ•°æ®æº<a href="#1315-å¤šæ•°æ®æº" class="hash-link" aria-label="Direct link to 13.15. å¤šæ•°æ®æº" title="Direct link to 13.15. å¤šæ•°æ®æº">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13151-åŸºæœ¬é…ç½®-å…¨æ³¨è§£å¼€å‘">13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘<a href="#13151-åŸºæœ¬é…ç½®-å…¨æ³¨è§£å¼€å‘" class="hash-link" aria-label="Direct link to 13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘" title="Direct link to 13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘">â€‹</a></h3><p>å¯åŠ¨ç±»éœ€è¦æ’é™¤è‡ªåŠ¨é…ç½®@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})</p><div class="language-props codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-props codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server.port=8335</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é…ç½®ç¬¬ä¸€ä¸ªæ•°æ®æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db1.jdbc-url=jdbc:mysql://127.0.0.1:3306/erp?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db1.username=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db1.password=153963</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db1.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># é…ç½®ç¬¬äºŒä¸ªæ•°æ®æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db2.jdbc-url=jdbc:mysql://127.0.0.1:3306/erp2?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db2.username=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db2.password=153963</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.db2.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@MapperScan(basePackages = &quot;top.snailclimb.db1.dao&quot;, sqlSessionTemplateRef = &quot;db1SqlSessionTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DataSource1Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ç”Ÿæˆæ•°æ®æº.  @Primary æ³¨è§£å£°æ˜ä¸ºé»˜è®¤æ•°æ®æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db1DataSource&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConfigurationProperties(prefix = &quot;spring.datasource.hikari.db1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Primary // å£°æ˜ä¸ºé»˜è®¤æ•°æ®æº, é˜²æ­¢ dao å±‚çš„ç±»å¿˜è®°æŒ‡å®š @Qualifier(&quot;db1SqlSessionTemplate&quot;), å¯ä»¥ä½¿ç”¨é»˜è®¤çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource testDataSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return DataSourceBuilder.create().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * åˆ›å»º SqlSessionFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db1SqlSessionFactory&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public SqlSessionFactory testSqlSessionFactory(@Qualifier(&quot;db1DataSource&quot;) DataSource dataSource) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SqlSessionFactoryBean bean = new SqlSessionFactoryBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setDataSource(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è‹¥æœ‰ mapper.xml , éœ€è¦æŒ‡å®šä½ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è‹¥æ˜¯å…¨æ³¨è§£å¼€å‘, æ— éœ€æŒ‡å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //  bean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(&quot;classpath:mybatis/mapper/db1/*.xml&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean.getObject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é…ç½®äº‹åŠ¡ç®¡ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db1TransactionManager&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSourceTransactionManager testTransactionManager(@Qualifier(&quot;db1DataSource&quot;) DataSource dataSource) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new DataSourceTransactionManager(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SqlSessionTemplateæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥è¢«å¤šä¸ªDAOæ‰€å…±äº«ä½¿ç”¨ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db1SqlSessionTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public SqlSessionTemplate testSqlSessionTemplate(@Qualifier(&quot;db1SqlSessionFactory&quot;) SqlSessionFactory sqlSessionFactory) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new SqlSessionTemplate(sqlSessionFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@MapperScan(basePackages = &quot;top.snailclimb.db2.dao&quot;, sqlSessionTemplateRef = &quot;db2SqlSessionTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DataSource2Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db2DataSource&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConfigurationProperties(prefix = &quot;spring.datasource.hikari.db2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource testDataSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return DataSourceBuilder.create().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db2SqlSessionFactory&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public SqlSessionFactory testSqlSessionFactory(@Qualifier(&quot;db2DataSource&quot;) DataSource dataSource) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SqlSessionFactoryBean bean = new SqlSessionFactoryBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setDataSource(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //bean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(&quot;classpath:mybatis/mapper/db2/*.xml&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean.getObject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db2TransactionManager&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSourceTransactionManager testTransactionManager(@Qualifier(&quot;db2DataSource&quot;) DataSource dataSource) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new DataSourceTransactionManager(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;db2SqlSessionTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public SqlSessionTemplate testSqlSessionTemplate(@Qualifier(&quot;db2SqlSessionFactory&quot;) SqlSessionFactory sqlSessionFactory) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new SqlSessionTemplate(sqlSessionFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dao å¼€å‘:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Qualifier(&quot;db1SqlSessionTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface UserDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é€šè¿‡åå­—æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mybatisä¸­#{}å’Œ${}ç¬¦å·çš„åŒºåˆ« </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ä½¿ç”¨#{}æ„å‘³ç€ä½¿ç”¨çš„é¢„ç¼–è¯‘çš„è¯­å¥ï¼Œå³ preparedStatement, æ›¿æ¢å ä½ç¬¦æ—¶, ä¼šä¸ºå‚æ•°æ·»åŠ å¼•å·ä½œä¸º string ä¼ å…¥, é˜²æ­¢æ³¨å…¥æ”»å‡»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ä¹Ÿä¸æ˜¯è¯´${}ä¸€æ— æ˜¯å¤„ï¼Œæ¯”å¦‚åœ¨MyBatisåŠ¨æ€æ’åºæ—¶ä½¿ç”¨order by +${åŠ¨æ€å‚æ•°}ï¼Œä½¿ç”¨${}è€Œä¸æ˜¯#{}, åŠ¨æ€å‚æ•°å¯ä»¥ä¼ å…¥ä¸å®šä¸ªæ•°çš„å­—æ®µ.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Select(&quot;SELECT * FROM user WHERE name = #{name}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User findUserByName(String name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Qualifier(&quot;db2SqlSessionTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface MoneyDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é€šè¿‡id æŸ¥çœ‹å·¥èµ„è¯¦æƒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Select(&quot;SELECT * FROM money WHERE id = #{id}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Money findMoneyById(@Param(&quot;id&quot;) int id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13152-abstractroutingdatasource-åŠ¨æ€æ•°æ®æºåˆ‡æ¢">13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢<a href="#13152-abstractroutingdatasource-åŠ¨æ€æ•°æ®æºåˆ‡æ¢" class="hash-link" aria-label="Direct link to 13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢" title="Direct link to 13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢">â€‹</a></h3><p><a href="https://blog.csdn.net/qq_37502106/article/details/91044952" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_37502106/article/details/91044952</a>
<a href="https://www.cnblogs.com/wyb628/p/7240061.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/wyb628/p/7240061.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1316-å¤šæ•°æ®åº“ç±»å‹-databaseidprovider">13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider<a href="#1316-å¤šæ•°æ®åº“ç±»å‹-databaseidprovider" class="hash-link" aria-label="Direct link to 13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider" title="Direct link to 13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider">â€‹</a></h2><p><a href="https://www.cnblogs.com/valten/p/12083128.html#" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/valten/p/12083128.html#</a> é…ç½® MySQL Oracle å…±åŒä½¿ç”¨</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DataSourceConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;${mybatis.mapper-locations}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String mapperLocations;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;dataSource&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConfigurationProperties(&quot;spring.datasource.hikari&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource dataSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return DataSourceBuilder.create().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public JdbcTemplate jdbcTemplate() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new JdbcTemplate(dataSource());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å¦‚æœé…ç½®äº† databaseIdProviderï¼ŒMyBatis ä¼šåŠ è½½æ‰€æœ‰çš„ä¸å¸¦ databaseId æˆ–åŒ¹é…å½“å‰ databaseId çš„è¯­å¥ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // databaseId æ˜¯ mybatis çš„å†…ç½®å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å¦‚æœå¸¦æˆ–è€…ä¸å¸¦çš„è¯­å¥éƒ½æœ‰ï¼Œåˆ™ä¸å¸¦çš„ä¼šè¢«å¿½ç•¥ã€‚æ–°å¢ï¼Œä¿®æ”¹å’Œåˆ é™¤éƒ½æœ‰è¿™ä¸ªå±æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- mybatisåŠ¨æ€sqlçš„ä¸¤ä¸ªå†…ç½®å‚æ•° , å¯ä»¥ç›´æ¥åœ¨ mapper.xml ä¸­ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           _parameter:ä»£è¡¨æ•´ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                å•ä¸ªå‚æ•°ï¼š_parameterå°±æ˜¯è¿™ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                å¤šä¸ªå‚æ•°ï¼šå‚æ•°ä¼šè¢«å°è£…ä¸ºä¸€ä¸ªmap:_parameterå°±æ˜¯ä»£è¡¨è¿™ä¸ªmap             </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           _databaseId:å¦‚æœé…ç½®äº†databaseIdProvideræ ‡ç­¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _databaseId å°±æ˜¯ä»£è¡¨å½“å‰æ•°æ®åº“çš„åˆ«åOracle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;!-- List&lt;Employee&gt; getEmpsTestInnerParameter(Employee employee); --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;select id=&quot;getEmpsTestInnerParameter&quot; resultType=&quot;com.hand.mybatis.bean.Employee&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          SELECT * FROM emp </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;if test=&quot;_parameter!=null&quot;&gt;      _parameterç›¸å½“äºä¼ å…¥çš„å‚æ•°employee,åˆ¤æ–­employeeæ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ä¸ºç©ºåˆ™æ‰§è¡Œwhereæ¡ä»¶ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           where ename=#{_parameter.eName}   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/if&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/select&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DatabaseIdProvider databaseIdProvider() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DatabaseIdProvider databaseIdProvider = new VendorDatabaseIdProvider();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Properties p = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p.setProperty(&quot;Oracle&quot;, &quot;oracle&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p.setProperty(&quot;MySQL&quot;, &quot;mysql&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p.setProperty(&quot;PostgreSQL&quot;, &quot;postgresql&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p.setProperty(&quot;DB2&quot;, &quot;db2&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p.setProperty(&quot;SQL Server&quot;, &quot;sqlserver&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        databaseIdProvider.setProperties(p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return databaseIdProvider;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public SqlSessionFactoryBean sqlSessionFactoryBean(@Qualifier(&quot;dataSource&quot;) DataSource dataSource) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        factoryBean.setDataSource(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        factoryBean.setDatabaseIdProvider(databaseIdProvider());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        factoryBean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(mapperLocations));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return factoryBean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># application.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># åˆ‡æ¢å¯¹åº”çš„ç¯å¢ƒ postgresql mysql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">active</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgresql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># mybatisé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">mybatis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mapper-locations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mapper/</span><span class="token important">**/*.xml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type-aliases-package</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.valten.</span><span class="token important">**.model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># showSql æ§åˆ¶å°æ‰“å°sqlæ—¥å¿—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">logging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">com</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">valten</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">dao</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># application-mysql.yml#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ•°æ®æºé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hikari</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">jdbc-url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/test</span><span class="token punctuation" style="color:#393A34">?</span><span class="token important">&amp;useSSL=false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># application-postgresql.yml#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8002</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ•°æ®æºé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hikari</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">jdbc-url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">postgresql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5432/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> org.postgresql.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--oracle--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.oracle</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ojdbc6</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">11.2.0.3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--postgresql--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.postgresql</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">postgresql</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">9.4.1212</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- é›†æˆmybatis --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.mybatis.spring.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mybatis-spring-boot-starter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.3.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--fastjson--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fastjson</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.2.16</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- druidæ•°æ®åº“è¿æ¥æ± ç»„ä»¶ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">druid-spring-boot-starter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.10</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1317-spring-kafka">13.17. spring kafka<a href="#1317-spring-kafka" class="hash-link" aria-label="Direct link to 13.17. spring kafka" title="Direct link to 13.17. spring kafka">â€‹</a></h2><p><a href="https://docs.spring.io/spring-kafka/docs/current/reference/html/#receiving-messages" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-kafka/docs/current/reference/html/#receiving-messages</a></p><p><a href="https://www.youtube.com/watch?v=SqVfCyfCJqw&amp;t=9s" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=SqVfCyfCJqw&amp;t=9s</a></p><h1>14. web ç›¸å…³</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="141-åŠ è§£å¯†">14.1. åŠ è§£å¯†<a href="#141-åŠ è§£å¯†" class="hash-link" aria-label="Direct link to 14.1. åŠ è§£å¯†" title="Direct link to 14.1. åŠ è§£å¯†">â€‹</a></h2><p><a href="https://github.com/yinjihuan/monkey-api-encrypt" target="_blank" rel="noopener noreferrer">https://github.com/yinjihuan/monkey-api-encrypt</a> api åŠ è§£å¯† </p><p><a href="https://www.baeldung.com/java-aes-encryption-decryption" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/java-aes-encryption-decryption</a> åŠ å¯†ç§‘æ™®</p><p><a href="https://www.cnblogs.com/loong-hon/p/11225407.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/loong-hon/p/11225407.html</a></p><p><a href="https://www.javatt.com/p/22814" target="_blank" rel="noopener noreferrer">https://www.javatt.com/p/22814</a>
<a href="https://blog.csdn.net/github_36086968/article/details/103424945" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/github_36086968/article/details/103424945</a>
<a href="https://jueee.github.io/2021/01/2021-01-06-SpringBoot%E5%AE%9E%E7%8E%B0API%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AEAES%E5%8A%A0%E5%AF%86/" target="_blank" rel="noopener noreferrer">https://jueee.github.io/2021/01/2021-01-06-SpringBoot%E5%AE%9E%E7%8E%B0API%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AEAES%E5%8A%A0%E5%AF%86/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="142-springboot-å‘é€-https-æˆ–è€…-http-å®¢æˆ·ç«¯-client">14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client<a href="#142-springboot-å‘é€-https-æˆ–è€…-http-å®¢æˆ·ç«¯-client" class="hash-link" aria-label="Direct link to 14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client" title="Direct link to 14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client">â€‹</a></h2><p><a href="https://blog.csdn.net/defonds/article/details/86594441" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/defonds/article/details/86594441</a> (<a href="https://prasans.info/making-https-call-using-apache-httpclient/" target="_blank" rel="noopener noreferrer">https://prasans.info/making-https-call-using-apache-httpclient/</a>)
<a href="https://www.cnblogs.com/lfstudy/p/13793625.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/lfstudy/p/13793625.html</a>
<a href="https://www.cnblogs.com/dbei/articles/12746191.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/dbei/articles/12746191.html</a>
<a href="https://segmentfault.com/a/1190000014456939" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000014456939</a> ä½¿ç”¨ resttemplate</p><p><a href="https://square.github.io/okhttp/" target="_blank" rel="noopener noreferrer">https://square.github.io/okhttp/</a>
<a href="https://square.github.io/okhttp/https/" target="_blank" rel="noopener noreferrer">https://square.github.io/okhttp/https/</a></p><p>æ”¯æŒå¼‚æ­¥å›è°ƒ Retrofit: <a href="https://www.jianshu.com/p/4d67fe493ebf" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/4d67fe493ebf</a>
<a href="https://www.zhihu.com/question/36963964" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/36963964</a>
<a href="https://www.jianshu.com/p/5bc866b9cbb9" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/5bc866b9cbb9</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1421-å‘é€-http-client">14.2.1. å‘é€ http client<a href="#1421-å‘é€-http-client" class="hash-link" aria-label="Direct link to 14.2.1. å‘é€ http client" title="Direct link to 14.2.1. å‘é€ http client">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1422-å‘é€-https-client">14.2.2. å‘é€ https client<a href="#1422-å‘é€-https-client" class="hash-link" aria-label="Direct link to 14.2.2. å‘é€ https client" title="Direct link to 14.2.2. å‘é€ https client">â€‹</a></h3><p>okhttp</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class JavaConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;myRestTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RestTemplate restTemplate() throws KeyStoreException, NoSuchAlgorithmException, KeyManagementException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLContext sslContext = org.apache.http.ssl.SSLContexts.custom()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .loadTrustMaterial(null, acceptingTrustStrategy)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CloseableHttpClient httpClient = HttpClients.custom()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setSSLSocketFactory(csf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpComponentsClientHttpRequestFactory requestFactory =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new HttpComponentsClientHttpRequestFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requestFactory.setHttpClient(httpClient);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //60s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requestFactory.setConnectTimeout(60 * 1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requestFactory.setReadTimeout(60 * 1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RestTemplate restTemplate = new RestTemplate(requestFactory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        restTemplate.getMessageConverters().set(1, new StringHttpMessageConverter(StandardCharsets.UTF_8));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return restTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="143-requestcontextholder">14.3. RequestContextHolder<a href="#143-requestcontextholder" class="hash-link" aria-label="Direct link to 14.3. RequestContextHolder" title="Direct link to 14.3. RequestContextHolder">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .getRequestAttributes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpServletRequest request = attributes.getRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="144-è§£å†³-api-ç‰ˆæœ¬å…±å­˜">14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜<a href="#144-è§£å†³-api-ç‰ˆæœ¬å…±å­˜" class="hash-link" aria-label="Direct link to 14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜" title="Direct link to 14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜">â€‹</a></h2><p><a href="https://blog.csdn.net/j903829182/article/details/81836551" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/j903829182/article/details/81836551</a>, <a href="https://www.cnblogs.com/huanshilang/p/12097048.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/huanshilang/p/12097048.html</a> æ”¾åœ¨ url
TODO</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1441-requestmappinghandlermapping">14.4.1. RequestMappingHandlerMapping<a href="#1441-requestmappinghandlermapping" class="hash-link" aria-label="Direct link to 14.4.1. RequestMappingHandlerMapping" title="Direct link to 14.4.1. RequestMappingHandlerMapping">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1442-request-matcher">14.4.2. request matcher<a href="#1442-request-matcher" class="hash-link" aria-label="Direct link to 14.4.2. request matcher" title="Direct link to 14.4.2. request matcher">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private RequestMatcher matcherHtml = new AntPathRequestMatcher(&quot;/**&quot;, &quot;GET&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">æŠŠServletRequestè½¬åŒ–æˆHttpServletRequest,å¼ºè½¬å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">è°ƒç”¨matchesæ–¹æ³•è¿›è¡ŒåŒ¹é… boolean matches(HttpServletRequest request)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1443-request-condition">14.4.3. request condition<a href="#1443-request-condition" class="hash-link" aria-label="Direct link to 14.4.3. request condition" title="Direct link to 14.4.3. request condition">â€‹</a></h3><p>åœ¨ spring mvc ä¸­ï¼Œé€šè¿‡DispatchServletæ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„ä¸€ä¸ªè¯·æ±‚ä¹‹åï¼Œä¼šé€šè¿‡ HanderMapping æ¥è·å–å¯¹åº”çš„è¯·æ±‚å¤„ç†å™¨ï¼›è€Œ HanderMapping å¦‚ä½•æ‰¾åˆ°å¯ä»¥å¤„ç†è¿™ä¸ªè¯·æ±‚çš„å¤„ç†å™¨å‘¢ï¼Œè¿™å°±éœ€è¦ RequestCondition æ¥å†³å®šäº†</p><p>æœ€ç»ˆçš„å®ç°ç±»å¯èƒ½æ˜¯é’ˆå¯¹ä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼šè·¯å¾„åŒ¹é…ï¼Œå¤´éƒ¨åŒ¹é…ï¼Œè¯·æ±‚å‚æ•°åŒ¹é…ï¼Œå¯äº§ç”ŸMIMEåŒ¹é…ï¼Œå¯æ¶ˆè´¹MIMEåŒ¹é…ï¼Œè¯·æ±‚æ–¹æ³•åŒ¹é…ï¼Œæˆ–è€…æ˜¯ä»¥ä¸Šå„ç§æƒ…å†µçš„åŒ¹é…æ¡ä»¶çš„ä¸€ä¸ªç»„åˆ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface RequestCondition&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä¸€ä¸ªhttpæ¥å£ä¸Šæœ‰å¤šä¸ªæ¡ä»¶è§„åˆ™æ—¶ï¼Œç”¨äºåˆå¹¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ¯”å¦‚ç±»ä¸ŠæŒ‡å®šäº†@RequestMappingçš„ url ä¸º root - è€Œæ–¹æ³•ä¸ŠæŒ‡å®šçš„@RequestMappingçš„ url ä¸º method - é‚£ä¹ˆåœ¨è·å–è¿™ä¸ªæ¥å£çš„ url åŒ¹é…è§„åˆ™æ—¶ï¼Œç±»ä¸Šæ‰«æä¸€æ¬¡ï¼Œæ–¹æ³•ä¸Šæ‰«æä¸€æ¬¡ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŠŠè¿™ä¸¤ä¸ªåˆå¹¶æˆä¸€ä¸ªï¼Œè¡¨ç¤ºè¿™ä¸ªæ¥å£åŒ¹é…root/method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    T combine(T other);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åˆ¤æ–­æ˜¯å¦æˆåŠŸï¼Œå¤±è´¥è¿”å› nullï¼›å¦åˆ™ï¼Œåˆ™è¿”å›åŒ¹é…æˆåŠŸçš„æ¡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä¸¾ä¸ªä¾‹å­æ¥è®²ï¼Œå¦‚æœå½“å‰è¯·æ±‚åŒ¹é…æ¡ä»¶æ˜¯ä¸€ä¸ªè·¯å¾„åŒ¹é…æ¡ä»¶ï¼ŒåŒ…å«å¤šä¸ªè·¯å¾„åŒ¹é…æ¨¡æ¿ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¹¶ä¸”å…¶ä¸­æœ‰äº›æ¨¡æ¿å’ŒæŒ‡å®šè¯·æ±‚requeståŒ¹é…ï¼Œé‚£ä¹ˆè¿”å›çš„æ–°å»ºçš„è¯·æ±‚åŒ¹é…æ¡ä»¶å°†ä»…ä»…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åŒ…å«å’ŒæŒ‡å®šè¯·æ±‚requeståŒ¹é…çš„é‚£äº›è·¯å¾„æ¨¡æ¿ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    T getMatchingCondition(HttpServletRequest request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¤šä¸ªéƒ½æ»¡è¶³æ¡ä»¶æ—¶ï¼Œç”¨æ¥æŒ‡å®šå…·ä½“é€‰æ‹©å“ªä¸€ä¸ªã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int compareTo(T other, HttpServletRequest request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AbstractRequestCondition å®ç°äº†equals,hashCodeå’ŒtoString é€šç”¨æ–¹æ³•, è¿˜é€šè¿‡protectedæŠ½è±¡æ–¹æ³•çº¦å®šäº†å®ç°ç±»å…¶ä»–çš„ä¸€äº›å†…éƒ¨é€šç”¨é€»è¾‘</p><p>å…·ä½“å®ç°ç±»:</p><ul><li>PatternsRequestCondition	è·¯å¾„åŒ¹é…æ¡ä»¶</li><li>RequestMethodsRequestCondition	è¯·æ±‚æ–¹æ³•(get post delete..)åŒ¹é…æ¡ä»¶</li><li>ParamsRequestCondition	è¯·æ±‚å‚æ•°åŒ¹é…æ¡ä»¶</li><li>HeadersRequestCondition	å¤´éƒ¨ä¿¡æ¯åŒ¹é…æ¡ä»¶</li><li>ConsumesRequestCondition	å¯æ¶ˆè´¹MIMEåŒ¹é…æ¡ä»¶</li><li>ProducesRequestCondition	å¯ç”ŸæˆMIMEåŒ¹é…æ¡ä»¶</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="145-æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£">14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£<a href="#145-æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£" class="hash-link" aria-label="Direct link to 14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£" title="Direct link to 14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RequestParam å¯ä»¥ç”¨äºä»query parameters, form data, å’Œparts in multipart requestsä¸­è·å–å‚æ•°ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å³GETè¯·æ±‚å’ŒPOSTï¼ˆapplication/x-www-form-urlencoded ï¼Œmultipart/form-dataï¼‰è¯·æ±‚çš„å‚æ•°éƒ½å¯ä»¥ä½¿ç”¨@RequestParam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestPart ç”¨åœ¨multipart/form-dataè¡¨å•æäº¤è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œæ”¯æŒçš„è¯·æ±‚æ–¹æ³•çš„æ–¹å¼MultipartFileï¼Œå±äºSpringçš„MultipartResolverç±»ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å‰ä¸‰ç§æ”¯æŒ application/x-www-form-urlencoded;charset=UTF-8â€™ æ ¼å¼ (è¡¨å•æäº¤), æ˜¯æµè§ˆå™¨é»˜è®¤çš„ç¼–ç æ ¼å¼ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// multipart/form-data æ ¼å¼ åŒºåˆ«: ä¸ä¼šå¯¹å‚æ•°ç¼–ç ï¼Œä½¿ç”¨çš„boundary(åˆ†å‰²çº¿)ï¼Œç›¸å½“äº&amp;ï¼Œboundaryçš„å€¼æ˜¯----Web**AJv3ã€‚ æ–‡ä»¶ä¸Šä¼ å¿…é¡»è¦è¿™ç§æ ¼å¼, ä¹Ÿå¯ç”¨äºé”®å€¼å¯¹å‚æ•°ï¼Œæœ€åè¿æ¥æˆä¸€ä¸²å­—ç¬¦ä¼ è¾“ (ref: https://www.jianshu.com/p/53b5bd0f1d44)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// @requestParam æ³¨è§£æ–¹æ³•å‚æ•°, å¯çœç•¥, å¯ä»¥æœ‰å¤šä¸ª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiOperation(&quot;æŸ¥è¯¢ç”¨æˆ·&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;/detailByParam&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void detailByParam(@RequestParam (value = &quot;id&quot;) Integer id,@RequestParam(value = &quot;roleName&quot;) String roleName,@RequestParam(value = &quot;roleDes&quot;) String roleDes) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;&gt;&gt;&gt;id=&quot;+id+&quot;,roleName=&quot;+roleName+&quot;,roleDes=&quot;+roleDes);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // &gt;&gt;&gt;id=1,roleName=admin,roleDes=æ‹¥æœ‰adminæƒé™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiOperation(&quot;æŸ¥è¯¢ç”¨æˆ·&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;/detailByParam&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void detailByParam(@RequestParam Map&lt;String, String&gt; params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;&gt;&gt;&gt;id=&quot;+params.get(&quot;id&quot;)+&quot;,roleName=&quot;+params.get(&quot;roleName&quot;)+&quot;,roleDes=&quot;+params.get(&quot;roleDes&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // &gt;&gt;&gt;id=1,roleName=admin,roleDes=æ‹¥æœ‰adminæƒé™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiOperation(&quot;æŸ¥è¯¢ç”¨æˆ·&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;/detailByParam&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void detailByParam(@RequestBody String params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;&gt;&gt;&gt;&quot;+params);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // &gt;&gt;&gt;id=1&amp;roleName=admin&amp;roleDes=%E6%8B%A5%E6%9C%89admin%E6%9D%83%E9%99%90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å‚æ•°ç”¨ &amp; éš”ç¦»å¼€, å¯¹äºGetè¯·æ±‚ï¼Œæ˜¯å°†å‚æ•°è½¬æ¢?key=value&amp;key=valueæ ¼å¼ï¼Œè¿æ¥åˆ°urlå</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å¦‚æœå‚æ•°å€¼ä¸­éœ€è¦&amp;ï¼Œåˆ™å¿…é¡»å¯¹å…¶è¿›è¡Œç¼–ç ã€‚ç¼–ç æ ¼å¼å°±æ˜¯application/x-www-form-urlencodedï¼ˆå°†é”®å€¼å¯¹çš„å‚æ•°ç”¨&amp;è¿æ¥èµ·æ¥ï¼Œå¦‚æœæœ‰ç©ºæ ¼ï¼Œå°†ç©ºæ ¼è½¬æ¢ä¸º+åŠ å·ï¼›æœ‰ç‰¹æ®Šç¬¦å·ï¼Œå°†ç‰¹æ®Šç¬¦å·è½¬æ¢ä¸ºASCII HEXå€¼ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä»…æ”¯æŒ application/json  æ ¼å¼, ä¸æ”¯æŒ application/x-www-form-urlencoded;charset=UTF-8â€™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiOperation(&quot;æŸ¥è¯¢ç”¨æˆ·&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;/detailByParam&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void detailByParam(@RequestBody GetRoleParam getRoleParam) {// @RequestBody æ³¨è§£å‚æ•°, ä¸å¯çœç•¥, æœ€å¤šåªèƒ½ä¸€ä¸ª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;&gt;&gt;&gt;&quot;+getRoleParam); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="146-è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹">14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹<a href="#146-è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹" class="hash-link" aria-label="Direct link to 14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹" title="Direct link to 14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹">â€‹</a></h2><p>è‹¥æœåªæ˜¯ä¸€ä¸ªä¸¤ä¸ªç±»å‹éœ€è¦è½¬æ¢, ç›´æ¥å®ç°  org.springframework.core.convert.converter.Converter ç„¶åæ ‡æ³¨ component å³å¯ (åŒ…å«è¿ä¸ªæ³›å‹, ç¬¬ä¸€ä¸ªæ˜¯è¯·æ±‚ä¸­åŸå§‹ç±»å‹å¦‚ Integer, ç¬¬äºŒä¸ªæ³›å‹æ˜¯ å¸Œæœ›è½¬æ¢åçš„ç±»å‹å¦‚ enum),</p><p>å¯¹ get/post è¯·æ±‚éƒ½æœ‰æ•ˆ</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ä¾‹å­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StringToDateConverter implements Converter&lt;String, Date&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Date convert(String s) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Date parse = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parse = simpleDateFormat.parse(s);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (ParseException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return parse;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ä¾‹æ¡ˆä¾‹: æšä¸¾è½¬æ¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class QueryRequest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private GenderEnum gender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@GetMapping(&quot;/get&quot;)//gender åªèƒ½æ¥æ”¶åˆ° MALE ã€FEMALE è¿™æ ·çš„å‚æ•°ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œå‡ä¼šæŠ¥ç±»å‹ä¸åŒ¹é…çš„é”™è¯¯ä¿¡æ¯ï¼Œæ­¤æ—¶æ˜¯æ— æ³•å¤„ç† 0 ã€1 è¿™æ ·çš„å‚æ•°çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Dict testGet(QueryRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.info(&quot;ã€get-requestã€‘= {}&quot;, JSONUtil.toJsonStr(request));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Dict.create().set(&quot;get-request&quot;, request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PostMapping(&quot;/post&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Dict testPost(@RequestBody QueryRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.info(&quot;ã€post-requestã€‘= {}&quot;, JSONUtil.toJsonStr(request));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Dict.create().set(&quot;post-request&quot;, request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¢åŠ ä¸€ä¸ªè½¬æ¢å™¨å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class IntegerCodeToGenderEnumConverter implements Converter&lt;Integer, GenderEnum&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;Integer, GenderEnum&gt; enumMap = Maps.newHashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public IntegerCodeToGenderEnumConverter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (GenderEnum genderEnum : GenderEnum.values()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            enumMap.put(genderEnum.getCode(), genderEnum);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public GenderEnum convert(Integer source) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GenderEnum genderEnum = enumMap.get(source);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (ObjectUtil.isNull(genderEnum)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new IllegalArgumentException(&quot;æ— æ³•åŒ¹é…å¯¹åº”çš„æšä¸¾ç±»å‹&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return genderEnum;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“æˆ‘ä»¬çš„æšä¸¾ç±»ç‰¹åˆ«å¤šçš„æ—¶å€™, ä¸ä½¿ç”¨ä¸Šé¢ç›´æ¥ä½¿ç”¨ Converter çš„è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¼•å…¥ ConverterFactory æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//é€šç”¨æšä¸¾æ¥å£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface BaseEnum {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–æšä¸¾ç¼–ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return ç¼–ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Integer getCode();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public enum GenderEnum implements BaseEnum {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ç”·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MALE(0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å¥³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FEMALE(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ€§åˆ«ç¼–ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer code;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GenderEnum(int code) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.code = code;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class IntegerToEnumConverter&lt;T extends BaseEnum&gt; implements Converter&lt;Integer, T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;Integer, T&gt; enumMap = Maps.newHashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public IntegerToEnumConverter(Class&lt;T&gt; enumType) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T[] enums = enumType.getEnumConstants();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (T e : enums) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            enumMap.put(e.getCode(), e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public T convert(Integer source) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T t = enumMap.get(source);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (ObjectUtil.isNull(t)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new IllegalArgumentException(&quot;æ— æ³•åŒ¹é…å¯¹åº”çš„æšä¸¾ç±»å‹&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return t;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//åˆ›å»ºå¯¹åº”çš„è‡ªå®šä¹‰ ConverterFactory å·¥å‚ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class IntegerCodeToEnumConverterFactory implements ConverterFactory&lt;Integer, BaseEnum&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final Map&lt;Class, Converter&gt; CONVERTERS = Maps.newHashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–ä¸€ä¸ªä» Integer è½¬åŒ–ä¸º T çš„è½¬æ¢å™¨ï¼ŒT æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œæœ‰å¤šä¸ªå®ç°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param targetType è½¬æ¢åçš„ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return è¿”å›ä¸€ä¸ªè½¬åŒ–å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public &lt;T extends BaseEnum&gt; Converter&lt;Integer, T&gt; getConverter(Class&lt;T&gt; targetType) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Converter&lt;Integer, T&gt; converter = CONVERTERS.get(targetType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (converter == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            converter = new IntegerToEnumConverter&lt;&gt;(targetType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            CONVERTERS.put(targetType, converter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return converter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ³¨å†Œå·¥å‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebMvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æšä¸¾ç±»çš„è½¬æ¢å™¨å·¥å‚ addConverterFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addFormatters(FormatterRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addConverterFactory(new IntegerCodeToEnumConverterFactory());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addConverterFactory(new StringCodeToEnumConverterFactory());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="147-è¿”å›å›¾ç‰‡">14.7. è¿”å›å›¾ç‰‡<a href="#147-è¿”å›å›¾ç‰‡" class="hash-link" aria-label="Direct link to 14.7. è¿”å›å›¾ç‰‡" title="Direct link to 14.7. è¿”å›å›¾ç‰‡">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(value = &quot;/image&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ImageController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(value = &quot;/get&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void getImage(HttpServletResponse response) throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File file = new File(&quot;D:/test.jpg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileInputStream inputStream = new FileInputStream(file);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        byte[] bytes = new byte[inputStream.available()];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        response.setContentType(&quot;image/jpeg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OutputStream out = response.getOutputStream();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       out.write(result);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       out.flush();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       //å…³é—­å“åº”è¾“å‡ºæµ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       out.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(value = &quot;/image&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ImageController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(value = &quot;/get&quot;,produces = MediaType.IMAGE_JPEG_VALUE) //å¦‚æœæ˜¯ç½‘é¡µçš„è¯ï¼Œproduces = MediaType.TEXT_HTML</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public byte[] getImage() throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File file = new File(&quot;D:/test.jpg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileInputStream inputStream = new FileInputStream(file);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        byte[] bytes = new byte[inputStream.available()];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        inputStream.read(bytes, 0, inputStream.available());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bytes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="148-rest-api-æ–‡æ¡£">14.8. rest api æ–‡æ¡£<a href="#148-rest-api-æ–‡æ¡£" class="hash-link" aria-label="Direct link to 14.8. rest api æ–‡æ¡£" title="Direct link to 14.8. rest api æ–‡æ¡£">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1481-knife4j">14.8.1. knife4j<a href="#1481-knife4j" class="hash-link" aria-label="Direct link to 14.8.1. knife4j" title="Direct link to 14.8.1. knife4j">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1482-springdoc-openapi">14.8.2. springdoc-openapi<a href="#1482-springdoc-openapi" class="hash-link" aria-label="Direct link to 14.8.2. springdoc-openapi" title="Direct link to 14.8.2. springdoc-openapi">â€‹</a></h3><p><a href="https://springdoc.org/" target="_blank" rel="noopener noreferrer">https://springdoc.org/</a></p><p><a href="https://www.baeldung.com/spring-rest-openapi-documentation" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/spring-rest-openapi-documentation</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1483-swagger3">14.8.3. swagger3<a href="#1483-swagger3" class="hash-link" aria-label="Direct link to 14.8.3. swagger3" title="Direct link to 14.8.3. swagger3">â€‹</a></h3><p>è®¿é—® /swagger-ui.html or /swagger-ui/index.html (springdoc.swagger-ui.path=/swagger-ui.html)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.springfox</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">springfox-boot-starter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.0.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@EnableOpenApi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@MapperScan(basePackages = {&quot;cn.ruiyeclub.dao&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Swagger3Application {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(Swagger3Application.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Swagger3Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Docket createRestApi() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Docket(DocumentationType.OAS_30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .apiInfo(apiInfo())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .select()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .paths(PathSelectors.any())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // åè®®ä½¿ç”¨ http; é»˜è®¤æ˜¯ https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .protocols(Stream.of(&quot;http&quot;).collect(Collectors.toSet()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ApiInfo apiInfo() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new ApiInfoBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .title(&quot;Swagger3æ¥å£æ–‡æ¡£&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .version(&quot;1.0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1484-é›†æˆswagger2">14.8.4. é›†æˆswagger2<a href="#1484-é›†æˆswagger2" class="hash-link" aria-label="Direct link to 14.8.4. é›†æˆswagger2" title="Direct link to 14.8.4. é›†æˆswagger2">â€‹</a></h3><p><a href="http://springfox.github.io/springfox/docs/snapshot/#springfox-spring-mvc-and-spring-boot" target="_blank" rel="noopener noreferrer">http://springfox.github.io/springfox/docs/snapshot/#springfox-spring-mvc-and-spring-boot</a></p><ul><li>swagger2é…ç½®ç±»ï¼Œå’ŒAPPå¯åŠ¨ç±»åŒçº§ï¼Œ@Configurationï¼Œ@EnableSwagger2</li><li>è®¿é—®ï¼šhttp://localhost:8080/swagger-ui.html</li><li>é…ç½®mvcæ—¶å€™ï¼Œ å¦‚æœç»§æ‰¿äº†WebMvcConfigurationSupportï¼Œ éœ€è¦é‡æ–°æ³¨å…¥èµ„æºæ–‡ä»¶ï¼Œ å¦åˆ™è®¿é—®ä¸åˆ°swagger-ui.html;(<a href="https://blog.csdn.net/zjcjava/article/details/78064264" target="_blank" rel="noopener noreferrer">ref</a>)</li><li>åˆ†ç¯å¢ƒå¼€å¯ <ul><li>åœ¨é…ç½®ç±»ä¸Šæ ‡æ³¨ @Profile({&quot;dev&quot;,&quot;test&quot;})</li><li>æˆ–è€… åœ¨new Docketé‡Œæ·»åŠ .Enable(true/false)æ–¹æ³•</li></ul></li><li>springfox.documentation.swagger-ui.enabled=false ç”Ÿäº§ env ä¸‹ close</li></ul><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ä¼šå¼•å…¥ è°·æ­Œçš„ guava --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ç‰ˆæœ¬å¯çœç•¥ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.springfox</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">springfox-swagger2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.6.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.springfox</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">springfox-swagger-ui</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.6.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableSwagger2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Swagger2Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ·»åŠ  swagger é™æ€èµ„æºå¤„ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä¸€èˆ¬æˆ‘ä»¬ä¼šè®¾ç½® mvc ä¸­, spring.resources.add-mappings=false, å¯¹é™æ€èµ„æºé»˜è®¤ä¸å¤„ç†, è¿™æ˜¯éœ€è¦ä¸º swagger æ·»åŠ ä¾‹å¤– (è¿˜ä¼šè®¾ç½® spring.mvc.throw-exception-if-no-handler-found=true æ²¡æ‰¾åˆ° Handleræ—¶ç›´æ¥æŠ›å‡ºå¼‚å¸¸)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    public WebMvcConfigurer swaggerPassConfigure() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        return new WebMvcConfigurer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            public void addResourceHandlers(ResourceHandlerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                registry.addResourceHandler(&quot;swagger-ui.html&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                        .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;, &quot;/static&quot;, &quot;/public&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                registry.addResourceHandler(&quot;/webjars/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                        .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Docket api() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ParameterBuilder ticketPar = new ParameterBuilder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Parameter&gt; pars = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ticketPar.name(&quot;Access-Token&quot;).description(&quot;Restæ¥å£æƒé™è®¤è¯token,æ— éœ€é‰´æƒå¯ä¸ºç©º&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .modelRef(new ModelRef(&quot;string&quot;)).parameterType(&quot;header&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //headerä¸­çš„ticketå‚æ•°éå¿…å¡«ï¼Œä¼ ç©ºä¹Ÿå¯ä»¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .required(false).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ ¹æ®æ¯ä¸ªæ–¹æ³•åä¹ŸçŸ¥é“å½“å‰æ–¹æ³•åœ¨è®¾ç½®ä»€ä¹ˆå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pars.add(ticketPar.build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Docket(DocumentationType.SWAGGER_2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .apiInfo(apiInfo())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .select()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // æ ¹æ®åŒ…åæ‰«æcontroller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // è‡ªè¡Œä¿®æ”¹ä¸ºè‡ªå·±çš„åŒ…è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .apis(RequestHandlerSelectors.basePackage(&quot;com.tgpms&quot;)) // å¤šåŒ…é…ç½®: https://www.jianshu.com/p/78309feb5d5a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // æ‰«ææ‰€æœ‰controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // .apis(RequestHandlerSelectors.any()) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // æŒ‡å®šæ‰«æéƒ¨åˆ†æ³¨è§£æ ‡æ³¨çš„ controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // .apis(RequestHandlerSelectors.withMethodAnnotation(Api.class/ApiOperation.class))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .paths(PathSelectors.any()) // .paths() è¿™ä¸ªæ˜¯åŒ…è·¯å¾„ä¸‹çš„è·¯å¾„,PathSelectors.any()æ˜¯åŒ…ä¸‹æ‰€æœ‰è·¯å¾„                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // å…¨å±€è®¾ç½®è¯·æ±‚å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .globalOperationParameters(pars);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç”Ÿæˆå…¨å±€é€šç”¨å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // private List&lt;RequestParameter&gt; getGlobalRequestParameters() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     List&lt;RequestParameter&gt; parameters = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     parameters.add(new RequestParameterBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .name(&quot;appid&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .description(&quot;å¹³å°id&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .required(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .in(ParameterType.QUERY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .query(q -&gt; q.model(m -&gt; m.scalarModel(ScalarType.STRING)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .required(false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     parameters.add(new RequestParameterBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .name(&quot;udid&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .description(&quot;è®¾å¤‡çš„å”¯ä¸€id&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .required(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .in(ParameterType.QUERY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .query(q -&gt; q.model(m -&gt; m.scalarModel(ScalarType.STRING)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .required(false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     parameters.add(new RequestParameterBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .name(&quot;version&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .description(&quot;å®¢æˆ·ç«¯çš„ç‰ˆæœ¬å·&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .required(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .in(ParameterType.QUERY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .query(q -&gt; q.model(m -&gt; m.scalarModel(ScalarType.STRING)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .required(false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //             .build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //      return parameters;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // //ç”Ÿæˆé€šç”¨å“åº”ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // private List&lt;Response&gt; getGlobalResonseMessage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     List&lt;Response&gt; responseList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     responseList.add(new ResponseBuilder().code(&quot;404&quot;).description(&quot;æ‰¾ä¸åˆ°èµ„æº&quot;).build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //      return responseList;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ApiInfo apiInfo() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new ApiInfoBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .title(&quot;online exam by springboot&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .description(&quot;åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ by æ¢å±±å¹¿ at 2020&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .termsOfServiceUrl(&quot;https://github.com/19920625lsg/spring-boot-online-exam&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .version(&quot;1.0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .contact(new Contact(&quot;liangshanguang&quot;, &quot;https://github.com/19920625lsg/spring-boot-online-exam&quot;, &quot;liangshanguang2@gmail.com&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Api(&quot;æµ‹è¯•ç”¨ä¾‹1&quot;) on controller class, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ApiOperation(value = &quot;apiOperationSwaggerTest&quot;, notes = &quot;apiOperationSwaggeræµ‹è¯•&quot;) on controller class method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiParam(name = &quot;id&quot;, value = &quot;idå…¥å‚&quot;, required = true) on method params</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiModel(description = &quot;æµ‹è¯•å®ä½“ç±»&quot;, value = &quot;æµ‹è¯•å®ä½“ç±»&quot;) on data model class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ApiModelProperty(name = &quot;userName&quot;, value = &quot;ç”¨æˆ·å&quot;, required = false, exmaple = &quot;å°æ˜&quot;) on data module class field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiImplicitParams({@ApiImplicitParam(name = &quot;id&quot;, value = &quot;idå…¥å‚&quot;, required = true, dataType = &quot;Integer&quot;, paramType = &quot;query&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        @ApiImplicitParam(name = &quot;brand&quot;, value = &quot;brand&quot;, required = true, dataType = &quot;BRAND&quot;, paramType = &quot;body&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }) on controller class method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ApiImplicitParamsï¼šç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å‚æ•°è¯´æ˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ApiImplicitParamï¼šç”¨åœ¨@ApiImplicitParamsæ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nameï¼šå‚æ•°å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        valueï¼šå‚æ•°çš„æ±‰å­—è¯´æ˜ã€è§£é‡Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requiredï¼šå‚æ•°æ˜¯å¦å¿…é¡»ä¼ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        paramTypeï¼šå‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Â· header --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestHeader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Â· query --&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestParam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Â· pathï¼ˆç”¨äºrestfulæ¥å£ï¼‰--&gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@PathVariable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Â· bodyï¼ˆä¸å¸¸ç”¨ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Â· formï¼ˆä¸å¸¸ç”¨ï¼‰    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dataTypeï¼šå‚æ•°ç±»å‹ï¼Œé»˜è®¤Stringï¼Œå…¶å®ƒå€¼dataType=&quot;Integer&quot;       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        defaultValueï¼šå‚æ•°çš„é»˜è®¤å€¼</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="149-è¿‡æ»¤å™¨-å’Œ-æ‹¦æˆªå™¨">14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨<a href="#149-è¿‡æ»¤å™¨-å’Œ-æ‹¦æˆªå™¨" class="hash-link" aria-label="Direct link to 14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨" title="Direct link to 14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1491-åŒºåˆ«">14.9.1. åŒºåˆ«<a href="#1491-åŒºåˆ«" class="hash-link" aria-label="Direct link to 14.9.1. åŒºåˆ«" title="Direct link to 14.9.1. åŒºåˆ«">â€‹</a></h3><p>servlet filterå’Œspring mvc InterceptoråŒºåˆ«ï¼š</p><ul><li><p>Filter æ˜¯åŸºäº å‡½æ•°å›è°ƒçš„ï¼Œè€Œ Interceptor åˆ™æ˜¯åŸºäº Java åå°„ å’Œ åŠ¨æ€ä»£ç†ã€‚</p></li><li><p>Filter ä¾èµ–äº Servlet å®¹å™¨, å’Œservletå®¹å™¨éš”çš„è¿‘ï¼Œè€Œ Interceptor ä¾èµ–springmvc, å’Œåº”ç”¨éš”çš„è¿‘, åœ¨æœ€é‡Œå±‚ã€‚æ‰€ä»¥filter å…ˆè¿›å…¥, æœ€åé€€å‡º</p></li><li><p>Filter å¯¹å‡ ä¹ æ‰€æœ‰çš„è¯·æ±‚ èµ·ä½œç”¨ï¼Œè€Œ Interceptor åªå¯¹ Controller è¯·æ±‚èµ·ä½œç”¨ã€‚</p></li><li><p>æ‹¦æˆªå™¨å¯ä»¥è·å–IOCå®¹å™¨ä¸­çš„å„ä¸ªbeanï¼Œè€Œè¿‡æ»¤å™¨å°±ä¸è¡Œï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œåœ¨æ‹¦æˆªå™¨é‡Œæ³¨å…¥ä¸€ä¸ªserviceï¼Œå¯ä»¥è°ƒç”¨ä¸šåŠ¡é€»è¾‘ã€‚</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1492-ä½¿ç”¨-filter">14.9.2. ä½¿ç”¨ filter<a href="#1492-ä½¿ç”¨-filter" class="hash-link" aria-label="Direct link to 14.9.2. ä½¿ç”¨ filter" title="Direct link to 14.9.2. ä½¿ç”¨ filter">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scenario 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ç›´æ¥å®ç°Filteræ¥å£ï¼Œå¹¶ä½¿ç”¨@Component, æ‹¦æˆªæ‰€æœ‰è·¯å¾„ &quot;/*&quot;, è¿™ç§æ–¹å¼å¯ä»¥æ³¨å…¥ bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å®ç°Filteræ¥å£ï¼Œç”¨@WebFilteræ³¨è§£ï¼ŒæŒ‡å®šæ‹¦æˆªè·¯å¾„ä»¥åŠä¸€äº›å‚æ•°ï¼ŒåŒæ—¶éœ€è¦åœ¨å¯åŠ¨ç±»ä½¿ç”¨@ServletComponentScanæ‰«æå¸¦@WebFilterã€@WebServletã€@WebListener, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">è¿™ç§æ–¹å¼æ— æ³•æ³¨å…¥ bean, é™¤é å’Œ @component ä¸€èµ·ä½¿ç”¨, ä½†æ˜¯éœ€è¦é…ç½®è¦†ç›– bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#å¯ç”¨è¦†ç›–åŒåbean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.main.allow-bean-definition-overriding=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario 3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyFilterConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MyFilter myFilter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FilterRegistrationBean&lt;MyFilter&gt; thirdFilter() { // æ³›å‹æŒ‡å®š filter ç±»å‹, so å¤šä¸ª filter æ¯ä¸ªéƒ½è¦ä¸€ä¸ª bean æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterRegistrationBean&lt;MyFilter&gt; filterRegistrationBean = new FilterRegistrationBean&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterRegistrationBean.setOrder(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterRegistrationBean.setFilter(myFilter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filterRegistrationBean.setUrlPatterns(new ArrayList&lt;&gt;(Arrays.asList(&quot;/api/*&quot;)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return filterRegistrationBean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å’Œ è¿™é‡Œçš„ filter ä¸åŒ, è¿™é‡Œæ˜¯ä¸ºäº†è¿‡æ»¤ æ‰«æ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ComponentScan(value=&quot;com.wxj&quot;,excludeFilters= {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Filter(type=FilterType.ANNOTATION,classes= {Controller.class})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1493-ä½¿ç”¨-interceptor">14.9.3. ä½¿ç”¨ interceptor<a href="#1493-ä½¿ç”¨-interceptor" class="hash-link" aria-label="Direct link to 14.9.3. ä½¿ç”¨ interceptor" title="Direct link to 14.9.3. ä½¿ç”¨ interceptor">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="14931-åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨">14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨<a href="#14931-åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨" class="hash-link" aria-label="Direct link to 14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨" title="Direct link to 14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨">â€‹</a></h4><p><a href="https://www.baeldung.com/spring-mvc-handlerinterceptor" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/spring-mvc-handlerinterceptor</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">å®ç° HandlerInterceptor æ¥å£,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class InterfaceAuthCheckInterceptor implements HandlerInterceptor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private Logger logger = LoggerFactory.getLogger(getClass());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StringRedisTemplate stringRedisTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // é…ç½®      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class InterceptorConfig implements WebMvcConfigurer { // WebMvcConfigurerAdapter è¿‡æ—¶, WebMvcConfigurationSupport, å¯¹äº classpath:/META/resources/ï¼Œclasspath:/resources/ï¼Œclasspath:/static/ï¼Œclasspath:/public/ï¼‰ä¸ç”Ÿæ•ˆ, æ‰€ä»¥é€‰æ‹©WebMvcConfigurer æœ€å¥½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @autowire</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .... interceptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addInterceptors(InterceptorRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å¤šä¸ªæ‹¦æˆªå™¨ç»„æˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾, åŠ å…¥çš„é¡ºåºå°±æ˜¯æ‹¦æˆªå™¨æ‰§è¡Œçš„é¡ºåº, ä¹Ÿå¯ä½¿ç”¨ @order(-1/0/1...)æŒ‡å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // addPathPatterns ç”¨äºæ·»åŠ æ‹¦æˆªè§„åˆ™, é»˜è®¤æ‹¦æˆªæ‰€æœ‰ å³ /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // excludePathPatterns ç”¨æˆ·æ’é™¤æ‹¦æˆª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addInterceptor(interceptor).addPathPatterns(&quot;/api/**&quot;).exclude(&quot;...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="14932-åŸºäº-url-æ‹¦æˆª">14.9.3.2. åŸºäº url æ‹¦æˆª<a href="#14932-åŸºäº-url-æ‹¦æˆª" class="hash-link" aria-label="Direct link to 14.9.3.2. åŸºäº url æ‹¦æˆª" title="Direct link to 14.9.3.2. åŸºäº url æ‹¦æˆª">â€‹</a></h4><p>ä¸€ç§æ–¹å¼æ˜¯ åœ¨é…ç½®ä¸­ registry.addInterceptor(interceptor).addPathPatterns(&quot;/api/**&quot;).exclude(&quot;...&quot;);</p><p>ä¸€ç§æ˜¯ç›´æ¥åœ¨ prehandle() ä¸­å¤„ç† String path = request.getServletPath(), path.matches(Const.NO_INTERCEPTOR_PATH å°±æ˜¯åŸºäºæ­£åˆ™åŒ¹é…çš„url </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="14933-åŸºäºæ³¨è§£æ‹¦æˆª">14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª<a href="#14933-åŸºäºæ³¨è§£æ‹¦æˆª" class="hash-link" aria-label="Direct link to 14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª" title="Direct link to 14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª">â€‹</a></h4><p>interceptor ä¹Ÿå±äº aop, </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class AuthorityInterceptor extends HandlerInterceptorAdapter{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å¦‚æœä¸æ˜¯æ˜ å°„åˆ°æ–¹æ³•ç›´æ¥é€šè¿‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!(handler instanceof HandlerMethod)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // â‘ :START æ–¹æ³•æ³¨è§£çº§æ‹¦æˆªå™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HandlerMethod handlerMethod = (HandlerMethod) handler;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method method = handlerMethod.getMethod();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆ¤æ–­æ¥å£æ˜¯å¦éœ€è¦ç™»å½•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LoginRequired methodAnnotation = method.getAnnotation(LoginRequired.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æœ‰ @LoginRequired æ³¨è§£ï¼Œéœ€è¦è®¤è¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (methodAnnotation != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // è¿™å†™ä½ æ‹¦æˆªéœ€è¦å¹²çš„äº‹å„¿ï¼Œæ¯”å¦‚å–ç¼“å­˜ï¼ŒSESSIONï¼Œæƒé™åˆ¤æ–­ç­‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;====================================&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1410-servlet-druid-ç›‘æ§">14.10. servlet Druid ç›‘æ§<a href="#1410-servlet-druid-ç›‘æ§" class="hash-link" aria-label="Direct link to 14.10. servlet Druid ç›‘æ§" title="Direct link to 14.10. servlet Druid ç›‘æ§">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DruidConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource druid(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return  new DruidDataSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //é…ç½®Druidçš„ç›‘æ§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //1ã€é…ç½®ä¸€ä¸ªç®¡ç†åå°çš„Servlet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ServletRegistrationBean statViewServlet(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletRegistrationBean bean = new ServletRegistrationBean(new StatViewServlet(), &quot;/druid/*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;loginUsername&quot;,&quot;admin&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;loginPassword&quot;,&quot;123456&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;allow&quot;,&quot;&quot;);//é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;deny&quot;,&quot;192.168.15.21&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setInitParameters(initParams);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //2ã€é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FilterRegistrationBean webStatFilter(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FilterRegistrationBean bean = new FilterRegistrationBean();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setFilter(new WebStatFilter());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initParams.put(&quot;exclusions&quot;,&quot;*.js,*.css,/druid/*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setInitParameters(initParams);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bean.setUrlPatterns(Arrays.asList(&quot;/*&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return  bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1411-aop-æ•´åˆä½¿ç”¨">14.11. aop æ•´åˆä½¿ç”¨<a href="#1411-aop-æ•´åˆä½¿ç”¨" class="hash-link" aria-label="Direct link to 14.11. aop æ•´åˆä½¿ç”¨" title="Direct link to 14.11. aop æ•´åˆä½¿ç”¨">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14111-åŸºæœ¬ä½¿ç”¨">14.11.1. åŸºæœ¬ä½¿ç”¨<a href="#14111-åŸºæœ¬ä½¿ç”¨" class="hash-link" aria-label="Direct link to 14.11.1. åŸºæœ¬ä½¿ç”¨" title="Direct link to 14.11.1. åŸºæœ¬ä½¿ç”¨">â€‹</a></h3><p>é€šçŸ¥æ‰§è¡Œé¡ºåº: around &gt; before &gt; around &gt; after &gt; afterReturning</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// åªéœ€è¦spring-boot-starter-aop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//@EnableAspectJAutoProxy// æ— éœ€, è‡ªåŠ¨å¼€å¯,å¼•å…¥ä¾èµ–å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component //å¿…é¡»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Aspect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ReqCheckAop {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ObjectMapper objectMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Pointcut(&quot;execution(org.springframework.http.ResponseEntity&lt;Resp&gt; io.github.xiaoyureed.demo..*.*(..))&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void pointcut() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Around(&quot;pointcut()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object reqCheck(ProceedingJoinPoint jp) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object[] args = jp.getArgs();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;&gt;&gt;&gt; req = &quot; + objectMapper.writeValueAsString(args[0]));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return jp.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14112-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼">14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼<a href="#14112-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="hash-link" aria-label="Direct link to 14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" title="Direct link to 14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼">â€‹</a></h3><p>ç”¨æ¥æŒ‡å®šå¢å¼ºå“ªäº›æ–¹æ³•</p><p><a href="https://www.cnblogs.com/ityangshuai/p/11923696.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ityangshuai/p/11923696.html</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.execution(xxx)  ç”¨äºç¡®å®šæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    è¡¨è¾¾å¼æ ¼å¼(å°±æ˜¯æ–¹æ³•ç­¾å)ï¼šä¿®é¥°ç¬¦  è¿”å›å€¼  åŒ….ç±».æ–¹æ³•(å‚æ•°åˆ—è¡¨) throws å¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1.1 ä¿®é¥°ç¬¦ ï¼ˆå¯é€‰ï¼‰ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ ----------- æ¥ç©ºæ ¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public        å…¬å…±ä¿®é¥°ç¬¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            *            ä»»æ„ä¿®é¥°ç¬¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1.2 è¿”å›å€¼ï¼Œ å¤æ‚ç±»å‹éœ€è¦å…¨é™å®šåç§°ï¼Œå¸¸ç”¨ ----------- æ¥ç©ºæ ¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String        è¿”å›å­—ç¬¦ä¸²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            *            è¿”å›ä»»æ„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1.3 åŒ…    ï¼Œå¸¸ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            com.xiaoyu.spring.learn.service            æŒ‡å®šserviceåŒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            com.xiaoyu.spring.learn.crm.*.service                crmé¡¹ç›®ä¸‹çš„ä»»æ„å­æ¨¡å—ï¼ˆå­æ–‡ä»¶å¤¹ï¼‰çš„serviceåŒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            com.xiaoyu.spring.learn.service..            serviceç›®å½•åŒ…å«çš„æ‰€æœ‰ç›®å½•ï¼ˆåŒ…æ‹¬æ¬¡çº§å­ç›®å½•ç­‰ç­‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            com.xiaoyu.spring.learn.crm.*.service..                crmä¸‹æ‰€æœ‰çš„å­æ¨¡å—ä¸­serviceç›®å½•åŒ…å«çš„æ‰€æœ‰ç›®å½•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1.4 ç±»ï¼Œå¸¸ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            UserService                æŒ‡å®šç±»å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            User*                    ä»¥Userå¼€å¤´ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            *Service                    ä»¥Serviceç»“å°¾ç±»ï¼ˆå¸¸ç”¨ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            *                        ä»»æ„ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1.5 æ–¹æ³•ï¼Œå¸¸ç”¨ ä¸ 1.4ç±»ç›¸ä¼¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            addUser                    æŒ‡å®šæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            add*                        addå¼€å¤´æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            *User                    ä»¥Userç»“å°¾æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            *                        ä»»æ„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1.6 å‚æ•°åˆ—è¡¨ï¼Œå¸¸ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ()                        æ²¡æœ‰å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (int)                        ä¸€ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (int,int)                    ä¸¤ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (..)                        å‚æ•°ä»»æ„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1.7 å¼‚å¸¸ ï¼Œå…·ä½“å¼‚å¸¸ï¼ˆå¯é€‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¤šè¡¨è¾¾å¼ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;aop:pointcut experssion=&quot;exection(è¡¨è¾¾å¼1)  || exection(è¡¨è¾¾å¼2) &quot;&gt;    ï¼šè¡¨è¾¾å¼1æˆ– è¡¨è¾¾å¼2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ç»¼åˆæ¡ˆä¾‹ï¼šexecution(* com.xiaoyu.spring.learn.crm.*.service..*.*(..))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        å«ä¹‰ï¼š    è¿”å›å€¼ä»»æ„ï¼Œcrmé¡¹ç›®ä¸‹çš„ä»»æ„å­ç›®å½•ä¸­çš„çš„serviceç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•ä¸­çš„ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•ï¼Œå‚æ•°ä»»æ„ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- within(): åªèƒ½æŒ‡å®š åŒ….ç±»; å†ä¸‹é¢çš„ç²’åº¦å°±æ²¡åŠæ³•äº†, æ‰€ä»¥ç›¸å½“äº execution() çš„ç®€åŒ–ç‰ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    within(com.xiaoyu.spring.learn.aop..*)åŒ¹é…aop åŒ…/å­åŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    æŒ‡å®šæ³¨è§£ç±»äº¦å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    within(@org.springframework.web.bind.annotation.RestController *) åŒ¹é… è¢« æŒ‡å®šæ³¨è§£æ ‡æ³¨çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- this(): ç”¨äºå‘é€šçŸ¥æ–¹æ³•ä¸­ä¼ å…¥ä»£ç†å¯¹è±¡çš„å¼•ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¦‚:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Before(&quot;before() &amp;&amp; this(proxy)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void beforeAdvide(JoinPoint point, Object proxy){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- target(): ç”¨äºå‘é€šçŸ¥æ–¹æ³•ä¸­ä¼ å…¥ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- args() ï¼šç”¨äºå°†å‚æ•°ä¼ å…¥åˆ°é€šçŸ¥æ–¹æ³•ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¦‚:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Before(&quot;before() &amp;&amp; args(age,username)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void beforeAdvide(JoinPoint point, int age, String username){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¦‚ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Pointcut(&quot;execution(public * com.example.demo.aop.AopController.xxxMethod(int)) &amp;&amp; args(point))&quot;) ä¼šå°†æ‹¦æˆªåˆ°çš„æ–¹æ³•çš„ int ç±»å‹å‚æ•° ä¼ é€’åˆ° aop æ–¹æ³•ä¸­, ä½¿ç”¨ point æ¥å—å³å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- @within ï¼šç”¨äºåŒ¹é…åœ¨ç±»ä¸€çº§ä½¿ç”¨äº†æ³¨è§£çš„ç±»ï¼Œå…¶æ‰€æœ‰æ–¹æ³•éƒ½å°†è¢«åŒ¹é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Pointcut(&quot;@within(com.cjm.annotation.AdviceAnnotation)&quot;) ï¼ æ‰€æœ‰è¢«@AdviceAnnotationæ ‡æ³¨çš„ç±»éƒ½å°†åŒ¹é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¸¸ç”¨:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Pointcut(&quot;@annotation(AopLog) || @within(AopLog)&quot;) - è¢« aopLog æ ‡æ³¨çš„ç±» or æ–¹æ³•è¢«æ‹¦æˆª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- @target ï¼šå’Œ@withinçš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†å¿…é¡»è¦æŒ‡å®šæ³¨è§£çš„ä¿ç•™ç­–ç•¥ä¸ºRUNTIMEã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å­˜ç–‘?@target() æŒ‡å®šç›®æ ‡ç±»å‹, æ‰€æœ‰è¿™ä¸ªç±»å‹çš„ç±»éƒ½ä¼šè¢«åŒ¹é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @target(com.xiaoyu.spring.learn.aop.user.IUserDAO)åŒ¹é… IUserDAO çš„æ‰€æœ‰å®ç°ç±», ç±»ä¸­çš„æ–¹æ³•éƒ½ä¼šè¢«ä»£ç†, åŒ…æ‹¬æœªåœ¨æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- @args() æŒ‡å®šä¸€ä¸ªæ³¨è§£, è¡¨ç¤ºè¦æ‹¦æˆªæ–¹æ³•çš„å‚æ•°éœ€è¦å¸¦æœ‰è¿™ä¸ªæ³¨è§£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- @bean(idå€¼) å¯¹æŒ‡å®šçš„ç›®æ ‡å¯¹è±¡çš„ç±»è¿›è¡ŒåŒ¹é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- @annotation(å‚æ•°ä¸­æ³¨è§£å‚æ•°åç§°) åŒ¹é…è¢«æŒ‡å®šæ³¨è§£æ ‡æ³¨çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¦‚: ä¸‹é¢è¡¨ç¤º -&gt; åŒ¹é… web åŒ…/å­åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³• ä¸”æ–¹æ³•è¢« @CheckReqNo æ ‡æ³¨ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Around(&quot;within(io.github.xiaoyureed.web..*) &amp;&amp; @annotation(checkReqNo)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void xxx(JoinPoint jp, CheckReqNo checkReqNo)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-  å¯ä»¥ä½¿ç”¨ &amp;&amp;, ||, ! è¿ç®—ç¬¦æ¥å®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1412-controlleradvice-å¼‚å¸¸å¤„ç†">14.12. @controllerAdvice å¼‚å¸¸å¤„ç†<a href="#1412-controlleradvice-å¼‚å¸¸å¤„ç†" class="hash-link" aria-label="Direct link to 14.12. @controllerAdvice å¼‚å¸¸å¤„ç†" title="Direct link to 14.12. @controllerAdvice å¼‚å¸¸å¤„ç†">â€‹</a></h2><p>å…¨å±€å¼‚å¸¸å¤„ç† å…¨å±€æ•°æ®ç»‘å®š å…¨å±€è¯·æ±‚æ•°æ®é¢„å¤„ç†</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ControllerAdvice //@ControllerAdviceæ³¨è§£ å¯ä»¥é€šè¿‡ assignableTypes æŒ‡å®šç‰¹å®šçš„ç±»ï¼Œè®©å¼‚å¸¸å¤„ç†ç±»åªå¤„ç†ç‰¹å®šç±»æŠ›å‡ºçš„å¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyGlobalExceptionHandler {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç›´æ¥è¿”å› web é¡µé¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ExceptionHandler(Exception.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ModelAndView customException(Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ModelAndView mv = new ModelAndView();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mv.addObject(&quot;message&quot;, e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mv.setViewName(&quot;myerror&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return mv;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿”å› json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @exception..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @respbody // å¦‚æœç±»ä¸Šä½¿ç”¨çš„æ˜¯@RestControllerAdvice, é‚£ä¹ˆ è¿”å› json æ— éœ€ @ResponseBody, åªéœ€è¦ @ExceptionHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public respseentiyt xxx(Exception ex) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç»‘å®š md åˆ°æ¯ä¸ª controler ä¸­çš„æ–¹æ³•å‚æ•°ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ModelAttribute(name = &quot;md&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Map&lt;String,Object&gt; mydata() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        map.put(&quot;age&quot;, 99);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        map.put(&quot;gender&quot;, &quot;ç”·&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // controller ä¸­è¿™ä¹ˆä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/hello&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String hello(Model model) {// æˆ–è€… @ModelAttribute(&quot;md&quot;) Map&lt;String, Object&gt; md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, Object&gt; map = model.asMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(map);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int i = 1 / 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;hello controller advice&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¯·æ±‚æ•°æ®é¢„å¤„ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¦‚æ­¤, è¯·æ±‚å‚æ•°å°±å¯ä»¥ä¼ é€’è¿™æ ·çš„å‚æ•°: a.name=xxx, b.name=yyy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // controller ä¸­è¿™æ ·è·å– @ModelAttribute(&quot;b&quot;) Book book, @ModelAttribute(&quot;a&quot;) Author author</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @InitBinder(&quot;b&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void b(WebDataBinder binder) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        binder.setFieldDefaultPrefix(&quot;b.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @InitBinder(&quot;a&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void a(WebDataBinder binder) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        binder.setFieldDefaultPrefix(&quot;a.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤„ç†å¼‚å¸¸çš„å…¶ä»–æ–¹æ³•:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ExceptionHandler(value = Exception.class)// æ‹¦æˆªæ‰€æœ‰å¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;ErrorResponse&gt; exceptionHandler(Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (e instanceof IllegalArgumentException) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ResponseEntity.status(400).body(illegalArgumentResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else if (e instanceof ResourceNotFoundException) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ResponseEntity.status(404).body(resourseNotFoundResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@GetMapping(&quot;/resourceNotFoundException2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void throwException3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new ResponseStatusException(HttpStatus.NOT_FOUND, &quot;Sorry, the resourse not found!&quot;, new ResourceNotFoundException());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1413-httpservletrequest-çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜">14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜<a href="#1413-httpservletrequest-çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜" class="hash-link" aria-label="Direct link to 14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜" title="Direct link to 14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜">â€‹</a></h2><p><a href="https://www.cnblogs.com/JAYIT/p/10943155.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/JAYIT/p/10943155.html</a></p><p>è¿˜æ˜¯æ¨èä½¿ç”¨ aop å»åˆ‡ controller æ›´æ–¹ä¾¿ä¸€ç‚¹</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1414-è·¯ç”±å¤„ç†">14.14. è·¯ç”±å¤„ç†<a href="#1414-è·¯ç”±å¤„ç†" class="hash-link" aria-label="Direct link to 14.14. è·¯ç”±å¤„ç†" title="Direct link to 14.14. è·¯ç”±å¤„ç†">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14141-é™æ€èµ„æºæ˜ å°„-æš´éœ²é™æ€èµ„æº">14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº<a href="#14141-é™æ€èµ„æºæ˜ å°„-æš´éœ²é™æ€èµ„æº" class="hash-link" aria-label="Direct link to 14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº" title="Direct link to 14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº">â€‹</a></h3><p>æš´éœ²å›¾ç‰‡èµ„æº</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ImageConfig implements WebMvcConfigure {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addResourceHandlers(ResourceHandlerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addResourceHandler(&quot;/images/**&quot;) //addResourceLocationsæŒ‡çš„æ˜¯æ–‡ä»¶æ”¾ç½®çš„ç›®å½•ï¼ŒaddResoureHandleræŒ‡çš„æ˜¯å¯¹å¤–æš´éœ²çš„è®¿é—®è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .addResourceLocations(&quot;file:./localdata/images/&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ†ç¯å¢ƒæš´éœ²é…ç½®æ–‡ä»¶</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// é…ç½®æ–‡ä»¶è®¿é—®åœ°å€ (æ³¨æ„æ¯ä¸ªè®¿é—®è·¯å¾„åé¢çš„è·¯å¾„åŠ  / !!!)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ## windowsç³»ç»Ÿä¸‹è®¿é—®è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// uploadWindow: E:\common\file\root\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ## windowsç³»ç»Ÿä¸‹è®¿é—®è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// uploadLinux: /user/img/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void addResourceHandlers(ResourceHandlerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String os = System.getProperty(&quot;os.name&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å¦‚æœæ˜¯Windowsç³»ç»Ÿ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (os.toLowerCase().startsWith(&quot;win&quot;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addResourceHandler(&quot;/app_file/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // /app_file/**è¡¨ç¤ºåœ¨ç£ç›˜filePathWindowç›®å½•ä¸‹çš„æ‰€æœ‰èµ„æºä¼šè¢«è§£æä¸ºä»¥ä¸‹çš„è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .addResourceLocations(&quot;file:&quot; + filePathWindow);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {  //linux å’Œmac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addResourceHandler(&quot;/app_file/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .addResourceLocations(&quot;file:&quot; + filePathLinux) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    super.addResourceHandlers(registry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿˜æœ‰ä¸ªä¾‹å­, --&gt; swagger é™æ€èµ„æºå¤„ç† (æ”¾è¡Œ ç›¸å…³çš„é™æ€é¡µé¢)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14142-æ·»åŠ -view-controller">14.14.2. æ·»åŠ  view controller<a href="#14142-æ·»åŠ -view-controller" class="hash-link" aria-label="Direct link to 14.14.2. æ·»åŠ  view controller" title="Direct link to 14.14.2. æ·»åŠ  view controller">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class MvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ·»åŠ  view controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * &lt;p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å°† url path å’Œ template å¯¹åº”, æ— éœ€æ·»åŠ ä»»ä½•çš„ controller ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addViewControllers(ViewControllerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/home&quot;).setViewName(&quot;home&quot;);// ç­‰ä»· è®¿é—® /home , controller è¿”å› &quot;home&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/&quot;).setViewName(&quot;home&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/hello&quot;).setViewName(&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/login&quot;).setViewName(&quot;login&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/admin-page&quot;).setViewName(&quot;admin-page&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1415-spring-boot-starter-thymeleaf">14.15. spring-boot-starter-thymeleaf<a href="#1415-spring-boot-starter-thymeleaf" class="hash-link" aria-label="Direct link to 14.15. spring-boot-starter-thymeleaf" title="Direct link to 14.15. spring-boot-starter-thymeleaf">â€‹</a></h2><p>thymeleaf å’Œ spring security é…åˆä½¿ç”¨ <code>sec</code> æ ‡ç­¾: <a href="https://www.jianshu.com/p/bb3a3b388c4e" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/bb3a3b388c4e</a></p><p>springbooté»˜è®¤  static/public ä¸­æ”¾é™æ€é¡µé¢ï¼Œè€Œtemplatesä¸­æ”¾åŠ¨æ€é¡µé¢å³ thymeleaf æ¨¡æ¿</p><p>é™æ€é¡µé¢: ç›´æ¥åœ¨staticæ”¾ä¸€ä¸ªhello.html,ç„¶åç›´æ¥è¾“å…¥http://localhost:8080/hello.html ä¾¿èƒ½æˆåŠŸè®¿é—® (å…³é—­è¿™ä¸ªç‰¹æ€§éœ€è¦ spring.resources.add-mappings: false), ä¹Ÿå¯ä»¥é€šè¿‡controllerè·³è½¬ <code>return &quot;hello.html&quot;;</code></p><p>åŠ¨æ€é¡µé¢: éœ€è¦ <code>spring-boot-starter-thymeleaf</code>, é™æ€é¡µé¢çš„returné»˜è®¤æ˜¯è·³è½¬åˆ°/static/index.htmlï¼Œå½“åœ¨pom.xmlä¸­å¼•å…¥äº†thymeleafç»„ä»¶ï¼ŒåŠ¨æ€è·³è½¬ä¼šè¦†ç›–é»˜è®¤çš„é™æ€è·³è½¬ï¼Œé»˜è®¤å°±ä¼šè·³è½¬åˆ°/templates/index.htmlï¼Œæ³¨æ„çœ‹ä¸¤è€…returnä»£ç ä¹Ÿæœ‰åŒºåˆ«ï¼ŒåŠ¨æ€æ²¡æœ‰htmlåç¼€, å¦‚æœåœ¨ä½¿ç”¨åŠ¨æ€é¡µé¢æ—¶è¿˜æƒ³è·³è½¬åˆ°/static/index.htmlï¼Œå¯ä»¥ä½¿ç”¨é‡å®šå‘return &quot;redirect:/index.html&quot;</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/Hi&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sayHello() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;hello&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/Hi&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ModelAndView sayHello() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ModelAndView modelAndView = new ModelAndView();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    modelAndView.setViewName(&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    modelAndView.addObject(&quot;key&quot;, 12345);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //System.out.println(&quot;test&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return modelAndView;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/Hi&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public String sayHello(Map&lt;String,obj&gt; map) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map.put(&quot;stu&quot;, new Stu())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;hello&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é…ç½®:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#springé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mvc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">servlet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">load-on-startup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">datasource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver-class-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jdbc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3306/springbootssm</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">serverTimezone=GMT%2B8</span><span class="token important">&amp;useUnicode=true&amp;characterEncoding=utf-</span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">thymeleaf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#å…³é—­ç¼“å­˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTML5 </span><span class="token comment" style="color:#999988;font-style:italic">#è®¾ç½®æ¨¡æ¿ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">encoding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> utf</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">8</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#è®¾ç½®ç¼–ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/templates/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">suffix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">type=text/html </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>15. è¿ç»´éƒ¨ç½²</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="151-æ”¯æŒ-https-ssl">15.1. æ”¯æŒ https ssl<a href="#151-æ”¯æŒ-https-ssl" class="hash-link" aria-label="Direct link to 15.1. æ”¯æŒ https ssl" title="Direct link to 15.1. æ”¯æŒ https ssl">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1511-nginx-é…ç½®-https">15.1.1. nginx é…ç½® https<a href="#1511-nginx-é…ç½®-https" class="hash-link" aria-label="Direct link to 15.1.1. nginx é…ç½® https" title="Direct link to 15.1.1. nginx é…ç½® https">â€‹</a></h3><p>Let&#x27;s Encrypt æˆ–è€…é˜¿é‡Œäº‘, è…¾è®¯äº‘ æ”¯æŒ é¢ç²‰ ssl è¯ä¹¦ , ä¸€å¹´æœ‰æ•ˆæœŸ, è¿‡æœŸå†æ¬¡ç”³è¯· </p><p><a href="https://segmentfault.com/a/1190000016760251" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000016760251</a> ä½¿ç”¨ lets encrypt é…ç½® nginx</p><p><a href="https://www.cnblogs.com/to-red/p/12450616.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/to-red/p/12450616.html</a>
<a href="https://www.cnblogs.com/chnmig/p/10343890.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/chnmig/p/10343890.html</a>
<a href="https://blog.csdn.net/fenglin0429/article/details/81347634" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/fenglin0429/article/details/81347634</a>
<a href="https://www.nonelonely.com/article/1584965619600" target="_blank" rel="noopener noreferrer">https://www.nonelonely.com/article/1584965619600</a> nginx é…ç½® http  è½¬https, ä»£ç† springboot
<a href="https://ask.csdn.net/questions/701009" target="_blank" rel="noopener noreferrer">https://ask.csdn.net/questions/701009</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1512-æ”¯æŒ-https-è®¿é—®">15.1.2. æ”¯æŒ https è®¿é—®<a href="#1512-æ”¯æŒ-https-è®¿é—®" class="hash-link" aria-label="Direct link to 15.1.2. æ”¯æŒ https è®¿é—®" title="Direct link to 15.1.2. æ”¯æŒ https è®¿é—®">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// å‡è®¾å¦‚ä¸‹çš„ api, å¸Œæœ›æ”¯æŒ https è®¿é—®, ç°åœ¨ä»…ä»…åªæ˜¯httpè®¿é—®ã€‚http://localhost:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(TestApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(value = &quot;/&quot;,produces = &quot;text/plain;charset=UTF-8&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String index(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;Hello Spring Boot!&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ç”Ÿæˆsslè¯ä¹¦, ç³»ç»Ÿçš„å½“å‰ç”¨æˆ·ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ªkeystore.p12æ–‡ä»¶, å°†keystore.p12æ–‡ä»¶æ‹·è´åˆ°æˆ‘ä»¬é¡¹ç›®çš„æ ¹è·¯å¾„ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 1.-storetype æŒ‡å®šå¯†é’¥ä»“åº“ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2.-keyalg ç”Ÿè¯ä¹¦çš„ç®—æ³•åç§°ï¼ŒRSAæ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 3.-keysize è¯ä¹¦å¤§å°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 4.-keystore ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 5.-validity è¯ä¹¦çš„æœ‰æ•ˆæœŸ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keytool -genkey -alias tomcat  -storetype PKCS12 -keyalg RSA -keysize 2048  -keystore keystore.p12 -validity 3650</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.ssl.key-store=keystore.p12 //è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.ssl.key-store-password=123456 //ç”Ÿæˆsslè¯ä¹¦æ—¶è®¾ç½®çš„å¯†é’¥åº“çš„å£ä»¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.ssl.keyStoreType=PKCS12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.ssl.keyAlias = tomcat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//æ­¤æ—¶å·¥ç¨‹å·²ç»æ”¯æŒhttpsè®¿é—®ã€‚ https://localhost:8080/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1513-http-è¯·æ±‚è‡ªåŠ¨è½¬ä¸º-https">15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https<a href="#1513-http-è¯·æ±‚è‡ªåŠ¨è½¬ä¸º-https" class="hash-link" aria-label="Direct link to 15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https" title="Direct link to 15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// é…ç½®è®¿é—®http  urL æ—¶è‡ªåŠ¨è½¬åˆ°httpsã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// é…ç½®å, è®¿é—® https://localhost:8081/ æ­£å¸¸, è®¿é—® http://localhost:8080/ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡µé¢çš„urlå˜æˆäº†https://localhost:8081/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public EmbeddedServletContainerFactory servletContainer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TomcatEmbeddedServletContainerFactory tomcat = new TomcatEmbeddedServletContainerFactory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            protected void postProcessContext(Context context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SecurityConstraint constraint = new SecurityConstraint();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                constraint.setUserConstraint(&quot;CONFIDENTIAL&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SecurityCollection collection = new SecurityCollection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                collection.addPattern(&quot;/*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                constraint.addCollection(collection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                context.addConstraint(constraint);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tomcat.addAdditionalTomcatConnectors(httpConnector());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return tomcat;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Connector httpConnector() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Connector connector = new Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connector.setScheme(&quot;http&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Connectorç›‘å¬çš„httpçš„ç«¯å£å·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connector.setPort(8080);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connector.setSecure(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç›‘å¬åˆ°httpçš„ç«¯å£å·åè½¬å‘åˆ°çš„httpsçš„ç«¯å£å·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connector.setRedirectPort(8081); // éœ€è¦è®¾ç½® server.port=8081</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return connector;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1514-åŒæ—¶æ”¯æŒ-http-https">15.1.4. åŒæ—¶æ”¯æŒ http https<a href="#1514-åŒæ—¶æ”¯æŒ-http-https" class="hash-link" aria-label="Direct link to 15.1.4. åŒæ—¶æ”¯æŒ http https" title="Direct link to 15.1.4. åŒæ—¶æ”¯æŒ http https">â€‹</a></h3><p>ç”¨httpè¯·æ±‚æ—¶ä¸å†è½¬æ¢æˆhttpsè¯·æ±‚</p><p>åªéœ€è¦å°†ä»£ç ä¸­çš„connector.setSecure(false)ä¸­çš„falseæ”¹æˆtrueå°±å¯ä»¥äº†</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="152-å®¹å™¨åŒ–éƒ¨ç½²">15.2. å®¹å™¨åŒ–éƒ¨ç½²<a href="#152-å®¹å™¨åŒ–éƒ¨ç½²" class="hash-link" aria-label="Direct link to 15.2. å®¹å™¨åŒ–éƒ¨ç½²" title="Direct link to 15.2. å®¹å™¨åŒ–éƒ¨ç½²">â€‹</a></h2><p><a href="https://rovo98.github.io/posts/39885a36/" target="_blank" rel="noopener noreferrer">https://rovo98.github.io/posts/39885a36/</a> SpringBoot + Docker + Nginx è´Ÿè½½å‡è¡¡å®ç°
TODO</p><p><a href="https://github.com/GoogleContainerTools/jib" target="_blank" rel="noopener noreferrer">https://github.com/GoogleContainerTools/jib</a> ä¸º java ç¨‹åºæ„é€  docker é•œåƒ (<a href="https://www.cnblogs.com/felordcn/p/13201163.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/felordcn/p/13201163.html</a>)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="153-nginx-åå‘ä»£ç†">15.3. nginx åå‘ä»£ç†<a href="#153-nginx-åå‘ä»£ç†" class="hash-link" aria-label="Direct link to 15.3. nginx åå‘ä»£ç†" title="Direct link to 15.3. nginx åå‘ä»£ç†">â€‹</a></h2><p><a href="https://cloud.tencent.com/developer/article/1332603" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1332603</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="154-å†…åµŒ-tomcat-è°ƒä¼˜">15.4. å†…åµŒ tomcat è°ƒä¼˜<a href="#154-å†…åµŒ-tomcat-è°ƒä¼˜" class="hash-link" aria-label="Direct link to 15.4. å†…åµŒ tomcat è°ƒä¼˜" title="Direct link to 15.4. å†…åµŒ tomcat è°ƒä¼˜">â€‹</a></h2><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">compression</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#SpringBoot é»˜è®¤æ˜¯ä¸å¼€å¯ gzip å‹ç¼©çš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¼€å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#optional, åœ¨ spring2.0+çš„ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤å€¼å·²ç»æœ‰äº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">mime-types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> application/json</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">application/xml</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">text/html</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">text/plain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">text/css</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">application/x</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">javascript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#é»˜è®¤æƒ…å†µä¸‹ï¼Œä»…ä¼šå‹ç¼© 2048 å­—èŠ‚ä»¥ä¸Šçš„å†…å®¹, æŒ‡å®šè¶…è¿‡å¤šå°‘å°±å‹ç¼©</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">min-response-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tomcat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ’é˜Ÿæ•°, ç­‰å¾…é˜Ÿåˆ—é•¿åº¦ï¼šé˜Ÿåˆ—åšç¼“å†²æ± ç”¨ï¼Œä½†ä¹Ÿä¸èƒ½æ— é™é•¿ï¼Œæ¶ˆè€—å†…å­˜ï¼Œå‡ºå…¥é˜Ÿåˆ—ä¹Ÿè€—cpu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">accept-count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">max-connections</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#æœ€å¤§å¯è¢«è¿æ¥æ•°ï¼Œé»˜è®¤ä¸º10000 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#æœ€å¤§å·¥ä½œçº¿ç¨‹æ•°, é»˜è®¤ 200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 4æ ¸8Gå†…å­˜å•è¿›ç¨‹è°ƒåº¦çº¿ç¨‹æ•°800-1000ï¼Œè¶…è¿‡è¿™ä¸ªå¹¶å‘æ•°ä¹‹åï¼Œå°†ä¼šèŠ±è´¹å·¨å¤§çš„æ—¶é—´åœ¨cpuè°ƒåº¦ä¸Šã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">max-threads</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">800</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">min-spare-threads</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#æœ€å°å·¥ä½œçº¿ç¨‹æ•°, é»˜è®¤ 10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è¿æ¥è¶…æ—¶ 30s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">connection-timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Maximum size, in bytes, of the HTTP message header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">max-http-header-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Maximum size, in bytes, of the HTTP post content.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡ java code é…ç½®:</p><p>ä¿®æ”¹keepalivetimeoutå’ŒmaxKeepAliveRequestså¼€å¯é•¿è¿æ¥</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//å½“Springå®¹å™¨å†…æ²¡æœ‰TomcatEmbeddedServletContainerFactoryè¿™ä¸ªbeanæ—¶ï¼Œä¼šå§æ­¤beanåŠ è½½è¿›springå®¹å™¨ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class  WebServerConfiguration implements WebServerFactoryCustomizer&lt;ConfigurableWebServerFactory&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void customize(ConfigurableWebServerFactory configurableWebServerFactory) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //ä½¿ç”¨å¯¹åº”å·¥å‚ç±»æä¾›ç»™æˆ‘ä»¬çš„æ¥å£å®šåˆ¶åŒ–æˆ‘ä»¬çš„tomcat connector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ((TomcatServletWebServerFactory)configurableWebServerFactory).addConnectorCustomizers(new TomcatConnectorCustomizer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void customize(Connector connector) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Http11NioProtocol protocol = (Http11NioProtocol) connector.getProtocolHandler();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //å®šåˆ¶åŒ–keepalivetimeout,è®¾ç½®30ç§’å†…æ²¡æœ‰è¯·æ±‚åˆ™æœåŠ¡ç«¯è‡ªåŠ¨æ–­å¼€keepaliveé“¾æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                protocol.setKeepAliveTimeout(30000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //å½“å®¢æˆ·ç«¯å‘é€è¶…è¿‡10000ä¸ªè¯·æ±‚åˆ™è‡ªåŠ¨æ–­å¼€keepaliveé“¾æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                protocol.setMaxKeepAliveRequests(10000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // è®¾ç½®å…¶ä»–....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æˆ–è€…è¿™æ ·é…ç½®, æ•ˆæœç­‰åŒ   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebServerConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ConfigurableServletWebServerFactory webServerFactory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        factory.setPort(11359);//ç«¯å£å·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        factory.setUriEncoding(Charset.forName(&quot;utf-8&quot;));//ç¼–ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        factory.addConnectorCustomizers(new MyTomcatConnectorCustomizer());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return factory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class MyTomcatConnectorCustomizer implements TomcatConnectorCustomizer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void customize(Connector connector) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // TODO Auto-generated method stub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Http11NioProtocol handler = (Http11NioProtocol)connector.getProtocolHandler();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handler.setAcceptCount(2000);//æ’é˜Ÿæ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handler.setMaxConnections(5000);//æœ€å¤§è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handler.setMaxThreads(2000);//çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handler.setMinSpareThreads(100);//æœ€å°çº¿ç¨‹æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handler.setConnectionTimeout(30000);//è¶…æ—¶æ—¶é—´                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="155-é…ç½®-war-åŒ…éƒ¨ç½²åˆ°-tomcat">15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat<a href="#155-é…ç½®-war-åŒ…éƒ¨ç½²åˆ°-tomcat" class="hash-link" aria-label="Direct link to 15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat" title="Direct link to 15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ServletInitializer extends SpringBootServletInitializer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return application.sources(Application.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ComponentScan(basePackageClasses = Application.class, useDefaultFilters = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ServletContextConfig extends WebMvcConfigurationSupport{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é…ç½®servletå¤„ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        configurer.enable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ–è€…ç›´æ¥ä¸€æ­¥åˆ°ä½:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringbootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Application extends SpringBootServletInitializer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return application.sources(Application.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>16. spring boot ä¸­çš„å¹¶å‘</h1><p><a href="https://www.e4developer.com/2018/03/30/introduction-to-concurrency-in-spring-boot/" target="_blank" rel="noopener noreferrer">https://www.e4developer.com/2018/03/30/introduction-to-concurrency-in-spring-boot/</a> //todo
<a href="https://blog.csdn.net/qq_40606397/article/details/104945855" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_40606397/article/details/104945855</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="161-ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹">16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹<a href="#161-ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹" class="hash-link" aria-label="Direct link to 16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹" title="Direct link to 16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1611-é…ç½®çº¿ç¨‹æ± ">16.1.1. é…ç½®çº¿ç¨‹æ± <a href="#1611-é…ç½®çº¿ç¨‹æ± " class="hash-link" aria-label="Direct link to 16.1.1. é…ç½®çº¿ç¨‹æ± " title="Direct link to 16.1.1. é…ç½®çº¿ç¨‹æ± ">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// é…ç½®çº¿ç¨‹æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAsync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(&quot;doSomethingExecutor&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Executor doSomethingExecutor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ ¸å¿ƒçº¿ç¨‹æ•°ï¼šçº¿ç¨‹æ± åˆ›å»ºæ—¶å€™åˆå§‹åŒ–çš„çº¿ç¨‹æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setCorePoolSize(10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æœ€å¤§çº¿ç¨‹æ•°ï¼šçº¿ç¨‹æ± æœ€å¤§çš„çº¿ç¨‹æ•°ï¼Œåªæœ‰åœ¨ç¼“å†²é˜Ÿåˆ—æ»¡äº†ä¹‹åæ‰ä¼šç”³è¯·è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°çš„çº¿ç¨‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setMaxPoolSize(20);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç¼“å†²é˜Ÿåˆ—ï¼šç”¨æ¥ç¼“å†²æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setQueueCapacity(500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å…è®¸çº¿ç¨‹çš„ç©ºé—²æ—¶é—´60ç§’ï¼šå½“è¶…è¿‡äº†æ ¸å¿ƒçº¿ç¨‹ä¹‹å¤–çš„çº¿ç¨‹åœ¨ç©ºé—²æ—¶é—´åˆ°è¾¾ä¹‹åä¼šè¢«é”€æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setKeepAliveSeconds(60);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // çº¿ç¨‹æ± åçš„å‰ç¼€ï¼šè®¾ç½®å¥½äº†ä¹‹åå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å®šä½å¤„ç†ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setThreadNamePrefix(&quot;do-something-&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç¼“å†²é˜Ÿåˆ—æ»¡äº†ä¹‹åçš„æ‹’ç»ç­–ç•¥ï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†ï¼ˆä¸€èˆ¬æ˜¯ä¸»çº¿ç¨‹ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.DiscardPolicy());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.initialize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return executor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1612-æœ‰è¿”å›å€¼-æ²¡æœ‰è¿”å›å€¼">16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼<a href="#1612-æœ‰è¿”å›å€¼-æ²¡æœ‰è¿”å›å€¼" class="hash-link" aria-label="Direct link to 16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼" title="Direct link to 16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨ æ²¡æœ‰è¿”å›å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æŒ‡å®šä½¿ç”¨beannameä¸ºdoSomethingExecutorçš„çº¿ç¨‹æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async(&quot;doSomethingExecutor&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String doSomething(String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;do something, message={}&quot;, message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.error(&quot;do something error: &quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return message;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AsyncService asyncService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/open/something&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String something() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int count = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; count; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            asyncService.doSomething(&quot;index = &quot; + i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;success&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨ æœ‰è¿”å›å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AsyncService asyncService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @SneakyThrows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ApiOperation(&quot;å¼‚æ­¥ æœ‰è¿”å›å€¼&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/open/somethings&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String somethings() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CompletableFuture&lt;String&gt; createOrder = asyncService.doSomething1(&quot;create order&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CompletableFuture&lt;String&gt; reduceAccount = asyncService.doSomething2(&quot;reduce account&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CompletableFuture&lt;String&gt; saveLog = asyncService.doSomething3(&quot;save log&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CompletableFuture.allOf(createOrder, reduceAccount, saveLog).join();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è·å–æ¯ä¸ªä»»åŠ¡çš„è¿”å›ç»“æœ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String result = createOrder.get() + reduceAccount.get() + saveLog.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async(&quot;doSomethingExecutor&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CompletableFuture&lt;String&gt; doSomething1(String message) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;do something1: {}&quot;, message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return CompletableFuture.completedFuture(&quot;do something1: &quot; + message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async(&quot;doSomethingExecutor&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CompletableFuture&lt;String&gt; doSomething2(String message) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;do something2: {}&quot;, message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return CompletableFuture.completedFuture(&quot;; do something2: &quot; + message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async(&quot;doSomethingExecutor&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CompletableFuture&lt;String&gt; doSomething3(String message) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;do something3: {}&quot;, message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return CompletableFuture.completedFuture(&quot;; do something3: &quot; + message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1613-asyncå¤±æ•ˆ">16.1.3. @Asyncå¤±æ•ˆ<a href="#1613-asyncå¤±æ•ˆ" class="hash-link" aria-label="Direct link to 16.1.3. @Asyncå¤±æ•ˆ" title="Direct link to 16.1.3. @Asyncå¤±æ•ˆ">â€‹</a></h3><ul><li>å¼‚æ­¥æ–¹æ³•ä½¿ç”¨staticå…³é”®è¯ä¿®é¥°</li><li>å¼‚æ­¥ç±»ä¸æ˜¯ä¸€ä¸ªSpringå®¹å™¨çš„beanï¼ˆä¸€èˆ¬ä½¿ç”¨æ³¨è§£@Componentå’Œ@Serviceï¼Œå¹¶ä¸”èƒ½è¢«Springæ‰«æåˆ°ï¼‰ï¼›</li><li>SpringBootåº”ç”¨ä¸­æ²¡æœ‰æ·»åŠ @EnableAsyncæ³¨è§£ï¼›</li><li>åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œä¸€ä¸ªæ–¹æ³•è°ƒç”¨å¦å¤–ä¸€ä¸ªæœ‰@Asyncæ³¨è§£çš„æ–¹æ³•ï¼Œæ³¨è§£ä¸ä¼šç”Ÿæ•ˆã€‚åŸå› æ˜¯@Asyncæ³¨è§£çš„æ–¹æ³•ï¼Œæ˜¯åœ¨ä»£ç†ç±»ä¸­æ‰§è¡Œçš„ã€‚</li></ul><blockquote><p>å¼‚æ­¥æ–¹æ³•ä½¿ç”¨æ³¨è§£@Asyncçš„è¿”å›å€¼åªèƒ½ä¸ºvoidæˆ–è€…FutureåŠå…¶å­ç±»ï¼Œå½“è¿”å›ç»“æœä¸ºå…¶ä»–ç±»å‹æ—¶ï¼Œæ–¹æ³•è¿˜æ˜¯ä¼šå¼‚æ­¥æ‰§è¡Œï¼Œä½†æ˜¯è¿”å›å€¼éƒ½æ˜¯null</p></blockquote><h1>17. å®ç°ä¹è§‚é”æ‚²è§‚é”</h1><p><a href="https://www.cnblogs.com/cloudfloating/p/11461530.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/cloudfloating/p/11461530.html</a> </p><p>TODO</p><h1>18. ç§»åŠ¨ç«¯æ¶ˆæ¯æ¨é€</h1><p><a href="https://juejin.im/post/6844903838495801357" target="_blank" rel="noopener noreferrer">https://juejin.im/post/6844903838495801357</a>
<a href="https://crossoverjie.top/2018/09/25/netty/million-sms-push/" target="_blank" rel="noopener noreferrer">https://crossoverjie.top/2018/09/25/netty/million-sms-push/</a>
<a href="https://juejin.im/post/6844903478200909837" target="_blank" rel="noopener noreferrer">https://juejin.im/post/6844903478200909837</a>
TODO</p><h1>19. å³æ—¶é€šä¿¡ IMç³»ç»Ÿ</h1><p><a href="https://github.com/tywo45" target="_blank" rel="noopener noreferrer">https://github.com/tywo45</a></p><h1>20. è¾…åŠ©å·¥å…·</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="201-lombok-notice">20.1. lombok notice<a href="#201-lombok-notice" class="hash-link" aria-label="Direct link to 20.1. lombok notice" title="Direct link to 20.1. lombok notice">â€‹</a></h2><ul><li><p>@data &lt;=&gt; @Setterã€@Getterã€@RequiredArgsConstructorã€@ToStringã€@EqualsAndHashCode, </p><p>  è‹¥å­˜åœ¨ç»§æ‰¿, éœ€è¦ä¸º son æŒ‡å®š @EqualsAndHashCode(callSuper = true)</p><p>  @RequiredArgsConstructor è¡¨ç¤ºä¸ºä¸å¯å˜ field ç”Ÿæˆ constructor, ä¹Ÿå°±æ˜¯ä¸º final çš„æˆå‘˜æˆ–è€…@notnullæˆå‘˜ç”Ÿæˆ constructor, å…¶ä»–æ™®é€šçš„ field ä¸ä¼šä½œä¸ºæ„é€ å‚æ•°,</p><p>  @RequiredArgsConstructor(staticName=&quot;of&quot;),  staticname=of è¡¨ç¤ºè¿™ä¸ªç±»ä¸èƒ½ç”¨æ„é€ æ–¹æ³•æ„é€ å‡ºæ¥ï¼Œå¿…é¡»é€šè¿‡ XxxClass.of(...)æ–¹æ³•æ‰èƒ½æ„é€ å‡ºæ¥</p></li><li><p>æ¨èé€šç”¨çš„ç»„åˆæ˜¯ @data, @all... , @no...</p></li><li><p>å’Œ Java8 é…åˆè‰¯å¥½, jdkå‡çº§å¾ˆéº»çƒ¦, éœ€è¦ delombok</p></li><li><p>@builder æ„é€ å¯¹è±¡æ—¶åº•å±‚ç”¨çš„æ˜¯å…¨å‚æ•°æ„é€ å™¨, éœ€è¦ @AllArgsConstructorä¸€èµ·ç”¨, æ— æ³•å•ç‹¬ä½¿ç”¨, è‹¥æœä¸€å®šè¦ç”¨, å¥½çš„ç»„åˆæ˜¯ @NoArgsConstructor @AllArgsConstructor @Builder @Data</p></li><li><p>ä»£æ›¿@AutoWiredæ³¨è§£: @RequiredArgsConstructor(onConstructor =@__(@Autowired))æ ‡æ³¨åœ¨ç±»ä¸Š, é‚£ä¹ˆæ³¨å…¥æˆå‘˜çš„æ—¶å€™, å¯ä»¥çœæ‰ @autowired æ³¨è§£</p></li><li><p>æ›¿ä»£@tostringæ³¨è§£ å¯ä»¥ä½¿ç”¨ lang3 çš„ <code>ToStringBuilder.reflectionToString(this)</code></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="202-devtools">20.2. devtools<a href="#202-devtools" class="hash-link" aria-label="Direct link to 20.2. devtools" title="Direct link to 20.2. devtools">â€‹</a></h2><p>å¼€å‘è€…ç»„ä»¶, ä¿®æ”¹äº† thymeleaf å, é‡æ–°ç¼–è¯‘ä¿®æ”¹çš„æ–‡ä»¶, é¡µé¢å³å¯æ›´æ–°, ä¸å¿…é‡å¯æ•´ä¸ª app, ä½†æ˜¯è‹¥ä¿®æ”¹äº† Java config , è¿˜æ˜¯è¦é‡å¯</p><div class="language-props codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-props codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.thymeleaf.cache=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.devtools.restart.enabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... additional-paths=src/main/java // ç›‘å¬ç›®å½•  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="203-maven-wrapper">20.3. maven wrapper<a href="#203-maven-wrapper" class="hash-link" aria-label="Direct link to 20.3. maven wrapper" title="Direct link to 20.3. maven wrapper">â€‹</a></h2><p>wrapperï¼šmavençš„åŒ…è£…å™¨ï¼Œé€šè¿‡mvnwå‘½ä»¤æ›¿ä»£mvnï¼Œç®€åŒ–mvnæ“ä½œ, ä¸éœ€è¦åœ¨æ“ä½œç³»ç»Ÿä¸Šå®‰è£…Maven</p><p>å—åˆ° gradle wrappe å¯å‘</p><p>/.mvn/wrapper/maven-wrapper.jar æ˜¯å…¶ä¸»ä½“ç¨‹åº</p><p>/.mvn/wrapper/maven-wrapper.properties å¯æŒ‡å®š maven ç‰ˆæœ¬åŠä¸‹è½½è·¯å¾„</p><p>mvnw, mvnw.cmd å‘½ä»¤è¡Œç¨‹åº</p><p>mvnwç¬¬ä¸€æ¬¡è¿è¡Œä¼šæ£€æµ‹$USER_HOME/.m2/wrapper/dists ç›®å½•ä¸‹æ˜¯å¦æœ‰maven-wrapper.propertiesä¸­æŒ‡å®šçš„Mavenç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰å°±è‡ªåŠ¨ä¸‹è½½</p><h1>21. æ ¡éªŒ</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="211-æ ¡éªŒé…ç½®æ–‡ä»¶">21.1. æ ¡éªŒé…ç½®æ–‡ä»¶<a href="#211-æ ¡éªŒé…ç½®æ–‡ä»¶" class="hash-link" aria-label="Direct link to 21.1. æ ¡éªŒé…ç½®æ–‡ä»¶" title="Direct link to 21.1. æ ¡éªŒé…ç½®æ–‡ä»¶">â€‹</a></h2><p>ä»»ä½•æ·»åŠ @ConfigurationPropertiesçš„ç±»ï¼Œclassä¸ŠåŠ  <code>@Validated</code> annotation, appéƒ½ä¼šè¿›è¡Œå±æ€§æ ¡éªŒ, ç¡®ä¿å¼•å…¥äº† JSR-303 javax.validation è§„èŒƒçš„å®ç°;
ä½¿ç”¨æ ¡éªŒè§„èŒƒJSR-303 javax.validationä¸­çš„æ³¨è§£å³å¯å®ç°æ ¡éªŒï¼ˆä»‹ç»è§è¿™é‡Œ<a href="https://www.ibm.com/developerworks/cn/java/j-lo-jsr303/%EF%BC%89" target="_blank" rel="noopener noreferrer">https://www.ibm.com/developerworks/cn/java/j-lo-jsr303/ï¼‰</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix=&quot;connection&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Validated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FooProperties {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @NotNull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private InetAddress remoteAddress;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Valid // è¿™é‡Œæ˜¯ä¸ºäº†æ¿€æ´» Securityç±»ä¸­çš„æ³¨è§£æ ¡éªŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Security security = new Security();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... getters and setters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class Security {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @NotEmpty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String username;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ... getters and setters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>@Validated ä¹Ÿå¯ä»¥å¯ä»¥åŠ åˆ° @Bean æ–¹æ³•ä¸Š æ¥è§¦å‘æ ¡éªŒ;</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šçš„Spring Validatorï¼Œbean idæ˜¯ configurationPropertiesValidator å³å¯</p><p>spring-boot-actuator æ¨¡å—æœ‰ä¸€ä¸ªç«¯ç‚¹ï¼Œå¯¹å¤–æš´éœ²äº†æ‰€æœ‰çš„ @ConfigurationProperties beansã€‚æµè§ˆå™¨ä¸­è®¿é—® /configprops å³å¯</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="212-æ ¡éªŒè¯·æ±‚å‚æ•°">21.2. æ ¡éªŒè¯·æ±‚å‚æ•°<a href="#212-æ ¡éªŒè¯·æ±‚å‚æ•°" class="hash-link" aria-label="Direct link to 21.2. æ ¡éªŒè¯·æ±‚å‚æ•°" title="Direct link to 21.2. æ ¡éªŒè¯·æ±‚å‚æ•°">â€‹</a></h2><p><a href="https://blog.csdn.net/mzh_cn/article/details/80637015" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/mzh_cn/article/details/80637015</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="213-è‡ªå®šä¹‰æ ¡éªŒ">21.3. è‡ªå®šä¹‰æ ¡éªŒ<a href="#213-è‡ªå®šä¹‰æ ¡éªŒ" class="hash-link" aria-label="Direct link to 21.3. è‡ªå®šä¹‰æ ¡éªŒ" title="Direct link to 21.3. è‡ªå®šä¹‰æ ¡éªŒ">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="214-validatedå’Œvalid">21.4. @Validatedå’Œ@Valid<a href="#214-validatedå’Œvalid" class="hash-link" aria-label="Direct link to 21.4. @Validatedå’Œ@Valid" title="Direct link to 21.4. @Validatedå’Œ@Valid">â€‹</a></h2><p>@Validæ˜¯ JSR-303 è§„èŒƒ, hibernate-validationå®ç°äº†è¿™ä¸€è§„èŒƒ</p><p>@Validatedæ¥è‡ªäºspring, æ˜¯ spring å¯¹äº @Valid çš„å®ç°, æä¾›&quot;validation groups&quot;åŠŸèƒ½(åˆ›å»ºç©ºæ¥å£ä½œä¸ºåˆ†ç»„), validåˆ™ä¸å…·å¤‡;(<a href="https://stackoverflow.com/questions/36173332/difference-between-valid-and-validated-in-spring" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/36173332/difference-between-valid-and-validated-in-spring</a>) , ä¸€æ—¦controler ä¸­ä½¿ç”¨ @Validated(group={...}), é‚£ä¹ˆå®ä½“ç±»å­—æ®µä¸Šçš„æ³¨è§£è‹¥æŒ‡å®š group åˆ™çº¦æŸç”Ÿæ•ˆ, ä¸æŒ‡å®šåˆ†ç»„çš„ä¸ç”Ÿæ•ˆ. åä¹‹, è‹¥ @validated æ²¡æœ‰æŒ‡å®šåˆ†ç»„, åˆ™ å®ä½“ç±»å­—æ®µæŒ‡å®šäº† group çš„ä¸ç”Ÿæ•ˆ, ä¸æŒ‡å®šgroup çš„å­—æ®µç”Ÿæ•ˆ</p><h1>22. runner è·å–å‘½ä»¤è¡Œå‚æ•°</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="221-è·å–å‘½ä»¤è¡Œå‚æ•°">22.1. è·å–å‘½ä»¤è¡Œå‚æ•°<a href="#221-è·å–å‘½ä»¤è¡Œå‚æ•°" class="hash-link" aria-label="Direct link to 22.1. è·å–å‘½ä»¤è¡Œå‚æ•°" title="Direct link to 22.1. è·å–å‘½ä»¤è¡Œå‚æ•°">â€‹</a></h2><p>æ³¨å…¥ä¸€ä¸ª<code>org.springframework.boot.ApplicationArguments </code>bean</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyBean {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MyBean(ApplicationArguments args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean debug = args.containsOption(&quot;debug&quot;);//optionå‚æ•°å³â€œ--â€å¼€å¤´çš„å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;String&gt; files = args.getNonOptionArgs();// if run with &quot;--debug logfile.txt&quot; é‚£ä¹ˆç»“æœæ˜¯ debug=true, files=[&quot;logfile.txt&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦å¤–çš„æ³¨å…¥æ–¹æ³•:</p><p>Spring Boot will also register a <code>CommandLinePropertySource</code> with the Spring <code>Environment</code>. This allows you to also inject single application arguments using the <code>@Value</code> annotation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="222-applicationrunner-or-commandlinerunner">22.2. <code>ApplicationRunner</code> or <code>CommandLineRunner</code><a href="#222-applicationrunner-or-commandlinerunner" class="hash-link" aria-label="Direct link to 222-applicationrunner-or-commandlinerunner" title="Direct link to 222-applicationrunner-or-commandlinerunner">â€‹</a></h2><p><code>ApplicationRunner</code> or <code>CommandLineRunner</code>æ¥å£éƒ½æœ‰run()å¾…å®ç°(åœ¨SpringApplication.run(â€¦â€‹)å®Œæˆä¹‹å‰è°ƒç”¨)ä½†æ˜¯å‚æ•°ä¸åŒ, å…·ä½“å¦‚ä¸‹:</p><ul><li><p>ApplicationRunneræ¥å£, <code>void run(ApplicationArguments args)</code></p></li><li><p>CommandLineRunneræ¥å£, <code>void run(String... args)</code></p></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyBean implements CommandLineRunner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(String... args) {//å¯ä»¥è·å–å‘½ä»¤è¡Œå‚æ•°, ä½œä¸ºString[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è¿™é‡Œçš„å†…å®¹ä¼šåœ¨appå®Œå…¨å¯åŠ¨å‰æœ€åä¸€æ­¥æ‰§è¡Œ, å³SpringApplication.run(â€¦â€‹)å®Œæˆä¹‹å‰, ä¹Ÿä¼šåœ¨ApplicationReadyEventä¹‹å‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¦ä¸€ç§æ–¹æ³•:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//java -jar commandline-app-0.0.1-SNAPSHOT.jar iamnonoption --app.name=CmdRulez --app.hosts=abc,def,ghi --app.name=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implements ApplicationRunner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(ApplicationArguments args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è·å–é --xxx=yyy çš„å‚æ•°é›†åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;# NonOptionArgs: &quot; + args.getNonOptionArgs().size());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;NonOptionArgs:&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        args.getNonOptionArgs().forEach(System.out::println);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è·å– --xxx=yy çš„å‚æ•°ä¸­çš„ key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;# OptionArgs: &quot; + args.getOptionNames().size());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;OptionArgs:&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        args.getOptionNames().forEach(optionName -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(optionName + &quot;=&quot; + args.getOptionValues(optionName));// è·å– value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœæœ‰å¤šä¸ªCommandLineRunner or ApplicationRunner beans è¢«å®šä¹‰, è¿™æ—¶å€™æ¶‰åŠåˆ°è°ƒç”¨æ•°åºé—®é¢˜, ä¸¤ç§æ–¹å¼:</p><ul><li><p>å®ç°<code>org.springframework.core.Ordered</code>æ¥å£</p></li><li><p>ä½¿ç”¨<code>org.springframework.core.annotation.Order</code>æ³¨è§£ eg: @Order(num), numä¸ºInt, 0ä¼˜å…ˆçº§æœ€é«˜</p></li></ul><h1>23. å¼€å‘å‘½ä»¤è¡Œåº”ç”¨</h1><p>åŠ å…¥å¼€å‘ä¸€ä¸ªå·¥å…· ab.jar, å¸Œæœ›è¿™ä¹ˆä½¿ç”¨:</p><ul><li>java -jar ab.jar ä½¿ç”¨æç¤º</li><li>java -jar ab.jar  --spring.profiles.active=hello-world,receiver æ¿€æ´»ä¸åŒçš„ profile</li></ul><p>é…ç½®ä¸­æŒ‡å®šä¸€ä¸ªé»˜è®¤ æ¿€æ´» profile</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  profiles:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    active: usage_message</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// å·¥å…·ä½¿ç”¨æç¤º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Profile(&quot;usage_message&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public CommandLineRunner usage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return args -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;This app uses Spring Profiles to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            control its behavior.\n&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Sample usage: java -jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            rabbit-tutorials.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            --spring.profiles.active=hello-world,sender&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// è‹¥å‡ºä¼ é€’äº†å‚æ•°, åˆ™ usage_message å°±è¢«è¦†ç›–, è¿™ä¸ª bean è¢«æ³¨å†Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Profile(&quot;!usage_message&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public CommandLineRunner tutorial() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new RabbitAmqpTutorialsRunner();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¼ é€’ä¸åŒçš„å‚æ•°, ä¸åŒçš„ profile ä¼šæ¿€æ´»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Profile(&quot;receiver&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Tut1Receiver receiver() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new Tut1Receiver();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Profile(&quot;sender&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Tut1Sender sender() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new Tut1Sender();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å…·ä½“æ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RabbitAmqpTutorialsRunner implements CommandLineRunner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;${tutorial.client.duration:0}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int duration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ConfigurableApplicationContext ctx;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(String... arg0) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Ready ... running for &quot; + duration + &quot;ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(duration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ctx.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>24. æ•´åˆ grpc</h1><p><a href="https://github.com/ChinaSilence/spring-boot-starter-grpc" target="_blank" rel="noopener noreferrer">https://github.com/ChinaSilence/spring-boot-starter-grpc</a></p><h1>25. ä»»åŠ¡è°ƒåº¦</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="251-æ•´åˆ-xxl-job-ä»»åŠ¡è°ƒåº¦å¹³å°">25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°<a href="#251-æ•´åˆ-xxl-job-ä»»åŠ¡è°ƒåº¦å¹³å°" class="hash-link" aria-label="Direct link to 25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°" title="Direct link to 25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°">â€‹</a></h2><p><a href="https://www.tianheyu.top/archives/springboot-xxl-job-executor" target="_blank" rel="noopener noreferrer">https://www.tianheyu.top/archives/springboot-xxl-job-executor</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="252-å¼‚æ­¥ä»»åŠ¡">25.2. å¼‚æ­¥ä»»åŠ¡<a href="#252-å¼‚æ­¥ä»»åŠ¡" class="hash-link" aria-label="Direct link to 25.2. å¼‚æ­¥ä»»åŠ¡" title="Direct link to 25.2. å¼‚æ­¥ä»»åŠ¡">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAsync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncConfig implements AsyncConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Executor getAsyncExecutor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ ¸å¿ƒçº¿ç¨‹æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        taskExecutor.setCorePoolSize(8);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æœ€å¤§çº¿ç¨‹æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        taskExecutor.setMaxPoolSize(16);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //é˜Ÿåˆ—å¤§å°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        taskExecutor.setQueueCapacity(100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å½“æœ€å¤§æ± å·²æ»¡æ—¶,æ­¤ç­–ç•¥ä¸ºæˆ‘ä»¬æä¾›å¯ä¼¸ç¼©é˜Ÿåˆ—ï¼Œæ­¤ç­–ç•¥ä¿è¯ä¸ä¼šä¸¢å¤±ä»»åŠ¡è¯·æ±‚ï¼Œä½†æ˜¯å¯èƒ½ä¼šå½±å“åº”ç”¨ç¨‹åºæ•´ä½“æ€§èƒ½ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor.setThreadNamePrefix(&quot;My ThreadPoolTaskExecutor-&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        taskExecutor.initialize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return taskExecutor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FutureService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //åœ¨éœ€è¦æ‰§è¡Œçš„æ–¹æ³•ä¸ŠåŠ @Asyncè¡¨æ˜è¯¥æ–¹æ³•æ˜¯ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå¦‚æœåŠ åœ¨ç±»çº§åˆ«ä¸Šï¼Œåˆ™è¡¨æ˜ç±»æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯å¼‚æ­¥æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Future&lt;String&gt; futureTest() throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ä»»åŠ¡æ‰§è¡Œå¼€å§‹,éœ€è¦ï¼š1000ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;do:&quot; + i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;å®Œæˆä»»åŠ¡&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new AsyncResult&lt;&gt;(Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CompletableFuture&lt;List&lt;String&gt;&gt; completableFutureTask(String start) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å°æ—¥å¿—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.warn(Thread.currentThread().getName() + &quot;start this task!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰¾åˆ°ç‰¹å®šå­—ç¬¦/å­—ç¬¦ä¸²å¼€å¤´çš„ç”µå½±</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;String&gt; results =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            movies.stream().filter(movie -&gt; movie.startsWith(start)).collect(Collectors.toList());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ¨¡æ‹Ÿè¿™æ˜¯ä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(1000L);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è¿”å›ä¸€ä¸ªå·²ç»ç”¨ç»™å®šå€¼å®Œæˆçš„æ–°çš„CompletableFutureã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return CompletableFuture.completedFuture(results);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="253-å®šæ—¶ä»»åŠ¡">25.3. å®šæ—¶ä»»åŠ¡<a href="#253-å®šæ—¶ä»»åŠ¡" class="hash-link" aria-label="Direct link to 25.3. å®šæ—¶ä»»åŠ¡" title="Direct link to 25.3. å®šæ—¶ä»»åŠ¡">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2531-springboot-å†…ç½®">25.3.1. springboot å†…ç½®<a href="#2531-springboot-å†…ç½®" class="hash-link" aria-label="Direct link to 25.3.1. springboot å†…ç½®" title="Direct link to 25.3.1. springboot å†…ç½®">â€‹</a></h3><p>SpringBootä¸ºæˆ‘ä»¬å†…ç½®äº†@Scheduledå®šæ—¶ä»»åŠ¡ (spring task), @EnableScheduling å¼€å¯</p><p>@Scheduledæ³¨è§£å„å‚æ•°è¯¦è§£: (<a href="https://www.jianshu.com/p/1defb0f22ed1" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/1defb0f22ed1</a>)</p><ul><li>cron</li><li>zone</li><li>fixedDelay ä¸Šæ¬¡å®Œæ¯•åˆ°ä¸‹æ¬¡å¼€å§‹(ms)</li><li>fixedDelayString=&quot;${time.fixedDelay}&quot; åŒä¸Š</li><li>fixedRate ä¸Šæ¬¡å¼€å§‹åˆ°ä¸‹æ¬¡å¼€å§‹</li><li>initialDelay é¦–æ¬¡å»¶è¿Ÿ</li></ul><p>è‡ªå®šä¹‰çº¿ç¨‹æ± :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//é»˜è®¤æƒ…å†µä¸‹ï¼Œ@Scheduledä»»åŠ¡éƒ½åœ¨Springåˆ›å»ºçš„å¤§å°ä¸º1çš„é»˜è®¤çº¿ç¨‹æ± ä¸­æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SchedulerConfig implements SchedulingConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final int POOL_SIZE = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void configureTasks(ScheduledTaskRegistrar scheduledTaskRegistrar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPoolTaskScheduler.setPoolSize(POOL_SIZE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPoolTaskScheduler.setThreadNamePrefix(&quot;my-scheduled-task-pool-&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPoolTaskScheduler.initialize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scheduledTaskRegistrar.setTaskScheduler(threadPoolTaskScheduler);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2532-é›†æˆ-quartz">25.3.2. é›†æˆ Quartz<a href="#2532-é›†æˆ-quartz" class="hash-link" aria-label="Direct link to 25.3.2. é›†æˆ Quartz" title="Direct link to 25.3.2. é›†æˆ Quartz">â€‹</a></h3><h1>26. é…ç½®æ–‡ä»¶ and ç¯å¢ƒ</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="261-è¯»å–é…ç½®æ–‡ä»¶">26.1. è¯»å–é…ç½®æ–‡ä»¶<a href="#261-è¯»å–é…ç½®æ–‡ä»¶" class="hash-link" aria-label="Direct link to 26.1. è¯»å–é…ç½®æ–‡ä»¶" title="Direct link to 26.1. è¯»å–é…ç½®æ–‡ä»¶">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2611-å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•">26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•<a href="#2611-å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•" class="hash-link" aria-label="Direct link to 26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•" title="Direct link to 26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•">â€‹</a></h3><ol><li><p>ä½¿ç”¨ @Value(&quot;${property}&quot;) è¯»å–æ¯”è¾ƒç®€å•çš„é…ç½®ä¿¡æ¯</p></li><li><p>é€šè¿‡@ConfigurationProperties(prefix = &quot;library&quot;)è¯»å–å¹¶ä¸ bean ç»‘å®š, éœ€è¦ åŠ  @component(æ­¤æ—¶æ— éœ€åœ¨é…ç½®ç±»ä¸Šæ·»åŠ  @EnableConfigurationProperties), è‹¥ä¸ç”¨ @component, åˆ™å¿…é¡» åœ¨ä»»æ„ä¸€ä¸ªé…ç½®ç±»ä¸Šæ·»åŠ  @EnableConfigurationProperties(...)</p></li><li><p>@ConfigurationProperties é…åˆ @bean ç”¨åœ¨æ–¹æ³•ä¸Š, æ–¹æ³•è°ƒç”¨ç©ºæ„é€ å‡½æ•°è¿”å›æƒ³è¦æ„é€ çš„å¯¹è±¡</p></li><li><p>@PropertySource(&quot;classpath:website.properties&quot;) è¯»å–æŒ‡å®š properties æ–‡ä»¶</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2612-æ³¨å…¥å¤æ‚ç±»å‹">26.1.2. æ³¨å…¥å¤æ‚ç±»å‹<a href="#2612-æ³¨å…¥å¤æ‚ç±»å‹" class="hash-link" aria-label="Direct link to 26.1.2. æ³¨å…¥å¤æ‚ç±»å‹" title="Direct link to 26.1.2. æ³¨å…¥å¤æ‚ç±»å‹">â€‹</a></h3><p>å¯¹äº properties æ ¼å¼çš„é…ç½®æ–‡ä»¶:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># application.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#å•ä¸ªå€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">list=1,2,3,4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map={&#x27;name&#x27;:&#x27;chen&#x27;, &#x27;age&#x27;:&#x27;12&#x27;, &#x27;sex&#x27;:&#x27;ç”·&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç”¨åˆ°äº†spelè¡¨è¾¾å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PropertySource(&quot;classpath:xxx&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ConfigProps {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å•ä¸ªæ•°å€¼ï¼Œå¯æ³¨å…¥ä¸ºintæˆ–String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;${val}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int val;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //array æ•°ç»„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;#{&#x27;${ips}&#x27;.split(&#x27;,&#x27;)}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;String&gt; iplist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;#{${map}}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, String&gt; map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹äº yml æ ¼å¼çš„æ–‡ä»¶:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">custom:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ignored-token-path: /base/xx/login, /xx/**/, /xx/hfc/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ç„¶å’Œé…ç½®æ¥å—ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration // ä¹Ÿå¯ä»¥ç”¨ @component, è‹¥æœä¸æƒ³ç”¨è¿™ç±»æ³¨è§£, å¯ä»¥å»æ‰, å–è€Œä»£ä¹‹åœ¨å¯åŠ¨ç±»ä¸Šæ ‡æ³¨ @enableConfigProperties(xxx.class), ç›¸å½“äºåŠ äº† @Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(&quot;custom&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Custom {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String[] ignoredTokenPath;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">custom:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mail[0]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    username: xxx@xxx.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password: axxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mail[1]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    username: xxx@xxx.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password: axxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(&quot;custom&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Custom {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;MailInfo&gt; mail;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static class MailInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private String username;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private String password;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">directory:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  maps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    11: /dciZhongShan/resourceWarn/agricultureLand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;directory&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MapConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;Integer, String&gt; maps;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="262-é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§">26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§<a href="#262-é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§" class="hash-link" aria-label="Direct link to 26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§" title="Direct link to 26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§">â€‹</a></h2><p>é…ç½®æ–‡ä»¶åŠ è½½ä¼˜å…ˆçº§: å‘½ä»¤è¡Œ &gt; ${user.dir}/config/xxx &gt; ${user.dir}/xxx (usr.dir å³ä¸ºå‘½ä»¤æ‰§è¡Œçš„å½“å‰ç›®å½•) &gt; classpath:config/xxx &gt; classpath:xxx</p><p>--spring.profiles.active=prod,,,, --spring.config.location=target/application.properties</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="263-è¯»å–ç¯å¢ƒä¿¡æ¯">26.3. è¯»å–ç¯å¢ƒä¿¡æ¯<a href="#263-è¯»å–ç¯å¢ƒä¿¡æ¯" class="hash-link" aria-label="Direct link to 26.3. è¯»å–ç¯å¢ƒä¿¡æ¯" title="Direct link to 26.3. è¯»å–ç¯å¢ƒä¿¡æ¯">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author xiaoyu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * date: 2020/3/21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringbootDemoApp {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * springbootåœ¨å¯åŠ¨çš„æ—¶å€™éœ€è¦æ£€æµ‹å½“å‰é¡¹ç›®æ˜¯å¦æ˜¯ä¸€ä¸ªwebé¡¹ç›®ï¼Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ£€æµ‹æ–¹å¼ä¸ºåˆ¤æ–­classpathä¸­æ˜¯å¦æœ‰ä»¥ä¸‹finalå˜é‡ä¸­å®šä¹‰çš„ä¸¤ä¸ªå‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final String[] WEB_ENVIRONMENT_CLASSES =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new String[]{&quot;javax.servlet.Servlet&quot;, &quot;org.springframework.web.context.ConfigurableWebApplicationContext&quot;};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigurableApplicationContext context = SpringApplication.run(SpringbootDemoApp.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigurableEnvironment        env     = context.getEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String[] activeProfiles = env.getActiveProfiles();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String   port           = env.getProperty(&quot;server.port&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;==============================&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;active profiles: &quot; + Arrays.toString(activeProfiles));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;local uri: http://localhost:&quot; + port);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;local area network uri: http://&quot; + localAreaNetwork() + &quot;:&quot; + port);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;==============================&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static String localAreaNetwork() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return InetAddress.getLocalHost().getHostAddress();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (UnknownHostException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &quot;get local area network error&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean deduceWebEnv() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //https://blog.csdn.net/txba6868/article/details/80732475</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class DemoController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * file upload æ–‡ä»¶ä¸Šä¼ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; upload(HttpServletRequest request) throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MultipartHttpServletRequest req = (MultipartHttpServletRequest) request;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MultipartFile aa = req.getFile(&quot;aa&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MultipartFile bb = req.getFile(&quot;bb&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aa.transferTo(Paths.get(System.getProperty(&quot;user.home&quot;) + &quot;/tmp&quot;).toFile());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(&quot;ok&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="264-ä¸¤ç§å¼•å…¥-springboot-æ–¹å¼">26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼<a href="#264-ä¸¤ç§å¼•å…¥-springboot-æ–¹å¼" class="hash-link" aria-label="Direct link to 26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼" title="Direct link to 26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼">â€‹</a></h2><p>ä¸€ç§æ˜¯é€šè¿‡ è®¾ç½® parent ä¸º spring boot starter parent</p><p>ä¸€ç§æ˜¯é€šè¿‡ dependencyManagement åŠ å…¥ spring boot dependencies (éœ€è¦ è®¾ç½® maven  properties, <code>maven.compiler.source</code> å’Œ <code>maven.compiler.target</code> é˜²æ­¢ç¼–è¯‘ä½¿ç”¨ jdk 1.5)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">project</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://maven.apache.org/POM/4.0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">         </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">         </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xsi:</span><span class="token tag attr-name" style="color:#00a4db">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">modelVersion</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">4.0.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">modelVersion</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--    &lt;parent&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--        &lt;version&gt;&lt;/version&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--        &lt;relativePath/&gt; &amp;lt;!&amp;ndash; lookup parent from repository &amp;ndash;&amp;gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--    &lt;/parent&gt;--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.github.xiaoyureed</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shopee</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.0.1-SNAPSHOT</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">packaging</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">packaging</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">èšåˆæœåŠ¡</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">java.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">java.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">maven.compiler.source</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${java.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">maven.compiler.source</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">maven.compiler.target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${java.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">maven.compiler.target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">project.build.sourceEncoding</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">UTF-8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">project.build.sourceEncoding</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">project.reporting.outputEncoding</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">UTF-8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">project.reporting.outputEncoding</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">spring-boot.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.3.4.RELEASE</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">spring-boot.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">spring-cloud.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Hoxton.SR8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">spring-cloud.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">spring-cloud-alibaba.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.2.1.RELEASE</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">spring-cloud-alibaba.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">aliyun-spring-boot.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">aliyun-spring-boot.version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencyManagement</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-dependencies</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${spring-boot.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.cloud</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-cloud-dependencies</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${spring-cloud.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba.cloud</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-cloud-alibaba-dependencies</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${spring-cloud-alibaba.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba.cloud</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">aliyun-spring-boot-dependencies</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${aliyun-spring-boot.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">pom</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">type</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">import</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.baomidou</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mybatis-plus-boot-starter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.4.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mysql</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mysql-connector-java</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">8.0.21</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.elasticsearch.client</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">elasticsearch-rest-high-level-client</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">7.9.2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--            ä»£ç ç”Ÿæˆ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.baomidou</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">mybatis-plus-generator</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.4.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.apache.velocity/velocity-engine-core --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.velocity</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">velocity-engine-core</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--            common module need this--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.httpcomponents</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">httpcore</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">4.4.13</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.commons</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">commons-lang3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.11</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencyManagement</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.projectlombok</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">lombok</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">optional</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">optional</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨è¿™ç§æ–¹å¼ spring boot maven plugin å¯èƒ½å¤±æ•ˆ, éœ€è¦æ‰‹åŠ¨é…ç½®</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-maven-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">phase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">package</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">phase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">repackage</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>27. åºåˆ—åŒ– ååºåˆ—åŒ–</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="271-æ—¥æœŸæ—¶é—´-json">27.1. æ—¥æœŸæ—¶é—´ json<a href="#271-æ—¥æœŸæ—¶é—´-json" class="hash-link" aria-label="Direct link to 27.1. æ—¥æœŸæ—¶é—´ json" title="Direct link to 27.1. æ—¥æœŸæ—¶é—´ json">â€‹</a></h2><p><a href="https://www.cnblogs.com/carrychan/p/9883172.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/carrychan/p/9883172.html</a>
<a href="https://blog.csdn.net/z69183787/article/details/109356584" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/z69183787/article/details/109356584</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="272-jackson-ä½¿ç”¨">27.2. jackson ä½¿ç”¨<a href="#272-jackson-ä½¿ç”¨" class="hash-link" aria-label="Direct link to 27.2. jackson ä½¿ç”¨" title="Direct link to 27.2. jackson ä½¿ç”¨">â€‹</a></h2><p>springboot web starter ä¸­åŒ…å«äº† Jackson-databind ä¾èµ–, å¯ä»¥ç›´æ¥æ³¨å…¥ objectmapper, è‹¥è‡ªå·±å®šåˆ¶:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2721-jsoncomponent">27.2.1. @JsonComponent<a href="#2721-jsoncomponent" class="hash-link" aria-label="Direct link to 27.2.1. @JsonComponent" title="Direct link to 27.2.1. @JsonComponent">â€‹</a></h3><p>ç”¨äºå¯¹ç‰¹å®šå±æ€§å®šåˆ¶åºåˆ—åŒ–</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Color favoriteColor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonComponent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserCombinedSerializer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class UserJsonSerializer // è‹¥åªéœ€è¦åºåˆ—åŒ–, ä¸éœ€è¦ååºåˆ—åŒ–, åˆ™åªéœ€è¦è¿™ä¸ªç±» å¹¶åœ¨è¿™ä¸ªç±»æ ‡æ³¨ @JsonComponent. å¤–å±‚ç±»å’Œä¸‹é¢çš„å†…éƒ¨ç±»ç±»éƒ½ä¸éœ€è¦, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      extends JsonSerializer&lt;User&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void serialize(User user, JsonGenerator jsonGenerator, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          SerializerProvider serializerProvider) throws IOException, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          JsonProcessingException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            jsonGenerator.writeStartObject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            jsonGenerator.writeStringField(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;favoriteColor&quot;, getColorAsWebColor(user.getFavoriteColor()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // ... å…¶ä»–å±æ€§...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            jsonGenerator.writeEndObject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static String getColorAsWebColor(Color color) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int r = (int) Math.round(color.getRed() * 255.0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int g = (int) Math.round(color.getGreen() * 255.0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int b = (int) Math.round(color.getBlue() * 255.0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return String.format(&quot;#%02x%02x%02x&quot;, r, g, b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class UserJsonDeserializer </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      extends JsonDeserializer&lt;User&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public User deserialize(JsonParser jsonParser, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          DeserializationContext deserializationContext)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          throws IOException, JsonProcessingException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TreeNode treeNode = jsonParser.getCodec().readTree(jsonParser);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TextNode favoriteColor = (TextNode) treeNode.get(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;favoriteColor&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new User(Color.web(favoriteColor.asText()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2722-jackson-åœ¨-springboot-ä¸­çš„é…ç½®">27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®<a href="#2722-jackson-åœ¨-springboot-ä¸­çš„é…ç½®" class="hash-link" aria-label="Direct link to 27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®" title="Direct link to 27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®">â€‹</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.date-formatæŒ‡å®šæ—¥æœŸæ ¼å¼ï¼Œæ¯”å¦‚yyyy-MM-dd HH:mm:ssï¼Œæˆ–è€…å…·ä½“çš„æ ¼å¼åŒ–ç±»çš„å…¨é™å®šå</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.deserializationæ˜¯å¦å¼€å¯Jacksonçš„ååºåˆ—åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.generatoræ˜¯å¦å¼€å¯jsonçš„generators.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.joda-date-time-formatæŒ‡å®šJoda date/timeçš„æ ¼å¼ï¼Œæ¯”å¦‚yyyy-MM-ddHH:mm:ss). å¦‚æœæ²¡æœ‰é…ç½®çš„è¯ï¼Œdateformatä¼šä½œä¸ºbackup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.localeæŒ‡å®šjsonä½¿ç”¨çš„Locale.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.mapperæ˜¯å¦å¼€å¯Jacksoné€šç”¨çš„ç‰¹æ€§.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.parseræ˜¯å¦å¼€å¯jacksonçš„parserç‰¹æ€§.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.property-naming-strategyæŒ‡å®šPropertyNamingStrategy(CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES)æˆ–è€…æŒ‡å®šPropertyNamingStrategyå­ç±»çš„å…¨é™å®šç±»å.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.serializationæ˜¯å¦å¼€å¯jacksonçš„åºåˆ—åŒ–.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.serialization-inclusionæŒ‡å®šåºåˆ—åŒ–æ—¶å±æ€§çš„inclusionæ–¹å¼ï¼Œå…·ä½“æŸ¥çœ‹JsonInclude.Includeæšä¸¾.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.jackson.time-zoneæŒ‡å®šæ—¥æœŸæ ¼å¼åŒ–æ—¶åŒºï¼Œæ¯”å¦‚America/Los_Angelesæˆ–è€…GMT+10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2723-jacksonæ³¨è§£">27.2.3. jacksonæ³¨è§£<a href="#2723-jacksonæ³¨è§£" class="hash-link" aria-label="Direct link to 27.2.3. jacksonæ³¨è§£" title="Direct link to 27.2.3. jacksonæ³¨è§£">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@JsonIgnore æ­¤æ³¨è§£ç”¨äºå±æ€§ä¸Šï¼Œä½œç”¨æ˜¯è¿›è¡ŒJSONæ“ä½œæ—¶å¿½ç•¥è¯¥å±æ€§ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonIgnoreProperties(value = { &quot;intValue&quot; }) on type, å¿½ç•¥æŒ‡å®šå±æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonIgnoreType on type å¿½ç•¥æ‰€æœ‰å±æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //or @JsonIgnoreType on mixin type(empty type) to ignore fields of the type which we have no access to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //        mapper.addMixIn(String[].class, MyMixInForIgnoreType.class);//MyMixInForIgnoreType is empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Note: Since version 2.5 â€“ it seems that we can not use this method to ignore primitive data types, but we can use it for custom data types and arrays.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonFormat æ­¤æ³¨è§£ç”¨äºå±æ€§ä¸Šï¼Œä½œç”¨æ˜¯æŠŠDateç±»å‹ç›´æ¥è½¬åŒ–ä¸ºæƒ³è¦çš„æ ¼å¼ï¼Œå¦‚@JsonFormat(pattern = â€œyyyy-MM-dd HH-mm-ssâ€)ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonProperty æ­¤æ³¨è§£ç”¨äºå±æ€§ä¸Šï¼Œä½œç”¨æ˜¯æŠŠè¯¥å±æ€§çš„åç§°åºåˆ—åŒ–ä¸ºå¦å¤–ä¸€ä¸ªåç§°ï¼Œå¦‚æŠŠtrueNameå±æ€§åºåˆ—åŒ–ä¸ºnameï¼Œ@JsonProperty(â€œnameâ€)ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonValue ç”¨äºå±æ€§/getæ–¹æ³•ä¸Š, ä¸€ä¸ªç±»åªèƒ½ç”¨ä¸€ä¸ª, ç›¸å½“äºè‡ªå®šä¹‰åºåˆ—åŒ–, å½“åŠ ä¸Š@JsonValueæ³¨è§£ï¼Œåºåˆ—åŒ–æ˜¯åªè¿”å›è¿™ä¸€ä¸ªå­—æ®µçš„å€¼/æ–¹æ³•çš„å€¼ä½œä¸ºå½“å‰å¯¹è±¡çš„å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonRawValue on json string field to serialize raw json string</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2724-objectmapper-å®šåˆ¶">27.2.4. objectmapper å®šåˆ¶<a href="#2724-objectmapper-å®šåˆ¶" class="hash-link" aria-label="Direct link to 27.2.4. objectmapper å®šåˆ¶" title="Direct link to 27.2.4. objectmapper å®šåˆ¶">â€‹</a></h3><p><a href="https://www.kancloud.cn/ahutchen/spring-boot-reference-guide/333370" target="_blank" rel="noopener noreferrer">https://www.kancloud.cn/ahutchen/spring-boot-reference-guide/333370</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ObjectMapper objectMapper() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ObjectMapper objectMapper = new ObjectMapper();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &gt;&gt;&gt; serialization config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         //åºåˆ—åŒ–çš„æ—¶å€™åºåˆ—å¯¹è±¡çš„æ‰€æœ‰å±æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //          JsonInclude.Include.NON_NULL å¿½ç•¥ null å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //          Include.NON_EMPTY å¦‚æœä¸ºnullæˆ–è€… ç©ºå­—ç¬¦ä¸²å’Œç©ºé›†åˆéƒ½ä¸ä¼šè¢«åºåˆ—åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objectMapper.setSerializationInclusion(Include.ALWAYS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å¦‚æœæ˜¯ç©ºå¯¹è±¡çš„æ—¶å€™,ä¸æŠ›å¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ ¼å¼åŒ–è¾“å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objectMapper.configure(SerializationFeature.INDENT_OUTPUT, true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mapper.enable(SerializationFeature.INDENT_OUTPUT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è‡ªå®šä¹‰æ—¶é—´æ ¼å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å–æ¶ˆæ—¶é—´çš„è½¬åŒ–æ ¼å¼,é»˜è®¤æ˜¯æ—¶é—´æˆ³,å¯ä»¥å–æ¶ˆ,åŒæ—¶éœ€è¦è®¾ç½®è¦è¡¨ç°çš„æ—¶é—´æ ¼å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);// é»˜è®¤ä¸ºtrue,ä¼šæ˜¾ç¤ºæ—¶é—´æˆ³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objectMapper.setDateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //  config filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        new SimpleBeanPropertyFilter.FilterExceptFilter()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//        objectMapper.setFilterProvider()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &gt;&gt;&gt; deserialization config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ååºåˆ—åŒ–çš„æ—¶å€™å¦‚æœå¤šäº†å…¶ä»–å±æ€§,ä¸æŠ›å‡ºå¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //@JsonValue å¯ä»¥ç”¨åœ¨getæ–¹æ³•æˆ–è€…å±æ€§å­—æ®µä¸Šï¼Œä¸€ä¸ªç±»åªèƒ½ç”¨ä¸€ä¸ªï¼Œå½“åŠ ä¸Š@JsonValueæ³¨è§£æ˜¯ï¼Œåºåˆ—åŒ–æ˜¯åªè¿”å›è¿™ä¸€ä¸ªå­—æ®µçš„å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //@JsonRootName(value = &quot;user&quot;) to wrapper a root property for output json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //@JsonSerialize(using = CustomDateSerializer.class) on field to specify a customized serializer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ex: class CustomDateSerializer extends StdSerializer&lt;Date&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return objectMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2725-objectmapper-ä½¿ç”¨">27.2.5. objectmapper ä½¿ç”¨<a href="#2725-objectmapper-ä½¿ç”¨" class="hash-link" aria-label="Direct link to 27.2.5. objectmapper ä½¿ç”¨" title="Direct link to 27.2.5. objectmapper ä½¿ç”¨">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// &gt;&gt;&gt; åºåˆ—åŒ–æ•°ç»„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Person person1 = new Person(1, &quot;zxc&quot;, new Date());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Person person2 = new Person(2, &quot;ldh&quot;, new Date());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Person&gt; persons = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persons.add(person1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persons.add(person2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String personStr = objectMapper.writeValueAsString(persons);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//ååºåˆ—åŒ–ä¸ºList&lt;user&gt; é›†åˆ,1éœ€è¦é€šè¿‡ TypeReference æ¥å…·ä½“ä¼ é€’å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Person&gt; persons2 = objectMapper.readValue(personStr, new TypeReference&lt;List&lt;Person&gt;&gt;() {});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//or </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//é€šè¿‡ JavaType æ¥è¿›è¡Œå¤„ç†è¿”å›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JavaType javaType = objectMapper.getTypeFactory().constructParametricType(List.class, Person.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Person&gt; persons3 = objectMapper.readValue(personStr, javaType);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>28. æ¥å…¥ç¬¬ä¸‰æ–¹æ”¯ä»˜</h1><p><a href="https://github.com/Javen205/IJPay" target="_blank" rel="noopener noreferrer">https://github.com/Javen205/IJPay</a></p><p><a href="https://github.com/egzosn/pay-java-parent" target="_blank" rel="noopener noreferrer">https://github.com/egzosn/pay-java-parent</a>
<a href="https://github.com/egzosn/pay-spring-boot-starter-parent" target="_blank" rel="noopener noreferrer">https://github.com/egzosn/pay-spring-boot-starter-parent</a></p><p><a href="https://github.com/Pay-Group/best-pay-sdk" target="_blank" rel="noopener noreferrer">https://github.com/Pay-Group/best-pay-sdk</a></p><p><a href="https://github.com/iyangyuan/pay-spring-boot" target="_blank" rel="noopener noreferrer">https://github.com/iyangyuan/pay-spring-boot</a></p><p><a href="https://github.com/jeequan/jeepay" target="_blank" rel="noopener noreferrer">https://github.com/jeequan/jeepay</a></p><p><a href="https://github.com/roncoo/roncoo-pay" target="_blank" rel="noopener noreferrer">https://github.com/roncoo/roncoo-pay</a></p><p><a href="https://github.com/Exrick/xpay" target="_blank" rel="noopener noreferrer">https://github.com/Exrick/xpay</a> ä¸ªäººæ”¶æ¬¾</p><h1>29. æ‹¾é—</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="291-bean-æ‡’åŠ è½½">29.1. bean æ‡’åŠ è½½<a href="#291-bean-æ‡’åŠ è½½" class="hash-link" aria-label="Direct link to 29.1. bean æ‡’åŠ è½½" title="Direct link to 29.1. bean æ‡’åŠ è½½">â€‹</a></h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringå®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šåˆ›å»ºæ‰€æœ‰çš„Beanå¯¹è±¡ï¼Œä½¿ç”¨@Lazyæ³¨è§£ (å’Œ @Component å…±åŒä½¿ç”¨) å¯ä»¥å°†Beanå¯¹è±¡çš„åˆ›å»ºå»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡ä½¿ç”¨Beançš„æ—¶å€™</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/docs/tags/framework">framework</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/docs/tags/java">java</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/SpringBoot-note.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/FreeMarker-note"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">FreeMarker Note</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/agile-development-user-story-scrum"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">æ•æ·å¼€å‘ Intro</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#31-bean-å¤åˆ¶-å…‹éš†" class="table-of-contents__link toc-highlight">3.1. bean å¤åˆ¶ å…‹éš†</a></li><li><a href="#32-å­—ç¬¦ä¸²" class="table-of-contents__link toc-highlight">3.2. å­—ç¬¦ä¸²</a></li><li><a href="#33-ç¼–è§£ç " class="table-of-contents__link toc-highlight">3.3. ç¼–è§£ç </a></li><li><a href="#34-commons-lang3" class="table-of-contents__link toc-highlight">3.4. commons-lang3</a></li><li><a href="#35-æ–‡ä»¶æ“ä½œ" class="table-of-contents__link toc-highlight">3.5. æ–‡ä»¶æ“ä½œ</a></li><li><a href="#36-commons-collections4" class="table-of-contents__link toc-highlight">3.6. commons-collections4</a></li><li><a href="#51-configurationproperties-å’Œ-value" class="table-of-contents__link toc-highlight">5.1. @ConfigurationProperties å’Œ @Value</a></li><li><a href="#52-enableconfigurationproperties" class="table-of-contents__link toc-highlight">5.2. @EnableConfigurationProperties</a></li><li><a href="#53-enableautoconfiguration" class="table-of-contents__link toc-highlight">5.3. @EnableAutoConfiguration</a></li><li><a href="#54-componentscan" class="table-of-contents__link toc-highlight">5.4. @ComponentScan</a></li><li><a href="#55-springbootapplication" class="table-of-contents__link toc-highlight">5.5. @SpringBootApplication</a></li><li><a href="#56-componentå’Œbeanå’ŒconfigrationåŒºåˆ«" class="table-of-contents__link toc-highlight">5.6. @Componentå’Œ@Beanå’Œ@ConfigrationåŒºåˆ«</a></li><li><a href="#57-importå’Œimportresourceå’Œpropertysourceæ¯”è¾ƒ" class="table-of-contents__link toc-highlight">5.7. @Importå’Œ@ImportResourceå’Œ@PropertySourceæ¯”è¾ƒ</a></li><li><a href="#91-setæ³¨å…¥" class="table-of-contents__link toc-highlight">9.1. setæ³¨å…¥</a></li><li><a href="#92-postconstruct-æ³¨å…¥" class="table-of-contents__link toc-highlight">9.2. @PostConstruct æ³¨å…¥</a></li><li><a href="#93-é€šè¿‡-applicationcontext" class="table-of-contents__link toc-highlight">9.3. é€šè¿‡ ApplicationContext</a></li><li><a href="#101-åŠ è½½è¿‡ç¨‹oråŸç†" class="table-of-contents__link toc-highlight">10.1. åŠ è½½è¿‡ç¨‹oråŸç†</a></li><li><a href="#102-è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£" class="table-of-contents__link toc-highlight">10.2. è‡ªåŠ¨é…ç½®ç±»ä¼šç”¨åˆ°çš„ä¸€äº›æ³¨è§£</a></li><li><a href="#103-è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹" class="table-of-contents__link toc-highlight">10.3. è‡ªåŠ¨é…ç½®ç±»çš„å®ä¾‹</a><ul><li><a href="#1031-spring-åŠ¨æ€ä»£ç†" class="table-of-contents__link toc-highlight">10.3.1. spring åŠ¨æ€ä»£ç†</a></li></ul></li><li><a href="#104-conditional" class="table-of-contents__link toc-highlight">10.4. @Conditional</a></li><li><a href="#105-å°è£…ç»„åˆæ¡ä»¶" class="table-of-contents__link toc-highlight">10.5. å°è£…ç»„åˆæ¡ä»¶</a></li><li><a href="#106-åˆ›å»ºè‡ªå·±çš„-starter" class="table-of-contents__link toc-highlight">10.6. åˆ›å»ºè‡ªå·±çš„ starter</a></li><li><a href="#107-åçˆ¬è™«-starter" class="table-of-contents__link toc-highlight">10.7. åçˆ¬è™« starter</a></li><li><a href="#111-spring-boot-actuator-ç›‘æ§" class="table-of-contents__link toc-highlight">11.1. spring-boot-actuator ç›‘æ§</a></li><li><a href="#112-spring-boot-admin-ç›‘æ§ç•Œé¢" class="table-of-contents__link toc-highlight">11.2. spring boot admin ç›‘æ§ç•Œé¢</a></li><li><a href="#113-spring-boot-starter-security" class="table-of-contents__link toc-highlight">11.3. spring-boot-starter-security</a><ul><li><a href="#1131-securityç»„ä»¶ä»‹ç»" class="table-of-contents__link toc-highlight">11.3.1. securityç»„ä»¶ä»‹ç»</a></li><li><a href="#1132-åŸºæœ¬ä½¿ç”¨-å’Œ-é…ç½®ç”¨æˆ·åå¯†ç " class="table-of-contents__link toc-highlight">11.3.2. åŸºæœ¬ä½¿ç”¨ å’Œ é…ç½®ç”¨æˆ·åå¯†ç </a></li><li><a href="#1133-ç¦ç”¨åŸºæœ¬è®¤è¯" class="table-of-contents__link toc-highlight">11.3.3. ç¦ç”¨åŸºæœ¬è®¤è¯</a></li><li><a href="#1134-é…ç½®ä¸­-websecurity-å’Œ-httpsecurity-åŒºåˆ«" class="table-of-contents__link toc-highlight">11.3.4. é…ç½®ä¸­ WebSecurity å’Œ HttpSecurity åŒºåˆ«</a></li><li><a href="#1135-é…ç½®è·¨åŸŸ" class="table-of-contents__link toc-highlight">11.3.5. é…ç½®è·¨åŸŸ</a></li></ul></li><li><a href="#114-oauth2" class="table-of-contents__link toc-highlight">11.4. oauth2</a></li><li><a href="#121-log4j2-marker-å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶" class="table-of-contents__link toc-highlight">12.1. Log4j2-Marker å†™å…¥åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶</a></li><li><a href="#122-logback" class="table-of-contents__link toc-highlight">12.2. logback</a></li><li><a href="#131-canal-è®¢é˜…" class="table-of-contents__link toc-highlight">13.1. canal è®¢é˜…</a></li><li><a href="#132-mybatis-è‡ªåŠ¨å»ºè¡¨æ’ä»¶" class="table-of-contents__link toc-highlight">13.2. mybatis è‡ªåŠ¨å»ºè¡¨æ’ä»¶</a></li><li><a href="#133-mybatis-crud-å¢å¼ºæ’ä»¶" class="table-of-contents__link toc-highlight">13.3. mybatis crud å¢å¼ºæ’ä»¶</a></li><li><a href="#134-æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶" class="table-of-contents__link toc-highlight">13.4. æ•°æ®åº“è¿ç§»ç‰ˆæœ¬æ§åˆ¶</a><ul><li><a href="#1341-liquibase" class="table-of-contents__link toc-highlight">13.4.1. liquibase</a></li><li><a href="#1342-flyway" class="table-of-contents__link toc-highlight">13.4.2. Flyway</a></li></ul></li><li><a href="#135-æ•°æ®åº“-url-å’Œé©±åŠ¨" class="table-of-contents__link toc-highlight">13.5. æ•°æ®åº“ url å’Œé©±åŠ¨</a></li><li><a href="#136-graphqlé›†æˆ" class="table-of-contents__link toc-highlight">13.6. graphqlé›†æˆ</a></li><li><a href="#137-å¯åŠ¨æ‰§è¡Œ-sql" class="table-of-contents__link toc-highlight">13.7. å¯åŠ¨æ‰§è¡Œ SQL</a><ul><li><a href="#1371-sql-åˆ†éš”ç¬¦çš„å‘" class="table-of-contents__link toc-highlight">13.7.1. SQL åˆ†éš”ç¬¦çš„å‘</a></li><li><a href="#1372-spring-datasource-è‡ªå¸¦" class="table-of-contents__link toc-highlight">13.7.2. spring datasource è‡ªå¸¦</a></li><li><a href="#1373-ä½¿ç”¨-jpa" class="table-of-contents__link toc-highlight">13.7.3. ä½¿ç”¨ jpa</a><ul><li><a href="#13731-springboot-æ¥å…¥-jpa" class="table-of-contents__link toc-highlight">13.7.3.1. springboot æ¥å…¥ jpa</a></li><li><a href="#13732-jpa-querydsl-å¤šè¡¨è”æŸ¥" class="table-of-contents__link toc-highlight">13.7.3.2. jpa queryDsl å¤šè¡¨è”æŸ¥</a></li><li><a href="#13733-jpa-æ”¯æŒ-java8-time" class="table-of-contents__link toc-highlight">13.7.3.3. jpa æ”¯æŒ java8 time</a></li></ul></li><li><a href="#1374-datasourceinitializer" class="table-of-contents__link toc-highlight">13.7.4. DataSourceInitializer</a></li><li><a href="#1375-maven-antrun-pluginn" class="table-of-contents__link toc-highlight">13.7.5. maven-antrun-pluginn</a></li></ul></li><li><a href="#138-æ•´åˆ-spring-jdbc" class="table-of-contents__link toc-highlight">13.8. æ•´åˆ spring jdbc</a></li><li><a href="#139-æ•´åˆ-hibernate" class="table-of-contents__link toc-highlight">13.9. æ•´åˆ hibernate</a><ul><li><a href="#1391-jpaæ³¨è§£æ€»ç»“" class="table-of-contents__link toc-highlight">13.9.1. jpaæ³¨è§£æ€»ç»“</a></li><li><a href="#1392-å®¡è®¡-createddate" class="table-of-contents__link toc-highlight">13.9.2. å®¡è®¡ createdDate</a></li><li><a href="#1393-æ‰§è¡ŒåŸç”Ÿ-sql" class="table-of-contents__link toc-highlight">13.9.3. æ‰§è¡ŒåŸç”Ÿ SQL</a></li><li><a href="#1394-åŠ¨æ€-sql" class="table-of-contents__link toc-highlight">13.9.4. åŠ¨æ€ SQL</a></li><li><a href="#1395-spring-data-rest-é…åˆ-spring-data-jpa" class="table-of-contents__link toc-highlight">13.9.5. spring-data-rest é…åˆ spring-data-jpa</a></li></ul></li><li><a href="#1310-æ•´åˆ-mybatis-plus" class="table-of-contents__link toc-highlight">13.10. æ•´åˆ mybatis-plus</a></li><li><a href="#1311-æ•´åˆ-mybatis" class="table-of-contents__link toc-highlight">13.11. æ•´åˆ mybatis</a><ul><li><a href="#13111-åŸºæœ¬é…ç½®" class="table-of-contents__link toc-highlight">13.11.1. åŸºæœ¬é…ç½®</a></li><li><a href="#13112-ä½¿ç”¨-æ‹¦æˆªå™¨-interceptor-plugins" class="table-of-contents__link toc-highlight">13.11.2. ä½¿ç”¨ æ‹¦æˆªå™¨ interceptor plugins</a><ul><li><a href="#131121-principle-of-plugins" class="table-of-contents__link toc-highlight">13.11.2.1. principle of plugins</a></li><li><a href="#131122-use-scenarios" class="table-of-contents__link toc-highlight">13.11.2.2. use scenarios</a></li><li><a href="#131123-how-to-use-plugins" class="table-of-contents__link toc-highlight">13.11.2.3. how to use plugins</a></li></ul></li><li><a href="#13113-typehandler" class="table-of-contents__link toc-highlight">13.11.3. typehandler</a></li><li><a href="#13114-å…¨æ³¨è§£å¼€å‘" class="table-of-contents__link toc-highlight">13.11.4. å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13115-åŠ¨æ€å®šæ—¶åˆ·æ–°-sql-mapper-å®ç°çƒ­åŠ è½½" class="table-of-contents__link toc-highlight">13.11.5. åŠ¨æ€å®šæ—¶åˆ·æ–° SQL mapper å®ç°çƒ­åŠ è½½</a></li><li><a href="#13116-è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½•-and-å¼€å¯å ä½ç¬¦è¿‡æ»¤" class="table-of-contents__link toc-highlight">13.11.6. è‡ªå®šä¹‰èµ„æºæ–‡ä»¶æ‰“åŒ…ç›®å½• and å¼€å¯å ä½ç¬¦è¿‡æ»¤</a></li></ul></li><li><a href="#1312-springboot-äº‹åŠ¡" class="table-of-contents__link toc-highlight">13.12. springboot äº‹åŠ¡</a><ul><li><a href="#13121-äº‹åŠ¡åŸºæœ¬ä½¿ç”¨" class="table-of-contents__link toc-highlight">13.12.1. äº‹åŠ¡åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#13122-spring-äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘" class="table-of-contents__link toc-highlight">13.12.2. spring äº‹åŠ¡ä¼ æ’­å¤±æ•ˆçš„å‘</a></li><li><a href="#13123-transactional-æ³¨è§£" class="table-of-contents__link toc-highlight">13.12.3. Transactional æ³¨è§£</a></li></ul></li><li><a href="#1313-ç¼“å­˜" class="table-of-contents__link toc-highlight">13.13. ç¼“å­˜</a><ul><li><a href="#13131-springboot-starter-cache" class="table-of-contents__link toc-highlight">13.13.1. springboot-starter-cache</a></li><li><a href="#13132-caffeine" class="table-of-contents__link toc-highlight">13.13.2. caffeine</a></li></ul></li><li><a href="#1314-é…åˆ-h2-æ•°æ®åº“è¿›è¡Œå¼€å‘" class="table-of-contents__link toc-highlight">13.14. é…åˆ h2 æ•°æ®åº“è¿›è¡Œå¼€å‘</a><ul><li><a href="#13141-h2-å’Œ-spring-data-jpa-é…åˆ" class="table-of-contents__link toc-highlight">13.14.1. h2 å’Œ spring data jpa é…åˆ</a></li><li><a href="#13142-å’Œ-mybatis-plus-é…åˆ" class="table-of-contents__link toc-highlight">13.14.2. å’Œ mybatis-plus é…åˆ</a></li></ul></li><li><a href="#1315-å¤šæ•°æ®æº" class="table-of-contents__link toc-highlight">13.15. å¤šæ•°æ®æº</a><ul><li><a href="#13151-åŸºæœ¬é…ç½®-å…¨æ³¨è§£å¼€å‘" class="table-of-contents__link toc-highlight">13.15.1. åŸºæœ¬é…ç½® å…¨æ³¨è§£å¼€å‘</a></li><li><a href="#13152-abstractroutingdatasource-åŠ¨æ€æ•°æ®æºåˆ‡æ¢" class="table-of-contents__link toc-highlight">13.15.2. AbstractRoutingDataSource åŠ¨æ€æ•°æ®æºåˆ‡æ¢</a></li></ul></li><li><a href="#1316-å¤šæ•°æ®åº“ç±»å‹-databaseidprovider" class="table-of-contents__link toc-highlight">13.16. å¤šæ•°æ®åº“ç±»å‹ databaseIdProvider</a></li><li><a href="#1317-spring-kafka" class="table-of-contents__link toc-highlight">13.17. spring kafka</a></li><li><a href="#141-åŠ è§£å¯†" class="table-of-contents__link toc-highlight">14.1. åŠ è§£å¯†</a></li><li><a href="#142-springboot-å‘é€-https-æˆ–è€…-http-å®¢æˆ·ç«¯-client" class="table-of-contents__link toc-highlight">14.2. springboot å‘é€ https æˆ–è€… http å®¢æˆ·ç«¯ client</a><ul><li><a href="#1421-å‘é€-http-client" class="table-of-contents__link toc-highlight">14.2.1. å‘é€ http client</a></li><li><a href="#1422-å‘é€-https-client" class="table-of-contents__link toc-highlight">14.2.2. å‘é€ https client</a></li></ul></li><li><a href="#143-requestcontextholder" class="table-of-contents__link toc-highlight">14.3. RequestContextHolder</a></li><li><a href="#144-è§£å†³-api-ç‰ˆæœ¬å…±å­˜" class="table-of-contents__link toc-highlight">14.4. è§£å†³ api ç‰ˆæœ¬å…±å­˜</a><ul><li><a href="#1441-requestmappinghandlermapping" class="table-of-contents__link toc-highlight">14.4.1. RequestMappingHandlerMapping</a></li><li><a href="#1442-request-matcher" class="table-of-contents__link toc-highlight">14.4.2. request matcher</a></li><li><a href="#1443-request-condition" class="table-of-contents__link toc-highlight">14.4.3. request condition</a></li></ul></li><li><a href="#145-æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£" class="table-of-contents__link toc-highlight">14.5. æ¥æ”¶å‚æ•°ç›¸å…³çš„æ³¨è§£</a></li><li><a href="#146-è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹" class="table-of-contents__link toc-highlight">14.6. è‡ªå®šä¹‰æ¥æ”¶å‚æ•°ç±»å‹</a></li><li><a href="#147-è¿”å›å›¾ç‰‡" class="table-of-contents__link toc-highlight">14.7. è¿”å›å›¾ç‰‡</a></li><li><a href="#148-rest-api-æ–‡æ¡£" class="table-of-contents__link toc-highlight">14.8. rest api æ–‡æ¡£</a><ul><li><a href="#1481-knife4j" class="table-of-contents__link toc-highlight">14.8.1. knife4j</a></li><li><a href="#1482-springdoc-openapi" class="table-of-contents__link toc-highlight">14.8.2. springdoc-openapi</a></li><li><a href="#1483-swagger3" class="table-of-contents__link toc-highlight">14.8.3. swagger3</a></li><li><a href="#1484-é›†æˆswagger2" class="table-of-contents__link toc-highlight">14.8.4. é›†æˆswagger2</a></li></ul></li><li><a href="#149-è¿‡æ»¤å™¨-å’Œ-æ‹¦æˆªå™¨" class="table-of-contents__link toc-highlight">14.9. è¿‡æ»¤å™¨ å’Œ æ‹¦æˆªå™¨</a><ul><li><a href="#1491-åŒºåˆ«" class="table-of-contents__link toc-highlight">14.9.1. åŒºåˆ«</a></li><li><a href="#1492-ä½¿ç”¨-filter" class="table-of-contents__link toc-highlight">14.9.2. ä½¿ç”¨ filter</a></li><li><a href="#1493-ä½¿ç”¨-interceptor" class="table-of-contents__link toc-highlight">14.9.3. ä½¿ç”¨ interceptor</a><ul><li><a href="#14931-åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨" class="table-of-contents__link toc-highlight">14.9.3.1. åŸºæœ¬ä½¿ç”¨æ‹¦æˆªå™¨</a></li><li><a href="#14932-åŸºäº-url-æ‹¦æˆª" class="table-of-contents__link toc-highlight">14.9.3.2. åŸºäº url æ‹¦æˆª</a></li><li><a href="#14933-åŸºäºæ³¨è§£æ‹¦æˆª" class="table-of-contents__link toc-highlight">14.9.3.3. åŸºäºæ³¨è§£æ‹¦æˆª</a></li></ul></li></ul></li><li><a href="#1410-servlet-druid-ç›‘æ§" class="table-of-contents__link toc-highlight">14.10. servlet Druid ç›‘æ§</a></li><li><a href="#1411-aop-æ•´åˆä½¿ç”¨" class="table-of-contents__link toc-highlight">14.11. aop æ•´åˆä½¿ç”¨</a><ul><li><a href="#14111-åŸºæœ¬ä½¿ç”¨" class="table-of-contents__link toc-highlight">14.11.1. åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#14112-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="table-of-contents__link toc-highlight">14.11.2. åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</a></li></ul></li><li><a href="#1412-controlleradvice-å¼‚å¸¸å¤„ç†" class="table-of-contents__link toc-highlight">14.12. @controllerAdvice å¼‚å¸¸å¤„ç†</a></li><li><a href="#1413-httpservletrequest-çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜" class="table-of-contents__link toc-highlight">14.13. HttpServletRequest çš„è¾“å…¥æµåªèƒ½è¯»å–ä¸€æ¬¡çš„é—®é¢˜</a></li><li><a href="#1414-è·¯ç”±å¤„ç†" class="table-of-contents__link toc-highlight">14.14. è·¯ç”±å¤„ç†</a><ul><li><a href="#14141-é™æ€èµ„æºæ˜ å°„-æš´éœ²é™æ€èµ„æº" class="table-of-contents__link toc-highlight">14.14.1. é™æ€èµ„æºæ˜ å°„ æš´éœ²é™æ€èµ„æº</a></li><li><a href="#14142-æ·»åŠ -view-controller" class="table-of-contents__link toc-highlight">14.14.2. æ·»åŠ  view controller</a></li></ul></li><li><a href="#1415-spring-boot-starter-thymeleaf" class="table-of-contents__link toc-highlight">14.15. spring-boot-starter-thymeleaf</a></li><li><a href="#151-æ”¯æŒ-https-ssl" class="table-of-contents__link toc-highlight">15.1. æ”¯æŒ https ssl</a><ul><li><a href="#1511-nginx-é…ç½®-https" class="table-of-contents__link toc-highlight">15.1.1. nginx é…ç½® https</a></li><li><a href="#1512-æ”¯æŒ-https-è®¿é—®" class="table-of-contents__link toc-highlight">15.1.2. æ”¯æŒ https è®¿é—®</a></li><li><a href="#1513-http-è¯·æ±‚è‡ªåŠ¨è½¬ä¸º-https" class="table-of-contents__link toc-highlight">15.1.3. http è¯·æ±‚è‡ªåŠ¨è½¬ä¸º https</a></li><li><a href="#1514-åŒæ—¶æ”¯æŒ-http-https" class="table-of-contents__link toc-highlight">15.1.4. åŒæ—¶æ”¯æŒ http https</a></li></ul></li><li><a href="#152-å®¹å™¨åŒ–éƒ¨ç½²" class="table-of-contents__link toc-highlight">15.2. å®¹å™¨åŒ–éƒ¨ç½²</a></li><li><a href="#153-nginx-åå‘ä»£ç†" class="table-of-contents__link toc-highlight">15.3. nginx åå‘ä»£ç†</a></li><li><a href="#154-å†…åµŒ-tomcat-è°ƒä¼˜" class="table-of-contents__link toc-highlight">15.4. å†…åµŒ tomcat è°ƒä¼˜</a></li><li><a href="#155-é…ç½®-war-åŒ…éƒ¨ç½²åˆ°-tomcat" class="table-of-contents__link toc-highlight">15.5. é…ç½® war åŒ…éƒ¨ç½²åˆ° Tomcat</a></li><li><a href="#161-ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹" class="table-of-contents__link toc-highlight">16.1. ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹</a><ul><li><a href="#1611-é…ç½®çº¿ç¨‹æ± " class="table-of-contents__link toc-highlight">16.1.1. é…ç½®çº¿ç¨‹æ± </a></li><li><a href="#1612-æœ‰è¿”å›å€¼-æ²¡æœ‰è¿”å›å€¼" class="table-of-contents__link toc-highlight">16.1.2. æœ‰è¿”å›å€¼ æ²¡æœ‰è¿”å›å€¼</a></li><li><a href="#1613-asyncå¤±æ•ˆ" class="table-of-contents__link toc-highlight">16.1.3. @Asyncå¤±æ•ˆ</a></li></ul></li><li><a href="#201-lombok-notice" class="table-of-contents__link toc-highlight">20.1. lombok notice</a></li><li><a href="#202-devtools" class="table-of-contents__link toc-highlight">20.2. devtools</a></li><li><a href="#203-maven-wrapper" class="table-of-contents__link toc-highlight">20.3. maven wrapper</a></li><li><a href="#211-æ ¡éªŒé…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">21.1. æ ¡éªŒé…ç½®æ–‡ä»¶</a></li><li><a href="#212-æ ¡éªŒè¯·æ±‚å‚æ•°" class="table-of-contents__link toc-highlight">21.2. æ ¡éªŒè¯·æ±‚å‚æ•°</a></li><li><a href="#213-è‡ªå®šä¹‰æ ¡éªŒ" class="table-of-contents__link toc-highlight">21.3. è‡ªå®šä¹‰æ ¡éªŒ</a></li><li><a href="#214-validatedå’Œvalid" class="table-of-contents__link toc-highlight">21.4. @Validatedå’Œ@Valid</a></li><li><a href="#221-è·å–å‘½ä»¤è¡Œå‚æ•°" class="table-of-contents__link toc-highlight">22.1. è·å–å‘½ä»¤è¡Œå‚æ•°</a></li><li><a href="#222-applicationrunner-or-commandlinerunner" class="table-of-contents__link toc-highlight">22.2. <code>ApplicationRunner</code> or <code>CommandLineRunner</code></a></li><li><a href="#251-æ•´åˆ-xxl-job-ä»»åŠ¡è°ƒåº¦å¹³å°" class="table-of-contents__link toc-highlight">25.1. æ•´åˆ XXL-JOB ä»»åŠ¡è°ƒåº¦å¹³å°</a></li><li><a href="#252-å¼‚æ­¥ä»»åŠ¡" class="table-of-contents__link toc-highlight">25.2. å¼‚æ­¥ä»»åŠ¡</a></li><li><a href="#253-å®šæ—¶ä»»åŠ¡" class="table-of-contents__link toc-highlight">25.3. å®šæ—¶ä»»åŠ¡</a><ul><li><a href="#2531-springboot-å†…ç½®" class="table-of-contents__link toc-highlight">25.3.1. springboot å†…ç½®</a></li><li><a href="#2532-é›†æˆ-quartz" class="table-of-contents__link toc-highlight">25.3.2. é›†æˆ Quartz</a></li></ul></li><li><a href="#261-è¯»å–é…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">26.1. è¯»å–é…ç½®æ–‡ä»¶</a><ul><li><a href="#2611-å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•" class="table-of-contents__link toc-highlight">26.1.1. å‡ ç§è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹æ³•</a></li><li><a href="#2612-æ³¨å…¥å¤æ‚ç±»å‹" class="table-of-contents__link toc-highlight">26.1.2. æ³¨å…¥å¤æ‚ç±»å‹</a></li></ul></li><li><a href="#262-é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§" class="table-of-contents__link toc-highlight">26.2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</a></li><li><a href="#263-è¯»å–ç¯å¢ƒä¿¡æ¯" class="table-of-contents__link toc-highlight">26.3. è¯»å–ç¯å¢ƒä¿¡æ¯</a></li><li><a href="#264-ä¸¤ç§å¼•å…¥-springboot-æ–¹å¼" class="table-of-contents__link toc-highlight">26.4. ä¸¤ç§å¼•å…¥ springboot æ–¹å¼</a></li><li><a href="#271-æ—¥æœŸæ—¶é—´-json" class="table-of-contents__link toc-highlight">27.1. æ—¥æœŸæ—¶é—´ json</a></li><li><a href="#272-jackson-ä½¿ç”¨" class="table-of-contents__link toc-highlight">27.2. jackson ä½¿ç”¨</a><ul><li><a href="#2721-jsoncomponent" class="table-of-contents__link toc-highlight">27.2.1. @JsonComponent</a></li><li><a href="#2722-jackson-åœ¨-springboot-ä¸­çš„é…ç½®" class="table-of-contents__link toc-highlight">27.2.2. Jackson åœ¨ springboot ä¸­çš„é…ç½®</a></li><li><a href="#2723-jacksonæ³¨è§£" class="table-of-contents__link toc-highlight">27.2.3. jacksonæ³¨è§£</a></li><li><a href="#2724-objectmapper-å®šåˆ¶" class="table-of-contents__link toc-highlight">27.2.4. objectmapper å®šåˆ¶</a></li><li><a href="#2725-objectmapper-ä½¿ç”¨" class="table-of-contents__link toc-highlight">27.2.5. objectmapper ä½¿ç”¨</a></li></ul></li><li><a href="#291-bean-æ‡’åŠ è½½" class="table-of-contents__link toc-highlight">29.1. bean æ‡’åŠ è½½</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discordapp.com/users/yuu#3743" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/xiaoyuhfq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/xiaoyureed" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Xiaoyureed, Inc. Built with â¤ï¸ by xiaoyu.</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.71354b01.js"></script>
<script src="/en/assets/js/main.be3ba4f3.js"></script>
</body>
</html>