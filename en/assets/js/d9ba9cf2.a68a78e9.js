"use strict";(self.webpackChunkwiki_1=self.webpackChunkwiki_1||[]).push([[5474],{3905:(n,e,t)=>{t.d(e,{Zo:()=>c,kt:()=>v});var a=t(7294);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,a,r=function(n,e){if(null==n)return{};var t,a,r={},o=Object.keys(n);for(a=0;a<o.length;a++)t=o[a],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)t=o[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var s=a.createContext({}),p=function(n){var e=a.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):i(i({},e),n)),t},c=function(n){var e=p(n.components);return a.createElement(s.Provider,{value:e},n.children)},g="mdxType",d={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(n,e){var t=n.components,r=n.mdxType,o=n.originalType,s=n.parentName,c=l(n,["components","mdxType","originalType","parentName"]),g=p(t),m=r,v=g["".concat(s,".").concat(m)]||g[m]||d[m]||o;return t?a.createElement(v,i(i({ref:e},c),{},{components:t})):a.createElement(v,i({ref:e},c))}));function v(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var o=t.length,i=new Array(o);i[0]=m;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=n,l[g]="string"==typeof n?n:r,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8347:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=t(7462),r=(t(7294),t(3905));const o={title:"groovy note",tags:["groovy"],date:"2017-07022",toc_min_heading_level:2,toc_max_heading_level:5},i=void 0,l={unversionedId:"groovy-note",id:"groovy-note",title:"groovy note",description:"jvm\u4e0a\u7684\u52a8\u6001\u8bed\u8a00, \u8bed\u6cd5\u7c7b\u4f3cJava, \u8fc7\u6e21\u5230 ruby",source:"@site/docs/groovy-note.md",sourceDirName:".",slug:"/groovy-note",permalink:"/en/docs/groovy-note",draft:!1,editUrl:"https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/groovy-note.md",tags:[{label:"groovy",permalink:"/en/docs/tags/groovy"}],version:"current",frontMatter:{title:"groovy note",tags:["groovy"],date:"2017-07022",toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"\u6cb9\u7334\u63d2\u4ef6&\u7f16\u5199\u811a\u672c\ud83d\udc12",permalink:"/en/docs/greasy-monkey"},next:{title:"Health \u5173\u7231\u7a0b\u5e8f\u5458\u5065\u5eb7\ud83c\udfe5",permalink:"/en/docs/health"}},s={},p=[{value:"\u573a\u666f",id:"\u573a\u666f",level:2},{value:"\u4f18\u7f3a\u70b9",id:"\u4f18\u7f3a\u70b9",level:2},{value:"idea \u73af\u5883\u642d\u5efa",id:"idea-\u73af\u5883\u642d\u5efa",level:2},{value:"\u548c Java \u7684\u96c6\u6210",id:"\u548c-java-\u7684\u96c6\u6210",level:2},{value:"GroovyClassLoader",id:"groovyclassloader",level:3},{value:"GroovyShell",id:"groovyshell",level:3},{value:"GroovyScriptEngine",id:"groovyscriptengine",level:3},{value:"\u4f18\u5316",id:"\u4f18\u5316",level:3},{value:"maven \u4e2d Java \u548c groovy \u6df7\u5408\u5f00\u53d1",id:"maven-\u4e2d-java-\u548c-groovy-\u6df7\u5408\u5f00\u53d1",level:2},{value:"groovy \u8bed\u6cd5",id:"groovy-\u8bed\u6cd5",level:2},{value:"\u548c Java \u7684\u4e0d\u540c",id:"\u548c-java-\u7684\u4e0d\u540c",level:3},{value:"\u8f93\u5165\u8f93\u51fa\u6d41io",id:"\u8f93\u5165\u8f93\u51fa\u6d41io",level:3},{value:"\u6709\u7528\u7684\u5de5\u5177\u7c7b",id:"\u6709\u7528\u7684\u5de5\u5177\u7c7b",level:3},{value:"\u5143\u7f16\u7a0b",id:"\u5143\u7f16\u7a0b",level:3},{value:"\u52a8\u6001\u589e\u52a0\u65b9\u6cd5",id:"\u52a8\u6001\u589e\u52a0\u65b9\u6cd5",level:4},{value:"Groovy\u4ee3\u7801\u6587\u4ef6\u4e0eclass\u6587\u4ef6\u7684\u5bf9\u5e94\u5173\u7cfb",id:"groovy\u4ee3\u7801\u6587\u4ef6\u4e0eclass\u6587\u4ef6\u7684\u5bf9\u5e94\u5173\u7cfb",level:2}],c={toc:p},g="wrapper";function d(n){let{components:e,...t}=n;return(0,r.kt)(g,(0,a.Z)({},c,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"jvm\u4e0a\u7684\u52a8\u6001\u8bed\u8a00, \u8bed\u6cd5\u7c7b\u4f3cJava, \u8fc7\u6e21\u5230 ruby"),(0,r.kt)("p",null,"Groovy in Action\u300b\u7b2c\u4e8c\u7248"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://wizardforcel.gitbooks.io/ibm-j-pg/content/18.html"},"https://wizardforcel.gitbooks.io/ibm-j-pg/content/18.html")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#1-why-groovy"},"1. why groovy"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#11-%E5%9C%BA%E6%99%AF"},"1.1. \u573a\u666f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#12-%E4%BC%98%E7%BC%BA%E7%82%B9"},"1.2. \u4f18\u7f3a\u70b9")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#2-%E6%9C%89%E5%93%AA%E4%BA%9B%E9%A1%B9%E7%9B%AE%E5%9C%A8%E4%BD%BF%E7%94%A8"},"2. \u6709\u54ea\u4e9b\u9879\u76ee\u5728\u4f7f\u7528")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#3-%E6%80%8E%E4%B9%88%E4%BD%BF%E7%94%A8"},"3. \u600e\u4e48\u4f7f\u7528"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#31-idea-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"},"3.1. idea \u73af\u5883\u642d\u5efa")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#32-%E5%92%8C-java-%E7%9A%84%E9%9B%86%E6%88%90"},"3.2. \u548c Java \u7684\u96c6\u6210"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#321-groovyclassloader"},"3.2.1. GroovyClassLoader")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#322-groovyshell"},"3.2.2. GroovyShell")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#323-groovyscriptengine"},"3.2.3. GroovyScriptEngine")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#324-%E4%BC%98%E5%8C%96"},"3.2.4. \u4f18\u5316")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#33-maven-%E4%B8%AD-java-%E5%92%8C-groovy-%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91"},"3.3. maven \u4e2d Java \u548c groovy \u6df7\u5408\u5f00\u53d1")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#34-groovy-%E8%AF%AD%E6%B3%95"},"3.4. groovy \u8bed\u6cd5"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#341-%E5%92%8C-java-%E7%9A%84%E4%B8%8D%E5%90%8C"},"3.4.1. \u548c Java \u7684\u4e0d\u540c")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#342-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81io"},"3.4.2. \u8f93\u5165\u8f93\u51fa\u6d41io")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#343-%E6%9C%89%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BB"},"3.4.3. \u6709\u7528\u7684\u5de5\u5177\u7c7b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#344-%E5%85%83%E7%BC%96%E7%A8%8B"},"3.4.4. \u5143\u7f16\u7a0b"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#3441-%E5%8A%A8%E6%80%81%E5%A2%9E%E5%8A%A0%E6%96%B9%E6%B3%95"},"3.4.4.1. \u52a8\u6001\u589e\u52a0\u65b9\u6cd5")))))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#4-%E5%BA%95%E5%B1%82%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"},"4. \u5e95\u5c42\u8fd0\u884c\u539f\u7406"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#41-groovy%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%8Eclass%E6%96%87%E4%BB%B6%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB"},"4.1. Groovy\u4ee3\u7801\u6587\u4ef6\u4e0eclass\u6587\u4ef6\u7684\u5bf9\u5e94\u5173\u7cfb"))))),(0,r.kt)("h1",{id:"why-groovy"},"why groovy"),(0,r.kt)("h2",{id:"\u573a\u666f"},"\u573a\u666f"),(0,r.kt)("p",null,"\u505a\u89c4\u5219\u5f15\u64ce\u3001\u6d41\u7a0b\u5f15\u64ce\uff0c\u53ef\u4ee5\u505a\u52a8\u6001\u811a\u672c\u73af\u5883\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u4e0d\u9700\u8981\u53d1\u5e03\u53c8\u7ecf\u5e38\u53d8\u66f4\u7684\u573a\u5408"),(0,r.kt)("p",null,"groovy\u6709\u51e0\u4e2a\u5f88\u5f3a\u5927\u7684\u7c7bGroovyClassLoader\u3001GroovyScriptEngine\uff0c\u6240\u4ee5\u5f88\u9002\u5408\u7528\u6765\u505ahotfix\u3001hotswap\u3001hotdeploy\u7684\u4e1c\u897f"),(0,r.kt)("p",null,"\u5f53\u80f6\u6c34\u7528\u7684\uff0c\u6bd4\u5982\u8fde\u63a5\u5404\u4e2aJava\u7ec4\u4ef6\uff0c\u6216\u8005\u53bb\u5b9e\u73b0\u4e00\u4e9b\u6613\u53d8\u6027\u914d\u7f6e\uff0c\u6bd4\u5982\u7528Groovy\u53bb\u5199Maven\u63d2\u4ef6\uff0c\u6216\u8005\u6d4b\u8bd5Java\u6a21\u5757\u7684\u6d4b\u8bd5\u4f8b"),(0,r.kt)("h2",{id:"\u4f18\u7f3a\u70b9"},"\u4f18\u7f3a\u70b9"),(0,r.kt)("p",null,"\u4f18\u70b9:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u51cf\u5c11\u4ee3\u7801\uff0c\u5f00\u53d1\u6548\u7387\u9ad8\uff0c\u53ef\u4ee5\u70ed\u52a0\u8f7d")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5bf9 \u96c6\u5408, \u6b63\u5219, xml \u652f\u6301\u975e\u5e38\u597d")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5b8c\u5168\u517c\u5bb9Java\u8bed\u6cd5, \u80fd\u591f\u548cJava\u5f88\u597d\u7684\u7ed3\u5408, \u8bed\u6cd5\u7b80\u5355\u591a\u4e86"))),(0,r.kt)("p",null,"\u7f3a\u70b9:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6027\u80fd\u95ee\u9898"),(0,r.kt)("p",{parentName:"li"},"  \u53ef\u4ee5\u901a\u8fc7Groovy\u7684\u9759\u6001\u7f16\u8bd1 (\u901a\u8fc7\u6dfb\u52a0\u6ce8\u89e3@CompileStatic\u542f\u7528) \u6216\u8005\u8c03\u7528Java\u7a0b\u5e8f\u89e3\u51b3\u3002"),(0,r.kt)("p",{parentName:"li"},"  \u5982\u679c\u9759\u6001\u7f16\u8bd1, \u4f1a\u727a\u7272\u8bed\u8a00\u7684\u52a8\u6001\u7279\u6027"))),(0,r.kt)("h1",{id:"\u6709\u54ea\u4e9b\u9879\u76ee\u5728\u4f7f\u7528"},"\u6709\u54ea\u4e9b\u9879\u76ee\u5728\u4f7f\u7528"),(0,r.kt)("p",null,"Gradle, \u4f7f\u7528 groovy \u8bed\u6cd5\u6784\u5efa\u9879\u76ee, android \u9879\u76ee\u5728\u7528"),(0,r.kt)("p",null,"Spock\uff0c\u6d4b\u8bd5\u6846\u67b6\uff0c\u53ef\u901a\u8fc7\u5176\u7279\u6709\u7684DSL\u7f16\u5199\u6d4b\u8bd5\u6848\u4f8b, \u7b80\u5355\u65b9\u4fbf;"),(0,r.kt)("p",null,"Grails\uff0cWeb\u5f00\u53d1\u6846\u67b6\uff0c\u65e0\u9700\u81ea\u884c\u7f16\u5199\u811a\u624b\u67b6\u4ee3\u7801\uff0c\u53ef\u7528\u6765\u5feb\u901f\u5f00\u53d1\uff1b\u7c7b\u6bd4 Ruby on rails"),(0,r.kt)("p",null,"Griffon\uff0cSwing\u5f00\u53d1\u6846\u67b6\uff0c\u5176\u7075\u611f\u6765\u81ea\u4e8eGrails"),(0,r.kt)("p",null,"jenkins dsl plugin ...\u901a\u8fc7groovy\u751f\u6210\u6240\u6709jenkins jobs \u5b9e\u73b0CICD as code"),(0,r.kt)("p",null,"spring boot + groovy template \u8fdb\u884c web \u5f00\u53d1 (",(0,r.kt)("a",{parentName:"p",href:"https://www.logicbig.com/tutorials/spring-framework/spring-boot/groovy-view.html"},"https://www.logicbig.com/tutorials/spring-framework/spring-boot/groovy-view.html"),", ",(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/developerworks/cn/java/j-pg02155/"},"https://www.ibm.com/developerworks/cn/java/j-pg02155/"),")"),(0,r.kt)("p",null,"\u53c2\u8003 ",(0,r.kt)("a",{parentName:"p",href:"http://www.groovy-lang.org/ecosystem.html"},"http://www.groovy-lang.org/ecosystem.html")),(0,r.kt)("h1",{id:"\u600e\u4e48\u4f7f\u7528"},"\u600e\u4e48\u4f7f\u7528"),(0,r.kt)("h2",{id:"idea-\u73af\u5883\u642d\u5efa"},"idea \u73af\u5883\u642d\u5efa"),(0,r.kt)("p",null,"idea \u81ea\u5e26\u5bf9 groovy \u7684\u7f16\u8bd1\u652f\u6301, \u667a\u80fd\u63d0\u793a, \u4f46\u662f\u8fd0\u884c\u8fd8\u662f\u8981maven\u4f9d\u8d56\u7684\u652f\u6301 (\u4e3a\u4e86\u9632\u6b62\u4f4d\u7f6e\u9519\u8bef, \u63a8\u8350 spring boot \u96c6\u6210)"),(0,r.kt)("p",null,"\u901a\u8fc7 \u5982\u4e0b \u6309\u9700\u5f15\u5165: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>org.codehaus.groovy</groupId>\n            <artifactId>groovy-all</artifactId>\n            <version>3.0.2</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n\n<dependencies>\n    <dependency>\n        ... \u6309\u9700\u5f15\u5165\n    </dependency>\n</dependencies>\n")),(0,r.kt)("p",null,"\u6216\u8005\u76f4\u63a5\u5f15\u5165\u6240\u6709, \u5305\u62ec json, xml \u5904\u7406\u7b49\u7b49...:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.codehaus.groovy</groupId>\n    <artifactId>groovy-all</artifactId>\n    <version>3.0.2</version>\n</dependency>\n")),(0,r.kt)("p",null,"\u811a\u672c\u4f4d\u7f6e: \u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e, \u4f46\u662f\u5982\u679c\u5e0c\u671b\u5728 Java \u4e2d\u8c03\u7528, \u63a8\u8350\u5728 class path \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"resources/groovy/script")," \u4e0b \u65b0\u5efa demo.groovy \u811a\u672c, \u53ef\u4ee5\u76f4\u63a5\u53f3\u952e\u8fd0\u884c. "),(0,r.kt)("p",null,"demo.groovy \u4e2d\u53ef\u4ee5\u8c03\u7528\u5176\u4ed6 groovy class (\u65e0\u8bba\u662f\u5426\u5728 class path \u4e0b) , \u4e5f\u53ef\u4ee5\u8c03\u7528\u5176\u4ed6 Java class ,\u5f53\u7136, \u9700\u8981 import \u5bf9\u5e94\u7c7b\u7684\u5305"),(0,r.kt)("p",null,"groovy class \u4f4d\u7f6e: \u63a8\u8350\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"/src/main/groovy")," \u4e0b (\u6807\u8bb0\u4f4d class path), \u8fd9\u6837\u6709\u4e9b\u63d2\u4ef6\u9ed8\u8ba4\u914d\u7f6e\u65e0\u9700\u4fee\u6539. \u547d\u540d\u4e00\u822c\u5927\u5199, \u5982 GroovyPerson.groovy: (",(0,r.kt)("inlineCode",{parentName:"p"},"\u5185\u90e8\u4e0d\u8981\u6709\u5176\u4ed6\u811a\u672c\u5185\u5bb9"),", \u5426\u5219\u4f1a\u7c7b\u540d\u51b2\u7a81, \u56e0\u4e3a groovy \u4ee3\u7801\u82e5\u4f5c\u4e3a\u811a\u672c\u8fd0\u884c, \u4f1a\u4ee5\u811a\u672c\u6587\u4ef6\u540d\u751f\u6210\u4e00\u4e2a class, \u8fd9\u6837\u5c31\u548c\u811a\u672c\u5185\u5b9a\u4e49\u7684\u7c7b\u51b2\u7a81)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},'package io.github.xiaoyureed.starterdemo\n\n/**\n * @author xiaoyu* date: 2020/3/15\n */\nclass GroovyPerson {\n    String id\n    String name\n\n    String toString() {\n        return "${this.getClass().toString()}{${id}, ${name}}"\n    }\n}\n')),(0,r.kt)("h2",{id:"\u548c-java-\u7684\u96c6\u6210"},"\u548c Java \u7684\u96c6\u6210"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://groovy-lang.org/integrating.html"},"http://groovy-lang.org/integrating.html")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/softidea/p/5122188.html"},"https://www.cnblogs.com/softidea/p/5122188.html")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.baeldung.com/groovy-java-applications"},"https://www.baeldung.com/groovy-java-applications"),", ",(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/qq_26886929/article/details/86501051"},"https://blog.csdn.net/qq_26886929/article/details/86501051")),(0,r.kt)("h3",{id:"groovyclassloader"},"GroovyClassLoader"),(0,r.kt)("p",null,"GroovyClassLoader\u662f\u4e00\u4e2a\u5b9a\u5236\u7684\u7c7b\u88c5\u8f7d\u5668\uff0c\u8d1f\u8d23\u89e3\u91ca\u52a0\u8f7dJava\u7c7b\u4e2d\u7528\u5230\u7684Groovy\u7c7b (\u5c06\u52a0\u8f7d\u4e0e\u811a\u672c\u540d\u79f0\u5bf9\u5e94\u7684\u7c7b, \u5176\u4f59\u811a\u672c\u5185\u5bb9\u65e0\u6548)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//GroovyClassLoader\u4e0eJava\u4e2d\u7684\u52a0\u8f7d\u5668\u4e00\u6837\uff0c\u540c\u4e00\u4e2a\u7c7b\u540d\u7684\u7c7b\u53ea\u80fd\u52a0\u8f7d\u4e00\u6b21\uff0c\u5982\u679c\u60f3\u518d\u6b21\u52a0\u8f7d\uff0c\u5fc5\u987b\u8c03 GroovyClassLoader\u7684clearCache()\u65b9\u6cd5\u79fb\u9664\u6240\u6709\u5df2\u7ecf\u52a0\u8f7d\u7684Groovy Class\n\npublic static GroovyObject groovyObject(String classpathSource) throws URISyntaxException, IOException, IllegalAccessException, InstantiationException {\n    GroovyClassLoader groovyClassLoader = new GroovyClassLoader(\n            GroovyUtil.class.getClassLoader());\n    Class groovyClass = groovyClassLoader.parseClass(Paths.get(Thread.currentThread()\n            .getContextClassLoader().getResource(classpathSource).toURI()).toFile());\n    return (GroovyObject) groovyClass.newInstance();\n}\n\n@Test\npublic void t1() throws IOException, InstantiationException, IllegalAccessException, URISyntaxException {\n    GroovyObject groovyObject = GroovyUtil.groovyObject("groovy/clazz/Cat.groovy");\n    groovyObject.setProperty("id", UUID.randomUUID().toString());\n    groovyObject.setProperty("name", "xiao");\n    System.out.println(groovyObject);\n    groovyObject.invokeMethod("hi", null);\n}\n')),(0,r.kt)("p",null,"\u811a\u672c\u5185\u5bb9:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},'package groovy.clazz\n\n/**\n * @author xiaoyu* date: 2020/3/16\n */\nclass Cat {\n    def name\n    def id\n    String toString() {\n        "${this.class.name}{ ${id}, ${name} }"\n    }\n\n    def hi() {\n        println "I am a cat [${name}]"\n    }\n}\n\n')),(0,r.kt)("p",null,"\u5f53\u7136, \u4e5f\u53ef\u4ee5\u76f4\u63a5\u6267\u884c\u811a\u672c, \u4e0d\u8fc7\u8fd9\u4e0d\u662f GroovyClassLoader \u4e3b\u8981\u529f\u80fd"),(0,r.kt)("h3",{id:"groovyshell"},"GroovyShell"),(0,r.kt)("p",null,"GroovyShell\u5141\u8bb8\u5728Java\u7c7b\u4e2d\u6c42\u4efb\u610fGroovy\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u60a8\u53ef\u4f7f\u7528Binding\u5bf9\u8c61\u8f93\u5165\u53c2\u6570\u7ed9\u8868\u8fbe\u5f0f\uff0c\n\u5e76\u6700\u7ec8\u901a\u8fc7GroovyShell\u8fd4\u56deGroovy\u8868\u8fbe\u5f0f\u7684\u8ba1\u7b97\u7ed3\u679c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"GroovyShell groovyShell = new GroovyShell();\n\n")),(0,r.kt)("p",null,"\u4f18\u5316:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"private static GroovyShell groovyShell = new GroovyShell();\n \nprivate static Map<String, Script> scriptCache = new ConcurrentHashMap<>();\n \nprivate static <T> T invoke(String scriptText, String function, Object... objects) throws Exception {\n    Script script;\n    String cacheKey = DigestUtils.md5Hex(scriptText);\n \n if (scriptCache.containsKey(cacheKey)) {\n    script = scriptCache.get(cacheKey);\n } else {\n    script = groovyShell.parse(scriptText);\n    scriptCache.put(cacheKey, script);\n }\n \n    return (T) InvokerHelper.invokeMethod(script, function, objects);\n}\n")),(0,r.kt)("h3",{id:"groovyscriptengine"},"GroovyScriptEngine"),(0,r.kt)("p",null,"GroovyScriptEngine\u4ece\u60a8\u6307\u5b9a\u7684\u4f4d\u7f6e\uff08\u6587\u4ef6\u7cfb\u7edf\uff0cURL\uff0c\u6570\u636e\u5e93\uff0c\u7b49\u7b49, \u5373\u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u5939\uff09\u52a0\u8f7dGroovy\u811a\u672c\uff0c\u5e76\u4e14\u968f\u7740\u811a\u672c\u53d8\u5316\u800c\u91cd\u65b0\u52a0\u8f7d\u5b83\u4eec"),(0,r.kt)("p",null,"\u76f8\u4e92\u5173\u8054\u7684\u591a\u4e2a\u811a\u672c\uff0c\u4f7f\u7528GroovyScriptEngine\u4f1a\u66f4\u597d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Test\n    public void t2() throws IOException, ResourceException, ScriptException {\n        // \u82e5\u662f\u6570\u7ec4, \u5219\u6709\u591a\u4e2a\u811a\u672c\u5730\u5740\n        // GroovyScriptEngine \u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684 static \u6210\u5458, \u4e0d\u5fc5\u6bcf\u6b21\u90fd\u521b\u5efa\n        GroovyScriptEngine groovyScriptEngine = new GroovyScriptEngine(PathUtil.absoluteClasspath("groovy/script/"));\n        Binding binding = new Binding();\n        binding.setProperty("input", "xiao");\n        groovyScriptEngine.run("demo.groovy", binding);\n    }\n\n/**\n    \u6267\u884c\u811a\u672c\u7684\u67d0\u4e2a\u65b9\u6cd5\n*/\n@Test\n    public void t2_1() throws javax.script.ScriptException, FileNotFoundException, NoSuchMethodException {\n        // GroovyScriptEngineFactory \u53ef\u4ee5\u4f5c\u4e3a \u9759\u6001\u6210\u5458, \u4e0d\u5fc5\u6bcf\u6b21\u90fd\u521b\u5efa\n        GroovyScriptEngineFactory groovyScriptEngineFactory = new GroovyScriptEngineFactory();\n        ScriptEngine              scriptEngine              = groovyScriptEngineFactory.getScriptEngine();\n        scriptEngine.eval(new FileReader(Paths.get(PathUtil.absoluteClasspath("groovy/script/demo1.groovy")).toFile()));\n        Invocable invocable = (Invocable) scriptEngine;\n        invocable.invokeFunction("func", "xiao");\n    }\n')),(0,r.kt)("p",null,"\u811a\u672c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},'package groovy.script\n/**\n * @author xiaoyu* date: 2020/3/16\n */\nprintln("demo =============")\n\ndef hi(str) {\n    println("hello, ${str}")\n}\n\n// input \u4e3a\u4f20\u5165\u53c2\u6570\nhi(input)\n')),(0,r.kt)("h3",{id:"\u4f18\u5316"},"\u4f18\u5316"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/softidea/p/5122188.html"},"https://www.cnblogs.com/softidea/p/5122188.html")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4f7f\u7528GroovyShell\u7684parse\u65b9\u6cd5\u5bfc\u81f4perm\u533a\u7206\u6ee1. \u89e3\u51b3\u529e\u6cd5: \u901a\u5e38\u505a\u6cd5\u662f\u7f13\u5b58Script\u5bf9\u8c61, key \u4e3a groovyScript \u811a\u672c\u7684md5\u503c"),(0,r.kt)("p",{parentName:"li"},"  Groovy\u5f15\u64ce\u6bcf\u6b21\u6267\u884c\u811a\u672c, \u90fd\u4f1a\u751f\u6210\u4e00\u4e2a class \u548c\u5bf9\u5e94\u7684 classloader,    \u65e0\u6cd5\u88ab\u7acb\u5373\u56de\u6536, \u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u540e\u5c06perm\u5360\u6ee1\uff0c\u4e00\u76f4\u89e6\u53d1fullgc"),(0,r.kt)("p",{parentName:"li"},"  \u4e3a\u4ec0\u4e48\u6bcf\u6b21\u6267\u884c\u811a\u672c\u90fd\u4f1a\u751f\u6210\u65b0\u7684 class? \u56e0\u4e3a\u5bf9\u4e8e\u540c\u4e00\u4e2agroovy\u811a\u672c\uff0cgroovy \u5f15\u64ce \u4e3a\u4e86\u4fdd\u8bc1\u6bcf\u6b21\u6267\u884c\u7684\u90fd\u662f\u65b0\u7684\u811a\u672c\u5185\u5bb9\uff0c\u4f1a\u6bcf\u6b21\u751f\u6210\u4e00\u4e2a\u65b0\u540d\u5b57\u7684Class\u6587\u4ef6 , \u7c7b\u540d\u548c\u65f6\u95f4\u6233\u6709\u5173"),(0,r.kt)("p",{parentName:"li"},"  \u4e3a\u4ec0\u4e48 groovy class loader \u52a0\u8f7d\u7684\u7c7b\u65e0\u6cd5\u88ab gc? \u4e3a\u4e86\u8282\u7701\u7f16\u8bd1\u65f6\u95f4, GroovyClassLoader \u4ee3\u7801\u4e2d\u6709\u4e00\u4e2a class \u5bf9\u8c61 \u7684\u7f13\u5b58 map, \u811a\u672c class \u5bf9\u8c61\u88ab\u8fd9\u4e2a\u7f13\u5b58\u5f15\u7528, \u65e0\u6cd5\u56de\u6536"))),(0,r.kt)("h2",{id:"maven-\u4e2d-java-\u548c-groovy-\u6df7\u5408\u5f00\u53d1"},"maven \u4e2d Java \u548c groovy \u6df7\u5408\u5f00\u53d1"),(0,r.kt)("p",null,"maven \u63d2\u4ef6 \u53ca\u4f9d\u8d56:"),(0,r.kt)("p",null,"\u9ed8\u8ba4\u4f1a\u628a",(0,r.kt)("inlineCode",{parentName:"p"},"src/main/java"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"src/main/groovy"),"\u4f5c\u4e3a\u6e90\u7801\u76ee\u5f55"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<project>\n  <build>\n    <plugins>\n    \x3c!-- \u589e\u52a0 gmavenplus \u63d2\u4ef6 \u5141\u8bb8\u96c6\u6210Groovy\u5230Maven--\x3e\n      <plugin> \n        <groupId>org.codehaus.gmavenplus</groupId>  \n        <artifactId>gmavenplus-plugin</artifactId>\n        <version>1.7.1</version>\n        <executions>\n          <execution>\n            <goals>\n              <goal>addSources</goal>\n              <goal>addTestSources</goal>\n              <goal>generateStubs</goal>\n              <goal>compile</goal>\n              <goal>generateTestStubs</goal>\n              <goal>compileTests</goal>\n              <goal>removeStubs</goal>\n              <goal>removeTestStubs</goal>\n            </goals>\n          </execution>\n        </executions>\n      </plugin>\n      <plugin>\n        <groupId>org.apache.maven.plugins</groupId>\n        <artifactId>maven-compiler-plugin</artifactId>\n      </plugin>\n    </plugins>\n  </build>\n  <dependencies>\n    <dependency>\n      <groupId>org.codehaus.groovy</groupId>\n      \x3c!-- groovy-all \u5305\u542b\u6240\u6709groovy GDK \u4e2d\u7684\u5305,\n       groovy \u53ea\u5305\u542b\u57fa\u7840 Groovy \u7f16\u8bd1\u9700\u8981\u7684\u5305--\x3e\n      <artifactId>groovy-all</artifactId>\n      \x3c!-- any version of Groovy \\>= 1.8.2 should work here --\x3e\n      <version>2.5.7</version>\n      \x3c!--\u6307\u5b9a\u7c7b\u578b\u4e3a pom --\x3e\n      <type>pom</type>\n    </dependency>\n  </dependencies>\n</project>\n")),(0,r.kt)("p",null,"\u5982\u679c \u5982\u679c\u8981\u4f7f\u7528\u5176\u4ed6\u76ee\u5f55\u4f5c\u4e3aGroovy\u6e90\u7801\u76ee\u5f55,\n\u6bd4\u5982src/additionalGroovy"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<plugin>\n        <groupId>org.codehaus.gmavenplus</groupId>\n        <artifactId>gmavenplus-plugin</artifactId>\n        <version>1.7.1</version>\n        <executions>\n          <execution>\n            <goals>\n              <goal>addSources</goal>\n              <goal>addTestSources</goal>\n              <goal>generateStubs</goal>\n              <goal>compile</goal>\n              <goal>generateTestStubs</goal>\n              <goal>compileTests</goal>\n              <goal>removeStubs</goal>\n              <goal>removeTestStubs</goal>\n            </goals>\n          </execution>\n        </executions>\n        <configuration>\n          <sources>\n        \x3c!-- \u5728\u6b64\u8282\u70b9\u4e0b\u914d\u7f6e\u6e90\u7801\u76ee\u5f55,\u53ef\u914d\u7f6e\u591a\u4e2a --\x3e\n            <source>\n              <directory>${project.basedir}/src/main/groovy</directory>\n              <includes>\n                <include>**/*.groovy</include>\n              </includes>\n            </source>\n            <source>\n              <directory>${project.basedir}/src/additionalGroovy</directory>\n              <includes>\n                 <include>**/*.groovy</include>\n              </includes>\n            </source>\n          </sources>\n        </configuration>\n      </plugin>\n    </plugins>\n  </build>\n")),(0,r.kt)("p",null,"\u5982\u679c\u6e90\u7801\u76ee\u5f55\u8fd8\u662f\u4e0d\u751f\u6548, \u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"src/main")," \u6574\u4e2a\u4f5c\u4e3a maven \u6e90\u7801\u76ee\u5f55:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<project>\n    <build>\n        \x3c!-- \u5c06${project.basedir}/src/main\u6574\u4e2a\u4f5c\u4e3a\u6e90\u7801\u76ee\u5f55,\u4f60\u518d\u6dfb\u52a0\u4ec0\u4e48\u6e90\u7801\u90fd\u5728\u91cc\u9762\u4e86 --\x3e\n        <sourceDirectory>${project.basedir}/src/main</sourceDirectory>\n    </build>\n</project>\n")),(0,r.kt)("h2",{id:"groovy-\u8bed\u6cd5"},"groovy \u8bed\u6cd5"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://www.groovy-lang.org/documentation.html"},"http://www.groovy-lang.org/documentation.html")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://docs.groovy-lang.org/next/html/documentation/"},"http://docs.groovy-lang.org/next/html/documentation/")),(0,r.kt)("p",null,"\u6240\u6709\u7c7b\u90fd\u662f public \u7684\u3002\u6240\u6709\u5c5e\u6027\u90fd\u662f private \u7684 (\u6bcf\u4e2a\u5c5e\u6027\u81ea\u52a8\u63d0\u4f9b\u4e00\u7ec4 public getter \u548c setter \u65b9\u6cd5)\uff0c\u800c\u6240\u6709\u65b9\u6cd5\u90fd\u662f public"),(0,r.kt)("p",null,"\u5728\u811a\u672c\u4e2d\u8c03\u7528 Java class \u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},'new JavaPerson(firstName:"John", lastName:"Doe")'),", \u5f53\u7136, \u8c03\u7528 groovy class \u4e5f\u4e00\u6837. \u5e95\u5c42\u5b9e\u73b0\u662f Groovy \u5148\u8c03\u7528\u9ed8\u8ba4\u7684\u65e0\u5b9e\u53c2\u6784\u9020\u51fd\u6570\uff0c\u7136\u540e\u8c03\u7528\u6bcf\u4e2a\u5b57\u6bb5\u7684\u76f8\u5e94 setter"),(0,r.kt)("p",null,'\u8c03\u7528 getter \u65f6, \u65e0\u9700\u4f7f\u7528\u66f4\u5197\u957f\u7684 gp.getFirstName()\uff0c\u53ea\u9700\u8c03\u7528 gp.firstName. \u7c7b\u4f3c \u7684, gp.setLastName("Jones") \u548c gp.lastName = "Jones" \u662f\u7b49\u6548\u7684'),(0,r.kt)("h3",{id:"\u548c-java-\u7684\u4e0d\u540c"},"\u548c Java \u7684\u4e0d\u540c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},'\n\n// \u9ed8\u8ba4\u5bfc\u5165 - default imports\n\n/////////////////////////////////////\n\n/**\n * "==" \u7684\u4e0d\u540c --- \u5728 Java\u4e2d, \u8868\u793a\u5bf9\u8c61\u5b8c\u5168\u76f8\u7b49(\u5730\u5740, \u5185\u5bb9\u5168\u76f8\u540c), groovy \u4e2d\u8868\u793a equals; \u5982\u679c\u5e0c\u671b\u53d6\u5f97Java\u4e2d\u7684\u6548\u679c, \u4f7f\u7528 a.is(b)\n */\n\n ///////////////////////////////////////////////////////\n\n/**\n * default \u5fc5\u987b\u4f4d\u4e8e swith / case \u7ed3\u6784\u7684\u7ed3\u5c3e --- \u5728 Java \u4e2d\uff0c\u5b83\u53ef\u4ee5\u653e\u5728 swith / case \u7ed3\u6784\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u4f46\u5728 Groovy \u4e2d\uff0c\u5b83\u66f4\u50cf\u662f\u4e00\u4e2a else \u5b50\u53e5\uff0c\u800c\u975e\u4e00\u4e2a\u9ed8\u8ba4\u7684 case \u5b50\u53e5\n */\n\n ////////////////////////////////////////////////////\n\nint ab=1//\u4e0d\u9700\u8981\u5206\u53f7\n\nString multiLine=\'\'\'\n1//\u9002\u5e94osc\u7684markdwon\n2//\u9002\u5e94osc\u7684markdwon\n3\'\'\'//\u591a\u884c\u5b57\u7b26\u4e32\n\nString interpolationString="$map or ${map}"//\u8fd9\u662f\u63d2\u503c\u5b57\u7b26\u4e32,\u57fa\u672c\u73b0\u4ee3\u7684\u8bed\u8a00\u90fd\u6709\u5427\n\n//////////////////////////////////////////////\n\n/**\n *\n * \u8303\u56f4: \u4f8b\u5982 \u201c0..4\u201d \u8868\u660e\u5305\u542b \u6574\u6570 0\u30011\u30012\u30013\u30014\u3002Groovy \u8fd8\u652f\u6301\u6392\u9664\u8303\u56f4\uff0c\u201c0..<4\u201d \u8868\u793a 0\u30011\u30012\u30013\u3002\u8fd8\u53ef\u4ee5\u521b\u5efa\u5b57\u7b26\u8303\u56f4\uff1a\u201ca..e\u201d \u76f8\u5f53\u4e8e a\u3001b\u3001c\u3001d\u3001e\u3002\u201ca..<e\u201d \u5305\u62ec\u5c0f\u4e8e e \u7684\u6240\u6709\u503c\n *\n * for(i in 0..5) {}\n *\n * def range=1..5//\u8fd9\u662f\u4e2arange\n */\n\n////////////////////////////////////////////////////////\n\n/**\n * \u9ed8\u8ba4\u53c2\u6570\u503c: def repeat(val, repeat=5) {}, \u90a3\u4e48repeat \u662f\u53ef\u9009\u7684\n */\n\n////////////////////////////////////////////////////////\n\n\n/**\n * multi methods (\u65b9\u6cd5\u91cd\u8f7d) ------ dynamic binding\n */\n\nint method(String str) {\n    return 1\n}\n\nint method(Object obj) {\n    return 2\n}\n\nObject o = "xxx"\ndef result = method(o)\nprintln result // 1\n\n///////////////////////////////////////////////\n\n/**\n * \u5728 Groovy \u4e2d\u53ef\u4ee5\u7701\u7565 return \u8bed\u53e5\u3002Groovy \u9ed8\u8ba4\u8fd4\u56de\u65b9\u6cd5\u7684\u6700\u540e\u4e00\u884c\n */\n\n\n///////////////////////////////////////////////\n\n\n/**\n * boxing/unboxing vs. widening ----- \u5728Java\u4e2d widening \u4f18\u5148\u4e8e boxing\n *\n * \u4f46\u662f\u5728groovy \u4e2d, all primitive references use their wrapper class (\u57fa\u7840\u7c7b\u578b\u81ea\u52a8\u4f7f\u7528\u5305\u88c5\u5bf9\u8c61)\n */\n\nint i\nm(i) // \u4e0b\u9762\u54ea\u4e2a\u65b9\u6cd5\u4f1a\u8c03\u7528?\n\nvoid m(long l) { // java \u4e2d\u4f1a\u8c03\u7528, \u5728Java\u4e2d widening(\u5ef6\u5c55) \u4f18\u5148\u4e8e boxing\n    println "in m(long)"\n}\n\nvoid m(Integer i) {// groovy \u4e2d\u4f1a\u8c03\u7528\n    println "in m(Integer)"\n}\n\n\n/////////////////////////////////////////////\n\n\n/**\n * magic method \u9b54\u6cd5\u65b9\u6cd5\n */\ndef numbers1 = [1,2,3,4]\nassert numbers1.join(",") == "1,2,3,4"\nassert [1,2,3,4,3].count(3) == 2\n\n/////////////////////////////////////////////\n\n/**\n * - package scope ------ @PackageScope \u5305\u79c1\u6709\u5b57\u6bb5\n */\nclass Person implements Serializable {\n    @PackageScope\n    String name // \u4f7f\u7528 @PackageScope \u6807\u6ce8, \u90a3\u4e48\u8fd9\u4e2afield\u662f package-private field\n\n    int age // \u5e76\u4e0d\u662f package-private field, \u800c\u662f\u4e00\u4e2a private field, \u4ee5\u53ca getter , setter\n\n    Person(name, age) {\n        this.name = name\n        this.age = age\n    }\n}\n\n////////////////////////////////////////////////\n\n/**\n * - array init -------- \u4f7f\u7528 `[...]`, `{...}` \u7559\u7ed9\u4e86closure\n */\n\nint[] array = [1, 2, 3]\n\n////////////////////////////////////////////////\n\n\n /**\n * \u96c6\u5408\n */\ndef map=[a:1,b:2]//\u8fd9\u662f\u4e2amap\ndef map2 = [:] //\u9ed8\u8ba4\u662fLinkedHashMap\nassert map2.class == LinkedHashMap\nmap.\'a\' = 1 // key \u5305\u542b\u5305\u542b\u7a7a\u767d\u5b57\u7b26\u4e4b\u7c7b\u7684\u53ef\u4ee5\u7528\u8fd9\u79cd\u65b9\u5f0f\nmap.b = 2\nmap << [c: 3]\n// null \u7a7a\u96c6\u5408(\u5305\u542bmap) 0 \u7a7a\u5b57\u7b26\u4e32 \u7a7a\u6570\u7ec4 \u5728boolean\u73af\u5883\u4e2d\u662ffalse\ndef aMap=[:]\nif (aMap){//groovy\u7684false\u503c,\u4e0a\u9762\u4e5f\u63d0\u8fc7\n    println(\'\u8fd9\u6bb5\u4ee3\u7801\u4e0d\u4f1a\u88ab\u6267\u884c\')//aMap\u610f\u5473\u7740false\n}\nmap << [\'c\':3]//\u8fd9\u662f\u91cd\u8f7d\u8fd0\u7b97\u7b26,\u5b9e\u73b0\u8d77\u6765\u5176\u5b9e\u5f88\u7b80\u5355\n\ndef list1=[1,2,3,4,5]//\u8fd9\u662f\u4e2alist\ndef list2 = [] //\u9ed8\u8ba4\u662fArrayList\nassert list2.class == ArrayList//\u53ef\u4ee5\u7701\u7565.class\n\nLinkedList list3 = []//\u56e0\u4e3a\u9ed8\u8ba4\u662fArrayList,\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u6539\u53d8\nassert list3.class == LinkedList\n\ndef numbers = [1,2,3,4]\nassert numbers + 5 == [1,2,3,4,5]\nassert numbers - [2,3] == [1,4] // \u521b\u5efa\u4e86\u65b0\u7684\u96c6\u5408\u5b9e\u4f8b\n\n////////////////////////////////////////////////////////\n\n/**\n * \u5206\u5e03\u64cd\u4f5c\u7b26 (spread operator) `*` -- \u904d\u5386\u96c6\u5408\n */\nassert ["JAVA", "GROOVY"] ==\n        ["Java", "Groovy"]*.toUpperCase()\n\n\n////////////////////////////////////////////////////////\n\n/**\n * \u9632\u6b62null \u7a7a\u6307\u9488\u5f02\u5e38 -- \u5728\u65b9\u6cd5\u8c03\u7528\u524d\u9762\u6dfb\u52a0\u4e00\u4e2a ? \u5c31\u76f8\u5f53\u4e8e\u5728\u8c03\u7528\u524d\u9762\u653e\u4e86\u4e00\u4e2a\u6761\u4ef6\uff0c\u53ef\u4ee5\u9632\u6b62\u5728 null \u5bf9\u8c61\u4e0a\u8c03\u7528\u65b9\u6cd5\u3002\n *\n */\nsng2.artist?.toUpperCase()\n\n\n////////////////////////////////////////////////////////\n\n/**\n*   \u7c7b\u521d\u59cb\u5316\n*/\n/**\n * \u5bf9\u8c61\u7684\u521d\u59cb\u5316: \u9ed8\u8ba4\u63d0\u4f9b\u6784\u9020\u51fd\u6570, \u9ed8\u8ba4\u63d0\u4f9b getter, setter\n */\n def sng = new Song(name:"Le Freak", artist:"Chic", genre:"Disco")\n/**\n * class Pro {\n *     Integer property1 //1 \u6ca1\u7528private public protected(gorrvy\u91cc\u9762\u662f            @PackageScope)\n *     def property2   //2 \u53ef\u9009\u7684statoc final(\u6709final\u5c31\u4f1a\u6ca1\u6709set) \u4e4b\u7c7b\u7684\n *     final String property3  //3 def \u6216\u8005 \u786e\u5b9a\u7684\u7c7b\u578b\n *     static String property4 //4 property\u540d\u5b57\n *     //\u6ee1\u8db3\u4ee5\u4e0a\u56db\u4e2a\u6761\u4ef6\u5c31\u662f\u4e00\u4e2aproperty\n *\n *     //\u5b9e\u9645\u4e0a\u7b49\u4e8ejava\u4ee5\u4e0b\u5185\u5bb9,\u4e00\u4e2aprivate+getter+setter(final\u4fee\u9970\u7684\u6ca1\u6709setter)\n *     private String property5\n *\n *     String getProperty5() {*     return property5\n * }\n *\n * void setProperty5(String property5) {\n *     this.property5 = property5\n *     }\n * }\n * \n * static void main(String[] args) {*\n *     def pro = new Pro()\n *     Pro pro1 = [:]//\u4e5f\u53ef\u4ee5\u8fd9\u6837\u58f0\u660e,\u524d\u63d0\u662f\u5fc5\u987b\u6307\u5b9a\u7c7b\u578b,\u5e76\u4e14\u6709\u9ed8\u8ba4\u7684\u6784\u9020\u5668,\u4ee5\u4e0b\u7b49\u4ef7\n *     Pro pro2 = []//\u7b49\u4ef7\u4ee5\u4e0a\n *     Pro pro3 = [property1: 123]//\u7b49\u4ef7\u4ee5\u4e0a\n *     def pro4 = [property1: 123] as Pro//\u7b49\u4ef7\u4ee5\u4e0a\n *     pro.property1 = 123 //\u7c7b\u4f3cpro.setProperty1(123)\n *     println(pro.property1)//\u7c7b\u4f3cpro.getProperty1()\n * }\n */\n\n /////////////////////////////////////////////\n\n\n /**\n * ARM blocks (automatic resources management) ------- \u7c7b\u4f3cJava\u4e2d\u7684 try () {}*/\n\n// read file, demo1\nnew File("./package-info.java").eachLine("UTF-8") {\n    println it\n}\n\n// read file, demo2 ---- \u66f4\u50cfJava\u7684\u7248\u672c\nnew File("package-info.java").withReader(\'UTF-8\') { reader ->\n    reader.eachLine {\n        println it\n    }\n}\n\n//////////////////////////////////////////////////\n\n\n/**\n * anonymous inner class \u533f\u540d\u5185\u90e8\u7c7b\n */\n\ndef called = new CountDownLatch(1)\ndef timer = new Timer()\ntimer.schedule(new TimerTask() {\n    @Override\n    void run() {\n        called.countDown()\n    }\n}, 0)\n//assert called.await(2, TimeUnit.SECONDS)\n\n///////////////////////////////////////////////////\n\n\n/**\n  *  \u95ed\u5305\n  *\n  * lambda expression ---- java8 \u4e2d\u7684 lambda \u5b9e\u9645\u4e0a\u662f anonymous inner class, groovy \u4e2d\u7684\u624d\u662f\u771f\u6b63\u7684lambda -- closure(\u95ed\u5305)\n */\n\ndef acoll = ["Groovy", "Java", "Ruby"]\n\nacoll.each{\n    println it // it \u4e3a\u5173\u952e\u5b57, \u9ed8\u8ba4, \u4ee3\u8868\u6bcf\u4e2a\u5143\u7d20,\u53ef\u4ee5\u4fee\u6539\n}\n// \u7b49\u4ef7\nacoll.each{ value -> // \u81ea\u5b9a\u4e49\u9879\u53d8\u91cf\n    println value\n}\n\n// \u600e\u4e48\u6267\u884c\ndef excite = { word ->\n    return "${word}!!"\n}\nassert "Groovy!!" == excite("Groovy")\nassert "Java!!" == excite.call("Java")// \u7b49\u4ef7, \u4e0d\u5e38\u7528\n\n\nRunnable run = {\n    println \'run\'\n}\ndef list = Arrays.asList(1, 2, 3, 4)\nlist.each { println it }\nlist.each(this.&println)// \u7b49\u4ef7\n\n////////////////////////////////////////////////////\n\n/**\n * GString - groovy string ---- "abc${1}de", \u5141\u8bb8 `${...}`\n */\n\nassert \'c\'.getClass() == String\nassert "c".getClass() == String // \u7b49\u4ef7\nassert "c${1}".getClass() in GString\n\nchar a=\'a\'                  // \u5355\u4e2a\u5b57\u7b26\u7684 string \u4f1a\u81ea\u52a8\u8f6c\u578b\u4e3a char\nassert Character.digit(a, 16)==10 : \'But Groovy does boxing\'\nassert Character.digit((char) \'a\', 16)==10\nprintln \'assert ok\'\n\n// for single char strings, both are the same\nassert ((char) "c").class==Character\nassert ("c" as char).class==Character // \u7b49\u4ef7\n\n// \u5bf9\u4e8e\u5305\u542b\u591a\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u6765\u8bf4\uff0c\u4e24\u79cd\u6a21\u5f0f\u7684\u7ed3\u679c\u5e76\u4e0d\u76f8\u540c\ntry {\n    ((char) \'cx\') == \'c\'\n    assert false: \'will fail - not castable\'\n} catch(GroovyCastException e) {\n    println \'\u591a\u4e2a\u5b57\u7b26\u4e0d\u80fd\u8f6c\u4e3achar\'\n}\nassert (\'cx\' as char) == \'c\' // Groovy \u6a21\u5f0f\u7684\u8f6c\u6362\u66f4\u5bbd\u5bb9\u4e00\u4e9b\uff0c\u53ea\u53d6\u7b2c\u4e00\u4e2a\u5b57\u7b26\nassert \'cx\'.asType(char) == \'c\'// \u7b49\u4ef7\nprintln \'assert ok\'\n\n//////////////////////////////////////////////////////\n\n/**\n * \u9759\u6001\u7f16\u8bd1 @CompileStatic \u6807\u6ce8\u5728\u7c7b\u4e0a; \u4f46\u662f\u6bcf\u4e00\u4e2a\u7c7b\u90fd\u52a0@CompileStatic\u5b9e\u5728\u592a\u9ebb\u70e6,\u4e0d\u8fc7groovy\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7279\u6027.\u81ea\u5b9a\u4e49CompilerConfiguration\n * \u9759\u6001\u68c0\u67e5 @TypeChecked\n */\n\n//////////////////////////////////////////////////////\n\n\n\n\n\n')),(0,r.kt)("h3",{id:"\u8f93\u5165\u8f93\u51fa\u6d41io"},"\u8f93\u5165\u8f93\u51fa\u6d41io"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},"/**\n * reading file\n */\n\ndef file = new File(\"./package-info.java\")\n\nvoid func1(File file) {\n    file.eachLine {line -> // \u82e5 eachLine \u4e2d\u51fa\u73b0\u5f02\u5e38, resource \u4f1a\u81ea\u52a8\u5173\u95ed\n        println line\n    }\n}\n\nvoid func2(File file) {\n    file.eachLine {line, ln ->\n        println(\"Line $ln: \" + line)\n    }\n}\n\nList func3(File file) {\n    return file.collect {it}\n}\n\nString[] func4(File file) {\n    return file as String[]\n}\n\nbyte[] func5(File file) {\n    return file.bytes\n}\n\nvoid func6(File file) {\n    file.withInputStream {inputStream -> // stream \u4f1a\u81ea\u52a8\u5173\u95ed\n        new InputStreamReader(inputStream).eachLine {line ->\n            println(line)\n        }\n    }\n}\n\n//func1(file)\n//func2(file)\n//func3(file).forEach(System.out.&println)\n//Stream.of(func4(file)).forEach(System.out.&println)\n//func6(file)\n\n\n/**\n * write sth to a file\n */\n\nvoid fun1(File file) {\n    file.withWriter('utf-8') {writer ->\n        writer.writeLine('// hello groovy')\n    }\n}\n\n// \u539f\u6837\u8f93\u51fa '''xxx'''\nvoid fun2(File file) {\n    file << '''\n// write sth new with `''`\n'''\n}\n\n//fun1(file)\n//fun2(file)\n\n/**\n * \u5bf9\u8c61\u6570\u636e\u7684\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\n */\n// \u5e8f\u5217\u5316\nvoid fun3(File file) {\n    def hello = 'hello'\n    def b = true\n\n    file.withDataOutputStream {out ->\n        out.writeBoolean(b)\n        out.writeUTF(hello)\n    }\n}\n\n// \u53cd\u5e8f\u5217\u5316\nvoid fun4(File file) {\n    file.withDataInputStream {input ->\n        println(input.readBoolean()) // true\n        println(input.readUTF()) // hello\n    }\n}\n\n// \u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u4e00\u4e2a\u5bf9\u8c61\nvoid fun5(File file) {\n    def person = new Person('name', 10)\n\n    file.withObjectOutputStream {out ->\n        out.writeObject(person)\n    }\n\n    file.withObjectInputStream {input ->\n        def object = input.readObject()\n        println(object.name)\n        println(object.age)\n    }\n}\n\n\n\n//fun3(file)\n//fun4(file)\n//fun5(new File('d:/xiaoyu.txt'))\n\n\n/**\n * \u904d\u5386\u6587\u4ef6\n */\n\ndef dir = new File(\".\")\n\n// \u4e0d\u4f1a recurse\nvoid list1(File file) {\n    file.eachFile {f ->\n        println(f.name)\n    }\n}\n\n// \u6b63\u5219\u67e5\u627e\nvoid list2(File file) {\n    file.eachFileMatch(~/^package-info.java$/) { f ->\n        println(f.name)\n    }\n}\n\n// \u4f1a\u9012\u5f52\nvoid list3(File file) {\n    file.eachFileRecurse {f ->\n        println(f.name)\n    }\n}\n\n// \u53ea\u9488\u5bf9 \u6587\u4ef6 \u6267\u884c\u95ed\u5305\u4ee3\u7801, \u5bf9\u4e8e\u76ee\u5f55, \u4e0d\u6267\u884c closure\nvoid list4(File file) {\n    file.eachFileRecurse(FileType.FILES) {f ->\n        println(f.name)\n    }\n}\n\nvoid list5(File file) {\n    file.traverse {f ->\n        if (file.directory && file.name == 'bin') {\n            FileVisitResult.TERMINATE // \u82e5\u904d\u5386\u5230\u540d\u4e3a bin \u7684\u76ee\u5f55, \u9000\u51fa\u904d\u5386\n        } else {\n            println(f.name)\n            FileVisitResult.CONTINUE // \u7ee7\u7eed\u904d\u5386\n        }\n    }\n}\n\n//list1(dir)\n//list2(dir)\n\n/**\n * \u6267\u884c\u547d\u4ee4\u884c\u547d\u4ee4\n */\n\nvoid comm1() {\n    def process = 'ipconfig'.execute()\n    println(process.text) // \u4e2d\u6587\u4e71\u7801\n}\n\n// Process \u5bf9\u8c61\u6709  in/out/err \u6d41, in \u4e3a\u6807\u51c6\u8f93\u5165\u6d41, \u5bf9\u5e94\u7740command\u7684\u8f93\u51fa\u7ed3\u679c; out \u4ee3\u8868\u6807\u51c6\u8f93\u51fa, \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7out\u53d1\u9001\u6570\u636e\u7ed9command\n// \"cmd /c dir\" - Windows\u5e73\u53f0shell\u6709\u4e9bbuiltin command, \u9700\u8981\u901a\u8fc7 cmd \u8c03\u7528\nvoid comm2() {\n    def process = 'ipconfig'.execute()\n    process.in.eachLine('gbk') {line ->\n        println(line)// \u4f7f\u7528 windows \u9ed8\u8ba4 gbk \u7f16\u7801\n    }\n}\n\n// pipe line \u7ba1\u9053\n//todo\nvoid comm3() {\n    proc1 = 'ipconfig'.execute()\n    proc2 = 'grep'\n}\n\n//comm1()\ncomm2()\n\n\n")),(0,r.kt)("h3",{id:"\u6709\u7528\u7684\u5de5\u5177\u7c7b"},"\u6709\u7528\u7684\u5de5\u5177\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},"/**\n * ConfigSlurper \u7528\u6765\u5904\u7406 groovy script \u683c\u5f0f\u7684 config file\n */\n\nvoid func1() {\n    def config = new ConfigSlurper().parse('''\n        app.date = new Date()\n        app.age = 10\n        app {\n            name = \"Test${10}\"\n        }\n        app.\"a.b\" = \"a.b hello\"\n    ''')\n\n    assert config.app.date instanceof Date\n    assert config.app.age == 10\n    assert config.app.name == 'Test10'\n    assert config.app.xxx != null // // \u8981\u4e48\u8fd4\u56de\u914d\u7f6e\u503c\uff0c\u8981\u4e48\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 ConfigObject \u5b9e\u4f8b\uff0c\u4f46\u6c38\u8fdc\u4e0d\u4f1a\u8fd4\u56de null \u503c\n    assert config.app.\"a.b\" == \"a.b hello\" // \u5355\u5f15\u53f7\u4ea6\u53ef\n}\n\n// \u8bbe\u7f6e\u591a\u73af\u5883, \u7b80\u5355\u8d77\u89c1, `environments` \u4e0d\u53d8\nvoid func2() {\n\n    def config = new ConfigSlurper('dev').parse('''\n        environments {\n            dev {\n                app.port = 8080\n            }\n            prod {\n                app.post = 80\n            }\n            test {\n                app.port = 8081\n            }\n        }\n    ''')\n    assert config.app.port == 8080\n}\n\n//`environments` \u53ef\u4ee5\u4fee\u6539, \u4f46\u662f\u5bf9\u5e94\u7684\u4e5f\u9700\u8981\u6ce8\u518c\u64cd\u4f5c\nvoid func3() {\n    def slurper = new ConfigSlurper()\n    slurper.registerConditionalBlock('myProject', 'developers')\n\n    def config = slurper.parse('''\n        sendMail = true\n        \n        myProject {\n           developers {\n               sendMail = false\n           }\n        }\n    ''')\n\n    assert config.sendMail == false\n}\n\n// \u548c Java \u7684 properties \u6587\u4ef6\u6574\u5408\nvoid func4() {\n    def config = new ConfigSlurper().parse('''\n        app.date = new Date()\n        app.age  = 42\n        app {\n            name = \"Test${42}\"\n        }\n        haha = \"haha ${app.date}\"\n    ''')\n\n    def properties = config.toProperties()\n\n    println(properties.\"app.date\") // Sat May 25 17:49:02 CST 2019\n    println(properties.\"haha\") // haha Sat May 25 17:50:44 CST 2019\n\n    assert properties.\"app.date\" instanceof String\n    assert properties.\"app.age\" == '42'\n    assert properties.\"app.name\" == 'Test42'\n}\n\n//func1()\n//func2()\n//func3()\n//func4()\n\n\n/**\n * Expando - \u52a8\u6001\u53ef\u62d3\u5c55\u5bf9\u8c61\n */\n\nvoid exp1() {\n    def expando = new Expando()\n    expando.name = 'name'\n    expando.someMethod = {s -> \"some method. parameter = ${s}\"}\n\n    println(expando.name)\n    println(expando.someMethod('aa'))\n\n    assert expando.name == 'name'\n    assert expando.someMethod('aa') == 'some method. parameter = aa'\n}\n\n//exp1()\n\n/**\n * Observable list, map and set \u53ef\u89c2\u6d4b\u96c6\u5408, \u5217\u8868\n */\n\n")),(0,r.kt)("h3",{id:"\u5143\u7f16\u7a0b"},"\u5143\u7f16\u7a0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},"package io.github.xiaoyu.groovydemo\n\nimport groovy.time.TimeCategory\n\n/**\n * MOP\n * @author xiaoyu* @date 2019/5/25\n */\n//class MetaProgram {\n//}\n\n/**\n * \u8fd0\u884c\u65f6\u5143\u7f16\u7a0b\n * POJO - \u666e\u901a Java\u5bf9\u8c61\n * POGO - groovy \u5bf9\u8c61, \u7ee7\u627f\u81ea java.lang.Object \u4e14\u9ed8\u8ba4\u5b9e\u73b0\u4e86 groovy.lang.GroovyObject \u63a5\u53e3\u3002\n * Groovy interceptor - Groovy \u62e6\u622a\u5668 \u2014\u2014 \u5b9e\u73b0\u4e86 groovy.lang.GroovyInterceptable \u63a5\u53e3\u7684 Groovy \u5bf9\u8c61\uff0c\u5e76\u5177\u6709\u65b9\u6cd5\u62e6\u622a\u529f\u80fd\n */\n\n/**\n * GroovyObject \u63a5\u53e3:\n *\n * public interface GroovyObject {\n *\n *      // \u9664\u4e86\u5177\u6709 methodMissing\u7684\u529f\u80fd\u4e4b\u5916, \u548c GroovyInterceptable \u914d\u5408, \u53ef\u4ee5\u62e6\u622a\u6240\u6709\u65b9\u6cd5, \u5f00\u9500\u5927\n *      // \u5982\u679c\u5e0c\u671b\u66f4\u901a\u7528\u7684\u65b9\u5f0f: \u5728\u4e00\u4e2a\u5bf9\u8c61\u7684 MetaClass \u4e0a\u5b9e\u73b0 invokeMethod()\u3002\u8be5\u65b9\u6cd5\u540c\u65f6\u9002\u4e8e POGO \u4e0e POJO \u5bf9\u8c61\n *     Object invokeMethod(String methodName, Object methodArgs);\n *\n *      // \u6bcf\u6b21\u8bfb\u53d6 pogo \u5bf9\u8c61\u7684field(\u65e0\u8bba\u662f\u5426\u5b58\u5728)\u65f6, \u90fd\u5148\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\n *     Object getProperty(String propertyName);\n *\n *      // \u6bcf\u6b21\u8bbe\u7f6eproperties\u65f6\u8c03\u7528\n *     void setProperty(String propertyName, Object newValue);\n *\n *     MetaClass getMetaClass();\n *\n *     void setMetaClass(MetaClass metaClass);\n * }\n */\n\n/**\n * methodMissing - \u62e6\u622a\u7f3a\u5931\u7684\u65b9\u6cd5\u8c03\u7528 (https://www.cnblogs.com/maijunjin/articles/3043935.html)\n *                  \u4f7f\u7528 methodMissing\uff0c\u5e76\u4e0d\u4f1a\u4ea7\u751f\u50cf\u8c03\u7528 invokeMethod \u90a3\u4e48\u5927\u7684\u5f00\u9500\uff0c\u7b2c\u4e8c\u6b21\u8c03\u7528\u4ee3\u4ef7\u4e5f\u5e76\u4e0d\u6602\u8d35\n *\n * propertyMissing  - \u62e6\u622a\u7f3a\u5931\u7684\u5c5e\u6027\u8c03\u7528\n */\n\nclass InvokeMethodDemo1 {\n    // override invokeMethod()\n    def invokeMethod(String method, Object args) {\n        \"method ${method}(${args.join(', ')}) missing\"\n    }\n    def test() {\n        'method test exist'\n    }\n}\n\nvoid func1() {\n    def demo = new InvokeMethodDemo1()\n    assert demo.test() == 'method test exist'\n    assert demo.xxx() == 'method xxx() missing'\n    assert demo.yyy('abc') == 'method yyy(abc) missing'\n}\n\n//func1()\n\nclass InvokeMethodDemo2 implements GroovyInterceptable {\n    def invokeMethod(String method, Object args) {\n        'hoho'\n    }\n    def test1() {\n        println 'test1'\n    }\n}\n\nvoid func2() {\n    def demo = new InvokeMethodDemo2()\n    assert demo.test1() == 'hoho'\n    assert demo.xxx() == 'hoho' // \u8c03\u7528\u4e0d\u5b58\u5728\u7684\u65b9\u6cd5, \u4e5f\u88ab\u62e6\u622a\n\n    // \u5982\u679c\u60f3\u8981\u62e6\u622a\u6240\u6709\u7684\u65b9\u6cd5\u8c03\u7528\uff0c\u4f46\u53c8\u4e0d\u60f3\u5b9e\u73b0 GroovyInterceptable \u8fd9\u4e2a\u63a5\u53e3\uff0c\u90a3\n    // \u4e48\u53ef\u4ee5\u5728\u4e00\u4e2a\u5bf9\u8c61\u7684 MetaClass \u4e0a\u5b9e\u73b0 invokeMethod()\n    // \u540c\u65f6\u9002\u4e8e POGO \u4e0e POJO \u5bf9\u8c61\n    def str = 'aa'\n    str.metaClass.invokeMethod = {String method, Object args ->\n        \"invoke method ${method}\"\n    }\n    assert str.length() == 'invoke method length'\n    assert str.xxx() == 'invoke method xxx'\n}\n//func2()\n\n\nclass GetPropertyDemo {\n    def f1 = 'aa'\n    def f2 = 'bb'\n\n    def getProperty(String field) {\n        if (field == 'f3') { // \u62e6\u622a\u5bf9 f3 \u7684\u8bfb\u53d6\n            return 'f3'\n        }\n        // \u5176\u4ed6\u7684 field \u653e\u884c\n        return metaClass.getProperty(this, field)\n    }\n\n    def getF4() {\n        'f4'\n    }\n\n    void setProperty(String name, Object value) {\n        this.@\"$name\" = value + '-tail'\n    }\n}\n\nvoid testGetPropertyDemo() {\n    def demo = new GetPropertyDemo()\n\n    assert demo.f1 == 'aa'\n    assert demo.f2 == 'bb'\n\n    assert demo.f3 == 'f3'\n    assert demo.f4 == 'f4'\n}\n//testGetPropertyDemo()\n\nclass GetSetAttrDemo{\n    def f1 = 'f1'\n    def f2 = 'f2'\n\n    def f3\n    def f4\n\n}\nvoid testGetSetAttrDemo() {\n    def demo = new GetSetAttrDemo()\n\n    assert demo.metaClass.getAttribute(demo, 'f1') == 'f1'\n    assert demo.metaClass.getAttribute(demo, 'f2') == 'f2'\n\n    demo.metaClass.setAttribute(demo, 'f3', 'f3')\n    demo.metaClass.setAttribute(demo, 'f4', 'f4')\n    assert demo.metaClass.getAttribute(demo, 'f3') == 'f3'\n    assert demo.metaClass.getAttribute(demo, 'f4') == 'f4'\n}\n//testGetSetAttrDemo()\n\nclass MethodMissingDemo {\n    def methodMissing(String name, def args) {\n        return \"this is me\"\n    }\n\n    // \u9488\u5bf9\u9759\u6001\u65b9\u6cd5\u8c03\u7528\u7684\u7f3a\u5931\n    static def $static_methodMissing(String name, Object args) {\n        return \"Missing static method name is $name\"\n    }\n}\nvoid testMethodMissingDemo() {\n    def demo = new MethodMissingDemo()\n    assert demo.someMethod(20) == 'this is me'\n    assert MethodMissingDemo.xxx() == 'Missing static method name is xxx'\n}\n//testMethodMissingDemo()\n\nclass PropertyMissingDemo1 {\n    def propertyMissing(String f) { f }\n\n    // \u9488\u5bf9\u9759\u6001field\u8c03\u7528\u7684\u7f3a\u5931\n    static def $static_propertyMissing(String name) {\n        return \"Missing static property name is $name\"\n    }\n}\nvoid testPropertyMissingDemo1() {\n    assert new PropertyMissingDemo1().aaa == 'aaa'\n    assert PropertyMissingDemo1.xx == 'Missing static property name is xx'\n\n}\n//testPropertyMissingDemo1()\n\n// \u5b9e\u73b0\u52a8\u6001\u6dfb\u52a0 field\nclass PropertyMissingDemo2 {\n    def storage = [:] // map\n\n    // \u9488\u5bf9 setter\n    def propertyMissing(String name, value) { storage[name] = value }\n\n    // \u9488\u5bf9 getter\n    def propertyMissing(String name) { storage[name] }\n}\n\nvoid testPropertyMissingDemo2() {\n    def demo2 = new PropertyMissingDemo2()\n    demo2.xxx = 'aaa'\n\n    assert demo2.xxx == 'aaa'\n}\n//testPropertyMissingDemo2()\n\n\n/**\n * Groovy \u4ece Objective-C \u90a3\u91cc\u501f\u7528\u5e76\u5b9e\u73b0\u4e86\u4e00\u4e2a\u6982\u5ff5\uff0c\u53eb\u505a\uff1a\u7c7b\u522b\uff08Categories\uff09\n *\n * groovy \u9ed8\u8ba4\u63d0\u4f9b\u51e0\u4e2a categories class: TimeCategory, ServletCategory, DOMCategory\n *\n *          categories class \u4e2d\u7684\u65b9\u6cd5\u5747\u4e3astatic\u7684\n *\n * \u7c7b\u522b\u7c7b\u9ed8\u8ba4\u662f\u4e0d\u80fd\u542f\u7528\u7684\u3002\u8981\u60f3\u4f7f\u7528\u5b9a\u4e49\u5728\u7c7b\u522b\u7c7b\u4e2d\u7684\u65b9\u6cd5\uff0c\u5fc5\u987b\u8981\u4f7f\u7528 GDK \u6240\u63d0\u4f9b\u7684 use(CategoriesClass, Closure)\n */\nvoid testCategories() {\n    use(TimeCategory, {// closure \u53ef\u4ee5\u5199\u5230 \u5c0f\u62ec\u53f7\u4e4b\u5916\n        println 1.minute.from.now // \u4e00\u5206\u949f\u4e4b\u540e // TimeCategory \u4e3a Integer \u6dfb\u52a0\u4e86\u65b9\u6cd5\n        println(10.hour.ago)// \u5341\u5c0f\u65f6\u4e4b\u524d\n\n        def date = new Date()\n        println(date - 3.months)// \u4e09\u4e2a\u6708\u4e4b\u524d // TimeCategory \u4e3a Date \u6dfb\u52a0\u4e86\u65b9\u6cd5\n    })\n}\n\n//testCategories()\n\n/**\n * \u7f16\u8bd1\u65f6\u5143\u7f16\u7a0b\n */\n\n\n")),(0,r.kt)("h4",{id:"\u52a8\u6001\u589e\u52a0\u65b9\u6cd5"},"\u52a8\u6001\u589e\u52a0\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},"//\u7528\u95ed\u5305\u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5 var1\u4e3a\u53c2\u6570 ,->\u540e\u9762\u662f\u6267\u884c\u8bed\u53e5\uff08\u5f53\u7136\u53c2\u6570\u4e0d\u662f\u5fc5\u987b\u7684\uff09\ndef methodA={var1-> print \"this is methodA\"} \n\n//\u7528\u95ed\u5305\u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5 var1\u4e3a\u53c2\u6570 ,->\u540e\u9762\u662f\u6267\u884c\u8bed\u53e5\uff08\u5f53\u7136\u53c2\u6570\u4e0d\u662f\u5fc5\u987b\u7684\uff09\ndef methodB={var1-> print \"this is  methodB\"}\n\nString.metaClass.addMethodA=methodA;   //\u5c06methodA\u7ed1\u5b9a\u4e3a\u6210\u5458\u65b9\u6cd5\u3002\nString.metaClass.'static'.addMethodB=methodB;   //\u5c06methodB\u7ed1\u5b9a\u4e3a\u9759\u6001\u65b9\u6cd5\n\nString s=\"str\"; \ns.addMethodA('good');  //\u5b9e\u4f8b\u8c03\u7528\u65b9\u6cd5A \nString.addMethodB('hello'); //\u9759\u6001\u7c7b\u8c03\u7528\u65b9\u6cd5B\n")),(0,r.kt)("h1",{id:"\u5e95\u5c42\u8fd0\u884c\u539f\u7406"},"\u5e95\u5c42\u8fd0\u884c\u539f\u7406"),(0,r.kt)("p",null,"groovy.lang.GroovyObject (\u63a5\u53e3): groovy class \u4f1a\u9ed8\u8ba4\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3"),(0,r.kt)("p",null,"groovy.lang.Script (\u62bd\u8c61\u7c7b): groovyc \u7f16\u8bd1\u5668\u5c06\u83b7\u53d6\u6e90\u6587\u4ef6\u7684\u540d\u79f0\u5e76\u521b\u5efa\u4e86\u4e00\u4e2a\u540c\u540d\u7684\u7c7b\u7ee7\u627f Script, \u6574\u4e2a\u811a\u672c\u4e2d \u975e groovy class \u4ee3\u7801\u4f1a\u7f16\u8bd1\u5230\u8fd9\u91cc"),(0,r.kt)("h2",{id:"groovy\u4ee3\u7801\u6587\u4ef6\u4e0eclass\u6587\u4ef6\u7684\u5bf9\u5e94\u5173\u7cfb"},"Groovy\u4ee3\u7801\u6587\u4ef6\u4e0eclass\u6587\u4ef6\u7684\u5bf9\u5e94\u5173\u7cfb"),(0,r.kt)("p",null,"Groovy \u5141\u8bb8\u5b8c\u5168\u7701\u7565\u7f16\u8bd1\u6b65\u9aa4\uff0c\u4e0d\u8fc7\u4ecd\u7136\u53ef\u4ee5 \u8fdb\u884c\u7f16\u8bd1\u3002\u5982\u679c\u60f3\u8981\u7f16\u8bd1\u4ee3\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528 Groovy \u7f16\u8bd1\u5668 groovyc\u3002\u7528 groovyc \u7f16\u8bd1 Groovy \u4ee3\u7801\u4f1a\u4ea7\u751f\u6807\u51c6\u7684 Java \u5b57\u8282\u7801"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679cGroovy\u811a\u672c\u6587\u4ef6\u91cc\u53ea\u6709\u6267\u884c\u4ee3\u7801\uff0c\u6ca1\u6709\u5b9a\u4e49\u4efb\u4f55\u7c7b\uff08class)"),(0,r.kt)("p",{parentName:"li"},"  \u5219\u7f16\u8bd1\u5668\u4f1a\u751f\u6210\u4e00\u4e2aScript\u7684\u5b50\u7c7b\uff0c\u7c7b\u540d\u548c\u811a\u672c\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u4e00\u6837\uff0c\u800c\u811a\u672c\u7684\u4ee3\u7801\u4f1a\u88ab\u5305\u542b\u5728\u4e00\u4e2a\u540d\u4e3arun\u7684\u65b9\u6cd5\u4e2d\uff0c\u540c\u65f6\u8fd8\u4f1a\u751f\u6210\u4e00\u4e2amain\u65b9\u6cd5\uff0c\u4f5c\u4e3a\u6574\u4e2a\u811a\u672c\u7684\u5165\u53e3\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679cGroovy\u811a\u672c\u6587\u4ef6\u91cc\u4ec5\u542b\u6709\u4e00\u4e2a\u7c7b\uff0c\u800c\u8fd9\u4e2a\u7c7b\u7684\u540d\u5b57\u53c8\u548c\u811a\u672c\u6587\u4ef6\u7684\u540d\u5b57\u4e00\u81f4"),(0,r.kt)("p",{parentName:"li"},"  \u8fd9\u79cd\u60c5\u51b5\u4e0b\u5c31\u548cJava\u662f\u4e00\u6837\u7684\uff0c\u5373\u751f\u6210\u4e0e\u6240\u5b9a\u4e49\u7684\u7c7b\u4e00\u81f4\u7684class\u6587\u4ef6\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679cGroovy\u811a\u672c\u6587\u4ef6\u542b\u6709\u591a\u4e2a\u7c7b\uff0c"),(0,r.kt)("p",{parentName:"li"},"  groovy\u7f16\u8bd1\u5668\u4f1a\u4e3a\u6bcf\u4e2a\u7c7b\u751f\u6210\u4e00\u4e2a\u5bf9\u5e94\u7684class\u6587\u4ef6\u3002\u5982\u679c\u60f3\u76f4\u63a5\u6267\u884c\u8fd9\u4e2a\u811a\u672c\uff0c\u5219\u811a\u672c\u91cc\u7684\u7b2c\u4e00\u4e2a\u7c7b\u5fc5\u987b\u6709\u4e00\u4e2astatic\u7684main\u65b9\u6cd5\u3002"))))}d.isMDXComponent=!0}}]);