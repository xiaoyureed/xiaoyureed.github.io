"use strict";(self.webpackChunkwiki_1=self.webpackChunkwiki_1||[]).push([[7755],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>g});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),o=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},m=function(e){var n=o(e.components);return r.createElement(s.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=o(t),d=a,g=c["".concat(s,".").concat(d)]||c[d]||u[d]||l;return t?r.createElement(g,p(p({ref:n},m),{},{components:t})):r.createElement(g,p({ref:n},m))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,p=new Array(l);p[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[c]="string"==typeof e?e:a,p[1]=i;for(var o=2;o<l;o++)p[o]=t[o];return r.createElement.apply(null,p)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7846:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>p,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>o});var r=t(7462),a=(t(7294),t(3905));const l={title:"Spring MVC",tags:["mvc"],date:new Date("2014-01-16T17:42:41.000Z"),toc_min_heading_level:2,toc_max_heading_level:5},p=void 0,i={unversionedId:"springmvc-note",id:"springmvc-note",title:"Spring MVC",description:"\u57fa\u4e8emvc\u6a21\u5f0f\u7684web\u6846\u67b6, spring\u7684\u4e00\u4e2a\u6a21\u5757\uff0c\u5b83\u4e0espring\u96c6\u6210\u65e0\u9700\u4e2d\u95f4\u6574\u5408\u5305\u3002",source:"@site/docs/springmvc-note.md",sourceDirName:".",slug:"/springmvc-note",permalink:"/en/docs/springmvc-note",draft:!1,editUrl:"https://github.com/xiaoyureed/xiaoyureed.github.io/tree/main/docs/springmvc-note.md",tags:[{label:"mvc",permalink:"/en/docs/tags/mvc"}],version:"current",frontMatter:{title:"Spring MVC",tags:["mvc"],date:"2014-01-16T17:42:41.000Z",toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"Spring",permalink:"/en/docs/spring-note"}},s={},o=[{value:"\u89c6\u56fe\u89e3\u6790\u5668",id:"\u89c6\u56fe\u89e3\u6790\u5668",level:2},{value:"\u6620\u5c04\u5668 Mapping",id:"\u6620\u5c04\u5668-mapping",level:2},{value:"\u9002\u914d\u5668 Adapter",id:"\u9002\u914d\u5668-adapter",level:2},{value:"\u63a7\u5236\u5668 Controller",id:"\u63a7\u5236\u5668-controller",level:2},{value:"\u6ce8\u89e3\u5f00\u53d1",id:"\u6ce8\u89e3\u5f00\u53d1",level:2},{value:"Spring3.1\u524d\u540e\u533a\u522b",id:"spring31\u524d\u540e\u533a\u522b",level:3},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:3},{value:"\u5355\u4e2a controller \u4e2d\u5199\u591a\u4e2a\u4e1a\u52a1\u65b9\u6cd5",id:"\u5355\u4e2a-controller-\u4e2d\u5199\u591a\u4e2a\u4e1a\u52a1\u65b9\u6cd5",level:2},{value:"\u6570\u636e\u4f20\u9012\u65b9\u5f0f",id:"\u6570\u636e\u4f20\u9012\u65b9\u5f0f",level:2},{value:"\u6536\u96c6\u9875\u9762\u7684\u53c2\u6570",id:"\u6536\u96c6\u9875\u9762\u7684\u53c2\u6570",level:3},{value:"\u6536\u96c6\u6570\u7ec4\u53c2\u6570",id:"\u6536\u96c6\u6570\u7ec4\u53c2\u6570",level:3},{value:"\u624b\u673aList\u53c2\u6570",id:"\u624b\u673alist\u53c2\u6570",level:3},{value:"\u4f20\u9012\u53c2\u6570\u7ed9\u9875\u9762",id:"\u4f20\u9012\u53c2\u6570\u7ed9\u9875\u9762",level:3},{value:"\u4ec0\u4e48\u662finterceptor",id:"\u4ec0\u4e48\u662finterceptor",level:2},{value:"interceptor\u548cfilter\u5bf9\u6bd4",id:"interceptor\u548cfilter\u5bf9\u6bd4",level:2},{value:"\u600e\u4e48\u4f7f\u7528interceptor",id:"\u600e\u4e48\u4f7f\u7528interceptor",level:2},{value:"\u901a\u8fc7\u81ea\u5b9a\u4e49web\u914d\u7f6e",id:"\u901a\u8fc7\u81ea\u5b9a\u4e49web\u914d\u7f6e",level:3},{value:"\u901a\u8fc7\u6ce8\u89e3",id:"\u901a\u8fc7\u6ce8\u89e3",level:3},{value:"\u81ea\u5b9a\u4e49\u6ce8\u89e3\u62e6\u622a\u5668",id:"\u81ea\u5b9a\u4e49\u6ce8\u89e3\u62e6\u622a\u5668",level:3},{value:"HandlerMethod\u548cMethodHandle",id:"handlermethod\u548cmethodhandle",level:2},{value:"\u901a\u8fc7Java\u52a8\u6001\u4ee3\u7406\u5b9e\u73b0\u62e6\u622a\u5668\u529f\u80fd",id:"\u901a\u8fc7java\u52a8\u6001\u4ee3\u7406\u5b9e\u73b0\u62e6\u622a\u5668\u529f\u80fd",level:2}],m={toc:o},c="wrapper";function u(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("div",{align:"center"},"\u57fa\u4e8emvc\u6a21\u5f0f\u7684web\u6846\u67b6, spring\u7684\u4e00\u4e2a\u6a21\u5757\uff0c\u5b83\u4e0espring\u96c6\u6210\u65e0\u9700\u4e2d\u95f4\u6574\u5408\u5305\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#1-%E4%BB%80%E4%B9%88%E6%98%AFmvc"},"1. \u4ec0\u4e48\u662fmvc")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#2-springmvc%E5%92%8Cstruts2%E5%8C%BA%E5%88%AB"},"2. springmvc\u548cstruts2\u533a\u522b")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#3-quickstart"},"3. quickstart")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#4-springmvcxml%E9%85%8D%E7%BD%AE"},"4. springmvc.xml\u914d\u7f6e"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#41-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"},"4.1. \u89c6\u56fe\u89e3\u6790\u5668")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#42-%E6%98%A0%E5%B0%84%E5%99%A8-mapping"},"4.2. \u6620\u5c04\u5668 Mapping")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#43-%E9%80%82%E9%85%8D%E5%99%A8-adapter"},"4.3. \u9002\u914d\u5668 Adapter")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#44-%E6%8E%A7%E5%88%B6%E5%99%A8-controller"},"4.4. \u63a7\u5236\u5668 Controller")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#45-%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"},"4.5. \u6ce8\u89e3\u5f00\u53d1"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#451-spring31%E5%89%8D%E5%90%8E%E5%8C%BA%E5%88%AB"},"4.5.1. Spring3.1\u524d\u540e\u533a\u522b")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#452-%E9%85%8D%E7%BD%AE"},"4.5.2. \u914d\u7f6e")))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#5-controller%E8%AF%A6%E8%A7%A3"},"5. Controller\u8be6\u89e3"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#51-%E5%8D%95%E4%B8%AA-controller-%E4%B8%AD%E5%86%99%E5%A4%9A%E4%B8%AA%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95"},"5.1. \u5355\u4e2a controller \u4e2d\u5199\u591a\u4e2a\u4e1a\u52a1\u65b9\u6cd5")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#52-%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E6%96%B9%E5%BC%8F"},"5.2. \u6570\u636e\u4f20\u9012\u65b9\u5f0f"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#521-%E6%94%B6%E9%9B%86%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8F%82%E6%95%B0"},"5.2.1. \u6536\u96c6\u9875\u9762\u7684\u53c2\u6570")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#522-%E6%94%B6%E9%9B%86%E6%95%B0%E7%BB%84%E5%8F%82%E6%95%B0"},"5.2.2. \u6536\u96c6\u6570\u7ec4\u53c2\u6570")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#523-%E6%89%8B%E6%9C%BAlist%E5%8F%82%E6%95%B0"},"5.2.3. \u624b\u673aList\u53c2\u6570")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#524-%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0%E7%BB%99%E9%A1%B5%E9%9D%A2"},"5.2.4. \u4f20\u9012\u53c2\u6570\u7ed9\u9875\u9762")))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#6-%E6%8B%A6%E6%88%AA%E5%99%A8interceptor"},"6. \u62e6\u622a\u5668interceptor"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#61-%E4%BB%80%E4%B9%88%E6%98%AFinterceptor"},"6.1. \u4ec0\u4e48\u662finterceptor")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#62-interceptor%E5%92%8Cfilter%E5%AF%B9%E6%AF%94"},"6.2. interceptor\u548cfilter\u5bf9\u6bd4")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#63-%E6%80%8E%E4%B9%88%E4%BD%BF%E7%94%A8interceptor"},"6.3. \u600e\u4e48\u4f7f\u7528interceptor"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#631-%E9%80%9A%E8%BF%87%E8%87%AA%E5%AE%9A%E4%B9%89web%E9%85%8D%E7%BD%AE"},"6.3.1. \u901a\u8fc7\u81ea\u5b9a\u4e49web\u914d\u7f6e")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#632-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3"},"6.3.2. \u901a\u8fc7\u6ce8\u89e3")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#633-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E6%8B%A6%E6%88%AA%E5%99%A8"},"6.3.3. \u81ea\u5b9a\u4e49\u6ce8\u89e3\u62e6\u622a\u5668")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#64-handlermethod%E5%92%8Cmethodhandle"},"6.4. HandlerMethod\u548cMethodHandle")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#65-%E9%80%9A%E8%BF%87java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E6%8B%A6%E6%88%AA%E5%99%A8%E5%8A%9F%E8%83%BD"},"6.5. \u901a\u8fc7Java\u52a8\u6001\u4ee3\u7406\u5b9e\u73b0\u62e6\u622a\u5668\u529f\u80fd")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#7-%E9%99%90%E5%AE%9A%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8Fgetpost"},"7. \u9650\u5b9a\u8bf7\u6c42\u65b9\u5f0fGET/POST")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#8-%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2%E5%99%A8-%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%E5%99%A8"},"8. \u65e5\u671f\u8f6c\u6362\u5668 \u7f16\u7801\u8f6c\u6362\u5668")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#9-initbind%E8%A7%A3%E5%86%B3%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"},"9. @InitBind\u89e3\u51b3\u5b57\u7b26\u4e32\u8f6c\u65e5\u671f\u7c7b\u578b")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#10-%E7%BB%93%E6%9E%9C%E7%9A%84%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91"},"10. \u7ed3\u679c\u7684\u8f6c\u53d1\u548c\u91cd\u5b9a\u5411")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#11-%E8%BF%94%E5%9B%9Ejson-responsebody"},"11. \u8fd4\u56dejson, @ResponseBody")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#12-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%94%BE%E8%A1%8C"},"12. \u9759\u6001\u8d44\u6e90\u653e\u884c")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#13-requestcontextholder%E8%8E%B7%E5%8F%96requestresponse"},"13. RequestContextHolder\u83b7\u53d6request,response")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#14-%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7"},"14. \u7edf\u4e00\u5f02\u5e38\u6355\u83b7"))),(0,a.kt)("h1",{id:"\u4ec0\u4e48\u662fmvc"},"\u4ec0\u4e48\u662fmvc"),(0,a.kt)("h1",{id:"springmvc\u548cstruts2\u533a\u522b"},"springmvc\u548cstruts2\u533a\u522b"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"springmvc\u7684\u5165\u53e3\u662f\u4e00\u4e2aservlet\uff0c\u5373\u524d\u7aef\u63a7\u5236\u5668\uff0c\u4f8b\u5982\uff1a",(0,a.kt)("em",{parentName:"li"},".action; struts2\u5165\u53e3\u662f\u4e00\u4e2afilter\u8fc7\u8651\u5668\uff0c\u5373\u524d\u7aef\u8fc7\u6ee4\u5668\uff0c\u4f8b\u5982\uff1a/")),(0,a.kt)("li",{parentName:"ul"},"springmvc\u662f\u57fa\u4e8e\u65b9\u6cd5\u5f00\u53d1\uff0c\u4f20\u9012\u53c2\u6570\u662f\u901a\u8fc7\u65b9\u6cd5\u5f62\u53c2\uff0c\u53ef\u4ee5\u8bbe\u8ba1\u4e3a\u5355\u4f8b; struts2\u662f\u57fa\u4e8e\u7c7b\u5f00\u53d1\uff0c\u4f20\u9012\u53c2\u6570\u662f\u901a\u8fc7\u7c7b\u7684\u5c5e\u6027\uff0c\u53ea\u80fd\u8bbe\u8ba1\u4e3a\u591a\u4f8b\n"),(0,a.kt)("li",{parentName:"ul"},"springmvc\u901a\u8fc7\u53c2\u6570\u89e3\u6790\u5668\u662f\u5c06request\u5bf9\u8c61\u5185\u5bb9\u8fdb\u884c\u89e3\u6790\u6210\u65b9\u6cd5\u5f62\u53c2\uff0c\u5c06\u54cd\u5e94\u6570\u636e\u548c\u9875\u9762\u5c01\u88c5\u6210ModelAndView\u5bf9\u8c61\uff0c\u6700\u540e\u53c8\u5c06\u6a21\u578b\u6570\u636e\u901a\u8fc7request\u5bf9\u8c61\u4f20\u8f93\u5230\u9875\u9762; struts\u91c7\u7528\u503c\u6808\u5b58\u50a8\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u6570\u636e\uff0c\u901a\u8fc7OGNL\u5b58\u53d6\u6570\u636e")),(0,a.kt)("h1",{id:"quickstart"},"quickstart"),(0,a.kt)("p",null,"\u4f9d\u8d56: spring\u7684\u57fa\u672cjar\u5916, \u8fd8\u9700\u8981spring-webmvc (",(0,a.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/13533700/maven-dependency-spring-web-vs-spring-webmvc"},"spring-web vs spring-webmvc"),")"),(0,a.kt)("p",null,"\u914d\u7f6e\u524d\u7aef\u63a7\u5236\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<web-app >\n  <servlet>\n    <servlet-name>springmvc</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    \n    \x3c!-- \u6307\u5b9aspringmvc.xml\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u82e5\u4e0d\u6307\u5b9a\uff0c\u9ed8\u8ba4\u8bfb\u53d6WEB-INF\u4e0b\u7684springmvc-servlet.xml;\n        \u8fd9\u91cc\u6587\u4ef6\u540d\u79f0\u7684springmvc\u7531<servlet-name>xxxxx</servlet-name>\u6307\u5b9a --\x3e\n    <init-param>\n        <param-name>contextConfigLocation</param-name>\n        <param-value>classpath:springmvc.xml</param-value>\n    </init-param>\n  </servlet>\n  <servlet-mapping>\n    <servlet-name>springmvc</servlet-name>\n    <url-pattern>*.action</url-pattern>\n    \x3c!-- \n    url-patern\u914d\u7f6e:\n    \u7b2c\u4e00\u79cd: *.action, \u4ee5[.action]\u7ed3\u5c3e\u7684\u8bbf\u95ee\u7531DispatcherServlet\u8fdb\u884c\u89e3\u6790\n    \u7b2c\u4e8c\u79cd: /, \u6240\u6709\u8bbf\u95ee\u90fd\u901a\u8fc7DispatcherServlet\u89e3\u6790, \u5bf9\u4e8e\u9759\u6001\u8d44\u6e90\u9700\u8981\u914d\u7f6e\u4e0d\u8ba9DS\u89e3\u6790, \u4f7f\u7528\u8fd9\u79cd\u914d\u7f6e\u53ef\u4ee5\u5b9e\u73b0RESTful\u98ce\u683c\u7684url\n    \u7b2c\u4e09\u79cd: /*, \u8fd9\u6837\u914d\u7f6e\u4e0d\u5bf9, \u56e0\u4e3a\u5982\u679c\u6700\u7ec8\u8981\u8f6c\u53d1\u5230\u4e00\u4e2ajsp, \u4ecd\u7136\u4f1a\u7531DS\u89e3\u6790jsp\u5730\u5740, \u4e0d\u80fd\u6839\u636ejsp\u627e\u5230Handler, \u4f1a\u62a5\u9519\n     --\x3e\n  </servlet-mapping>\n \n</web-app>\n\n')),(0,a.kt)("p",null,"springmvc\u7684\u914d\u7f6e\u6587\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xmlns:mvc="http://www.springframework.org/schema/mvc"\n    xmlns:task="http://www.springframework.org/schema/task"  \n    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\n        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">\n\n\x3c!-- \u7b2c\u4e00\u4e2a\u63a7\u5236\u5668\uff1bname\u503c\u7528\u4e8eURL\u8bbf\u95ee\uff0cURL\uff1ahttp://localhost:8080/\u9879\u76ee\u540d/queryItems1.do --\x3e\n    <bean name="/queryItems1.do" class="com.xy.controller.Controller1"></bean>\n        \n\x3c!-- \u7b2c\u4e8c\u4e2a\u63a7\u5236\u5668 --\x3e\n    <bean name="/queryItems2.do" class="com.xy.controller.Controller2"></bean>\n    \n\x3c!-- \u7b2c\u4e09\u4e2a\u63a7\u5236\u5668\uff0c\u901a\u8fc7\u6ce8\u89e3\u914d\u7f6e\uff0c\u8fd9\u91cc\u4f7f\u7528\u7ec4\u4ef6\u626b\u63cf\u5668\u52a0\u8f7d\u63a7\u5236\u5668 --\x3e\n    <context:component-scan base-package="com.xy.controller"></context:component-scan>\n    \n\x3c!-- \u6620\u5c04\u5668(\u6846\u67b6\u5df2\u7ecf\u5b8c\u6210\uff0c\u6ca1\u6709\u7279\u6b8a\u9700\u6c42\u5219\u53ef\u7701\u7565) --\x3e  \n<bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"></bean>  \n\x3c!-- \u9002\u914d\u5668(\u6846\u67b6\u3002\u3002\u540c\u4e0a) --\x3e  \n<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"></bean>  \n\x3c!-- \u89c6\u56fe\u89e3\u6790\u5668(\u6846\u67b6\u3002\u3002\u3002\u540c\u4e0a) --\x3e  \n<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"></bean>\n\n</beans>\n\n')),(0,a.kt)("p",null,"\u5982\u679c\u57fa\u4e8e\u6ce8\u89e3\u5f00\u53d1, \u6620\u5c04\u5668, \u9002\u914d\u5668, \u89c6\u56fe\u89e3\u6790\u5668\u53ef\u7701\u7565, \u5b9e\u9645\u6846\u67b6\u9ed8\u8ba4\u52a0\u4e0a\u4e86:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u57fa\u4e8e\u6ce8\u89e3\u7684\u6620\u5c04\u5668(\u53ef\u9009) --\x3e\n<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>\n\n\x3c!-- \u57fa\u4e8e\u6ce8\u89e3\u7684\u9002\u914d\u5668(\u53ef\u9009) --\x3e\n<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>\n\n\x3c!-- \u89c6\u56fe\u89e3\u6790\u5668(\u53ef\u9009) --\x3e\n<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"/>\n\n')),(0,a.kt)("p",null,"\u5f00\u53d1\u5904\u7406\u5668Controller"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'/**\nSpringmvc\u5f00\u53d1\u5904\u7406\u5668\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u4e3b\u8981\u4e09\u79cd\uff1a\n    \u5b9e\u73b0HttpRequestHandler\u63a5\u53e3\u3001\n    \u5b9e\u73b0Controller\u63a5\u53e3\u3001\n    \u4f7f\u7528\u6ce8\u89e3\u5f00\u53d1\n\n*/\n//\u7ee7\u627fHttpRequestHandler\npublic class Controller1 implements HttpRequestHandler {\n\n    @Override\n    public void handleRequest(HttpServletRequest request, HttpServletResponse response) \n            throws ServletException, IOException {\n\n        List<Item> itemList = new ArrayList<Item>();\n        \n        Item item1 = new Item();\n        Item item2 = new Item();\n        item1.setName("item1");\n        item1.setId("1");\n        item2.setName("item2");\n        item2.setId("2");\n        itemList.add(item2);\n        itemList.add(item1);\n        \n        request.setAttribute("items", itemList);\n        request.getRequestDispatcher("WEB-INF/jsp/test.jsp").forward(request, response);\n        \n    }\n\n}\n\n//\u7ee7\u627fController\u63a5\u53e3\npublic class Controller2 implements Controller {\n\n    @Override\n    public ModelAndView handleRequest(HttpServletRequest arg0, HttpServletResponse arg1) throws Exception {\n        \n        List<Item> itemList = new ArrayList<Item>();\n        \n        Item item1 = new Item();\n        Item item2 = new Item();\n        item1.setName("item1");\n        item1.setId("1");\n        item2.setName("item2");\n        item2.setId("2");\n        itemList.add(item2);\n        itemList.add(item1);\n        \n        ModelAndView mv = new ModelAndView();\n        mv.addObject("items", itemList); //\u76f8\u5f53\u4e8e\u653e\u5165request\u57df\u4e2d\n        mv.setViewName("/WEB-INF/jsp/test2.jsp");\n        \n        return mv;\n    }\n\n}\n\n\n//\u4f7f\u7528\u6ce8\u89e3\n@Controller\npublic class Controller3 {\n\n    @RequestMapping("/queryItem3")//\u8fd9\u91cc\u65e0\u8bba\u52a0\u4e0d\u52a0.action\uff0c\u8bbf\u95ee\u5730\u5740\u5747\u4e3a\uff1ahttp://127.0.0.1:8080/springmvc-test/queryItem3.action\n    public ModelAndView queryItem() {\n        List<Item> itemList = new ArrayList<Item>();\n        \n        Item item1 = new Item();\n        Item item2 = new Item();\n        item1.setName("item1");\n        item1.setId("1");\n        item2.setName("item2");\n        item2.setId("2");\n        itemList.add(item2);\n        itemList.add(item1);\n        \n        ModelAndView mv = new ModelAndView();\n        mv.addObject("items", itemList); //\u76f8\u5f53\u4e8e\u653e\u5165request\u57df\u4e2d\n        mv.setViewName("/WEB-INF/jsp/test2.jsp");\n        \n        return mv;\n    }\n}\n')),(0,a.kt)("p",null,"jsp\u9875\u9762:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsp"},'<%@ page language="java" contentType="text/html; charset=UTF-8"\n    pageEncoding="UTF-8"%>\n<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">\n<html>\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n<title>Insert title here</title>\n</head>\n<body>\n\n    springmvc demo<br/>\n<%--\n    <%=request.getAttribute("items") %>\n --%>\n \n ${requestScope.items[0].name}\n \n\n</body>\n</html>\n')),(0,a.kt)("h1",{id:"springmvcxml\u914d\u7f6e"},"springmvc.xml\u914d\u7f6e"),(0,a.kt)("h2",{id:"\u89c6\u56fe\u89e3\u6790\u5668"},"\u89c6\u56fe\u89e3\u6790\u5668"),(0,a.kt)("p",null,"\u89e3\u6790\u89c6\u56fe\u903b\u8f91\u540d\u5bf9\u5e94\u7684\u771f\u5b9e\u8def\u5f84"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\n\x3c!-- \u5982\u679c\u9700\u8981html\u7684\u89c6\u56fe\u89e3\u6790\u5668, \u53ef\u4ee5\u4f7f\u7528jsp\u7684, \u4e5f\u53ef\u4ee5\u4f7f\u7528Freemarker\u7684\u89c6\u56fe\u89e3\u6790\u5668 --\x3e\n<bean id="htmlviewResolver"   \n    class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">   \n    <property name="suffix" value=".html" />\x3c!-- html\u662f\u6ca1\u6709prefix\u524d\u7f00\u5c5e\u6027\u7684 --\x3e\n    \x3c!--order\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8 --\x3e\n    <property name="order" value="0"></property>  \n    <property name="contentType" value="text/html;charset=UTF-8"></property>          \n</bean>\n\x3c!-- \u6216\u8005 --\x3e\n\n\n\x3c!-- \u89c6\u56fe\u89e3\u6790\u5668(\u6846\u67b6\u9ed8\u8ba4\u63d0\u4f9b, \u89e3\u6790jsp) --\x3e  \n\x3c!-- \u800cid\u4e3aviewResolver\u7684viewResolver\u7684\u4f18\u5148\u7ea7\u662f\u6700\u4f4e\u7684 --\x3e\n<bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">\n    <property name="prefix" value="/WEB-INF/jsp/"/>\n    <property name="suffix" value=".jsp"/>\n\n    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>\n    <property name="contentType" value="text/html;charset=UTF-8"/>\x3c!-- \u7f51\u9875mimetype  --\x3e\n    <property name="order" value="10"/>\x3c!-- \u4f18\u5148\u7ea7,0\u4e3a\u6700\u9ad8, \u4f18\u5148\u89e3\u6790 --\x3e\n    \x3c!-- InternalResourceViewResolver\u7684\u4f18\u5148\u7ea7\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u6700\u4f4e\uff0c\u4e5f\u5c31\u662forder\u8981\u6700\u5927\u3002\u4e0d\u7136\u5b83\u4f1a\u963b\u788d\u5176\u4ed6\u89c6\u56fe\u89e3\u6790\u5668\n        \u56e0\u4e3a, \u8fd9\u4e2a\u89e3\u6790\u5668\u5982\u679c\u4e0d\u80fd\u89e3\u6790\u9875\u9762, \u4e0d\u4f1a\u8fd4\u56denull, \u89e3\u6790\u4e0d\u4f1a\u7ee7\u7eed\u8fdb\u884c, \u89e3\u6790\u94fe\u5c31\u65ad\u4e86\n     --\x3e\n</bean>\n\n\x3c!-- \u914d\u7f6eFreeMark\u89c6\u56fe --\x3e  \n<bean id="freeMarkerViewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">  \n    <property name="contentType" value="text/html;charset=UTF-8"/>        \n    <property name="viewClass" value="org.springframework.web.servlet.view.freemarker.FreeMarkerView"/>  \n    <property name="suffix" value=".ftl"/>  \x3c!-- \u8fd9\u91cc\u6ca1\u6709\u914d\u7f6e prefix, \u7559\u5728\u4e0b\u9762\u914d\u7f6e --\x3e\n    <property name="cache" value="true"/>  \n    <property name="exposeSessionAttributes" value="true"/>  \n    <property name="exposeRequestAttributes" value="true"/>       \n    <property name="exposeSpringMacroHelpers" value="true"/>  \n    \x3c!-- \u5728\u9875\u9762\u4e2d\u4f7f\u7528${rc.contextPath}\u5c31\u53ef\u83b7\u5f97contextPath --\x3e  \n    <property name="requestContextAttribute" value="rc"/>  \n    <property name="order" value="0"/>  \n</bean>  \n\n<bean id="FreeMarkerConfigurer" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">  \n    <property name="templateLoaderPath" value="/WEB-INF/ftl/"/>  \x3c!-- \u8fd9\u91cc\u76f8\u5f53\u4e8eprefix --\x3e\n    <property name="defaultEncoding" value="UTF-8"/>  \n    <property name="freemarkerSettings" ref="freemarkConfig"/>  \n    <property name="freemarkerVariables">  \n        <map>  \n            <entry key="xml_escape" value-ref="fmXmlEscape"/>  \n        </map>  \n    </property>  \n</bean>\n\n<bean id="freemarkConfig" class="org.springframework.beans.factory.config.PropertiesFactoryBean">  \n        <property name="location" value="classpath:freemark.properties"/> \x3c!-- \u89c1\u4e0b\u9762 --\x3e \n</bean>  \n\n<bean id="fmXmlEscape" class="freemarker.template.utility.XmlEscape"/> \n\x3c!-- \u914d\u7f6eFreeMark\u89c6\u56fe--\u7ed3\u675f --\x3e\n\n\x3c!-- json\u89c6\u56fe --\x3e\n<bean id="mappingJacksonHttpMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">  \n    <property name="supportedMediaTypes">  \n        <list>  \n            <value>application/json;charset=UTF-8</value>  \n        </list>  \n    </property>       \n    <property name="objectMapper">  \n        <bean class="org.codehaus.jackson.map.ObjectMapper">  \n            <property name="dateFormat">  \n                <bean class="java.text.SimpleDateFormat">  \n                    <constructor-arg index="0" type="java.lang.String" value="yyyy-MM-dd HH:mm:ss"/>  \n                </bean>  \n            </property>  \n        </bean>  \n    </property>  \n</bean>  \n<bean id="stringHttpMessageConverter" class="org.springframework.http.converter.StringHttpMessageConverter"/>  \n<bean id="requestMappingHandlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">  \n<property name="messageConverters">  \n    <list>  \n        <ref bean="mappingJacksonHttpMessageConverter"/>  \n        <ref bean="stringHttpMessageConverter"/>  \n    </list>  \n</property>  \n</bean> \n\x3c!-- json\u89c6\u56fe\u914d\u7f6e--- end --\x3e\n\n\x3c!-- \u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e\u6ce8\u610f:\u8fd9\u91cc\u7533\u660e\u7684id\u5fc5\u987b\u4e3amultipartResolver --\x3e  \n<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">  \n    <property name="maxUploadSize" value="500000"/>  \n</bean> \n\n\x3c!-- \u7b80\u5355\u7684\u5f02\u5e38\u5904\u7406 --\x3e  \n<bean id="exceptionResolver" class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">  \n    <property name="exceptionMappings">  \n        <props>  \n            \x3c!-- \u6620\u5c04\u76ee\u5f55\u4e3a/WEB-INF/jsp/error/upload_error.jsp --\x3e  \n            <prop key="org.springframework.web.multipart.MaxUploadSizeExceededException">/error/upload_error</prop>  \n        </props>  \n    </property>  \n</bean>\n')),(0,a.kt)("p",null,"\u6587\u4ef6\u4e2d\u7684freemarker.properties\u6587\u4ef6\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"#FreeMarker settings:  \n   \n#0 is for development only! Use higher value otherwise.  \ntemplate_update_delay=0  \nlocale=zh_CN  \ndefault_encoding=UTF-8  \nnumber_format=0.##########  \ndate_format=yyyy-MM-dd \n")),(0,a.kt)("p",null,"\u5982\u679c\u4e0d\u5e0c\u671b\u5355\u72ec\u62bd\u51fafreemarker.properties\u6587\u4ef6, \u53e6\u4e00\u79cd\u914d\u7f6eFreemarker\u89c6\u56fe\u7684\u65b9\u5f0f:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>  \n<beans xmlns="http://www.springframework.org/schema/beans"   \n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  \n    xmlns:p="http://www.springframework.org/schema/p"   \n    xmlns:context="http://www.springframework.org/schema/context"  \n    xmlns:util="http://www.springframework.org/schema/util"  \n    xmlns:mvc="http://www.springframework.org/schema/mvc"  \n    xsi:schemaLocation="  \n        http://www.springframework.org/schema/util  \n        http://www.springframework.org/schema/util/spring-util-3.1.xsd  \n        http://www.springframework.org/schema/beans   \n        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd  \n        http://www.springframework.org/schema/context   \n        http://www.springframework.org/schema/context/spring-context-3.1.xsd  \n        http://www.springframework.org/schema/mvc  \n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd" >  \n     \x3c!-- \u5f00\u542f\u6ce8\u89e3 --\x3e  \n    <mvc:annotation-driven />  \n    \x3c!-- \u626b\u63cf\u5305 --\x3e  \n    <context:component-scan base-package="com.misl.*" />  \n      \n    \x3c!-- FreeMarker settings --\x3e  \n    <bean id="freeMarkerConfigurer" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">  \n        <property name="templateLoaderPath" value="" />  \n        <property name="freemarkerSettings">  \n            <props>  \n                <prop key="template_update_delay">0</prop>  \n                <prop key="default_encoding">UTF-8</prop>  \n                <prop key="locale">zh_CN</prop>  \n            </props>  \n        </property>  \n    </bean>  \n    \x3c!-- FreeMarker view Reslover --\x3e  \n    <bean id="freeMarkerViewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">  \n        <property name="cache" value="false" />  \n        <property name="prefix" value="/WEB-INF/views/" />  \n        <property name="suffix" value=".ftl" />  \n        <property name="contentType" value="text/html;charset=UTF-8" />  \n    </bean>  \n      \n</beans> \n')),(0,a.kt)("h2",{id:"\u6620\u5c04\u5668-mapping"},"\u6620\u5c04\u5668 Mapping"),(0,a.kt)("p",null,"\u4e3a\u53d1\u9001\u7684\u8bf7\u6c42\u627e\u5230\u5408\u9002\u7684Handler Adapter"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping(\u9ed8\u8ba4)\nAction\u6240\u5bf9\u5e94\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"<bean>"),"\u6807\u7b7e\u7684name\u5c5e\u6027\u4f5c\u4e3a\u8bf7\u6c42\u8def\u5f84"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'    \x3c!-- \u6ce8\u518c\u63a7\u5236\u5668(\u7a0b\u5e8f\u5458) --\x3e\n    <bean name="/add.action" class="com.xiaoyu.springmvc.mapping.UserAction"></bean>\n\n    \x3c!-- \u6ce8\u518c\u6620\u5c04\u5668(handler\u5305)(\u6846\u67b6\u9ed8\u8ba4\u63d0\u4f9b\u4e86, \u8fd9\u91cc\u663e\u5f0f\u914d\u7f6e\u4e86\u9ed8\u8ba4\u7684\u5c31\u5931\u6548\u4e86) --\x3e\n    <bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"></bean>\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping\n\u591a\u4e2a\u8def\u5f84\u5bf9\u5e94\u540c\u4e00\u4e2aAction"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u6ce8\u518c\u63a7\u5236\u5668(\u7a0b\u5e8f\u5458) --\x3e\n<bean id="userActionID" class="com.xiaoyu.springmvc.mapping.UserAction"></bean>\n\x3c!-- \u6ce8\u518c\u6620\u5c04\u5668(handler\u5305)(\u6846\u67b6) --\x3e\n<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">\n        <property name="mappings">\n            <props>\n                <prop key="/delete.action">userActionID</prop>\n                <prop key="/update.action">userActionID</prop>\n                <prop key="/find.action">userActionID</prop>\n            </props>\n        </property>\n</bean>\n')),(0,a.kt)("p",{parentName:"li"},"  or"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans ...>\n\n<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">\n   <property name="mappings">\n    <value>\n       /welcome.htm=welcomeController\n       /*/welcome.htm=welcomeController\n       /helloGuest.htm=helloGuestController\n    </value>\n   </property>\n</bean>\n\n<bean id="welcomeController" \n    class="com.mkyong.common.controller.WelcomeController" />\n    \n<bean id="helloGuestController" \n    class="com.mkyong.common.controller.HelloGuestController" />\n    \n</beans>\n')))),(0,a.kt)("h2",{id:"\u9002\u914d\u5668-adapter"},"\u9002\u914d\u5668 Adapter"),(0,a.kt)("p",null,"\u627e\u5230\u5177\u4f53\u7684action"),(0,a.kt)("p",null,"\u5173\u6ce8\u3010Action\u5b9e\u73b0\u4ec0\u4e48\u63a5\u53e3\u3011"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Action\u5b9e\u73b0Controller\u63a5\u53e3, org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public class EmpAction implements Controller{\n    public ModelAndView handleRequest(HttpServletRequest request,HttpServletResponse response) throws Exception {\n        System.out.println("EmpAction::handleRequest");\n        request.setCharacterEncoding("UTF-8");\n        String username = request.getParameter("username");\n        ModelAndView modelAndView = new ModelAndView();\n        modelAndView.addObject("message",username);\n        modelAndView.setViewName("/jsp/success.jsp");\n        return modelAndView;\n    }\n}\n\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Action\u5b9e\u73b0\u4e86HttpRequestHandler\u63a5\u53e3, HttpRequestHandlerAdapter"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u9002\u914d\u5668(\u6846\u67b6\u9ed8\u8ba4\u63d0\u4f9b, \u8fd9\u91cc\u663e\u5f0f\u914d\u7f6e\u4e86, \u9ed8\u8ba4\u7684\u5c31\u5931\u6548\u4e86) --\x3e  \n<bean class="org.springframework.web.servlet.mvc. HttpRequestHandlerAdapter"></bean>\n\n')))),(0,a.kt)("h2",{id:"\u63a7\u5236\u5668-controller"},"\u63a7\u5236\u5668 Controller"),(0,a.kt)("p",null,"\u3010Action\u7ee7\u627f\u4ec0\u4e48\u7c7b\u3011"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.web.servlet.mvc.ParameterizableViewController"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u5982\u679c\u8bf7\u6c42\u662f/index.action\u7684\u8bf7\u6c42\u8def\u5f84\uff0c\u5219\u76f4\u63a5\u8df3\u8f6c\u5230/jsp/success.jsp\u9875\u9762\uff0c\u4e0d\u7ecf\u8fc7\u7a0b\u5e8f\u5458\u5b9a\u4e49\u7684\u63a7\u5236\u5668\uff0c\u65e0\u9700\u5199controller\u4ee3\u7801\uff0c\u5373\u7f3a\u7701\u63a7\u5236\u5668 --\x3e\n\x3c!-- /index.action\u8bf7\u6c42\uff0c\u76f4\u63a5\u8f6c\u53d1\u5230/index.jsp\u9875\u9762 --\x3e\n<bean name="/index.action" class="org.springframework.web.servlet.mvc.ParameterizableViewController">\n        <property name="viewName" value="/index.jsp"/>\n</bean>\n\n')),(0,a.kt)("p",{parentName:"li"},"  \u53e6\u5916, \u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u7684\u64cd\u4f5c:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u5982\u679c\u5f53\u524d\u8def\u5f84\u662f/ \u5219\u4ea4\u7ed9\u76f8\u5e94\u7684\u89c6\u56fe\u89e3\u6790\u5668\u76f4\u63a5\u89e3\u6790\u4e3a\u89c6\u56fe --\x3e\n<mvc:view-controller path="/" view-name="home"/>\n\n\x3c!-- \u5373\u5982\u679c\u5f53\u524d\u8def\u5f84\u662f/ \u5219\u91cd\u5b9a\u5411\u5230/admin/index --\x3e\n<mvc:view-controller path="/" view-name="redirect:/admin/index"/> \n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.web.servlet.mvc.AbstractCommandController"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u80fd\u591f\u4ee5\u5b9e\u4f53\u7684\u5f62\u5f0f\uff0c\u6536\u96c6\u5ba2\u6237\u7aef\u53c2\u6570\npublic class AdminAction extends AbstractCommandController{\n    public AdminAction(){\n            this.setCommandClass(Admin.class);\n    }\n    @Override\n    protected ModelAndView handle(HttpServletRequest request,HttpServletResponse response, Object obj, BindException bindException)throws Exception {\n        System.out.println("AdminAction::handle");\n        ModelAndView modelAndView = new ModelAndView();\n        Admin admin = null;\n        if(obj instanceof Admin){\n                admin = (Admin) obj;\n        }\n        modelAndView.addObject("username",admin.getUsername());\n        modelAndView.addObject("gender",admin.getGender());\n        modelAndView.addObject("hiredate",admin.getHiredate());\n        modelAndView.setViewName("/jsp/success.jsp");\n        return modelAndView;\n    }\n}\n\n')),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u8bf7\u6c42\u5904\u7406\u7c7b --\x3e\n<bean name="/add.action" class="com.xiaoyu.springmvc.controller.AdminAction">\n</bean>\n\n')))),(0,a.kt)("h2",{id:"\u6ce8\u89e3\u5f00\u53d1"},"\u6ce8\u89e3\u5f00\u53d1"),(0,a.kt)("h3",{id:"spring31\u524d\u540e\u533a\u522b"},"Spring3.1\u524d\u540e\u533a\u522b"),(0,a.kt)("p",null,"1\u3001\u6ce8\u89e3\u65b9\u5f0f\u7684\u6620\u5c04\u5668\u548c\u9002\u914d\u5668\u57283.1\u7248\u672c\u524d\u540e\u662f\u4e0d\u4e00\u6837\u7684\n2\u3001\u6ce8\u89e3\u65b9\u5f0f\u7684\u6620\u5c04\u5668\u548c\u9002\u914d\u5668\u5fc5\u987b\u914d\u5bf9\u4f7f\u7528\uff0c\u4e0d\u80fd\u4e0e\u975e\u6ce8\u89e3\u7684\u6620\u5c04\u5668\u548c\u9002\u914d\u5668\u6df7\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"spring3.1\u4e4b\u524d:\norg.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping \u662f\u5728spring3.1\u4e4b\u524d\u4f7f\u7528\u7684\u6ce8\u89e3\u6620\u5c04\u5668\u3002\norg.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter \u662f\u5728spring3.1\u4e4b\u524d\u4f7f\u7528\u7684\u6ce8\u89e3\u9002\u914d\u5668\u3002\nspring3.1\u4e4b\u540e:\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping\u662f\u5728spring3.1\u4e4b\u540e\u4f7f\u7528\u7684\u6ce8\u89e3\u6620\u5c04\u5668\u3002\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter\u662f\u5728spring3.1\u4e4b\u540e\u4f7f\u7528\u7684\u6ce8\u89e3\u9002\u914d\u5668\u3002\n\n")),(0,a.kt)("h3",{id:"\u914d\u7f6e"},"\u914d\u7f6e"),(0,a.kt)("p",null,"\u65b9\u6cd51: \u901a\u8fc7bean\u6807\u7b7e\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"></bean>\n<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"></bean>\n')),(0,a.kt)("p",null,"\u65b9\u6cd52: \u901a\u8fc7mvc\u6807\u7b7e\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"<mvc:annotation-driven/>\n")),(0,a.kt)("h1",{id:"controller\u8be6\u89e3"},"Controller\u8be6\u89e3"),(0,a.kt)("h2",{id:"\u5355\u4e2a-controller-\u4e2d\u5199\u591a\u4e2a\u4e1a\u52a1\u65b9\u6cd5"},"\u5355\u4e2a controller \u4e2d\u5199\u591a\u4e2a\u4e1a\u52a1\u65b9\u6cd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u6a21\u5757\u6839\u8def\u5f84 + \u529f\u80fd\u5b50\u8def\u5f84 = \u8bbf\u95ee\u6a21\u5757\u4e0b\u5b50\u529f\u80fd\u7684\u8def\u5f84\n@Controller\n@RequestMapping(value="/user")\npublic class UserAction{\n    @RequestMapping(value="/add")\n    public String add(Model model) throws Exception{\n            System.out.println("HelloAction::add()");\n            model.addAttribute("message","\u589e\u52a0\u7528\u6237");\n            return "/success.jsp";\n    }\n    @RequestMapping(value="/find")\n    public String find(Model model) throws Exception{\n            System.out.println("HelloAction::find()");\n            model.addAttribute("message","\u67e5\u8be2\u7528\u6237");\n            return "/success.jsp";\n    }    \n}\n')),(0,a.kt)("p",null,"@RequestMapping \u7528\u6cd5:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"value/path \u914d\u7f6e\u8def\u5f84"),(0,a.kt)("li",{parentName:"ul"},"method    \u914d\u7f6e\u652f\u6301\u7684 http method"),(0,a.kt)("li",{parentName:"ul"},"params  \u914d\u7f6e\u652f\u6301\u7684\u8bf7\u6c42\u53c2\u6570\u548c\u5bf9\u5e94\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},'params={"username=kolbe","password=123456"}')),(0,a.kt)("li",{parentName:"ul"},"headers  \u652f\u6301\u7684 headers ",(0,a.kt)("inlineCode",{parentName:"li"},'headers="Host=localhost:8080"'))),(0,a.kt)("p",null,"\u6ce8\u610f: "),(0,a.kt)("p",null,'@RequestMapping("/login/") \u548c @RequestMapping("/login") \u8def\u5f84\u672b\u5c3e\u662f\u5426\u6709\u659c\u6760 ',(0,a.kt)("inlineCode",{parentName:"p"},"\u662f\u4e0d\u540c\u7684\u8def\u5f84")),(0,a.kt)("h2",{id:"\u6570\u636e\u4f20\u9012\u65b9\u5f0f"},"\u6570\u636e\u4f20\u9012\u65b9\u5f0f"),(0,a.kt)("p",null,"\u603b\u7ed3: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"get \u8bf7\u6c42 \u4f7f\u7528 @requestParam \u6ce8\u89e3\u65b9\u6cd5\u53c2\u6570, \u53ef\u7701\u7565, \u53ef\u4ee5\u6709\u591a\u4e2a"),(0,a.kt)("li",{parentName:"ul"},"post \u8bf7\u6c42\u4f7f\u7528 @RequestBody \u6ce8\u89e3\u53c2\u6570, \u4e0d\u53ef\u7701\u7565, \u6700\u591a\u53ea\u80fd\u4e00\u4e2a")),(0,a.kt)("h3",{id:"\u6536\u96c6\u9875\u9762\u7684\u53c2\u6570"},"\u6536\u96c6\u9875\u9762\u7684\u53c2\u6570"),(0,a.kt)("p",null,"\u7b2c1\u79cd: \u4f7f\u7528HttpServletRequest\u83b7\u53d6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@RequestMapping("/login.do")  \n    public String login(HttpServletRequest request){  \n        String name = request.getParameter("name")  ;\n        String pass = request.getParameter("pass")  ;\n    }\n\n')),(0,a.kt)("p",null,"\u7b2c2\u79cd: \u666e\u901a\u53d8\u91cf\u4f5c\u4e3a\u65b9\u6cd5\u53c2\u6570\u6536\u96c6\u6570\u636e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// Spring\u4f1a\u81ea\u52a8\u5c06\u8868\u5355\u53c2\u6570\u6ce8\u5165\u5230\u65b9\u6cd5\u53c2\u6570\uff0c\u548c\u8868\u5355\u6807\u7b7e\u7684name\u5c5e\u6027\u4fdd\u6301\u4e00\u81f4\u3002\n@Controller\n@RequestMapping(value="/user")\npublic class UserAction{\n    @RequestMapping(value="/add")\n    public String add(Model model,int id,String name,Double sal) throws Exception{\n        System.out.println("HelloAction::add()");\n        System.out.println(id + ":" + name + ":" + sal);\n        model.addAttribute("message","\u589e\u52a0\u7528\u6237");\n        return "/success.jsp";\n    }    \n}\n    // http://127.0.0.1:8080/myspringmvc/user/add.action?id=1&name=zhaojun&sal=5000\n\n\n@RequestMapping("/login.do")  \n// \u8868\u5355\u5c5e\u6027\u662fpass,\u7528\u53d8\u91cfpassword\u63a5\u6536  ----------\u8868\u5355\u5c5e\u6027\u548c\u5f62\u53c2\u53c2\u6570\u540d\u4e0d\u540c\npublic String login(HttpServletRequest request, String name, @RequestParam("pass")String password) {\n    \n    syso(name);  \n    syso(password)  \n}  \n\n')),(0,a.kt)("p",null,"\u7b2c3\u79cd: \u5c01\u88c5\u666e\u901a\u53d8\u91cf\u4e3a\u4e00\u4e2aObject\u6765\u6536\u96c6"),(0,a.kt)("p",null,"\u8868\u5355:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<form action="login.do">  \n    \u7528\u6237\u540d\uff1a<input name="name"/>  \n    \u5bc6\u7801\uff1a<input name="pass"/>  \n    <input type="submit" value="\u767b\u9646">  \n    </form> \n\n')),(0,a.kt)("p",null,"\u5c06\u8868\u5355\u53c2\u6570\u5c01\u88c5\u4e3a\u4e00\u4e2a\u5bf9\u8c61User"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public class User{  \n      private String name;  \n       private String pass;  \n     } \n\n")),(0,a.kt)("p",null,"Controller\u65b9\u6cd5:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@RequestMapping("/login.do")  \n    public String login(User user)  \n    {  \n       syso(user.getName());  \n       syso(user.getPass());  \n    }  \n\n')),(0,a.kt)("p",null,"\u7b2c4\u79cd: Object\u5305Object(\u5c01\u88c5\u4e24\u6b21)\u6765\u6536\u96c6\u53c2\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'/**\n1\uff09 \u5982\u679c\u591a\u4e2a\u6a21\u578b\u4e2d\u6709\u76f8\u540c\u7684\u5c5e\u6027\u65f6\uff0c\u53ef\u4ee5\u5728jsp\u4e2d\u7528user.name\u6216admin.name\u6765\u6536\u96c6\u5ba2\u6237\u7aef\u53c2\u6570\uff08\u4f5c\u4e3a\u6807\u7b7ename\u503c\uff09\n2\uff09 \u7528\u4e00\u4e2a\u65b0\u7684\u6a21\u578b\uff08Bean\uff09\u5c06User\u548cAdmin\u518d\u5c01\u88c5\u4e00\u6b21\uff0cJSP\u4f20\u8fc7\u6765\u7684\u503c\u4f1a\u81ea\u52a8\u5c01\u88c5\u5230Bean\u4e2d\n*/\n// User.java\npublic class User {\n        private Integer id;\n        private String name;\n        private Double sal;\n        private Date hiredate;\n        \n        // getter&setter\n}\n\n// Admin.java\n\n// Bean.java\npublic class Bean {\n        private User user;\n        private Admin admin;\n        // getter&setter\n}\n\n// PersonAction.java\n@Controller\n@RequestMapping(value = "/person")\npublic class PersonAction {\n    @InitBinder\n    protected void initBinder(HttpServletRequest request,ServletRequestDataBinder binder) throws Exception {\n        binder.registerCustomEditor(\n            Date.class, \n            new CustomDateEditor(new SimpleDateFormat("yyyy-MM-dd"),true));\n    }\n    @RequestMapping(value = "/add", method = RequestMethod.POST)\n    public String add(Bean bean,Model model) throws Exception {\n            System.out.println(bean.getUser());\n            System.out.println(bean.getAdmin());\n            System.out.println("PersonAction::add()::POST");\n            model.addAttribute("bean",bean);\n            return "/register.jsp";\n    }\n}\n\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'    \x3c!-- \u666e\u901a\u7528\u6237 --\x3e\n<form action="${pageContext.request.contextPath}/person/add.action" method="POST">\n        \x3c!-- name\u5143\u7d20\u7684\u503c\u4e0d\u52a0bean, \u4f1a\u81ea\u52a8\u5c01\u88c5\u5230Bean\u5bf9\u8c61 --\x3e\n        \u7f16\u53f7\uff1a<input type="text" name="user.id" value="${bean.user.id}"/><br/>\n        \u59d3\u540d\uff1a<input type="text" name="user.name" value="${bean.user.name}"/><br/>\n        \u85aa\u6c34\uff1a<input type="text" name="user.sal" value="${bean.user.sal}"/><br/>\n        \u5165\u804c\u65f6\u95f4\uff1a<input type="text" name="user.hiredate" value=\'<fmt:formatDate value="${bean.user.hiredate}" type="both" />\'/><br/>\n        <input type="submit" value="\u6ce8\u518c"/>\n</form>\n')),(0,a.kt)("h3",{id:"\u6536\u96c6\u6570\u7ec4\u53c2\u6570"},"\u6536\u96c6\u6570\u7ec4\u53c2\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u6279\u91cf\u5220\u9664\u7528\u6237\n@Controller\n@RequestMapping(value="/user")\npublic class UserAction {\n    @RequestMapping(value="/delete")\n    public String deleteMethod(int[] ids,Model model) throws Exception{\n            System.out.println("UserAction::deleteMethod()");\n            System.out.println("\u9700\u8981\u5220\u9664\u7684id\u4e3a\uff1a");\n            for(int id : ids){\n                    System.out.print(id+" ");\n            }\n            model.addAttribute("message","\u6279\u91cf\u5220\u9664\u6210\u529f");\n            return "/success.jsp";\n    }\n}\n\n\n')),(0,a.kt)("h3",{id:"\u624b\u673alist\u53c2\u6570"},"\u624b\u673aList\u53c2\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u6279\u91cf\u6ce8\u518c\u7528\u6237\n// UserAction.java\n@Controller\n@RequestMapping(value="/user")\npublic class UserAction {\n    @RequestMapping(value="/addAll")\n    public String addAll(Bean bean,Model model) throws Exception{\n        for(User user : bean.getUserList()){\n            System.out.println(user.getName()+":"+user.getGender());\n        }\n        model.addAttribute("message","\u6279\u91cf\u589e\u52a0\u7528\u6237\u6210\u529f");\n        return "/success.jsp";\n    }\n}\n\n    // Bean.java\npublic class Bean {\n    \n    private List<User> userList = new ArrayList<User>();\n    public Bean(){}\n    public List<User> getUserList() {\n            return userList;\n    }\n    public void setUserList(List<User> userList) {\n            this.userList = userList;\n    }\n}\n')),(0,a.kt)("p",null,"jsp"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsp"},'\x3c!-- registerAll.java --\x3e\n<form action="${pageContext.request.contextPath}/user/addAll.action" method="POST"> \n            \n        \u59d3\u540d\uff1a<input type="text" name="userList[0].name" value="hh"/>\n        \u6027\u522b\uff1a<input type="text" name="userList[0].gender" value="\u7537"/>\n        <hr/>\n        \u59d3\u540d\uff1a<input type="text" name="userList[1].name" value="zz"/>\n        \u6027\u522b\uff1a<input type="text" name="userList[1].gender" value="\u7537"/>\n        <hr/>\n\n        \u59d3\u540d\uff1a<input type="text" name="userList[2].name" value="yy"/>\n        \u6027\u522b\uff1a<input type="text" name="userList[2].gender" value="\u5973"/>\n        <hr/>\n        <input type="submit" value="\u6279\u91cf\u6ce8\u518c"/>\n</form>\n \n')),(0,a.kt)("h3",{id:"\u4f20\u9012\u53c2\u6570\u7ed9\u9875\u9762"},"\u4f20\u9012\u53c2\u6570\u7ed9\u9875\u9762"),(0,a.kt)("p",null,"\u7ecf\u8fc7Controller\u7ec4\u4ef6\u5904\u7406\u540e\uff0c\u5411jsp\u9875\u9762\u4f20\u503c\uff0c\u6709\u5982\u4e0b\u51e0\u79cd\uff1a\n1\uff0c\u4f7f\u7528HttpServletRequest \u548c Session  \u7136\u540esetAttribute()\uff0c\u5c31\u548cServlet\u4e2d\u4e00\u6837\n2\uff0c\u4f7f\u7528ModelMap, Model, Map\u5bf9\u8c61\n3\uff0c\u4f7f\u7528ModelAndView\u5bf9\u8c61\n4\uff0c\u4f7f\u7528@ModelAttribute\u6ce8\u89e3"),(0,a.kt)("p",null,"\u7b2c1\u79cd: \u4f7f\u7528HttpServletRequest \u6216 session"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@RequestMapping("/login.do")  \npublic String login(String name,String pwd  \n                            ModelMap model,HttpServletRequest request){  \n        User user = serService.login(name,pwd);  \n        HttpSession session = request.getSession();  \n        session.setAttribute("user",user);  \n        model.addAttribute("user",user);  \n        return "success";  \n} \n\n')),(0,a.kt)("p",null,"\u7b2c2\u79cd: \u4f7f\u7528ModelMap\uff0cModel\uff0cMap\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u636e\u4f1a\u5229\u7528HttpServletRequest\u7684Attribute\u4f20\u503c\u5230success.jsp\u4e2d\n@RequestMapping("/test")\npublic String test(Map<String,Object> map,Model model,ModelMap modelMap){\n\n    map.put("names", Arrays.asList("caoyc","zhh","cjx"));\n    \n    model.addAttribute("time", new Date());\n    \n    modelMap.addAttribute("city", "ChengDu");\n    modelMap.put("gender", "male");\n\n    return "hello";\n}\n\n')),(0,a.kt)("p",null,"\u5728jsp\u4e2d\u5982\u4f55\u83b7\u53d6?"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsp"},"time:${requestScope.time}\nnames:${requestScope.names }\ncity:${requestScope.city }\ngender:${requestScope.gender }\n\n")),(0,a.kt)("p",null,"\u7b2c3\u79cd: \u4f7f\u7528ModelAndView\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@RequestMapping("/login.do")  \npublic ModelAndView  login(String name,String pass){  \n    User user = userService.login(name,pwd);  \n    Map<String,Object> data = new HashMap<String,Object>();  \n    data.put("user",user);  \n    return new ModelAndView("success",data);  \n} \n\n')),(0,a.kt)("p",null,"\u7b2c4\u79cd: \u4f7f\u7528@ModelAttribute\u6ce8\u89e3"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u5728Controller\u65b9\u6cd5\u7684\u53c2\u6570\u90e8\u5206\u6216Bean\u5c5e\u6027\u65b9\u6cd5\u4e0a\u4f7f\u7528\n// @ModelAttribute\u6570\u636e\u4f1a\u5229\u7528HttpServletRequest\u7684Attribute\u4f20\u503c\u5230success.jsp\u4e2d\n@RequestMapping("/login.do")  \npublic String login(@ModelAttribute("user") User user){  \n    //TODO  \n    return "success";  \n}  \n    \n@ModelAttribute("name")  \npublic String getName(){  \n    return name;  \n}  \n\n\n')),(0,a.kt)("h1",{id:"\u62e6\u622a\u5668interceptor"},"\u62e6\u622a\u5668interceptor"),(0,a.kt)("h2",{id:"\u4ec0\u4e48\u662finterceptor"},"\u4ec0\u4e48\u662finterceptor"),(0,a.kt)("p",null,"\u5bf9\u8bf7\u6c42\u8fdb\u884c\u62e6\u622a, \u6bcf\u4e2a\u8bf7\u6c42\u90fd\u9700\u8981\u7684\u524d\u7f6e/\u540e\u7f6e\u5904\u7406"),(0,a.kt)("p",null,"spring mvc\u4e2d\u7684Interceptor\u62e6\u622a\u8bf7\u6c42\u662f\u901a\u8fc7HandlerInterceptor\u6765\u5b9e\u73b0\u7684\u3002\u6240\u4ee5HandlerInteceptor\u62e6\u622a\u5668\u53ea\u6709\u5728Spring Web MVC\u73af\u5883\u4e0b\u624d\u80fd\u4f7f\u7528"),(0,a.kt)("h2",{id:"interceptor\u548cfilter\u5bf9\u6bd4"},"interceptor\u548cfilter\u5bf9\u6bd4"),(0,a.kt)("p",null,"references: ",(0,a.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/685c65ed6944"},"https://www.jianshu.com/p/685c65ed6944"),", ",(0,a.kt)("a",{parentName:"p",href:"https://juejin.im/post/5b2ddbcef265da59a76c92a4#heading-6"},"https://juejin.im/post/5b2ddbcef265da59a76c92a4#heading-6")),(0,a.kt)("p",null,"servlet filter\u548cspring mvc Interceptor\u533a\u522b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Filter \u662f\u57fa\u4e8e \u51fd\u6570\u56de\u8c03\u7684\uff0c\u800c Interceptor \u5219\u662f\u57fa\u4e8e Java \u53cd\u5c04 \u548c \u52a8\u6001\u4ee3\u7406\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Filter \u4f9d\u8d56\u4e8e Servlet \u5bb9\u5668, \u548cservlet\u5bb9\u5668\u9694\u7684\u8fd1\uff0c\u800c Interceptor \u4f9d\u8d56springmvc, \u548c\u5e94\u7528\u9694\u7684\u8fd1, \u5728\u6700\u91cc\u5c42\u3002\u6240\u4ee5filter \u5148\u8fdb\u5165, \u6700\u540e\u9000\u51fa")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Filter \u5bf9\u51e0\u4e4e \u6240\u6709\u7684\u8bf7\u6c42 \u8d77\u4f5c\u7528\uff0c\u800c Interceptor \u53ea\u5bf9 Controller \u8bf7\u6c42\u8d77\u4f5c\u7528\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u62e6\u622a\u5668\u53ef\u4ee5\u83b7\u53d6IOC\u5bb9\u5668\u4e2d\u7684\u5404\u4e2abean\uff0c\u800c\u8fc7\u6ee4\u5668\u5c31\u4e0d\u884c\uff0c\u8fd9\u70b9\u5f88\u91cd\u8981\uff0c\u5728\u62e6\u622a\u5668\u91cc\u6ce8\u5165\u4e00\u4e2aservice\uff0c\u53ef\u4ee5\u8c03\u7528\u4e1a\u52a1\u903b\u8f91\u3002"))),(0,a.kt)("p",null,"servlet filter\u548cspring mvc Interceptor\u6267\u884c\u987a\u5e8f\uff1a"),(0,a.kt)("h2",{id:"\u600e\u4e48\u4f7f\u7528interceptor"},"\u600e\u4e48\u4f7f\u7528interceptor"),(0,a.kt)("h3",{id:"\u901a\u8fc7\u81ea\u5b9a\u4e49web\u914d\u7f6e"},"\u901a\u8fc7\u81ea\u5b9a\u4e49web\u914d\u7f6e"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u8981\u5b9e\u73b0Spring\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"HandlerInterceptor"),"\u63a5\u53e3 or ",(0,a.kt)("inlineCode",{parentName:"p"},"HandlerInterceptorAdapter")," (\u63a8\u8350) \u9002\u914d\u5668"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u4e09\u4e2a\u65b9\u6cd5: "),(0,a.kt)("p",{parentName:"li"},"  preHandle(eg:\u767b\u9646\u68c0\u67e5), "),(0,a.kt)("p",{parentName:"li"},"  postHandle(eg:\u64cd\u7eb5modelAndView), "),(0,a.kt)("p",{parentName:"li"},"  afterCompletion(eg:\u8d44\u6e90\u6e05\u7406\u5de5\u4f5c, \u6027\u80fd\u76d1\u63a7\u8bb0\u5f55\u7ed3\u675f\u65f6\u95f4); ")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u987a\u5e8f: preHandle -> handle -> postHandle -> \u89c6\u56fe\u6e32\u67d3 -> afterCompletion")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u5b9e\u73b0WebRequestInterceptor\u63a5\u53e3 or \u5bf9\u5e94\u7684\u9002\u914d\u5668"))),(0,a.kt)("p",null,"\u4f7f\u7528\u4ee3\u7801\u914d\u7f6e:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@configuration\nclass WebMvcConfig extends WebMvcConfigurerAdapter{\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        //\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u62e6\u622a\u5668\n        Interceptor interceptor = new Interceptor();\n        //\u6dfb\u52a0\u62e6\u622a\u5668\n        registry.addInterceptor(interceptor)\n                //\u6dfb\u52a0\u9700\u8981\u62e6\u622a\u7684\u8def\u5f84\n                .addPathPatterns("");\n    }\n}\n')),(0,a.kt)("p",null,"\u4e5f\u53ef\u4ee5\u4f7f\u7528  xml \u914d\u7f6e:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<mvc:interceptors>  \n    \x3c!-- \u4f7f\u7528bean\u5b9a\u4e49\u4e00\u4e2aInterceptor\uff0c\u76f4\u63a5\u5b9a\u4e49\u5728mvc:interceptors\u6839\u4e0b\u9762\u7684Interceptor\u5c06\u62e6\u622a\u6240\u6709\u7684\u8bf7\u6c42--\x3e  \n    <bean class="com.host.app.web.interceptor.HandlerInterceptorAll"/>\n\n    <mvc:interceptor>  \n        \x3c!-- \u5b9a\u4e49\u5728mvc:interceptor\u4e0b\u9762\u7684\u8868\u793a\u662f\u5bf9\u7279\u5b9a\u7684\u8bf7\u6c42\u624d\u8fdb\u884c\u62e6\u622a\u7684\uff0c \u652f\u6301\u901a\u914d\u7b26\uff0c \u5982 \u201c/emp/*\u201d --\x3e  \n        <mvc:mapping path="/test/number.do"/> \n        \x3c!-- \u6392\u9664url --\x3e\n        <mvc:exclude-mapping path="/test/goLogin.*"/>\n        <bean class="com.host.app.web.interceptor.HandlerInterceptor1"/>  \n        \x3c!-- <ref bean="handlerInterceptor1"/> --\x3e\n    </mvc:interceptor>  \n\n    <mvc:interceptor>\n        <mvc:mapping path="/**"/>\n        <bean class="common.interceptor.LoginInterceptor">\n        \x3c!-- \u6392\u9664\u591a\u4e2a url --\x3e\n            <property name="exceptUrls">\n                <list>\n                    <value>/user/login</value>\n                    <value>/user/register</value>\n                </list>\n            </property>\n        </bean>\n    </mvc:interceptor>\n\n    <mvc:interceptor>\n        \x3c!--\u8fd9\u6837\u914d\u7f6e\uff0c\u5c06\u62e6\u622a\u6240\u6709springmvc\u7684url--\x3e\n        <mvc:mapping path="/**"/>\n        <bean class="interceptor.MyInterceptor1"></bean>\n    </mvc:interceptor>\n</mvc:interceptors>  \n\n')),(0,a.kt)("h3",{id:"\u901a\u8fc7\u6ce8\u89e3"},"\u901a\u8fc7\u6ce8\u89e3"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface LoginRequired {\n}\n\n\npublic class AuthenticationInterceptor implements HandlerInterceptor {\n    @Autowired\n    private UserService userService;\n\n    public boolean preHandle(HttpServletRequest request,\n                             HttpServletResponse response, Object handler) throws Exception {\n        // \u5982\u679c\u4e0d\u662f\u6620\u5c04\u5230\u65b9\u6cd5\u76f4\u63a5\u901a\u8fc7\n        if (!(handler instanceof HandlerMethod)) {\n            return true;\n        }\n        HandlerMethod handlerMethod = (HandlerMethod) handler;\n        Method method = handlerMethod.getMethod();\n\n        // \u5224\u65ad\u63a5\u53e3\u662f\u5426\u9700\u8981\u767b\u5f55\n        LoginRequired methodAnnotation = method.getAnnotation(LoginRequired.class);\n        // \u6709 @LoginRequired \u6ce8\u89e3\uff0c\u9700\u8981\u8ba4\u8bc1\n        if (methodAnnotation != null) {\n            // \u6267\u884c\u8ba4\u8bc1\n            String token = request.getHeader("token");  // \u4ece http \u8bf7\u6c42\u5934\u4e2d\u53d6\u51fa token\n            if (token == null) {\n                throw new RuntimeException("\u65e0token\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55");\n            }\n            int userId;\n            try {\n                userId = Integer.parseInt(JWT.decode(token).getAudience().get(0));  // \u83b7\u53d6 token \u4e2d\u7684 user id\n            } catch (JWTDecodeException e) {\n                throw new RuntimeException("token\u65e0\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55");\n            }\n            User user = userService.findById(userId);\n            if (user == null) {\n                throw new RuntimeException("\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55");\n            }\n            // \u9a8c\u8bc1 token\n            try {\n                JWTVerifier verifier =  JWT.require(Algorithm.HMAC256(user.getPassword())).build();\n                try {\n                    verifier.verify(token);\n                } catch (JWTVerificationException e) {\n                    throw new RuntimeException("token\u65e0\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55");\n                }\n            } catch (UnsupportedEncodingException ignore) {}\n            request.setAttribute("currentUser", user);\n            return true;\n        }\n        return true;\n    }\n\n\n@Configuration\npublic class WebMvcConfigurer extends WebMvcConfigurerAdapter {\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(authenticationInterceptor())\n                .addPathPatterns("/**");    // \u62e6\u622a\u6240\u6709\u8bf7\u6c42\uff0c\u901a\u8fc7\u5224\u65ad\u662f\u5426\u6709 @LoginRequired \u6ce8\u89e3 \u51b3\u5b9a\u662f\u5426\u9700\u8981\u767b\u5f55\n        super.addInterceptors(registry);\n    }\n\n    @Bean\n    public AuthenticationInterceptor authenticationInterceptor() {\n        return new AuthenticationInterceptor();\n    }\n}\n')),(0,a.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u6ce8\u89e3\u62e6\u622a\u5668"},"\u81ea\u5b9a\u4e49\u6ce8\u89e3\u62e6\u622a\u5668"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://blog.csdn.net/xwq911/article/details/51384387"},"https://blog.csdn.net/xwq911/article/details/51384387")),(0,a.kt)("h2",{id:"handlermethod\u548cmethodhandle"},"HandlerMethod\u548cMethodHandle"),(0,a.kt)("p",null,"HandlerMethod - springmvc \u62e6\u622a\u5668\u63a5\u53e3\u7684 preHandle\uff08\u3002\u3002\u3002\uff09 \u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c \u8868\u793a springmvc \u6267\u884c\u7684\u65b9\u6cd5\nMethodHandle - java7\u65b0\u7279\u6027\u4e4b\u65b9\u6cd5\u53e5\u67c4\uff1b ref\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://blog.csdn.net/zmx729618/article/details/78968810"},"https://blog.csdn.net/zmx729618/article/details/78968810")),(0,a.kt)("h2",{id:"\u901a\u8fc7java\u52a8\u6001\u4ee3\u7406\u5b9e\u73b0\u62e6\u622a\u5668\u529f\u80fd"},"\u901a\u8fc7Java\u52a8\u6001\u4ee3\u7406\u5b9e\u73b0\u62e6\u622a\u5668\u529f\u80fd"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://blog.csdn.net/qq_35246620/article/details/68484407"},"https://blog.csdn.net/qq_35246620/article/details/68484407")),(0,a.kt)("h1",{id:"\u9650\u5b9a\u8bf7\u6c42\u65b9\u5f0fgetpost"},"\u9650\u5b9a\u8bf7\u6c42\u65b9\u5f0fGET/POST"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u53ef\u4ee5\u5728\u4e1a\u52a1\u63a7\u5236\u65b9\u6cd5\u524d\uff0c\u6307\u660e\u8be5\u4e1a\u52a1\u63a7\u5236\u65b9\u6cd5\u53ea\u80fd\u63a5\u6536GET\u6216POST\u7684\u8bf7\u6c42\n// \u5982\u679c\u4e0d\u4e66\u5199method=RequestMethod.POST\u7684\u8bdd\uff0cGET\u548cPOST\u8bf7\u6c42\u90fd\u652f\u6301\n@Controller\n@RequestMapping(value="/user")\npublic class UserAction{\n    @RequestMapping(value="/add",method=RequestMethod.POST)\n    public String add(Model model,int id,String name,double sal) throws Exception{\n            System.out.println("HelloAction::add()::POST");\n            System.out.println(id + ":" + name + ":" + sal);\n            model.addAttribute("message","\u589e\u52a0\u7528\u6237");\n            return "/success.jsp";\n    }    \n}\n')),(0,a.kt)("h1",{id:"\u65e5\u671f\u8f6c\u6362\u5668-\u7f16\u7801\u8f6c\u6362\u5668"},"\u65e5\u671f\u8f6c\u6362\u5668 \u7f16\u7801\u8f6c\u6362\u5668"),(0,a.kt)("p",null,"\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cspringmvc\u4e0d\u80fd\u5c06String\u7c7b\u578b\u8f6c\u6210Date\u7c7b\u578b\uff0c\u5fc5\u987b\u81ea\u5b9a\u4e49\u7c7b\u578b\u8f6c\u6362\u5668: Controller\u4e2d\u8986\u76d6initBinder\u65b9\u6cd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Controller\n@RequestMapping("/xxx")\npublic class AdminAction {\n    @Override\n    protected void initBinder(HttpServletRequest request,ServletRequestDataBinder binder) throws Exception {\n            binder.registerCustomEditor(Date.class,new CustomDateEditor(new SimpleDateFormat("yyyy-MM-dd"),true));\n    } \n    \n}\n\n')),(0,a.kt)("p",null,"spring\u63d0\u4f9b\u7684\uff0c\u4e13\u7528\u4e8e\u89e3\u51b3POST\u63d0\u4ea4\u4e2d\u6587\u4e71\u7801\u95ee\u9898\uff0c\u9700\u8981\u5728web.xml\u6587\u4ef6\u4e2d\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- \u7f16\u7801\u8fc7\u6ee4\u5668 --\x3e\n    <filter>\n            <filter-name>CharacterEncodingFilter</filter-name>\n            <filter-class>\n    org.springframework.web.filter.CharacterEncodingFilter\n            </filter-class>\n            <init-param>\n                    <param-name>encoding</param-name>\n                    <param-value>UTF-8</param-value>\n            </init-param>\n    </filter>\n    <filter-mapping>\n            <filter-name>CharacterEncodingFilter</filter-name>\n            <url-pattern>/*</url-pattern>\n    </filter-mapping>\n")),(0,a.kt)("h1",{id:"initbind\u89e3\u51b3\u5b57\u7b26\u4e32\u8f6c\u65e5\u671f\u7c7b\u578b"},"@InitBind\u89e3\u51b3\u5b57\u7b26\u4e32\u8f6c\u65e5\u671f\u7c7b\u578b"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/5211323/what-is-the-purpose-of-init-binder-in-spring-mvc"},"@InitBind\u6ce8\u89e3"),": \u53c2\u8003\u8fd9\u91cc",(0,a.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/5211323/what-is-the-purpose-of-init-binder-in-spring-mvc"},"https://stackoverflow.com/questions/5211323/what-is-the-purpose-of-init-binder-in-spring-mvc")),(0,a.kt)("p",null,"\u4e4b\u524d\u6211\u4eec\u9700\u8981\u89e3\u6790\u524d\u53f0\u4f20\u6765\u7684\u65e5\u671fString, "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public void webmethod(@RequestParam("date") String strDate) {\n    Date date = ... // manually parse the date\n }\n')),(0,a.kt)("p",null,"\u73b0\u5728\u6ca1\u5fc5\u8981\u4e86, spring\u4f1a\u5c1d\u8bd5\u68c0\u67e5\u524d\u53f0\u4f20\u6765\u7684string\u51ed\u501f\u6ce8\u518c\u7684editors\u80fd\u5426\u8f6c\u4e3aobject, \u4ee5\u4fbf\u6211\u4eec\u76f4\u63a5\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// 1\uff09\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cspringmvc\u4e0d\u80fd\u5c06String\u7c7b\u578b\u8f6c\u6210java.util.Date\u7c7b\u578b\uff0c\u6240\u6709\u6211\u4eec\u53ea\u80fd\u5728Action\u4e2d\u81ea\u5b9a\u4e49\u7c7b\u578b\u8f6c\u6362\u5668\n@Controller\n@RequestMapping(value = "/user")\npublic class UserAction {\n    @InitBinder\n    protected void initBinder(HttpServletRequest request,ServletRequestDataBinder binder) throws Exception {\n        binder.registerCustomEditor(\n                    Date.class, \n                    new CustomDateEditor(new SimpleDateFormat("yyyy-MM-dd"),true));\n    }\n    @RequestMapping(value = "/add", method = RequestMethod.POST)\n    public String add(int id, String name, double sal, Date hiredate,\n                    Model model) throws Exception {\n        System.out.println("HelloAction::add()::POST");\n        model.addAttribute("id", id);\n        model.addAttribute("name", name);\n        model.addAttribute("sal", sal);\n        model.addAttribute("hiredate", hiredate);\n        return "/register.jsp";\n    }\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsp"},'jsp\uff1a\n<form action="${pageContext.request.contextPath}/user/add.action" method="POST">\n    ID<input type="text" name="id" value="${id}"/><br/>\n    name<input type="text" name="name" value="${name}"/><br/>\n    sal<input type="text" name="sal" value="${sal}"/><br/>\n    hiredate <input type="text" name="hiredate" value=\'<fmt:formatDate value="${hiredate}" type="date"/>\'/><br/>\n    <input type="submit" value="\xd7\xa2\xb2\xe1"/>\n</form> \n')),(0,a.kt)("h1",{id:"\u7ed3\u679c\u7684\u8f6c\u53d1\u548c\u91cd\u5b9a\u5411"},"\u7ed3\u679c\u7684\u8f6c\u53d1\u548c\u91cd\u5b9a\u5411"),(0,a.kt)("p",null,"1\uff09 \u5728\u8f6c\u53d1\u60c5\u51b5\u4e0b\uff0c\u5171\u4eabrequest\u57df\u5bf9\u8c61\uff0c\u4f1a\u5c06\u53c2\u6570\u4ece\u7b2c\u4e00\u4e2a\u4e1a\u52a1\u63a7\u5236\u65b9\u6cd5\u4f20\u5165\u7b2c\u4e8c\u4e2a\u4e1a\u52a1\u63a7\u5236\u65b9\u6cd5\uff0c\u91cd\u5b9a\u5411\u5219\u4e0d\u884c "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u5220\u9664id=10 \u53f7\u7684\u7528\u6237\uff0c\u518d\u67e5\u8be2\u7528\u6237\n@Controller\n@RequestMapping(value="/user")\npublic class UserAction {\n \n        @RequestMapping(value="/delete")\n        public String delete(int id) throws Exception{\n                System.out.println("\u5220\u9664\u7528\u6237->" + id);\n                //\u8f6c\u53d1\u5230find()\n                return "forward:/user/find.action";\n                //\u91cd\u5b9a\u5411\u5230find()\n                //return "redirect:/user/find.action";\n        }\n        @RequestMapping(value="/find")\n        public String find(int id) throws Exception{\n                System.out.println("\u67e5\u8be2\u7528\u6237->" + id);\n                return "/success.jsp";\n        }\n}\n')),(0,a.kt)("p",null,"2\uff09Spring MVC \u9ed8\u8ba4\u91c7\u7528\u7684\u662f\u8f6c\u53d1\u6765\u5b9a\u4f4d\u89c6\u56fe\uff0c\u5982\u679c\u8981\u4f7f\u7528\u91cd\u5b9a\u5411\uff0c\u53ef\u4ee5\n1\uff0c\u4f7f\u7528RedirectView\n2\uff0c\u4f7f\u7528redirect:\u524d\u7f00"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public ModelAndView login(){  \n    RedirectView view = new RedirectView("regist.do");  \n    return new ModelAndView(view);  \n}  \n')),(0,a.kt)("p",null,"or (\u66f4\u5e38\u7528)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public String login(){  \n    //TODO  \n    return "redirect:/regist";// \u540e\u9762\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u65b9\u6cd5\u7528\u4e8e\u5904\u7406 /regist \u8bbf\u95ee  \n}\n\n')),(0,a.kt)("p",null,"\u8bf7\u6c42\u8def\u5f84\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\u5bf9\u5e94\u4e00\u4e2aController\u65b9\u6cd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@RequestMapping({ "/", "/index" })  \n    public String index() throws Exception {  \n        return "index";  \n    } \n')),(0,a.kt)("h1",{id:"\u8fd4\u56dejson-responsebody"},"\u8fd4\u56dejson, @ResponseBody"),(0,a.kt)("p",null,"\u63d0\u4ea4\u8868\u5355\u540e\uff0c\u5c06JavaBean\u4fe1\u606f\u4ee5JSON\u6587\u672c\u5f62\u5f0f\u8fd4\u56de\u5230\u6d4f\u89c8\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'       \n    // User.java\npublic class User {\n        private Integer id;\n        private String name;\n        private Double sal;\n    //    setter&getter\n}\n\n// UserAction.java\n@Controller\n@RequestMapping(value="/user")\npublic class UserAction {\n \n    @RequestMapping(value="/add")\n    public @ResponseBody User add(User user) throws Exception{\n        System.out.println(user.getId()+":"+user.getName()+":"+user.getSal());\n        return user;//\u7531\u4e8e\u4f7f\u7528\u4e86ResponseBody\u6ce8\u89e3\uff0c\u8fd9\u91ccuser\u4f1a\u4f5c\u4e3ahttp\u6b63\u6587\u653e\u56de\n    }\n}\n')),(0,a.kt)("p",null,"springmvc.xml"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- Action\u63a7\u5236\u5668 --\x3e\n<context:component-scan base-package="com.xiaoyu.springmvc"/>      \n\n\x3c!-- \u914d\u9002\u5668 --\x3e\n<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">\n    <property name="messageConverters">  \x3c!--\u5c06JavaBean\u4fe1\u606f\u4ee5JSON\u6587\u672c\u5f62\u5f0f\u8fd4\u56de\u5230\u6d4f\u89c8\u5668--\x3e\n        <list>\n            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>\n        </list>\n    </property>\n</bean>\n')),(0,a.kt)("h1",{id:"\u9759\u6001\u8d44\u6e90\u653e\u884c"},"\u9759\u6001\u8d44\u6e90\u653e\u884c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<mvc:resources mapping="/css/**" location="/css/"/>  \n<mvc:resources mapping="/js/**" location="/js/"/>  \n<mvc:resources mapping="/fonts/**" location="/fonts/"/>  \n<mvc:resources mapping="/style/**" location="/style/"/> \n\x3c!-- or \u901a\u8fc7\u540e\u7f00\u786e\u5b9a\u8d44\u6e90 --\x3e\n<mvc:resources location="/" mapping="/**/*.html"/> \n<mvc:resources location="/" mapping="/**/*.js"/> \n<mvc:resources location="/" mapping="/**/*.css"/> \n<mvc:resources location="/" mapping="/**/*.png"/> \n<mvc:resources location="/" mapping="/**/*.gif"/>\n\n')),(0,a.kt)("p",null,"\u6216\u8005\u76f4\u63a5\u6240\u6709\u9759\u6001\u8d44\u6e90\u76f4\u63a5\u5168\u90e8\u653e\u884c:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"<mvc:default-servlet-handler />  \n")),(0,a.kt)("p",null,"\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728web.xml\u4e2d\u914d\u7f6eservlet\u8fc7\u6ee4\u9759\u6001\u8d44\u6e90"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"<servlet-mapping>\n       <servlet-name>default</servlet-name>\n        <url-pattern>*.css</url-pattern>\n    </servlet-mapping>\n     \n    <servlet-mapping>\n       <servlet-name>default</servlet-name>\n      <url-pattern>*.gif</url-pattern>\n     </servlet-mapping>\n      \n     <servlet-mapping>\n       <servlet-name>default</servlet-name>\n       <url-pattern>*.jpg</url-pattern>\n     </servlet-mapping>\n      \n     <servlet-mapping>\n       <servlet-name>default</servlet-name>\n       <url-pattern>*.js</url-pattern>\n     </servlet-mapping>\n\n")),(0,a.kt)("h1",{id:"requestcontextholder\u83b7\u53d6requestresponse"},"RequestContextHolder\u83b7\u53d6request,response"),(0,a.kt)("h1",{id:"\u7edf\u4e00\u5f02\u5e38\u6355\u83b7"},"\u7edf\u4e00\u5f02\u5e38\u6355\u83b7"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// \u9996\u5148\u81ea\u5b9a\u4e49\u4e00\u4e2aController\u7684\u7236\u7c7b\uff0c\u9700\u8981\u6355\u83b7\u5f02\u5e38\u7684Controller\u7ee7\u627f\u6b64\u7c7b\u5c31\u53ef\u4ee5\u4e86\npublic class BaseController {  \n    \n    /** \n    * \u4f7f\u7528@ExceptionHandler\u6ce8\u89e3\uff0c\u7ee7\u627f\u6b64\u7c7b\u7684Controller\u53d1\u751f\u5f02\u5e38\u65f6\u4f1a\u81ea\u52a8\u6267\u884c\u8be5\u65b9\u6cd5 \n    * @param request \n    * @param e \n    * @return \n    */  \n    @ExceptionHandler  \n    public String exception(HttpServletRequest request, Exception e) {  \n        //\u5bf9\u5f02\u5e38\u8fdb\u884c\u5224\u65ad\u505a\u76f8\u5e94\u7684\u5904\u7406  \n        if(e instanceof NullPointerException){  \n            return "/error1.html";  \n        }else if(e instanceof IllegalArgumentException){  \n            return "/error2.html";  \n        }else{  \n            return "/error3.html";  \n        }  \n    }  \n}  \n\n// \u4f7f\u7528\n@Controller  \npublic class TestAction extends BaseController{  \n    \n    @RequestMapping(value = "/manager/test1f.aspx", method = { RequestMethod.GET, RequestMethod.POST })  \n    public void test1f(HttpServletRequest request, HttpServletResponse response, ModelMap model) throws IOException {  \n        throw new NullPointerException();  \n    }  \n}  \n// \u8fd9\u6837\u8bbf\u95ee"/manager/test1f.aspx"\u65f6\u4f1a\u629b\u51fa\u5f02\u5e38\u5e76\u88ab\u5904\u7406\uff0c\u8df3\u8f6c\u81f3/error1.html\n// \u5982\u679c\u662f\u5904\u7406\u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u5f02\u5e38\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u591a\u4e2a\u7236Controller\uff0c\u6839\u636e\u4e0d\u540c\u4e1a\u52a1\u7ee7\u627f\u5bf9\u5e94\u7684Controller\u5c31\u53ef\u4ee5\u4e86\n\n\n')))}u.isMDXComponent=!0}}]);