"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1445],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return k}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},p=Object.keys(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,p=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=s(n),k=r,h=u["".concat(l,".").concat(k)]||u[k]||m[k]||p;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var p=n.length,o=new Array(p);o[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var s=2;s<p;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},20835:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return k},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return m}});var a=n(83117),r=n(80102),p=(n(67294),n(3905)),o=["components"],i={title:"\u6cb9\u7334\u63d2\u4ef6&\u7f16\u5199\u811a\u672c\ud83d\udc12",date:new Date("2022-11-12T00:00:00.000Z"),tag:["\u6cb9\u7334","\u63d2\u4ef6","\u811a\u672c"],toc_min_heading_level:2,toc_max_heading_level:5},l=void 0,s={unversionedId:"greasy-monkey",id:"greasy-monkey",title:"\u6cb9\u7334\u63d2\u4ef6&\u7f16\u5199\u811a\u672c\ud83d\udc12",description:"- 1. reference materials",source:"@site/docs/greasy-monkey.md",sourceDirName:".",slug:"/greasy-monkey",permalink:"/en/docs/greasy-monkey",draft:!1,tags:[],version:"current",frontMatter:{title:"\u6cb9\u7334\u63d2\u4ef6&\u7f16\u5199\u811a\u672c\ud83d\udc12",date:"2022-11-12T00:00:00.000Z",tag:["\u6cb9\u7334","\u63d2\u4ef6","\u811a\u672c"],toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"Gradle note",permalink:"/en/docs/gradle"},next:{title:"groovy note",permalink:"/en/docs/groovy-note"}},c={},m=[{value:"4.1. \u4f5c\u4e3a\u5f00\u53d1\u8005, \u5982\u4f55\u9009\u62e9",id:"41-\u4f5c\u4e3a\u5f00\u53d1\u8005-\u5982\u4f55\u9009\u62e9",level:2},{value:"4.2. \u80fd\u529b api",id:"42-\u80fd\u529b-api",level:2},{value:"4.3. \u5de5\u7a0b\u5316",id:"43-\u5de5\u7a0b\u5316",level:2},{value:"4.4. \u53d1\u5e03",id:"44-\u53d1\u5e03",level:2},{value:"4.4.1. \u81ea\u52a8\u53d1\u5e03",id:"441-\u81ea\u52a8\u53d1\u5e03",level:3},{value:"4.5. \u6027\u80fd",id:"45-\u6027\u80fd",level:2},{value:"5.1. \u63a8\u8350\u4f7f\u7528\u5de5\u5177 \u5de5\u7a0b\u5316",id:"51-\u63a8\u8350\u4f7f\u7528\u5de5\u5177-\u5de5\u7a0b\u5316",level:2},{value:"5.2. tips",id:"52-tips",level:2},{value:"5.2.1. script name &amp; version &amp; description",id:"521-script-name--version--description",level:3},{value:"5.2.2. import js script &amp; match url",id:"522-import-js-script--match-url",level:3},{value:"5.2.3. custom style",id:"523-custom-style",level:3},{value:"5.2.4. fetch and fix cors",id:"524-fetch-and-fix-cors",level:3},{value:"5.2.5. register menu command &amp; open tab",id:"525-register-menu-command--open-tab",level:3},{value:"5.2.6. store data",id:"526-store-data",level:3},{value:"5.2.7. copy to clipboard",id:"527-copy-to-clipboard",level:3},{value:"5.2.8. print log",id:"528-print-log",level:3},{value:"5.2.9. setup webpage notification",id:"529-setup-webpage-notification",level:3}],u={toc:m};function k(e){var t=e.components,n=(0,r.Z)(e,o);return(0,p.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#1-reference-materials"},"1. reference materials")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#2-%E6%8F%92%E4%BB%B6"},"2. \u63d2\u4ef6")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#3-%E8%84%9A%E6%9C%AC%E5%8E%9F%E7%90%86"},"3. \u811a\u672c\u539f\u7406")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#4-%E6%8F%92%E4%BB%B6-or-%E8%84%9A%E6%9C%AC"},"4. \u63d2\u4ef6 or \u811a\u672c"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#41-%E4%BD%9C%E4%B8%BA%E5%BC%80%E5%8F%91%E8%80%85-%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9"},"4.1. \u4f5c\u4e3a\u5f00\u53d1\u8005, \u5982\u4f55\u9009\u62e9")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#42-%E8%83%BD%E5%8A%9B-api"},"4.2. \u80fd\u529b api")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#43-%E5%B7%A5%E7%A8%8B%E5%8C%96"},"4.3. \u5de5\u7a0b\u5316")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#44-%E5%8F%91%E5%B8%83"},"4.4. \u53d1\u5e03"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#441-%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83"},"4.4.1. \u81ea\u52a8\u53d1\u5e03")))),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#45-%E6%80%A7%E8%83%BD"},"4.5. \u6027\u80fd")))),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#5-%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99"},"5. \u811a\u672c\u7f16\u5199"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#51-%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7-%E5%B7%A5%E7%A8%8B%E5%8C%96"},"5.1. \u63a8\u8350\u4f7f\u7528\u5de5\u5177 \u5de5\u7a0b\u5316")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#52-tips"},"5.2. tips"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#521-script-name--version--description"},"5.2.1. script name \\& version \\& description")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#522-import-js-script--match-url"},"5.2.2. import js script \\& match url")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#523-custom-style"},"5.2.3. custom style")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#524-fetch-and-fix-cors"},"5.2.4. fetch and fix cors")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#525-register-menu-command--open-tab"},"5.2.5. register menu command \\& open tab")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#526-store-data"},"5.2.6. store data")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#527-copy-to-clipboard"},"5.2.7. copy to clipboard")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#528-print-log"},"5.2.8. print log")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#529-setup-webpage-notification"},"5.2.9. setup webpage notification")))))),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#6-js-%E9%80%86%E5%90%91"},"6. js \u9006\u5411"))),(0,p.kt)("h1",{id:"1-reference-materials"},"1. reference materials"),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"https://www.v2ex.com/t/848726"},"https://www.v2ex.com/t/848726")),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"https://www.tampermonkey.net/documentation.php"},"https://www.tampermonkey.net/documentation.php")),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"http://manuals.chudov.com/diveintogreasemonkey-2005-05-09/diveintogreasemonkey.pdf"},"http://manuals.chudov.com/diveintogreasemonkey-2005-05-09/diveintogreasemonkey.pdf")),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"http://www.ttlsa.com/docs/greasemonkey/"},"http://www.ttlsa.com/docs/greasemonkey/")),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"https://bbs.tampermonkey.net.cn/thread-184-1-1.html"},"https://bbs.tampermonkey.net.cn/thread-184-1-1.html")),(0,p.kt)("p",null,"js \u548c dom \u4ea4\u4e92\n",(0,p.kt)("a",{parentName:"p",href:"http://caibaojian.com/javascript-api-collection.html"},"http://caibaojian.com/javascript-api-collection.html"),"\n",(0,p.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903976052195341"},"https://juejin.cn/post/6844903976052195341"),"\n",(0,p.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/kilig/p/12185238.html"},"https://www.cnblogs.com/kilig/p/12185238.html")),(0,p.kt)("p",null,"\u6559\u7a0b\n",(0,p.kt)("a",{parentName:"p",href:"https://segmentfault.com/a/1190000038328999#item-5-4"},"https://segmentfault.com/a/1190000038328999#item-5-4"),"\n",(0,p.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/90f50744987d"},"https://www.jianshu.com/p/90f50744987d"),"\n",(0,p.kt)("a",{parentName:"p",href:"https://space.bilibili.com/1037793830/channel/series"},"https://space.bilibili.com/1037793830/channel/series"),"\n",(0,p.kt)("a",{parentName:"p",href:"https://bbs.tampermonkey.net.cn/thread-184-1-1.html"},"https://bbs.tampermonkey.net.cn/thread-184-1-1.html"),"\n",(0,p.kt)("a",{parentName:"p",href:"http://www.ttlsa.com/docs/greasemonkey/"},"http://www.ttlsa.com/docs/greasemonkey/")),(0,p.kt)("h1",{id:"2-\u63d2\u4ef6"},"2. \u63d2\u4ef6"),(0,p.kt)("p",null,"Tampermonkey \u4e0d\u5f00\u6e90 ",(0,p.kt)("a",{parentName:"p",href:"https://www.tampermonkey.net/"},"https://www.tampermonkey.net/"),(0,p.kt)("br",{parentName:"p"}),"\n","Violentmonkey \u5f00\u6e90, ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/violentmonkey/violentmonkey"},"https://github.com/violentmonkey/violentmonkey")," , \u4f46\u662f\u66f4\u65b0\u811a\u672c\u662f\u6ca1\u6709 diff, \u8fd9\u633a\u53ef\u6015\u7684",(0,p.kt)("br",{parentName:"p"}),"\n","Greasemonkey",(0,p.kt)("br",{parentName:"p"}),"\n","scriptcat ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/scriptscat/scriptcat"},"https://github.com/scriptscat/scriptcat"),", \u56fd\u4ea7\u5f00\u6e90, \u652f\u6301\u5b9a\u65f6, \u540e\u53f0\u8fd0\u884c"),(0,p.kt)("h1",{id:"3-\u811a\u672c\u539f\u7406"},"3. \u811a\u672c\u539f\u7406"),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u7528\u6237\u811a\u672c\u5176\u5b9e\u662f\u4e00\u79cd\u6ce8\u5165\u5f0f\u7684 JavaScript \u7a0b\u5e8f\uff0c\u5728\u7f51\u9875\u672c\u8eab\u7684\u7a0b\u5e8f\u4e4b\u5916\uff0c\u901a\u8fc7\u4e00\u4e9b\u624b\u6bb5\uff0c\u5c06\u7528\u6237\u9700\u8981\u7684\u6570\u636e\u548c\u903b\u8f91\u6ce8\u5165\u5230\u5f53\u524d\u7684\u7f51\u9875\u4e2d\uff0c\u8fbe\u5230\u4fee\u6539\u754c\u9762\u3001\u589e\u52a0\u529f\u80fd\u7b49\u7b49\u7684\u76ee\u7684")),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u63d0\u4f9b\u4e00\u4e9b\u666e\u901a JavaScript \u5b9e\u73b0\u4e0d\u4e86\u7684\u80fd\u529b:"),(0,p.kt)("pre",{parentName:"blockquote"},(0,p.kt)("code",{parentName:"pre"},"  GM_xmlhttpRequest\uff1a\u7528\u4e8e\u53d1\u8d77\u8de8\u57df\u8bf7\u6c42\n  GM_registerMenuCommand\uff1a\u5f53\u7528\u6237\u64cd\u4f5c\u83dc\u5355\u65f6\uff0c\u89e6\u53d1\u4e00\u4e2a\u884c\u4e3a\n"))),(0,p.kt)("h1",{id:"4-\u63d2\u4ef6-or-\u811a\u672c"},"4. \u63d2\u4ef6 or \u811a\u672c"),(0,p.kt)("h2",{id:"41-\u4f5c\u4e3a\u5f00\u53d1\u8005-\u5982\u4f55\u9009\u62e9"},"4.1. \u4f5c\u4e3a\u5f00\u53d1\u8005, \u5982\u4f55\u9009\u62e9"),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"https://zh.wikipedia.org/zh-hk/Greasemonkey"},"Greasy Monkey user.js"),(0,p.kt)("br",{parentName:"p"}),"\n",(0,p.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/mv3/devguide/"},"Chrome plugin dev guide")),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"user.js \u662f\u4e00\u4e2a\u5f00\u653e\u7684\u7684\u6807\u51c6\uff0c\u6700\u65e9\u7531 Firefox \u7684\u4e00\u4e2a\u63d2\u4ef6\u63d0\u51fa\uff0c\u540e\u6765\u5728 chrome \u5f97\u5230\u539f\u751f\u652f\u6301, \u9664\u4e86\u9876\u90e8\u7684\u58f0\u660e\u4fe1\u606f\u4ee5\u53ca\u4e00\u4e9b GM","_","*"," \u7684\u7279\u6b8a api \u4e4b\u5916\uff0c\u5b83\u4e0e\u666e\u901a\u7684 JavaScript \u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c."),(0,p.kt)("pre",{parentName:"blockquote"},(0,p.kt)("code",{parentName:"pre"},"  \u666e\u901a JavaScript \u505a\u4e0d\u5230\u7684\u4e8b\u60c5\uff0cuser.js \u4e5f\u57fa\u672c\u6ca1\u6cd5\u5b9e\u73b0\u3002\u4f8b\u5982 \u83b7\u53d6\u6240\u6709\u7684\u6d4f\u89c8\u5668\u6807\u7b7e\u9875 \u8fd9\u79cd\u6d89\u53ca\u5230\u6d4f\u89c8\u5668\u672c\u8eab\u7684\u64cd\u4f5c\n"))),(0,p.kt)("br",null),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u63d2\u4ef6\u5219\u4e0d\u540c, \u53ef\u4ee5\u6839\u636e\u4e2a\u4eba\u9700\u8981\u6216\u504f\u597d\u6765\u5b9a\u5236 Chrome \u529f\u80fd\u548c\u884c\u4e3a\u3002\u5b83\u4eec\u57fa\u4e8e Web \u6280\u672f\uff08\u4f8b\u5982 HTML\uff0cJavaScript \u548c CSS\uff09\u6784\u5efa"),(0,p.kt)("pre",{parentName:"blockquote"},(0,p.kt)("code",{parentName:"pre"},"  \u80fd\u8bbf\u95ee\u6d4f\u89c8\u5668\u4f17\u591a\u7684\u6269\u5c55 API\uff0c\u5b9e\u73b0\u5bf9\u6d4f\u89c8\u5668\u7ea7\u522b\u7684\u529f\u80fd\u5b9a\u5236 \u2013 \u800c\u975e\u4ec5\u9650\u4e8e\u7f51\u7ad9\u3002\u4f8b\u5982\u4e0a\u9762 user.js \u505a\u4e0d\u5230\u7684\u4e8b\u60c5 \u83b7\u53d6\u6240\u6709\u7684\u6d4f\u89c8\u5668\u6807\u7b7e\u9875 \u6d4f\u89c8\u5668\u63d2\u4ef6\u53ef\u4ee5\u8f7b\u6613\u5b9e\u73b0\u3002\n\n  user.js \u76f8\u5f53\u4e8e \u63d2\u4ef6\u7684\u5b50\u96c6(\u7c7b\u4f3c content script: https://developer.chrome.com/extensions/content_scripts)\n"))),(0,p.kt)("h2",{id:"42-\u80fd\u529b-api"},"4.2. \u80fd\u529b api"),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"https://www.tampermonkey.net/documentation.php"},"user.js api"),(0,p.kt)("br",{parentName:"p"}),"\n",(0,p.kt)("a",{parentName:"p",href:"https://developer.chrome.com/extensions/devguide"},"chrome plugin api")),(0,p.kt)("h2",{id:"43-\u5de5\u7a0b\u5316"},"4.3. \u5de5\u7a0b\u5316"),(0,p.kt)("p",null,"\u5de5\u7a0b\u5316\u7684\u96be\u70b9\u4e3b\u8981\u5728:"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"\u4fdd\u8bc1\u6253\u5305\u540e\u9876\u90e8\u4fe1\u606f\u8bf4\u660e\u6ce8\u91ca\u4ecd\u7136\u5728\u6700\u9876\u90e8"),(0,p.kt)("li",{parentName:"ul"},"\u652f\u6301\u591a\u5165\u53e3\u6253\u5305"),(0,p.kt)("li",{parentName:"ul"},"\u652f\u6301 TypeScript"),(0,p.kt)("li",{parentName:"ul"},"\u652f\u6301 vue/react \u73b0\u4ee3\u524d\u7aef\u6846\u67b6")),(0,p.kt)("p",null,"Available engineering solution refer to ",(0,p.kt)("a",{parentName:"p",href:"https://bbs.tampermonkey.net.cn/thread-3399-1-1.html"},"here")),(0,p.kt)("h2",{id:"44-\u53d1\u5e03"},"4.4. \u53d1\u5e03"),(0,p.kt)("p",null,"user.js \u53ef\u4ee5\u53d1\u5e03\u5728\u4efb\u4f55\u9759\u6001\u6258\u7ba1\u670d\u52a1\u91cc\uff0c\u4e00\u822c\u53ef\u4ee5\u653e\u5728 GreasyFork \u4e0a\uff0c\u4f9b\u9700\u8981\u7684\u7528\u6237\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u5176\u5b89\u88c5\u3002"),(0,p.kt)("p",null,"\u800c chrome \u63d2\u4ef6\u5219\u53ea\u80fd\u901a\u8fc7 chrome web store \u8fdb\u884c\u5206\u53d1"),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u800c\u4e14\u6bcf\u6b21\u66f4\u65b0\u6216\u4e0a\u67b6\u90fd\u9700\u8981\u88ab\u5ba1\u6838\uff0c\u8fd9\u5176\u5b9e\u662f\u6bd4\u8f83\u82b1\u65f6\u95f4\u7684\uff0c\u5e76\u975e\u662f\u5373\u65f6\u6027\u7684\u3002\u540c\u65f6 web store \u4e5f\u6709\u6ce8\u518c\u8d39\u7528\uff0c\u5fc5\u987b\u4f7f\u7528 Visa \u7b49\u56fd\u5916\u4fe1\u7528\u5361\u652f\u4ed8 $5\uff0c\u800c\u8fd9\u5bf9\u4e8e\u56fd\u5185\u5f00\u53d1\u8005\u800c\u8a00\u662f\u4e00\u4ef6\u6bd4\u8f83\u9ebb\u70e6\u7684\u4e8b\u60c5\u3002")),(0,p.kt)("h3",{id:"441-\u81ea\u52a8\u53d1\u5e03"},"4.4.1. \u81ea\u52a8\u53d1\u5e03"),(0,p.kt)("p",null,"GreasyFork \u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u5bfc\u5165 GitHub \u4e0a\u7684\u6e90\u7801\u548c README \u53d1\u5e03\u4e00\u4e2a\u811a\u672c\uff0c\u540c\u65f6\u5728\u540e\u7eed\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u66f4\u65b0."),(0,p.kt)("p",null,"\u914d\u5408 GitHub actions \u6765\u5b9e\u73b0\u81ea\u52a8\u53d1\u5e03"),(0,p.kt)("p",null,"\u5728\u9879\u76ee\u6587\u4ef6\u5939\u4e0b\u5efa\u7acb .github/workflows/build.yml\n(\u5f53\u6211\u4eec\u628a\u4ee3\u7801\u63d0\u4ea4\u5230 Github \uff0c\u5c31\u4f1a\u81ea\u52a8\u89e6\u53d1 workflow \uff0c\u4f9d\u6b21\u6267\u884c yarn install \u3001yarn build \u5e76\u4e14\u81ea\u52a8\u5c06 dist \u76ee\u5f55\u4e0b\u7684\u4ee3\u7801\u81ea\u52a8\u90e8\u7f72\u5230 GitHub pages\u3002\u590d\u5236 pages \u4e2d\u7684 raw \u6e90\u6587\u4ef6\u5730\u5740, \u8d34\u5230 greasy fork \u7f51\u7ad9\u4e0a; \u8bbe\u7f6e\u811a\u672c\u540c\u6b65\u4e3a\u81ea\u52a8; \u5e76\u4e14\u8bbe\u7f6e webhook)"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yml"},"name: GitHub Pages\n\non:\n  push:\n    branches:\n      - main\n  pull_request:\n\njobs:\n  deploy:\n    runs-on: ubuntu-20.04\n    permissions:\n      contents: write\n    concurrency:\n      group: ${{ github.workflow }}-${{ github.ref }}\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node\n        uses: actions/setup-node@v3\n        with:\n          node-version: \"14\"\n\n      - name: Get yarn cache\n        id: yarn-cache\n        run: echo \"::set-output name=dir::$(yarn cache dir)\"\n\n      - name: Cache dependencies\n        uses: actions/cache@v2\n        with:\n          path: ${{ steps.yarn-cache.outputs.dir }}\n          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\n          restore-keys: |\n            ${{ runner.os }}-yarn-\n\n      - run: yarn install\n      - run: yarn build\n\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        if: ${{ github.ref == 'refs/heads/main' }}\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./dist\n\n")),(0,p.kt)("h2",{id:"45-\u6027\u80fd"},"4.5. \u6027\u80fd"),(0,p.kt)("p",null,"\u5bf9\u4e8e\u4e00\u822c\u7528\u6237\u800c\u8a00\uff0c\u5b89\u88c5\u4e00\u4e2a chrome \u63d2\u4ef6\u4f1a\u4e00\u76f4\u5728\u540e\u53f0\u5f00\u542f\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u800c\u811a\u672c\u4e0d\u4f1a \u2013 \u53ea\u4f1a\u5728\u9700\u8981\u751f\u6548\u7684\u7f51\u7ad9\u4e0a\u5e94\u7528\u3002"),(0,p.kt)("h1",{id:"5-\u811a\u672c\u7f16\u5199"},"5. \u811a\u672c\u7f16\u5199"),(0,p.kt)("h2",{id:"51-\u63a8\u8350\u4f7f\u7528\u5de5\u5177-\u5de5\u7a0b\u5316"},"5.1. \u63a8\u8350\u4f7f\u7528\u5de5\u5177 \u5de5\u7a0b\u5316"),(0,p.kt)("p",null,"IDE: vscode, Chrome"),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528 Chrome \u53ef\u4ee5\u53c2\u8003 ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/violentmonkey/generator-userscript"},"https://github.com/violentmonkey/generator-userscript"))),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},(0,p.kt)("a",{parentName:"p",href:"https://github.com/Trim21/webpack-userscript-template"},"https://github.com/Trim21/webpack-userscript-template")," (Trim21 \u63d0\u4f9b\u4e86\uff0c\u53ef\u80fd\u662f\u5230\u76ee\u524d\u4e3a\u6b62\u6700\u597d\u7684\u5927\u578b UserScript \u5f00\u53d1\u89e3\u51b3\u65b9\u6848\uff0c\u4f7f\u7528 webpack \u914d\u5408 LiveReloadPlugin \u5b9e\u73b0\u6a21\u5757\u5316\u5f00\u53d1\u4e0e\u81ea\u52a8\u5316\u6d4b\u8bd5\u3002refer to ",(0,p.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/49509874/how-can-i-develop-my-userscript-in-my-favourite-ide-and-avoid-copy-pasting-it-to/63478925#63478925"},"here"),")")),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},(0,p.kt)("a",{parentName:"p",href:"https://github.com/lisonge/vite-plugin-monkey"},"https://github.com/lisonge/vite-plugin-monkey")," \u4e5f\u4e0d\u9519, \u7528\u7684\u4eba\u591a  "),(0,p.kt)("ul",{parentName:"blockquote"},(0,p.kt)("li",{parentName:"ul"},"\u989d\u5916\u7684\u811a\u624b\u67b6\u4e00\u952e\u521d\u59cb\u5316\u5404\u79cd\u6a21\u677f vue/react/vanilla/svelte/preact"),(0,p.kt)("li",{parentName:"ul"},"\u652f\u6301 Tampermonkey \u548c Violentmonkey \u548c Greasemonkey \u7684\u811a\u672c\u8f85\u52a9\u5f00\u53d1"),(0,p.kt)("li",{parentName:"ul"},"\u6253\u5305\u81ea\u52a8\u6ce8\u5165\u811a\u672c\u914d\u7f6e\u5934\u90e8\u6ce8\u91ca"),(0,p.kt)("li",{parentName:"ul"},"\u5f53 \u7b2c\u4e00\u6b21\u542f\u52a8 \u6216 \u811a\u672c\u914d\u7f6e\u6ce8\u91ca\u6539\u53d8\u65f6 \u81ea\u52a8\u5728\u9ed8\u8ba4\u6d4f\u89c8\u5668\u6253\u5f00\u811a\u672c\u5b89\u88c5"),(0,p.kt)("li",{parentName:"ul"},"\u53cb\u597d\u7684\u5229\u7528 @require \u914d\u7f6e\u5e93\u7684 cdn \u7684\u65b9\u6848\uff0c\u5927\u5927\u51cf\u5c11\u6784\u5efa\u811a\u672c\u5927\u5c0f"),(0,p.kt)("li",{parentName:"ul"},"\u5b8c\u5168\u7684 Typescript \u548c Vite \u7684\u5f00\u53d1\u4f53\u9a8c\uff0c\u6bd4\u5982\u6a21\u5757\u70ed\u66ff\u6362,\u79d2\u542f\u52a8"))),(0,p.kt)("p",null,"\u4f7f\u7528 vscode, \u53ef\u4ee5: \u7ed9 js \u6240\u5728\u76ee\u5f55\u5f00\u4e2a web \u670d\u52a1\uff0c\uff0c\u6d4f\u89c8\u5668\u6253\u5f00\u5c31\u80fd\u88ab\u8bc6\u522b\u7136\u540e\u5b89\u88c5\uff08\u867d\u7136\u4e0d\u592a\u6e05\u695a\uff0c\u597d\u50cf\u9700\u8981 .user.js \u540e\u7f00\uff1f\uff1f\uff09"),(0,p.kt)("p",null,"\u8c03\u8bd5: livereload"),(0,p.kt)("h2",{id:"52-tips"},"5.2. tips"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"\u83b7\u53d6 spa \u5355\u9875\u5e94\u7528\u5185\u5bb9 ",(0,p.kt)("a",{parentName:"p",href:"https://www.v2ex.com/t/850248"},"https://www.v2ex.com/t/850248")),(0,p.kt)("blockquote",{parentName:"li"},(0,p.kt)("p",{parentName:"blockquote"},(0,p.kt)("a",{parentName:"p",href:"https://www.v2ex.com/t/787256"},"https://www.v2ex.com/t/787256"))))),(0,p.kt)("h3",{id:"521-script-name--version--description"},"5.2.1. script name & version & description"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"name    \u540d\u79f0\uff0c\u53ef\u81ea\u5df1\u7ed9\u811a\u672c\u53d6\u4e00\u4e2a\u540d\u5b57\nnamespace   \u547d\u540d\u7a7a\u95f4\uff0c\u53ef\u5199\u6210\u7f51\u5740\nversion \u811a\u672c\u7684\u7248\u672c\uff0c\u7528\u4e8e\u68c0\u67e5\u66f4\u65b0\u3002\u4f46\u9700\u8981\u7528\u6237\u8bbe\u7f6e\u66f4\u65b0\u9891\u7387\ndescription \u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u811a\u672c\u5177\u4f53\u505a\u4ec0\u4e48\u7684\nauthor  \u4f5c\u8005\u540d\u5b57\n\n@homepage\u3001@homepageURL\u3001@website and @source\uff1a\u5728\u9009\u9879\u9875\u9762\u4e0a\u7528\u4e8e\u5c06\u811a\u672c\u540d\u79f0\u94fe\u63a5\u5230\u7ed9\u5b9a\u9875\u9762\u7684\u4f5c\u8005\u4e3b\u9875\u3002 \u8bf7\u6ce8\u610f\uff0c\u5982\u679c@namespace\u6807\u8bb0\u4ee5\u201c http\uff1a//\u201d\u5f00\u5934\uff0c\u5176\u5185\u5bb9\u4e5f\u5c06\u7528\u4e8e\u6b64\n\n@icon\u3001@iconURL\u3001@defaulticon\uff1a\u4f4e\u5206\u7387\u7684\u811a\u672c\u56fe\u6807\uff0c\u4f1a\u5728\u811a\u672c\u7ba1\u7406\u5217\u8868\u4e0a\u663e\u793a\n@icon64\u3001@icon64URL\uff1a\u6b64\u811a\u672c\u56fe\u6807\u4e3a64x64\u50cf\u7d20\u3002\u5982\u679c\u8fd8\u914d\u7f6e\u4e86@icon\uff0c\u90a3\u4e48@icon\u56fe\u50cf\u5c06\u5728\u9009\u9879\u9875\u9762\u88ab\u7f29\u653e\n\n@updateURL\uff1a\u66f4\u65b0\u811a\u672c\u7684\u5730\u5740\uff0c\u6ce8\u610f\uff1a\u53ea\u6709\u5b58\u5728 @version \u6807\u7b7e\u624d\u4f1a\u53bb\u66f4\u65b0\n@downloadURL\uff1a\u5b9a\u4e49\u68c0\u6d4b\u5230\u66f4\u65b0\u65f6\u5c06\u4ece\u4e2d\u4e0b\u8f7d\u811a\u672c\u7684 URL\u3002\u5982\u679c\u503c\u4e3a none\uff0c\u5219\u4e0d\u4f1a\u6267\u884c\u66f4\u65b0\u68c0\u67e5\n\n\ngrant \u6307\u5b9a\u811a\u672c\u8fd0\u884c\u6240\u9700\u6743\u9650\uff0c\u5982\u679c\u811a\u672c\u62e5\u6709\u76f8\u5e94\u7684\u6743\u9650\uff0c\u5c31\u53ef\u4ee5\u8c03\u7528\u6cb9\u7334\u6269\u5c55\u63d0\u4f9b\u7684API\u4e0e\u6d4f\u89c8\u5668\u8fdb\u884c\u4ea4\u4e92\u3002\u5982\u679c\u8bbe\u7f6e\u4e3anone\u7684\u8bdd\uff0c\u5219\u4e0d\u4f7f\u7528\u6c99\u7bb1\u73af\u5883\uff0c\u811a\u672c\u4f1a\u76f4\u63a5\u8fd0\u884c\u5728\u7f51\u9875\u7684\u73af\u5883\u4e2d\uff0c\u8fd9\u65f6\u5019\u65e0\u6cd5\u4f7f\u7528\u5927\u90e8\u5206\u6cb9\u7334\u6269\u5c55\u7684API\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u7684\u8bdd\uff0c\u6cb9\u7334\u4f1a\u9ed8\u8ba4\u6dfb\u52a0\u51e0\u4e2a\u6700\u5e38\u7528\u7684API\n\nconnect \u5f53\u7528\u6237\u4f7f\u7528GM_xmlhttpRequest\u8bf7\u6c42\u8fdc\u7a0b\u6570\u636e\u7684\u65f6\u5019\uff0c\u9700\u8981\u4f7f\u7528connect\u6307\u5b9a\u5141\u8bb8\u8bbf\u95ee\u7684\u57df\u540d\uff0c\u652f\u6301\u57df\u540d\u3001\u5b50\u57df\u540d\u3001IP\u5730\u5740\u4ee5\u53ca*\u901a\u914d\u7b26\n\nupdateURL   \u3000\u811a\u672c\u66f4\u65b0\u7f51\u5740\uff0c\u5f53\u6cb9\u7334\u6269\u5c55\u68c0\u67e5\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u4f1a\u5c1d\u8bd5\u4ece\u8fd9\u4e2a\u7f51\u5740\u4e0b\u8f7d\u811a\u672c\uff0c\u7136\u540e\u6bd4\u5bf9\u7248\u672c\u53f7\u786e\u8ba4\u662f\u5426\u66f4\u65b0\n")),(0,p.kt)("h3",{id:"522-import-js-script--match-url"},"5.2.2. import js script & match url"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"@match \u7528\u6765\u5339\u914d\u6ce8\u5165\u811a\u672c\u7f51\u5740\u7684 url \u5176\u4e2d * \u4ee3\u8868\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u4efb\u610f\u5b57\u7b26\n    *://*.baidu.com/*  \u5339\u914d baidu \u57df\u540d\u4e0b\u7684\u4efb\u610f\u7f51\u9875\n    *://*/*         \u5339\u914d\u4efb\u610f\u7f51\u5740\n@match \u548c @include \u6807\u7b7e\u542b\u4e49\u7c7b\u4f3c\n@exclude \u6392\u9664 URL\uff0c\u5373\u4f7f\u5b83\u4eec\u5305\u542b\u5728 @include \u6216 @match \u4e2d\u3002\u540c\u6837\u5141\u8bb8\u591a\u4e2a\u6807\u7b7e\u3002\n\n\n@require \u4ee3\u8868\u8981\u6ce8\u5165\u7684\u516c\u7528 JS \u5e93\n    \u5982\u5f15\u5165 jQuery:\n    // @require https://code.jquery.com/jquery-2.1.4.min.js\n    // @require tampermonkey://vendor/jquery.js\n    // @require tampermonkey://vendor/jszip/jszip.js\n\n\n")),(0,p.kt)("h3",{id:"523-custom-style"},"5.2.3. custom style"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},"\u5f00\u542f\u6743\u9650 @grant GM_addStyle, \u4f7f\u7528\u5185\u7f6e\u7684 GM_addStyle \u65b9\u6cd5\n// ==UserScript==\n// @grant        GM_addStyle\n// ==/UserScript==\nGM_addStyle(`pre,code{user-select:auto !important}.signin{display: none !important;}`)\n\n\n\u4e5f\u53ef\u4ee5\u4f7f\u7528 JS \u81ea\u5df1\u5b9e\u73b0\nconst heads = document.querySelector('head');\nconst style = document.createElement('style');\nstyle.setAttribute('type', 'text/css');\nstyle.innerHTML = `pre,code{user-select:auto !important}.signin{display: none !important;}`;\nheads.append(style);\n\n")),(0,p.kt)("h3",{id:"524-fetch-and-fix-cors"},"5.2.4. fetch and fix cors"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'// ==UserScript==\n// @grant        GM_xmlhttpRequest\n// ==/UserScript==\n\n//\u5f02\u6b65\u8bbf\u95ee\u7f51\u9875\u6570\u636e\u7684API\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u6bd4\u8f83\u590d\u6742\uff0c\u6709\u5927\u91cf\u53c2\u6570\u548c\u56de\u8c03\nGM_xmlhttpRequest({\n    headers: {\n      \'content-type\': \'application/json\',\n    },\n    responseType: \'json\',\n    url: \'https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed\',\n    data: \'{"id_type":2,"sort_type":200,"cate_id":"6809637767543259144","cursor":"0","limit":20}\',\n    method: \'POST\',\n    onreadystatechange: (res) => {\n      if (res.readyState === 4) {\n        console.log(res.response)\n      }\n    },\n  })\n\n')),(0,p.kt)("h3",{id:"525-register-menu-command--open-tab"},"5.2.5. register menu command & open tab"),(0,p.kt)("p",null,"\u53f3\u952e\u641c\u7d22"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'// ==UserScript==\n// @grant        GM_registerMenuCommand\n// @grant        GM_openInTab   (\u53ef\u4ee5\u8bbe\u7f6e\u662f\u5426\u5728\u540e\u53f0\u6253\u5f00\u7b49\u51e0\u4e2a\u9009\u9879)\n// ==/UserScript==\n\nGM_registerMenuCommand("GitHub \u641c\u7d22", function () {\n  const str = document.getSelection().toString();\n  if (str) {\n    GM_openInTab(`https://github.com/search?q=${str}`, { active: true });\n  }\n});\n\nGM_registerMenuCommand("NPM \u641c\u7d22", function () {\n  const str = document.getSelection().toString();\n  if (str) {\n    GM_openInTab(`https://www.npmjs.com/search?q=${str}`, { active: true });\n  }\n});\n\n')),(0,p.kt)("h3",{id:"526-store-data"},"5.2.6. store data"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"GM_getValue(name,defaultValue)  \u4ece\u6cb9\u7334\u6269\u5c55\u7684\u5b58\u50a8\u4e2d\u8bbf\u95ee\u6570\u636e\u3002\u53ef\u4ee5\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u5728\u6ca1\u6210\u529f\u83b7\u53d6\u5230\u6570\u636e\u7684\u65f6\u5019\u5f53\u505a\u521d\u59cb\u503c\u3002\u5982\u679c\u4fdd\u5b58\u7684\u662f\u65e5\u671f\u7b49\u7c7b\u578b\u7684\u8bdd\uff0c\u53d6\u51fa\u6765\u7684\u6570\u636e\u4f1a\u53d8\u6210\u6587\u672c\uff0c\u9700\u8981\u81ea\u5df1\u8f6c\u6362\u4e00\u4e0b\u3002\n\nGM_setValue(name,value) \u5c06\u6570\u636e\u4fdd\u5b58\u5230\u5b58\u50a8\u4e2d\n")),(0,p.kt)("h3",{id:"527-copy-to-clipboard"},"5.2.7. copy to clipboard"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"GM_setClipboard(data, info) \u5c06\u6570\u636e\u590d\u5236\u5230\u526a\u8d34\u677f\u4e2d\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8981\u590d\u5236\u7684\u6570\u636e\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fMIME\u7c7b\u578b\uff0c\u7528\u4e8e\u6307\u5b9a\u590d\u5236\u7684\u6570\u636e\u7c7b\u578b\u3002\n")),(0,p.kt)("h3",{id:"528-print-log"},"5.2.8. print log"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"GM_log(message) \u5c06\u65e5\u5fd7\u6253\u5370\u5230\u63a7\u5236\u53f0\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528F12\u5f00\u53d1\u8005\u5de5\u5177\u67e5\u770b\u3002\n")),(0,p.kt)("h3",{id:"529-setup-webpage-notification"},"5.2.9. setup webpage notification"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"GM_notification(details, ondone), GM_notification(text, title, image, onclick)  \u8bbe\u7f6e\u7f51\u9875\u901a\u77e5\n")),(0,p.kt)("h1",{id:"6-js-\u9006\u5411"},"6. js \u9006\u5411"),(0,p.kt)("p",null,"\u82e5\u60f3\u8981\u5b9e\u73b0\u4e00\u4e9b\u6709\u7528\u7684\u811a\u672c\uff0c\u8fd8\u9700\u8981\u5177\u5907\u66f4\u591a\u7684\u77e5\u8bc6\uff0c\u6bd4\u5982JS\u9006\u5411\u5206\u6790"))}k.isMDXComponent=!0}}]);